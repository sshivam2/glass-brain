<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecg Mini Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "While reading the ECG of a 22-year-old male who has come for a wellness assessment outreach camp, you notice regular sharp high-frequency spike giving the appearance of a thick baseline.  Which of the following should you suspect?",
    "choices": [
      {
        "id": 1,
        "text": "Over calibration"
      },
      {
        "id": 2,
        "text": "Electrical Interference"
      },
      {
        "id": 3,
        "text": "Under calibration"
      },
      {
        "id": 4,
        "text": "Poor electrode contact"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Regular <strong>sharp high-frequency spike</strong> giving the appearance of a <strong>thick baseline&nbsp;</strong>is characteristically seen in case of <strong>electrical interference</strong>. It can be caused by electric motors in beds/mattresses, electrical wiring, etc.&nbsp;Electrical interference causes regular oscillation of the ECG trace, giving the appearance of a thickened baseline.</p>\n<p>&nbsp;</p>\n<p>Other Options:</p>\n<p><strong>Poor Electrode contact</strong> would result in <strong>Bizzare ECG patterns</strong>, most clearly visible in the rhythm strip.&nbsp;&nbsp;</p>\n<p><strong>Normally calibrated</strong> ECG recorders show a deflection of <strong>1cm for a 1mV signal.</strong> A calibration signal is usually displayed at the beginning of the ECG record.</p>\n<p><strong>Undercalibration</strong> causes the complexes to look <strong>smaller</strong> while <strong>over calibration</strong> would cause the complexes to look <strong>larger</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In ECG tracings,  sharp irregular spikes of the baseline that are particularly prominent in the limb leads are typically seen in",
    "choices": [
      {
        "id": 1,
        "text": "Patient with hypothyroidism"
      },
      {
        "id": 2,
        "text": "Patient that is not relaxed"
      },
      {
        "id": 3,
        "text": "Recording done with paper speed of 12.5 mm/s"
      },
      {
        "id": 4,
        "text": "Recording done with paper speed of 50 mm/s"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Sharp irregular spikes of the baseline</strong> that are particularly <strong>prominent in the limb leads</strong> are seen in a <strong>patient that is not relaxed.\u00a0</strong></p>\n<p>Though the ECG recorders are configured to pick up the electrical frequency generated by the heart better, they also <strong>detect the contractions of skeletal muscles.</strong> So, unless the patient is relaxed and lying down comfortably, the tracing may show some skeletal muscle activity.</p>\n<p>Ex:-\u00a0</p>\n<p>A patient that is shivering due to cold, or one that has involuntary movements due to conditions like Parkinson's, etc would cause spikes in the baseline of the ECG.</p>\n<p>In the case of <strong>shivering</strong>, the <strong>spikes</strong> would be <strong>more exaggerated and synchronized</strong>\u00a0than that seen in a patient that is not adequately relaxed, because of the skeletal muscle groups contracting together in case of shivering.</p>\n<p>\u00a0</p>\n<p>Other options:</p>\n<ul>\n<li>Patients with <strong>hypothyroidism</strong> would show <strong>bradycardia, low voltage QRS complexes, and widespread T-wave inversions.</strong></li>\n<li>The <strong>recording</strong> is <strong>normally</strong> done with a <strong>paper speed of 25 mm/s. </strong>\n<ul>\n<li>Recording at<strong> 12.5 mm/s</strong>, which is slower than normal, would cause <strong>QRS complex that are close together\u00a0</strong>(creating the false impression of a rapid heart rate) and P waves, QRS complexes, and T waves that are <strong>narrow and spiky</strong></li>\n<li>Recording at <strong>50 mm/s</strong>, which is faster than normal, would produce <strong>longer intervals between QRS complexes</strong> (creating the false impression of a slow heart rate), <strong>widened QRS complexes</strong>, and an <strong>apparently long QT interval</strong>.\u00a0</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The positive and negative electrodes for the lead that is commonly used for identifying the rhythm are respectively",
    "choices": [
      {
        "id": 1,
        "text": "Left leg and right arm"
      },
      {
        "id": 2,
        "text": "Left leg and Left arm"
      },
      {
        "id": 3,
        "text": "Right leg and Left arm"
      },
      {
        "id": 4,
        "text": "Right arm and Left Leg"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>lead II</strong> is commonly used for identifying the<strong> rhythm</strong> and the respective <strong>positive and negative electrodes</strong> are the<strong> left leg and the right arm.</strong></p>\n<p>&nbsp;<strong>Bipolar Limb leads for ECG recording</strong></p>\n<table style=\"width: 205.992px;\">\n<tbody>\n<tr>\n<td style=\"width: 57px;\">\n<p><strong>Lead type</strong></p>\n</td>\n<td style=\"width: 60px;\">\n<p><strong>Positive input (+)</strong></p>\n</td>\n<td style=\"width: 69.9922px;\">\n<p><strong>Negative input (-)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>Lead I</p>\n</td>\n<td style=\"width: 60px;\">\n<p>LA</p>\n</td>\n<td style=\"width: 69.9922px;\">\n<p>RA</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>Lead II</p>\n</td>\n<td style=\"width: 60px;\">\n<p>LL</p>\n</td>\n<td style=\"width: 69.9922px;\">\n<p>RA</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>Lead III</p>\n</td>\n<td style=\"width: 60px;\">\n<p>LL</p>\n</td>\n<td style=\"width: 69.9922px;\">\n<p>LA</p>\n</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>LA &rarr; left arm</li>\n<li>RA &rarr;right arm</li>\n<li>LL&rarr; left foot</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0598488cbdae4bd586798d0fa6b6353dx1280x1142.JPEG"
    ]
  },
  {
    "text": "A 22-year-old patient is assessed with an ECG during his wellness check-up visit. Calculate the heart rate from the ECG given below.",
    "choices": [
      {
        "id": 1,
        "text": "100/min"
      },
      {
        "id": 2,
        "text": "90/min"
      },
      {
        "id": 3,
        "text": "79/min"
      },
      {
        "id": 4,
        "text": "68/min"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The RR interval has 19 small boxes in between, and hence the heart rate is 1500/19~<strong>79/min</strong>.</p>\n<p>The relationship between the heart rate and the RR interval is given by:\u00a0</p>\n<p>Heart rate = 1500/(number of small boxes in between successive R waves)\u00a0</p>\n<p>Methods to calculate heart rate from ECG:\u00a0</p>\n<p><strong>Box counting</strong> methods: This can be done via the number of small boxes or the large boxes between two successive R waves. If using the large boxes, the equation is \u00a0</p>\n<p>Heart rate = 300/(number of large boxes in between successive R waves)\u00a0</p>\n<p><strong>QRS counting</strong> methods: This is used when the heart rate is irregular. Thus there will be a variability in the RR intervals, making the box-counting method unreliable. Here, the number of QRS intervals in a set interval, for example, 10 seconds, is counted. This number is then multiplied by an appropriate factor to get an estimate for 60s. In this example, we would multiple the number of QRS complexes in 10s by 6.\u00a0</p>\n<p>Tachycardia is defined as a heart rate of more than 100 beats/minute and bradycardia is defined as a heart rate of less than 60 beats/minute.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/68cccb471dc140e7ac2835a39586c201.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df69cba4696441aea55b5534366ea884x800x224.JPEG"
    ]
  },
  {
    "text": "The ECG given below shows:",
    "choices": [
      {
        "id": 1,
        "text": "A prolonged PR interval measuring 240 ms"
      },
      {
        "id": 2,
        "text": "A normal PR interval measuring 240 ms"
      },
      {
        "id": 3,
        "text": "A prolonged PR interval measuring 160 ms"
      },
      {
        "id": 4,
        "text": "A normal PR interval measuring 160 ms"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given ECG shows a\u00a0<strong>prolonged PR interval</strong> measuring <strong>240 msec</strong>.</p>\n<p>The given ECG shows a PR interval measuring 6 small boxes. One small box represents 0.04 sec. Therefore,\u00a06 boxes is 6*0.04 sec = 0.240 sec or 240 msec.\u00a0</p>\n<p>The PR interval is measured from the <strong>beginning</strong> of the <strong>P wave</strong> to the <strong>beginning</strong> of the <strong>QRS</strong> <strong>complex</strong>.\u00a0The normal PR interval is <strong>120-200ms</strong>.</p>\n<p>The image below represents the <strong>PR interval</strong>:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/632eb72a256b4e4d816dacf5cd3a21da.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd4026692f9c46439df32a139601af27x115x173.JPEG"
    ]
  },
  {
    "text": "Which of the following condition has the given ECG changes?",
    "choices": [
      {
        "id": 1,
        "text": "Wolff Parkinson White syndrome"
      },
      {
        "id": 2,
        "text": "Paroxysmal Supraventricular tachycardia"
      },
      {
        "id": 3,
        "text": "Hypothermia"
      },
      {
        "id": 4,
        "text": "Lowne Ganong Levine syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given ECG clearly depicts the <strong>Delta wave</strong> at the start of QRS complex. It is characteristic of <strong>WPW </strong>syndrome.</p>\n<p>Wolff-Parkinson-White (WPW) syndrome is <strong>a congenital condition</strong> involving presence of <strong>an abnormal accessory electrical conduction pathway </strong>called the <strong>Bundle of Kent</strong> between the <strong>atria &amp; ventricles</strong>.</p>\n<p>ECG Feature:</p>\n<ul>\n<li><strong>P-R interval &lt;120 ms</strong></li>\n<li><strong>Slurred initial upstroke of QRS</strong> complex referred to as the <strong>\"Delta wave\"</strong>\n<ul>\n<li><strong>WPW pattern \"Type A\"</strong>:<strong> Positive</strong> delta waves in all precordial leads, with small or absent S waves</li>\n<li><strong>WPW pattern \"Type B\"</strong>: A delta wave is <strong>negative</strong>, with prominent S waves, in right precordial leads</li>\n</ul>\n</li>\n<li>The QRS complex as a whole is <strong>slightly widened</strong></li>\n<li><strong>Discordant ST segment and T</strong> wave changes</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2cb9205982cb49c1bdfa76bb006ab2c9.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/603cc0b7bfdf49b3aa704df5c81bb57fx256x165.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f80236ecaa074054a1cc3f53f86bbfcfx248x188.JPEG"
    ]
  },
  {
    "text": "Stimulation of which of the following causes an increase in the RR interval",
    "choices": [
      {
        "id": 1,
        "text": "SA Node"
      },
      {
        "id": 2,
        "text": "Vagus Nerve"
      },
      {
        "id": 3,
        "text": "Right stellate ganglion"
      },
      {
        "id": 4,
        "text": "Left stellate ganglion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>&nbsp;An increase in the R-R interval </strong>in the ECG<strong>&nbsp;</strong>means a&nbsp;<strong>decreased</strong> <strong>heart rate</strong>, which can be caused by&nbsp;<strong>vagal stimulation</strong>.</p>\n<p>&nbsp;</p>\n<p>Note:- SA node stimulation would increase the heart rate and thereby decrease the RR interval</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/3cd61c3f94534a50a022cf682049414bx711x262.PNG"
    ]
  },
  {
    "text": "The stimulation of the right stellate ganglion causes ___.",
    "choices": [
      {
        "id": 1,
        "text": "Decrease in Heart rate"
      },
      {
        "id": 2,
        "text": "Increase in heart rate"
      },
      {
        "id": 3,
        "text": "Increase in RR interval in ECG"
      },
      {
        "id": 4,
        "text": "AV conduction delay"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The stimulation of the <strong>right stellate ganglion</strong> causes an <strong>increase in heart rate </strong>by<strong> stimulation of SA Node</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/3cd61c3f94534a50a022cf682049414bx711x262.PNG"
    ]
  },
  {
    "text": "A 47-year-old woman was brought to the casualty in an unconscious state after having suddenly collapsed. As there was no pulse, cardiopulmonary resuscitation was started and the monitor showed the following rhythm. Which of the following is the least likely cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Hypovolemia"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Hyperthermia"
      },
      {
        "id": 4,
        "text": "Hyperkalemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has an organized, apparently<strong> normal ECG without a pulse&nbsp;</strong>- i.e the patient has pulseless electrical activity (PEA). Of the given etiologies, the least likely is Hyperthermia. However, <strong>hypothermia</strong> is a common cause to be ruled out.</p>\n<p><strong>The immediate treatment for this is giving chest compressions and 1 mg epinephrine</strong> at the earliest until more definitive therapy to the cause can be instituted.&nbsp;It is essential to rule out the reversible causes of cardiac arrest because the treatment for each of them is different and PEA is likely to persist until the cause is treated.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/375f0476167d4ab79965d97851c77d57.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which electrolyte abnormality has to be considered in a patient with the following ECG?",
    "choices": [
      {
        "id": 1,
        "text": "Hypermagnesemia"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Hypocalcemia"
      },
      {
        "id": 4,
        "text": "Hyponatremia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given ECG classically depicts <strong>polymorphic ventricular tachycardia</strong>&mdash;<strong>torsades de pointes.</strong> Torsade rhythm is&nbsp;most commonly seen in association with <strong>hypomagnesemia and hypokalemia.</strong></p>\n<p><strong>Torsades de pointes</strong> is a polymorphic ventricular tachycardia meaning &ldquo;twisting of the points,&rdquo; characterized by twisting of the QRS axis around the baseline and a polymorphic appearance.</p>\n<p>There is QT interval prolongation in the ECG due to a non-uniform delay in repolarization.</p>\n<p>The other cause&nbsp;of torsades de pointes include:</p>\n<ul>\n<li>Drugs like <strong>quinidine, procainamide, disopyramide </strong>and <strong>phenothiazine </strong>(amiodarone is rarely associated with torsades de pointes because the delay in repolarization induced by it is uniform).</li>\n<li>Bradycardia</li>\n<li>Acute ischemia or infarction</li>\n</ul>\n<p><strong>Management: </strong></p>\n<ul>\n<li>Discontinue the offending drug</li>\n<li>Correct electrolyte abnormalities, pH and hypoxia</li>\n<li><strong>Magnesium sulphate</strong> infusion&nbsp;</li>\n<li>Increase the heart rate - electrical pacing, isoproterenol infusion or intravenous atropine&nbsp;</li>\n</ul>\n<p>Note: Although hypocalcemia is associated with prolongation of QT interval, there are only rare reports of torsades de pointes associated with hypocalcemia. So, among the above options, the best answer would be hypokalemia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9fcedd76590341d392257fa41dbcbe94.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old male presents to the emergency with chest discomfort following a football match. His ECG is as below. Which of the following is an accurate description of the ECG finding?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperkalemia"
      },
      {
        "id": 2,
        "text": "De Winter\u2019s T waves"
      },
      {
        "id": 3,
        "text": "Digoxin toxicity"
      },
      {
        "id": 4,
        "text": "Ventricular ectopic"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given ECG depicts <strong>De Winter&rsquo;s T waves</strong>. There is no ST elevation in V2, but there is a hyperacute T-wave. &nbsp;This is a De Winter's T-wave and diagnostic of <strong>near occlusion of the LAD</strong>. &nbsp;V3 also has ST depression with a hyperacute T-wave very suggestive of de Winter's T-waves.</p>\n<ul>\n<li>The de Winter ECG pattern is an&nbsp;<strong>anterior STEMI equivalent</strong>&nbsp;that <strong>presents&nbsp;without&nbsp;obvious ST-segment elevation.</strong></li>\n</ul>\n<p><strong>Diagnostic Criteria</strong></p>\n<ul>\n<li>Tall, prominent, symmetric T waves in the precordial leads</li>\n<li>Upsloping ST-segment depression &gt;1mm at the J-point in the precordial leads</li>\n<li>Absence of ST elevation in the precordial leads</li>\n<li>ST segment elevation (0.5mm-1mm) in aVR</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b0cf8fbf75f540c2b07f0896d26db1e3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The onset of the QRS complex in an ECG corresponds to which phase of cardiac action potential:",
    "choices": [
      {
        "id": 1,
        "text": "Phase 2"
      },
      {
        "id": 2,
        "text": "Phase 3"
      },
      {
        "id": 3,
        "text": "Phase 0"
      },
      {
        "id": 4,
        "text": "Phase 1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The onset of the QRS complex in an ECG corresponds to <strong>phase 0&nbsp;</strong>of the cardiac action potential.</p>\n<p><strong>Cardiac Action Potential and The ECG</strong></p>\n<ul>\n<li>The rapid upstroke (phase 0) of the action potential corresponds to the onset of QRS.&nbsp;</li>\n<li><strong>The plateau (phase 2) corresponds to the isoelectric ST segment.</strong></li>\n<li>Active repolarization (phase 3) corresponds to the inscription(tracing) of the T wave</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb3a558f149a48a6ae1eaa9cff2daaeax1280x1244.JPEG"
    ]
  },
  {
    "text": "A 66-year-old man presents to the emergency department with complaints of palpitations and breathlessness. He has a history of chronic obstructive pulmonary disease. His ECG is given below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Paroxysmal supraventricular tachycardia"
      },
      {
        "id": 2,
        "text": "Atrial fibrillation"
      },
      {
        "id": 3,
        "text": "Atrial flutter"
      },
      {
        "id": 4,
        "text": "Multifocal atrial tachycardia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical feature and the ECG are pointing towards the diagnosis of <strong>multifocal atrial tachycardia </strong>(MAT).</p>\n<p>Identifying features in ECG:</p>\n<ul>\n<li><strong>Heart rate &gt;100 bpm</strong></li>\n<li><strong>Irregular</strong> rhythm</li>\n<li><strong>Discrete P</strong> waves with<strong> &gt;3 different morphologies </strong>(black arrows)</li>\n<li>Variable PR interval</li>\n<li>Narrow QRS complex</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0afb68727c024ff38a47dcd2496e4040.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97a93cce9c7143ef9827b285aef64e5ex800x406.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b5361afe5e44e269aa5fa35fe2f487dx800x372.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bb221c8a95ec44e0bfc15cead3b35f1bx800x549.JPEG"
    ]
  },
  {
    "text": "Which of the following findings is not seen in a patient with a Dextrocardia?",
    "choices": [
      {
        "id": 1,
        "text": "Inverted P wave in lead I and lead aVL"
      },
      {
        "id": 2,
        "text": "Negative QRS comples in Lead I"
      },
      {
        "id": 3,
        "text": "Negative T wave in Lead I"
      },
      {
        "id": 4,
        "text": "Progressively increasing voltage across precordium in chest leads"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Progressively <strong>decreasing&nbsp;</strong>(not increasing) voltage across the precordium is seen in<strong>&nbsp;dextrocardia.&nbsp;</strong>This is because the heart is located on the right side, while the leads are placed on the left. Right-sided lead placement would show a normal progression.</p>\n<p><strong>Findings Suggestive of Dextrocardia</strong></p>\n<ul>\n<li>Inverted P waves in Lead I and aVL</li>\n<li>Negative QRS complex and T wave in Lead I\n<ul>\n<li><strong>(Lead I</strong>: <strong>inversion of all complexes, aka &lsquo;global negativity&rsquo; i.e. inverted P wave, negative QRS, inverted T wave)</strong></li>\n</ul>\n</li>\n<li>Progressively decreasing voltage across the precordium</li>\n</ul>\n<p>&nbsp;</p>\n<p>ECG showing dextrocardia:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d4432a66fb64db3a9f2235f55833eb2x720x209.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a finding you would expect to see in a patient with a left bundle branch block?",
    "choices": [
      {
        "id": 1,
        "text": "RSR\u2019 pattern in V1-V2"
      },
      {
        "id": 2,
        "text": "QRS duration of\u00a0> 120ms"
      },
      {
        "id": 3,
        "text": "Dominant S wave in V1"
      },
      {
        "id": 4,
        "text": "Broad monophasic R wave in V5-V6"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>RSR</strong>\u2019 pattern in\u00a0<strong>V1-3\u00a0</strong>is seen in the case of the right bundle branch block <strong>(RBBB)</strong>, not the left bundle branch block (LBBB).\u00a0</p>\n<p><strong>ECG </strong>findings suggestive of<strong> LBBB:</strong></p>\n<ul>\n<li>QRS duration of &gt;120 ms\u00a0</li>\n<li>Dominant S wave in V1 with loss of R wave</li>\n<li>Notched R wave and no Q wave in V6</li>\n</ul>\n<p>The below image shows the characteristic changes in <strong>LBBB</strong>:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5416ed160a441af8eca9ffd4d1521c5x222x196.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d044a91a6135485899389f185248b6c5x218x200.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e56c0b5b545e4b3b9afc6c5d0fe2fdb1x1279x594.JPEG"
    ]
  },
  {
    "text": "Identify the rhythm abnormality in the ECG strip:",
    "choices": [
      {
        "id": 1,
        "text": "Torsades de Pointes"
      },
      {
        "id": 2,
        "text": "Monomorphic VT"
      },
      {
        "id": 3,
        "text": "Ventricular fibrillation"
      },
      {
        "id": 4,
        "text": "Premature ventricular complex"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG depicts <strong>monomorphic VT</strong>.</p>\n<p><strong>Monomorphic VT</strong> has the <strong>same QRS complex from beat to beat</strong>, indicating that the activation sequence is the same from beat to beat and that each beat likely originates from the same source. Other features include:</p>\n<ul>\n<li>Rapid heart rate (&gt; 100 bpm)</li>\n<li>Broad QRS complexes (&gt; 120 ms)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/474be9b5c3f4418d87b4d865260b24f4.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b09e2105f644fd3bf217bde2a9c3612x1280x1424.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d3ff2eb902cb471687a410ff616ea5b5x1279x654.JPEG"
    ]
  },
  {
    "text": "Identify the arrhythmia depicted by the ECG strip:",
    "choices": [
      {
        "id": 1,
        "text": "Atrial flutter"
      },
      {
        "id": 2,
        "text": "Atrial fibrillation"
      },
      {
        "id": 3,
        "text": "Ventricular flutter"
      },
      {
        "id": 4,
        "text": "Ventricular fibrillation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows a <strong>Ventricular Flutter</strong></p>\n<p>Identification points</p>\n<ul>\n<li><strong>Continuous Sine Wave</strong></li>\n<li>No identifiable P waves, QRS complexes, or T waves</li>\n<li>Rate usually &gt; 200 beats / min</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bc425da475764cbbb7d5f697aa359789.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the arrhythmia depicted by the given ECG strip:",
    "choices": [
      {
        "id": 1,
        "text": "Ventricular tachycardia"
      },
      {
        "id": 2,
        "text": "Ventricular fibrillation"
      },
      {
        "id": 3,
        "text": "Atrial fibrillation"
      },
      {
        "id": 4,
        "text": "Atrial flutter"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG depicts<strong> ventricular fibrillation.\u00a0</strong>It has the following characteristics:</p>\n<ul>\n<li>Chaotic irregular deflections of varying amplitude</li>\n<li>No identifiable QRS complexes, ST segments, or T waves are visible</li>\n</ul>\n<p>Other options:</p>\n<p>Option 1- Ventricular tachycardia:\u00a0The ECG features include:</p>\n<ul style=\"list-style-type: disc;\">\n<li>Wide QRS complex with abnormal morphology</li>\n<li>Absence\u00a0of the P waves</li>\n<li>Rate &gt;100/min</li>\n</ul>\n<p>Option 3- Atrial fibrillation: The ECG features include:</p>\n<ul>\n<li>Narrow QRS complexes</li>\n<li>RR intervals are irregular</li>\n<li>No distinct p waves seen</li>\n</ul>\n<p>Option 4- Atrial flutter: The ECG features include:</p>\n<ul>\n<li>Narrow QRS complexes</li>\n<li>RR intervals are regular\u00a0</li>\n<li>Normal P waves are replaced by <strong>sawtooth-shaped</strong> <strong>waves</strong>\u00a0known as flutter waves.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/04c31ccbac544890acc7a85e7f1b6447.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The ECG given below is seen in which of the following conditions:",
    "choices": [
      {
        "id": 1,
        "text": "Hypothermia"
      },
      {
        "id": 2,
        "text": "Hyperkalemia"
      },
      {
        "id": 3,
        "text": "STEMI"
      },
      {
        "id": 4,
        "text": "Hypokalemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The blue arrows in the above ECG point to the <strong>J wave or the Osborn wave</strong> or the <strong>camel hump</strong> waves. This wave is seen in <strong>Hypothermia.</strong></p>\n<p><strong>Option B: </strong>Tall, tented T waves are seen in hyperkalemia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b8f5d12369af44d8b089945a393ce5b5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f1fd1611de864bfc922f9d3a8474aa1ex801x792.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c7fdd5c2e5aa406abb544de4617c74c6x1280x527.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/edf56c3533894495b2e411d1df634af0x621x462.PNG"
    ]
  },
  {
    "text": "Electrical alternans in ECG is characteristic of",
    "choices": [
      {
        "id": 1,
        "text": "Severe bronchial asthma"
      },
      {
        "id": 2,
        "text": "Pericardial effusion"
      },
      {
        "id": 3,
        "text": "Severe LVF"
      },
      {
        "id": 4,
        "text": "AR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li data-listid=\"12\" data-aria-posinset=\"1\" data-aria-level=\"1\"><strong>Total electrical alternans (P-QRS-T) </strong>with sinus tachycardia is a relatively specific sign of <strong>pericardial effusion,&nbsp;&nbsp;</strong>usually with<strong> cardiac tamponade.&nbsp;</strong></li>\n</ul>\n<p>&nbsp;&nbsp;</p>\n<ul>\n<li data-listid=\"12\" data-aria-posinset=\"2\" data-aria-level=\"1\">The mechanism relates to&nbsp;a <strong>periodic swinging motion of the heart in the effusion at a frequency exactly</strong> <strong>one-half the heart rate.&nbsp;&nbsp;</strong>&nbsp;</li>\n</ul>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/65d418ed7cda42df89678cd3cba61272x1280x615.JPEG"
    ]
  },
  {
    "text": "A 45-year-old woman presented to the ER with dizziness. Her blood pressure is 80/60 mmHg, pulse rate is 45/minute. Her ECG is shown below. What is the next best step of management?",
    "choices": [
      {
        "id": 1,
        "text": "IV Epinephrine"
      },
      {
        "id": 2,
        "text": "IV Atropine"
      },
      {
        "id": 3,
        "text": "IV Amiodarone"
      },
      {
        "id": 4,
        "text": "IV Adenosine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG shown above is the <strong>second-degree atrioventricular block type 1 - Wenckebach phenomenon.</strong></p>\n<p>Treatment is indicated when bradycardia is accompanied by any one of the following:</p>\n<ul>\n<li>Hypotension</li>\n<li>Acutely altered mental status</li>\n<li>Signs of shock</li>\n<li>Ischemic chest discomfort</li>\n<li>Acute heart failure</li>\n</ul>\n<p>Treatment is initiated with <strong>1 mg atropine iv</strong> which may be <strong>repeated</strong> at <strong>3-5 minute intervals</strong> to a <strong>maximum</strong> <strong>dose</strong> of <strong>3 mg.</strong></p>\n<p>Along with atropine, <strong>transcutaneous pacing</strong> is to be done.</p>\n<p>If the bradycardia is <strong>refractory</strong> to both atropine and transcutaneous pacing, then <strong>IV infusions of dopamine </strong>(5 to 20 &mu;g/kg/min)<strong> or epinephrine </strong>(2 to 10 &mu;g/min) should be considered.</p>\n<p>If the patient still isn&rsquo;t responding, then<strong> transvenous pacing</strong> should be tried. If the patient is under spinal anesthesia, low-dose (0.2 mg) IV epinephrine can be given.</p>\n<p>Epinephrine is the drug of choice for treating bradyarrhythmias in infants and children.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/69dc56b785024b22b9b6b551cb9d74aa.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old man was brought to the casualty with palpitations and dizziness. His heart rate was 160/min and blood pressure was 110/80 mm Hg. His ECG is given below. What is the first line of management?",
    "choices": [
      {
        "id": 1,
        "text": "Adenosine 6 mg"
      },
      {
        "id": 2,
        "text": "Adenosine 12 mg"
      },
      {
        "id": 3,
        "text": "Vagal manoeuvre"
      },
      {
        "id": 4,
        "text": "Amiodarone 300 mg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient has&nbsp;<strong>paroxysmal supraventricular tachycardia</strong>. As the patient's&nbsp;<strong>blood pressure </strong>is <strong>normal</strong> and there is no evidence of hemodynamic deterioration, <strong>initial treatment </strong>consists of<strong> vagal maneuvers </strong>(Valsalva maneuver) in awake patients. This is because vagal maneuvers alone can terminate approximately 20% to 25% of reentry supraventricular tachycardias (SVTs).</p>\n<p>If this is <strong>unsuccessful</strong>, then IV <strong>adenosine 6 mg</strong> is given. If necessary another dose of adenosine 12 mg may be administered after 1-2 minutes.</p>\n<p>If the drug is administered via a central venous catheter, then these doses are reduced to 3 mg and 6 mg, respectively.</p>\n<p>If there is <strong>hemodynamic deterioration</strong>, then <strong>cardioversion</strong> is the treatment of choice.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/66ae648faa824a7ebef13c06ebd06d1e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old male was brought to the casualty with palpitations and dizziness. His heart rate is 170/min and his blood pressure was 70/40 mm Hg. His ECG is given below. What is the first line of management?",
    "choices": [
      {
        "id": 1,
        "text": "Vagal manoeuvre"
      },
      {
        "id": 2,
        "text": "Adenosine 6 mg IV"
      },
      {
        "id": 3,
        "text": "Adenosine 12 mg IV"
      },
      {
        "id": 4,
        "text": "Cardioversion"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient has<strong>\u00a0supraventricular tachycardia </strong>with evidence of<strong> hemodynamic deterioration. </strong>Immediate treatment would be <strong>cardioversion\u00a0</strong>(50-100J).</p>\n<p>If the patient were\u00a0<strong>hemodyamically stable,</strong> initial treatment would be\u00a0<strong>vagal maneuvers</strong>\u00a0(Valsalva maneuver) in awake patients. This is because vagal maneuvers alone can terminate approximately 20% to 25% of reentry supraventricular tachycardias (SVTs).</p>\n<p>If this is unsuccessful, then <strong>iv adenosine 6 mg</strong> is given. If necessary another dose of adenosine 12 mg may be administered after 1-2 minutes.</p>\n<p>If the drug is administered via a central venous catheter, then these doses are reduced to 3 mg and 6 mg respectively.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6c8c4f0a5f8f431aa1f01cb84c772132.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In a patient undergoing surgery, which is the single best lead in the ECG to diagnose arrhythmias?",
    "choices": [
      {
        "id": 1,
        "text": "Lead I"
      },
      {
        "id": 2,
        "text": "Lead V2"
      },
      {
        "id": 3,
        "text": "Lead II"
      },
      {
        "id": 4,
        "text": "Lead V5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lead II </strong>is the best for detecting <strong>arrhythmias</strong> and <strong>inferior wall myocardial infarction.</strong></p>\n<p><strong>Lead V5 </strong>is th best for detecting <strong>anterior </strong>and<strong> lateral wall myocardial infarction.</strong></p>\n<p>For <strong>arrhythmia</strong>, oesophagal leads are better than lead II but they are not yet put into wide use.</p>\n<p>For <strong>myocardial ischemia</strong>, new regional wall motion abnormalities and decreased systolic wall thickening on <strong>transesophageal echocardiography</strong> are more sensitive than <strong>ECG</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient undergoing mitral valve repair, which is the most sensitive indicator of myocardial ischemia?",
    "choices": [
      {
        "id": 1,
        "text": "ECG \u2013 Lead V5"
      },
      {
        "id": 2,
        "text": "Pulmonary artery catheterisation"
      },
      {
        "id": 3,
        "text": "Thoracic bioimpedance"
      },
      {
        "id": 4,
        "text": "Transesophageal echocardiography"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Transesophageal echocardiography</strong> is the <strong>most sensitive</strong> indicator of myocardial ischemia.&nbsp;&nbsp;</p>\n<p>New regional wall motion abnormalities&nbsp;<strong>(RWMA)</strong> and <strong>decreased systolic wall thickening</strong> on transesophageal echocardiography&nbsp;are more sensitive than ECG.</p>\n<p>Ischemia may be indicated clinically by a sudden onset intraoperative arrhythmia or conduction block.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The AH interval on His Bundle Electrocardiogram (HBE) corresponds to the conduction of _____ on ECG.",
    "choices": [
      {
        "id": 1,
        "text": "Through His \u2013Purkinje system"
      },
      {
        "id": 2,
        "text": "From AV node to bundle of His"
      },
      {
        "id": 3,
        "text": "Purkinje to ventricular fibers"
      },
      {
        "id": 4,
        "text": "Through ventricular fibers"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The AH interval corresponds to conduction from AV node to bundle of His on an ECG.</p>\n<p><strong>His bundle electrogram (HBE)</strong></p>\n<p>The record of the electrical activity obtained with the catheter&nbsp;passed through a vein to the right side of the heart and placed close to the tricuspid valve is&nbsp;HBE.</p>\n<p>It shows 3 deflections as shown in the figure:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a14c30dc320e4b1fadb19e77546a273ex1280x973.JPEG"
    ]
  },
  {
    "text": "The given ECG is characteristic of:",
    "choices": [
      {
        "id": 1,
        "text": "Brugada syndrome"
      },
      {
        "id": 2,
        "text": "Arrhythmogenic right ventricular cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Wolf Parkinson White syndrome"
      },
      {
        "id": 4,
        "text": "Hypertrophic obstructive cardiomyopathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG is characteristic of <strong>arrhythmogenic right ventricular cardiomyopathy.</strong></p>\n<p><strong>Arrhythmogenic right ventricular cardiomyopathy</strong></p>\n<ul>\n<li>The <strong>Epsilon wave</strong> (a small positive deflection buried in the end of the QRS complex) is the characteristic finding in ARVC.</li>\n<li><strong>T wave inversions</strong>&nbsp;in V1-3 is seen 85% of patients of ARVC.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/84a74c6e1a6243d58ce0938b0547d986.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 50 year old male presents to the OPD with chest pain, palpitations and shortness of breath. An ECG is taken to determine the cause of his symptoms. What does the ECG show?",
    "choices": [
      {
        "id": 1,
        "text": "Right bundle branch block"
      },
      {
        "id": 2,
        "text": "Paroxysmal supraventricular tachycardia"
      },
      {
        "id": 3,
        "text": "Right ventricular hypertrophy"
      },
      {
        "id": 4,
        "text": "Ventricular bigeminy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The ECG shows <strong>right ventricular hypertrophy</strong>.</p>\n<p><strong>ECG findings suggestive of RVH</strong></p>\n<ul>\n<li>R-V1 &gt;= 7</li>\n<li>R-V1 + S-V5/V6 &gt; 11</li>\n<li>Right axis deviation&nbsp;of +110&deg; or more</li>\n<li>T wave inversion in RV leads (Lead III, V1 &amp; V2)</li>\n</ul>\n<p><strong>Causes of RVH</strong></p>\n<ul>\n<li>Pulmonary hypertension</li>\n<li>Mitral stenosis</li>\n<li>Pulmonary embolism</li>\n<li>Chronic lung disease (Cor pulmonale)</li>\n<li>Congenital heart disease (e.g. Tetralogy of Fallot, pulmonary stenosis)</li>\n<li>Arrhythmogenic right ventricular cardiomyopathy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/386cb7866ac5423da7575bba8916f186.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "If the stroke volume is 70 ml/beat, the cardiac output of the given patient is:",
    "choices": [
      {
        "id": 1,
        "text": "5.2 L/min"
      },
      {
        "id": 2,
        "text": "5 L/min"
      },
      {
        "id": 3,
        "text": "4.8 L/min"
      },
      {
        "id": 4,
        "text": "5.5 L/min"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The heart rate according to the given ECG is <strong>300 / No. of large squares = 300/4 = 75 beats/min</strong></p>\n<p>Cardiac output is calculated by:</p>\n<p><strong>Cardiac output = Stroke volume x Heart rate</strong></p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 70 x 75 ml / min</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= 5250 ml/min</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;= <strong>5.2 L/min</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d938de9ab3d3428cbc1918e97dd5a1c1.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old athlete comes for a routine examination. He has no symptoms. The ECG is as shown below. Which of the following should be done?",
    "choices": [
      {
        "id": 1,
        "text": "Permanent pacemaker should be placed"
      },
      {
        "id": 2,
        "text": "Atropine should be given"
      },
      {
        "id": 3,
        "text": "Electrical defibrillation should be done"
      },
      {
        "id": 4,
        "text": "No further therapy indicated"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given ECG shows sinus bradycardia with a heart rate of&nbsp;<strong>45</strong><strong> bpm</strong>. The patient is an athlete and heart rates are <strong>usually lower in</strong> <strong>athletes</strong>.</p>\n<p>As the patient is <strong>asymptomatic no further therapy</strong> should be given to increase the heart rate.</p>\n<p><strong>Sinus bradycardia:</strong></p>\n<ul>\n<li>Sinus bradycardia is defined as SA nodal rhythm with a rate &lt;60 beats/min. However, in young healthy adults and athletes, a resting heart rate of <strong>&lt;60 beats/min is common.</strong></li>\n<li>Also, a sinus pause of upto 3 seconds on ECG is commonly seen in athletes and elderly individuals.</li>\n<li>If the rate is <strong>&lt;40 beats/min</strong>, in an awake individual in the<strong> absence of physical training</strong>, then it is considered <strong>abnormal</strong>.</li>\n</ul>\n<p><strong>Diagnosis of SA node dysfunction:</strong></p>\n<ul>\n<li>The presence of abnormal sinus bradycardia or sinus pause on ECG is insufficient to diagnose SA node dysfunction.<strong> Longer-term electrocardiographic recording</strong> and <strong>clinical correlation</strong> are required to establish the diagnosis.</li>\n<li>On the contrary, the presence of symptoms without any sinus bradycardia or sinus pause on ECG is sufficient to rule out SA node dysfunction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9b25d300f58a4d33b40896f7364d526c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Helen is a 78-year-old woman who is a smoker for the past 30 years and has a history of angina. She presents to your accident and emergency (A&E) department with chest pain worse on inspiration and shortness of breath. Her ECG shows signs of:",
    "choices": [
      {
        "id": 1,
        "text": "Premature atrial contractions"
      },
      {
        "id": 2,
        "text": "Pulmonary embolism"
      },
      {
        "id": 3,
        "text": "AV nodal re-entrant tachycardia"
      },
      {
        "id": 4,
        "text": "Atrial flutter"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The ECG changes are classic of <strong>pulmonary embolism</strong> showing <strong>S1Q3T3.</strong></li>\n</ul>\n<p><strong>ECG findings in pulmonary embolism</strong></p>\n<ul>\n<li>Sinus tachycardia</li>\n<li>Complete or incomplete RBBB (seen in the given ECG also)</li>\n<li><strong>S1Q3T3: deep S wave in lead I, Q wave in III, inverted T wave in III</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/03361c938c3b406693a6640cf9c58811.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/b9bee1a209c34343b68cd2bbf5664b43x357x171.PNG"
    ]
  },
  {
    "text": "A 45-year-old male patient with a long-standing history of rheumatic heart disease comes to the clinic with complaints of dyspnea. Interpret the ECG finding.",
    "choices": [
      {
        "id": 1,
        "text": "Rabbit ear pattern"
      },
      {
        "id": 2,
        "text": "P mitrale"
      },
      {
        "id": 3,
        "text": "P pulmonale"
      },
      {
        "id": 4,
        "text": "Sawtooth pattern"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The P waves in the given ECG are broad and notched. This is the\u00a0<strong data-stringify-type=\"bold\">P mitrale</strong>\u00a0pattern which is seen in\u00a0<strong data-stringify-type=\"bold\">left atrial enlargement.</strong></p>\n<p>This patient has likely developed mitral stenosis (heard as a mid-diastolic murmur) secondary to his rheumatic heart disease. Mitral valve stenosis and atrial inflammation in rheumatic carditis lead to left atrial dilation.\u00a0</p>\n<p>The features of P mitrale are:</p>\n<ul>\n<li>lead II:\u00a0broad (&gt;2.5mm) notched P waves</li>\n<li>Lead V1: Biphasic wave with a prominent\u00a0negative terminal component (representing delayed depolarization of the LA)</li>\n</ul>\n<p>P pulmonale is seen in right atrial enlargement.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c7214fa40eb646af8b9f159df1b7682f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ba642933ad7476788755bf715738bf3x1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fa1307fb668745669ce788c0b1c52357x1280x933.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f40a3dbbd734b679fab4cac748ddff0x1280x894.JPEG"
    ]
  },
  {
    "text": "Which lead does the given ECG tracing represent in a normal ECG?",
    "choices": [
      {
        "id": 1,
        "text": "aVL"
      },
      {
        "id": 2,
        "text": "aVR"
      },
      {
        "id": 3,
        "text": "V1"
      },
      {
        "id": 4,
        "text": "V6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>As all the waves (<strong>P, QRS, T</strong>) are <strong>negative</strong>&nbsp;in the given ECG, it should be lead <strong>aVR</strong>. All the depolarisations waves (P, QRS, T) move away from lead aVR in the normal sinus.</p>\n<p>Depolarisation wave moving towards the positive pole of the lead (or active electrode) produces a positive deflection in the ECG and depolarization moving away from the positive pole of the lead produces a negative deflection in the ECG.</p>\n<p>The lead aVR provides&nbsp;information from the right upper side of the heart.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1dc4ed5617f4786bbf2b98e827ef737.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f77d513ca2a4b888208329cdfb90fc8x1280x1382.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b180f095ef484a1b862f718dcd8cb82ax1280x713.JPEG"
    ]
  },
  {
    "text": "The ECG wave as shown in the image below is commonly seen in",
    "choices": [
      {
        "id": 1,
        "text": "Myocardial infarction"
      },
      {
        "id": 2,
        "text": "Hyperkalemia"
      },
      {
        "id": 3,
        "text": "Digoxin treatment"
      },
      {
        "id": 4,
        "text": "Hypokalemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above ECG wave characteristically depicts <strong>Digoxin</strong> <strong>effect</strong>.</p>\n<p><strong>Digoxin effect</strong> refers to the presence on the ECG of:</p>\n<ul>\n<li><strong>Downsloping</strong> <strong>ST depression</strong> with a characteristic &ldquo;<strong>Salvador Dali sagging</strong>&rdquo; or &ldquo;<strong>Hockey Stick</strong>&rdquo; appearance.</li>\n<li>Flattened, inverted, or biphasic T waves.</li>\n<li>Shortened QT interval.</li>\n</ul>\n<p><strong>Additional ECG Features:</strong></p>\n<ul>\n<li>Mild PR interval prolongation of up to 240ms (due to increased vagal tone).</li>\n<li>Prominent <strong>U waves</strong>.</li>\n<li>Peaking of the terminal portion of the <strong>T waves</strong>.</li>\n<li><strong>J point depression</strong> (usually in leads with tall R waves).</li>\n</ul>\n<p><strong>QRS complex / ST segment changes:</strong></p>\n<ul>\n<li>The morphology of the QRS complex / ST segment is variously described as either &ldquo;slurred&rdquo;, &ldquo;sagging&rdquo; or &ldquo;scooped&rdquo; and resembling either a &ldquo;reverse tick&rdquo;, &ldquo;hockey stick&rdquo; or &ldquo;Salvador Dali&rsquo;s moustache&rdquo;.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4cb28c06e60e495dae0fb1b9131d27e5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 60 year old male presents with acute severe chest pain associated with sweating 30 min earlier. The ECG of the person is shown below. Which of the following drugs should be given to this person?",
    "choices": [
      {
        "id": 1,
        "text": "Atropine"
      },
      {
        "id": 2,
        "text": "Streptokinase"
      },
      {
        "id": 3,
        "text": "Amiodarone"
      },
      {
        "id": 4,
        "text": "Adenosine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The given ECG <strong>shows ST elevation</strong> in <strong>lead I, aVL, V3, V4</strong> and <strong>reciprocal depression in lead III</strong> suggestive of evolving <strong>Anterior Myocardial infarction</strong>.</li>\n<li>In MI, the drug of choice is <strong>thrombolytics like Streptokinase.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4aaf55a2f5d644bebe4f06ca63985ca4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The given ECG depicts which of the following conditions:",
    "choices": [
      {
        "id": 1,
        "text": "Paroxysmal supraventricular tachycardia"
      },
      {
        "id": 2,
        "text": "Ventricular bigeminy"
      },
      {
        "id": 3,
        "text": "P pulmonale"
      },
      {
        "id": 4,
        "text": "Re-entrant atrial fibrillation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given ECG shows a <strong>premature ventricular complex</strong> (PVC) that <strong>occurs every second beat</strong> (ventricular bigeminy).</p>\n<p><strong>PVCs</strong> exhibit <strong>premature timing</strong> by arising <strong>before</strong> the <strong>anticipated occurrence</strong> of the <strong>subsequent regular heartbeat</strong>. They display an aberrant QRS-T appearance, where the <strong>QRS complex</strong> appears unusually <strong>wide</strong> (0.12 sec or longer), and the <strong>T wave</strong> and <strong>QRS complex</strong> point in <strong>opposite&nbsp;orientations</strong> (discordant).</p>\n<p>Frequent PVCs can manifest in different patterns. When two PVCs occur consecutively, they are termed a pair or couplet.</p>\n<p>If <strong>three or more PVCs</strong> occur in <strong>succession</strong> (triplet), it is classified as <strong>ventricular tachycardia</strong> (VT). The <strong>repetitive pattern</strong> of <strong>one normal beat followed by one PVC</strong> is known as <strong>ventricular bigeminy</strong>.</p>\n<p>When the repeating sequence involves two normal beats followed by a PVC, it is called ventricular trigeminy. Similarly, if three normal beats are followed by a PVC, it is referred to as ventricular quadrigeminy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/29d37704d3704abaa0afb38541882ed7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/167918b3d1664820afab57a443544f15x720x424.PNG"
    ]
  },
  {
    "text": "A patient came with sudden onset palpitations. ECG showed a narrow complex, regular tachycardia without P waves, and a rate of 160 BPM. His blood pressure is 96/68 mmHg. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Carotid sinus massage"
      },
      {
        "id": 2,
        "text": "Adenosine"
      },
      {
        "id": 3,
        "text": "Beta-blocker"
      },
      {
        "id": 4,
        "text": "Defibrillator"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the electrocardiogram (ECG) showing <strong>narrow QRS complex regular tachycardia without P waves</strong> are suggestive of paroxysmal supraventricular tachycardia (<strong>PSVT</strong>). The next step in the management of PSVT in a <strong>hemodynamically stable</strong> (systolic blood pressure &gt;90 mm Hg) patient is vagotonic maneuvres such as <strong>carotid sinus massage</strong> or Valsalva maneuver.</p>\n<p>Carotid sinus massage can be considered in the absence of carotid bruits and no history of stroke. If vagal maneuvers fail or cannot be performed, <strong>intravenous adenosine</strong> can be used.\u00a0</p>\n<p>Non-DHP <strong>calcium channel blockers</strong> and <strong>beta blockers</strong> are second-line pharmacological agents in the management of PSVT. They can cause <strong>hypotension</strong> before and after terminating the arrhythmia.</p>\n<p>If the patient is <strong>hemodynamically unstable</strong> (systolic blood pressure &lt;90 mmHg or mean arterial pressure &lt;65 mm Hg), immediate <strong>QRS-synchronous direct current cardioversion</strong> is necessary.</p>\n<p>The treatment algorithm for PSVT is described in the flowchart below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d8076b463c924c27b49b4479ac3c46b2x1279x1416.JPEG"
    ]
  },
  {
    "text": "In a normal ECG obtained from a patient, a biphasic P wave may be seen in which of the following lead(s)?",
    "choices": [
      {
        "id": 1,
        "text": "Leads II and V2"
      },
      {
        "id": 2,
        "text": "Leads II and V1"
      },
      {
        "id": 3,
        "text": "Lead V1"
      },
      {
        "id": 4,
        "text": "Lead V5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In a normal ECG, a <strong>biphasic P wave</strong> is seen in<strong>&nbsp;lead V1 </strong>only<strong>.</strong></p>\n<p>Lead V1 is a <strong>chest lead</strong>. So, it&nbsp;records potentials in the <strong>horizontal plane</strong>. The P wave in lead V1 consists of:</p>\n<ul>\n<li><strong>Positive component&nbsp;</strong>reflecting<strong> right atrial depolarization&nbsp;</strong>(due to anteriorly oriented vector)</li>\n<li><strong>Negative component&nbsp;</strong>reflecting<strong> left atrial depolarization&nbsp;</strong>(due to posteriorly oriented vector)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d52351e328174a90a0c7f4bbcd2d5e97x1280x960.JPEG"
    ]
  },
  {
    "text": "Clinical finding seen in hypermagnesemia is",
    "choices": [
      {
        "id": 1,
        "text": "Bradycardia and hypertension"
      },
      {
        "id": 2,
        "text": "Bradycardia and hypotension"
      },
      {
        "id": 3,
        "text": "Tachycardia and hypertension"
      },
      {
        "id": 4,
        "text": "Tachycardia and hypotension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Hypermagnesimia causes bradycardia and hypotension (like neurogenic shock).</p>\n<p>Causes -</p>\n<ul>\n<li>Excessive magnesium intake\n<ul>\n<li>A. Cathartics, urologic irrigants</li>\n<li>B. Parenteral magnesium administration</li>\n</ul>\n</li>\n<li>Rapid mobilization from soft tissues\n<ul>\n<li>A. Trauma, shock, sepsis</li>\n<li>B. Cardiac arrest</li>\n<li>C. Burns</li>\n</ul>\n</li>\n<li>Impaired magnesium excretion\n<ul>\n<li>A. Renal failure</li>\n<li>B. Familial hypocalciuric hypercalcemia</li>\n</ul>\n</li>\n<li>Other\n<ul>\n<li>A. Adrenal insufficiency</li>\n<li>B. Hypothyroidism</li>\n<li>C. Hypothermia</li>\n</ul>\n</li>\n</ul>\n<p>Clinical features -</p>\n<ul>\n<li>The most prominent clinical manifestations of hypermagnesemia are <strong>vasodilation and neuromuscular blockade.</strong></li>\n<li><strong>Hypotension is refractory to vasopressors</strong> or volume expansion may be an early sign.</li>\n<li>Nausea, lethargy, and weakness may progress to respiratory failure, paralysis, coma, with hypoactive tendon reflexes, paradoxical bradycardia and heart block may be seen.</li>\n</ul>\n<p>ECG: Prolongation of PR, QRS, and QT intervals.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman presents with complaints of numbness around the lips and a tingling sensation in her fingers. She underwent parathyroidectomy for hyperparathyroidism one year ago. An ECG was done and is given below. What will be your immediate management?",
    "choices": [
      {
        "id": 1,
        "text": "Beta blockers"
      },
      {
        "id": 2,
        "text": "Teriparatide"
      },
      {
        "id": 3,
        "text": "IV Bisphosphonates"
      },
      {
        "id": 4,
        "text": "IV Calcium gluconate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario and ECG showing&nbsp;a <strong>prolonged QT interval</strong> (QT interval more than 0.43 seconds) is suggestive of <strong>hungry bone syndrome</strong> i.e.&nbsp;<strong>hypocalcemia</strong> post parathyroidectomy. Acute symptomatic presentation of hypocalcemia is treated with <strong>IV calcium gluconate.</strong></p>\n<p><strong>Symptoms and signs of hypocalcemia</strong>:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Mild circumoral or digital numbness</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Paresthesia</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Laryngeal spasms&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cardiac arrhythmias&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Chvostek sign</strong>:&nbsp;This is elicited by gently tapping over the <strong>facial nerve</strong> in front of the<strong> tragus</strong> of the ear. There is hyperexcitability of the facial muscles, manifesting as a contraction of the muscles.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Trousseau's sign</strong>:&nbsp;This is elicited by making the forearm ischemic by applying a sphygmomanometer cuff to the arm and keeping the pressure <strong>above</strong> systolic blood pressure (<strong>SBP</strong>) for <strong>5 minutes</strong>. The hand goes into a painful carpopedal spasm and assumes the accoucheur&rsquo;s hand position. (shown in the image below)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cc12d66e8e4a437e92e396317b308ba2.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d4c48e73535461ab15bea1f0755d4d3x600x486.JPEG"
    ]
  },
  {
    "text": "A 40-year-old patient complains of palpitations. He is hemodynamically stable. An ECG is obtained and is given below. Which of the following is the most appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Carotid massage"
      },
      {
        "id": 2,
        "text": "Chest compressions"
      },
      {
        "id": 3,
        "text": "Electrical cardioversion"
      },
      {
        "id": 4,
        "text": "Intravenous amiodarone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given ECG shows <strong>wide complex tachycardia </strong>(QRS complexes are &gt;120 ms in duration), with <strong>regular QRS complexes</strong> with <strong>uniform morphology</strong> in each lead. This is suggestive of <strong>ventricular tachycardia (VT)</strong>. Since this patient is <strong>hemodynamically stable</strong>, the best management is <strong>IV amiodarone</strong>.\u00a0</p>\n<p>In patients with <strong>sustained VT</strong> who are <strong>hemodynamically stable</strong>, <strong>medical treatment</strong> with <strong>intravenous amiodarone</strong> is preferred. <strong>Alternative</strong> drugs that can be given are <strong>lignocaine</strong> and <strong>procainamide</strong>. However, <strong>if</strong> the <strong>VT fails to resolve</strong> with medical management or if the patient's <strong>symptoms worsen</strong>, <strong>DC cardioversion</strong> is the next step.\u00a0</p>\n<p>Other options:</p>\n<p>Option A: <strong>Carotid massage</strong> has no role in the management of VT. It is used as an initial step in <strong>paroxysmal supraventricular tachycardia</strong> to block the AV node and terminate the arrhythmia.</p>\n<p>Option B: <strong>Chest compressions</strong> are done until the defibrillator is arranged to ensure some amount of cardiac output even during this period.</p>\n<p>Option C: If a <strong>patient</strong> <strong>with VT has hemodynamic compromise</strong> due to <strong>hypotension</strong> or <strong>impaired consciousness</strong>\u00a0or has pulmonary, <strong>electrical</strong> <strong>cardioversion </strong>is performed.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/87b6ffd2ebc14e098ca1f80c934f2385.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The observed myocardial stunning pattern does not match the ECG findings of a patient. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Takotsubo cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Restrictive cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Brigade's cardiomyopathy"
      },
      {
        "id": 4,
        "text": "Pericardial tamponade"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Takotsubo cardiomyopathy</strong> is the probable diagnosis when the observed myocardial stunning pattern does not match ECG changes.</p>\n<p><strong>Myocardial stunning</strong> is a state where certain <strong>segments of the myocardium</strong> (usually corresponding to an area of major coronary occlusion) show forms of <strong>contractile abnormality</strong> (dysfunction) on <strong>echocardiography</strong>.</p>\n<p>In <strong>Takotsubo cardiomyopathy</strong>, while the <strong>ECG</strong> changes mimic a <strong>myocardial infarction</strong>(MI), the <strong>left ventricular dysfunction</strong> <strong>extends</strong> well beyond the distribution of a <strong>specific coronary artery</strong>. Thus, the myocardial stunning pattern might not fully match the ECG. Ventriculography shows apical dilation with basal contraction.</p>\n<p>Takotsubo cardiomyopathy occurs typically in <strong>older women</strong>&nbsp;and is associated with a sudden increase in <strong>emotional or physical stress</strong>, presenting with <strong>hypotension</strong>, <strong>chest pain</strong> with <strong>ECG changes</strong> of <strong>acute MI</strong>, and <strong>pulmonary edema</strong>. Its also known as <strong>apical ballooning syndrome</strong> or <strong>acute stress-induced cardiomyopathy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pseudo P pulmonale is seen in which electrolyte abnormality?",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Hyponatremia"
      },
      {
        "id": 3,
        "text": "Hypocalcemia"
      },
      {
        "id": 4,
        "text": "Hypercalcemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Pseudo P pulmonale refers to <strong>tall peaked P waves</strong> seen in <strong>hypokalemia</strong>.<br />P-pulmonale refers to <strong>P waves</strong> taller than <strong>&gt;2.5mm</strong> in an ECG lead.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d9e8473516241d69ff4a08b5b764be4x1280x2207.JPEG"
    ]
  },
  {
    "text": "A male patient who is suffering from a psychotic disorder is on antipsychotic, antidepressant and antihypertensive treatment. He suddenly developed tachycardia and chest tightness. On evaluation he had metabolic acidosis. ECG showed widened QRS complex and prolonged QT interval. Which of the following drugs is responsible for this?",
    "choices": [
      {
        "id": 1,
        "text": "Amitriptyline"
      },
      {
        "id": 2,
        "text": "Amlodipine"
      },
      {
        "id": 3,
        "text": "Chlorthalidone"
      },
      {
        "id": 4,
        "text": "Enalapril"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of&nbsp;<strong>torsades de pointes. </strong>Only <strong>amitriptyline</strong> causes this condition, among the above drugs.</p>\n<p><strong>Torsades de pointes</strong> (French: twisting of points) is a life-threatening form of <strong>polymorphic ventricular tachycardia</strong> with rapid asynchronous complexes and an <strong>undulating baseline on ECG.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/535a12eac6994d8da51548e737760d35x1268x324.JPEG"
    ]
  },
  {
    "text": "The ECG of a pregnant lady having pre-eclampsia is shown below. Her vitals are stable. What is the best step in the management of the condition?",
    "choices": [
      {
        "id": 1,
        "text": "IV calcium"
      },
      {
        "id": 2,
        "text": "IV MgSO4"
      },
      {
        "id": 3,
        "text": "DC Shock"
      },
      {
        "id": 4,
        "text": "Synchronised cardioversion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given ECG showing a <strong>wide QRS complex tachycardia</strong> with <strong>waxing and waning QRS amplitude points</strong> to the diagnosis of <strong>torsades des pointes</strong>. As the patient is <strong>hemodynamically stable</strong>, <strong>intravenous MgSO4</strong> is the treatment of choice.</p>\n<p>Polymorphic ventricular tachycardia (VT) has a continually <strong>changing QRS morphology</strong>. <strong>Polymorphic VT</strong> that occurs in individuals with <strong>congenital or acquired prolongation</strong> of <strong>QT interval</strong> is referred to as <strong>torsades des pointes</strong>. Patients present with near-syncope, syncope, or cardiac arrest.</p>\n<p><strong>IV MgSO4</strong> is highly effective for both <strong>treatment </strong>and the<strong> prevention</strong> <strong>of recurrence</strong> of <strong>long QT-related ventricular ectopic beats</strong> that trigger torsades des pointes.</p>\n<p>If <strong>magnesium</strong> alone is <strong>ineffective</strong>, <strong>isoproterenol infusion</strong> <strong>or pacing</strong>, to a rate of <strong>100-120 depolarization/minute</strong> usually suppresses VT recurrences.</p>\n<p>If the patient is <strong>hemodynamically unstable</strong>, then <strong>immediate defibrillation</strong> should be done.</p>\n<table>\n<tbody>\n<tr>\n<td>Synchronized cardioversion</td>\n<td>Defibrillation</td>\n</tr>\n<tr>\n<td>Used in <strong>unstable PSVT</strong>, atrial flutter, atrial fibrillation, and ventricular tachycardia <strong>with a pulse</strong></td>\n<td>Used in ventricular tachycardia <strong>without a pulse</strong>, and ventricular fibrillation.</td>\n</tr>\n<tr>\n<td>Shock is delivered in sync with the R wave (in absolute refractory period)</td>\n<td>Shock is delivered at any time during the cardiac cycle.</td>\n</tr>\n<tr>\n<td>Monophasic - 100 to 200J</td>\n<td>Monophasic - 360J</td>\n</tr>\n<tr>\n<td>Biphasic - 50 to 100J</td>\n<td>Biphasic - 120 to 200J</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/47fe343facbb41888278414d974d3c09.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 62-year-old diabetic patient presents to the ER with tightness in the center of the chest which did not relieve even after taking rest. His ECG is shown below. Which of the following is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Inferior wall MI"
      },
      {
        "id": 2,
        "text": "Lateral wall MI"
      },
      {
        "id": 3,
        "text": "Extensive anterior wall MI"
      },
      {
        "id": 4,
        "text": "Anteroseptal MI"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given ECG shows <strong>ST segment elevation</strong> in <strong>leads</strong> <strong>II, III, and aVF</strong>, with <strong>reciprocal ST segment depression</strong> in <strong>leads I and aVL</strong>. This points to a diagnosis of <strong>inferior wall MI</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/28a2a976db0d46039c58d623334e87e9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the possible diagnosis for a patient with the ECG findings as shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Inferior wall myocardial infarction"
      },
      {
        "id": 2,
        "text": "Acute pericarditis"
      },
      {
        "id": 3,
        "text": "Pericardial tamponade"
      },
      {
        "id": 4,
        "text": "Hypothyroidism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG image give shows <strong>diffuse ST-segment elevation</strong>&nbsp;characteristic of <strong>acute&nbsp;pericarditis</strong>.</p>\n<p>Other options:</p>\n<ul>\n<li>Inferior wall MI will show ST elevations in leads II, III, aVF</li>\n<li>The ECG findings for pericardial effusion with cardiac tamponade&nbsp;are:\n<ul>\n<li>Sinus tachycardia</li>\n<li>Electrical alternans</li>\n<li>Low QRS voltages</li>\n</ul>\n</li>\n<li>The ECG changes of hypothyroidism will include bradycardia with low voltage complexes.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/041632e9cebd44da9c7701a9797e0755.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "This phenomenon seen in atrial fibrillation is known as:",
    "choices": [
      {
        "id": 1,
        "text": "Ashman phenomenon"
      },
      {
        "id": 2,
        "text": "Premature ventricular complex"
      },
      {
        "id": 3,
        "text": "De Winter\u2019s sign"
      },
      {
        "id": 4,
        "text": "McConnell\u2019s phenomenon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The ECG depicts <strong>Ashman phenomenon</strong>.</p>\n<ul>\n<li><strong>Ashman phenomenon</strong> occurs when you get two beats with a <strong>long RR interval</strong> followed by a <strong>beat with a short RR interval</strong>.&nbsp;In this situation, the beat with the short RR interval is <strong>aberrantly conducted</strong> - typically with a RBBB morphology.</li>\n<li>The Ashman phenomenon is <strong>typically</strong> seen in the setting of <strong>atrial fibrillation</strong>, where the RR interval varies from beat to beat.</li>\n<li>The significance of the Ashman phenomenon is that the broad QRS complexes&nbsp;are <strong>commonly mistaken for ventricular ectopic/PVCs</strong>. However, they're not ectopic beats. Instead, these broad QRS complexes represent the aberrant conduction of a supraventricular beat.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ff2d250c6f2546dfaeae6d40a3a6b9f7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient was brought to the ER with complaints of multiple episodes of vomiting, increased frequency of urination, and constipation for the past 5 days. He also complained of lethargy and muscle pain. He is a known case of SCC of the lung. What is likely to be seen in the ECG of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "ST segment depression"
      },
      {
        "id": 2,
        "text": "Decreased QT interval"
      },
      {
        "id": 3,
        "text": "Increased PR interval"
      },
      {
        "id": 4,
        "text": "Tall T waves"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above scenario is suggestive of&nbsp;<strong>hypercalcemia</strong> due to ectopic production of PTH-related peptides. It is mostly associated with squamous-cell lung cancer (SCC).<strong>&nbsp;</strong>ECG is likely to show&nbsp;a&nbsp;<strong>decreased QT interval.</strong></p>\n<p>Hypocalcemia shows increased QT interval.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "ECG of a patient revealed a QT interval of 0.55s. Which of the following will not be a differential diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hypothermia"
      },
      {
        "id": 2,
        "text": "Digitalis toxicity"
      },
      {
        "id": 3,
        "text": "Hypocalcemia"
      },
      {
        "id": 4,
        "text": "Romano-Ward syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>QT interval of 0.55s suggests <strong>QT prolongation</strong>. It is not seen in digitalis toxicity. Rather, a <strong>QT shortening&nbsp;</strong>with characteristic&nbsp;&ldquo;<strong>scooping&rdquo; </strong>of the <strong>ST&ndash;T-wave </strong>complex, called a <strong>digitalis effect,</strong> is seen.</p>\n<p>The ECG changes seen in digitalis toxicity are as follows:</p>\n<ul>\n<li>Prolonged PR interval</li>\n<li>ST-segment depression</li>\n<li>Short QT interval</li>\n</ul>\n<p>QT interval represents the time taken for the ventricles to depolarize and repolarize. It is prolonged in the following:</p>\n<ul>\n<li>Hypocalcemia</li>\n<li>Hypokalemia</li>\n<li>Congenital long QT syndromes such as Romano-Ward syndrome</li>\n<li>Hypothermia</li>\n<li>Drugs: Class IA and Class III antiarrhythmics</li>\n<li>Intracranial bleeds: particularly SAH</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Ecg Mini Test';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>