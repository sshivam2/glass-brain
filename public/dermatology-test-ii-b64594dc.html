<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dermatology Test Ii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following statements are false about lepromatous leprosy?",
    "choices": [
      {
        "id": 1,
        "text": "The longest peripheral sensory nerves are affected first"
      },
      {
        "id": 2,
        "text": "Radiographic changes show cysts and osteoporosis"
      },
      {
        "id": 3,
        "text": "Sensation of palms and soles is lost early in the disease"
      },
      {
        "id": 4,
        "text": "bilaterally symmetrical distribution of skin lesions can occur anywhere apart from hairy scalp, axillae, groins and perineum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In lepromatous leprosy sensation of palms and soles is <strong>retained</strong> <strong>until late</strong> in the disease. The <strong>longest</strong> peripheral sensory nerves are <strong>affected first</strong>, causing numbness and anesthesia on the <strong>dorsal surfaces</strong> of hands and feet, and later on <strong>extensor surfaces of arms and legs</strong>, and finally over the trunk.<br /><br />Radiographs may show <strong>osteoporosis </strong>in the phalanges, small <strong>osteolytic cysts</strong> and often hairline or <strong>compression fractures.</strong> <br />Regions of skin with a higher temperature like hairy scalp, axillae, groins, and perineum do not typically show lesions of Lepromatous leprosy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year old man presented with the following skin lesion. It was noted that the lesions got aggravated after he was started on a beta-blocker. What could be the possible diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Psoriasis vulgaris"
      },
      {
        "id": 2,
        "text": "Granuloma annulare"
      },
      {
        "id": 3,
        "text": "Necrobiosis lipoidica"
      },
      {
        "id": 4,
        "text": "Discoid lupus erythematosus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario is suggestive of <strong>psoriasis</strong> with the image showing a\u00a0<strong>psoriatic plaque</strong>, with a silvery center surrounded by a reddish border.</p>\n<p><strong>Plaque/ discoid psoriasis</strong>,<strong> </strong>also known as<strong>\u00a0psoriasis vulgaris</strong> accounts for almost 90% of all psoriasis cases. It presents as a <strong>papulosquamous rash</strong>, with reddish edematous plaques covered with silvery-white scales, which are well-demarcated from unaffected skin with sharply delineated edges. Plaques may be encircled by a clear peripheral zone called the<strong>\u00a0halo\u00a0</strong>or<strong>\u00a0ring of Woronoff</strong>.<strong>\u00a0</strong>The<strong>\u00a0scalp\u00a0</strong>is one of the most common and first affected areas in<strong>\u00a0plaque psoriasis</strong>,<strong>\u00a0</strong>while other affected areas include elbows, knees, and back.</p>\n<p>It can also be classified based on the site involved:</p>\n<p><strong>Plaque psoriasis</strong> (most common): sharply demarcated erythematous plaques with silvery scales, commonly present on extensor surfaces (elbows, knees, etc.).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8e8d32d25a2d45ac85ccf9ed6534192c.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2caf71ebe6cb436496d2ba1695a7e60fx800x273.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/569831c5c0374f67acbc4ee1d24e1bf1x720x540.JPEG"
    ]
  },
  {
    "text": "Acne is not a diagnostic criteria in which of the following diseases?",
    "choices": [
      {
        "id": 1,
        "text": "PAPA syndrome"
      },
      {
        "id": 2,
        "text": "PASH syndrome"
      },
      {
        "id": 3,
        "text": "SACRAL syndrome"
      },
      {
        "id": 4,
        "text": "SAPHO syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>SACRAL syndrome</strong> is not characterised by Acne. It is a congenital condition characterized by <strong>S</strong>pinal dysraphism, <strong>A</strong>nogenital, <strong>C</strong>utaneous, <strong>R</strong>enal and urologic anomalies, associated with an <strong>A</strong>ngioma of <strong>L</strong>umbosacral localization. \u00a0</p>\n<p><strong>SAPHO</strong> is an acronym for the combination of\u00a0<strong>S</strong>ynovitis, <strong>A</strong>cne, <strong>P</strong>ustulosis, <strong>H</strong>yperostosis, and <strong>O</strong>steitis. \u00a0</p>\n<p><strong>PASH </strong>is <strong>P</strong>yoderma gangrenosum, <strong>A</strong>cne, and <strong>S</strong>uppurative <strong>H</strong>idradenitis. \u00a0</p>\n<p><strong>PAPA</strong> syndrome is an acronym for <strong>P</strong>yogenic <strong>A</strong>rthritis, <strong>P</strong>yoderma gangrenosum and <strong>A</strong>cne.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What differentiates malignancy associated Sweet syndrome from Idiopathic Sweet syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Peripheral leucocytosis"
      },
      {
        "id": 2,
        "text": "Abnormal Platelet counts"
      },
      {
        "id": 3,
        "text": "Predominates in females"
      },
      {
        "id": 4,
        "text": "Associated with fever"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Patients with <strong>malignancy\u2010associated Sweet syndrome</strong> differ from idiopathic Sweet syndrome in often having <strong>abnormal platelet counts and anemia</strong>.\u00a0</p>\n<p>The skin lesions in malignancy\u2010associated Sweet syndrome are more likely to be vesicular, bullous or ulcerative.</p>\n<p>Typical features of Sweet syndrome include:\u00a0 \u00a0 \u00a0</p>\n<ul>\n<li>Non\u2010itchy, tender, erythematous plaques.\u00a0</li>\n<li>Fever.\u00a0 \u00a0\u00a0</li>\n<li>Peripheral leucocytosis.\u00a0\u00a0</li>\n<li>Females are more frequently affected.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Apple jelly nodules are seen in____",
    "choices": [
      {
        "id": 1,
        "text": "Lupus vulgaris"
      },
      {
        "id": 2,
        "text": "Orificial tuberculosis"
      },
      {
        "id": 3,
        "text": "Scrofuloderma"
      },
      {
        "id": 4,
        "text": "Cutaneous miliary tuberculosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Initial lesion of <strong>lupus vulgaris</strong> is a plaque, composed of soft, reddish-brown papules, the appearance on diascopy being said to resemble <strong>apple jelly.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about Wood lamp examination?",
    "choices": [
      {
        "id": 1,
        "text": "Fungi growing on hair in vitro produces a characteristic fluorescence in UV light"
      },
      {
        "id": 2,
        "text": "The hair remains fluorescent after the fungus has ceased to be viable."
      },
      {
        "id": 3,
        "text": "The fluorescent material can be extracted from hair in hot water."
      },
      {
        "id": 4,
        "text": "Microsporum audouinii produces a brilliant green fluorescence."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Fungi growing in culture or on<strong> hair in vitro</strong> <strong>do not fluoresce</strong> in a UV light.<br />The hair remains\u00a0 fluorescent after the fungus has ceased to be viable, and the fluorescent material can be extracted from the hair in <strong>hot water</strong> or in a <strong>cold solution of sodium bromide.<br /></strong>Only dermatophytes capable of invading hair will induce\u00a0 fluorescence, like Microsporum audouinni or M.canis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following finding is seen in which clinical condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis versicolor"
      },
      {
        "id": 2,
        "text": "Measles"
      },
      {
        "id": 3,
        "text": "Lichen planus"
      },
      {
        "id": 4,
        "text": "Psoriasis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Lichen planus</strong>&nbsp;(LP) shows whitish lines called <strong>Wickham striae (WS)</strong> in the papules of lichen planus and other dermatoses, typically in the oral mucosa. The macroscopic appearance shows hypergranulosis.<br /> <br /> WS are of special significance in the diagnosis of erosive form of oral LP, as this form may undergo <strong>malignant transformation.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f8740e0a750240579329989df1cb1541.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Dercum\u2019s disease affects which layer of skin?",
    "choices": [
      {
        "id": 1,
        "text": "Papillary Dermis"
      },
      {
        "id": 2,
        "text": "Panniculus adiposus"
      },
      {
        "id": 3,
        "text": "Reticular Dermis"
      },
      {
        "id": 4,
        "text": "Panniculus carnosus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Dercum\u2019s disease or Adiposis Dolorosa, affects <strong>the panniculus adiposus</strong> or true fatty layer of subcutaneous tissue.<br />It is a rare disease characterised by generalised pain in the adipose tissue and a number of fatty tumours.</p>\n<p>The tumours are normally painful and found in multiples on the extremities.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Buttonhole sign is can be seen all the following conditions, except?",
    "choices": [
      {
        "id": 1,
        "text": "Von-Recklinghausen's disease"
      },
      {
        "id": 2,
        "text": "Dermatofibroma"
      },
      {
        "id": 3,
        "text": "Anetoderma"
      },
      {
        "id": 4,
        "text": "Bullous pemphigoid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Buttonhole sign is<strong> not seen in bullous pemphigoid.</strong> &nbsp;</p>\n<p>In Von-Recklinghausen's disease (type 1 neurofibromatosis), neurofibromas can be invaginated with the tip of index finger back into the subcutis and again reappear after the release of pressure. (Buttonhole sign).</p>\n<p>Other conditions where one can find this sign are anetoderma and dermatofibroma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A HIV-seropositive patient presents with a tender, unilateral fluctuant inguinal swelling and a non-indurated, painful ulcer on the glans penis. Which of following therapies should he be given?",
    "choices": [
      {
        "id": 1,
        "text": "Single dose Azithromycin"
      },
      {
        "id": 2,
        "text": "Multi dose Ciprofloxacin"
      },
      {
        "id": 3,
        "text": "Single dose Ceftriaxone"
      },
      {
        "id": 4,
        "text": "Multi dose Azithromycin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ceftriaxone 250 mg IM</strong> in a single dose, is the first line of treatment for this <strong>HIV</strong>\u00a0<strong>sero positive patient</strong>, who has findings which are indicative of <strong>Chancroid.</strong></p>\n<p><strong>Azithromycin should be avoided in patients co-infected with HIV</strong>\u00a0due to high treatment failure rate.<br /><br /><strong>Single dose regimen</strong> are preferred as they have the advantage of ensuring compliance.</p>\n<table style=\"height: 167px;\" border=\"1\" width=\"315\">\n<tbody>\n<tr>\n<td style=\"width: 93.921875px; text-align: center;\" colspan=\"2\"><strong>Treatment Ladder for Chancroid</strong></td>\n</tr>\n<tr>\n<td style=\"width: 93.921875px;\">First Line</td>\n<td style=\"width: 205.09375px;\">Azithromycin 1g orally single dose (Avoided in HIV positive patients)<br />or<br />Ceftriaxone 250mg IM single dose</td>\n</tr>\n<tr>\n<td style=\"width: 93.921875px;\">Second Line</td>\n<td style=\"width: 205.09375px;\">Ciprofloxacin 500mg orally b.d x 3 days<br />or<br />Erythromycin 500mg oral q.i.d x 7 days</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For a patient with a suspected inherited connective tissue disorder, identify the sign demonstrated below.",
    "choices": [
      {
        "id": 1,
        "text": "Hertoghe's sign"
      },
      {
        "id": 2,
        "text": "Higoumenaki's sign"
      },
      {
        "id": 3,
        "text": "Gorlin\u2019s sign"
      },
      {
        "id": 4,
        "text": "Gottron's sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The picture depicts <strong>Gorlin\u2019s sign</strong>, which is the ability of patients with <strong>Ehlers-Danlos syndrome (EDS)</strong> to touch the tip of the nose with the tip of their tongue.</p>\n<p>EDS is a connective tissue disorder occurring due to genetic defects involved in <strong>collagen synthesis</strong> and action. It is characterized by <strong>hyperextensibility</strong> of skin, <strong>hypermobile</strong> joints, easy bruising, and poor wound healing.</p>\n<p>Other options:</p>\n<p>Option A:<strong> Hertoghe\u2019s sign</strong> is defined as the loss of lateral one-third of the eye-brows (superciliary madarosis) seen in <strong>leprosy,</strong> myxedema, atopic dermatitis, trichotillomania, ectodermal dysplasia, discoid lupus erythematosus, alopecia areata, syphilis, systemic sclerosis, HIV infection, and hypothyroidism.<br /><br />Option B: <strong>Higoumenaki's sign</strong> refers to enlargement of the sternal end of the clavicle, frequently observed in patients with <strong>late congenital syphilis.</strong></p>\n<p>Option D: <strong>Gottron's sign</strong> refers to erythematous macules and patches overlying the elbows and/or knees seen in <strong>dermatomyositis.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/04152580ae234929a8dc239bcfc8b8f0.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Elastosis perforans serpiginosa is seen in all the following except?",
    "choices": [
      {
        "id": 1,
        "text": "Osteogenesis Imperfecta"
      },
      {
        "id": 2,
        "text": "SLE"
      },
      {
        "id": 3,
        "text": "Pseudoxanthoma Elasticum"
      },
      {
        "id": 4,
        "text": "Down\u2019s syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Elastosis perforans serpiginosa is not associated with <strong>SLE</strong>. It is a rare skin disorder in which <strong>abnormal elastic tissue fibre</strong> passes from the papillary dermis to the epidermis.</p>\n<p>Types:</p>\n<ul>\n<li><strong>Idiopathic EPS</strong>: Unknown origin, possibly genetic</li>\n<li><strong>Reactive EPS</strong>: Associated with inherited disorders such as Down syndrome, Ehlers Danlos syndrome and Marfan syndrome, Osteogenesis Imperfecta and acrogeria</li>\n<li><strong>Drug-induced EPS</strong>: Affects 1% of people treated with D-penicillamine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4dc92333a0b24ae0b93deaa978efc73ex470x312.PNG"
    ]
  },
  {
    "text": "A patient with gingival fibromas, bone cysts and pitted dental enamel is said to have ______",
    "choices": [
      {
        "id": 1,
        "text": "Definite Tuberous Sclerorsis (TSC)"
      },
      {
        "id": 2,
        "text": "Probable TSC"
      },
      {
        "id": 3,
        "text": "Possible TSC"
      },
      {
        "id": 4,
        "text": "Inadequate criteria for TSC"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient with the given clinical features is said to have <strong>possible TSC</strong>.</p>\n<p>&nbsp;</p>\n<p>Diagnostic criteria for the tuberous sclerosis complex:</p>\n<table style=\"width: 372.819px;\">\n<tbody>\n<tr style=\"height: 15px;\">\n<td style=\"width: 123px; height: 15px;\">&nbsp;</td>\n</tr>\n<tr style=\"height: 351px;\">\n<td style=\"width: 123px; height: 351px;\">Major features&nbsp;&nbsp;</td>\n<td style=\"width: 238.819px; height: 351px;\">\n<ul>\n<li>Facial angiofibromas or forehead plaque</li>\n<li>Non\u2010traumatic ungual or periungual fibroma</li>\n<li>Hypomelanotic macules (more than three)</li>\n<li>Shagreen patch (connective tissue naevus)</li>\n<li>Multiple retinal nodular hamartomas</li>\n<li>Cortical tuber</li>\n<li>Subependymal nodule</li>\n<li>Subependymal giant cell astrocytoma</li>\n<li>Cardiac rhabdomyoma, single or multiple</li>\n<li>Lymphangiomyomatosis</li>\n<li>Renal angiomyolipoma</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 249px;\">\n<td style=\"width: 123px; height: 249px;\">Minor features&nbsp;</td>\n<td style=\"width: 238.819px; height: 249px;\">\n<ul>\n<li>Multiple randomly distributed pits in dental enamel</li>\n<li>Hamartomatous rectal polyps</li>\n<li>Bone cysts</li>\n<li>Cerebral white matter migration lines</li>\n<li>Gingival fibromas</li>\n<li>Non\u2010renal hamartoma</li>\n<li>Retinal achromic patch</li>\n<li>Confetti&rsquo; skin lesions</li>\n<li>Multiple renal cysts&nbsp;</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 186.986px;\">\n<td style=\"width: 123px; height: 186.986px;\">Diagnosis</td>\n<td style=\"width: 238.819px; height: 186.986px;\">\n<p><strong>Definite TSC:</strong> either two major features or one major feature with two minor features</p>\n<p><strong>Probable TSC:</strong> one major feature and one minor feature.</p>\n<p><strong>Possible TSC:</strong>&nbsp;either one major feature or two or more minor features</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On clinical examination of a patient complaining of intense itching, you notice the presence of the hang glider sign. This is caused by which of the following organisms_____?",
    "choices": [
      {
        "id": 1,
        "text": "Demodex folliculorum"
      },
      {
        "id": 2,
        "text": "Sarcoptes scabiei"
      },
      {
        "id": 3,
        "text": "Ixodidae ticks"
      },
      {
        "id": 4,
        "text": "Cimex hemipterus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> hang glider sign</strong> refers to the <strong>dark triangular biting apparatus</strong> of <strong>Sarcoptes scabiei</strong> seen at the end of the <strong>subcorneal tunnel.</strong></p>\n<ul>\n<li>Demodex folliculorum is a follicle mite.</li>\n<li>Ixodidae ticks are hard ticks.</li>\n<li>Cimex hemipterus is a tropical bed bug.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about Darier\u2019s disease:",
    "choices": [
      {
        "id": 1,
        "text": "It is due to mutations in intracellular calcium pumps"
      },
      {
        "id": 2,
        "text": "Terminal notches and white bands are seen in nails"
      },
      {
        "id": 3,
        "text": "Corticosteroids are first line of treatment"
      },
      {
        "id": 4,
        "text": "Papules are commonest on the seborrheic areas of the trunk, face, scalp margins, temples, ears, scalp, neck and flexures"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Emollients and topical antiseptics</strong> are the <strong>first lines </strong>of treatment, not corticosteroids.&nbsp;Darier&rsquo;s disease is an <strong>autosomal dominant</strong> disease caused due to mutations in <strong>intracellular P-type calcium pumps</strong>.<br /> <br /> It is characterized by chronic and recurrent focal and aggregated keratotic papules, generally of teenage or adult-onset, predominantly in seborrheic areas.</p>\n<p><strong>Treatment Ladder for Darrier's Disease (aka Keratosis Follicularis</strong><strong>):</strong></p>\n<table style=\"height: 573px; width: 371px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 102px;\">First Line</td>\n<td style=\"width: 263px;\">\n<p>Emollients and topical antiseptics</p>\n<p>Avoid excess heat or UVB</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 102px;\">Second Line</td>\n<td style=\"width: 263px;\">\n<p>Topical combination corticosteroids with antifungals/antibiotics</p>\n<p>Topical retinoids</p>\n<p>Oral antivirals, e.g. Acyclovir</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 102px;\">Third Line</td>\n<td style=\"width: 263px;\">\n<p>Topical 5\u2010 fluorouracil cream,</p>\n<p>topical tacrolimus, topical tacalcitol,</p>\n<p>Oral alitretinoin, Photodynamic therapy</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is not associated with a pityriasis rosea like eruption?",
    "choices": [
      {
        "id": 1,
        "text": "ACE inhibitors"
      },
      {
        "id": 2,
        "text": "Gold"
      },
      {
        "id": 3,
        "text": "Oral Contraceptives"
      },
      {
        "id": 4,
        "text": "NSAIDs"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Oral contraceptives</strong> are not associated with a pityriasis rosea like eruption. They are associated with an&nbsp;<strong>erythema nodosum like eruption&nbsp;</strong>(and not&nbsp;pityriasis rosea like eruption).</p>\n<p>Other <strong>drugs commonly causing erythema nodosum like eruption include:</strong>&nbsp; &nbsp;</p>\n<ul>\n<li>Hormonal replacement therapy</li>\n<li>Sulphonamides&nbsp; &nbsp;&nbsp;</li>\n<li>Penicillin <strong>&nbsp;</strong></li>\n</ul>\n<p><strong>Pityriasis rosea like eruption is associated commonly with the following:</strong>&nbsp;&nbsp;</p>\n<ul>\n<li>Angiotensin\u2010converting enzyme inhibitors</li>\n<li>NSAIDs&nbsp; &nbsp; &nbsp;</li>\n<li>Gold</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The earliest manifestation of limited cutaneous systemic sclerosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Non\u2010pitting oedema"
      },
      {
        "id": 2,
        "text": "Raynaud phenomenon"
      },
      {
        "id": 3,
        "text": "Pruritus"
      },
      {
        "id": 4,
        "text": "Pigmentation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The earliest manifestation of limited cutaneous systemic sclerosis (lcSSc) is Raynaud phenomenon which can precede other manifestations by many years.</p>\n<p>Note that Raynaud phenomenon is the earliest manifestation in the limited cutaneous variant of Systemic sclerosis (lcSSc /CREST syndrome) and <strong>not</strong> diffuse cutaneous SSc(dcSSc) in which Raynaud phenomenon may appear along with or much after the appearance of other cutaneous manifestations.</p>\n<p>Pruritus, non-pitting edema and puffiness, pigmentation &amp; de-pigmentation are generally early skin changes seen in both variants of Systemic sclerosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pseudo porphyria cutanea tarda is not characterized by",
    "choices": [
      {
        "id": 1,
        "text": "Hypertrichosis and hyperpigmentation"
      },
      {
        "id": 2,
        "text": "Good prognosis following discontinuation of drug"
      },
      {
        "id": 3,
        "text": "Aggravated by UVA exposure"
      },
      {
        "id": 4,
        "text": "Serum/plasma porphyrin assay is negative"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The classic features of <strong>hypertrichosis, hyperpigmentation,</strong> and sclerodermoid changes found with porphyria cutanea tarda are <strong>unusual with pseudoporphyria</strong>.<br /><br />Pseudoporphyria can be induced by a wide range of medications, <strong>excessive UV-A exposure</strong>, and haemodialysis. <br />The <strong>prognosis is good</strong> for pseudoporphyria once the offending agent has been discontinued. If the\u00a0<strong>serum/plasma porphyrin assay is negative</strong>, the patient does not have a true porphyria. \u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In Pemphigus Vulgaris, which of the following is true?\n1: Anti desmoglein(anti-Dsg ) 1 antibodies predominate\n2: There is marked blistering of the mucosa, with relative sparing of skin",
    "choices": [
      {
        "id": 1,
        "text": "Both are correct and 1 is the reason for 2"
      },
      {
        "id": 2,
        "text": "Both are correct, but 1 is independent of 2"
      },
      {
        "id": 3,
        "text": "Only 2 is correct"
      },
      {
        "id": 4,
        "text": "Both are incorrect"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In Pemphigus vulgaris, there is <strong>marked blistering of mucosa </strong>with relative sparing of skin.<br /><br />In <strong>pemphigus vulgaris, Anti-Dsg 3 antibodies</strong> predominate. As, Dsg 3 is present in all the layers of mucosa, but is found only in the basal and immediate suprabasal layers of skin; the\u00a0<strong>oral epithelium is primarily affected with relative sparing of skin remaining</strong>.</p>\n<p>In the case of <strong>Pemphigus foliaceus</strong>, Anti- Dsg 1 antibodies predominate. Hence skin is primarily affected with sparing of oral mucosa.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A recently weaned child presents with perioral vesicular plaques sparing the upper lip and diarrhea. What is he likely to be deficient in?",
    "choices": [
      {
        "id": 1,
        "text": "Selenium"
      },
      {
        "id": 2,
        "text": "Copper"
      },
      {
        "id": 3,
        "text": "Vit B12"
      },
      {
        "id": 4,
        "text": "Zinc"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This is the classical presentation of <strong>zinc deficiency</strong> leading to <strong>acrodermatitis enteropathica </strong>(Transient neonatal zinc deficiency) with <strong>diarrhea, alopecia, and a perioral and acral cutaneous eruption. \u00a0</strong></p>\n<p class=\"p1\">The perioral eruption usually spares the upper lip, resulting in a <strong>\u2018U' or \u2018horseshoe\u2010shaped\u2019</strong> appearance. Risk factors include <strong>weaning from the breast</strong>, anorexia nervosa, alcoholism, vegetarianism, and inadequately supplemented total parenteral nutrition.\u00a0Clinical features include failure to thrive, anorexia,\u00a0<strong>diarrhea,</strong>\u00a0recurrent infections,\u00a0<strong>alopecia,</strong>\u00a0male hypogonadism, and neurological manifestations like\u00a0<strong>tremor,</strong>\u00a0nystagmus, photophobia, hypogeusia, irritability, etc.</p>\n<p>Skin manifestations such as\u00a0<strong>vesiculobullous dermatitis</strong>\u00a0on the extremities and periorificial(perianal, perigenital, perioral) regions are commonly seen as shown below. Affected infants require long-term supplementation with zinc.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/923c5b06b3494532a4e9a7fd9b532ff5x1280x1610.JPEG"
    ]
  },
  {
    "text": "Which of the following conditions do not show pseudo-Pautrier's microabscesses on histopathology?",
    "choices": [
      {
        "id": 1,
        "text": "Mycosis Fungoides"
      },
      {
        "id": 2,
        "text": "Psoriasis"
      },
      {
        "id": 3,
        "text": "Carbamazepine induced lesions"
      },
      {
        "id": 4,
        "text": "Spongiotic dermatitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Psoriasis</strong> shows <strong>Munro's microabscess</strong> (collection of neutrophils) in the stratum corneum of the epidermis due to the infiltration of neutrophils from the papillary dermis into the epidermal stratum corneum. &nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3fe99d7186e1401a921818fcb8276f38x1280x1418.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c99456d15d614a5f9fd3b59220bcbbf0x480x368.PNG"
    ]
  },
  {
    "text": "The ugly duckling sign is seen in patients with ____________",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis rubra pilaris"
      },
      {
        "id": 2,
        "text": "Melanoma"
      },
      {
        "id": 3,
        "text": "Acne Rosacea"
      },
      {
        "id": 4,
        "text": "Mastocytosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>ugly duckling sign/concept</strong> is that nevi in the same individual tend to resemble one another morphologically and <strong>naevus which does not fit</strong> into any of the few dominant patterns of naevi of a given individual <strong>deserves attention</strong>.&nbsp; <strong>M</strong><strong>alignant melanoma</strong>&nbsp;often deviates from this naevus pattern.&nbsp;&nbsp;</p>\n<p>It is considered more discriminatory between malignant melanoma and other nevi than the <strong>ABCDE criteria</strong>.</p>\n<p>The following <strong>four principles</strong> are usually applied in the diagnosis of Melanoma:&nbsp;</p>\n<ul>\n<li><strong>Analytical examination</strong> - this involves the ABCDE algorithm used for diagnosis.&nbsp;</li>\n<li><strong>Pattern recognition</strong> - the idea behind this principle is those who see more melanomas will more easily recognize a new one.&nbsp;</li>\n<li><strong>Comparative analysis</strong> - <strong>Ugly duckling sign</strong> forms part of intraindividual comparative analysis, with a comparison between patterns of naevi an individual usually possess and variation from this usual pattern.&nbsp;</li>\n<li><strong>Dynamic analysis</strong>- Naevi grow and change over the years but melanomas often evolve rapidly. This evolutionary comparison is useful in making the distinction between a naevus and melanoma.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Walzel sign is seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Sarcoidosis"
      },
      {
        "id": 2,
        "text": "Addison\u2019s disease"
      },
      {
        "id": 3,
        "text": "Dermatomyositis"
      },
      {
        "id": 4,
        "text": "Pancreatitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This clinical sign refers to <strong>livedoreticularis</strong> seen in association with <strong>acute and chronic pancreatitis.</strong> <strong>\u00a0</strong></p>\n<p>Other signs seen in patients with pancreatitis are Grey Turner's sign, Cullen's sign, and Trousseau's sign.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the condition based on the image given below.",
    "choices": [
      {
        "id": 1,
        "text": "Acrodermatitis enteropathica"
      },
      {
        "id": 2,
        "text": "Ichthyosis"
      },
      {
        "id": 3,
        "text": "Atopic dermatitis"
      },
      {
        "id": 4,
        "text": "Kaposi sarcoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image with fish-like scales is suggestive of <strong>ichthyosis</strong>. It is a family of genetic disorders characterized by the presence of excessive amounts of <strong>dry thickened scaly skin.</strong> &nbsp;</p>\n<p>The commonest form of&nbsp;<strong>ichthyosis vulgaris</strong> is due to a genetic defect in the gene FLG coding for <strong>filaggrin</strong> protein. Ichthyosis usually develops during the first months of life.&nbsp;</p>\n<div class=\"page\" title=\"Page 1695\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The patients present with light grey scales mainly on the <strong>extensor surfaces</strong> of the extremities and the trunk. The scaling may disappear or reduce in the summer and when there is increased humidity. They usually have <strong>accentuated palmar creases</strong>.</p>\n<p>The condition is managed with ointments like glycerol-containing creams&nbsp;that hydrate the stratum corneum.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Acrodermatitis enteropathica</strong> is caused by a defect in the absorption of <strong>zinc</strong>. It presents as eczematous plaques that are usually <strong>periorificial</strong> on the face or the anogenital area. They may become vesicular, bullous, pustular, or erosive with crusting at the edges. It is shown below.</p>\n<p>&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5500b8ede482462aa1642e2b6d8cbe9b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d35d13af3fc442c4ba42c2780c0216dex720x1022.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b7e442b54f764ae193d9eb7b023cce7fx720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b1d767fb53f942db8912494c355eeb6ax720x480.JPEG"
    ]
  },
  {
    "text": "Which of the following genes is not associated with an increased risk of melanoma?",
    "choices": [
      {
        "id": 1,
        "text": "CDKN2A"
      },
      {
        "id": 2,
        "text": "MC1R"
      },
      {
        "id": 3,
        "text": "CDK4"
      },
      {
        "id": 4,
        "text": "SLC45A2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>SLC45A2 (MATP</strong>) and TYRP1 are not associated with increased risk of melanoma but instead appear to be protective against melanoma.<br /><br />The cyclin\u2010dependent kinase (<strong>CDKN2A</strong>) inhibitor 2A gene is the best established <strong>high</strong><strong>\u2010risk locus</strong> for melanoma susceptibility. It encodes for p16/Ink4a and p14/Arf by affecting the Rb and p53 cancer pathways.</p>\n<p>The CDK4 gene encodes the kinase targeted by p16/Ink4a. Any mutation of this gene abolishes the binding domain and is tumourigenesis.</p>\n<p>The melanocortin\u20101 receptor (<strong>MC1R) gene</strong> is considered as a moderate\u2010risk gene for melanoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Psuedo isomorphic phenomenon can be seen in a patient with ________________",
    "choices": [
      {
        "id": 1,
        "text": "Psoriasis"
      },
      {
        "id": 2,
        "text": "Warts"
      },
      {
        "id": 3,
        "text": "Vitiligo"
      },
      {
        "id": 4,
        "text": "Lichen planus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pseudo-isomorphic/pseudo-Koebner phenomenon</strong>&nbsp;can be seen in patients with <strong>warts </strong>as the new lesions occur due to the <strong>seeding of infection.</strong></p>\n<p>Koebner phenomenon or<strong> true Koebnerisation </strong>is typically seen in<strong> psoriasis, vitiligo, and lichen planus. </strong></p>\n<p><strong>Koebner/isomorphic phenomenon</strong> refers to the appearance of <strong>new</strong> skin lesions on <strong>healthy skin</strong> at the <strong>site</strong> of cutaneous <strong>injury</strong>, in the presence of a <strong>pre-existing dermatosis</strong>. They are <strong>typically linear</strong>, as they follow the route of the injury.</p>\n<p>Koebner phenomenon is <strong>diagnosed clinically</strong> using the following characteristics:</p>\n<ul>\n<li>Linear lesions developing at the <strong>site</strong> of <strong>cutaneous injury</strong> on a <strong>previously healthy</strong> skin</li>\n<li>Lesions have the same <strong>clinical and histological features</strong> as the underlying dermatosis</li>\n<li>Lesions are <strong>not</strong> <strong>due to seeding</strong> of an infectious agent, <strong>allergic reaction</strong> or <strong>skin breakdown</strong></li>\n</ul>\n<p>The exact cause of such a response is<strong> unclear</strong>.&nbsp;Theories involving T-cell mediated response, involvement of dermis, and microvasculature are considered. <strong>Various triggers</strong> for Koebner phenomenon have been identified:</p>\n<ul>\n<li><strong>Trauma</strong>: Insect and animal bites, burns including thermal and electric, excoriation, friction, shaving, lacerations, cryotherapy, pressure sores, and orthotics</li>\n<li><strong>Chemical irritation</strong>: Tattoo associated skin reaction, BCG vaccination, tuberculin skin test, hair dye allergy</li>\n<li><strong>Diseases</strong>: Urticaria, inflammatory dermatoses</li>\n<li><strong>Others</strong>: Phototherapy, sunburn, withdrawal of methotrexate therapy</li>\n</ul>\n<p>Other features of Koebner phenomenon include:</p>\n<ul>\n<li><strong>Graded response to trauma</strong>: Intensity of response to trauma is unique to each patient and the underlying disease.\n<ul>\n<li><strong>No</strong> Koebner response to injury</li>\n<li><strong>Abortive</strong> Koebner response: Lesions appear, but spontaneously vanish after a few weeks</li>\n<li><strong>Minimal</strong> Koebner response: Lesions develop at the site of trauma</li>\n<li><strong>Maximal</strong> Koebner response: Wide spread lesions develop across the entire site of trauma</li>\n</ul>\n</li>\n<li><strong>All or nothing response</strong>: Patients who develop Koebner phenomenon in response to one type of injury, may develop a similar response due to other types of injuries as well. In case, a patient does not exhibit Koebner phenomenon to one type of injury, it is unlikely that it is exhibited after any other type of injury.</li>\n<li><strong>Time taken</strong> to develop the skin lesions is unique to the patient and the specific dermatosis. It may vary from 3 days to 2 years, normally taking around 10-20 days.</li>\n</ul>\n<p>Koebner phenomenon can be classified into:</p>\n<ul>\n<li><strong>True Koebnerisation</strong>: <strong>New</strong> skin lesions seen with the clinical features mentioned above, as seen in&nbsp;<strong>vitiligo, psoriasis</strong> and <strong>lichen planus</strong>.&nbsp;&nbsp;</li>\n<li><strong>Pseudo-Koebnerisation:</strong>&nbsp;Appearance of similar skin lesions at the site of injury <strong>in infective lesions</strong> like <strong>plane warts</strong> and <strong>molluscum contagiosum</strong>, due to the <strong>spread of the infective agent</strong> (virus) to the new site by seeding, especially due to <strong>scratching</strong>.</li>\n</ul>\n<p>The image below shows Koebner phenomenon seen in a psoriatic patient at the site of trauma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c1f7a7e0f98a4b398cea805963117d9bx720x1034.JPEG"
    ]
  },
  {
    "text": "Antibody against which of the following structures is likely to be seen in a patient with bullous systemic lupus erythematosus",
    "choices": [
      {
        "id": 1,
        "text": "Collagen"
      },
      {
        "id": 2,
        "text": "Laminin"
      },
      {
        "id": 3,
        "text": "Desmoglein"
      },
      {
        "id": 4,
        "text": "BP 180"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Antibody against<strong> type VII collagen</strong> is seen in a patient with <strong>bullous systemic lupus erythematosus </strong>as it is the&nbsp;target antigen.</p>\n<p>The&nbsp;<strong>most common cutaneous</strong>&nbsp;manifestation of&nbsp;<strong>systemic lupus erythematosus</strong>&nbsp;is&nbsp;<strong>photosensitivity</strong>. The cutaneous manifestations in SLE are:</p>\n<ol>\n<li>Photosensitivity</li>\n<li>Raynaud's phenomenon&nbsp;</li>\n<li>Malar rash</li>\n<li>Chronic urticaria &gt;36 hrs</li>\n<li>Non-scarring alopecia&nbsp;</li>\n<li>Mouth ulceration</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following statements are false about Incontinentia pigmenti except?",
    "choices": [
      {
        "id": 1,
        "text": "Lethal in females"
      },
      {
        "id": 2,
        "text": "X-linked dominant disease"
      },
      {
        "id": 3,
        "text": "Life expectancy is usually lowered with Stage 4 lesions"
      },
      {
        "id": 4,
        "text": "Majority of patients are neurologically affected"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span style=\"font-family: verdana, geneva, sans-serif; font-size: 10pt;\">Incontinentia pigmenti (IP) is a <strong>rare X</strong><strong>\u2010linked dominant</strong> multisystemic ectodermal dysplasia that is usually <strong>lethal in males</strong>, not females.\u00a0</span></p>\n<p><span style=\"font-size: 10pt;\"><strong><span style=\"font-family: verdana, geneva, sans-serif;\">Cutaneous Manifestations:</span></strong></span></p>\n<ul>\n<li><span style=\"font-family: verdana, geneva, sans-serif; font-size: 10pt;\">A typical perinatal presentation comprises an erythematous vesicular rash following the Blaschko\u2019s lines and denotes Stage 1.</span></li>\n<li><span style=\"font-size: 10pt;\">Stage II shows a verrucous lesion &amp;\u00a0Stage III shows hyperpigmented streaks and whorls along Blaschko\u2019s lines.</span></li>\n<li><span style=\"font-size: 10pt;\">In stage IV, seen during adolescence, pale, hair-less, atrophic linear streaks or patches are seen, mostly on the lower extremities.</span></li>\n</ul>\n<p class=\"p1\"><span style=\"font-size: 10pt;\"><strong>Extracutaneous abnormalities:</strong></span></p>\n<ul>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">Dental Abnormalities</span></li>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">Ophthalmological abnormalities with retinal neovascularization.</span></li>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">CNS abnormalities include microcephaly, seizures and neurocognitive and motor impairments. But the <strong>majority (&gt;60%) of patients</strong> are <strong>neurologically normal</strong></span></li>\n</ul>\n<p class=\"p1\"><span style=\"font-size: 10pt;\">\u00a0There may be associated onychodystrophy and alopecia</span></p>\n<p><span style=\"font-size: 10pt;\"><strong><span style=\"font-family: verdana, geneva, sans-serif;\">Management: </span></strong></span></p>\n<ul>\n<li><span style=\"font-family: verdana, geneva, sans-serif; font-size: 10pt;\">No specific treatment is available for IP. Symptomatic Management is done.</span></li>\n<li><span style=\"font-size: 10pt;\">Life expectancy is usually normal.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gluten-free diet is a treatment modality in_____.",
    "choices": [
      {
        "id": 1,
        "text": "Impetigo herpetiformis"
      },
      {
        "id": 2,
        "text": "Pemphigus foliaceous"
      },
      {
        "id": 3,
        "text": "Dermatitis herpertiformis"
      },
      {
        "id": 4,
        "text": "Atopic dermatitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A gluten\u2010free diet is the cornerstone of long\u2010term <strong>dermatitis herpetiformis </strong>management. This also treats the associated <strong>gluten sensitive enteropathy (GSE)</strong> and may decrease the long\u2010term risk of lymphoma. \u00a0</p>\n<p>Gluten\u2010free diet has a slow response, so most patients require pharmacological intervention.</p>\n<p><strong>Dapsone </strong>and related sulphonamide drugs have proven highly effective, suppressing pruritus within days of treatment</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15 year old boy who presents with hyperkeratotic lesions over pressure points on his palms and soles and oral leukoplakia over the gums is worried about other conditions he might have. What should he be screened for?",
    "choices": [
      {
        "id": 1,
        "text": "Osteoporosis"
      },
      {
        "id": 2,
        "text": "Oesophageal carcinoma"
      },
      {
        "id": 3,
        "text": "Hepatic Fibrosis"
      },
      {
        "id": 4,
        "text": "Leukemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>He should be screened for <strong>Oesophageal carcinoma</strong>, as it frequently develops in patients with <strong>Howel Evans syndrome</strong>.</p>\n<p>It is an <strong>autosomal dominantly</strong> inherited focal palmoplantar keratoderma (tylosis) with the eventual development of oesophageal carcinoma and oral leukoplakia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A chronic asthmatic patient who is on inhaled steroids presents with a history of a burning sensation on eating spicy food and the following findings are seen. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Candida infection"
      },
      {
        "id": 2,
        "text": "Burning mouth syndrome"
      },
      {
        "id": 3,
        "text": "Geographical tongue"
      },
      {
        "id": 4,
        "text": "Oral Lichen Planus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario is suggestive of <strong>erythematous candidiasis.</strong></p>\n<p><strong>Erythematous (atrophic) candidiasis</strong> appears as a red, raw-looking lesion. It may or may not be related to pseudo membranes. On the tongue, there is a loss of the lingual papillae, leaving a smooth area. It can occur<strong> after long term corticosteroids</strong> or antibiotics usage or those with HIV. Other names for this condition include&nbsp;<strong>Acute atrophic oral candidiasis</strong> and <strong>Antibiotic sore tongue.</strong></p>\n<div>\n<div class=\"table-responsive font-weight-light answer-scroll\">\n<p>Chronic erythematous candidiasis is usually associated with denture wearing.</p>\n<p>Candidiasis of the oral mucosal membranes is of the following types:</p>\n<table style=\"height: 654px;\" width=\"402\">\n<tbody>\n<tr>\n<td style=\"width: 179.789px; text-align: center;\">Type of Candidiasis</td>\n<td style=\"width: 206.211px; text-align: center;\">Description&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">\n<p>Acute pseudomembranous candidiasis /</p>\n<p>Oral thrush /&nbsp;</p>\n<p>Chronic pseudomembranous candidiasis&nbsp;</p>\n</td>\n<td style=\"width: 206.211px;\">\n<p>Sharply defined patch of creamy, crumbly, curd\u2010like, white pseudomembrane</p>\n<p>Has an underlying erythematous base</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">Acute erythematous candidiasis&nbsp;</td>\n<td style=\"width: 206.211px;\">\n<p>Denuded, atrophic,&nbsp;erythematous mucous membranes</p>\n<p>Most common- dorsum of<br />the tongue&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">\n<p>Chronic erythematous candidiasis /</p>\n<p>Chronic atrophic candidiasis /&nbsp;</p>\n<p>Denture stomatitis</p>\n</td>\n<td style=\"width: 206.211px;\">\n<p>Affected areas&nbsp;show a variable bright red or dusky erythema</p>\n<p>Fairly sharply defined at the margin of the denture</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">\n<p>Chronic plaque\u2010like candidiasis /&nbsp;</p>\n<p>Chronic hyperplastic candidiasis /</p>\n<p>Candida leukoplakia</p>\n</td>\n<td style=\"width: 206.211px;\">\n<p>Very persistent, firm, irregular, white plaques occur in the mouth</p>\n<p>Commonly on the cheek or tongue&nbsp;</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">Chronic nodular candidiasis</td>\n<td style=\"width: 206.211px;\">Tongue has a cobbled appearance</td>\n</tr>\n<tr>\n<td style=\"width: 179.789px;\">Angular cheilitis/Angular stomatitis/&nbsp;Perl&egrave;che</td>\n<td style=\"width: 206.211px;\">Soreness at the angles of the mouth extending outwards in the<br />folds of the facial skin</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>Other options:</p>\n<p><strong>Burning mouth syndrome (BMS) </strong>is a burning sensation in the mouth with no underlying dental or medical cause where no related signs of disease are found in the mouth.</p>\n<p><strong>Geographic tongue</strong>, though consistent with the clinical image is not the best fit considering the clinical history. It is usually asymptomatic but can be occasionally associated with a sore tongue. It usually is associated with a history of being not constant in size, shape, or location.</p>\n<p><strong>Oral lichen planus</strong> is associated with <strong>Wickham striae</strong> in the oral cavity. They are fine white lines in a <strong>lacy or fern-like pattern</strong> that cross the plaques in lichen planus.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3c1442bbc02047f08e7058414f0eb342.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common cutaneous manifestation of systemic lupus erythematosus?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic urticaria"
      },
      {
        "id": 2,
        "text": "Malar rash"
      },
      {
        "id": 3,
        "text": "Raynaud's Phenomenon"
      },
      {
        "id": 4,
        "text": "Photosensitivity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>most common cutaneous</strong> manifestation of <strong>systemic lupus erythematosus</strong> is <strong>photosensitivity</strong>.</p>\n<p>In decreasing order, the cutaneous manifestations in SLE are:</p>\n<ol>\n<li>Photosensitivity</li>\n<li>Raynaud's phenomenon\u00a0</li>\n<li>Malar rash</li>\n<li>Chronic urticaria &gt;36 hrs</li>\n<li>Non-scarring alopecia\u00a0</li>\n<li>Mouth ulceration</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image shows an investigative modality of nail folds. This along with ANA testing helps in the early diagnosis of:",
    "choices": [
      {
        "id": 1,
        "text": "Dermatomyositis"
      },
      {
        "id": 2,
        "text": "Systemic sclerosis"
      },
      {
        "id": 3,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 4,
        "text": "Mixed connective tissue disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows&nbsp;<strong>nail-fold capillaroscopy</strong> findings. The image shows giant capillaries, hemorrhages, and reducing capillary density suggesting an active pattern in&nbsp;<strong>systemic sclerosis</strong>.</p>\n<p>The most important tests for systemic sclerosis are <strong>ANA reactivity</strong> and<strong> nail fold capillaroscopy. </strong>Investigations to exclude or confirm other autoimmune rheumatic diseases including arthritis or other forms of connective tissue disease are also done.&nbsp;</p>\n<p>Nail-fold capillaroscopy is a <strong>non-invasive</strong>, easy, and safe diagnostic technique designed to evaluate the <strong>general architecture of capillary rows</strong> and <strong>fine details</strong> of small vessels of the microcirculation in the nail fold.</p>\n<p>The most important indications for performing capillaroscopy include differential diagnosis of <strong>primary</strong> and<strong> secondary Raynaud's phenomenon</strong>, as well as the&nbsp;assessment of scleroderma spectrum disorders.</p>\n<p>In systemic sclerosis, capillary abnormalities appear and evolve in a clearly defined sequence called the <strong>scleroderma pattern</strong>, which<strong> correlates with internal organ involvement</strong>.</p>\n<p>Nail fold capillaroscopy is also listed as a systemic sclerosis <strong>classification criterion</strong> recognized by the European League Against Rheumatism (<strong>EULAR</strong>).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa382cf36199451299426c91a5057aff.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following patients would you expect to see a positive Dory flop sign?",
    "choices": [
      {
        "id": 1,
        "text": "A young woman with a painless beefy red granulomatous ulcer on her vulva"
      },
      {
        "id": 2,
        "text": "A middle-aged man with an painless indurated lesion on his penis"
      },
      {
        "id": 3,
        "text": "A circumcised teenager with multiple painful vesicles over his penis"
      },
      {
        "id": 4,
        "text": "A lady with a painless indurated ulcer over her labia majora"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p id=\"__p22\" class=\"p p-first-last\">The <strong>Dory flop sign</strong> is described in an <strong>uncircumcised male</strong> with an<strong> indurated </strong>lesion of<strong>&nbsp;primary syphilis </strong>on the <strong>underside of the coronal sulcus</strong>. Here, <strong>prepucial</strong> <strong>retraction </strong>causes the <strong>foreskin</strong> to <strong>flip</strong> suddenly. Hence it would only be seen in the middle-aged man with the indurated lesion on his penis.&nbsp;</p>\n<p class=\"p p-first-last\">The Dory flop sign can help <strong>distinguish chancres from </strong>other<strong> nonindurated</strong> causes of genital ulcer disease, such as&nbsp;<em>Herpes simplex</em> virus infection and chancroid.</p>\n<p class=\"p p-first-last\">It is named after the movement of a dory, a small wooden fishing boat, which flips suddenly when overturned. &nbsp;</p>\n<p class=\"p p-first-last\">Option A: This young woman has granuloma inguinale, which is a non-indurated lesion.</p>\n<p class=\"p p-first-last\">Option C: This circumcised teenager has herpes genitalis.</p>\n<p class=\"p p-first-last\">Option D: Though this lady has an indurated lesion (chancre), the dory flop sign can be demonstrated only in uncircumcised males.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man was referred to a urologist for the following finding. Which of the following would not have caused this?",
    "choices": [
      {
        "id": 1,
        "text": "Donovanosis"
      },
      {
        "id": 2,
        "text": "Lymphogranuloma venereum"
      },
      {
        "id": 3,
        "text": "Gonococcal urethritis"
      },
      {
        "id": 4,
        "text": "Penile tuberculosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The deformity shown in the above image depicts a <strong>penis</strong> that is <strong>twisted</strong> along its <strong>long axis</strong>, which is called <strong>saxophone penis</strong>. It is a late complication of<strong> lymphogranuloma venereum</strong>, <strong>penile tuberculosis,</strong> and <strong>primary</strong> <strong>lymphedema</strong>.&nbsp;It does not occur in donovanosis.&nbsp;</p>\n<p>It occurs as a complication of long-standing <strong>inflammation</strong>, which causes <strong>fibrosis</strong> of lymphatics and connective tissue. The dorsal surface of the penis has a <strong>poor blood supply</strong> compared to the ventral surface and undergoes more fibrosis. This leads to a <strong>dorsal bend</strong> of the penis.&nbsp;</p>\n<p><strong>Gonococcal urethritis</strong> can lead to periurethral abscesses, which result in urethral strictures. In males, this may cause a saxophone penis deformity.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0ed9878e6d084c89a1b5813147f74000.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a feature of the Amsel criteria?",
    "choices": [
      {
        "id": 1,
        "text": "Homogenous thin greyish discharge"
      },
      {
        "id": 2,
        "text": "Vaginal pH less than 4.5"
      },
      {
        "id": 3,
        "text": "Amine odour after adding 10% KOH"
      },
      {
        "id": 4,
        "text": "Epithelial cells studded with coccobacilli"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Acidic pH</strong> is not a feature of the&nbsp;<strong>Amsel criteria, </strong>which are used for the diagnosis of <strong>bacterial vaginosis.</strong></p>\n<p><strong>3 out of 4</strong> of the following criteria are needed for a positive diagnosis:</p>\n<ol>\n<li>Homogeneous, thin, <strong>grayish-white discharge</strong> that smoothly coats the vaginal walls.</li>\n<li>Vaginal <strong>pH &gt; 4.5</strong>.</li>\n<li><strong>Positive whiff-amine test -</strong>&nbsp;Fishy odor when a drop of 10% KOH is added to vaginal discharge.</li>\n<li><strong>Clue cells</strong> on saline wet mount: Vaginal <strong>epithelial</strong> cells studded with adherent <strong>coccobacilli</strong> at the edge of the cell.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c7288d7f2c6442cb3008adbb3c65698x1280x981.9054340155258.JPEG"
    ]
  },
  {
    "text": "What would be the standard therapy for a patient with the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "Thalidomide"
      },
      {
        "id": 2,
        "text": "Systemic corticosteroid"
      },
      {
        "id": 3,
        "text": "Antimalarial"
      },
      {
        "id": 4,
        "text": "Topical retinoids"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Hydroxychloroquine </strong>(antimalarial) is the first-line systemic agent for discoid lupus erythematosus (DLE). The lesions seen in the image are characteristic of DLE.</p>\n<p>The primary lesion is an erythematous papule. As it progresses pigmentary changes develop, with hypopigmentation in the central, or inactive area, and hyperpigmentation at the active border. \u00a0</p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li><strong>Thalidomide</strong> is considered in patients who are <strong>resistant </strong>to antimalarials.\u00a0</li>\n<li>Topical and intralesional <strong>corticosteroids</strong> are a part of the standard therapy, but systemic steroids are avoided since dose and duration may result in a lot of side effects.\u00a0</li>\n<li>Topical <strong>retinoids</strong> are also considered helpful, but they are not the initial therapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ae3bfaab392b482d95aaaab43073ed34.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The microscopic examination of a sample obtained from a genital ulcer is shown below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Granuloma inguinale"
      },
      {
        "id": 2,
        "text": "Gonorrhoea"
      },
      {
        "id": 3,
        "text": "Chancroid"
      },
      {
        "id": 4,
        "text": "Lymphogranuloma venerum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>Donovan bodies</strong>, which points to a diagnosis of <strong>granuloma</strong> <strong>inguinale.</strong></p>\n<p>Donovan bodies refer to the Gram-negative rod-shaped or oval organisms that show <strong>bipolar staining</strong> or <strong>safety\u2010pin appearance</strong>, present <strong>intracellularly</strong> in the cytoplasm of large <strong>mononuclear</strong> <strong>cells</strong>.</p>\n<p>Option B: <strong><em>Neisseria gonorrhoeae</em> </strong>appears on microscopy as<strong> Gram\u2010negative intracellular diplococci </strong>within phagocytes as seen below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b0d07339d2b14a1c9b631ba1df9ea7c6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e79a4b90109d441fa7f3e5bfa5036982x720x474.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d57ae7fb10c34d62bd5166a6b3927081x720x705.JPEG"
    ]
  },
  {
    "text": "Identify the false statement regarding morphea.",
    "choices": [
      {
        "id": 1,
        "text": "Plaque morphea is the most common form"
      },
      {
        "id": 2,
        "text": "Absence of sclerodactyly and nail fold capillary changes"
      },
      {
        "id": 3,
        "text": "Antitopoisomerase and anticentromere are usually positive"
      },
      {
        "id": 4,
        "text": "Encoup de Sabre is linear morphea presenting as scarring alopecia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Autoantibodies such as <strong>ANA, anti-histone, and anti\u2010ssDNA</strong> may be present in <strong>morphea</strong>, but the systemic sclerosis specific autoantibodies such as anti-topoisomerase, anti-centromere and anti\u2010RNA polymerase are rarely found.</p>\n<p>Morphoea, a term used in preference to &lsquo;<strong>localized scleroderma</strong>&rsquo;, encompasses a group of related conditions characterized by varying degrees of <strong>sclerosis, fibrosis, and atrophy</strong> in the skin and subcutaneous tissues.</p>\n<p>It is distinguished from systemic sclerosis by the <strong>absence</strong> of sclerodactyly and nail-fold capillary changes.</p>\n<p>Overall, <strong>plaque morphea</strong>&nbsp;is the <strong>commonest subtype.</strong></p>\n<p>Morphoea en coup de sabre:<strong> Blaschkoid linear induration</strong> affecting the face and scalp, may involve underlying muscle, bone, eye, and the brain.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0ae9dfcfe69e41edac080c63fdef2026x1280x962.2566995768689.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a27b758543224fcb84e47e24b665a82cx1280x1129.2524682651622.JPEG"
    ]
  },
  {
    "text": "A patient with an outbreak of cold sores 2 days ago now presents with non-pruritic lesions on his elbow, as seen below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Viral exanthem"
      },
      {
        "id": 2,
        "text": "Acute exanthematous pustulosis"
      },
      {
        "id": 3,
        "text": "Erythema multiforme"
      },
      {
        "id": 4,
        "text": "Drug eruptions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The history of <strong>cold sores</strong>, a herpes simplex virus (HSV) infection, followed by the appearance of <strong>pathognomic target lesions,</strong> as seen in the image, is suggestive of <strong>e</strong><strong>rythema multiforme.</strong></p>\n<p><strong>Erythema multiforme</strong> (EM) is an acute, self-limited, skin condition that is <strong>a type IV hypersensitivity</strong> reaction associated with certain infections, medications, and other triggers.&nbsp;Precipitating factors commonly include HSV strains 1 and 2, EBV, and drugs like sulfa drugs. This is consistent with the patient history of having had <strong>cold sores.</strong></p>\n<p>It presents as a localized eruption of the skin with minimal or no mucosal involvement. The papules then evolve into <strong>pathognomonic target or iris lesions</strong> that appear within a 72-hour period and begin on the extremities. Lesions remain in a fixed location for at least 7 days and then begin to heal. &nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Viral exanthem</strong> is&nbsp;an eruptive skin rash that is often related to a viral infection. It can have various types of rash based on the virus associated.</p>\n<p>Option B:&nbsp;<strong>Acute exanthematous pustulosis</strong> is associated with drug reaction and presents as small non-follicular pustules on an erythematous base that undergo spontaneous resolution.</p>\n<p>Option D: <strong>Drug eruptions</strong> are cutaneous manifestations that are often related to a drug used. It can have various types of rash based on the drug used.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cf865391a2824c569c54d49c12ba6a0e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The most common skin- related complaint reported in patients with HIV is _________.",
    "choices": [
      {
        "id": 1,
        "text": "Idiopathic pruritis"
      },
      {
        "id": 2,
        "text": "Seborrhoeic dermatitis"
      },
      {
        "id": 3,
        "text": "Fungal infections"
      },
      {
        "id": 4,
        "text": "Folliculitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the post-antiretroviral era, <strong>idiopathic pruritus </strong>has become the most common skin-related disease manifestation reported in patients with HIV.</p>\n<p>The other common skin manifestations are:</p>\n<ul>\n<li>Xerosis (23%) and icythyosis</li>\n<li>Nodular prurigo</li>\n<li><strong>Folliculitis</strong></li>\n<li>Eosinophilic folliculitis</li>\n<li>Pruritic papular eruption</li>\n<li><strong>Seborrhoeic dermatitis (9%)</strong></li>\n<li>Granuloma annulare</li>\n<li>Drug eruptions</li>\n<li>Herpes simplex</li>\n<li>Herpes zoster</li>\n<li>Viral warts</li>\n<li>Mollusca</li>\n<li>Oral and vaginal candidosis</li>\n<li><strong>Tinea (including onychomycosis)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 59-year-old lady, a known diabetic for the past 10 years, presents with rashes over shin as shown in the image. What is the possible diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Granuloma annulare"
      },
      {
        "id": 2,
        "text": "Necrobiosis lipoidica"
      },
      {
        "id": 3,
        "text": "Reactive perforating collagenosis"
      },
      {
        "id": 4,
        "text": "Rubeosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows an erythematous rash with ulceration and healing over the shin. This clinical presentation in a diabetic patient is indicative of <strong>necrobiosis lipoidica</strong>.</p>\n<p><strong>Necrobiosis lipoidica diabeticorum</strong> is a rare chronic and <strong>granulomatous skin disorder</strong> that affects only <strong>0.3%</strong> of diabetic patients.&nbsp;The average age of onset is 30 years, with <strong>females</strong> being affected more commonly. Its postulated etiology is&nbsp;<strong>microangiopathy.</strong></p>\n<p>Most rashes are located on the legs, especially above the <strong>tibiae.&nbsp;</strong>It may present as<strong> red papules</strong> that enlarge to form <strong>patches</strong> or<strong> plaques</strong> with an atrophic yellowish-brown and slightly depressed center.The lesions may<strong> resolve spontaneously</strong> or become persistent<strong> chronic lesions,</strong> that can ulcerate.</p>\n<p>Option A:&nbsp;<strong>Granuloma annular&nbsp;</strong>is most commonly found in children and females &lt;30 years. It manifests as groups of 1-2mm papules that range from skin colored to violaceous, in an annular arrangement over distal extremities. There is no confirmed association with diabetes.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/65a87c5efa4d4378aba4bb807bb62216.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/90ac989695be4b35b9939412a1405ad3x800x450.JPEG"
    ]
  },
  {
    "text": "Which of the following conditions causes bamboo hair as seen in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Trichorrhexis nodosa"
      },
      {
        "id": 2,
        "text": "Netherton syndrome"
      },
      {
        "id": 3,
        "text": "Kinky hair syndrome"
      },
      {
        "id": 4,
        "text": "Uncombable hair syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bamboo hair</strong> is seen in<strong> Netherton</strong> syndrome.</p>\n<p>It presents with <strong>atopy</strong>, recurrent skin <strong>infection</strong>, and an increased risk of skin <strong>cancer</strong>. It has two characteristic features, namely:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Ichthyosis linearis circumflexa</strong>&nbsp;- a rare form of ichthyosis with scaling and plaques.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Trichorrhexis invaginata</strong>&nbsp;or bamboo hair - characterized by invagination of the distal hair shaft into the proximal portion. It is also called <strong>golf-tee</strong> or <strong>ball and socket</strong> appearance as seen below.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/87ff8b04cdb84136b9cf9352e89bfdd8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0610858131b541dbbf67cb6727e6a75fx483x585.PNG",
      "https://cdn1.dailyrounds.org/uploads/aa4ddc46fbd44ad7ade374c874d3b784x444x483.JPEG",
      "https://cdn1.dailyrounds.org/uploads/e333e5b359f24e5694d90e82698802adx469x352.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/883165e3ecb24248958cff0d47ed7149x603x600.JPEG",
      "https://cdn1.dailyrounds.org/uploads/e2f2a5c2aa06471d8c81201ad50727f9x697x447.JPEG"
    ]
  },
  {
    "text": "In a 6-year-old boy who presented with black stools, the following finding was noted. Endoscopy showed multiple polyps in the GI tract. Which of the following is false about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal dominant condition"
      },
      {
        "id": 2,
        "text": "Patients need to undergo lifelong screening"
      },
      {
        "id": 3,
        "text": "Malignant transformation of polyps is common"
      },
      {
        "id": 4,
        "text": "Due to mutation of STK11 gene"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The presence of multiple polyps in the GI tract along with lentigines on the lips is suggestive of&nbsp;<strong>Peutz-Jeghers-Touraine syndrome</strong>.&nbsp;<strong>Malignant transformation&nbsp;</strong>of hamartomatous polyps is <strong>rare.</strong></p>\n<p>It&nbsp;is an <strong>autosomal dominant </strong>disease.<strong>&nbsp;</strong>It is due to the&nbsp;<strong>mutation </strong>of the serine/threonine kinase gene (<strong>STK11</strong>).</p>\n<p>Typical cutaneous features include <strong>lentigines of the lips</strong>&nbsp;(early feature). Associated <strong>melanocytic macules</strong> of buccal mucosa and digits are common. <strong>Hamartomatous polyps</strong> are present mainly in the <strong>jejunum</strong> but can occur throughout the GI tract.</p>\n<p>Patients require&nbsp;<strong>lifelong screening</strong>&nbsp;as they are at high risk for carcinomas of the breast, ovary, colon, and stomach.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c82643652d7e430aa1231ff18397afa6.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are causes of erythroderma except  _______",
    "choices": [
      {
        "id": 1,
        "text": "Pityriasis Rosea"
      },
      {
        "id": 2,
        "text": "Psoriasis"
      },
      {
        "id": 3,
        "text": "Seborrheic Dermatitis"
      },
      {
        "id": 4,
        "text": "Cutaneous Lymphoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pityriasis rosea</strong> is not a cause of erythroderma.</p>\n<p>The most common causes of erythroderma in <strong>decreasing order</strong> of frequency are:</p>\n<ul>\n<li>Eczema of various subtypes including <strong>seborrheic dermatitis</strong></li>\n<li><strong>Psoriasis&nbsp;</strong></li>\n<li><strong>Lymphoma</strong> and leukemia</li>\n<li>Drugs - phenylbutazone, phenytoin, carbamazepine, gold salts, lithium, cimetidine</li>\n<li>Hereditary disorders - ichthyosiform erythroderma, pityriasis rubra pilaris</li>\n<li>Pemphigus foliaceus</li>\n<li>Other skin diseases - lichen planus, dermatophytosis, crusted scabies, dermatomyositis<br /><br /></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old girl is rushed to the casualty with sudden-onset breathing difficulty. History reveals that her father also suffers from similar episodes. Examination findings are as follows. Which of the following statements is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Type II of this condition is most common"
      },
      {
        "id": 2,
        "text": "The enzyme involved is C1 INH"
      },
      {
        "id": 3,
        "text": "There is loss of inhibition of Hageman factor"
      },
      {
        "id": 4,
        "text": "Associated with  C4 and C2 deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows <strong>subcutaneous</strong>&nbsp;and&nbsp;<strong>submucosal</strong>&nbsp;edema of the face and lips without wheals. Along with the history, a diagnosis of&nbsp;<strong>hereditary angioedema</strong> (HAE) is most likely.<strong> Type I </strong>HAE is the <strong>most common</strong> form (85%).</p>\n<p>There are three types of hereditary angioedema (HAE):</p>\n<ul>\n<li>Type 1 (85%):&nbsp;<strong>C1INH deficiency&nbsp;</strong></li>\n<li>Type 2 (15%):&nbsp;Dysfunction of C1-INH, but normal levels</li>\n<li>Type 3 (rare) :<strong>&nbsp;&nbsp;</strong>Normal C1-INH levels and function</li>\n</ul>\n<p><strong>HAE</strong> occurs due to a mutation in&nbsp;the<strong> SERPING1 </strong>gene, which codes for the C1 esterase inhibitor (C1INH). It is also called angioneurotic edema or <strong>Quincke's disease.</strong></p>\n<p><strong>C1INH</strong>&nbsp;enzyme normally inhibits the following:</p>\n<ul>\n<li><strong>Complement</strong> system</li>\n<li><strong>Kallikrein</strong> system</li>\n<li>Factor XII<strong>&nbsp;</strong>or<strong> Hageman factor</strong></li>\n</ul>\n<p>In HAE, loss of C1INH activity leads to loss of inhibition of these above processes. This leads to <strong>decreased C4</strong> and<strong> C2</strong> levels and&nbsp;<strong>bradykinin accumulation.</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b7656834d0a342daaedf53866c41ad2f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presented with a pruritic lesion on his face. Microbiological examination of swabs taken from the lesion showed Gram-positive cocci arranged in pairs and chains. Which of the following is not a possible complication of his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Scarlet fever"
      },
      {
        "id": 2,
        "text": "Post-streptococcal glomerulonephritis"
      },
      {
        "id": 3,
        "text": "Rheumatic fever"
      },
      {
        "id": 4,
        "text": "Erythema multiforme"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above scenario is suggestive of <strong>streptococcal</strong> <strong>impetigo</strong>. <strong>Rheumatic</strong> <strong>fever</strong> is a complication of&nbsp;streptococcal <strong>pharyngitis,&nbsp;</strong><strong>not</strong>&nbsp;impetigo.</p>\n<p>The <strong>complications</strong> of streptococcal impetigo include:&nbsp;</p>\n<ul>\n<li>Scarlet fever</li>\n<li>Erythema multiforme</li>\n<li>Post-streptococcal glomerulonephritis.</li>\n<li>Cellulitis&nbsp;</li>\n</ul>\n<p>Infective complications are uncommon in the absence of systemic disease or malnutrition.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/421467efef4f44649bd8ebb935cfd3e7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old construction worker presented with a non-pruritic lesion for 4 weeks. KOH mount of the epidermal scrapings showed brown, branched, closely septate hyphae and elongated budding cells. What is the most likely causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Hortaea werneckii"
      },
      {
        "id": 2,
        "text": "Malassezia globosa"
      },
      {
        "id": 3,
        "text": "Fusarium"
      },
      {
        "id": 4,
        "text": "Piedraia hortae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario and image are suggestive of <strong>tinea nigra</strong> (pityriasis nigra).&nbsp;It is a rare <strong>superficial</strong> fungal infection caused by <em><strong>Hortaea</strong> <strong>werneckii.&nbsp;</strong></em></p>\n<p>The infection occurs by direct <strong>inoculation</strong> through the skin.&nbsp;It causes deeply <strong>pigmented</strong>, <strong>macular</strong>, <strong>non</strong>-<strong>scaly</strong> patches commonly on <strong>palms</strong>.&nbsp;</p>\n<p>First-line treatment is topical <strong>azole</strong> creams such as econazole and ketoconazole.</p>\n<p>The image below shows a microscopic image of tinea nigra, with pigmented filaments with conidia.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/77dfd5ebc9bd44d391b9f3c68c4dcb43.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51ecc10ebc774974b4974b1d38629945x512x396.PNG"
    ]
  },
  {
    "text": "Which of the following organisms causes hard black nodules over scalp hair?",
    "choices": [
      {
        "id": 1,
        "text": "Piedraia hortae"
      },
      {
        "id": 2,
        "text": "Trichosporon beigelii"
      },
      {
        "id": 3,
        "text": "Corynebacterium tenuis"
      },
      {
        "id": 4,
        "text": "Trichophyton tonsurans"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>hard</strong> <strong>black nodules</strong> over the scalp hair are suggestive of\u00a0<strong>black</strong> <strong>piedra</strong>. It is a fungal infection of the <strong>hair</strong> <strong>shafts</strong> caused by <em><strong>Piedraia hortae.</strong></em></p>\n<p>The fungus forms hard, dark, <strong>gritty</strong>, and <strong>superficial</strong> nodules on the hair shafts. As the fungus grows into the hair shaft, the hair may fracture easily.\u00a0It produces sexual spores in its parasitic phase.</p>\n<p><strong>Treatment: </strong></p>\n<ul>\n<li>Shaving or cutting\u00a0hair (prevents recurrence also)</li>\n<li>Benzoic acid ointment is used.\u00a0\u00a0</li>\n</ul>\n<p>Option B:\u00a0<em>Trichosporon beigelli\u00a0</em>causes white piedra or trichosporosis nodosa.</p>\n<p>Option C:\u00a0<em>Corynebacterium tenuis\u00a0</em>causes trichomycosis axillaris.</p>\n<p>Option D:\u00a0<em>Trichophyton tonsurans\u00a0</em>causes mainly tinea capitis.</p>\n<p>The images below show<strong>\u00a0</strong>black piedra infected hair mounted in 30% KOH and the appearance of hair strands, respectively. The dark nodules are formed of dematiaceous hyphae cemented together to form a hard mass.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8323ecb07ee94d15ad856bd9cc1524c9x576x376.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ab3cb2fd444a48eb95404c75ded391e8x512x358.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c6c7cbc5fd3542d19544b4e1b4a61b05x507x355.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e6da2bf1e504b8bb3fa17895b0b980bx1280x1280.JPEG"
    ]
  },
  {
    "text": "Identify the incorrect statement regarding the types of hair.",
    "choices": [
      {
        "id": 1,
        "text": "Melanin is absent in vellus hair"
      },
      {
        "id": 2,
        "text": "Vellus hair depth extends to the subcutis"
      },
      {
        "id": 3,
        "text": "The medulla is thicker in terminal hairs"
      },
      {
        "id": 4,
        "text": "Lanugo hair is unmedullated"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Vellus</strong> hair extends to the <strong>dermis</strong> and not the subcutis.</p>\n<p><strong>Lanugo</strong> refers to the fine, soft, unmedullated and usually unpigmented hair of the <strong>prenatal</strong> period. It is normally shed in utero in the eighth to ninth months of gestation.</p>\n<p><strong>Postnatal</strong> hair is of two kinds: vellus and terminal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1d95d89ff79e4a4fb03848b0c21cf25cx1280x1726.JPEG"
    ]
  }
];
        let quizName = 'Dermatology Test Ii';
        const quizFilename = 'dermatology-test-ii-b64594dc.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>