<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investigations Of Choice Mini Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Technetium-99m labelled heat-denatured RBCs are used to diagnose pathology in which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Biliary system"
      },
      {
        "id": 2,
        "text": "Kidney"
      },
      {
        "id": 3,
        "text": "Pulmonary circulation"
      },
      {
        "id": 4,
        "text": "Spleen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Technetium-99m</strong>\u00a0labelled heat-denatured RBCs are used for specific <strong>splenic assessment</strong> and is gold-standard in <strong>splenosis.</strong></p>\n<p>The uses of Tc-99m labelled RBC scan include assessment of the following:</p>\n<ul>\n<li>Assessment of cardiac function in congestive cardiac failure and congenital heart disease</li>\n<li>Occult gastrointestinal (GI) bleed</li>\n<li>Vascular lesions like hepatic haemangioma</li>\n<li>Ectopic splenic tissue (splenosis)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A known TB patient on irregular treatment came with complaints of low back pain for the past 1 month. The pain increased in severity over the last 10 days and was radiating to the left lower limb associated with tingling and numbness. Which of the following is the investigation of choice for the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "X-rays"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "Bone scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given condition is <strong>TB spine</strong>. MRI is the investigation of choice.</p>\n<p>It can also be reliably used to differentiate between tuberculous and pyogenic vertebral osteomyelitis.</p>\n<p>Patients with <strong>tuberculous vertebral osteomyelitis</strong> have a significantly higher incidence of a well-defined paraspinal abnormal signal, thin and smooth walled abscess cavities, particularly at paraspinal or intraosseous locations, sub-ligamentous spread to three or more vertebral levels and involvement of multiple vertebral bodies.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old male was brought to the emergency department with sudden onset breathlessness. He has undergone hip replacement one month back. As a physician, you are suspecting a pulmonary embolism. Which of the following is the investigation of choice for your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ventilation perfusion scanning (V/Q scan) of lungs"
      },
      {
        "id": 2,
        "text": "Chest CT with intravenous contrast"
      },
      {
        "id": 3,
        "text": "MR pulmonary angiography"
      },
      {
        "id": 4,
        "text": "Echocardiography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>CT chest with intravenous contrast</strong>&nbsp;is the investigation of choice for<strong> pulmonary embolism (PE).</strong></p>\n<p>Other options:</p>\n<ul>\n<li>Ventilation-perfusion (V/Q ) scanning has become a second-line diagnostic test for PE, used mostly for patients who cannot tolerate intravenous contrast or in whom the CT results are inconclusive.</li>\n<li>MR pulmonary angiography may detect large proximal PE but is not reliable for smaller segmental and subsegmental PE. It is used when neither CT angiography nor ventilation perfusion scan can be done.&nbsp;</li>\n<li>Echocardiography is not a reliable diagnostic imaging tool for acute PE because most patients with PE have normal echocardiograms. However, echocardiography is a very useful diagnostic tool for detecting conditions that may mimic PE, such as acute myocardial infarction, pericardial tamponade, and aortic dissection.</li>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>The arrows in the following images demonstrate a pulmonary embolus. Also the gross specimen image helps correlation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb8d74e4d37547b6a6286f6fad9515bdx800x581.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/faa4e0ce5d3c4987a19a999a4fa1ec57x800x570.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3dccaa20c5184acdbff5d98c7db3369dx800x542.JPEG"
    ]
  },
  {
    "text": "A 15-year-old girl developed a rash and pain in the upper abdomen after dancing. The rash settled down after a course of antihistamines. However, the pain persisted for a few weeks until one day she was brought to the emergency department with signs of anaphylactic shock. Suddenly she coughed up a white material that contains scolices. Which of the following is the best investigation that could have been done to avoid this complication?",
    "choices": [
      {
        "id": 1,
        "text": "ELISA"
      },
      {
        "id": 2,
        "text": "Casoni\u2019s test"
      },
      {
        "id": 3,
        "text": "CT scan"
      },
      {
        "id": 4,
        "text": "X-Ray"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Computed tomography (CT) scan is the<strong> best imaging modality </strong>for a\u00a0<strong>hydatid cyst</strong>;\u00a0the diagnostic feature is a space-occupying lesion with a smooth outline with septa.</p>\n<p>CT scan has an accuracy of 98% in the detection of hydatid cysts and higher sensitivity to demonstrate the daughter cysts and extra-hepatic cysts.\u00a0The indirect hemagglutination test and enzyme-linked immunosorbent assay (ELISA) have a sensitivity of 80% overall and are the initial <strong>screening tests</strong> of choice.</p>\n<p>Example of a Hydatid cysts in CT scan with collapsed /detached membrane:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0edf95440dbe44208f2e84955973af91x767x600.JPEG"
    ]
  },
  {
    "text": "A 25-year-old male from West Bengal presents with complaints of recurrent fever with chills for the past 3 months with progressive weakness and abdominal discomfort. On examination he has hepatosplenomegaly. It was found that he harboured the infection due to a bite of a sandfly. Which of the following is the method of choice for diagnosis of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Rapid dipstick test"
      },
      {
        "id": 2,
        "text": "Indirect fluorescent antibody test"
      },
      {
        "id": 3,
        "text": "Aldehyde test of Napier"
      },
      {
        "id": 4,
        "text": "ELISA"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>The rapid dipstick test</strong> has become the mainstay in <strong>serological</strong> <strong>diagnosis</strong> of <strong>Kala</strong> <strong>Azar (Visceral leishmaniasis)</strong>&nbsp;and is the method of choice for the diagnosis of the disease.</p>\n<p><strong>Laboratory diagnosis of Kala Azar:</strong></p>\n<ul>\n<li><strong>Rapid diagnostic test:</strong> <strong>rK39</strong> Rapid diagnostic test and Kala-azar dipstick test strip.</li>\n<li><strong>Parasitological diagnosis:</strong> Demonstration of <strong>LD bodies</strong>- confirmatory.</li>\n<li><strong>Aldehyde test of Napier</strong>: Widely used for surveillance.</li>\n<li><strong>Serological tests</strong> for diagnosis: Rapid dipstick test, Direct agglutination test, ELISA, Indirect Fluorescent Antibody Test</li>\n<li><strong>Leishmanin (Montenegro) test:</strong> Induration of 5mm or more is considered positive, usually positive 4-6 weeks after onset in cutaneous leishmaniasis, valuable for distinguishing immune from non-immune subjects and endemicity.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Echocardiography was done for a patient who presented with severe exertional dyspnea, chest pain, and occasional fainting spells. It revealed a mitral valve area of 1 sq cm, elevated LA pressure, and significant RV hypertrophy with TR. Which is the next best step in the evaluation of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Cardiac MRI"
      },
      {
        "id": 2,
        "text": "CT pulmonary angiography"
      },
      {
        "id": 3,
        "text": "Right heart catheterization"
      },
      {
        "id": 4,
        "text": "Ventilation / perfusion scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario, a <strong>mitral valve area</strong> of <strong>1 sq cm</strong> suggests severe <strong>mitral stenosis</strong>. This leads to <strong>elevated LA pressure</strong> and subsequently <strong>pulmonary hypertension</strong>. Due to pulmonary hypertension, there is compensatory RV hypertrophy (right ventricular-pulmonary hypertension coupling) and secondary TR. The next step should be to confirm pulmonary hypertension. <strong>R</strong><strong>ight heart catheterization</strong> is the <strong>gold standard</strong>&nbsp;test for diagnosing pulmonary hypertension.</p>\n<p>Option A: Cardiac MRI is considered the gold standard for assessing RV function. In the case of pulmonary hypertension, it is used for serial follow-ups due to its non-invasive nature.</p>\n<p>Options B and D: CT angiography and ventilation/perfusion scan are done when pulmonary hypertension is suspected to be due to pulmonary embolism, coagulation disorders, or past history of thrombosis (chronic thromboembolic pulmonary hypertension) which should be followed by right heart catheterization.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the investigation of choice for evaluating posterior urethral valves in a newborn male?",
    "choices": [
      {
        "id": 1,
        "text": "MCU"
      },
      {
        "id": 2,
        "text": "Tc-DTPA scan"
      },
      {
        "id": 3,
        "text": "USG"
      },
      {
        "id": 4,
        "text": "DMSA scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Voiding cystourethrogram (<strong>VCUG</strong>)\u00a0or micturating cystourethrogram (<strong>MCU</strong>) is the best imaging technique for diagnosing <strong>posterior urethral valves</strong>.</p>\n<p>Posterior urethral valves result from forming a thick, <strong>valve-like membrane</strong> from a tissue of <strong>Wolffian</strong> <strong>duct</strong> <strong>origin</strong> (failure of regression of the mesonephric duct). This membrane courses obliquely from the verumontanum to the most distal portion of the prostatic urethra. They act as flap valves and are obstructive to antegrade urinary flow.</p>\n<p>Diagnosis is most commonly made <strong>antenatally</strong> with <strong>ultrasound. </strong>However, the diagnosis is<strong> best</strong> made during the <strong>micturition phase </strong>of VCUG\u00a0in lateral or oblique views so that the posterior urethra can be imaged adequately. The following findings are seen:</p>\n<ul>\n<li><strong>Dilatation </strong>and<strong> elongation</strong> of the posterior urethra - the equivalent of the ultrasonographic <strong>keyhole sign </strong>(as shown in the image below).\u00a0</li>\n<li>Linear <strong>radiolucent band</strong> corresponding to the valve - seen occasionally.\u00a0</li>\n<li>Vesicoureteral reflux (<strong>VUR</strong>) - seen in 50% of patients.\u00a0</li>\n<li>Bladder trabeculation/ diverticula.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cacd0ef628724be2829b3233605b6b03x1280x1581.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0457ce1418fd4b509506a4de5f4b037ax1280x1369.JPEG"
    ]
  },
  {
    "text": "A junior surgical resident is confused with the imaging modalities of the thyroid nodules. Kindly guide him on the investigation needed to have a definite diagnosis and management.",
    "choices": [
      {
        "id": 1,
        "text": "FNAC"
      },
      {
        "id": 2,
        "text": "CT neck"
      },
      {
        "id": 3,
        "text": "99m-Tc scan"
      },
      {
        "id": 4,
        "text": "Ultrasound"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Fine needle aspiration (FNA) cytology</strong>\u00a0is the key diagnostic technique while evaluating thyroid nodules.</p>\n<p>Although other investigations can assist in evaluating a nodule, FNA cytology provides a <strong>definitive diagnosis</strong>.</p>\n<p>The FNA results are provided according to the <strong>Bethesda System for Reporting Thyroid Cytology, 3rd edition</strong>.\u00a0Based on these results, the nodule can be classified and further management is decided accordingly.</p>\n<p>In rare cases when the FNAC is inconclusive, tru-cut or open biopsy can be done. However, this is often not required.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/11c84b954deb4e54af1d05f5a8af6b7cx1280x2073.JPEG"
    ]
  },
  {
    "text": "A 10-year-old boy was brought by his mother to the ER after having a sudden episode of vomiting blood. On examination, splenomegaly is detected with engorged superficial veins around his umbilicus. Which is the investigation of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Abdominal USG"
      },
      {
        "id": 2,
        "text": "Capsule endoscopy"
      },
      {
        "id": 3,
        "text": "Triphasic CT"
      },
      {
        "id": 4,
        "text": "Upper GI endoscopy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\">A child presenting with <strong>hematemesis and splenomegaly</strong> is presumed to have <strong>variceal bleeding</strong>&nbsp;and hence,&nbsp;<strong>upper GI endoscopy&nbsp;</strong>is the investigation of choice.</p>\n<p style=\"text-align: justify;\">The upper GI endoscopy provides a definitive diagnosis and an option to treat via <strong>band ligation </strong>or<strong> sclerotherapy</strong><strong>.</strong>&nbsp;</p>\n<p style=\"text-align: justify;\">Capsule endoscopy, ultrasound, CT, MRI, and elastography are not recommended because of their suboptimal accuracy compared to endoscopy. Capsule endoscopy is used to investigate an occult/obscure gastrointestinal bleed mostly suspected to be in the small intestine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 57-year-old male patient had a sudden tearing type of chest pain. He is a known hypertensive patient for the past 15 years and has not been on regular treatment. Acute coronary syndrome was ruled and he is hemodynamically stable. Considering aortic dissection, which is the next investigation to be performed?",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "Ultrasound"
      },
      {
        "id": 4,
        "text": "Aortography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>CT</strong> is the initial investigation for <strong>aortic dissection</strong>. As it is more <strong>widely available</strong> and takes a&nbsp;<strong>shorter time</strong> compared to MRI.</p>\n<p>MRI, though highly accurate for acute aortic disease evaluation, is usually confined to cases of severe renal insufficiency or absolute contraindications to iodinated contrast medium.</p>\n<p><strong>Ultrasound</strong> and&nbsp;<strong>aortography</strong> are not the investigation of choice for aortic dissection. Aortography used to be the gold standard. It involved the injection of high-flow contrast into the vessel. It has been replaced by noninvasive imaging. Intravascular ultrasound can be performed, but the procedure is expensive and requires experience.</p>\n<p>The below image depicts a CT chest indicating Type A aortic dissection from the aortic root. (A) Axial view and (B) sagittal view. Arrows indicate intimal flap.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f8c2f064ac384f9ea5c0d11de611af5cx800x335.JPEG"
    ]
  },
  {
    "text": "A young adult met with a minor bike accident. There are no obvious external injuries. However, the handle-bar has hit hard on his upper abdomen. His vitals are stable. If we suspect a pancreatic injury, Which is the modality of choice to investigate this?",
    "choices": [
      {
        "id": 1,
        "text": "USG"
      },
      {
        "id": 2,
        "text": "Pancreatic amylase"
      },
      {
        "id": 3,
        "text": "ERCP"
      },
      {
        "id": 4,
        "text": "CT"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The modality of choice for the evaluation of patients with abdominal trauma is <strong>computed tomography</strong> (<strong>CT) </strong>scanning of the abdomen.</p>\n<p>Isolated pancreatic amylase measurement is not recommended because up to 40% of patients with transected pancreatic duct have normal serum amylase levels.</p>\n<p>Isolated pancreatic injuries are not common. Up to 90% of patients present with associated hepatic, gastric, splenic, renal, colonic, or vascular lesions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 42-year-old male who met with a road traffic accident 9 months back now presents with a discharging sinus at his fracture site. On reviewing his records, it was found that he had encountered a fracture shaft of femur with Gustilo Anderson grade IIIB. Which of the following is the gold standard investigation for guiding antibiotic therapy in this case of osteomyelitis?",
    "choices": [
      {
        "id": 1,
        "text": "Sinus tract culture"
      },
      {
        "id": 2,
        "text": "Bone biopsy"
      },
      {
        "id": 3,
        "text": "Blood culture"
      },
      {
        "id": 4,
        "text": "Wound swab"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> bone biopsy</strong>\u00a0remains the <strong>gold standard</strong> method for guiding antibiotic therapy in this case of chronic osteomyelitis.</p>\n<p>A blood culture may be used to guide antibiotic therapy for hematologically acquired osteomyelitis. However, due to higher specificity in comparison to blood culture, a bone biopsy is considered the gold standard method of investigation.\u00a0</p>\n<p>Wound swab is not a definitive method to confirm the origin of bacterial infection because the organism need not necessarily contaminate the wound. Similarly, a negative sinus tract culture also does not rule out the possibility of an infection on the inside as it is not essential for the organism to travel up to the surface.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman complained of difficulty reaching high cabinets and carrying grocery bags. It has been progressing over the past 3 months. Which is the initial investigation of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "ESR"
      },
      {
        "id": 2,
        "text": "Creatine kinase"
      },
      {
        "id": 3,
        "text": "Electromyogram"
      },
      {
        "id": 4,
        "text": "hs-CRP"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario is suggestive of an <strong>inflammatory myositis</strong> for which<strong>&nbsp;</strong>the<strong> initial investigation</strong> of choice is <strong>creatine kinase (CK)</strong>.</p>\n<p>Creatine kinase is a marker of muscle breakdown. It is increased in dermatomyositis and polymyositis. However, it may be normal in inclusion body myositis.&nbsp;</p>\n<p>The <strong>most specific</strong> investigation for <strong>inflammatory myositis</strong> is a<strong> m</strong><strong>uscle biopsy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the best functional imaging modality with high sensitivity and specificity for detecting gastrinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Selective arterial secretin injection"
      },
      {
        "id": 2,
        "text": "OctreoScan"
      },
      {
        "id": 3,
        "text": "PET-CT with 68Ga-DOTATATE"
      },
      {
        "id": 4,
        "text": "MRI"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>PET-CT with 68Ga-DOTATATE</strong> is the best functional imaging modality for gastrinoma.</p>\n<p>It is used for assessing well-differentiated neuroendocrine tumours such as gastrinoma. It has\u00a0sensitivity and specificity of about &gt;90% when compared with Octreoscan, which has &gt;80%.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman with unilateral renal agenesis presents to your clinic with a history of recurrent abortions. You suspect uterine didelphys. Which of the following would be the next best investigation?",
    "choices": [
      {
        "id": 1,
        "text": "Laparoscopy"
      },
      {
        "id": 2,
        "text": "Intravenous pyelography"
      },
      {
        "id": 3,
        "text": "Hysterosalpingography"
      },
      {
        "id": 4,
        "text": "Ultrasonography"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ultrasonography</strong> (USG) is performed to confirm a diagnosis of\u00a0<strong>uterus didelphys. </strong></p>\n<p>Uterine didelphis is a congenital condition that occurs when the incomplete fusion of Mullerian ducts that form the uterus during embryonic development leads to the development of two separate uterine cavities and two cervices, each with its own set of endometrial lining.</p>\n<p>It is commonly associated with <strong>renal anomalies</strong> such as unilateral renal agenesis, severe renal hypoplasia, etc, and is often associated with recurrent pregnancy loss, preterm labour, malpresentation, and prematurity.</p>\n<p><strong>3D ultrasound</strong>, a <strong>non-invasive test</strong>, visualizes <strong>both</strong> the <strong>external</strong> (serosal) and <strong>internal</strong> (endometrial) uterine contours, effectively identifying anomalies. <strong>Hysterosalpingography</strong> (Option C) shows <strong>only</strong> the<strong> internal contour</strong>, making it unable to distinguish between conditions like didelphys, bicornuate, septate, or arcuate uterus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0941512806a0445884a94e908c27dd23x1280x792.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5da9a98bcc4b41fd8af7f7946fe5bd3bx1267x5134.JPEG"
    ]
  },
  {
    "text": "A 55-year-old male who is a known case of renal cell carcinoma came with complaints of edema of legs. Which is the investigation of choice to evaluate inferior vena cava and renal vein invasion in RCC?",
    "choices": [
      {
        "id": 1,
        "text": "IVP"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "CECT"
      },
      {
        "id": 4,
        "text": "USG"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>MRI </strong>is the investigation of choice for vascular invasion in RCC.</p>\n<p>MRI is superior to CT in differentiating benign from malignant thrombus but offers no advantage in staging the nodal disease</p>\n<p>Note: Renal vein is sub-optimally visualized in CECT.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old female was admitted due to a new-onset ascites and bilateral lower extremity oedema for the past 10 days. On examination, she has hepatomegaly and right upper quadrant pain. Which is the best investigation to diagnose this condition as Budd Chiari syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "USG"
      },
      {
        "id": 3,
        "text": "Hepatic venography"
      },
      {
        "id": 4,
        "text": "Plain CT scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The likely diagnosis of the patient is<strong> Budd Chiari Syndrome. Hepatic venography</strong> is the best investigation.</p>\n<p><strong>Budd Chiari syndrome:\u00a0</strong>It is a congestive hepatopathy characterized by the\u00a0<strong>obstruction of</strong> <strong>hepatic venous outflow</strong>. The most common\u00a0presentation is\u00a0<strong>ascites and abdominal discomfort. </strong></p>\n<p>Investigations:</p>\n<ul>\n<li><strong>Abdominal ultrasonography</strong>\u00a0with color Doppler is the initial\u00a0investigation of choice\u00a0and can demonstrate the absence of hepatic vein flow, spider web hepatic veins, and collateral hepatic veins.</li>\n<li>The\u00a0definitive\u00a0radiographic\u00a0study is\u00a0<strong>hepatic venography</strong>\u00a0to determine the presence and extent of hepatic vein thrombus as well as to measure IVC pressures.</li>\n</ul>\n<p>Treatment\u00a0:</p>\n<ul>\n<li>Initial treatment\u00a0is medical management with systemic anticoagulation. The associated portal hypertension and ascites are managed in a manner similar to that in most cirrhotic patients.</li>\n<li>Radiologic and surgical intervention\u00a0is used when the patient is nonresponsive to medical therapy.\u00a0Percutaneous angioplasty and TIPS, in combination with thrombolytic therapy, are the preferred strategies to restore the outflow of blood from the liver. Surgical shunting\u00a0namely with the<strong>\u00a0side-to-side portacaval shunt</strong>\u00a0turns the portal vein into a hepatic outflow tract.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 14-year-old boy was brought to the emergency department with complaints of sudden and continuous pain in the right testicle. The pain radiated to the abdomen and the inguinal area associated with nausea and vomiting. What is the investigation of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "Doppler USG"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "PET"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario points towards a likely of&nbsp;<strong>testicular torsion</strong>.&nbsp;<strong>Doppler ultrasonography</strong> is the investigation of choice for this condition.</p>\n<p><strong>Testicular&nbsp;torsion</strong>&nbsp;is typically seen in adolescence and presents with the&nbsp;<strong>sudden onset of testicular pain.</strong></p>\n<div class=\"page\" title=\"Page 978\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>It results from a bilateral anatomic defect that leads to increased mobility of the testes&nbsp;<strong>(bell&shy;clapper abnormality).&nbsp;</strong>Twisting of the spermatic cord typically cuts off the venous drainage of the testis. But, thick-walled arteries remain patent, producing intense vascular engorgement, followed by<strong>&nbsp;hemorrhagic infarction.</strong></p>\n</div>\n</div>\n</div>\n</div>\n<p>The morphologic changes range from intense&nbsp;<strong>congestion</strong>&nbsp;to widespread&nbsp;<strong>hemorrhage</strong>&nbsp;to testicular&nbsp;<strong>infarction&nbsp;</strong>depending on the duration of torsion. In advanced stages, the testis is markedly&nbsp;<strong>enlarged</strong>&nbsp;and consists entirely of soft,&nbsp;<strong>necrotic, hemorrhagic tissue.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the radiological procedure of choice in patients suspected to have a solitary rectal ulcer?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "Defecography"
      },
      {
        "id": 3,
        "text": "Endorectal USG"
      },
      {
        "id": 4,
        "text": "CT scan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Defecography </strong>(proctography) is the radiologic procedure of choice for <strong>diagnostic</strong> evaluation in <strong>solitary rectal ulcer syndrome (SRUS).&nbsp;</strong>Some common findings include:&nbsp;</p>\n<ul>\n<li>Full-thickness rectal prolapse</li>\n<li>Internal prolapse</li>\n<li>Paradoxical puborectalis syndrome</li>\n<li>Thickened rectal folds&nbsp;</li>\n</ul>\n<p>Defecography evaluates in real-time the morphology of the rectum and anal canal in a physiologic setting by <strong>injection</strong> of a thick <strong>barium paste</strong> into the <strong>rectum</strong> and its subsequent <strong>evacuation.</strong>&nbsp;</p>\n<p>It is primarily performed for workup of patients with:</p>\n<ul>\n<li>Longstanding constipation</li>\n<li>Unexplained anal or rectal pain</li>\n<li>Residual sensation after defecation</li>\n<li>Suspected prolapse.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old man, who is a chronic alcoholic presented with abdominal pain and vomiting. He had similar episodes in the past along with steatorrhea, weight loss, and fatigue. Which of the following test has the highest sensitivity and specificity to diagnose it as chronic pancreatitis?",
    "choices": [
      {
        "id": 1,
        "text": "Magnetic resonance imaging (MRI)"
      },
      {
        "id": 2,
        "text": "computed tomography (CT ) scan"
      },
      {
        "id": 3,
        "text": "Secretin test"
      },
      {
        "id": 4,
        "text": "Endoscopic ultrasound (EUS)"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The diagnostic test with the best sensitivity and specificity for chronic pancreatitis/pancreatic exocrine insufficiency is the <strong>hormone stimulation test using secretin</strong>.</p>\n<p>The secretin test becomes abnormal when &ge;60% of the pancreatic exocrine function has been lost. This usually correlates well with the onset of chronic abdominal pain. An abdominal CT scan is the initial modality of choice for diagnosing a case of suspected chronic pancreatitis.</p>\n<p>Investigation of choice of acute pancreatitis is a CT abdomen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old male came with complaints of dysphagia for the past few months. It is associated with mild chest pain on and off. The pain is classically relieved by a loud belch. His cardiac workup was also normal. What is the investigation of choice for this clinical condition?",
    "choices": [
      {
        "id": 1,
        "text": "MRI with oral contrast"
      },
      {
        "id": 2,
        "text": "Barium meal follow-through"
      },
      {
        "id": 3,
        "text": "CT scan with oral contrast"
      },
      {
        "id": 4,
        "text": "Barium meal upper GI series"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most likely clinical diagnosis is<strong> hiatal hernia</strong>. A<strong> CT scan with oral contrast</strong> is the best method for diagnosis.</p>\n<p>It highlights the gastric anatomy and also helps in identifying other structures involved in the hiatal hernia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old woman came with complaints of headache for the past 1-month. She also reported aching of the jaw during her meals. Over the last week, she has experienced episodes of painless visual loss which lasted for around 10 minutes. Which of the following is the best investigation for the diagnosis of her condition?",
    "choices": [
      {
        "id": 1,
        "text": "Temporal artery biopsy"
      },
      {
        "id": 2,
        "text": "Colour doppler of temporal artery"
      },
      {
        "id": 3,
        "text": "CT angiography"
      },
      {
        "id": 4,
        "text": "MR angiography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of headache, jaw claudication, and painless visual loss is suggestive of <strong>giant cell arteritis.</strong> The best investigation for the diagnosis of giant cell arteritis is <strong>temporal artery biopsy</strong>.</p>\n<p>Histopathology shows panarteritis with the presence of mononuclear cells and giant cells. The biopsy may not be positive in all patients due to patchy histologic findings. Since involvement of the vessel may be segmental, positive yield is increased by obtaining a biopsy segment of <strong>3&ndash;5 cm</strong> together with serial sectioning of biopsy specimens.&nbsp;</p>\n<p>&nbsp;<strong>Note</strong> :&nbsp;According to the 21st edition of Harrison's Medicine, as involvement of the vessel may be segmental, getting a biopsy segment of 3&ndash;5 cm together with serial sectioning of biopsy specimens would help to increase a positive yield. And Robbin's 10th edition mentions that an adequate biopsy requires at least a 1-cm segment.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young adult presented with macrodactyly of his left index finger. On examination, there was a purplish hue on the finger indicating some signs of AV malformation. Which is the investigation of choice for its evaluation?",
    "choices": [
      {
        "id": 1,
        "text": "Duplex USG"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "CT"
      },
      {
        "id": 4,
        "text": "Gamma camera"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>MRI</strong>\u00a0is the\u00a0investigation of choice for the evaluation and follow-up of <strong>peripheral arteriovenous malformations.</strong></p>\n<p>Magnetic resonance imaging (MRI) offers numerous advantages over both CT and radiographs and has become the most important modality to diagnose AVMs. MRI techniques including time-of-flight and phase contrast can be used to isolate inflow blood supply to better predict the risk of ischemia following embolization. MRI also provides well-defined images defining boundaries between the AVM, surrounding fat, and neurovascular bundles, which is necessary for the planning of surgical or embolic interventions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old male who is a known hypertensive for the past 10 years, is not compliant with his medications. Which of the following is the best method to detect arterial stiffness caused due to hypertension?",
    "choices": [
      {
        "id": 1,
        "text": "Femoral artery doppler"
      },
      {
        "id": 2,
        "text": "Ankle brachial index"
      },
      {
        "id": 3,
        "text": "Pulse wave velocity"
      },
      {
        "id": 4,
        "text": "Carotid ultrasound"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pulse wave velocity</strong> is the gold standard method to detect the arterial stiffness due to hypertension.</p>\n<p>Long-standing hypertension can lead to structural and functional changes in arteries and target organs like the heart, brain, arteries, and kidneys. This is called as <strong>hypertension mediated organ damage (HMOD).</strong></p>\n<table style=\"height: 190px; width: 380.199px;\">\n<tbody>\n<tr>\n<td style=\"width: 56px;\">Organ</td>\n<td style=\"width: 156px;\">Consequences</td>\n<td style=\"width: 145.199px;\">Investigations</td>\n</tr>\n<tr>\n<td style=\"width: 56px;\">Heart&nbsp;</td>\n<td style=\"width: 156px;\">\n<p><strong>Left ventricular hypertrophy</strong></p>\n<p>Decreased diastolic function</p>\n</td>\n<td style=\"width: 145.199px;\">\n<p>ECG</p>\n<p>Echocardiography</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 56px;\">Blood vessels</td>\n<td style=\"width: 156px;\">\n<p>Stiffening</p>\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 145.199px;\">\n<p><strong>Pulse wave velocity of carotid or femoral artery (gold standard)</strong></p>\n<p>Carotid ultrasound</p>\n<p>Ankle-brachial pressure index</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 56px;\">Kidney</td>\n<td style=\"width: 156px;\">\n<p><strong>Hyaline arteriosclerosis</strong> (benign hypertension)</p>\n<p><strong>Hyperplastic arteriosclerosis</strong> (severe hypertension)</p>\n</td>\n<td style=\"width: 145.199px;\">\n<p>Renal function tests</p>\n<p>GFR</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 56px;\">Retina</td>\n<td style=\"width: 156px;\">Hemorrhages and cotton wool spots</td>\n<td style=\"width: 145.199px;\">Fundoscopy</td>\n</tr>\n<tr>\n<td style=\"width: 56px;\">Brain</td>\n<td style=\"width: 156px;\">Stroke, impaired cognition</td>\n<td style=\"width: 145.199px;\">MRI</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An airport health officer was given a task to identify the cocaine packets in a body packer. Which of the following is the best modality to detect those cocaine packets?",
    "choices": [
      {
        "id": 1,
        "text": "MR imaging"
      },
      {
        "id": 2,
        "text": "Endoscopy"
      },
      {
        "id": 3,
        "text": "X-ray scan"
      },
      {
        "id": 4,
        "text": "CT imaging"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>CT imaging</strong> is the best modality to identify cocaine packets in a body packer.\u00a0</p>\n<ul>\n<li><strong>Body stuffer:\u00a0</strong>Patients who swallow cocaine following police pursuit to conceal the evidence are termed \u201cbody stuffers.\u201d The swallowed packets are often poorly wrapped and can leak or perforate.</li>\n<li><strong>Body packers:</strong>\u00a0swallow a large number of well-sealed packets in order to smuggle drugs across international borders.</li>\n<li>Both methods can result in severe toxicity and death.</li>\n<li>CT is the best imaging modality to identify the packets.</li>\n<li>If the patient shows no signs of toxicity, give single-dose activated charcoal and institute whole-bowel irrigation with polyethylene glycol electrolyte solution to gently hasten packet elimination.</li>\n<li>For symptomatic patients, provide sedation and symptomatic care, and obtain immediate surgical consultation for operative removal of the packets.</li>\n<li>Do not consult for endoscopy or colonoscopy because endoscopic manipulation may rupture the packets.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On routine health checkup, an OBG resident picked up a focal lesion in the endometrium of a 45-year-old woman. Which of the following is a more sensitive investigation to diagnose this lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Laparoscopic biopsy"
      },
      {
        "id": 2,
        "text": "Saline sonography"
      },
      {
        "id": 3,
        "text": "Hysteroscopic biopsy"
      },
      {
        "id": 4,
        "text": "Dilatation and curettage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 89\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The<strong> hysteroscopic biopsy</strong>&nbsp;is a more sensitive investigation&nbsp;for focal endometrial lesions.</p>\n<div class=\"page\" title=\"Page 735\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 735\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 732\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Hysteroscopic biopsy or outpatient dilatation and curettage (D and C) are suitable choices for endometrial sampling.</li>\n<li>Hysteroscopic biopsy is preferred for the initial evaluation of women with bleeding suspicious for malignancy.</li>\n<li>Ultrasound, CT, MRI, transvaginal ultrasound are adjuvant to other investigations.&nbsp;</li>\n<li>Diagnostic laparoscopy will be required to study nature of the tumor and its spread if ultrasound picks up a pelvic tumor.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old female came with complaints of amenorrhea, galactorrhea, and infertility. Which is the investigation of choice for the diagnosis of the patient?",
    "choices": [
      {
        "id": 1,
        "text": "TRH estimation"
      },
      {
        "id": 2,
        "text": "LH estimation"
      },
      {
        "id": 3,
        "text": "Estradiol estimation"
      },
      {
        "id": 4,
        "text": "PRL estimation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most likely diagnosis is <strong>Hyperprolactinoma</strong> and<strong>&nbsp;</strong>the investigation of choice is to demonstrate&nbsp;<strong>elevated serum prolactin levels</strong>.</p>\n<p>Basal fasting morning PRL levels should be tested.</p>\n<ul>\n<li>Normally &lt;20 &mu;g/L</li>\n<li>200 &mu;g/L confirms a diagnosis of prolactinoma</li>\n</ul>\n<p>Note: <strong>TSH </strong>should be measured and <strong>hypothyroidism</strong> and <strong>pregnancy/Lactation&nbsp;</strong>should be ruled out before the diagnosis of hyperprolactinemia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old woman came with complaints of post-menopausal bleed. She is a known diabetic and hypertensive for the past 15 years. She was diagnosed to have endometrial carcinoma. Which among the following is the gold standard investigation in staging endometrial carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "Surgery"
      },
      {
        "id": 3,
        "text": "Endometrial biopsy"
      },
      {
        "id": 4,
        "text": "PET-CT"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Surgery</strong> is the gold standard investigation for staging endometrial carcinoma.</p>\n<p>Endometrial carcinoma is surgically staged according to the Joint 2010 International Federation of Gynecology and Obstetrics&nbsp;<span class=\"nowrap\">(<strong>FIGO</strong>)/TNM</span>&nbsp;classification system.</p>\n<p>Total extra-fascial hysterectomy with bilateral salpingo-oophorectomy and pelvic and para-aortic lymph node dissection is the standard staging procedure for endometrial carcinoma.&nbsp;</p>\n<p>When a patient is staged only clinically, contrast-enhanced magnetic resonance imaging (MRI) appears to be the best radiographic modality for detecting myometrial invasion or cervical involvement.</p>\n<p>Hysteroscopy and biopsy visualizes the entire uterine lining and select biopsy from suspicious areas; both reduce the chances of missing the lesion. Even then, this is not 100% predictive, as an early lesion can be missed.</p>\n<p>Recently, the concern has been raised regarding the&nbsp;spilling of cancer cells into the peritoneal cavity during hysteroscopy.</p>\n<p>PET&ndash;CT reveals metabolic activity in the tissue and is highly sensitive and specific for detecting positive pelvic and/or para-aortic lymphadenopathy as well as distant metastases in selected high-risk patients with endometrial cancer.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 11-year-old girl had frequent episodes of headaches associated with palpitation. Her BP was recorded to be higher than normal. Which is the most sensitive investigation, if you want to diagnosis this as pheochromocytoma?",
    "choices": [
      {
        "id": 1,
        "text": "Sestamibi Scan"
      },
      {
        "id": 2,
        "text": "MIBG Scan"
      },
      {
        "id": 3,
        "text": "Plain CT Scan"
      },
      {
        "id": 4,
        "text": "MRI Scan"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>MRI scans </strong>have a reported <strong>sensitivity of 100% and specificity of 100%</strong> for detecting pheochromocytoma because these tumors have a characteristic appearance on T2-weighted images or after gadolinium.</p>\n<p>MRI is also the <strong>study of choice in pregnant women </strong>as there is no risk of radiation exposure.</p>\n<p><strong>Metaiodobenzylguanidine (MIBG)</strong> is taken up and concentrated by vesicles in the adrenal medullar cells because its structure is similar to <strong>norepinephrine</strong>. Normal adrenal medullary tissue does not take up appreciable MIBG. 131I-radiolabeled MIBG is, therefore, useful for localizing pheochromocytomas especially those in ectopic positions. This test has a reported sensitivity <strong>of 77% to 89% and specificity ranging from 88% to 100%.</strong></p>\n<p><strong>Note: </strong>Pheochromocytomas are diagnosed by testing 24-hour urine samples for catecholamines and their metabolites and by determining plasma metanephrine levels. <strong>Radiologic studies</strong> are useful to localize tumors and to assess the extent of spread once the diagnosis has been made with biochemical tests.</p>\n<p>However, out of the given options, MRI is the best possible answer.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "After a road traffic accident, an old man experienced the sudden blurring of vision and floaters in his right eye. What would be the ideal investigation of choice for the suspected vitreous hemorrhage?",
    "choices": [
      {
        "id": 1,
        "text": "Optical coherence tomography"
      },
      {
        "id": 2,
        "text": "Ultrasound A scan"
      },
      {
        "id": 3,
        "text": "Ultrasound B-scan"
      },
      {
        "id": 4,
        "text": "Electroretinography"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>investigation</strong> of <strong>choice</strong> for vitreous hemorrhage is an ultrasound<strong>&nbsp;B-scan.</strong></p>\n<p><strong>B-scan ultrasonography</strong> in unclotted vitreous hemorrhage generally shows a <strong>uniform appearance,</strong> and once cellular aggregates develop, small particulate echoes become visible.</p>\n<p>USG B can also be used to assess posterior segment in the case of opaque media, and study intraocular tumors, orbital tumors, and other mass lesions.&nbsp;</p>\n<p><strong>Vitreous hemorrhage&nbsp;</strong>has a variable presentation depending on the severity of the hemorrhage. The mild<strong>&nbsp;hemorrhage</strong> causes <strong>sudden onset floaters</strong> and diffuse blurring of vision, but may not affect visual acuity, whilst a <strong>dense bleed may result in sudden painless loss of vision.</strong></p>\n<p><strong>Causes</strong></p>\n<ul>\n<li>Acute posterior vitreous detachment associated either with a retinal tear or avulsion of a peripheral vessel</li>\n<li>Proliferative retinopathy\n<ul>\n<li>Diabetic</li>\n<li>Retinal vein occlusion</li>\n<li>Sickle cell disease</li>\n<li>Eales disease</li>\n<li>Vasculitis</li>\n</ul>\n</li>\n<li>Miscellaneous retinal disorders\n<ul>\n<li>Macroaneurysm</li>\n<li>Telangiectasia</li>\n<li>Capillary hemangioma</li>\n</ul>\n</li>\n<li>Trauma</li>\n<li>Systemic\n<ul>\n<li>Bleeding disorders</li>\n<li>Terson syndrome</li>\n</ul>\n</li>\n</ul>\n<p><strong>Treatment</strong> is dictated by severity and cause, but an increasingly low threshold is being adopted for <strong>early vitrectomy.</strong></p>\n<p><strong>Terson syndrome<br /></strong><strong>Terson</strong> syndrome refers to the <strong>combination</strong> of <strong>intraocular</strong> and <strong>subarachnoid hemorrhage</strong>&nbsp;secondary to <strong>aneurysmal rupture,</strong> most commonly arising from the <strong>anterior communicating artery.</strong></p>\n<p>Other options:&nbsp;</p>\n<p>Option A -&nbsp;<strong>Optical coherence tomography </strong>is used to provide cross-sectional or tomographic images of tissues of less than 10um axial resolution using light waves. It is used to image the anterior chamber angle, trabeculotomy blebs, tumors and cysts of the iris and ciliary body, macular disorders, diagnose glaucoma and in pachymetry.&nbsp;</p>\n<p>Option B - <strong>Ultrasound&nbsp;A-scan</strong> produces a unidimensional image. It is used to measure axial length, anterior chamber depth, and thickness of intraocular masses.&nbsp;</p>\n<p>Option D - <strong>Electroretinography </strong>records changes in the resting potential of the eye that are induced by flashes of light.&nbsp;It&nbsp;is used to evaluate <strong>retinal disorders,</strong> function, especially in cases where fundal examination is not possible.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In patients with rectal carcinoma, what is the investigation of choice for assessment of perirectal nodes and the depth of penetration?",
    "choices": [
      {
        "id": 1,
        "text": "Ultrasonography"
      },
      {
        "id": 2,
        "text": "CT scan pelvis"
      },
      {
        "id": 3,
        "text": "Endorectal MRI"
      },
      {
        "id": 4,
        "text": "Double-contrast barium enema"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Endorectal-coil magnetic resonance imaging (MRI)&nbsp;</strong>is the best modality for predicting <strong>lymph node&nbsp;invasion</strong> and overall local staging.</p>\n<p>It can identify involved <strong>perirectal nodes</strong> on the basis of characteristics other than size.&nbsp;It can also identify foci at sites not only within the mesorectum but also outside the mesorectal fascia, such as pelvic sidewalls, and can identify the <strong>depth of penetration</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old boy presented with pain, swelling, and redness in his right leg for the past 2 weeks. On examination, purulent discharge was observed exuding from the proximal end of the right tibia. There is no history of any chronic illness or trauma. What is the radiological investigation of choice for the early stage of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "X-ray"
      },
      {
        "id": 2,
        "text": "CT"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "Bone scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient presenting with symptoms of pain, swelling, and redness of the lower limb which was later associated with the development of a discharging sinus is suffering from osteomyelitis.&nbsp;<strong>MRI</strong> is the investigation of choice for the diagnosis of<strong>&nbsp;osteomyelitis.&nbsp;</strong></p>\n<p>The characteristic <strong>early</strong> signs of osteomyelitis include <strong>bone marrow edema. </strong>This is seen&nbsp;as a low T1 signal in the bone marrow, along with a high signal on T2 MRI.</p>\n<p><strong>Abscesses&nbsp;</strong>are the walled pockets of infection serving as complications in both the early and late stages of osteomyelitis. They appear as well-demarcated low-signal collections on T1 and high signal collections similar to fluid on T2 images. Usual locations include the bone itself, adjacent soft tissue, and subperiosteal spaces.</p>\n<p><strong>X-rays</strong> are<strong> not useful</strong> in early acute osteomyelitis because of minimal findings. Exposure to ionizing radiation and limited soft-tissue contrast is the main disadvantage of<strong> CT</strong> that makes it <strong>less useful</strong>.&nbsp;</p>\n<p><strong>Osteomyelitis</strong> is an acute or chronic inflammatory process involving the bone and its structures secondary to infection with pyogenic organisms, including bacteria, fungi, and mycobacteria. The bone becomes susceptible to disease due to large inoculation of microorganisms, from trauma, ischemia, or the presence of foreign bodies because bone sites to which microorganisms can bind are exposed.</p>\n<p>The bone can get infected by a <strong>hematogenous route</strong> through bacteremia seeding of a bone infection from a distant source of infection,&nbsp;contiguous spread from surrounding tissue and joints, or direct inoculation of bone from trauma or surgery. The <strong>most&nbsp;common</strong> pathogen of acute and chronic hematogenous osteomyelitis in adults and children is <em><strong>Staphylococcus aureus</strong>.&nbsp;</em>Other common pathogens are:</p>\n<ul>\n<li>Coagulase-negative <em>staphylococcus</em></li>\n<li>Beta-hemolytic <em>streptococcus </em></li>\n<li><em>Enterococci </em></li>\n<li>Aerobic gram-negative bacilli (including<em> pseudomonas</em> species,&nbsp;<em>Enterobacter</em> species, <em>Escherichia</em> coli)</li>\n<li>Anaerobic gram-negative bacilli (such as <em>peptostreptococcus</em>, <em>Clostridium</em> species, <em>Bacteroides</em>)</li>\n</ul>\n<p>Osteomyelitis can be <strong>classified</strong> as <strong>acute or chronic</strong> based on histopathological findings rather than the duration of illness. Infection occurring before the development of sequestra is referred to as acute osteomyelitis. It usually takes place within two weeks of disease onset. The infection is considered chronic following the development of necrotic bone and the formation of sequestra. Acute infections generally present with pain, swelling, and redness of the affected area associated with systemic illness while&nbsp;discharging sinuses may be present&nbsp;in chronic infections.</p>\n<p><strong>Surgical debridement</strong> of all diseased bone is required as antibiotics penetrate poorly into infected fluid collections such as abscesses and injured or necrotic bone. Thus, the removal of necrotic tissue and bone is usually indicated where feasible. The cornerstone of treatment for osteomyelitis is <strong>prolonged antibiotic therapy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70-year-old woman came to the emergency department with acute abdominal pain. On examination, she had abdominal distension. The pain was diffuse and perceived on deep palpation. As a surgeon, you suspect this as a case of a hollow viscous perforation. Which is the most sensitive investigation for diagnosing pneumoperitoneum associated with this?",
    "choices": [
      {
        "id": 1,
        "text": "Left lateral decubitus X ray"
      },
      {
        "id": 2,
        "text": "Chest X ray erect"
      },
      {
        "id": 3,
        "text": "Abdominal X ray erect"
      },
      {
        "id": 4,
        "text": "CT abdomen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most sensitive investigation for pneumoperitoneum is the&nbsp;<strong>CT abdomen. </strong>Sudden acute pain and distension indicating hollow viscus perforation is the most common cause of <strong>pneumoperitoneum</strong>.<strong>&nbsp;CT is the investigation of choice detecting occult or minimal pneumothorax.&nbsp;</strong></p>\n<p>Erect chest x-ray is an initial investigation for suspected pneumoperitoneum. However, it is not as sensitive as CT and can give false negative reports.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A consultant on his routine OPD hours incidentally found a mid systolic click in a female patient aged 30 years. This click-sound was bit delayed while squatting. Which is the best investigation to diagnose this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Angiography"
      },
      {
        "id": 2,
        "text": "Echocardiography"
      },
      {
        "id": 3,
        "text": "Electrocardiography"
      },
      {
        "id": 4,
        "text": "Electrophysiology study"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Echocardiography</strong> is the investigation of choice in systolic click-murmur syndrome, also called as <strong>mitral valve prolapse (MVP) syndrome.</strong></p>\n<p>ECG in MVP is generally normal but biphasic or inverted T waves may be seen in leads II, III, and aVF.</p>\n<p>A <strong>transthoracic echocardiography</strong> is useful in identifying the abnormal position and prolapse of mitral valve leaflets.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A surgeon on examining a thyroid swelling has a doubt regarding the retrosternal extension of the swelling. However, there is no hoarseness of voice or dysphagia for the patient. Which of the following modality helps to decide the management?",
    "choices": [
      {
        "id": 1,
        "text": "CT Scan"
      },
      {
        "id": 2,
        "text": "Ultrasonography"
      },
      {
        "id": 3,
        "text": "Chest radiograph"
      },
      {
        "id": 4,
        "text": "MRI"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>imaging modality of choice</strong> to determine the <strong>extension of thyroid</strong> swelling in deciding management is a<strong> CT scan</strong>.</p>\n<p>Other options :</p>\n<ul>\n<li>Chest radiograph can be used to predict the retrosternal extension of thyroid but it is not imaging modality of choice.</li>\n<li>MRI is not used to determine the extension of thyroid swelling.\u00a0<span style=\"font-size: 14px;\">In the setting of invasive primary thyroid cancer, both\u00a0</span><span style=\"font-size: 14px;\">CT and magnetic resonance imaging (MRI) may have a role.</span></li>\n<li><span style=\"font-size: 14px;\">Ultrasonography is used to determine the type of thyroid swelling, visualization of neck lymph nodes, and extension to the soft tissue but its use is limited in determining extension to retrosternum.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The investigation of choice for dysphagia lusoria is _______",
    "choices": [
      {
        "id": 1,
        "text": "Esophageal manometry"
      },
      {
        "id": 2,
        "text": "CT angiography"
      },
      {
        "id": 3,
        "text": "Single contrast barium swallow"
      },
      {
        "id": 4,
        "text": "Digital chest x ray"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>investigation of choice</strong> for <strong>dysphagia lusoria</strong> <strong>is CT angiography</strong>.</p>\n<p>Compression of the esophagus by the <strong>aberrant right subclavian artery arising from the descending</strong> <strong>aorta</strong> is known as <strong>dysphagia lusoria</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/027e02348f5547a7a36cf1638be830f2x621x456.JPEG"
    ]
  },
  {
    "text": "A 28-year-old woman presented with a 3-day history of mucopurulent cervical discharge. Gram staining of the discharge revealed numerous pus cells, but no organisms. What is the investigation of choice for the diagnosis of this infection?",
    "choices": [
      {
        "id": 1,
        "text": "Saline mount"
      },
      {
        "id": 2,
        "text": "Serum antibody testing by immunofluorescence"
      },
      {
        "id": 3,
        "text": "Culture in Thayer Martin media"
      },
      {
        "id": 4,
        "text": "Nucleic acid amplification test"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Mucopurulent cervical discharge for 3 days is suggestive of <strong>acute cervicitis.</strong>\u00a0As gram stain does not show any organism, gonococcal infection is less likely. In this case,\u00a0<em><strong>Chlamydia trachomatis</strong> </em>is the most likely organism.\u00a0For <em>C. trachomatis,</em>\u00a0the\u00a0<strong>investigation of choice</strong> is the\u00a0<strong>nucleic acid amplification test </strong>(NAAT).</p>\n<p>NAATs are the <strong>most sensitive</strong> tests to detect chlamydia. These tests also have a <strong>high specificity</strong> comparable to culture, and in contrast to culture, do not depend on viable pathogens. Therefore, NAATs are generally considered the test of choice for chlamydia and have replaced culture as the <strong>diagnostic gold standard.</strong></p>\n<p>Mucopurulent cervicitis is the inflammation of the columnar epithelium and subepithelium of the endocervix in women. Its commonly caused by <em>Neiserria gonorrhoeae </em>and <em>Chlamydia trachomatis.\u00a0</em></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old girl presented with ascending left-sided flank pain during micturition and recurrent episodes of urinary tract infections. The urologist suspects vesicoureteric reflux. Which of the following investigations can be done to confirm this condition?",
    "choices": [
      {
        "id": 1,
        "text": "DMSA scan"
      },
      {
        "id": 2,
        "text": "Ultrasound abdomen"
      },
      {
        "id": 3,
        "text": "Voiding cystourethrogram"
      },
      {
        "id": 4,
        "text": "MRI"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>voiding cystourethrogram (VCUG)&nbsp;</strong>can be done to confirm&nbsp;<strong>vesicoureteric reflux</strong>.</p>\n<p>Vesicoureteric reflux is the <strong>retrograde flow</strong> of urine from the bladder back to the ureter and kidney. The condition is usually <strong>congenital</strong> and familial. It is more commonly seen in <strong>females</strong> during evaluation for a <strong>urinary tract infection</strong>. It predisposes the child to<strong> pyelonephritis</strong> resulting in renal injury or scarring. This is known as <strong>reflux-related renal injury</strong> or <strong>reflux nephropathy</strong>.</p>\n<p>The international reflux study (IRS) classification divides it into grades I-V based on the severity as shown below. This is based on the appearance seen in <strong>contrast voiding cystourethrogram</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13a0b2172bf74ce9b99ac0d886096e00x1280x2420.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7266ca79063c478e93e72a3a6609416cx720x720.JPEG"
    ]
  },
  {
    "text": "A 4-year-old unimmunized child presented to pediatric OPD with fever, sore throat, and difficulty in swallowing. He also has a history of contact with a known case of diphtheria at pre-school. However, on examination pseudomembrane is not seen. What is the investigation of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Fluorescent antibody"
      },
      {
        "id": 2,
        "text": "Albert\u2019s stain"
      },
      {
        "id": 3,
        "text": "Throat swab culture"
      },
      {
        "id": 4,
        "text": "Gram\u2019s stain"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The child could most probably a <strong>diphtheria carrier&nbsp;</strong>and the investigation of choice for diphtheria carrier is <strong>throat swab culture.&nbsp;</strong></p>\n<p><strong>Carriers</strong>&nbsp;are defined as individuals who have positive cultures but they can be&nbsp;either symptomatic or asymptomatic but they&nbsp;<strong>lack pseudomembranes.</strong></p>\n<p>The specimens for culture should be obtained from the <strong>nose</strong> and <strong>throat</strong> and any other mucocutaneous lesion.&nbsp;Direct smear using Gram stain or specific fluorescent antibody is unreliable.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old male fell down while climbing the stairs. He presented with complaints of fluid dripping from his nose, which he couldn't sniff back. The nasal discharge has the following appearance on tissue paper.  Which investigation should be ordered to localize the lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Gadolinium enhanced MRI"
      },
      {
        "id": 2,
        "text": "High-resolution computerized tomography"
      },
      {
        "id": 3,
        "text": "Beta 2-transferrin assay"
      },
      {
        "id": 4,
        "text": "Computed tomography cisternogram"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario and the image showing a <strong>double target sign</strong> are suggestive of <strong>CSF rhinorrhea</strong> and&nbsp;<strong>high-resolution computerized tomography (</strong><strong>HRCT)</strong> is the investigation of choice for localizing the<strong> site of the leak </strong>in this condition.</p>\n<p><strong>Double ring sign</strong>&nbsp;or <strong>halo sign</strong>&nbsp;or <strong>target sign</strong>&nbsp;- when cerebrospinal fluid mixed with blood is collected on a piece of filter paper, it will show a&nbsp;central red spot&nbsp;(blood) and a&nbsp;peripheral lighter halo.</p>\n<p><strong>CSF rhinorrhea</strong>&nbsp;refers to the leakage of clear or blood-tinged CSF into the nose. <strong>Fracture of the cribriform plate</strong>&nbsp;of the ethmoid is the&nbsp;<strong>most common cause</strong>&nbsp;of this. Other causes include accidental or surgical trauma, infection and inflammation of the sinuses, neoplasms, and congenital lesions associated with skull base defects or may occur spontaneously.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\"><strong>Early cases</strong> of post-traumatic CSF rhinorrhea are managed <strong>conservatively</strong> by placing the patient in a <strong>semi-sitting position.</strong> Blowing of the nose, sneezing, and straining should be avoided.&nbsp;<strong>Prophylactic antibiotics</strong> can be administered to prevent meningitis. Persistent cases may be treated surgically by the intracranial or nasal endoscopic approach. The nasal endoscopic approach is useful for leaks from the frontal sinus, cribriform plate, and ethmoid or sphenoid sinuses.</p>\n<p>Other options:</p>\n</div>\n</div>\n<p>Option A:<strong> Gadolinium-enhanced MRI</strong> is the investigation of choice in glomus tumours, carotid body tumours and acoustic neuromas. MRI can be used to localize the lesion in CSF rhinorrhea but the CSF leak should be<strong> actively present</strong> at the time of the scan.</p>\n<p>Option C:<strong> Beta-2 transferrin protein</strong>&nbsp;detection by electrophoresis is a sensitive and specific test for detecting CSF rhinorrhea. Since it is absent in nasal secretions it helps to differentiate CSF from nasal secretions. It is also present in aqueous humor and perilymph. However, it cannot be used to localize the site of the leak.</p>\n<p>Option D:<strong> CT cisternogram&nbsp;</strong>is done in cases where beta-2 transferrin detection is not available. It involves an intrathecal injection of iohexol followed by a CT scan. It is not preferred nowadays.</p>\n<p>Note:<strong> Beta trace protein</strong> is another protein that is secreted by meninges and choroid plexus and is&nbsp;<strong>specific for CSF,&nbsp;</strong>but testing facilities are not widely available.&nbsp;An <strong>intrathecal fluorescein study</strong> may be performed preoperatively or intraoperatively to confirm the site of the defect.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/696bd1365459488584598872f27732dd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A middle-aged female patient who is a known case of antiphospholipid antibody syndrome comes with complaints of severe headache for the past 2 days. She has also had an episode of seizure. Her BP and temperature were higher than normal. What of the following investigation can be used to diagnose her condition?",
    "choices": [
      {
        "id": 1,
        "text": "Lumbar puncture"
      },
      {
        "id": 2,
        "text": "X ray head"
      },
      {
        "id": 3,
        "text": "Cerebrospinal fluid culture"
      },
      {
        "id": 4,
        "text": "Magnetic resonance venography"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical situation likely suggests<strong> cortical vein thrombosis,</strong>\u00a0which can be diagnosed by<strong>\u00a0magnetic resonance venography.</strong></p>\n<p>It is more common in patients with inherited thrombophilias\u00a0or <strong>antiphospholipid antibody syndrome</strong>. <strong>Headache</strong> is the most frequent presenting symptom associated with or without vomiting, papilledema, or focal deficits. Up to a third of patients\u00a0have <strong>convulsions</strong>.</p>\n<p>Thrombosis of the <strong>lateral or superior sagittal venous sinus</strong>\u00a0usually occurs in the <strong>puerperium</strong> and is often associated\u00a0with preeclampsia, sepsis, or thrombophilia.</p>\n<p>Often, <strong>CT imaging is normal</strong>\u00a0unless an intracranial venous hemorrhage has occurred, but the\u00a0venous sinus occlusion is readily visualized using<strong> magnetic resonance (MR)</strong> or <strong>CT venography</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mother brought his child to an orthopedician to examine her child's foot. What is the investigation of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "X-ray"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "USG"
      },
      {
        "id": 4,
        "text": "Bone scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>X-ray is by far the <strong>most important investigation</strong>. It helps to know the <strong>exact angles of deformity in CTEV.</strong></p>\n<p>Apart from giving an accurate estimate of the angle of deformities, radiology helps in confirmation of the correction of deformities by various treatment modalities.</p>\n<p><strong>Note</strong>: If the clubfoot deformity is atypical, is associated with a global genetic or neurologic condition, or appears resistant to initial nonoperative treatment, further imaging evaluation should be included.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/38b9369fee004fc6ace6b2595ed8b3c1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old, previously healthy boy presented with acute abdominal pain and vomiting. His last defecation was normal. On examination, the patient is tachycardiac and all other vital signs were stable. If you are suspecting Merkel's diverticulitis, then what is the investigation of choice for the same?",
    "choices": [
      {
        "id": 1,
        "text": "Barium meal"
      },
      {
        "id": 2,
        "text": "USG"
      },
      {
        "id": 3,
        "text": "CT"
      },
      {
        "id": 4,
        "text": "Sodium 99m Tc-pertechnetate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In children, the single most accurate diagnostic test for Meckel&rsquo;s&nbsp;diverticula is <strong>scintigraphy with sodium 99mTc-pertechnetate.</strong></p>\n<p>It is preferentially taken up by the mucus-secreting cells of gastric mucosa and ectopic gastric tissue in Meckel's diverticulum.&nbsp;In adults, less ectopic gastric tissue is seen, so the test is not much accurate in adults.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male was posted for an elective inguinal hernia repair. He is a known cardiac patient who has undergone CABG 5 years ago. A precautious anesthetist wants to assess his ventricular volumes, mass, and ejection fraction before surgery. Which among the following could be the best for cardiac evaluation in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "PET scan"
      },
      {
        "id": 2,
        "text": "Dobutamine echocardiography"
      },
      {
        "id": 3,
        "text": "Thallium 201 imaging"
      },
      {
        "id": 4,
        "text": "Cardiac MRI"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cardiac MRI</strong> is the best imaging modality for this patient.</p>\n<p>MRI&nbsp;can circumvent the echocardiographic problem of suboptimal visualization&nbsp;of the heart in adult patients, especially those who have had&nbsp;surgery.&nbsp;MRI can produce quantitative measures of&nbsp;the ventricular volumes, mass, and ejection fraction. MRI can quantify&nbsp;blood flow in any vessel.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn on routine head-to-toe examination was found to have ambiguous genitalia. Which of the following investigation is done to confirm this as a case of congenital adrenal hyperplasia?",
    "choices": [
      {
        "id": 1,
        "text": "11\u03b2-Hydroxylase"
      },
      {
        "id": 2,
        "text": "17-Hydroxyprogesterone"
      },
      {
        "id": 3,
        "text": "3\u03b2-Hydroxysteroid dehydrogenase"
      },
      {
        "id": 4,
        "text": "21-Hydroxylase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The investigation of choice to confirm the diagnosis of congenital adrenal hyperplasia (CAH) in the newborn is by the measurement of&nbsp;<strong>17-hydroxyprogesterone.</strong></p>\n<p>The diagnosis of 21-hydroxylase deficiency is most reliably established&nbsp;by measuring 17-hydroxyprogesterone before and 30 or 60 min after&nbsp;an intravenous bolus of 0.125-0.25 mg of cosyntropin (ACTH).</p>\n<p>However, prenatal diagnosis of 21-hydroxylase is possible late in the 1st trimester&nbsp;by analysis of DNA obtained by chorionic villus sampling or during&nbsp;the 2nd trimester by amniocentesis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00d5a309ec384b378a48ab3b6c318cdbx570x473.JPEG"
    ]
  },
  {
    "text": "A 45-year old man was brought to the OPD with complaints of a rapid decline in cognition. There is a history of sporadic short-term relationships with many promiscuous sexual partners. He was not tested before for syphilis. Keeping in mind of neurosyphilis which investigation is the best?",
    "choices": [
      {
        "id": 1,
        "text": "Venereal disease research laboratory (VDRL) test"
      },
      {
        "id": 2,
        "text": "TPI-Treponema pallidum immobilization test"
      },
      {
        "id": 3,
        "text": "RPR- Rapid Plasma Reagin test"
      },
      {
        "id": 4,
        "text": "FTA-ABS- Fluorescent Treponemal Antibody Absorption test"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Investigation of choice for neurosyphilis is <strong>VDRL</strong>.</p>\n<p>The <strong>CSF</strong> <strong>VDRL </strong>test is highly specific and, when reactive, is considered<strong> diagnostic of neurosyphilis.</strong></p>\n<p>Involvement of the CNS in syphilis is detected by examination of CSF for:</p>\n<ul>\n<li>Mononuclear pleocytosis (&gt;5 white blood cells/&mu;L).</li>\n<li>Increased protein concentration (&gt;45 mg/dL).</li>\n<li>CSF VDRL reactivity.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year old male presents with anemia. His father and paternal aunt had a similar illness that was treated successfully by splenectomy. His peripheral blood smear is similar to that shown in the smear below. Which of the following test is used to confirm the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Eosin-5-maleimide test"
      },
      {
        "id": 2,
        "text": "NESTROFT test"
      },
      {
        "id": 3,
        "text": "Acidified glycerol lysis test"
      },
      {
        "id": 4,
        "text": "Osmotic fragility test"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The suspected clinical condition is <strong>Hereditary spherocytosis&nbsp;</strong>and the&nbsp;<strong>Eosin-5-maleimide test</strong>&nbsp;is used to confirm it. It is a <strong>flow cytometric test</strong> based on the interaction between the dye, eosin-5-maleimide and <strong>band 3 protein</strong>.</p>\n<p>Other options:</p>\n<p><strong>Acidified glycerol lysis test:</strong> Spherocytes from patients with hereditary spherocytosis lyse more quickly than normal red blood cells when incubated in a phosphate-buffered hypotonic solution with added glycerol. It has&nbsp;greater sensitivity and specificity than the osmotic fragility test.</p>\n<p><strong>Osmotic fragility test:</strong>&nbsp;Detects hemolysis by measuring the fraction of total hemoglobin released from red cells when suspended in progressively more dilute salt concentrations.</p>\n<p><strong>NESTROFT (Naked Eye Single Tube Red-cell Osmotic Fragility Test) </strong>is a highly sensitive test used as a screening test for <strong>thalassemia.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/900d1bed91224a738345a6377d064556.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 61-year-old man presents with complaints of fatigue and shortness of breath. He has conjunctival pallor and has lost significant weight over 3 months. A CBC reveals low haemoglobin and MCV. A stool occult blood test is positive. What is the next best step in evaluation?",
    "choices": [
      {
        "id": 1,
        "text": "Barium enema"
      },
      {
        "id": 2,
        "text": "Colonoscopy"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "CT scan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of an elderly patient with sudden onset anemia always warrants screening for colorectal cancer, as cancers in the <strong>right colon&nbsp;</strong>often manifest as&nbsp;<strong>melena </strong>and<strong> fatigue associated with anemia. </strong>Thus, the next best investigation is a <strong>colonoscopy.</strong></p>\n<p><strong>Colonoscopy</strong> is the investigation of choice &amp;&nbsp;gold standard&nbsp;for establishing the diag&shy;nosis of colon cancer.</p>\n<p>It permits biopsy of the tumor to verify the diagnosis&nbsp;while allowing inspection of the entire colon to exclude metachronous polyps or cancers.</p>\n<p>Colonoscopy is generally performed even after cancer is detected by<strong> barium enema</strong>, in order to obtain a biopsy specimen and to detect (and remove) small polyps that may have been missed in the contrast study.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn presented with microcephaly. On fundus examination, bilateral chorioretinitis is also found. Which of the following is the best investigation to confirm it as a congenital CMV infection?",
    "choices": [
      {
        "id": 1,
        "text": "Urine examination"
      },
      {
        "id": 2,
        "text": "Blood examinaton"
      },
      {
        "id": 3,
        "text": "Liver biopsy"
      },
      {
        "id": 4,
        "text": "CSF examination"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Urine examination </strong>is one of the best methods to diagnose <strong>congenital</strong>&nbsp;<strong>cytomegalovirus</strong> infection.</p>\n<p>For diagnosis of congenital CMV infection, <strong>urine and saliva</strong> are the best specimens <strong>for culture</strong> and <strong>saliva and cord blood </strong>are the best<strong>&nbsp;</strong>specimens <strong>for polymerase chain reaction (PCR)</strong>. Among the given options, the&nbsp;best option would be urine.</p>\n<p>Congenital CMV infection:</p>\n<p>Clinical features:</p>\n<ul>\n<li>Characteristic signs and symptoms of clinically manifested infections: intrauterine growth retardation (IUGR), prematurity, hepatosplenomegaly, jaundice, blueberry- muffin-like rash, thrombocytopenia, purpura, microcephaly, and intracranial calcifications</li>\n<li>Other neurological problems: Chorioreinitis, sensorineural hearing loss (SNHL), and mild increases in cerebrospinal fluid (CSF) protein.</li>\n</ul>\n<p>Asymptomatic congenital CMV infection is possibly a leading cause of SNHL, which occurs in 7&ndash;10% of all infants with congenital CMV infection, whether symptomatic at birth or not.</p>\n<p>Diagnosis:</p>\n<ul>\n<li>Definitive diagnosis: By virus isolation or demonstration of CMV DNA by PCR (performed first 2 weeks of life).</li>\n</ul>\n<p>&nbsp; Treatment:&nbsp;Ganciclovir treatment can limit the hearing loss and improve the developmental outcome in symptomatically infected infants.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old boy comes with complaints of severe pain in the right leg at night which reduces after taking aspirin. Which will be the best investigation for the diagnosis of the condition?",
    "choices": [
      {
        "id": 1,
        "text": "X-ray"
      },
      {
        "id": 2,
        "text": "CT scan"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "USG"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given condition is <strong>osteoid osteoma</strong> and a <strong>CT scan</strong> is the best to diagnose this condition.</p>\n<p>A child in the <strong>2nd-decade</strong>&nbsp;with severe <strong>night pain</strong> and <strong>relieved by aspirin (NSAIDs</strong>) best explains the condition of <strong>osteoid osteoma.&nbsp;</strong>It is the most common true benign tumor of the bone. The <strong>n</strong><strong>idus </strong>of osteoid osteoma is <strong>present in the cortex</strong> and hence CT scan will be the best investigation to diagnose osteoid osteoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Investigations Of Choice Mini Test';
        const quizFilename = 'investigations-of-choice-mini-test-91ca41b8.html';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>