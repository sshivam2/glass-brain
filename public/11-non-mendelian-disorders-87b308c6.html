<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11 Non-Mendelian Disorders - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">15</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A young male patient presented with recurrent episodes of acute neurologic dysfunction, cognitive changes, muscle weakness, and lactic acidosis. There is a family history of similar conditions depicted in the pedigree chart below. What is the most likely diagnosis?</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/ywCrHp4SxzzDBfqmJLxZ1738585092.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "MELAS"
      },
      {
        "id": 2,
        "text": "MERRF"
      },
      {
        "id": 3,
        "text": "Metachromatic leukodystrophy"
      },
      {
        "id": 4,
        "text": "Adrenoleukodystrophy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer: A) MELAS</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>MELAS</strong>-Mitochondrial encephalomyopathy, <span class=\"customMeta\" data-dictid=\"b82539c9ae1692777191a3f7ddd7bb\">lactic</span> acidosis, and stroke-like episodes:</p>\n\n<ul>\n\t<li>MELAS follows a unique <strong>non-Mendelian </strong>pattern of <span class=\"customMeta\" data-dictid=\"3b632faa131692777190ac40c2f1ea\">inheritance</span> called <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> inheritance, as mitochondrial DNA is derived entirely from the ovum.</li>\n\t<li>Affected mothers and daughters transmit the disease to both male and female children, whereas the affected sons don't transmit the affected DNA. (Mother to all, Father to none.)</li>\n\t<li><strong>The most common mitochondrial disease is MELAS.</strong></li>\n</ul>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/iwHnBWa8gAG4w9D1bEw41738585128.png\" width=\"500\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/ywCrHp4SxzzDBfqmJLxZ1738585092.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/iwHnBWa8gAG4w9D1bEw41738585128.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/OQJ0i3fQaouCgOxYE64y1748008380.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/zLGyR5uqAvgyGiI2CFkZ1748008460.mp3"
  },
  {
    "text": "<p>What is the most likely diagnosis of a 5-year-old child with hyperphagia, delayed milestones, and growth retardation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Angelman syndrome"
      },
      {
        "id": 2,
        "text": "Prader-Willi syndrome"
      },
      {
        "id": 3,
        "text": "Fragile X syndrome"
      },
      {
        "id": 4,
        "text": "Patau syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Prader-Willi syndrome</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Prader-Willi syndrome (PWS) </strong>affects the SNORP gene on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 15q.</p>\n\n<ul>\n\t<li>PWS is due to paternal <span class=\"customMeta\" data-dictid=\"cf1e8ec6121692777185eba2630061\">deletion</span> and <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> <span class=\"customMeta\" data-dictid=\"f9307a2f7a1692777189dde161d21f\">imprinting</span> of the given gene.</li>\n\t<li>Subset of PWS can also occur due to <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> disomy</li>\n\t<li>Clinical features:\n\t<ul>\n\t\t<li>Mental <span class=\"customMeta\" data-dictid=\"680dfbc5a5169277719748281f877e\">retardation</span> (Delayed milestones)</li>\n\t\t<li>Short stature</li>\n\t\t<li>Hypotonia</li>\n\t\t<li>Obesity (Due to\u00a0increased levels of ghrelin)\n\t\t<ul>\n\t\t\t<li>Ghrelin is an appetite-stimulating hormone that leads to overeating\u00a0and finally obesity.</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"Sch\u00fcle B, Albalwi M, Northrop E, Francis DI, Rowell M, Slater HR, Gardner RJ, Francke U.\" data-hash=\"\" data-license=\"CC BY 2.0\" data-source=\"https://en.wikipedia.org/wiki/Prader%E2%80%93Willi_syndrome\" data-tags=\"\" height=\"367\" src=\"https://image.prepladder.com/content/2xpb48TCXUg1k3FZaMlX1737510820.png\" width=\"500\" /></p>\n\n<p><strong>Angelman syndrome (Option A)</strong> has a similar genetic basis to PWS but is caused by absent <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> expression of 15q11-q13, while the paternal <span class=\"customMeta\" data-dictid=\"88c5dcbf0a1692777181e199712f81\">allele</span> is imprinted.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Yokoyama-Rebollar E, Ruiz-Herrera A, Lieberman-Hern\u00e1ndez E, Del Castillo-Ruiz V, S\u00e1nchez-Sandoval S, \u00c1vila-Flores SM\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://en.wikipedia.org/wiki/Angelman_syndrome\" data-tags=\"\" height=\"534\" src=\"https://image.prepladder.com/content/msMCbLDVwLwpymLihndE1737510921.png\" width=\"500\" /></p>\n\n<p><br />\n\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><br />\n\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/2xpb48TCXUg1k3FZaMlX1737510820.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/vrud6xi1RNo86LaP9mnZ1748008539.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/pWO3I1nld0WUfmy0ps6p1748008619.mp3"
  },
  {
    "text": "<p>Which of the following does not show the same pattern of inheritance as Leber hereditary optic neuropathy?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "MERRF"
      },
      {
        "id": 2,
        "text": "MELAS"
      },
      {
        "id": 3,
        "text": "Fragile-X syndrome"
      },
      {
        "id": 4,
        "text": "NARP"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Fragile-X syndrome</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Fragile-X syndrome shows <strong>X-linked Recessive > X-linked dominant inheritance.</strong></li>\n\t<li>\u00a0Leber <span class=\"customMeta\" data-dictid=\"ee5175c06116927771880846d1cbe0\">hereditary</span> <span class=\"customMeta\" data-dictid=\"1b9a354cdb1692777194802683234d\">optic</span> <span class=\"customMeta\" data-dictid=\"2d9476094c16927771933bcb162f19\">neuropathy</span> (LHON) is characterized by permanent loss of vision in young <span class=\"customMeta\" data-dictid=\"e48bb8abfa1692777192e3fa06774f\">men</span> due to progressive, <span class=\"customMeta\" data-dictid=\"625feb7e3a1692777183aa9d923cfd\">bilateral</span> <span class=\"customMeta\" data-dictid=\"1b9a354cdb1692777194802683234d\">optic</span> neuropathy.</li>\n\t<li><strong>LHON demonstrates mitochondrial inheritance.</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Some other examples of mitochondrial <span class=\"customMeta\" data-dictid=\"3b632faa131692777190ac40c2f1ea\">inheritance</span> disorders are:</p>\n\n<ul>\n\t<li>Chronic progressive <span class=\"customMeta\" data-dictid=\"7ce1ed43381692777187319a810f04\">external ophthalmoplegia</span> (CPEO)/ Kearns-Sayre syndrome (KSS)</li>\n\t<li>Leigh syndrome</li>\n\t<li><strong>Mitochondrial <span class=\"customMeta\" data-dictid=\"e5b05c80a516927771875bc24bcc23\">encephalomyopathy</span> with <span class=\"customMeta\" data-dictid=\"b82539c9ae1692777191a3f7ddd7bb\">lactic</span> <span class=\"customMeta\" data-dictid=\"6caf3a39f416927771807e122b9032\">acidosis</span> and stroke-like episodes (MELAS) (Option B ruled out)</strong></li>\n\t<li><strong>Myoclonic <span class=\"customMeta\" data-dictid=\"7546d26cea1692777187c257d4e14c\">epilepsy</span> with ragged red fibers (MERRF) (Option A ruled out)</strong></li>\n\t<li><strong>Neuropathy, ataxia, and <span class=\"customMeta\" data-dictid=\"4f1a033cae1692777197a3a6937a0c\">retinitis</span> pigmentosa (NARP) (Option D ruled out)</strong></li>\n\t<li>Primary <span class=\"customMeta\" data-dictid=\"cf1469795816927771840da7c58a72\">coenzyme</span> Q10 (CoQ10) deficiency</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/CgkK8FhxchC4LvwCtxy71748008684.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/CD6uSwX26E5JsryTgDDD1748008750.mp3"
  },
  {
    "text": "<p>Match the following</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Disease </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Trinucleotide repeats </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>a. Fragile X syndrome</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1. CAG</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>b. Friedreich ataxia</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>2. CTG</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>c. Myotonic dystrophy</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>3. GAA</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>d. Huntington disease</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>4. CGG</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "choices": [
      {
        "id": 1,
        "text": "a-2, b-1, c-4, d-3"
      },
      {
        "id": 2,
        "text": "a-4, b-3, c-2, d-1"
      },
      {
        "id": 3,
        "text": "a-3, b-2, c-1, d-4"
      },
      {
        "id": 4,
        "text": "a-4, b-1, c-3, d-2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: </strong><strong>B) a-4, b-3, c-2, d-1</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The below-mentioned disorders are <span class=\"customMeta\" data-dictid=\"74dd17aa171692777200dcc186c177\">trinucleotide</span> repeat disorders where there is excessive repetition of trinucleotides.</p>\n\n<ul>\n\t<li>In Introns/ Non coding region:\n\t<ul>\n\t\t<li>Fragile X syndrome - CGG</li>\n\t\t<li>Friedreich <span class=\"customMeta\" data-dictid=\"0842a8a59f1692777182f44d334dda\">ataxia</span> - GAA</li>\n\t\t<li>Myotonic <span class=\"customMeta\" data-dictid=\"04568e3d19169277718672d9da94fd\">dystrophy</span> -CTG</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>In Exons/ Coding region:\n\t<ul>\n\t\t<li>Huntington's disease - CAG (Mnemonic- Hunter in a Cage)</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/lcITWGRUeYSX3d0sGasH1748008794.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/raNYd9qVmlbkEKBA277B1748008851.mp3"
  },
  {
    "text": "<p>A 25-year-old male presents with brief, abrupt, involuntary movements of his arms and face for the last 2 months. A history of Huntington's disease in his father, who was diagnosed at 40 years of age and passed away at the age of 50, is found. What is the mechanism behind this patient\u2019s earlier presentation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Anticipation"
      },
      {
        "id": 2,
        "text": "Mosaicism"
      },
      {
        "id": 3,
        "text": "Imprinting"
      },
      {
        "id": 4,
        "text": "Non-penetrance"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Anticipation</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>HD is a\u00a0CAG <span class=\"customMeta\" data-dictid=\"74dd17aa171692777200dcc186c177\">trinucleotide</span> repeat disorder, seen in the <span class=\"customMeta\" data-dictid=\"93cb75311c16927771828ed307dcc0\">axon</span> region of a gene present on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 4.</li>\n\t<li>HD is characterised by the <strong>Anticipation/Sherman Paradox.</strong></li>\n\t<li>The number of repeats increases with every generation, leading to early and more severe presentation in the next generation.</li>\n\t<li>HD features\u00a0psychiatric disturbances and <span class=\"customMeta\" data-dictid=\"2460de6f71169277718449183396c9\">choreoathetosis</span> early on, with cognitive <span class=\"customMeta\" data-dictid=\"4586eccbe71692777186e577e31829\">disturbance</span> and death later.</li>\n</ul>\n\n<p>Examples of diseases showing <span class=\"customMeta\" data-dictid=\"3736620c0a1692777181fbaf863f1c\">anticipation</span> include:</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Autosomal Dominant</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Autosomal Recessive</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"1\" rowspan=\"6\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Multiple <span class=\"customMeta\" data-dictid=\"1b023a99c41692777199f0afcc23f6\">spinocerebellar</span> ataxias</li>\n\t\t\t\t<li>Huntington\u2019s disease \u2013 CAG repeats</li>\n\t\t\t\t<li>Myotonic <span class=\"customMeta\" data-dictid=\"04568e3d19169277718672d9da94fd\">dystrophy</span> \u2013 CTG</li>\n\t\t\t\t<li>Congenital <span class=\"customMeta\" data-dictid=\"8faaca347f16927771861001cbc1a8\">dyskeratosis</span> \u2013 TTAGGG (telomere repeating sequence)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Friedreich\u2019s <span class=\"customMeta\" data-dictid=\"0842a8a59f1692777182f44d334dda\">ataxia</span> \u2013 GAA</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>X-linked</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Fragile X Syndrome \u2013 CGG</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Others</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"1\" rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Crohn\u2019s disease</li>\n\t\t\t\t<li>Behcet\u2019s disease</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n<strong>Mosaicism (Option B)</strong> refers to the presence of multiple genetically different cell lines in the same individual.</p>\n\n<p><strong>Imprinting (Option C)</strong> refers to a gene silencing.</p>\n\n<p><strong>Non-penetrance (Option D): </strong>It means that the Gene is received from parents but no symptoms are seen in patient.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/IzPOY1Z0NkLd4sdBnBaA1745332204.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MfOC4XT4nIpSca0LVCLi1745332578.mp3"
  },
  {
    "text": "<p>A 4-year-old girl is brought to the pediatrician\u2019s office for evaluation of developmental delay and seizures. She is very jovial, has microcephaly and is diagnosed with happy puppet syndrome. What is the genetic basis for this child\u2019s diagnosis?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Imprinting"
      },
      {
        "id": 2,
        "text": "Robertsonian translocation"
      },
      {
        "id": 3,
        "text": "Trinucleotide repeats"
      },
      {
        "id": 4,
        "text": "Monosomy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Imprinting</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The given clinical scenario likely describes Angelman syndrome.</p>\n\n<ul>\n\t<li>Classical symptom\u00a0of\u00a0Angelman syndrome: Happy puppet syndrome (inappropriate laughter).</li>\n</ul>\n\n<p>2 main disorders of genomic imprinting:</p>\n\n<ol>\n\t<li><strong>Angelman syndrome (AS):\u00a0</strong>\u00a0Paternal 15q11-q13 region is imprinted, while the <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> region is deleted</li>\n\t<li><strong>Prader-Willi syndrome (PWS):\u00a0</strong>Paternal <span class=\"customMeta\" data-dictid=\"cf1e8ec6121692777185eba2630061\">deletion</span> and <span class=\"customMeta\" data-dictid=\"a191a950d7169277719148e72a75e2\">maternal</span> <span class=\"customMeta\" data-dictid=\"f9307a2f7a1692777189dde161d21f\">imprinting</span> on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 15.</li>\n</ol>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/udn94lN8mkj4zBMTmw2c1748008965.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/GTeklPnC9gWeoHN7f5vk1748199404.mp3"
  },
  {
    "text": "<p>Which of the following explains a single mutant gene leading to different end effects in sickle cell anemia?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Variable expressivity"
      },
      {
        "id": 2,
        "text": "Variable penetrance"
      },
      {
        "id": 3,
        "text": "Pleiotropy"
      },
      {
        "id": 4,
        "text": "Genetic heterogeneity"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C) Pleiotropy</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>A <strong>single <span class=\"customMeta\" data-dictid=\"5663b887111692777193059c055492\">mutant</span> gene</strong> leading to many end effects is called <strong>pleiotropism</strong>, whereas mutations at <strong>several genetic loci</strong> producing a similar <span class=\"customMeta\" data-dictid=\"4ed693de911692777195bb9630f513\">phenotypic</span> effect are called <strong>genetic heterogeneity.</strong></p>\n\n<ul>\n\t<li>Sickle cell <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> is an example of <span class=\"customMeta\" data-dictid=\"1b4a38e589169277719504db867657\">pleiotropy</span> with a single gene <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> causing multiple physical effects:\n\t<ul>\n\t\t<li>Mutation at beta-7 position: Glutamic acid is replaced by valine.</li>\n\t\t<li>The <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> produces <strong>hemoglobin S (HbS)</strong>, which makes red blood cells <span class=\"customMeta\" data-dictid=\"607476ab371692777196d0cb2f13bc\">prone</span> to hemolysis.</li>\n\t\t<li>Additionally, it can lead to complications like splenic fibrosis, organ infarcts, and bone pains.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"420\" src=\"https://image.prepladder.com/content/BnVsCiDey6AO4n9Nnnxd1737511511.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/BnVsCiDey6AO4n9Nnnxd1737511511.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/nwBxuG5GIw8YZ01lSnjh1748199508.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/s1VM2miTg1PFYiuMSoAa1748199572.mp3"
  },
  {
    "text": "<p>A group of researchers studying genetic material noticed the presence of both wild-type and mutated mitochondrial genomes in different mitochondria of the same cells. What does this finding indicate?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Copy number variation"
      },
      {
        "id": 2,
        "text": "Heteroplasmy"
      },
      {
        "id": 3,
        "text": "Trinucleotide expansion"
      },
      {
        "id": 4,
        "text": "Imprinting"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B)</strong> <strong>Heteroplasmy</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The presence of both <span class=\"customMeta\" data-dictid=\"1aef6f42b91692777202311ae20455\">wild-type</span> and mutated mitochondrial genomes in different <span class=\"customMeta\" data-dictid=\"18c9e7b9721692777192bd042528cc\">mitochondria</span> of the same cell is called <strong>heteroplasmy.</strong></p>\n\n<ul>\n\t<li>A minimum number of <span class=\"customMeta\" data-dictid=\"5663b887111692777193059c055492\">mutant</span> mtDNAs must be present in a cell to give rise to a disease.</li>\n\t<li>This is called the <strong>\u201cthreshold effect.\u201d</strong></li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/4hoyqxWdk7jlMZNZIdrj1748199647.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MTaen2HwE6oGAodpPMSb1748199704.mp3"
  },
  {
    "text": "<p>A 50-year-old man presents with intentional tremors, cerebellar ataxia, and intellectual disability. His father had similar symptoms at 60 and died due to aortic dissection. The patient's son started showing tremors and has an intellectual disability and aggressive behavior. Additionally males of the family have large ears and mandibles. What condition is most likely affecting him?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Fragile X syndrome"
      },
      {
        "id": 2,
        "text": "Huntington's disease"
      },
      {
        "id": 3,
        "text": "Parkinson's disease"
      },
      {
        "id": 4,
        "text": "Alzheimer's disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Fragile X syndrome</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Fragile X Syndrome (FXS)\u00a0results from <strong>CGG\u00a0</strong>trinucleotide repeat disorder.\n\n\t<ul>\n\t\t<li>CGG repeats <55: Normal individual</li>\n\t\t<li>CGG repeats are between 55-200:\u00a0Fragile X\u2013-associated tremor/ataxia syndrome</li>\n\t\t<li>CGG repeats >200: Fragile X syndrome</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Fragile X syndrome:</strong>\u00a0</p>\n\n<ul>\n\t<li>A very common cause of <span class=\"customMeta\" data-dictid=\"6b9286cde51692777190fded98b3e5\">intellectual disability</span> which is seen in all members of the family.</li>\n\t<li>IQ = 20-60</li>\n\t<li>Mostly males are affected because it is an X-linked <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> (XLR) disorder. Females mostly are carriers.</li>\n\t<li>Physical phenotype: Includes a long face with a large mandible, large ears, and macroorchidism (enlarged testicles).</li>\n\t<li>Investigation of choice: Polymerase chain reaction (PCR)</li>\n\t<li>If PCR fails then we go for Southern blotting.</li>\n</ul>\n\n<p><br />\n<br />\n<br />\n\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/275ZtRR3lXPFwnAv7NV11748199864.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/h33TaUvzveVikpTRaaEn1748199990.mp3"
  },
  {
    "text": "<p>A one-month-old infant presents with developmental delays and physical features such as a prominent occiput, low-set ears, clenched hands with overlapping fingers, and a small mouth with a protruding tongue. Heart murmurs and rocker-bottom foot deformity are also noted. Which syndrome is the most likely cause of these features?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Noonan syndrome"
      },
      {
        "id": 2,
        "text": "Down syndrome"
      },
      {
        "id": 3,
        "text": "Patau syndrome"
      },
      {
        "id": 4,
        "text": "Edward syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct option: </strong><strong>D) Edward syndrome</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Edward syndrome is caused by the presence of an extra copy of <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 18- <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">Trisomy</span> 18.</p>\n\n<p>On USG: <strong>Strawberry skull</strong> is seen: Prominent <span class=\"customMeta\" data-dictid=\"d4214cf5bc1692777194bd76243b92\">occiput</span> and small chin.</p>\n\n<p><strong>Features:</strong></p>\n\n<ul>\n\t<li>Low birth weight</li>\n\t<li>Clenched fists with<strong> overlapping fingers</strong></li>\n\t<li><strong>Rocker-bottom <span class=\"customMeta\" data-dictid=\"32656dc8ba1692777202fc49f9ed13\">feet</span> (seen in <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">trisomy</span> 18 and <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">trisomy</span> 13)</strong></li>\n\t<li><strong>Microcephaly </strong></li>\n\t<li>Micrognathia</li>\n\t<li>Macroglosia (Big protruding tongue)</li>\n\t<li><strong>Cardiac and <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> malformations </strong></li>\n\t<li>Mental retardation</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"450\" src=\"https://image.prepladder.com/content/SoIRTsGJhBEH1dJFabaO1737511866.png\" width=\"500\" /></p>\n\n<p style=\"text-align:center\">\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/SoIRTsGJhBEH1dJFabaO1737511866.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/WdWJZFwzfK2eytt1rKob1748200060.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/HYdjkYLo9t2l7L00w50f1748200125.mp3"
  },
  {
    "text": "<p>A 2-year-old boy is brought to the pediatrician by his parents for delayed milestones. Upon examination, the pediatrician notices several physical features, including upward-slanting eyes, a flat facial profile, a protruding tongue, and a single palmar crease. Which type of inheritance is definitely not present in this child?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Meiotic nondisjunction of chromosome 21."
      },
      {
        "id": 2,
        "text": "Robertsonian translocation"
      },
      {
        "id": 3,
        "text": "Mitotic non-disjunction"
      },
      {
        "id": 4,
        "text": "Autosomal recessive inheritance"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct option: D) Autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> <span class=\"customMeta\" data-dictid=\"3b632faa131692777190ac40c2f1ea\">inheritance</span> </strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The clinical features are indicative of <strong>Down syndrome (Trisomy 21)</strong>, which is <strong>not </strong>inherited in an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> pattern.</p>\n\n<p><strong>Features:</strong></p>\n\n<ul>\n\t<li><strong>Mongoloid facies:</strong> Upward slanting of eyes (because of <span class=\"customMeta\" data-dictid=\"dd88c7c9741692777194fe0cc9abaa\">oblique</span> palpebral fissure)\u00a0and flat <span class=\"customMeta\" data-dictid=\"9fdd7489051692777202cffe3f24cc\">facial</span> profile (because of <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> hypoplasia)</li>\n\t<li>Macroglossia (Protruding tongue)</li>\n\t<li>Simian <span class=\"customMeta\" data-dictid=\"52ba261a371692777185fc3cc4d7af\">crease</span> (single <span class=\"customMeta\" data-dictid=\"236c57792f1692777194be265ad6db\">palmar</span> crease)</li>\n</ul>\n\n<p>Modes of <span class=\"customMeta\" data-dictid=\"3b632faa131692777190ac40c2f1ea\">inheritance</span> of Down syndrome are as follows:</p>\n\n<ul>\n\t<li><strong>Meiotic <span class=\"customMeta\" data-dictid=\"04a6fb3016169277719398abce825e\">Nondisjunction</span> of chromosome\u00a021\u00a0</strong>(95%) <strong>(Option A): </strong>The <span class=\"customMeta\" data-dictid=\"04a6fb3016169277719398abce825e\">nondisjunction</span> occurs in the Ovum or in mother's <span class=\"customMeta\" data-dictid=\"b3623bc67216927771889eb144d9ed\">germ</span> cells.</li>\n\t<li><strong>Robertsonian Translocation</strong> (4%) <strong>(Option B):</strong>\u00a0t(22,14)\u00a0in mother.</li>\n\t<li><strong>Mitotic <span class=\"customMeta\" data-dictid=\"04a6fb3016169277719398abce825e\">Nondisjunction</span> </strong>(1%) <strong>(Option C</strong>): This leads to mosaicism.</li>\n</ul>\n\n<p><br />\n<br />\n\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/LT80P47wgq6KWnoyMbPf1748200241.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/PbCEXz9Ih56zNhqzpKmX1748200457.mp3"
  },
  {
    "text": "<p>A 6-month-old child has recently passed away after a long ICU stay. Examination reveals microphthalmia and microcephaly. Other known diagnoses included ventricular septal defect, polycystic kidney disease, and omphalocele at birth. What is the chromosome involved?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Chromosome 21"
      },
      {
        "id": 2,
        "text": "Chromosome 18"
      },
      {
        "id": 3,
        "text": "Chromosome 13"
      },
      {
        "id": 4,
        "text": "Chromosome Y"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Chromosome 13</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The given scenario describes <strong>Patau syndrome or <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">Trisomy</span> 13.</strong></p>\n\n<p>Clinical features and associations include</p>\n\n<ul>\n\t<li>Rocker-bottom <span class=\"customMeta\" data-dictid=\"32656dc8ba1692777202fc49f9ed13\">feet</span> (Seen in both <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">trisomy</span> 13 and <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">trisomy</span> 18)</li>\n\t<li>Severe intellectual disability</li>\n\t<li>Keyhole/ Coloboma (eyes)</li>\n\t<li>Microphthalmia, microcephaly, holoprosencephaly</li>\n\t<li>Cleft lip/palate</li>\n\t<li>Polydactyly</li>\n\t<li>Congenital heart disease: PDA (Patent Ductus Arteriosus) or VSD (Ventricular Septal Defect)</li>\n\t<li>Renal defects-Polycystic <span class=\"customMeta\" data-dictid=\"4aa6035df41692777190b41d4a1583\">kidney</span> disease</li>\n\t<li>Umbilical hernia,Omphalocele</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Trisomy 18 is Edward syndrome:</strong>\u00a0Clinical features include a prominent <span class=\"customMeta\" data-dictid=\"d4214cf5bc1692777194bd76243b92\">occiput</span> (<strong>Strawberry skull</strong>) and rocker-bottom feet\u00a0<strong>(Option B ruled out)</strong></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/lsCfRLP60gBPkRTQOute1748889617.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/axXDYAKZPqCrqNXSV12q1748889715.mp3"
  },
  {
    "text": "<p>A 30-year-old tall male patient presents to the clinic for fertility treatment. He undergoes testing and is found to have low sperm counts. He has a history of diabetes, and a physical examination reveals gynecomastia, small testes, and minimal facial and body hair. What chromosomal abnormality is most likely causing this condition in the patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "45,X"
      },
      {
        "id": 2,
        "text": "47,XXY"
      },
      {
        "id": 3,
        "text": "47,XXX"
      },
      {
        "id": 4,
        "text": "47,XYY"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) 47,XXY </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Klinefelter syndrome (47, XXY) </strong>is male <span class=\"customMeta\" data-dictid=\"7ebd2292161692777189789e01e88d\">hypogonadism</span> with an extra X chromosome.</p>\n\n<p>Clinical features:</p>\n\n<ul>\n\t<li>Initially, the gonads are testes, but because of an extraX chromosome, the <span class=\"customMeta\" data-dictid=\"52d0e8b461169277720097e2175a05\">testes</span> stay underdeveloped and\u00a0small (<strong>hypogonadism</strong>).</li>\n\t<li>Low sperm\u00a0counts</li>\n\t<li>Secondary sexual characteristics also not developed, like no <span class=\"customMeta\" data-dictid=\"9fdd7489051692777202cffe3f24cc\">facial</span> hair.</li>\n\t<li>Gynecomastia due to an extra X chromosome.</li>\n</ul>\n\n<p><strong>Hormonal profile:\u00a0</strong>Low <span class=\"customMeta\" data-dictid=\"1ffaec13de169277719828374cfda0\">serum</span> <span class=\"customMeta\" data-dictid=\"e54a6646c1169277720031d162bd75\">testosterone</span> levels leading to high LH and FSH levels.</p>\n\n<p>Most common cancer risk: Male breast cancer</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"543\" src=\"https://image.prepladder.com/content/W77NhqY2LccBG6RsyP4e1736911169.png\" width=\"600\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<p style=\"text-align:center\">\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/W77NhqY2LccBG6RsyP4e1736911169.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/MfkAM8KxegYfequIA3n01748200654.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/aNMKKgd8rBBt7Nlam4nG1748200759.mp3"
  },
  {
    "text": "<p>An 18-year-old girl presents to the clinic due to the concern that she hasn't started menstruating yet. The girl has a short stature and a webbed neck. Physical examination reveals a broad chest with widely spaced nipples. What is the most likely diagnosis for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Turner syndrome"
      },
      {
        "id": 2,
        "text": "Mullerian agenesis"
      },
      {
        "id": 3,
        "text": "Congenital adrenal hyperplasia"
      },
      {
        "id": 4,
        "text": "47, XXX syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Turner syndrome</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0The scenario is diagnosed as\u00a0<strong>Turner syndrome.</strong></p>\n\n<ul>\n\t<li>Genotype: 45 XO</li>\n\t<li>Phenotype: Female</li>\n\t<li>Improper breast development leading to widely spaced nipples</li>\n\t<li>Improper ovarian development:\u00a0Female presents with streak ovaries and primary <span class=\"customMeta\" data-dictid=\"5d8a1011e31692777181375a96c9c8\">amenorrhea</span> (patient will not attain menarche).</li>\n\t<li>\u00a0Physical symptoms: Short <span class=\"customMeta\" data-dictid=\"3ed58981c41692777199e6abf079eb\">stature</span> and <span class=\"customMeta\" data-dictid=\"80f9769a7f169277720291b1f34ef4\">webbed</span> neck</li>\n\t<li>Cardiac anomalies: Bicuspid <span class=\"customMeta\" data-dictid=\"59a120854e16927771820318aebd4a\">aortic valve</span> and Coarctation of\u00a0aorta.</li>\n\t<li>Usually, IQ is normal.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"547\" src=\"https://image.prepladder.com/content/8msSuSZqSrgl2459td9m1736911241.png\" width=\"600\" /></p>\n\n<p>The image below shows <span class=\"customMeta\" data-dictid=\"856149f6931692777190f9c81409c5\">karyotyping</span> in Turner syndrome.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC-BY-SA-3.0\" data-source=\"https://en.wikipedia.org/wiki/Turner_syndrome#/media/File:45,X.jpg\" data-tags=\"\" height=\"316\" src=\"https://image.prepladder.com/content/3EMQdD0LpDLOjUVhxFY51737512450.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<p style=\"text-align:center\">\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/8msSuSZqSrgl2459td9m1736911241.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/pViZyVTJMyIaLYv6t7uS1748200876.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/fGFDdZv95jq9HgawXWOE1748200983.mp3"
  },
  {
    "text": "<p>A 15-year-old boy presents to the clinic with tall stature and long limbs, along with a history of frequent joint dislocations. Upon physical examination, he exhibits long fingers ,sunken chest, and an echocardiogram shows a dilated aortic root. Considering these clinical features, which of the following genes are commonly mutated in this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "FBN 1"
      },
      {
        "id": 2,
        "text": "FBN 2"
      },
      {
        "id": 3,
        "text": "FBN 3"
      },
      {
        "id": 4,
        "text": "FBN 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer: A) FBN 1</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>A 15-year-old boy presents with tall stature, long limbs, joint dislocations, long fingers, a sunken chest, and a dilated <span class=\"customMeta\" data-dictid=\"636585f1a11692777182602515d2d4\">aortic root</span> on echocardiogram; these features are consistent with <strong>Marfan syndrome</strong>, which is commonly caused by mutations in the <strong>FBN1 gene</strong></p>\n\n<ul>\n\t<li>An autosomal dominant disorder due to a <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> in the\u00a0<strong>Fibrillin (FBN)</strong> <strong> 1 Gene</strong><strong>\u00a0</strong>on <strong>chromosome 15.</strong></li>\n</ul>\n\n<p><strong>Clinical Features:</strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Marfan D</strong>isease</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\">The most common Clinical Manifestation is Skeletal Abnormalities.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>M</strong>itral Valve Prolapse (Most common Cardiac abnormality)</li>\n\t\t\t\t<li><strong>A</strong>ortic Dissection (Most common cause of death)</li>\n\t\t\t\t<li><strong>R</strong>etinal Detachment (eye problem)</li>\n\t\t\t\t<li><strong>F</strong>reely movable Joint (most common Thumb joint)</li>\n\t\t\t\t<li><strong>A</strong>rachnodactyly (long fingers, <span class=\"customMeta\" data-dictid=\"87bbbfb59516927771992f5372ca87\">spider</span> fingers), High <strong>A</strong>rched Palate</li>\n\t\t\t\t<li><strong>N</strong>ine Feet Tall, Pigeon chest (defect in sternum)</li>\n\t\t\t\t<li><strong>D</strong>islocation of the lens (Ectopia Lentis- Direction of <span class=\"customMeta\" data-dictid=\"c1aae6e67f169277718624a4e51cfe\">dislocation</span> is Supero Temporal)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Steinberg Sign</strong>- Positive if the thumb tip extends beyond the palm when folded into a closed fist</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Walker Sign- </strong>Positive if the thumb and <span class=\"customMeta\" data-dictid=\"8226badd751692777203022e3dc57b\">fifth finger</span> <span class=\"customMeta\" data-dictid=\"ea564f2f5e1692777194df1391fd69\">overlap</span> when you grip your wrist with the opposite hand</p>\n\n\t\t\t<p style=\"text-align:center\"><img alt=\"\" data-author=\"Graziella F. B. Cipriano; Guilherme C. Brech; Paulo A. T. Peres; C\u00e1ssia C. Mendes; Gerson Cipriano J\u00fanior; Ant\u00f4nio C. C. Carvalho\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Steinberg_and_Walker-Murdoch_tests.jpg\" data-tags=\"\" height=\"286\" src=\"https://image.prepladder.com/content/wwnO9NTqjKxLYwX9AneM1736911981.png\" width=\"500\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/wwnO9NTqjKxLYwX9AneM1736911981.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/fiT5WJizkUY4pzTi1BqM1749028064.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/JjpTl3ce6nV0zbGJsNAS1748201363.mp3"
  }
];
        let quizName = '11 Non-Mendelian Disorders';
        let hierarchy = ["PrepLadder", "qBank", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>