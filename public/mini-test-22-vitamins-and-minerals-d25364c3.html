<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 22  (Vitamins And Minerals) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following vitamins, when infused in supraphysiological doses, cause macular oedema and macular cysts?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin D"
      },
      {
        "id": 3,
        "text": "Vitamin E"
      },
      {
        "id": 4,
        "text": "Vitamin B3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Macular cysts and oedema may develop in patients due to the infusion of supraphysiological doses of\u00a0<strong>vitamin B3 (niacin\u00a0toxicity).</strong></p>\n<p><strong>The toxic effects of niacin include:</strong></p>\n<ul>\n<li><strong>Flushing</strong> associated with skin dryness, itching, paresthesia, and headache. These effects\u00a0may be seen with even a low dose of 30mg/day. <strong>Premedication with aspirin</strong> alleviates these symptoms (as these symptoms are <strong>mediated by prostaglandins</strong>)</li>\n<li>Nausea, vomiting, and abdominal pain.</li>\n<li>Hepatic toxicity, which presents as jaundice with elevated AST and ALT levels.</li>\n<li>Fulminant hepatitis requiring liver transplantation.</li>\n<li>Glucose intolerance</li>\n<li>Hyperuricemia</li>\n<li>Macular edema and macular cysts.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A baby with a birth weight of 1400g is started on fortified breast milk. This should be supplemented with:",
    "choices": [
      {
        "id": 1,
        "text": "Calcium"
      },
      {
        "id": 2,
        "text": "Phosphorus"
      },
      {
        "id": 3,
        "text": "Vitamin K"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Fortified breast milk</strong> should be <strong>supplemented with iron</strong>.</p>\n<p>For <strong>very low birth weight </strong>(VLBW)<strong> </strong>infants<strong>, fortified breast milk</strong> is essential for their growth. It contains nutrients like <strong>calcium</strong>, <strong>phosphorus</strong>, <strong>folate</strong>, and <strong>vitamins</strong>. However, breast milk<strong> lacks sufficient iron. </strong>So, VLBW infants need separate<strong> iron supplementation </strong>in liquid form to prevent <strong>anemia</strong> and support healthy brain development.\u00a0</p>\n<p>Multinutrient supplementation is recommended for very low birth weight infants till they reach 40 weeks gestational age. This can be achieved by supplementing individual nutrients or fortification of the expressed breast milk with <strong>Human milk fortifiers (HMF).</strong></p>\n<p>All term babies and babies &gt;1500 g can feed on breast milk without the need of HMFs. Babies should be supplemented with vitamin D and iron separately, as breast milk is lacking in these nutrients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presents with bone pain, headache and vomiting. The clinician suspects that these are due to increased intracranial pressure. On radiograph, increased density in metaphyseal region and sub- periosteal calcification is visible. Rest of the clinical examination is normal. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hypervitaminosis A"
      },
      {
        "id": 2,
        "text": "Multiple myeloma"
      },
      {
        "id": 3,
        "text": "Secondaries"
      },
      {
        "id": 4,
        "text": "Hyperparathyroidism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Hypervitaminosis D and A cause metabolic bone disease. An increased vitamin A level in the body can manifest in the form of pseudotumor cerebri (<strong>condition of increased intracranial pressure</strong> despite the absence of any pathology).</p>\n<p>The increased density in <strong>metaphyseal region is due to excessive mineralization of bone</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vitamins is wrongly matched with their associated enzymes?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B1 (Thiamine)  : RBC Trans-ketolase"
      },
      {
        "id": 2,
        "text": "Vitamin B2 (Riboflavin)  : RBC glutathione reductase"
      },
      {
        "id": 3,
        "text": "Vitamin B9 (Folic acid) : FIGLU excretion/Histidine load test"
      },
      {
        "id": 4,
        "text": "Vitamin C  : Serum methyl malonate level"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option D is wrongly matched as Vitamin B12 is associated with serum methyl malonyl levels and not Vitamin C.\u00a0</p>\n<p>There are two vitamin B<sub>12</sub>-dependent enzymes:</p>\n<ul>\n<li><strong>Methionine synthase (Homocysteine methyltransferase</strong>): Catalyzes the conversion of homocysteine to methionine</li>\n<li><strong>Methylmalonyl CoA mutase</strong>: Methylmalonyl CoA, formed as an intermediate in the catabolism of valine, isoleucine, and propionyl CoA is converted to succinyl CoA</li>\n</ul>\n<p>The below figure shows B12 serving as a cofactor of methionine synthase. Its deficiency may cause\u00a0 folate trap.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ef739d1b366f417fa7f1c79546aa2cdfx1280x1774.JPEG"
    ]
  },
  {
    "text": "A young boy presented with fissured tongue, lips, and lesions in the angle of the mouth as shown below. On investigation, he had low RBC glutathione reductase activity. Which vitamin is deficient here?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B12"
      },
      {
        "id": 2,
        "text": "Vitamin B3"
      },
      {
        "id": 3,
        "text": "Biotin"
      },
      {
        "id": 4,
        "text": "Riboflavin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Clinical presentation of this patient showing&nbsp;cheilosis and stomatitis, combined with low RBC glutathione reductase activity is consistent with&nbsp;<strong>riboflavin (vitamin B<sub>2</sub>)</strong>&nbsp;deficiency.</p>\n<p>The deficiency state of riboflavin is characterized by the following signs and symptoms:</p>\n<ol>\n<li><strong>Cheilosis</strong>: pallor in the angle of mouth and fissuring of lips, which extends radially to skin</li>\n<li><strong>Glossitis:</strong> tongue becomes smooth, loss of papilla&nbsp;<strong>(magenta-colored tongue)</strong></li>\n<li><strong>Eyes: </strong>keratitis, conjunctivitis<strong>, corneal vascularisation</strong></li>\n<li><strong>Other features:&nbsp;</strong>Seborrheic dermatitis, Anemia</li>\n</ol>\n<p>The&nbsp;<strong>nutritional status of riboflavin </strong>can be assessed by<strong> measuring</strong>&nbsp;the activity of the&nbsp;<strong>RBC glutathione reductase,</strong>&nbsp;by FAD added in vitro (this test is specific for riboflavin deficiency).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/908a6967afa746929d49cdf5098b2a78.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about fat-soluble vitamins is true?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrophilic in nature"
      },
      {
        "id": 2,
        "text": "Freely transported in the blood"
      },
      {
        "id": 3,
        "text": "Vitamin C is a fat soluble vitamin"
      },
      {
        "id": 4,
        "text": "Stored in the liver and the adipose tissue"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Fat-soluble vitamins are stored in the<strong> liver and adipose tissue.</strong></p>\n<p>Vitamins can be broadly classified into two categories:</p>\n<ul>\n<li><strong>Fat-soluble vitamins</strong>: Vitamins A, D, E, K</li>\n<li><strong>Water-soluble vitamins:&nbsp;&nbsp;</strong>Vitamin B complex and Vitamin C</li>\n</ul>\n<p>Few properties of fat-soluble&nbsp;vitamins:</p>\n<ul>\n<li><strong>Hydrophobic</strong> in nature</li>\n<li>Transported in blood by the lipoproteins, such as <strong>chylomicrons</strong></li>\n<li><strong>Stored </strong>in the<strong> liver </strong>and the<strong> adipose tissue&nbsp;</strong></li>\n</ul>\n<p>Conditions affecting the digestion and absorption of the lipid-soluble vitamins causing&nbsp;<strong>deficiency of these vitamins&nbsp;</strong>include:&nbsp;<strong>a&nbsp;very low-fat diet, steatorrhea, </strong>and <strong>disorders of the biliary system</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes to you with vitamin D deficiency. You advise the patient to take a walk under sufficient sunlight everyday. What is the correct sequence of products formed during vitamin D synthesis?",
    "choices": [
      {
        "id": 1,
        "text": "4-3-2-1"
      },
      {
        "id": 2,
        "text": "1-2-3-4"
      },
      {
        "id": 3,
        "text": "1-3-2-4"
      },
      {
        "id": 4,
        "text": "1-4-3-2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct sequence of products formed during vitamin D synthesis is <strong>1-2-3-4</strong>.</p>\n<p>Vitamin D is obtained by synthesis in the skin with adequate sunlight exposure or dietary supplementation. It helps in regulating calcium absorption and homeostasis. Deficiency results in rickets in children and osteomalacia in adults and is a common problem in areas with inadequate sunlight.</p>\n<p>The sequence of vitamin D synthesis is:</p>\n<ol>\n<li><strong>Skin</strong>:\u00a0<strong>7-dehydrocholesterol</strong>\u00a0is nonenzymatically converted to <strong>previtamin D</strong> on exposure to ultraviolet light. It is converted to\u00a0<strong>cholecalciferol</strong>, which then enters the bloodstream.</li>\n<li><strong>Liver</strong>:\u00a0Cholecalciferol is hydroxylated to form\u00a0<strong>25-hydroxyvitamin D\u00a0</strong>(calcidiol), which is bound to a vitamin D-binding globulin and released into the bloodstream. This is the <strong>main storage form</strong> of vitamin D.\u00a0</li>\n<li><strong>Kidney</strong>:<strong>\u00a0</strong><strong>25-hydroxyvitamin D\u00a0</strong>is further hydroxylated to form\u00a0<strong>1,25 dihydroxyvitamin D</strong> (calcitriol). This is the <strong>biologically active form</strong> of vitamin D. In some cases, it can also undergo 24-hydroxylation to form an inactive metabolite called 24,25-dihydroxyvitamin D.</li>\n</ol>\n<p>The steps of vitamin D synthesis are summarized below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fde3485fa4914eaeae335f36ce978ac3x1280x1630.JPEG"
    ]
  },
  {
    "text": "A 30-year-old female with a past medical history of generalized seizures controlled with phenytoin therapy. She had mild pallor on physical examination. Lab values reveal Hb -  9.8 g/dl, MCV - 106 fL, Platelets - 1,80,000/cu.mm, leukocytes - 7800/cu.mm. Which of the following supplementations could have prevented this anemia?",
    "choices": [
      {
        "id": 1,
        "text": "Iron"
      },
      {
        "id": 2,
        "text": "Vitamin B12"
      },
      {
        "id": 3,
        "text": "Vitamin B6"
      },
      {
        "id": 4,
        "text": "Folic acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient has mild <strong>megaloblastic anemia </strong>(high MCV), probably due to chronic phenytoin therapy. Some anti-epileptic drugs like phenytoin, phenobarbital can cause megaloblastic anemia by impairing absorption of folate in the small intestine. <strong>Folic acid supplementation</strong> can prevent this condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old lady presented with chronic pain in the lower back and knees. On physical examination, there were black pigmentary deposits on the sclera of both eyes and on the fingers and nailbeds. The urine turned black on exposure to Benedict's reagent and showed large amounts of a particular metabolite which is responsible. Identify the metabolite from the image below",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "1"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette is suggestive of <strong>alkaptonuria,&nbsp;</strong>which is characterised by excretion of the metabolite&nbsp;<strong>homogentisate </strong>(marked as <strong>2&nbsp;</strong>in the flowchart)&nbsp;in urine.</p>\n<p>Alkaptonuria is an autosomal recessive disorder of <strong>tyrosine metabolism</strong>. It occurs due to a defect in <strong>homogentisate oxidase</strong>&nbsp;(which&nbsp;oxidizes homogentisate to maleylacetoacetate) leading to the <strong>accumulation of homogentisate</strong>. The&nbsp;excreted homogentisate in urine makes it appear black when it gets oxidized on exposure to air or an oxidizing agent.</p>\n<p>Accumulation of oxidized homogentisic acid pigment (benzoquinone acetate) in joints and connective tissues leads to arthritis and connective tissue pigmentation respectively. This is known as <strong>ochronosis</strong>.&nbsp;Pigmentation of heart valves, larynx, tympanic membranes, and skin, with occasional renal pigment calculi, can also be seen.</p>\n<p>Most patients are diagnosed early based on the<strong> darkening of urine</strong> with standing or the addition of alkali. Around the age of 30 years, gray-brown pigmentation of sclera and generalized darkening of the concha, anthelix and helix of the ear is seen.Some patients present in middle age with a <strong>degenerative joint disease</strong> (ochronotic arthritis) with pain, stiffness, and limitation of motion of the lower back, hips, knees, and shoulders. Small joints are usually spared.</p>\n<p>Treatment:</p>\n<div class=\"page\" title=\"Page 3065\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Symptomatic</strong> treatment with pain medications, spinal surgery, and arthroplasty&nbsp;</li>\n<li>Ascorbic acid and protein restriction&nbsp;</li>\n<li><strong>Nitisinone</strong> - reduces urinary excretion of homogentisic acid and delays progression of the disease.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cd74d0fa7ff04732a5f61cff999500c8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0fe5b17563d94403887314b8c37e2099x1280x2566.3187588152327.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/69bb0d10ce66436eb0e4e36807c443aex408x267.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/114c954855d74f0cbc4ab61cf0d8073fx972x1198.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94e733d3439e40659d77dd54cc40ce9dx512x358.PNG"
    ]
  },
  {
    "text": "Alkali disease of livestock is caused by an excess of which of the following minerals?",
    "choices": [
      {
        "id": 1,
        "text": "Selenium"
      },
      {
        "id": 2,
        "text": "Manganese"
      },
      {
        "id": 3,
        "text": "Molybdenum"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Excess of <strong>selenium</strong> causes alkali disease in livestock.</p>\n<p><strong>Clinical types of Selenium intoxication&nbsp;</strong></p>\n<ul>\n<li>acute selenosis</li>\n<li>subacute selenosis (i.e., blind staggers type)</li>\n<li>chronic selenosis (i.e., alkali disease type).</li>\n</ul>\n<p>Alkali disease occurs when animals consume moderate levels of Selenium for a period of weeks to months.</p>\n<p>The usual <strong>clinical signs</strong> of chronic selenosis in horses, cattle, and swine are <strong>loss of hair</strong> (horses and cattle lose long hair from the mane and tails), <strong>emaciation, hoof lesions, weight reduction, and lameness.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with cheilitis, stomatitis, and a glove and stocking pattern of neuropathy. Which vitamin deficiency is most likely responsible for this clinical presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B12"
      },
      {
        "id": 2,
        "text": "Vitamin B3"
      },
      {
        "id": 3,
        "text": "Vitamin B1"
      },
      {
        "id": 4,
        "text": "Vitamin B2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical presentation described, including\u00a0<strong>cheilitis</strong>, <strong>stomatitis</strong>,\u00a0and <strong>glove </strong>and<strong> stocking</strong> pattern neuropathy, is most consistent with <strong>Vitamin B12 deficiency.</strong> This deficiency can lead to a condition known as<strong> pernicious anemia </strong>which presents with a variety of symptoms including those described.</p>\n<p>Vitamin B12 deficiency can cause a wide range of symptoms, including <strong>neurological</strong> manifestations such as peripheral neuropathy (glove and stocking pattern), as well as <strong>gastrointestinal</strong> symptoms like diarrhea. Additionally, vitamin B12 deficiency can lead to <strong>megaloblastic</strong> <strong>anemia</strong>, which may present with cheilitis and stomatitis.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>(a) Niacin (B3) deficiency: </strong>Niacin deficiency can lead to a condition called pellagra, which is characterized by the \"3 Ds\": dermatitis, diarrhea, and dementia. Cheilitis and stomatitis are common manifestations of pellagra, but glove and stocking pattern neuropathy are not typically associated with niacin deficiency.</p>\n<p><strong>(b) Thiamine (B1) deficiency: </strong>Thiamine deficiency can cause a condition known as beriberi, which can manifest with neurological symptoms such as peripheral neuropathy, but it usually does not present with dermatological symptoms like cheilitis and stomatitis.</p>\n<p><strong>(d) Riboflavin (B2) deficiency: </strong>Riboflavin (vitamin B2) deficiency can cause glossitis (inflammation of the tongue) and cheilosis (cracks or sores at the corners of the mouth). While riboflavin deficiency can cause dermatological symptoms, it is less likely to cause rashes in sun-exposed areas and peripheral neuropathy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old woman presented with a 2-week history of progressive severe headache and blurry vision. Clinical examination was significant for bilateral papilledema. A lumbar puncture revealed elevated opening pressure with normal CSF composition. An MRI showed no space-occupying lesions. On further questioning, she admits to taking high-dose multivitamin supplements. Which vitamin excess is likely to cause the above scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin D"
      },
      {
        "id": 3,
        "text": "Vitamin E"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario of increased intracranial pressure in the absence of space-occupying lesion points towards the diagnosis of <strong>pseudotumor cerebri</strong>. <strong>Vitamin A excess</strong> is the likely cause.</p>\n<p><strong>Clinical features</strong> of hypervitaminosis A:</p>\n<ul>\n<li><strong>CNS:</strong>&nbsp;Symptoms of raised intracranial pressure (<strong>pseudotumor cerebri</strong>) such as headache, nausea, vomiting, blurring of vision, ataxia, anorexia</li>\n<li><strong>Liver</strong>: Hepatomegaly and hyperlipidemia</li>\n<li><strong>Musculoskeletal</strong>: Thickening of the long bones (<strong>bony exostosis</strong>), hypercalcemia, soft tissue calcification</li>\n<li><strong>Dermatological</strong>: Dryness, <strong>exfoliative dermatitis</strong>, alopecia</li>\n<li><strong>Teratogenesis</strong>: Pregnant women should not ingest excessive quantities as it can cause congenital malformations in the developing fetus.&nbsp;<strong>Isotretinoin</strong>(13-cis retinoic acid) is a drug that is<strong> teratogenic </strong>and absolutely <strong>contraindicated </strong>in<strong> pregnancy.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female came to OPD with a tingling sensation in her legs and hands. The oral examination shows the following features. Which of the following investigations will be useful in diagnosing the vitamin deficiency seen in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "RBC Trans-ketolase assay"
      },
      {
        "id": 2,
        "text": "Serum methyl malonate level"
      },
      {
        "id": 3,
        "text": "RBC transaminase assay"
      },
      {
        "id": 4,
        "text": "RBC glutathione reductase activity assay"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>RBC glutathione reductase</strong> activity&nbsp;will be useful in diagnosing the <strong>riboflavin deficiency</strong> that this patient has. The image shows <strong>cheilosis and angular stomatitis</strong> which point towards riboflavin deficiency.&nbsp;The&nbsp;<strong>nutritional status of riboflavin </strong>can be assessed by<strong> measuring</strong>&nbsp;the activity of the&nbsp;<strong>RBC glutathione reductase.</strong></p>\n<p>Deficiency state of riboflavin is characterized by the following signs and symptoms:</p>\n<ul>\n<li><strong>Cheilosis</strong>: pallor in the angle of mouth and fissuring of lips, which extends radially to skin.</li>\n<li><strong>Glossitis:</strong> tongue becomes smooth, loss of papilla&nbsp;<strong>(magenta-colored tongue).</strong></li>\n<li><strong>Eyes: </strong>keratitis, conjunctivitis<strong>, corneal vascularisation.</strong></li>\n<li><strong>Other features:&nbsp;</strong>Seborrheic dermatitis, anemia.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/72fff025cb94475ba9aa410ce1f12861.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 48-year old non-diabetic obese man presented for routine follow up. On investigation, his lipid profile showed hypercholesterolemia, hypertriglyceridemia, elevated LDL and VLDL. Which of the following vitamins can be used as a lipid-lowering agent in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Riboflavin"
      },
      {
        "id": 2,
        "text": "Pantothenic acid"
      },
      {
        "id": 3,
        "text": "Nicotinic acid"
      },
      {
        "id": 4,
        "text": "Folic acid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The vitamin that can be used as a <strong>lipid-lowering agent</strong> is <strong>nicotinic acid</strong> (niacin or vitamin B3).</p>\n<p>Niacin causes a <strong>reduction in LDL, VLDL and triglycerides</strong> along with an <strong>increase in HDL</strong>. It is the only lipid-lowering agent that <strong>lowers lipoprotein (a)</strong> levels significantly.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 39-year-old obese ,non-diabetic, non-hypertensive female presented with grade 2 fatty liver with hepatic fibrosis and inflammation. She has no history of smoking or drinking. A diagnosis of non-alcoholic steatohepatitis (NASH) has been made. Which of the following drugs can be used as the first-line treatment in this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Ursodeoxycholic acid"
      },
      {
        "id": 2,
        "text": "Alpha tocopherol"
      },
      {
        "id": 3,
        "text": "Metformin"
      },
      {
        "id": 4,
        "text": "N-acetylcysteine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given clinical scenario,&nbsp;<strong>Alpha tocopherol</strong> or <strong>vitamin E</strong> is the first line treatment considered for&nbsp;non-alcoholic steatohepatitis (<strong>NASH</strong>) for non-diabetic patients.</p>\n<p>Non-alcoholic fatty liver disease (NAFLD)&nbsp;is associated with&nbsp;diabetes&nbsp;and&nbsp;obesity. The fatty change may also be caused due to the effect of&nbsp;toxins (including certain medication),&nbsp;protein malnutrition,&nbsp;dyslipidemia,&nbsp;and&nbsp;anoxia. Bleomycin, Methotrexate,&nbsp;Doxycycline,&nbsp;l-Asparaginase are other drugs causing hepatic steatosis.</p>\n<p>Nonalcoholic steatohepatitis (NASH) is characterized by <strong>hepatic steatosis</strong> which is complicated by histologically evident hepatocyte death and inflammation. Currently, <strong>biopsy</strong> is the <strong>best investigation</strong> to establish the diagnosis.</p>\n<p>The current approach to NAFLD management focuses on treatment to avoid or decrease the risk factors for NASH (like obesity, insulin resistance, metabolic syndrome, and dyslipidemia).</p>\n<p><strong>Alpha tocopherol or vitamin E</strong> is the <strong>first line treatment</strong> considered for non-alcoholic steatohepatitis (NASH). In many studies, vitamin E was well-tolerated,&nbsp;showed modest improvements in AST levels, radiographic features of hepatic steatosis, and/or histologic features of NASH.</p>\n<ul>\n<li>Vitamin E should only be considered as the first-line pharmacotherapy for<strong> non-diabetic</strong> <strong>NASH patients.</strong></li>\n<li>Dose: 800 IU/day.</li>\n</ul>\n<p>&nbsp;Other options :&nbsp;</p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>N acetyl cysteine</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\"><strong>(NAC)&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is a specific antidote for&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>paracetamol&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>poisoning</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">. It has maximum efficacy when given&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>within 8 hours&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">and can be given either via oral or intravenous route.</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Ursodeoxycholic acid (a bile acid that improves certain cholestatic liver diseases) and&nbsp;omega-3 fatty acids show no histologic benefit in the management of NASH.</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Metformin is not currently recommended as a treatment for NASH as it has not been known to improve liver histology.&nbsp;</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following biochemical parameters are correct in Vitamin D-dependent rickets?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Lab investigations in rickets reveal <strong>normal/decreased serum calcium, decreased phosphorous, elevated PTH, and increased ALP levels.</strong></p>\n<p>Rickets occurs due to a nutritional deficiency in vitamin D. Decreased vitamin D leads to decreased calcium and phosphate due to reduced absorption. The decreased calcium stimulates increased PTH production.&nbsp;ALP level is increased as it is involved in bone mineralization.</p>\n<p>The interaction between these are given below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45db057979574298be3e7b2fc1de4572x1280x1596.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aad07492de3e42808cfcc830954fe9fbx1280x1838.JPEG"
    ]
  },
  {
    "text": "An patient presented with bleeding gums and examination findings are as below. This given condition can be seen in deficiency of _________",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin B12"
      },
      {
        "id": 3,
        "text": "Vitamin C"
      },
      {
        "id": 4,
        "text": "Vitamin D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows <strong>perifollicular purpura</strong><strong>. </strong>This along with corkscrew like body hair and bleeding gums is characteristic of<strong>&nbsp; Scurvy (vitamin C deficiency).</strong></p>\n<ul>\n<li>Vitamin C is a <strong>water\u2010soluble vitamin</strong>, antioxidant and essential co\u2010factor for <strong>collagen biosynthesis</strong>, carnitine, and catecholamine metabolism, and dietary iron absorption.</li>\n<li>Humans are <strong>unable to synthesize vitamin C</strong>; therefore, vitamin C is strictly obtained through the dietary intake of fruit and vegetables.</li>\n<li>Scurvy develops <strong>1&ndash;3 months</strong> after initiating a vitamin C deficient diet.</li>\n<li>The cutaneous manifestations of scurvy include <strong>phrynoderma,&nbsp;corkscrew hairs, perifollicular hemorrhage</strong> and purpura, edema of the lower extremities, and splinter hemorrhages.</li>\n<li>Corkscrew hairs represent <strong>fractured and coiled hairs</strong> due to <strong>impaired keratin cross\u2010links</strong> by disulfide bonds. With time, significant vascular congestion occurs, particularly in the lower extremities, leading to<strong> perifollicular hemorrhage and edema.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9559b349fdf34507ab64a633ee8a3aec.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old bodybuilder presented with fatigue on moderate exercise. He had recently started eating raw eggs for protein. Which of the following enzymes is likely deficient in him?",
    "choices": [
      {
        "id": 1,
        "text": "Glucose-6-phosphatase"
      },
      {
        "id": 2,
        "text": "Glycogen phosphorylase"
      },
      {
        "id": 3,
        "text": "Pyruvate carboxylase"
      },
      {
        "id": 4,
        "text": "Phosphoenolpyruvate carboxykinase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient developed <strong>pyruvate carboxylase</strong> enzyme <strong>deficiency.</strong></p>\n<p>Individuals who eat an excess of <strong>uncooked</strong> <strong>egg-white,</strong> develop <strong>biotin deficiency</strong> and as a result deficiency of the carboxylase enzymes. This is because a protein called, <strong>avidin</strong> present in the egg-white <strong>binds to biotin</strong> in the diet, and makes biotin unavailable for intestinal absorption.</p>\n<p>Biotin deficiency can cause:</p>\n<ul>\n<li>Dermatitis</li>\n<li>Mental status changes (depression, hallucinations)</li>\n<li>Paraesthesia</li>\n<li>Alopecia</li>\n</ul>\n<p>Biotin serves as a co-enzyme for the synthesis of several carboxylase enzymes such as:</p>\n<ul>\n<li style=\"font-weight: 400;\">Acetyl-CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Pyruvate carboxylase</li>\n<li style=\"font-weight: 400;\">Propionyl CoA carboxylase</li>\n<li style=\"font-weight: 400;\">Methylcrotonyl-CoA carboxylase</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vitamins is breast milk deficient in?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin A"
      },
      {
        "id": 2,
        "text": "Vitamin C"
      },
      {
        "id": 3,
        "text": "Vitamin E"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Breast milk is <strong>deficient in&nbsp;vitamin&nbsp;K.</strong></p>\n<p>Therefore infants have to be supplemented with vitamin K to<strong> prevent hemorrhagic disease of the newborn</strong>.&nbsp;</p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p class=\"p1\">The composition of breast <span class=\"s1\">milk </span><span class=\"s2\">varies </span>at different time points of lactation to <span class=\"s2\">suit </span>the <span class=\"s2\">needs </span>of the baby.</p>\n<ul>\n<li><strong>Colostrum </strong>is secreted in small quantities during the first 3 to 4 days. It is thick, and yellow and contains many antibodies, immune-competent cells, and vitamins A, D, E, and K.&nbsp;</li>\n<li><strong>Transitional milk&nbsp;</strong>is the one that is seen after 3-4 days until 2 weeks and has an increased fat and sugar content while the protein and immunoglobulin content reduces.</li>\n<li><strong>Mature milk </strong>is secreted after transitional milk. It is essential for the baby's optimum growth as it contains all the nutrients. It is thinner and more watery.</li>\n</ul>\n<p><strong>Foremilk </strong>is the one that is <strong>secreted</strong> during the <strong>initial feed.</strong> It is <strong>watery</strong> and <strong>quenches</strong> the <strong>thirst</strong> of the baby. It is rich in <strong>proteins, sugar,</strong> vitamins, minerals, and water.&nbsp;<strong>Hindmilk </strong>is rich in<strong> fat </strong>and provides<strong> energy. </strong><span class=\"s1\">It</span> gives a sense of <strong>satiety to</strong><span class=\"s2\">&nbsp;the baby</span><span class=\"s2\">.</span> Hindmilk comes towards the&nbsp;<strong>end</strong> of the <strong>feed.</strong>&nbsp;</p>\n</div>\n</div>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p><strong>Components </strong>of<strong> breast milk</strong> and<strong> diseases</strong> they<strong> protect</strong> against:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Components</strong> of<strong> breast milk</strong></td>\n<td><strong>Protection against</strong></td>\n</tr>\n<tr>\n<td>Lysozyme</td>\n<td>\n<ul>\n<li>Escherichia&nbsp;coli, Salmonella</li>\n<li>Entamoeba histolytica</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Lactoferrin</td>\n<td>\n<ul>\n<li>E. coli, Shigella, Salmonella</li>\n<li>E. histolytica,&nbsp;Giardia lamblia</li>\n<li>Plasmodium falciparum</li>\n<li>Rotavirus</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Bifidus factor</td>\n<td>E. coli, Shigella, Salmonella</td>\n</tr>\n<tr>\n<td>Low levels of para-aminobenzoic acid</td>\n<td>Plasmodium</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n<p>Breastmilk&nbsp;is also&nbsp;<strong>deficient in vitamin D</strong>&nbsp;and exclusively breastfed infants can develop vitamin D deficiency unless adequately supplemented.</p>\n<p><strong>Human milk</strong>&nbsp;is a&nbsp;<strong>rich source of vitamin C</strong>&nbsp;and contains around 5-15mg/100cal.&nbsp;<strong>Vitamin C</strong>&nbsp;is found in&nbsp;<strong>higher levels</strong>&nbsp;in <strong>breast milk</strong>&nbsp;than in cow milk.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year old child from a refugee camp presents with generalized oedema, tachycardia, and palpitations. Signs of heart failure are present and a chest X-ray reveals massive cardiomegaly. Lab markers reveal low RBC Trans-ketolase activity. Which of the following vitamin deficiency is likely to be seen in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Biotin"
      },
      {
        "id": 2,
        "text": "Thiamine"
      },
      {
        "id": 3,
        "text": "Pyridoxine"
      },
      {
        "id": 4,
        "text": "Riboflavin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical vignette in a child is suggestive of&nbsp;<strong>Wet Beri-beri.</strong>&nbsp;The vitamin deficiency associated with this condition is&nbsp;<strong>thiamine (Vitamin B1).</strong></p>\n<p>Wet beriberi (cardiac) is associated with Tachycardia, cardiomegaly, cardiac failure, edema. It is commonly seen in the&nbsp;<strong>refugee camps</strong>&nbsp;where people consume&nbsp;<strong>polished rice</strong>-based monotonous diets. Diagnosis of thiamine deficiency can be established by&nbsp;<strong>erythrocyte transketolase</strong>&nbsp;activity assessment.</p>\n<p>Dry beri-beri is associated with neurological deficits such as peripheral neuropathy, optic atrophy, ataxia, and irritability.</p>\n<p>Thiamine deficiency can also be named based on the pattern of dietary deficiency seen. These would include,&nbsp;<strong>oriental beri-beri</strong>&nbsp;(diet predominantly including polished rice) and&nbsp;<strong>occidental Beri-beri</strong>&nbsp;(a diet rich in refined flours and food fads). The latter form is commonly seen in alcoholics.</p>\n<p>Complications include&nbsp;<strong>lactic acidosis</strong>&nbsp;and Wernicke encephalopathy in adults.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about vitamin K?",
    "choices": [
      {
        "id": 1,
        "text": "Deficiency of vitamin K leads to hypercoagulability."
      },
      {
        "id": 2,
        "text": "It is a water soluble vitamin."
      },
      {
        "id": 3,
        "text": "Prolonged use of antibiotics leads to vitamin K deficiency."
      },
      {
        "id": 4,
        "text": "Menaquinone is the dietary source of vitamin K found in green vegetables."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Prolonged use of antibiotics</strong> <strong>leads to vitamin K deficiency.</strong>&nbsp;</p>\n<p>Prolonged use of antibiotics leads to loss of normal bowel flora that synthesizes <strong>menaquinones</strong> (vitamin K2), a vitamer of vitamin K, thus leading to vitamin K deficiency.</p>\n<p>Vitamin K is a fat-soluble vitamin and its deficiency leads to bleeding disorders.</p>\n<p><strong>Three compounds have the biological activity of vitamin K:</strong></p>\n<ul>\n<li><strong>Phylloquinone (Vitamin K1)</strong> is the normal dietary source of Vitamin K that is found in green vegetables.</li>\n<li><strong>Menaquinones</strong> <strong>(Vitamin K2)</strong> are synthesized by the intestinal bacteria.</li>\n<li><strong>Menadione (Vitamin K3)</strong> is a synthetic compound which is metabolized to phylloquinone.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A baby was brought to the clinic with symptoms of diarrhea, failure to thrive, and hair loss. On examination, the following findings are noted. Identify the mineral deficiency leading to this condition.",
    "choices": [
      {
        "id": 1,
        "text": "Niacin deficiency"
      },
      {
        "id": 2,
        "text": "Zinc deficiency"
      },
      {
        "id": 3,
        "text": "Riboflavin deficiency"
      },
      {
        "id": 4,
        "text": "Selenium deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features shown in the images are <strong>periorificial dermatitis</strong> and<strong> alopecia. </strong>These features\u00a0in a young child are suggestive of<strong> acrodermatitis enteropathica</strong>, which is\u00a0seen with <strong>zinc deficiency.</strong></p>\n<p><strong>Acrodermatitis enteropathica</strong>\u00a0is a condition<strong>\u00a0</strong>that occurs due to zinc deficiency and presents after weaning.\u00a0Clinical features include failure to thrive, anorexia, <strong>diarrhea,</strong> recurrent infections, <strong>alopecia,</strong> male hypogonadism, and neurological manifestations like <strong>tremor,</strong> nystagmus, photophobia, hypogeusia, irritability, etc.</p>\n<p>Skin manifestations such as <strong>vesiculobullous dermatitis</strong> on the extremities and periorificial (perianal, perigenital, perioral) regions are commonly seen as shown below. Affected infants require long-term supplementation with zinc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8e6e6ce577684f71bf478130514e9a33.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21f51e566c0f4c5bacbf305c8b2cbb66x1280x1610.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/855977aa7f1d4fe6929c5112960e7ae5x720x521.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e24a8b1d3ff4634b257c3331b333f33x720x678.JPEG"
    ]
  },
  {
    "text": "Which among the following helps in the maturation of collagen?",
    "choices": [
      {
        "id": 1,
        "text": "Proline"
      },
      {
        "id": 2,
        "text": "Copper and zinc"
      },
      {
        "id": 3,
        "text": "Ascorbic acid"
      },
      {
        "id": 4,
        "text": "Phenylalanine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ascorbic acid/Vitamin C</strong> helps in the maturation of collagen.\u00a0</p>\n<p>Collagen is synthesized intracellularly in <strong>fibroblasts.</strong> Each polypeptide chain of collagen has about 1000 amino acid residues composed of <strong>Glycine-X-Y</strong> repeats, where X and Y are <strong>proline</strong> and<strong> hydroxyproline</strong> predominantly.</p>\n<p><strong>Hydroxylation</strong> of <strong>proline and lysine</strong> residues takes place intracellularly as a part of <strong>post-translational modification</strong> with the help of <strong>prolyl</strong> <strong>hydroxylase</strong> and <strong>lysyl hydroxylase</strong>. These enzymes require iron in a reduced state in its active site. <strong>Vitamin C/ascorbic</strong> acid keeps iron in a reduced state in these enzymes and thus helps in the maturation of collagen. Deficiency of vitamin C leads to<strong> scurvy</strong> which is characterized by bleeding tendencies, anemia, and skeletal abnormalities due to defective collagen in the connective tissue.</p>\n<p>Steps of post-translational modification of collagen includes</p>\n<ul>\n<li><strong>Hydroxylation</strong> of proline and lysine residues</li>\n<li><strong>Glycosylation</strong> of hydroxylysine residues</li>\n<li>Formation of intrachain and interchain disulfide bonds</li>\n<li><strong>Triple helix</strong> formation</li>\n<li><strong>Cleavage</strong> of\u00a025\u201335 kDa portions at both carboxy and amino terminal end</li>\n<li><strong>Quartered staggered</strong> arrangement</li>\n<li><strong>Oxidative deamination</strong> of lysine and hydroxylysine residues</li>\n<li>Formation of intrachain and interchain crosslinks</li>\n</ul>\n<p>Other options:</p>\n<p>Option B:<strong> Lysyl oxidase</strong> is a <strong>copper-containing enzyme</strong> that helps in covalent crosslinking collagen fibers. Deficiency of copper results in defective function of lysyl oxidase, and reduced cross-linkage of collagen leading to a condition called <strong>Menke's disease</strong>. Zinc has no role in collagen maturation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common cause of preventable childhood blindness?",
    "choices": [
      {
        "id": 1,
        "text": "Refractive error"
      },
      {
        "id": 2,
        "text": "Vitamin A deficiency"
      },
      {
        "id": 3,
        "text": "Retinopathy of prematurity"
      },
      {
        "id": 4,
        "text": "Injuries"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common cause of <strong>preventable childhood blindness</strong> is <strong>vitamin A</strong> deficiency.</p>\n<p>The most common cause of blindness (including adults), is however, <strong>cataract.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The skin condition shown in the image is treated by supplementation of:\na. Safflower oil.\nb. Vitamin K.\nc. Vitamin B complex.",
    "choices": [
      {
        "id": 1,
        "text": "Only a"
      },
      {
        "id": 2,
        "text": "a, b"
      },
      {
        "id": 3,
        "text": "a, b, c"
      },
      {
        "id": 4,
        "text": "a, c"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above skin condition is known as <strong>Phrynoderma</strong>. It is treated by supplementation of <strong>Safflower oil</strong> and <strong>Vitamin B complex</strong>.</p>\n<p>The deficiency of essential fatty acid is associated with rough and dry skin, known as Phrynoderma or toad skin. It is a type of <strong>follicular</strong> <strong>hyperkeratosis</strong>.It is caused by generalised malnutrition and Vit. E,B,A and C and is seen commonly in African and Asian communities. Riboflavin is required for pyridoxine metabolism, which, in turn, is required for tryptophan-niacin metabolism, and niacin is necessary for fatty acid synthesis. This explains the combination therapy of EFA and Vitamin B complex.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/14e44bd69649461a83f92d53610a00ec.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old baby was examined in a village camp. The child had a poor appetite and visible peripheral edema. The hair was sparse and easily pluckable. The skin showed peeling as shown below.  What could be the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Marasmus"
      },
      {
        "id": 2,
        "text": "Pellagra"
      },
      {
        "id": 3,
        "text": "Vitamin A deficiency"
      },
      {
        "id": 4,
        "text": "Kwashiorkor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above clinical vignette of a child with <strong>poor appetite</strong>, <strong>sparse easily pluckable hair,</strong> and the image showing <strong>flaky paint dermatosis</strong> are suggestive of <strong>Kwashiorkar.</strong></p>\n<p>Kwashiorkor results due to severe <strong>protein</strong> and essential amino acid deprivation along with <strong>adequate calorie intake</strong>. It is particularly seen in children at the time of weaning, to a diet consisting majorly of corn, rice, or beans.\u00a0</p>\n<p>The clinical features include a classic cutaneous finding of diffuse reddish-brown scaling dermatosis that has been likened to cracked skin,<strong> peeling paint</strong>, enamel paint, <strong>flaky paint</strong>, or crazy paving. This is due to the typical scaling and irregular fissuring.\u00a0Nails are thin and soft. Hairs are thin and sparse and display a <strong>flag sign</strong> consisting of alternative light and dark bands of hair. The consistent feature is\u00a0<strong>peripheral edema</strong> due to the associated <strong>hypoproteinaemia</strong>. Edema of the face results in <strong>moon facies</strong>.\u00a0<strong>Abdominal distention</strong> (pot belly)\u00a0is a feature and is due to hepatomegaly from increased fatty deposition due to a lack of available apolipoproteins.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Marasmus</strong> results due to global <strong>macro-nutrient deficiency</strong>, which leads to <strong>growth retardation</strong> with\u00a0<strong>&lt;60%</strong> of<strong> ideal body weight</strong>.<strong>\u00a0</strong>Loss of subcutaneous tissue, growth stunting, dyspigmentation, and desquamative changes are seen in these patients. Marasmus patients <strong>do not</strong> <strong>demonstrate hypoproteinaemia or edema</strong>. There is distension of the abdomen due to hypotonia of the abdominal musculature. These patients typically have <strong>wrinkled, loose, </strong>and <strong>dry skin</strong>. The hair and nails often grow slowly and may show brittleness. The hair falls out easily and often shows features of alopecia.</p>\n<p>Below is the image of a child with marasmus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/96e1202eca294f378a1480be47feea18.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b09297ea159a40e38d22343d30966901x241x354.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5e09dff74d1d4b4398e83562a6b1f38fx412x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e0c2428be3e54ae8ad914fcd9f045d4bx283x169.PNG"
    ]
  },
  {
    "text": "Which of the following mineral is absorbed by the following mechanism?",
    "choices": [
      {
        "id": 1,
        "text": "Copper"
      },
      {
        "id": 2,
        "text": "Iron"
      },
      {
        "id": 3,
        "text": "Calcium"
      },
      {
        "id": 4,
        "text": "Zinc"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows the absorption of <strong>iron</strong>&nbsp;from a duodenal enterocyte by <strong>m</strong><strong>ucosal block theory.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5e90e5a060834a30ad64a74a08f3040d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/434650ea843645ec80e4a24389d0209dx1280x1210.JPEG"
    ]
  },
  {
    "text": "The co-factor for glutathione peroxidase is __",
    "choices": [
      {
        "id": 1,
        "text": "Manganese"
      },
      {
        "id": 2,
        "text": "Selenium"
      },
      {
        "id": 3,
        "text": "Copper"
      },
      {
        "id": 4,
        "text": "Magnesium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Selenium</strong> act as a<strong> cofactor </strong>for<strong> glutathione peroxidase.</strong></p>\n<p>Glutathione peroxidases:</p>\n<ul>\n<li>Also known as<strong> selenoproteins</strong></li>\n<li>Selenium-containing glutathione peroxidases help<strong> transform hydrogen peroxide</strong> into<strong> harmless water</strong> (antioxidant action)</li>\n<li><strong>Selenium deficiency</strong> results in Impaired function of glutathione peroxidases. As a result, destructive hydrogen peroxide breaks down into even more dangerous hydroxyl radicals which <strong>damage cell membranes </strong>and <strong>cell DNA</strong> leading to serious disease</li>\n</ul>\n<p><strong>Selenium:</strong></p>\n<p>Selenium is an important trace element that is a&nbsp;<strong>part&nbsp;</strong>of the<strong>&nbsp;21st amino acid selenocysteine</strong>.</p>\n<p>There are many selenium-containing enzymes such as:</p>\n<ul>\n<li>Glutathione peroxidase</li>\n<li>De-iodinase</li>\n<li>Thioredoxin reductase</li>\n</ul>\n<p>Selenium is also an&nbsp;<strong>intracellular antioxidant</strong>&nbsp;that complements the role of Vitamin E. Dietary sources of selenium include seafood, muscle meat, and&nbsp;some cereals.</p>\n<p><strong>Selenium deficiency</strong>&nbsp;is implicated in&nbsp;<strong>keshan disease&nbsp;</strong>(Endemic&nbsp;cardiomyopathy) and&nbsp;<strong>Kashin-Beck disease</strong>&nbsp;(Chronic, endemic&nbsp;<strong>osteoarthropathy</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "RDA of vitamin A in a 6 year old child is _______",
    "choices": [
      {
        "id": 1,
        "text": "730mcg"
      },
      {
        "id": 2,
        "text": "800mcg"
      },
      {
        "id": 3,
        "text": "400mcg"
      },
      {
        "id": 4,
        "text": "950mcg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>RDA</strong> of vitamin A in a 6 year old child is &nbsp;<strong>400mcg/day</strong>.</p>\n<p><strong>Sources of Vitamin A:</strong></p>\n<ul>\n<li>Animal source: liver, <strong>egg, butter, milk, fish, meat</strong></li>\n<li>Richest plant source: <strong>Carrot</strong></li>\n<li>Richest source: <strong>halibut liver oil </strong>(fish oil)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "FMN and FAD are coenzymes derived from ______",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Vitamin B1"
      },
      {
        "id": 3,
        "text": "Riboflavin"
      },
      {
        "id": 4,
        "text": "Vitamin B6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Coenzymes flavin mononucleotide <strong>(FMN) </strong>and flavin adenine dinucleotide <strong>(FAD)</strong> are&nbsp;derived from <strong>Riboflavin (vitamin B2).</strong></p>\n<p>FMN-coenzyme role:</p>\n<ul>\n<li><strong>Complex I in electron transport chain (ETC)</strong>: NADH-Q oxidoreductase, NADH dehydrogenase</li>\n<li>L-amino acid oxidase</li>\n</ul>\n<p>FAD-coenzyme role:</p>\n<ul>\n<li>TCA cycle: Succinate dehydrogenase <strong>(complex II in ETC)</strong></li>\n<li>Fatty acid oxidation: Acyl CoA dehydrogenase</li>\n<li>Amino acid metabolism: D-amino acid oxidase</li>\n<li>Xanthine oxidase</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 22  (Vitamins And Minerals)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>