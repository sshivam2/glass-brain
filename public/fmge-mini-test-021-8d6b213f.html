<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 021 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The marrow cavity in the shaft of the fetal long bone mainly contains _____.",
    "choices": [
      {
        "id": 1,
        "text": "Red marrow"
      },
      {
        "id": 2,
        "text": "Yellow marrow"
      },
      {
        "id": 3,
        "text": "Gelatinous marrow"
      },
      {
        "id": 4,
        "text": "White marrow"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The marrow cavity in the shaft of the <strong>fetal long bone</strong> mainly contains <strong>red marrow</strong>.</p>\n<p>Bone marrow<strong>&nbsp;</strong>is a soft, pulpy tissue found in the&nbsp;marrow cavity and the spaces of spongy bone.<strong>&nbsp;</strong>It is mainly of two types:</p>\n<ol>\n<li><strong>Yellow marrow </strong>- made up predominantly of <strong>fat</strong> <strong>cells</strong> and may contain few islands of hemopoietic tissue. It is seen in the shaft of the long bones of an adult.</li>\n<li><strong>Red marrow </strong>-<strong>&nbsp;</strong>It is made up predominantly of <strong>hemopoietic tissue</strong>.<strong>&nbsp;</strong>It is seen&nbsp;throughout the <strong>skeleton of the fetus.&nbsp;</strong>It persists till about <strong>five years</strong> of age after which, the red marrow in the shaft of long bones is gradually replaced by the yellow marrow. By around&nbsp;20-25 years of age, the sites where the<strong> red marrow </strong>persists include:\n<ul>\n<li>Vertebrae</li>\n<li>Sternum</li>\n<li>Ribs</li>\n<li>Clavicles</li>\n<li>Scapulae</li>\n<li>Pelvis</li>\n<li>Cranial bones</li>\n<li>Proximal ends of femur and humerus</li>\n</ul>\n</li>\n</ol>\n<p>The term <strong>gelatinous marrow</strong>&nbsp;refers to the <strong>degenerated bone marrow</strong> in the cranial bones, seen in old age. There is no white marrow.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e382efcb403a4bc8a5a95b2cb7bd8f27x1280x3673.JPEG"
    ]
  },
  {
    "text": "A 21-year-old female is found in a semiconscious state. On initial evaluation, her CBG is 23mg/dL. Her parents tell that the patient is an athlete and was trying to gain weight recently. An evaluation of which of the following will help in establishing a diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pancreatic polypeptide"
      },
      {
        "id": 2,
        "text": "Glucagon"
      },
      {
        "id": 3,
        "text": "Somatostain"
      },
      {
        "id": 4,
        "text": "C peptide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical vignette strongly suggests hypoglycemia due to&nbsp;surreptitious use of <strong>exogenous insulin</strong>, characterized by a <strong>low C-peptide level.</strong></p>\n<p><strong>Insulin abuse</strong> is a method for <strong>increasing muscle bulk</strong> and <strong>performance enhancement</strong> in athletes, although less common than anabolic steroid abuse. <strong>Exogenous insulin</strong> does not contain C-peptide. Therefore blood level of <strong>C-peptide</strong> will be<strong> low</strong> in such patients. On the other hand, <strong>endogenous</strong> production of insulin will be characterized by <strong>high C-peptide</strong> level in blood.</p>\n<div class=\"page\" title=\"Page 939\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/519d6fddcd374638905cd2d0f3dddceax968x693.PNG"
    ]
  },
  {
    "text": "Which of the following vitamins is also considered a hormone?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin E"
      },
      {
        "id": 2,
        "text": "Vitamin C"
      },
      {
        "id": 3,
        "text": "Vitamin D"
      },
      {
        "id": 4,
        "text": "Vitamin K"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Vitamin D&nbsp;</strong>is also considered a hormone.</p>\n<p>Vitamin D encompasses a group of sterols, which have a <strong>hormone-like function.</strong></p>\n<p><strong>Functions</strong> of vitamin D:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Regulation</strong> of <strong>calcium</strong> and <strong>phosphate</strong>: It increased blood calcium and phosphate level</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Immunomodulatory</strong> action: Vitamin D increases the ability of the innate immune system to fight against pathogens</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Antiproliferative</strong>: Because of the antiproliferative function, deficiency (&lt;20ng/ml) is associated with an increased incidence of colon cancer, breast cancer, prostate cancer</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Bone</strong> <strong>development</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pathologist is examining a liver biopsy specimen from a patient with liver disease. The following finding is noted. Which of the following is the most likely cause of this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Atherosclerosis"
      },
      {
        "id": 2,
        "text": "Hepatitis B"
      },
      {
        "id": 3,
        "text": "Alcoholism"
      },
      {
        "id": 4,
        "text": "Hemolysis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given histopathological image shows hepatic <strong>macro-vesicular steatosis</strong>&nbsp;along with <strong>intraparenchymal cholestasis</strong>, which is suggestive of <strong>fatty</strong> <strong>liver</strong>. This condition can occur due to&nbsp;<strong>alcoholism</strong>.</p>\n<p>The lipid accumulates in the hepatocytes as <strong>vacuoles</strong>. These vacuoles have a <strong>clear appearance</strong> on hematoxylin and eosin staining.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ac9ad6aba7b141be903544f82ed80c7d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/813ac7433a95416f8c4a6fe0968ae57cx1280x1179.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1738f18e668b41cab9b49af7768a9b11x1280x1179.JPEG"
    ]
  },
  {
    "text": "A 52-year-old requires a kidney transplant due to chronic kidney disease. Her 2 children match her HLA type 4/6 and 5/6 respectively. On what chromosome is this match protein sequence located?",
    "choices": [
      {
        "id": 1,
        "text": "Chromosome 5"
      },
      {
        "id": 2,
        "text": "Chromosome 6"
      },
      {
        "id": 3,
        "text": "Chromosome 7"
      },
      {
        "id": 4,
        "text": "Chromosome 8"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>HLA complex </strong>of genes is located on the<strong> short arm of chromosome 6 </strong>(chromosome 6p21).</p>\n<p>The human leukocyte antigen (HLA) system or complex is a gene complex encoding the major histocompatibility complex (MHC) proteins.&nbsp;It consists of 3 separate clusters of genes:</p>\n<ul>\n<li><strong>Class I</strong>&ndash; A, B and C loci&nbsp;</li>\n<li><strong>Class II</strong>&ndash; DR, DQ and DP loci</li>\n<li><strong>Class III</strong>&ndash; Complement C2 and C4 of classical pathway and properdin factor B of the alternate pathway, heat shock proteins(HSP), TNF &alpha; and &beta;.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man who collapsed at a concert was suspected to have bacterial meningitis. The other attendees of the concert were administered ciprofloxacin by the medical staff on duty. What is this kind of antimicrobial therapy called?",
    "choices": [
      {
        "id": 1,
        "text": "Preemptive therapy"
      },
      {
        "id": 2,
        "text": "Prophylactic therapy"
      },
      {
        "id": 3,
        "text": "Empirical therapy"
      },
      {
        "id": 4,
        "text": "Suppressive therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: left;\">The <strong>antimicrobial</strong> treatment <strong>initiated</strong> in a patient who is <strong>not</strong> yet <strong>infected</strong> is called&nbsp;<strong>prophylactic</strong> therapy. The goal is to <strong>prevent infection</strong> in some patients and to <strong>prevent dangerous manifestations</strong> of infections in other patients.&nbsp;</p>\n<div class=\"page\" style=\"text-align: left;\" title=\"Page 968\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option A: <strong>Preemptive</strong> therapy is therapy in an <strong>asymptomatic</strong> individual with evidence of infection (<strong>high-risk</strong>).</p>\n</div>\n</div>\n</div>\n</div>\n<p style=\"text-align: left;\">Option C: <strong>Empirical</strong> therapy is <strong>broad-spectrum</strong> therapy in a patient with symptoms of infection but <strong>no microbiological confirmation</strong> of the causative agent.&nbsp;</p>\n<p style=\"text-align: left;\">Option D: <strong>Suppressive</strong> therapy is given to patients when&nbsp;the <strong>infection</strong> is <strong>controlled</strong> but <strong>not completely eradicated</strong> by the initial round of antimicrobial treatment. This is usually indicated for immunosuppressed patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an early sign of death?",
    "choices": [
      {
        "id": 1,
        "text": "Cessation of respiration"
      },
      {
        "id": 2,
        "text": "Adipocere"
      },
      {
        "id": 3,
        "text": "Rigor mortis"
      },
      {
        "id": 4,
        "text": "Cessation of circulation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rigor mortis</strong>&nbsp;is an <strong>early sign</strong> of <strong>death.</strong>&nbsp;</p>\n<p><strong>Immediate</strong> signs of death (somatic death):</p>\n<ul>\n<li>Insensibility and loss of voluntary power</li>\n<li>Cessation of respiration</li>\n<li>Cessation of circulation</li>\n</ul>\n<p><strong>Early</strong> signs of death (cellular death):</p>\n<ul>\n<li>Pallor and loss of elasticity of the skin</li>\n<li>Eye changes</li>\n<li>Primary flaccidity of muscles</li>\n<li>Cooling of the body</li>\n<li>Postmortem lividity/suggilation</li>\n<li>Rigor mortis</li>\n</ul>\n<p><strong>Late</strong> signs of death:</p>\n<ul>\n<li>Putrefaction</li>\n<li>Adipocere</li>\n<li>Mummification</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not included in the signs and symptoms of the condition represented below?",
    "choices": [
      {
        "id": 1,
        "text": "Mouth breathing"
      },
      {
        "id": 2,
        "text": "Failure to thrive"
      },
      {
        "id": 3,
        "text": "Sleep apnoea"
      },
      {
        "id": 4,
        "text": "Prominent nasolabial fold"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The X-ray reveals enlarged adenoids, indicating a diagnosis of <strong>adenoid hypertrophy.</strong> Patients present with a <strong>flattened or absent nasolabial fold, </strong>not a prominent one.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aaa219d3286e4fe289720e9d682bf224.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/76d9a8e4d298497dacc46010d9e7769cx498x429.JPEG",
      "https://cdn1.dailyrounds.org/uploads/5ff524698c534cee99df0c96654e9743x503x451.PNG"
    ]
  },
  {
    "text": "Which of the following is the most important factor for the development of diabetic retinopathy?",
    "choices": [
      {
        "id": 1,
        "text": "Duration of diabetes"
      },
      {
        "id": 2,
        "text": "Glycemic control"
      },
      {
        "id": 3,
        "text": "Association with hypertension"
      },
      {
        "id": 4,
        "text": "Age of the patient"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>most important factor</strong> for the development of diabetic retinopathy is the <strong>duration</strong> of <strong>diabetes</strong>.</p>\n<p>The <strong>2<sup>nd</sup></strong> most important factor for the development of retinopathy is <strong>glycemic control</strong>.</p>\n<p>Diabetic retinopathy is <strong>more common</strong> in <strong>type</strong> <strong>1 diabetes mellitus</strong>.&nbsp;</p>\n<p>First fundus examination for<strong> type 1 diabetes is done after 5 years and type 2, at the time of diagnosis</strong>. The frequency of follow-up for types 1 and 2 is every year and diabetes in pregnancy is every 3 months.</p>\n<p>The <strong>earliest feature</strong> of diabetic retinopathy is <strong>microaneurysms</strong>, which are present in the inner nuclear layer of the retina.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most logical sequence?",
    "choices": [
      {
        "id": 1,
        "text": "Disease \u2192 Impairment \u2192 Disability \u2192 Handicap"
      },
      {
        "id": 2,
        "text": "Impairment \u2192 Disease \u2192 Handicap \u2192 Disability"
      },
      {
        "id": 3,
        "text": "Disability \u2192 Disease \u2192Impairment \u2192Handicap"
      },
      {
        "id": 4,
        "text": "Disease\u2192 Disability\u2192 Impairment \u2192Handicap"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Disease &rarr; Impairment &rarr; Disability &rarr; Handicap</strong> is the most logical sequence among the given options.</p>\n<p>Disease is a state of physiological/psychological <strong>dysfunction</strong>.</p>\n<p>Impairment is any <strong>loss</strong> or abnormality in normal<strong> structure</strong> or <strong>function</strong>.</p>\n<p>Disability is the<strong> inability&nbsp;</strong>to carry out <strong>normal actions</strong> due to impairment.</p>\n<p>Handicap&nbsp;is the disadvantage due to disability that <strong>limits fulfilment of a role</strong> that is normal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d37d6e2ed3fe4a9ea79c3defef63c7bex1280x1576.JPEG"
    ]
  },
  {
    "text": "What is the dosage of vitamin A given for a 2-year-old baby with keratomalacia?",
    "choices": [
      {
        "id": 1,
        "text": "2,00,000 IU immediately, followed by same dose after 24 hours"
      },
      {
        "id": 2,
        "text": "1,00,000 IU immediately, followed by the same dose after 1 week"
      },
      {
        "id": 3,
        "text": "1,00,000 IU immediately, followed by the same dose after 24 hours and after a week"
      },
      {
        "id": 4,
        "text": "2,00,000 IU immediately, followed by the same dose 24 hours later and after 2 weeks"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The recommended vitamin A dosage for a <strong>2-year-old</strong> child with keratomalacia is<strong> 2,00,000 IU</strong>&nbsp;given <strong>immediately</strong>, followed by the same age-specific dose<strong> 24 hours</strong> later and after<strong> 2 weeks.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following compounds is predominantly responsible for the disinfecting property of bleaching powder?",
    "choices": [
      {
        "id": 1,
        "text": "Hypochlorite ion"
      },
      {
        "id": 2,
        "text": "Hydrochloric acid"
      },
      {
        "id": 3,
        "text": "Hypochlorous acid"
      },
      {
        "id": 4,
        "text": "Chloride ion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The disinfectant property of bleaching powder is predominantly due to the action of <strong>hypochlorous acid.</strong></p>\n<p>Bleaching powder, also known as <strong>chlorinated lime (CaOCl2)</strong>, has <strong>33 per cent of chlorine</strong> in it. When chlorine is added to water, there is the formation of hydrochloric and hypochlorous acids. The hydrochloric acid is neutralized by the alkalinity of the water. The hypochlorous acid ionizes to form hydrogen ions and hypochlorite ions, as follows:</p>\n<p>H<sub>2</sub>O + Cl<sub>2</sub>&nbsp;&rarr; HCl + HOCl</p>\n<p><strong>HOCl &rarr; H + OCl</strong></p>\n<p>The disinfecting action of chlorine is mainly due to <strong>hypochlorous acid.</strong>&nbsp;It is <strong>70-80 times</strong> more effective than&nbsp;Hypochlorite ion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old woman presented with wheezing after taking aspirin for a headache. Which of the following is true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Raised serum IgE levels"
      },
      {
        "id": 2,
        "text": "Positive skin test for inhaled allergens"
      },
      {
        "id": 3,
        "text": "Associated with nasal polyps"
      },
      {
        "id": 4,
        "text": "A type of extrinsic asthma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of<strong> aspirin-sensitivity asthma</strong>. It&nbsp;is closely associated with <strong>nasal polyps</strong>.</p>\n<p>Aspirin-exacerbated respiratory disease (AERD), also known as <strong>Samter&rsquo;s triad</strong> or<strong> aspirin-sensitive asthma</strong>. It is a chronic medical condition that consists of:</p>\n<ul>\n<li><strong> Intrinsic asthma</strong></li>\n<li>Recurrent sinus disease with nasal polyps</li>\n<li>Sensitivity to aspirin and other NSAIDs</li>\n</ul>\n<p>It has <strong>normal serum IgE</strong> levels&nbsp;and a <strong>negative skin</strong>&nbsp;<strong>test</strong> for inhaled allergens.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 52-year-old man has come to the emergency complaining of a burning type of chest pain. Comment on his ECG recording shown below.",
    "choices": [
      {
        "id": 1,
        "text": "Sinus bradycardia"
      },
      {
        "id": 2,
        "text": "Sinus tachycardia"
      },
      {
        "id": 3,
        "text": "Normal sinus rhythm"
      },
      {
        "id": 4,
        "text": "Irregular rhythm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above ECG strip shows&nbsp;<strong>normal sinus rhythm</strong>.</p>\n<p>The features in this ECG that suggest this diagnosis are as follows:</p>\n<ul>\n<li>The <strong>QRS complexes are narrow</strong> (&lt;120 ms or 3 small squares) which implies that the impulse is supraventricular and is conducted via the normal conduction pathway.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c4a89a25231b499ab4a15ac6400612a0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/251a17748fb242b0b115bb0876e4de25x537x130.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3db622654d7465093f09972c262c87dx800x224.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc5516f5be574d34a4d83ca6643b63cax800x224.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4baaf24d405f481b9956ca56d1ac06a7x800x224.JPEG"
    ]
  },
  {
    "text": "In patients with sarcoidosis, which of the following is the most commonly affected organ?",
    "choices": [
      {
        "id": 1,
        "text": "Lungs"
      },
      {
        "id": 2,
        "text": "Eyes"
      },
      {
        "id": 3,
        "text": "Liver"
      },
      {
        "id": 4,
        "text": "Skin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Sarcoidosis most commonly affects the<strong>&nbsp;lungs</strong>.</p>\n<p>Sarcoidosis is a <strong>multisystem inflammatory </strong>disease characterized by <strong>non-caseating granulomas</strong>. It commonly involves the lungs, skin, liver, and eyes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You observed the following finding in a patient in the OPD. Which among the following conditions is least likely to cause this finding?",
    "choices": [
      {
        "id": 1,
        "text": "Endocarditis"
      },
      {
        "id": 2,
        "text": "Bronchiectasis"
      },
      {
        "id": 3,
        "text": "Tricuspid atresia"
      },
      {
        "id": 4,
        "text": "Aortic dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows&nbsp;<strong>digital clubbing.</strong> Among the given options, aortic dissection is least likely to cause digital clubbing.</p>\n<p><strong>Clubbing</strong> is a&nbsp;selective <strong>bulbous enlargement</strong> of the distal segments of the <strong>fingers</strong> and <strong>toes</strong> due to the proliferation of connective tissue, particularly on the dorsal surface.</p>\n<p>Causes of clubbing are:</p>\n<ul>\n<li aria-level=\"1\"><strong>Pulmonary</strong></li>\n<ul>\n<li aria-level=\"2\">Bronchogenic carcinoma</li>\n<li aria-level=\"2\">Lung abscess, empyema, bronchiectasis</li>\n<li aria-level=\"2\">Chronic interstitial pneumonitis</li>\n<li aria-level=\"2\">Cystic fibrosis</li>\n<li aria-level=\"2\">Sarcoidosis</li>\n<li aria-level=\"2\">Diffuse pulmonary disease - pulmonary fibrosis, asbestosis</li>\n</ul>\n<li aria-level=\"1\"><strong>GI</strong></li>\n<ul>\n<li aria-level=\"2\">Inflammatory bowel disease (Ulcerative colitis, Crohn's disease)</li>\n<li aria-level=\"2\">Sprue, celiac disease</li>\n<li aria-level=\"2\">Neoplasms - esophagus, liver, bowel</li>\n<li aria-level=\"2\">Cirrhosis - juvenile and biliary</li>\n<li aria-level=\"2\">Chronic active hepatitis</li>\n</ul>\n<li aria-level=\"1\"><strong>Cardiovascular</strong></li>\n<ul>\n<li aria-level=\"2\">Cyanotic congenital heart disease</li>\n<li aria-level=\"2\">Subacute bacterial endocarditis</li>\n<li aria-level=\"2\">Aortic aneurysm</li>\n<li aria-level=\"2\">Arteriovenous fistula</li>\n<li aria-level=\"2\">Patent Ductus arteriosus</li>\n<li aria-level=\"2\">Atrial myxoma</li>\n</ul>\n<li aria-level=\"1\"><strong>Endocrine</strong></li>\n<ul>\n<li aria-level=\"2\">Hyperthyroidism (Grave&rsquo;s disease)</li>\n<li aria-level=\"2\">Thyroid acropachy</li>\n</ul>\n<li aria-level=\"1\"><strong>CNS</strong></li>\n<ul>\n<li aria-level=\"2\">Hemiplegia (unilateral clubbing)</li>\n</ul>\n<li aria-level=\"2\"><strong>Skin disease</strong>\n<ul>\n<li aria-level=\"2\">Palmoplantar keratoderma</li>\n<li aria-level=\"2\">Fischer-Volavsek syndrome.</li>\n</ul>\n</li>\n<li aria-level=\"2\"><strong>Malignancies</strong>\n<ul>\n<li aria-level=\"2\">Thyroid cancer</li>\n<li aria-level=\"2\">Thymus cancer</li>\n<li aria-level=\"2\">Hodgkin disease</li>\n<li aria-level=\"2\">Disseminated chronic myeloid leukemia.</li>\n</ul>\n</li>\n</ul>\n<p>Note: Chronic obstructive pulmonary disease (COPD) does not cause clubbing. If clubbing is present in a patient with COPD, underlying lung cancer and bronchiectasis must be ruled out.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ad6e847f40d9439796c82fcd5b40ae3f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An infant delivered at full-term by normal vaginal delivery, presented with respiratory distress immediately after birth. Chest X-ray showed the following picture. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline membrane disease"
      },
      {
        "id": 2,
        "text": "Meconium aspiration syndrome"
      },
      {
        "id": 3,
        "text": "Congenital diaphragmatic hernia"
      },
      {
        "id": 4,
        "text": "Transient tachypnea of the newborn"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above X-ray chest shows <strong>intra-thoracic bowel shadows</strong> along with <strong>mediastinal shift</strong> suggestive of <strong>congenital diaphragmatic hernia</strong>.</p>\n<p>The common clinical presentation is as follows:</p>\n<ul>\n<li>Respiratory distress</li>\n<li>Dextrocardia</li>\n<li>Scaphoid abdomen</li>\n</ul>\n<p>Prenatal diagnosis is done by <strong>ultrasonography</strong>.&nbsp;<strong>Lung-to-head ratio</strong> (LHR) is used to assess severity in patients with left-sided CDH. An LHR value of <strong>&lt;1</strong>&nbsp;is associated with a very <strong>poor</strong> prognosis, whereas an LHR <strong>&gt;1.4</strong> predicts a more <strong>favourable</strong> outcome.</p>\n<p>Option A: <strong>Hyaline membrane disease</strong> is a syndrome in premature infants caused by developmental <strong>insufficiency</strong> of pulmonary <strong>surfactant</strong> production and structural immaturity in the lungs.</p>\n<p>Option B: <strong>Meconium aspiration syndrome</strong>&nbsp;is the aspiration of meconium-stained amniotic fluid, which can occur before, during or immediately after birth. Meconium is the first intestinal discharge from newborns, a viscous, dark-green substance composed of intestinal epithelial cells, lanugo, mucus, and intestinal secretions.</p>\n<p>Option D: During normal delivery, the compression of the rib cage while passing through the mother's vaginal canal helps to remove fluid from the lungs. However, newborns who are delivered via <strong>cesarean</strong> birth may have excess fluid in the lungs and therefore be <strong>hypoxic</strong> and develop <strong>transient tachypnea.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/893b34cb69f042bb810b403f5d7d9fd7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The most common salivary gland to develop stones is______.",
    "choices": [
      {
        "id": 1,
        "text": "Parotid"
      },
      {
        "id": 2,
        "text": "Minor salivary glands"
      },
      {
        "id": 3,
        "text": "Submandibular"
      },
      {
        "id": 4,
        "text": "Sublingual"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>80% of salivary gland stones occur in the submandibular gland and are mostly radioopaque.</strong></p>\n<p><strong>Sialolithiasis:</strong></p>\n<ul>\n<li>It is less common in the parotid gland (20%) than in the&nbsp;<strong>submandibular gland</strong> (80%), leading to sialadenitis.</li>\n<li><strong>Parotid duct stones</strong> are <strong>usually radiolucent and rarely visible on plain radiography.</strong></li>\n<li>They are frequently located at the confluence of the collecting ducts or located in the distal aspect of the parotid duct adjacent to the parotid papilla.</li>\n<li><strong>Parotid gland sialography</strong> is usually required to identify the stone.</li>\n<li>A stone located in the collecting duct or within the gland may be managed by either <strong>endoscopic retrieval, or lithotripsy; in rare cases, surgical removal via a parotidectomy approach may be required.</strong></li>\n<li>In the case of sialadenitis, treatment is either <strong>marsupialization or total excision of the gland.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the following incision used for appendicectomy.",
    "choices": [
      {
        "id": 1,
        "text": "Gridiron incision"
      },
      {
        "id": 2,
        "text": "Lanz incision"
      },
      {
        "id": 3,
        "text": "Rutherford\u2013Morison incision"
      },
      {
        "id": 4,
        "text": "Rockey\u2013Davis incision"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Lanz incision</strong> is a Transverse or skin crease incision for appendicitis,2 cm below the&nbsp; umbilicus, centred on the midclavicular&ndash;midinguinal line</li>\n<li><strong>Rockey&ndash;Davis incision :</strong>&nbsp;Transverse right lower quadrant incision.</li>\n<li><strong>Gridiron</strong>&nbsp;i<strong>ncision :</strong>&nbsp;Oblique muscle <strong>splitting</strong> incision in the right lower quadrant. Also called as <strong>Mc Burney</strong> incision.</li>\n<li><strong>Rutherford&ndash;Morrison incision :&nbsp;</strong>oblique muscle <strong>cutting</strong> incision with its lower end over McBurney&rsquo;s point and <strong>extending obliquely upwards and laterally</strong> as necessary(Shown on the left side in the image for the sake of clarity)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a78a0432c24e4ce9b94c2ff77b54f972.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7fcf2d22eeb94e2686b24dca63e0784ex1200x1486.JPEG"
    ]
  },
  {
    "text": "The diagnosis based on the gross picture of Gall bladder is",
    "choices": [
      {
        "id": 1,
        "text": "Adenomyomatosis"
      },
      {
        "id": 2,
        "text": "Emphysematous cholecystitis"
      },
      {
        "id": 3,
        "text": "Xanthogranulomatous cholecystitis"
      },
      {
        "id": 4,
        "text": "Gallbladder cholesterolosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The gross specimen of the gallbladder is of <strong>Cholesterolosis Gallbladder</strong> also known as <strong>Strawberry gallbladder.</strong></p>\n<p>It reveals:</p>\n<ul>\n<li><strong>Brick red GB mucosa</strong> with <strong>Bright yellow flecks of lipid.</strong></li>\n<li>Multiple <strong>cholesterol polyps</strong> studding the gallbladder wall.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a4ccf711bd44409f8bbd3a3b338bd93b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "IUCD having the longest life span is _____________",
    "choices": [
      {
        "id": 1,
        "text": "Progestasert"
      },
      {
        "id": 2,
        "text": "CuT 380 A"
      },
      {
        "id": 3,
        "text": "Mirena"
      },
      {
        "id": 4,
        "text": "Nova T"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>CuT 380 A</strong> has&nbsp;the highest life span of 10 years.</p>\n<p id=\"__p6\"><strong>Copper T-380A (Paraguard):</strong> It is named so for the 380 mm<sup>2</sup>&nbsp;of copper surface area.&nbsp;A higher surface area of copper results in higher contraceptive efficacy. Hence the Copper T-380A has been able to achieve superior contraception while maintaining a similar side-effect profile</p>\n<p>The Copper T-380A has a plastic T-shaped core with copper placed around the vertical stem and horizontal arms. A silver core within the copper sheath is included to prevent fragmentation of the copper, extending the life span of the Copper T-380A.</p>\n<p>The frame of the Copper T-380A is connected to a monofilament thread that protrudes through the cervical canal into the upper vagina. This facilitates easy removal and allows the user to ensure that the IUD remains in the uterus.</p>\n<table style=\"height: 149px;\" border=\"1\" width=\"262\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 123px; height: 18px;\"><strong>IUCD</strong></td>\n<td style=\"width: 123px; height: 18px;\"><strong>Life span</strong></td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 123px; height: 18px;\">Cu T 380A</td>\n<td style=\"width: 123px; height: 18px;\">10 years</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 123px; height: 18px;\">CuT 200</td>\n<td style=\"width: 123px; height: 18px;\">3 years</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 123px; height: 36px;\">Multi loaded Cu 250</td>\n<td style=\"width: 123px; height: 36px;\">&nbsp;3 years</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 123px; height: 36px;\">LNG IUS /Mirena</td>\n<td style=\"width: 123px; height: 36px;\">\n<p>5 years</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 123px; height: 18px;\">Progestasert</td>\n<td style=\"width: 123px; height: 18px;\">1 year</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 123px; height: 18px;\">Nova-T</td>\n<td style=\"width: 123px; height: 18px;\">5 years</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The classical triad of amniotic fluid embolism includes all except _____.",
    "choices": [
      {
        "id": 1,
        "text": "Metabolic acidosis"
      },
      {
        "id": 2,
        "text": "Hypotension"
      },
      {
        "id": 3,
        "text": "Hypoxia"
      },
      {
        "id": 4,
        "text": "Severe consumptive coagulopathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The classical triad of amniotic fluid embolism includes the following:</p>\n<ul>\n<li><strong>Hypotension</strong></li>\n<li><strong>Hypoxia</strong></li>\n<li><strong>Severe consumptive coagulopathy&nbsp;</strong></li>\n</ul>\n<p>Predisposing conditions:</p>\n<ul>\n<li>Rapid labor</li>\n<li>Meconium-stained amniotic fluid</li>\n<li>Tears into uterine and other large pelvic veins</li>\n<li>Older maternal age</li>\n<li>Post-term pregnancy</li>\n<li>Labor induction or augmentation</li>\n<li>Eclampsia</li>\n<li>Cesarean/forceps/vacuum delivery</li>\n<li>Placental abruption/placenta&nbsp;previa</li>\n<li>Hydramnios&nbsp;</li>\n</ul>\n<p>Clinical picture:</p>\n<p>Late stage of labor/immediate postpartum: Sudden gasping for air &rarr; Sudden seizures/cardiorespiratory arrest&rarr; massive hemorrhage due to disseminated intravascular coagulation (<strong>DIC</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are monitoring uterine contractions in a primigravida at 38 weeks in labor.  You find that the uterine contractions are uncoordinated and frequency is about 6 contractions in 10 minutes. Which of the following is not true regarding your finding?",
    "choices": [
      {
        "id": 1,
        "text": "Commonly associated with occipito posterior"
      },
      {
        "id": 2,
        "text": "It is common in nulliparous labour"
      },
      {
        "id": 3,
        "text": "Oxytocin administration is beneficial"
      },
      {
        "id": 4,
        "text": "Management includes wait and watch policy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical finding is suggestive of <strong>uterine tachysystole</strong> and <strong>oxytocin administration is not beneficial</strong> in tachysystole (Hypertonic uterine dysfunction.)</p>\n<p><strong>Tachysystole</strong> (Hypertonic uterine dysfunction)</p>\n<ul>\n<li>The uterine contractions are incoordinated and increased in frequency (&gt;5 contractions in 10 minutes) without rest in between and also increase in the baseline tone.</li>\n<li>It is associated with late active phase dysfunction (not latent). i.e. when cervix is almost 7 cm dilated.</li>\n<li>The most common cause is occipito posterior. Hence, wait and watch policy is adopted.</li>\n<li>More common in nulliparous females</li>\n<li>Oxytocin administration leads to hyperstimulation of uterus. Hence not recommended.</li>\n</ul>\n<p><strong>Hypotonic uterine dysfunction:</strong></p>\n<ul>\n<li>The uterine contractions are inadequate.</li>\n<li>It is associated with early active phase.</li>\n<li>More common in nulliparous females.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A premature newborn infant is found to have a systolic murmur with late accentuation over the left infraclavicular area. This is due to the patency of ________",
    "choices": [
      {
        "id": 1,
        "text": "Ductus arteriosus"
      },
      {
        "id": 2,
        "text": "Foramen ovale"
      },
      {
        "id": 3,
        "text": "Ductus venosus"
      },
      {
        "id": 4,
        "text": "Ventricular septal defect"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A<strong> systolic murmur with late accentuation/ continuous murmur</strong> heard in <strong>premature infants</strong> is usually due to<strong> patent ductus arteriosus (PDA).</strong></p>\n<p>In fetal life, the&nbsp;patency of ductus arteriosus is maintained by<strong> low oxygen tension</strong>&nbsp;and endogenously produced <strong>prostaglandins</strong>. In a full-term neonate, oxygen is the most important factor controlling the duct closure. In normal neonates, functionally ductal closure completes by <strong>10-15 hours</strong> after birth. However, in premature infants, patent ductus arteriosus is common especially with the context of respiratory distress syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A ligament is marked in red in the given image below. According to the Denis three-column concept of spinal stability, the given ligament comes under which column?",
    "choices": [
      {
        "id": 1,
        "text": "Middle"
      },
      {
        "id": 2,
        "text": "Posterior"
      },
      {
        "id": 3,
        "text": "Anterior"
      },
      {
        "id": 4,
        "text": "Inferior"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given ligament marked in red is the<strong> posterior longitudinal ligament</strong>. It is a component of the <strong>middle column.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/147018c4669c4ff090b6545de5ab49d6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8f38768e8cef46ce8f2b1e5d1fef09d5x500x485.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f209b460fc0b4e15b3d94de970a31e72x1280x1799.JPEG"
    ]
  },
  {
    "text": "Identify the incorrect statement with respect to the X-ray shown below.",
    "choices": [
      {
        "id": 1,
        "text": "The structure marked number 2 is the right ventricular border"
      },
      {
        "id": 2,
        "text": "The structure marked 1 is the trachea"
      },
      {
        "id": 3,
        "text": "The structure marked 3 is the left ventricular border"
      },
      {
        "id": 4,
        "text": "The structure marked 4 is the aortic arch"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The incorrect statement is option A because the structure marked as <strong>2 is the right atrial border</strong> (not the right ventricular border). The given image is posteroanterior (PA) view of a normal chest x-ray. Structures marked in the X-Ray are as follows:</p>\n<ol>\n<li>Trachea</li>\n<li>Right atrial border</li>\n<li>Left ventricular border</li>\n<li>Aortic arch</li>\n</ol>\n<p>Chest x-rays can be described as <strong>posteroanterior</strong> (PA) or <strong>anteroposterior</strong> (AP) views. This indicates the direction in which the x-ray beam traverses from the patient to the detector.</p>\n<p><strong>PA</strong>&nbsp;<strong>view</strong> means that the x-ray <strong>beam enters from the posterior </strong>aspect of the patient and <strong>exits anteriorly</strong> to reach the film.</p>\n<p><strong> AP view</strong> means that the x-ray<strong> beam enters</strong> the patient from the <strong>anterior</strong> aspect and <strong>exits</strong> from the <strong>posterior</strong> aspect, reaching the film.</p>\n<p>A left lateral decubitus view is one taken with the patient&rsquo;s left side down. </p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9d5d89b7b43147d3bc39a2815f95f0d6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/906a99e5684649ffadf62301c01e7192x1280x1337.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f6006abdd627401bbf1f83f050fbaa41x1024x1024.JPEG"
    ]
  },
  {
    "text": "A patient being treated with Phenelzine came to the emergency department with headache, nausea, vomiting, and diaphoresis following dinner at the restaurant and his  BP is 190/120.  The patient is diagnosed with a cheese reaction. Consumption of any of the following foods could have caused cheese reaction except:",
    "choices": [
      {
        "id": 1,
        "text": "Red wine"
      },
      {
        "id": 2,
        "text": "Aged meat"
      },
      {
        "id": 3,
        "text": "Apple"
      },
      {
        "id": 4,
        "text": "Fish"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cheese reaction</strong> is seen on consumption on<strong> tyramine rich foods</strong> such as cheese, red wine, aged meat, and fish, etc. Apples do not cause a cheese reaction.</p>\n<div class=\"page\" title=\"Page 3174\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1013\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 3174\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Cheese reaction occurs in patients being treated with <strong>MAO inhibitors</strong> who consume tyramine rich foods.&nbsp;Inhibition of the MAO-A isoform prevents the metabolism of dietary tyramine in the gut, thus allowing intact tyramine to enter the circulation. A <strong>hypertensive crisis</strong> occurs as a result of a powerful pressor effect of tyramine.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>\n<p>The hypertensive crisis in cheese rection is <strong>treated with Phentolamine.</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/965a0febcd754927b51082dfb69428f8x638x479.JPEG"
    ]
  },
  {
    "text": "A junior resident, during his first emergency room duty, comes across a patient with difficulty in breathing. Since he was not confident to do endotracheal intubation, He tries to secure the airway with the following device. All of the following are the advantages associated with the use of this device when compared with tracheal intubation except:",
    "choices": [
      {
        "id": 1,
        "text": "Does not require neck mobility"
      },
      {
        "id": 2,
        "text": "Decreased risk of gastrointestinal aspiration"
      },
      {
        "id": 3,
        "text": "Does not require muscle relaxation"
      },
      {
        "id": 4,
        "text": "No risk of endobronchial intubation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This given image is of <strong>Laryngeal Mask Airway (LMA).&nbsp;</strong>The disadvantage associated with its use is that there is an increased risk of gastrointestinal aspiration when compared with tracheal intubation.</p>\n<p>The laryngeal mask airway (LMA) is a <strong>supraglottic airway device</strong> that sits in the hypopharynx and partially protects the <strong>larynx from pharyngeal secretions</strong>, but not gastric regurgitation.</p>\n<p>Advantages and disadvantages of the laryngeal mask airway compared with&nbsp;tracheal intubation are:&nbsp;</p>\n<p><strong>Advantages:</strong></p>\n<ul>\n<li>Easy and rapid</li>\n<li><strong>Less invasive</strong></li>\n<li>Better hemodynamic stability</li>\n<li>Very useful in difficult intubations</li>\n<li>Less tooth and laryngeal trauma</li>\n<li><strong>Does not require muscle relaxation</strong></li>\n<li><strong>Does not require neck mobility&nbsp;</strong></li>\n<li><strong>No risk of esophageal or endobronchial intubation</strong></li>\n</ul>\n<p><strong>Disadvantages:</strong></p>\n<ul>\n<li><strong>Increased risk of gastrointestinal aspiration</strong></li>\n<li>Less safe in prone or jack-knife positions</li>\n<li>Less secure airway</li>\n<li>Greater risk of gas leak and pollution</li>\n<li>Can cause gastric distention</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a0252b04e5fe45299cf6691e4a0f7b39.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding the image given below ?",
    "choices": [
      {
        "id": 1,
        "text": "Most common manifestation of nail psoriasis"
      },
      {
        "id": 2,
        "text": "Most specific sign of nail psoriasis"
      },
      {
        "id": 3,
        "text": "Most common manifestation of Lichen Planus of the nail"
      },
      {
        "id": 4,
        "text": "Most specific sign of Lichen Planus of the nail"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above clinical image depicting <strong>Dorsal Nail Pterygium </strong>is the <strong>most specific</strong> nail change in Lichen planus.</p>\n<p><strong>The fusion of dorsal nail fold</strong> and <strong>nail bed</strong> leads to <strong>pterygium</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/70962df5321e48e691027b18815b2180.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the type of MRI image given below.",
    "choices": [
      {
        "id": 1,
        "text": "T1"
      },
      {
        "id": 2,
        "text": "T2"
      },
      {
        "id": 3,
        "text": "FLAIR"
      },
      {
        "id": 4,
        "text": "STIR"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The MRI image given above is <strong>T1 weighted.</strong></p>\n<p>In <strong>T1</strong> images <strong>CSF is dark/hypointense</strong> and <strong>white matter is white</strong> whereas In <strong>T2</strong> images <strong>CSF is bright/hyperintense</strong> and <strong>white matter is dark.</strong></p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li>In FLAIR images CSF and white matter is dark.</li>\n<li>FLAIR (fluid attenuated inversion recovery) is an inversion recovery technique that nulls fluid.</li>\n<li>STIR (Short tau inversion recovery) is done to detect bone marrow oedema.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cad8e192c2a74cb0bcf91574f42bd119.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6558b8ecb9164f23a1886a9a05fa27f8x360x236.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc93d7486b0e4df39d5bcca6451af003x360x360.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 021';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>