<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery Test Ii (Hernia, Gastrointestinal And Abdominal Surgery, Trauma, Urology, Cardiothoracic Vascular Surgery, Instruments, Pediatric Surgery) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Consider the following barium swallow finding in a patient of dysphagia. Manometry in this patient will show_________",
    "choices": [
      {
        "id": 1,
        "text": "Simultaneous multipeak contractions >120mmHg"
      },
      {
        "id": 2,
        "text": "Elevated LES pressure > 26mmHg"
      },
      {
        "id": 3,
        "text": "Decreased amplitude of oesophageal peristalsis <30 mmHg"
      },
      {
        "id": 4,
        "text": "Peristaltic oesophageal contractions 2 standard deviations above normal"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The barium swallow image&nbsp;shows&nbsp;<strong>corkscrew oesophagus</strong>&nbsp;seen in diffuse oesophageal spasm. Manometry in diffuse oesophageal spasm will show simultaneous multipeak contractions &gt;120mmHg.</p>\n<p><strong>Diffuse oesophageal spasm:</strong></p>\n<ul>\n<li>Barium swallow: <strong>Corkscrew&nbsp;</strong>or&nbsp;<strong>rosary-bead&nbsp;</strong>esophagus,&nbsp;<strong>segmental spasm&nbsp;</strong>or&nbsp;<strong>pseudodiverticulosis&nbsp;</strong>appearance is seen. It is due to the presence of&nbsp;tertiary contractions. It is indicative of&nbsp;advanced disease.</li>\n<li>Manometry findings: Simultaneous,&nbsp;multipeaked contractions&nbsp;of&nbsp;high amplitude&nbsp;(&gt;120 mm Hg) or&nbsp;long duration&nbsp;(&gt;2.5 sec). These&nbsp;erratic contractions&nbsp;occur after&nbsp;more than 20%&nbsp;of&nbsp;wet swallows. There is intermittent normal peristalsis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3ee6de681ca24463906c5c8b66ff6862.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old woman presented with dysphagia and postprandial chest pain. A barium swallow image is shown below. Which of the following statements is true regarding the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "It is associated with hiatus hernia"
      },
      {
        "id": 2,
        "text": "Most commonly seen in middle third of esophagus"
      },
      {
        "id": 3,
        "text": "It is a premalignant condition"
      },
      {
        "id": 4,
        "text": "Anti-reflux therapy is not advised"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given barium swallow showing a thin <strong>submucosal circumferential ring</strong> at the squamocolumnar junction is suggestive of <strong>Schatzki's\u00a0ring.</strong>\u00a0The true statement regarding the condition is, that it is <strong>associated</strong> with<strong> hiatus hernia.</strong></p>\n<p>Schatzki\u2019s ring is a\u00a0thin submucosal circumferential ring\u00a0in the <strong>lower esophagus</strong> at the squamocolumnar junction. Schatzki's ring is a <strong>non-malignant</strong> condition and is often associated with a hiatal hernia. The patient experiences brief episodes of dysphagia during the hurried ingestion of solid foods.</p>\n<p>The\u00a0presence of a ring<strong>\u00a0</strong>in the esophagus, with or without hiatal hernia, can be visualized on\u00a0barium swallow.</p>\n<p>For <strong>symptomatic</strong> patients who <strong>do not</strong> have <strong>reflux,</strong> the best form of treatment consists of\u00a0<strong>esophageal dilation\u00a0</strong>for relief of the obstructive symptoms. In patients who have proven <strong>reflux</strong> and a mechanically <strong>defective sphincter,</strong>\u00a0an<strong> antireflux procedure</strong>\u00a0is done to obtain relief and avoid repeated dilation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4183361c25ff472cbde6007a4046b09f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Gastrointestinal stromal tumours express all except_____________",
    "choices": [
      {
        "id": 1,
        "text": "C-KIT"
      },
      {
        "id": 2,
        "text": "PDGF receptor A"
      },
      {
        "id": 3,
        "text": "CD34"
      },
      {
        "id": 4,
        "text": "Desmin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Gastrointestinal stromal tumours(GIST)</strong> express <strong>C-KIT, PDGF receptor A</strong> and <strong>CD34</strong> but do not express desmin and actin.</p>\n<p>All <strong>smooth muscle tumors</strong> express <strong>actin</strong> and <strong>desmin</strong> but do not express C-KIT, PDGF receptor A and CD 34.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a risk factor for stomach carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Adenomatous polyp"
      },
      {
        "id": 2,
        "text": "Hyperplastic polyp"
      },
      {
        "id": 3,
        "text": "Menetrier\u2019s disease"
      },
      {
        "id": 4,
        "text": "Aspirin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Aspirin is not a risk factor for stomach carcinoma. <strong>COX-2</strong> is implicated in causation of gastric cancer. Hence, <strong>aspirin</strong> which is a COX inhibitor is <strong>protective</strong>.</p>\n<p>Adenomatus polyp, hyperplastic polyp and menetrier\u2019s disease are risk factors for stomach carcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Glasgow-Blatchford score _________",
    "choices": [
      {
        "id": 1,
        "text": "Assesses the risk of rebleeding and in-hospital mortality."
      },
      {
        "id": 2,
        "text": "Screens for the need of medical intervention in UGI bleed."
      },
      {
        "id": 3,
        "text": "Classifies the endoscopic appearance of bleeding peptic ulcers."
      },
      {
        "id": 4,
        "text": "Gives anatomic description of the tumour location and extension in biliary tree."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Glasgow-Blatchford score screens for the need of medical intervention in UGI bleed.</p>\n<p><strong>Glasgow-Blatchford score:</strong> It is a screening tool to assess the likelihood that a patient with an acute upper gastrointestinal bleeding (UGIB) will need to have medical intervention such as a blood transfusion or endoscopic intervention. It incorporates the patient\u2019s blood urea, haemoglobin, blood pressure, and other clinical parameters.</p>\n<p>Other options:</p>\n<ul>\n<li>Rockall Score assesses the\u00a0risk of rebleeding and in-hospital mortality\u00a0in patients with upper GI bleed.</li>\n<li>The Forrest classification\u00a0is used for classifying the\u00a0endoscopic appearance of bleeding peptic ulcers. It\u00a0stratifies the risk of rebleeding\u00a0based on observed stigmata of recent haemorrhage.</li>\n<li><strong>The</strong>\u00a0<strong>Bismuth\u2013Corlette classification</strong>\u00a0system provides an\u00a0<strong>anatomic description</strong>\u00a0of the tumour location and longitudinal extension in the biliary tree.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Kelling-Madlener procedure is done for _____",
    "choices": [
      {
        "id": 1,
        "text": "Type lll gastric ulcer"
      },
      {
        "id": 2,
        "text": "Type lV gastric ulcer"
      },
      {
        "id": 3,
        "text": "Type l gastric ulcer"
      },
      {
        "id": 4,
        "text": "Type ll gastric ulcer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Kelling-Madlener</strong> procedure is done for <strong>type lV Gastric ulcers.</strong></p>\n<p>Surgical management of type lV gastric ulcer</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Kelling-Madlener procedure</strong> - involves antrectomy and excision of gastric ulcer.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pauchet&rsquo;s procedure</strong> - involves distal gastrectomy with a selective sleeve-like extension to the lesser curvature to remove the ulcer.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Csendes Procedure</strong>- subtotal gastrectomy with sleeve-like extension to the lesser curvature.</li>\n</ul>\n<p><br />Management of gastric ulcer</p>\n<table>\n<tbody>\n<tr>\n<td>Types of gastric ulcer</td>\n<td>Management</td>\n</tr>\n<tr>\n<td>Type l</td>\n<td>Distal gastrectomy</td>\n</tr>\n<tr>\n<td>Type ll &amp; lll</td>\n<td>Distal gastrectomy + Vagotomy</td>\n</tr>\n<tr>\n<td>Type lV</td>\n<td>\n<p>Pauchet&rsquo;s procedure <br />Or<br />Kelling-Madlener&rsquo;s procedure <br />Or &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br />Csendes procedure</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b9909cf0bce442499d3fc6d6f61fee51x1280x2825.JPEG"
    ]
  },
  {
    "text": "A middle-aged woman presented with a hernia which is palpable below the inguinal ligament lateral to the pubic tubercle.  According to the NYHUS classification system, to which type does this hernia belong?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of a&nbsp;<strong>femoral hernia.</strong> According to the <strong>NYHUS classification</strong> system, femoral hernia belongs to&nbsp;<strong>type III</strong>. &nbsp;</p>\n<p>Femoral hernia is distinguished from inguinal hernia by the <strong>pubic tubercle</strong>. Femoral hernia is palpable<strong> below</strong> the<strong> inguinal ligament</strong> and <strong>lateral</strong> to <strong>pubic tubercle</strong> while inguinal hernia is palpable above the inguinal ligament and medial to the pubic tubercle. They occur through a defect in the femoral ring.</p>\n<div class=\"page\" title=\"Page 1627\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p class=\"ng-binding\">A femoral hernia will pass through the&nbsp;<strong>femoral ring</strong>&nbsp;proximally. The&nbsp;<strong>posterior</strong>&nbsp;border of the femoral ring is formed by the&nbsp;<strong>pectineal</strong>&nbsp;<strong>ligament</strong>.</p>\n<p>Relations of the femoral ring:</p>\n<ul>\n<li aria-level=\"1\">Anterior border by the inguinal ligament</li>\n<li aria-level=\"1\">Posterior border by the\n<ul>\n<li aria-level=\"1\">Pectineal ligament</li>\n<li aria-level=\"1\">Superior ramus of the pubic bone</li>\n<li aria-level=\"1\">Pectineus muscle</li>\n</ul>\n</li>\n<li aria-level=\"1\">Medial border by the lacunar ligament</li>\n<li aria-level=\"1\">Lateral border by the femoral vein&nbsp;&nbsp;</li>\n</ul>\n<p>The&nbsp;<strong>incidence of strangulation</strong>&nbsp;in femoral hernias is&nbsp;<strong>high</strong>&nbsp;because of the&nbsp;<strong>narrowness </strong>of the <strong>neck </strong>of the<strong> sac&nbsp;</strong>and<strong>&nbsp;r</strong><strong>igidity </strong>of the<strong> femoral ring.&nbsp;</strong>Diagnosis is usually made by physical examination and clinical assessment. However, in doubtful cases, Ultrasound abdomen, CT abdomen, or MRI can be done.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following hernia is found in fossa of Landzert?",
    "choices": [
      {
        "id": 1,
        "text": "Richter\u2019s hernia"
      },
      {
        "id": 2,
        "text": "Maydl hernia"
      },
      {
        "id": 3,
        "text": "Mesentric hernia"
      },
      {
        "id": 4,
        "text": "Paraduodenal hernia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Mesocolic (paraduodenal) hernia:</strong> Mesocolic hernias are unuasual congenital hernias in which the small intestine herniates behind the mesocolon.</p>\n<ul>\n<li>Left sided paraduodenal hernia is found in fossa of Landzert.</li>\n<li>Right sided paraduodenal hernia is found in fossa of Kolb.</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<ul>\n<li><strong>Richter hernia</strong>: A small portion of the\u00a0<strong>antimesenteric wall of the intestine is trapped within the hernia</strong>.</li>\n<li><strong>Maydl\u2019s hernia/Hernia-en-W/retrograde hernia:</strong>\u00a0Two loops of bowel remain in the sac with the connecting loop inside the abdomen.</li>\n<li><strong>Mesenteric hernia</strong>:\u00a0 Mesenteric hernias occur when the intes\u00adtine herniates through an abnormal orifice in the mesentery of the small intestine or colon.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most sensitive investigation for small bowel tumours is__________",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "Enteroclysis"
      },
      {
        "id": 4,
        "text": "Barium meal follow through"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Enteroclysis </strong>is the<strong> most sensitive </strong>investigation for <strong>small bowel tumours. </strong>It has a sensitivity of over 90%\u00a0in the detection of small bowel tumors and is the test of choice,\u00a0particularly for tumors located in the distal small bowel.</p>\n<h3>Advantages:\u00a0</h3>\n<ul>\n<li>The contrast is administered at a controlled rate directly in the small bowel bypassing the regulatory action of pylorus.</li>\n<li>The entire small bowel is demonstrated in a distended state allowing better diagnosis. As a result of the dilatation, mild strictures, small sinus tracts and fistulas, and minimal extrinsic compressions can be visualized besides better delineation of skip lesions and the proximal and distal extent of diffuse diseases.</li>\n<li>The examination can be completed in 15-30 minutes, thus reducing patient waiting time.</li>\n</ul>\n<p>Note:</p>\n<p>Among the options, enteroclysis is the best option.But video capsule endoscopy&gt;enteroclysis is the most sensitive investigation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Kantor string sign on barium study maybe seen in cases of __________",
    "choices": [
      {
        "id": 1,
        "text": "Meckel\u2019s diverticulum"
      },
      {
        "id": 2,
        "text": "Crohn\u2019s disease"
      },
      {
        "id": 3,
        "text": "Typhoid"
      },
      {
        "id": 4,
        "text": "Ulcerative colitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong> Kantor string sign</strong> maybe seen in a barium study of <strong>crohn\u2019s disease</strong>.</p>\n<p>Barium study findings of crohn\u2019s disease:</p>\n<ul>\n<li><strong>Cobblestone appearance</strong> of the mucosa composed of linear ulcers, transverse sinuses and clefts.</li>\n<li>Kantor string sign: Long lengths of narrowed terminal ileum seen in long-standing disease Segmental and irregular patterns of bowel involvement</li>\n<li>Fistulas between adjacent bowel loops and organs.</li>\n</ul>\n<p><strong>Note:</strong> Kantor string sign is suggestive of crohn\u2019s disease. However, a string sign may also be seen in carcinoid tumour and intestinal TB.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is most likely to be seen as a late post-operative complication after an appendectomy operation?",
    "choices": [
      {
        "id": 1,
        "text": "Wound infection"
      },
      {
        "id": 2,
        "text": "Intra-abdominal abscess"
      },
      {
        "id": 3,
        "text": "Paralytic ileus"
      },
      {
        "id": 4,
        "text": "Adhesive intestinal obstruction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong> Most common late postoperative complication</strong> of appendicectomy is <strong>adhesive intestinal obstruction.</strong></p>\n<p><strong>Wound infection</strong> is the <strong>most common postoperative complication</strong> of appendicectomy.</p>\n<p>Intra-abdominal abscess and post-operative ileus are early complications seen after an appendectomy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presented with intermittent upper abdominal pain, episodic hot flushes involving the face and upper chest, and watery stools. Urinalysis was positive for 5-OH indole acetic acid. He was diagnosed to have a carcinoid tumor in the appendix which was 2.5 cm at the tip of the appendix. What is the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Appendicectomy"
      },
      {
        "id": 2,
        "text": "Extended right hemicolectomy"
      },
      {
        "id": 3,
        "text": "Chemotherapy and radiotherapy"
      },
      {
        "id": 4,
        "text": "Right hemicolectomy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Carcinoid tumors measuring &gt;2 cm should be managed with <strong>hemicolectomy.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0ef056d006434d63a2f85dc9ac24612cx1044x744.PNG"
    ]
  },
  {
    "text": "What is the most common site of diverticulitis?",
    "choices": [
      {
        "id": 1,
        "text": "Ascending colon"
      },
      {
        "id": 2,
        "text": "Transverse colon"
      },
      {
        "id": 3,
        "text": "Sigmoid colon"
      },
      {
        "id": 4,
        "text": "Rectum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong> Sigmoid colon</strong> is the most common site of diverticulitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true statements about ischaemic colitis except___________",
    "choices": [
      {
        "id": 1,
        "text": "Partial thickness ischaemia includes mucosa and submucosa"
      },
      {
        "id": 2,
        "text": "Rectum is rarely involved"
      },
      {
        "id": 3,
        "text": "COPD is a risk factor"
      },
      {
        "id": 4,
        "text": "Thumbprinting sign is diagnostic"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Thumbprinting sign</strong> refers to the plain radiographic appearance of the\u00a0submucosal thickening with its crescentic margins. It is specific for ischemia but is <strong>not diagnostic</strong>. It is seen in cases of ischaemic colitis and pseudomembranous colitis.</p>\n<p>Other options:</p>\n<ul>\n<li>Partial thickness ischaemia includes mucosa. Sometimes submucosa is also involved.</li>\n<li>Rectum is rarely involved because of its dual blood supply. It receives blood from IMA through superior haemorrhoidal artey. And from iliac circula\u00adtion, through inferior and middle hemorrhoidal branches.</li>\n<li>Risk factors:\n<ul>\n<li>Occlusive cause e.g thromboembolism</li>\n<li>&gt; 65years</li>\n<li>COPD\u00a0</li>\n<li>cardiac arrhythmias</li>\n<li>irri\u00adtable bowel syndrome</li>\n<li>constipation</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Haggitt\u2019s classification describes carcinoma invading neck of the polyp as level___________",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong> Haggitt\u2019s classification</strong> describes carcinoma invading neck\u00a0of the polyp as<strong> level 2</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Earliest mutation in the adenoma-carcinoma sequence of colorectal carcinoma occurs in _____",
    "choices": [
      {
        "id": 1,
        "text": "APC gene"
      },
      {
        "id": 2,
        "text": "P53 gene"
      },
      {
        "id": 3,
        "text": "K-RAS gene"
      },
      {
        "id": 4,
        "text": "DCC gene"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Earliest mutation</strong>\u00a0in the adenoma-carcinoma sequence of colorectal carcinoma occurs in <strong>APC gene</strong>. The\u00a0earliest phenotypic change\u00a0present is known as\u00a0aberrant crypt formation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the earliest and most common symptom in patients with rectal carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Constipation"
      },
      {
        "id": 2,
        "text": "Tenesmus"
      },
      {
        "id": 3,
        "text": "Rectal bleeding"
      },
      {
        "id": 4,
        "text": "Mucoid discharge"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>The most common </strong>and<strong>\u00a0earliest\u00a0</strong>symptom in carcinoma rectum patients is the<strong> </strong><strong>passage of fresh blood in or with stools.</strong></p>\n<p>Other symptoms include tenesmus, mucoid discharge, and altered bowel habits. The bleeding is usually <strong>bright</strong> <strong>red</strong> in colour and <strong>painless</strong>. It can be <strong>indistinguishable</strong> <strong>from</strong> <strong>haemorrhoidal</strong> bleeding, which is the most common differential diagnosis, particularly in <strong>younger</strong> <strong>patients</strong>.</p>\n<p><strong>Adenocarcinoma</strong>\u00a0is the most\u00a0<strong>common variant</strong>\u00a0of rectal carcinoma.</p>\n<p>Symptoms of rectal carcinoma include:</p>\n<ul>\n<li>Bleeding</li>\n<li>Mucus drainage</li>\n<li><strong>Tenesmus</strong></li>\n<li><strong>Early morning diarrhoea</strong></li>\n<li>Pain</li>\n<li>Weight loss</li>\n</ul>\n<p><strong>Modified Duke\u2019s</strong> staging for rectal carcinoma:</p>\n<table style=\"width: 54.3398%; height: 294.358px;\">\n<tbody>\n<tr style=\"height: 54.3924px;\">\n<td style=\"width: 9.17293%; height: 54.3924px;\" width=\"61\">\n<p>A</p>\n</td>\n<td style=\"width: 86.7669%; height: 54.3924px;\" width=\"577\">\n<p>Growth limited up to the rectal <strong>mucosa</strong></p>\n</td>\n</tr>\n<tr style=\"height: 92.7865px;\">\n<td style=\"width: 9.17293%; height: 92.7865px;\" width=\"61\">\n<p>B</p>\n</td>\n<td style=\"width: 86.7669%; height: 92.7865px;\" width=\"577\">\n<p>B1: Tumor invading <strong>muscularis</strong> <strong>propria</strong>, no lymph node invasion.</p>\n<p>B2: Tumors invading into or <strong>through</strong> <strong>serosa</strong>, no lymph node invasion.</p>\n</td>\n</tr>\n<tr style=\"height: 92.7865px;\">\n<td style=\"width: 9.17293%; height: 92.7865px;\" width=\"61\">\n<p>C</p>\n</td>\n<td style=\"width: 86.7669%; height: 92.7865px;\" width=\"577\">\n<p>C1: The tumour <strong>did not exceed the bowel wall</strong>, lymph node metastasis.</p>\n<p>C2: Tumour <strong>exceeded</strong> the <strong>intestinal</strong> <strong>wall</strong> and lymph node metastasis.</p>\n</td>\n</tr>\n<tr style=\"height: 54.3924px;\">\n<td style=\"width: 9.17293%; height: 54.3924px;\" width=\"61\">\n<p>D</p>\n</td>\n<td style=\"width: 86.7669%; height: 54.3924px;\" width=\"577\">\n<p><strong>Distant</strong> <strong>metastasis</strong></p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/47e1db89a4e348d5bff23ccb79e35475x1280x1193.JPEG"
    ]
  },
  {
    "text": "A patient was diagnosed with CA rectum. The tumour is found to invade through muscularis propria into subserosa. There was no lymph node enlargement and no metastatsis. The appropriate modality of treatment in this patient will be___________",
    "choices": [
      {
        "id": 1,
        "text": "Surgery only"
      },
      {
        "id": 2,
        "text": "Surgery + Adjuvant chemotherapy"
      },
      {
        "id": 3,
        "text": "Preoperative chemoradiation + Radical resection"
      },
      {
        "id": 4,
        "text": "Palliative Chemoradiation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the above clinical picture, the TNM staging falls under:</p>\n<ul>\n<li>The tumour is found to invade through muscularis propria into subserosa\u2013 <strong>T3</strong></li>\n<li>No lymph node involvement \u2013 <strong>N0</strong></li>\n<li>No evidence of metastasis <strong>\u2013 M0</strong></li>\n</ul>\n<p>So, staging is Stage IIA. Therefore, treatment modality is <strong>preoperative chemoradiation followed by radical resection</strong>.\u00a0</p>\n<p>Treatment of Carcinoma Rectum:</p>\n<table style=\"width: 395px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 182px; text-align: center;\">\n<p><strong>Stage</strong></p>\n</td>\n<td style=\"width: 203px; text-align: center;\"><strong>Treatment</strong></td>\n</tr>\n<tr>\n<td style=\"width: 182px; text-align: center;\">Stage 0 (Tis, N0, M0)</td>\n<td style=\"width: 203px; text-align: center;\">Local excision</td>\n</tr>\n<tr>\n<td style=\"width: 182px; text-align: center;\">Stage I: Localized Rectal Carcinoma (T1\u20132, N0, M0)</td>\n<td style=\"width: 203px; text-align: center;\">\n<ul>\n<li>Polypectomy with clear margins</li>\n<li>Radical resection in High-risk patients with unfavorable histologic characteristics located in the distal third of the rectum</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 182px; text-align: center;\">Stage II: Localized Rectal Carcinoma (T3\u20134, N0, M0)</td>\n<td style=\"width: 203px; text-align: center;\">Preoperative chemoradiation + radical resection</td>\n</tr>\n<tr>\n<td style=\"width: 182px; text-align: center;\"><strong>Stage III: Lymph Node Metastasis\u00a0(Tany, N1, M0)</strong></td>\n<td style=\"width: 203px; text-align: center;\"><strong>Preoperative chemoradiation\u00a0+ radical resection</strong></td>\n</tr>\n<tr>\n<td style=\"width: 182px; text-align: center;\">Stage IV: Distant Metastasis (Tany, Nany, M1)</td>\n<td style=\"width: 203px; text-align: center;\">\n<p>Palliative procedures.</p>\n<p>Resection to control pain, bleeding, or tenesmus</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>\n<p>TNM staging of CA rectum:</p>\n<table style=\"width: 380px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 154px;\"><strong>Stage</strong></td>\n<td style=\"width: 214px;\"><strong>Definition</strong></td>\n</tr>\n<tr>\n<td style=\"width: 154px;\"><strong>Primary tumour(T)</strong></td>\n<td style=\"width: 214px;\">\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">TX</td>\n<td style=\"width: 214px;\">Primary tumour cannot be assessed</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T0</td>\n<td style=\"width: 214px;\">No evidence of primary tumour</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Tis</td>\n<td style=\"width: 214px;\">Carcinoma in situ</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T1</td>\n<td style=\"width: 214px;\">Tumour invades submucosa</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T2</td>\n<td style=\"width: 214px;\">Tumour invades muscularis propria</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T3</td>\n<td style=\"width: 214px;\">Tumour invades through muscularis propria into the subserosa or into nonperitonealized pericolic or perirectal tissues</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T4a</td>\n<td style=\"width: 214px;\">Tumour perforates visceral peritoneum</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">T4b</td>\n<td style=\"width: 214px;\">Tumour directly invades other organs or structures</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\"><strong>Regional lymph nodes(N)</strong></td>\n<td style=\"width: 214px;\">\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">NX</td>\n<td style=\"width: 214px;\">Regional lymph nodes cannot be assessed</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">N0</td>\n<td style=\"width: 214px;\">No regional lymph node metastases</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">N1</td>\n<td style=\"width: 214px;\">Metastasis in 1-3 regional lymph nodes</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 N1a</td>\n<td style=\"width: 214px;\">Metastasis in 1 regional lymph node</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 N1b</td>\n<td style=\"width: 214px;\">Metastasis in 2-3 regional lymph nodes</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 N1c</td>\n<td style=\"width: 214px;\">Tumour deposits in the subserosa, mesentry or non peritonealised pericolic or perirectal tissue without regional nodal metastasis</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">N2</td>\n<td style=\"width: 214px;\">Metastasis in 4 or more regional lymph nodes</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 N2a</td>\n<td style=\"width: 214px;\">Metastasis in 4- 6 regional lymph nodes</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 N2b</td>\n<td style=\"width: 214px;\">Metastasis in 7 or more regional lymph nodes</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\"><strong>Distant metastasis (M)</strong></td>\n<td style=\"width: 214px;\">\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">M0</td>\n<td style=\"width: 214px;\">No distant metastasis</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">M1</td>\n<td style=\"width: 214px;\">Distant metastasis</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 M1a</td>\n<td style=\"width: 214px;\">Metastasis confined to 1 organ or site</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">\u00a0\u00a0\u00a0 M1b</td>\n<td style=\"width: 214px;\">Metastasis in more than one organ/site or the peritoneum</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Staging based on TNM</strong>:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>TNM</strong></td>\n<td><strong>Stage</strong></td>\n</tr>\n<tr>\n<td>T<sub>1-2</sub>N<sub>0</sub></td>\n<td>I</td>\n</tr>\n<tr>\n<td>T<sub>3</sub>N<sub>0</sub></td>\n<td>IIA</td>\n</tr>\n<tr>\n<td>T<sub>4</sub>N<sub>0</sub></td>\n<td>IIB</td>\n</tr>\n<tr>\n<td>T<sub>1-2</sub>N<sub>1</sub></td>\n<td>IIIA</td>\n</tr>\n<tr>\n<td>T<sub>1-2</sub>N<sub>2</sub></td>\n<td>IIIB</td>\n</tr>\n<tr>\n<td>T<sub>3</sub>N<sub>1</sub></td>\n<td>IIIB</td>\n</tr>\n<tr>\n<td>T<sub>3</sub>N<sub>2</sub></td>\n<td>IIIC</td>\n</tr>\n<tr>\n<td>T<sub>4</sub>N<sub>1-2</sub></td>\n<td>IIIC</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man presents with internal hemorrhoid with spontaneously reducing prolapse. What is the appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Rubber band ligation"
      },
      {
        "id": 2,
        "text": "Milligan Morgan hemorrhoidectomy"
      },
      {
        "id": 3,
        "text": "Closed haemorrhoidectomy"
      },
      {
        "id": 4,
        "text": "Stapled hemorrhoidopexy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Internal hemorrhoids with spontaneously reducing prolapse <strong>(grade 2)</strong> can be managed with <strong>rubber band ligation.</strong></p>\n<p>Hemorrhoids are&nbsp;<strong>cushions</strong>&nbsp;<strong>of submucosal tissue&nbsp;</strong>containing venules, arterioles, and smooth muscle fibers that are located in the anal canal. They&nbsp;can be classified according to their location into&nbsp;<strong>2 types</strong>:</p>\n<ul>\n<li>Internal hemorrhoids&nbsp;</li>\n<li>External hemorrhoids</li>\n</ul>\n<p><strong>External hemorrhoids</strong> are<strong> distal to the dentate line</strong> and are covered with anoderm; these may engorge causing <strong>pain</strong>. Thrombosis of these external hemorrhoids causes severe pain. <strong>Internal</strong> hemorrhoids are characterized by bright red, <strong>painless bleeding</strong>, or prolapse.</p>\n<p><strong>Internal hemorrhoids</strong> are stratified into four <strong>grades</strong> as follows:</p>\n<table style=\"width: 432px;\">\n<tbody>\n<tr style=\"height: 52px;\">\n<td style=\"width: 177.25px; height: 52px;\">\n<p><strong>GRADE</strong></p>\n</td>\n<td style=\"width: 239.75px; height: 52px;\">\n<p><strong>SYMPTOMS</strong> AND<strong> SIGNS</strong></p>\n</td>\n</tr>\n<tr style=\"height: 58px;\">\n<td style=\"width: 177.25px; height: 58px;\">\n<p>First degree</p>\n</td>\n<td style=\"width: 239.75px; height: 58px;\">\n<p>Bleeding; no prolapse</p>\n</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 177.25px; height: 71px;\">\n<p>Second degree</p>\n</td>\n<td style=\"width: 239.75px; height: 71px;\">\n<p>Prolapse with spontaneous reduction</p>\n</td>\n</tr>\n<tr style=\"height: 80px;\">\n<td style=\"width: 177.25px; height: 80px;\">\n<p>Third degree</p>\n</td>\n<td style=\"width: 239.75px; height: 80px;\">\n<p>Prolapse requiring manual reduction</p>\n</td>\n</tr>\n<tr style=\"height: 65.75px;\">\n<td style=\"width: 177.25px; height: 65.75px;\">\n<p>Fourth degree</p>\n</td>\n<td style=\"width: 239.75px; height: 65.75px;\">\n<p>Prolapsed, cannot be reduced</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Management </strong>of <strong>external</strong> hemorrhoids:&nbsp;</p>\n<p>External hemorrhoids do not require treatment unless they become thrombosed. Acutely thrombosed external hemorrhoids cause intense pain and perianal mass during the first 24 to 72 hours. Patients who present&nbsp;<strong>within 72 hours</strong>&nbsp;of thrombosis are treated with&nbsp;elliptical <strong>excision</strong> performed under local anesthesia.</p>\n<p>If the patient presents to the hospital&nbsp;<strong>after 72 hours</strong>, then it is treated&nbsp;<strong>conservatively</strong>&nbsp;with analgesics and a sitz bath. Once the symptoms come down, definitive surgery is performed.&nbsp;</p>\n<p><strong>Management</strong> of <strong>internal</strong>&nbsp;hemorrhoids:</p>\n<p><strong>Bleeding</strong> from <strong>grade 1</strong> and <strong>grade 2</strong> hemorrhoids often <strong>improves</strong> with the addition of <strong>dietary fiber,</strong> stool softeners, increased <strong>fluid</strong> intake, and avoidance of straining.</p>\n<p>Grade 1, grade 2,&nbsp;and&nbsp;some grade 3 hemorrhoids with only an internal component&nbsp;can be treated with simple procedures like rubber <strong>band ligation,</strong> sclerotherapy<strong>,</strong> infrared and laser coagulation, and cryotherapy.</p>\n<p><strong>Rubber band ligation</strong> involves pulling mucosa located 1 to 2 cm proximal to the dentate line&nbsp;into a rubber band applier. The rubber band strangulates the underlying tissue, causing scarring and sloughing off of the mass in a few days.&nbsp;</p>\n<p><strong>Sclerotherapy</strong> involves injecting 1&nbsp;to 3 mL of a sclerosing solution (phenol in olive oil, sodium morrhuate, or quinine urea) into the submucosa of internal&nbsp;hemorrhoids.</p>\n<p><strong>Surgery</strong> is<strong> indicated</strong> in:&nbsp;</p>\n<ol>\n<li>Internal grade 3 or grade 4 hemorrhoids</li>\n<li>Hemorrhoids with a significant external component</li>\n<li>Early-grade hemorrhoids not responding to simple procedures</li>\n</ol>\n<p>Surgical <strong>procedures</strong> used in the removal of internal hemorrhoids are:</p>\n<p>1)&nbsp;Doppler-guided hemorrhoidal artery ligation</p>\n<p>2)<strong> Open hemorrhoidectomy</strong>- the artery forceps are applied to the skin-covered external components of the hemorrhoid and traction is given to reveal the internal components. <strong>Dissection</strong> of the <strong>lateral pedicle</strong> is performed and finally, the pedicles are transfixed. Mucocutaneous bridges are left intact in this technique.&nbsp;The image below shows the procedure.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2e458559a94c4043812d6e7f8dbde708x1280x3706.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/246f773455a448e1bd95ae676ccc9b15x1280x3049.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00cfcd14b778430883c5d6d43ed1dd7cx450x900.PNG"
    ]
  },
  {
    "text": "All are true about anal canal above pectinate line except_________",
    "choices": [
      {
        "id": 1,
        "text": "Portal venous drainage"
      },
      {
        "id": 2,
        "text": "Lymphatic drainage through lumbar and pelvic nodes"
      },
      {
        "id": 3,
        "text": "Adenocarcinoma is seen"
      },
      {
        "id": 4,
        "text": "Haemorrhoids are painful"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Haemorrhoids are <strong>painless</strong> in anal canal <strong>above</strong> pectinate line. External hemorrhoids in anal canal <strong>below </strong>pectinate line are <strong>painful.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Overwhelming post splenectomy infection is most commonly seen _______",
    "choices": [
      {
        "id": 1,
        "text": "During first week postoperatively"
      },
      {
        "id": 2,
        "text": "Within 3 months"
      },
      {
        "id": 3,
        "text": "After 6-12months"
      },
      {
        "id": 4,
        "text": ">2years"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Overwhelming post splenectomy infection</strong> is most commonly seen after <strong>2-5 years.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a feature of glucagonoma?",
    "choices": [
      {
        "id": 1,
        "text": "Gall stones"
      },
      {
        "id": 2,
        "text": "DVT"
      },
      {
        "id": 3,
        "text": "Steatorrhoea"
      },
      {
        "id": 4,
        "text": "Hypokalemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>DVT</strong> is a <strong>feature of glucagonoma.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a contraindication for puncture aspiration injection reaspiration(PAIR) of hydatid cyst?",
    "choices": [
      {
        "id": 1,
        "text": "Infected cyst"
      },
      {
        "id": 2,
        "text": "Calcified cyst"
      },
      {
        "id": 3,
        "text": "Cyst in lungs"
      },
      {
        "id": 4,
        "text": "Hyperechogenic cyst"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Infected</strong> cyst is not a contraindication for puncture aspiration injection reaspiration(PAIR) of hydatid cyst. It is an indication for\u00a0<strong>PAIR.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true statements regarding budd chiari syndrome except__________",
    "choices": [
      {
        "id": 1,
        "text": "It is obstruction of hepatic vein"
      },
      {
        "id": 2,
        "text": "Most common presentation is ascites"
      },
      {
        "id": 3,
        "text": "CECT abdomen is the best investigation"
      },
      {
        "id": 4,
        "text": "Side to side porto caval shunt is a treatment modality."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong> Hepatic venography</strong> is the best investigation for budd chiari syndrome (not CECT abdomen).</p>\n<p><strong>Budd chiari syndrome:\u00a0</strong>Uncommon congestive hepatopathy characterized by the\u00a0<strong>obstruction of</strong> <strong>hepatic venous outflow</strong>. Most common\u00a0presentation is\u00a0<strong>ascites and abdominal discomfort. </strong></p>\n<p>Investigations:</p>\n<ul>\n<li>Abdominal ultrasonography with color Doppler is the initial\u00a0investigation of choice\u00a0and can demonstrate the absence of hepatic vein flow, spider web hepatic veins, and collateral hepatic veins.</li>\n<li>The\u00a0definitive\u00a0radiographic\u00a0study is\u00a0hepatic venography\u00a0to determine the presence and extent of hepatic vein thrombus as well as measure IVC pressures.</li>\n</ul>\n<p>Treatment\u00a0:</p>\n<ul>\n<li>Initial treatment\u00a0is medical management with systemic anticoagulation. The associated portal hypertension and ascites is managed in a manner similar to that in most cirrhotic patients.</li>\n<li>Radiologic and surgical intervention\u00a0is used when patient is nonresponsive to medical therapy.\u00a0Percutaneous angioplasty and TIPS, in combination with thrombolytic therapy, are the preferred strategies to restore the outflow of blood from the liver. Surgical shunting\u00a0namely with the<strong>\u00a0side-to-side portacaval shunt</strong>,\u00a0turns the portal vein into a hepatic outflow tract.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Kasabach-Merritt syndrome is associated with which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatic adenoma"
      },
      {
        "id": 2,
        "text": "HCC"
      },
      {
        "id": 3,
        "text": "Focal nodular hyperplasia"
      },
      {
        "id": 4,
        "text": "Hemangioma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Kasabach-Merritt syndrome is associated with hemangioma.</p>\n<p>Kasabach-Merritt syndrome is an associated syndrome of thrombocytopenia and consumptive coagulopathy, seen in hemangioma. It is an indication of resection of liver.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young male patient with no history of prior liver disease is diagnosed with fibrolamellar variant of hepatocellular carcinoma. Which of the following is likely to be elevated in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "AFP"
      },
      {
        "id": 2,
        "text": "ALP"
      },
      {
        "id": 3,
        "text": "Neurotensin"
      },
      {
        "id": 4,
        "text": "CEA"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Fibrolamellar</strong> <strong>variant</strong> of hepatocellular carcinoma (HCC) is likely to be associated with <strong>elevated levels of neurotensin</strong>.\u00a0</p>\n<p><strong>Fibrolamellar variant</strong> of HCC occurs in <strong>young patients</strong> <strong>without any history of cirrhosis</strong>. The tumor is <strong>well-demarcated</strong> and may have a <strong>central fibrotic a</strong>rea. Histology shows large tumor cells embedded in a <strong>fibrous stroma</strong> which is <strong>arranged in bundles or lamellae</strong>. The fibrolamellar variant <strong>does not produce AFP</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image given below depicts choledochal cyst type________",
    "choices": [
      {
        "id": 1,
        "text": "Type III"
      },
      {
        "id": 2,
        "text": "Type IV A"
      },
      {
        "id": 3,
        "text": "Type IV B"
      },
      {
        "id": 4,
        "text": "Type V"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image depicts choledochal cyst type III.</p>\n<p><br /> <strong>Choledochal cyst type III : </strong>A cystic dilation of the intramural common bile duct, within the wall of the duodenum, known as choledochoceles.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3c3a4b4ee02c47ac8c916dff297bc651.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "False about gall bladder CA is_______",
    "choices": [
      {
        "id": 1,
        "text": "Incidence of cancer depends on type of gallstone"
      },
      {
        "id": 2,
        "text": "Porcelain gall bladder is a risk factor"
      },
      {
        "id": 3,
        "text": "Papillary type has better prognosis"
      },
      {
        "id": 4,
        "text": "Open cholecystectomy is preferred in polyps> 10mm because of malignant potential."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Gallstones is the most important risk factor for gall bladder carcinoma. However, incidence of cancer does not depend on type of gallstone.</p>\n<p>Other options:</p>\n<p>b) Porcelain gall bladder is a risk factor.</p>\n<p>Others include</p>\n<ul>\n<li><strong>Gallstones of size more than 3 cm</strong></li>\n<li>Anomalous pancreato- biliary junction</li>\n<li>Choledochal cyst</li>\n<li>Adenomatous polyps</li>\n<li>Primary sclerosing cholangitis</li>\n<li>Obesity</li>\n<li>Salmonella typhii infection</li>\n</ul>\n<p>c) Histologic subtypes are papillary, nodular and tubular. Papillary type have better prognosis as they tend to have an indolent course and are commonly limited to the gallbladder wall at the time of diagnosis.</p>\n<p>d) Gall bladder polyps &gt;10mm have malignant potential. Open cholecystectomy is preferred over laparoscopic approach because of the risk of laparoscopic perforation and spread of the malignant condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Microscopic examination of a patient's urine sample showed rhomboid shaped urine stones. The urine stones seen are______",
    "choices": [
      {
        "id": 1,
        "text": "Oxalate"
      },
      {
        "id": 2,
        "text": "Cystine"
      },
      {
        "id": 3,
        "text": "Uric acid"
      },
      {
        "id": 4,
        "text": "Xanthine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Uric acid stones are shaped as rhomboids or parallelograms</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Workup would reveal a putty kidney in patients with which of the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "DM"
      },
      {
        "id": 2,
        "text": "Hypertension"
      },
      {
        "id": 3,
        "text": "Tuberculosis"
      },
      {
        "id": 4,
        "text": "Renal cell carcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Putty kidney</strong> is associated with <strong>genitourinary tuberculosis</strong>.</p>\n<p>During the end stage of genitourinary tuberculosis, amorphous dystrophic calcification is seen over the entire kidney. This is known as <strong>putty kidney</strong>.</p>\n<p>The image below shows right-sided putty kidney:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e50b711c15064d569831d2d9c6f5c560x720x737.JPEG"
    ]
  },
  {
    "text": "A man was referred for the evaluation of an unsteady gait with weakness of his legs for the past 1 month. He gave a history of similar problems in his brother. Imaging revealed cerebellar hemangioblastomas and bilateral renal masses suggestive of RCC.  Which histological type of this renal malignancy is he most likely to have?",
    "choices": [
      {
        "id": 1,
        "text": "Papillary"
      },
      {
        "id": 2,
        "text": "Clear cell"
      },
      {
        "id": 3,
        "text": "Chromophobe"
      },
      {
        "id": 4,
        "text": "Collecting duct"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features mentioned are consistent with <strong>renal cell carcinoma</strong>\u00a0and<strong> cerebellar hemangioblastoma </strong>which\u00a0along with the family history points to a diagnosis of <strong>von Hippel Lindau\u2019s disease </strong>(VHL). <strong>Clear cell RCC</strong> is the most common type associated with <strong>VHL</strong> disease.\u00a0</p>\n<p><strong>VHL disease</strong> is inherited as an <strong>autosomal dominant</strong> trait and is caused by a germline mutation of the <strong>VHL gene on chromosome 3p</strong>. A second hit can increase the predisposition to a variety of neoplasms, particularly hemangioblastomas of the cerebellum and retina, and <strong>clear cell renal carcinoma</strong>(in 40-60%).</p>\n<p>The given slide shows clear cell RCC.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a60f8aa23dc046c8873a58d37dc42548x1279x1117.JPEG"
    ]
  },
  {
    "text": "A 40-year-old chronic alcoholic presents with sudden onset abdominal pain in the epigastric region radiating to the back.  Investigations revealed elevated amylase levels and total WBC count. Identify the following sign seen on examination.",
    "choices": [
      {
        "id": 1,
        "text": "Coopernails sign"
      },
      {
        "id": 2,
        "text": "Cullen\u2019s sign"
      },
      {
        "id": 3,
        "text": "Fox sign"
      },
      {
        "id": 4,
        "text": "Grey turner sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above scenario is suggestive of <strong>acute pancreatitis.</strong> The sign shown in the image is <strong>Cullen&rsquo;s sign</strong>. It is a bluish discoloration around the&nbsp;<strong>umbilicus.</strong></p>\n<p><strong>Coopernail&rsquo;s sign</strong> refers to the&nbsp;<strong>ecchymosis</strong> of the <strong>perineum</strong> and scrotum or labia due to <strong>pelvic</strong> <strong>fracture</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ec3951ca5c15465ea93434d0ca029a3b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A chronic smoker with gross painless hematuria was diagnosed with bladder carcinoma. A CT scan showed cancer infiltration into the muscular layer. Which of the following is the most appropriate treatment option for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "TURBT"
      },
      {
        "id": 2,
        "text": "TURBT plus intravesicle chemotherapy"
      },
      {
        "id": 3,
        "text": "Radiotherapy"
      },
      {
        "id": 4,
        "text": "Radical cystectomy with lymph node dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The treatment of choice for bladder cancer involving the <strong>muscular layer</strong>&nbsp;<strong>(muscle-invasive bladder carcinoma)</strong> is <strong>radical</strong>&nbsp;<strong>cystectomy </strong>with<strong> lymph node dissection.</strong></p>\n<p><strong>Cigarette smoking</strong>&nbsp;is the main aetiological factor. Other risk factors include exposure to&nbsp;<strong>aniline dyes</strong>&nbsp;and&nbsp;<strong>schistosomiasis.&nbsp;</strong>Patients present with <strong>painless gross hematuria</strong> and <strong>frequency</strong> and <strong>urgency</strong> of urine.</p>\n<p>Diagnosis is made using cystourethroscopy. Blue-light cystoscopy is better able to delineate the areas in the bladder with suspicion of malignancy. CT urogram is used to assess the upper urinary tract and the presence of hydroureteronephrosis. It is also used to assess lymph nodal metastases. MRI of the bladder is useful in assessing whether or not the muscle layer of the bladder is involved.&nbsp;</p>\n<p>Depending on the invasion of the lamina propria and muscularis propria layers, the staging and management of bladder cancer varies, as given below:</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Non-invasive papillary urothelial cancer</strong></td>\n<td>Does not involve the lamina propria</td>\n<td>\n<p><strong>TURBT only</strong>; patients are followed-up with cystoscopy</p>\n</td>\n</tr>\n<tr>\n<td><strong>Non-muscle invasive bladder cancer</strong></td>\n<td>Can involve lamina propria, but does not invade the muscularis propria</td>\n<td>\n<p><strong>TURBT followed by postoperative mitomycin C instillation</strong></p>\n<p>Multifocal and high-grade tumors may progress to muscle invasive bladder cancer: radical cystectomy or intravesicle BCG should be considered</p>\n</td>\n</tr>\n<tr>\n<td><strong>Muscle invasive bladder cancer</strong></td>\n<td>Involves the muscularis propria</td>\n<td>\n<p><strong>Radical cystectomy and bilateral pelvic lymphadenectomy with urinary diversion</strong></p>\n<p>Radical external beam radiotherapy can be considered in patients unfit for surgery</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the most common cause of hydronephrosis detected during prenatal ultrasound?",
    "choices": [
      {
        "id": 1,
        "text": "Ureteropelvic junction obstruction"
      },
      {
        "id": 2,
        "text": "Ectopic ureter"
      },
      {
        "id": 3,
        "text": "Ureterocele"
      },
      {
        "id": 4,
        "text": "Posterior urethral valve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong> Ureteropelvic junction obstruction</strong> is the most common cause of hydronephrosis on prenatal ultrasound among the given options. <strong><br /><br /></strong>The Etiology of Antenatal Hydronephrosis:</p>\n<table style=\"border-collapse: collapse; width: 33.6661%; height: 163.187px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 69.6765%; text-align: center; height: 22.3984px;\"><strong>Aetiology</strong></td>\n<td style=\"width: 30.3235%; text-align: center; height: 22.3984px;\"><strong>Incidence</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 69.6765%; height: 22.3984px;\">Transient hydronephrosis</td>\n<td style=\"width: 30.3235%; height: 22.3984px;\">41\u201388%</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 69.6765%; height: 22.3984px;\"><strong>Ureteropelvic junction obstruction</strong></td>\n<td style=\"width: 30.3235%; height: 22.3984px;\">10\u201330%</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 69.6765%; height: 22.3984px;\">Vesicoureteral reflux</td>\n<td style=\"width: 30.3235%; height: 22.3984px;\">10\u201320%</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 69.6765%; height: 22.3984px;\"><strong>Ureterocele</strong>/<strong>ectopic ureter</strong>/duplex system</td>\n<td style=\"width: 30.3235%; height: 22.3984px;\">5\u20137%\u00a0</td>\n</tr>\n<tr style=\"height: 28.7969px;\">\n<td style=\"width: 69.6765%; height: 28.7969px;\"><strong>Posterior urethral valve</strong>/urethral atresia</td>\n<td style=\"width: 30.3235%; height: 28.7969px;\">1\u20132%\u00a0</td>\n</tr>\n</tbody>\n</table>\n<p>In UPJ obstruction, hydronephrosis may be detected on antenatal ultrasound. It can however be transient or mild and resolves on its own.</p>\n<p>The causes of UPJ obstruction are:</p>\n<ul>\n<li>Intrinsic (due to an adynamic or stenotic segment of the proximal ureter) or\u00a0</li>\n<li>Extrinsic (eg. compression by accessory renal arteries). This needs to be corrected primarily.</li>\n</ul>\n<p>It is usually associated with renal anomalies and has a 2:1 male-to-female ratio. After birth, re-checking needs to be done and in cases presenting with\u00a0<strong>symptoms of recurrent UTI, palpable flank mass or pain, urinary obstruction,</strong> and cases of<strong> failure to thrive</strong>. If the hydronephrosis is persistent, its\u00a0<strong>severity</strong>\u00a0is\u00a0<strong>graded</strong>\u00a0by the extent of the dilatation of the pelvicalyceal system and parenchymal thickness.</p>\n<p>In cases of hydronephrosis,\u00a0<strong>long-standing urine stasis</strong>\u00a0and pressure may\u00a0<strong>damage the kidney</strong>s. The renal anatomy and function can be assessed using\u00a0<strong>radioscintigraphy</strong>\u00a0studies.\u00a0<strong>MAG3</strong>\u00a0(mercaptoacetyl triglycine) which measures tubular function has largely replaced the usage of Tc99- DTPA. The kidneys with decreased function\u00a0<strong>show slower uptake and take a longer time</strong>\u00a0to excrete the tracer. It is even preferred over intravenous pyelogram for assessment of hydronephrosis in newborns and children because IVP images are suboptimal in presence of bowel gas and poor dye uptake in newborn kidneys.</p>\n<p><strong>Treatment</strong>\u00a0of intrinsic UPJ obstruction is done\u00a0<strong>surgically if renal function is compromised</strong>\u00a0or bilateral kidneys are involved. In other cases,\u00a0<strong>serial follow-up with ultrasonography</strong>\u00a0is done to assess the spontaneous resolution of hydronephrosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Voiding type of lower urinary tract symptom is___________",
    "choices": [
      {
        "id": 1,
        "text": "Urgency"
      },
      {
        "id": 2,
        "text": "Hesitancy"
      },
      {
        "id": 3,
        "text": "Frequency"
      },
      {
        "id": 4,
        "text": "Enuresis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hesitancy</strong> is a voiding type of lower urinary tract symptom.</p>\n<table style=\"width: 438px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 169px; text-align: center;\"><strong>Storage problems</strong></td>\n<td style=\"width: 263px; text-align: center;\"><strong>Voiding problems</strong></td>\n</tr>\n<tr>\n<td style=\"width: 169px; text-align: center;\">\n<ul>\n<li style=\"text-align: left;\">Frequency</li>\n<li style=\"text-align: left;\">Nocturia</li>\n<li style=\"text-align: left;\">Urgency</li>\n<li style=\"text-align: left;\">Urge incontinence</li>\n<li style=\"text-align: left;\">Nocturnal incontinence\u00a0<strong style=\"text-align: center;\">(enuresis)</strong></li>\n</ul>\n</td>\n<td style=\"width: 263px; text-align: center;\">\n<ul>\n<li style=\"text-align: left;\"><strong>Hesitancy</strong></li>\n<li style=\"text-align: left;\">Poor flow</li>\n<li style=\"text-align: left;\">Intermittent stream</li>\n<li style=\"text-align: left;\">Dribbling</li>\n<li style=\"text-align: left;\">Sensation of poor bladder emptying</li>\n<li style=\"text-align: left;\">Episodes of near retention</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following hydrocele occurs due to excessive production of fluid in the sac?",
    "choices": [
      {
        "id": 1,
        "text": "Vaginal hydrocele"
      },
      {
        "id": 2,
        "text": "Congenital hydrocele"
      },
      {
        "id": 3,
        "text": "Primary hydrocele"
      },
      {
        "id": 4,
        "text": "Secondary hydrocele"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong> Secondary hydrocele</strong> occurs due to excessive production of fluid in the sac.</p>\n<p>A&nbsp;<strong>hydrocele</strong>&nbsp;is due to fluid accumulation between the&nbsp;two<strong>&nbsp;</strong>layers&nbsp;of&nbsp;<strong>tunica vaginalis.</strong>&nbsp;It may be primary or secondary depending on whether it is due to defective absorption of excess formation. Eversion of the sac causes the production of fluid towards the outside which can be absorbed by outer scrotal layers.&nbsp;</p>\n<p><strong>Aetiology </strong>of hydrocele<strong>:</strong></p>\n<ul>\n<li><strong>Primary (vaginal)- </strong>due to defective absorption of fluid.</li>\n<li><strong>Secondary hydrocele</strong>- due to excessive production of fluid in the sac.</li>\n<li><strong>Congenital-</strong>&nbsp;through connection with the peritoneal cavity via patent processus vaginalis.</li>\n<li>Due to interference of lymphatic drainage of scrotal structures.</li>\n</ul>\n<p>Hydrocele is a swelling that closely encompasses the testis and epididymis making them impalpable. It is possible to get above the swelling in hydrocele to palpate a normal spermatic cord.</p>\n<p>Treatment:</p>\n<ul>\n<li><strong>Jabolay's procedure- eversion</strong> of the <strong>sac</strong>&nbsp;upon itself&nbsp;</li>\n<li><strong>Lord's operation- plicating </strong>the<strong> redundant tunica</strong>&nbsp;is done when the&nbsp;<strong>sac wall is thin</strong>.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/11076b37381949b59e88ecb187de29ffx1280x1309.JPEG"
    ]
  },
  {
    "text": "Which of the following statement about testicular tumour is true?",
    "choices": [
      {
        "id": 1,
        "text": "A testicular lump felt separately from the testes is suggestive of malignancy."
      },
      {
        "id": 2,
        "text": "Lymphatic spread is to the para aortic lymph nodes."
      },
      {
        "id": 3,
        "text": "Microscopic residual disease in the scrotum are Stage III testicular tumours."
      },
      {
        "id": 4,
        "text": "Ultrasound is not mandatory in all suspected cases of testicular tumours."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The lymphatic spread of testicular tumors is to the <strong>para-aortic lymph nodes</strong>. <strong>Inguinal</strong> lymph nodes are involved only if the <strong>scrotal skin</strong> is involved.</p>\n<p>A solid testicular lump that <strong>cannot be felt separately</strong> from the testes is suggestive of malignancy (Option A). The diagnosis of a testicular tumor is confirmed by <strong>ultrasound</strong>. It can also assess the contralateral testis. Ultrasound is a <strong>mandatory</strong> investigation in all suspected cases of testicular tumors. (Option D)</p>\n<p><strong>Stages of testicular tumors </strong>(according to the older staging system of Stages I-IV) are valuable in determining treatment options.</p>\n<ul>\n<li>Stage I: Tumor is limited to <strong>testis</strong></li>\n<li>Stage II: <strong>Microscopic residual disease</strong> is present in the scrotum or high in the spermatic cord (Option C)</li>\n<li>Stage III: <strong>Retroperitoneal</strong> lymph node involvement</li>\n<li>Stage IV: <strong>Distant</strong> metastatic deposits</li>\n</ul>\n<p>Note: According to TNM Staging of Testicular Tumor: American Joint Committee on Cancer and Union Internationale Contre le Cancer, depending on the Primary tumor (T), regional lymph node (N), distant metastasis (M), and serum tumor markers (hCG, LDH, AFP) it is staged into stages I, II, III.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient presenting with a painless testicular swelling, which of the following findings would be suggestive of spermatocele?",
    "choices": [
      {
        "id": 1,
        "text": "Unilocular cyst with barley water appearance  fluid"
      },
      {
        "id": 2,
        "text": "Multilocular cyst with crystal clear fluid"
      },
      {
        "id": 3,
        "text": "Unilocular cyst with crystal clear fluid"
      },
      {
        "id": 4,
        "text": "Multilocular cyst with barley water appearance fluid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Spermatocele</strong> is a\u00a0<strong>unilocular</strong>\u00a0<strong>cyst</strong>\u00a0with\u00a0<strong>barley water</strong>\u00a0<strong>appearance fluid</strong>. Barley water fluid is due to the presence of <strong>spermatozoa</strong>.</p>\n<p>Spermatocele is an epididymal <strong>retention cyst</strong>. It arises from the <strong>portion</strong> of the <strong>epididymis</strong> that has a <strong>sperm-conducting mechanism</strong>.\u00a0</p>\n<p>The table below lists the difference between spermatocele and epididymal cyst:\u00a0</p>\n<table style=\"width: 468px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 38px;\">\n<td style=\"width: 227px; text-align: center; height: 38px;\"><strong>Spermatocele</strong></td>\n<td style=\"width: 239px; text-align: center; height: 38px;\"><strong>Epididymal cyst</strong></td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 227px; text-align: center; height: 18px;\">Unilocular retention cyst</td>\n<td style=\"width: 239px; text-align: center; height: 18px;\">Multiple, multilocular, bunch of grapes</td>\n</tr>\n<tr style=\"height: 86px;\">\n<td style=\"width: 227px; text-align: center; height: 86px;\">\n<p>Present at epididymal head above and behind the upper pole of testes</p>\n</td>\n<td style=\"width: 239px; text-align: center; height: 86px;\">Posterior to testis</td>\n</tr>\n<tr style=\"height: 59px;\">\n<td style=\"width: 227px; text-align: center; height: 59px;\">Transillumination +</td>\n<td style=\"width: 239px; text-align: center; height: 59px;\">\n<p>Transillumination +<br />(<strong>chinese lantern pattern</strong>)</p>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 227px; text-align: center; height: 18px;\"><strong><strong>Barley water\u00a0</strong></strong><strong>appearance fluid\u00a0</strong></td>\n<td style=\"width: 239px; text-align: center; height: 18px;\"><strong>Crystal clear fluid</strong></td>\n</tr>\n<tr style=\"height: 27px;\">\n<td style=\"width: 227px; text-align: center; height: 27px;\">Treatment: Excision</td>\n<td style=\"width: 239px; text-align: center; height: 27px;\">Treatment: Excision</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Minimum and maximum score in revised trauma score (RTS) is__________",
    "choices": [
      {
        "id": 1,
        "text": "1,6"
      },
      {
        "id": 2,
        "text": "0,12"
      },
      {
        "id": 3,
        "text": "3,12"
      },
      {
        "id": 4,
        "text": "0,6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Minimum and maximum score in revised trauma score(RTS) is 0 and 12 respectively.</p>\n<p>Components of revised trauma score includes :</p>\n<ul>\n<li>GCS</li>\n<li>Respiratory rate</li>\n<li>Systolic BP</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "FAST investigation is helpful in assessing____________",
    "choices": [
      {
        "id": 1,
        "text": "Splenic injury"
      },
      {
        "id": 2,
        "text": "Morisson\u2019s pouch"
      },
      {
        "id": 3,
        "text": "Pouch of douglus"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>FAST is helpful in assessing all of the above including splenic injury, morrison\u2019s pouch and pouch of douglus.</p>\n<p><strong> FAST</strong> is a\u00a0<strong>rapid diagnostic examination</strong>\u00a0to assess patients with\u00a0<strong>potential thoracoabdominal injuries</strong>. It is performed\u00a0within 2\u00ad-4 minutes.</p>\n<p><strong>Technique:</strong></p>\n<ul>\n<li>Patient in supine position</li>\n<li>3.5-5.0 MHz convex\u00a0transducer</li>\n<li>Five regions may be scanned :\n<ul>\n<li>subxiphoid transverse view: assess for pericardial effusion and left lobe liver injuries</li>\n<li>longitudinal view of the right upper quadrant: assess for right liver injuries, right kidney injury, and Morison pouch</li>\n<li>longitudinal view of the left upper quadrant: assess for splenic injury and left kidney injury t</li>\n<li>ransverse and longitudinal views of the suprapubic region: assess the bladder and pouch of Douglas</li>\n</ul>\n</li>\n</ul>\n<p>An \"extended FAST or eFAST\" scan may be performed: left and right thoracic views to assess for pneumothorax and haemothorax.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which phase of damage control surgery focuses on the correction of coagulopathy?",
    "choices": [
      {
        "id": 1,
        "text": "Phase 1"
      },
      {
        "id": 2,
        "text": "Phase 2"
      },
      {
        "id": 3,
        "text": "Phase 3"
      },
      {
        "id": 4,
        "text": "Phase 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Phase 2</strong> of <strong>damage control surgery</strong> focuses on the <strong>correction</strong> of <strong>coagulopathy</strong>, hypothermia and acidosis.</p>\n<p>Damage control surgery&nbsp;is<strong>&nbsp;</strong>minimal intervention done to stabilize the patient and do the definite surgery later<strong>.&nbsp;</strong>It centres on coordinating&nbsp;<strong>staged operative interventions&nbsp;</strong>with periods of aggressive resuscitation to salvage trauma patients sustaining major injuries.&nbsp;</p>\n<p>It includes&nbsp;an&nbsp;abbreviated laparotomy,&nbsp;temporary packing, and&nbsp;closure of the abdomen&nbsp;in an e\ufb00ort to&nbsp;blunt the physiologic response to prolonged shock&nbsp;and&nbsp;massive haemorrhage.</p>\n<p>Phases of damage control surgery are:&nbsp;</p>\n<ul>\n<li><strong>Phase I </strong>(<strong>initial exploration</strong>) - this phase consists of an&nbsp;initial operative exploration&nbsp;to attain rapid&nbsp;control of active hemorrhage&nbsp;and&nbsp;contamination</li>\n<li><strong>Phase II </strong>(<strong>secondary resuscitation</strong>) -&nbsp;this phase focuses on&nbsp;secondary resuscitation&nbsp;to&nbsp;correct hypothermia, coagulopathy&nbsp;and&nbsp;acidosis</li>\n<li><strong>Phase III</strong> (<strong>definitive operation</strong>) - this phase consists of&nbsp;planned re-exploration&nbsp;and&nbsp;definitive repair&nbsp;of injuries. It typically occurs&nbsp;48&nbsp;to&nbsp;72 hours following initial&nbsp;and&nbsp;after successful secondary resuscitation.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old man was rushed to the ER after a motorbike accident causing a head injury. He was confused, could open eyes on command and was withdrawing on painful stimuli. His GCS score is __________",
    "choices": [
      {
        "id": 1,
        "text": "9"
      },
      {
        "id": 2,
        "text": "11"
      },
      {
        "id": 3,
        "text": "12"
      },
      {
        "id": 4,
        "text": "13"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Since the patient is</p>\n<ul>\n<li>Confused \u2013 V4</li>\n<li>Opens eye on command \u2013 E3</li>\n<li>Withdraws to painful stimuli \u2013 M4</li>\n</ul>\n<p>Therefore the GCS score is 4+3+4 =<strong>11</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man presented with right-sided chest pain and paradoxical respiration after he fell off a tree. The chest X-ray is shown below. Which of the following should be avoided in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Oxygenation"
      },
      {
        "id": 2,
        "text": "Mechanical ventilation"
      },
      {
        "id": 3,
        "text": "Strapping"
      },
      {
        "id": 4,
        "text": "Physiotherapy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and the X-ray showing&nbsp;<strong>contiguous rib fractures</strong>&nbsp;on the right side suggest <strong>flail chest. Chest strapping&nbsp;</strong>or<strong>&nbsp;splinting</strong> should be <strong>avoided</strong> in the management of a flail chest.&nbsp;Mechanically impairing the chest wall movements along with the underlying lung contusions contribute to hypoxia.</p>\n<p>A flail chest occurs when <strong>3 or more ribs</strong> are fractured in 2 or more places usually due to blunt trauma. It can increase the risk of developing <strong>pneumothorax</strong> and hemothorax.</p>\n<p>Diagnosis is made clinically by observing the&nbsp;paradoxical motion&nbsp;of the chest wall segment during respiration (<strong>paradoxical respiration</strong>). On inspiration, the loose segment of the chest wall gets displaced inwards and moves outwards on expiration. The gold standard investigation is a <strong>CT scan</strong> with contrast, with a 3-D reconstruction of the chest wall, displaying the vascular structures.</p>\n<p>Treatment&nbsp;consists of<strong> oxygen</strong> administration, adequate <strong>analgesia</strong> (including opiates), epidural analgesia, and physiotherapy.&nbsp;Mechanical ventilation is recommended to treat respiratory failure despite adequate analgesia and oxygen.</p>\n<p>The chest X-ray shows contiguous rib fractures on the right side of the chest:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7e4ab585202c49edb41f5041faaaa7e9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f601371796641b9864fa38d702dd58ex850x700.JPEG"
    ]
  },
  {
    "text": "A man presents to the emergency with a clean lacerated wound on his forearm. You use the given suturing technique to close his wound. Which of the following statements is false?",
    "choices": [
      {
        "id": 1,
        "text": "This technique has the least cut through rate"
      },
      {
        "id": 2,
        "text": "The wound edges should be everted"
      },
      {
        "id": 3,
        "text": "Interrupted sutures are used to approximate the wound"
      },
      {
        "id": 4,
        "text": "After the first bite, the needle should emerge at the of center the wound"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>interrupted sutures. Horizontal mattress sutures</strong>, not interrupted sutures,<strong>\u00a0</strong>have the<strong> least cut-through rate.</strong></p>\n<p>In <strong>mattress suture,</strong> the initial suture is inserted as an interrupted suture, but then the needle either moves horizontally or vertically and traverses both edges of the wound once again as seen in the picture.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c2f40398b32e48c2b29a91b2813f3c96.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1354c5738ae54d7b805dad046f5d18fcx1280x1238.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/04b54f8e9bbb4e528cc4e5f1dfe2cefex1280x1143.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cb548a84dabb498499d899bf9a92acedx1200x1196.JPEG"
    ]
  },
  {
    "text": "Most common type of trachea oesophageal fistula(TEF) is___________",
    "choices": [
      {
        "id": 1,
        "text": "A.\tEosophageal atresia with proximal TEF"
      },
      {
        "id": 2,
        "text": "Eosophageal atresia with distal TEF"
      },
      {
        "id": 3,
        "text": "Eosophageal atresia with double TEF"
      },
      {
        "id": 4,
        "text": "Isolated TEF"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common type of TEF is <strong>proximal esophageal atresia with distal TEF</strong>, the proximal blind pouch ends approximately at the distance of one or two vertebral bodies from the distal TEF.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common GI surgical emergency in neonatal period is__________",
    "choices": [
      {
        "id": 1,
        "text": "Biliary atresia"
      },
      {
        "id": 2,
        "text": "Duodenal atresia"
      },
      {
        "id": 3,
        "text": "Malrotation"
      },
      {
        "id": 4,
        "text": "Necrotizing enterocolitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most common GI surgical emergency in neonatal period is <strong>necrotizing enterocolitis</strong>.</p>\n<p><strong>Necrotizing enterocolitis:</strong></p>\n<ul>\n<li><strong>Prematurity</strong>&nbsp;is the single most important risk factor.</li>\n<li>Acute abdominal distension, tenderness, and feeding intolerance with gross or occult&nbsp;<strong>blood in the stool</strong>&nbsp;are hallmark features for NEC.</li>\n<li>NEC typically occurs in the&nbsp;<strong>first few days</strong>&nbsp;of life with the initiation of enteral feedings.</li>\n<li>The pathognomic radiographic feature of NEC is&nbsp;<strong>pneumatosis intestinalis</strong>. Pneumatosis is composed of hydrogen gas generated by the bacterial fermentation of luminal substrates.</li>\n<li>Initial management is&nbsp;<strong>medical</strong>&nbsp;(successful in 50% of the cases), the absolute indication for surgery is&nbsp;<strong>perforation.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about mesothelioma?",
    "choices": [
      {
        "id": 1,
        "text": "Male > Female"
      },
      {
        "id": 2,
        "text": "Can arise from the peritoneum"
      },
      {
        "id": 3,
        "text": "Serpentine asbestos fibers can travel beyond larger airways"
      },
      {
        "id": 4,
        "text": "More favourable prognosis in epithelial type"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Asbestos exposure is a risk factor for mesothelioma. Serpentine asbestos fibers are large and curly and cannot travel beyond larger airways. However, <strong>straight amphibole fibers </strong>such as the\u00a0<strong>crocidolite fibers</strong> navigate distally\u00a0into the pulmonary parenchyma.</p>\n<p>Other options:</p>\n<ul>\n<li>Malignant mesothelioma is the most common tumor of\u00a0the\u00a0pleura and in 20% cases\u00a0tumor can arise from the peritoneum.</li>\n<li>More common in\u00a0<strong>males </strong>and most common\u00a0<strong>after 40 years\u00a0</strong>of age.</li>\n<li><strong>Epithelial </strong>type has<strong>\u00a0</strong>more\u00a0<strong>favorable prognosis</strong> than sarcomatous and biphasic type<strong>.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is a double-barrelled aorta seen?",
    "choices": [
      {
        "id": 1,
        "text": "Syphilitic aneurysm"
      },
      {
        "id": 2,
        "text": "Atherosclerotic aneurysm"
      },
      {
        "id": 3,
        "text": "Giant cell arteritis"
      },
      {
        "id": 4,
        "text": "Aortic dissection"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A <strong>double-barrelled aorta</strong> is seen in<strong>\u00a0</strong>an<strong> aortic dissection</strong>.</p>\n<p>An aortic dissection usually initiates with an intimal tear.\u00a0In some instances, the dissecting <strong>hematoma reenters the lumen</strong> of the aorta through a second distal intimal tear, creating a new vascular channel and forming a double-barreled aorta with a false channel.</p>\n<p>Acute aortic dissection can be classified by the original <strong>DeBakey system,</strong> based on <strong>location </strong>of proximal tear and distal extent of the dissection flap, or the <strong>Stanford system</strong> that uses location of <strong>proximal tear alone.\u00a0</strong></p>\n<p>DeBakey system:</p>\n<div class=\"page\" title=\"Page 2585\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Type I: involves the ascending aorta and extends through the aortic arch and into the descending aorta/abdominal aorta</li>\n<li>Type II: confined to the ascending aorta</li>\n<li>Type IIIa: limited to the descending aorta</li>\n<li>Type IIIb: descending aorta and abdominal aorta</li>\n</ul>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3e91fa419aa1443fa922879c661460cex1280x2908.JPEG"
    ]
  },
  {
    "text": "Calf tenderness on direct pressure on calf is known as___________",
    "choices": [
      {
        "id": 1,
        "text": "Homan\u2019s sign"
      },
      {
        "id": 2,
        "text": "Moses sign"
      },
      {
        "id": 3,
        "text": "Pratt\u2019s sign"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Calf tenderness on direct pressure on calf is known as <strong>Moses sign,\u00a0</strong>also known as\u00a0<strong>Bancroft's sign.</strong></li>\n<li>Calf tenderness on forced ankle dorsiflexion is known as<strong> Homans sign.</strong></li>\n<li>Calf tenderness on squeezing the calf from sides is known as <strong>Pratt\u2019s sign</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presents to the casualty with complaints of recurrent episodes of syncope and cramping of his left arm. Symptoms mostly occur during his evening badminton practice sessions.  Which of the following is incorrect about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Due to occlusion in the 3rd part of subclavian artery"
      },
      {
        "id": 2,
        "text": "Distal pulse of the affected side is feeble"
      },
      {
        "id": 3,
        "text": "CT angiography is used to visualize retrograde blood flow"
      },
      {
        "id": 4,
        "text": "Management includes angioplasty and stenting"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario points to a diagnosis of <strong>subclavian steal syndrome</strong>. In subclavian steal syndrome, the\u00a0<strong>first part of </strong>the<strong> subclavian artery</strong> is<strong> occluded.</strong></p>\n<p>Subclavian steal syndrome is characterized by the presence of stenosis in the first part of the subclavian artery either due to atherosclerotic changes or emboli. It leads to\u00a0<strong>reversed flow </strong>in the<strong> vertebral artery</strong>\u00a0causing cerebral ischemia.</p>\n<p>Symptoms include dizziness, syncope on arm exercise. Occasionally, distal pulses in the arm of the affected side are found to be feeble.</p>\n<p>Investigations include duplex ultrasonography, CT, and MR angiography.</p>\n<p>It can be treated by <strong>angioplasty, stenting\u00a0</strong>or by extra-thoracic subclavian<strong> bypass.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80f4b89f026c4d9289fee9d0f590da3ex1280x1725.JPEG"
    ]
  }
];
        let quizName = 'Surgery Test Ii (Hernia, Gastrointestinal And Abdominal Surgery, Trauma, Urology, Cardiothoracic Vascular Surgery, Instruments, Pediatric Surgery)';
        const quizFilename = 'surgery-test-ii-hernia-gastrointestinal-and-abdominal-surgery-trauma-urology-cardiothoracic-vascular-surgery-instruments-pediatric-surgery-b971644d.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>