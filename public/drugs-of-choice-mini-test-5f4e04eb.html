<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drugs Of Choice Mini Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "An unresponsive child is brought to the ER. His BP is not recordable, pulse rate is 40 per minute. CPR is initiated but his SpO2 is 70% despite proper oxygenation and ventilation, and pulse rate is not improving. What is the next best step of management?",
    "choices": [
      {
        "id": 1,
        "text": "IV atropine"
      },
      {
        "id": 2,
        "text": "IV epinephrine"
      },
      {
        "id": 3,
        "text": "IV dopamine"
      },
      {
        "id": 4,
        "text": "IV adenosine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Epinephrine</strong> is the<strong> drug of choice </strong>for treating <strong>bradycardia in infants and children.</strong> The recommended dose is <strong>0.01 mg/ kg of a 1:10,000 solution</strong>. It can be given intravenously or via the intraosseous route. It can be repeated every 3-5 minutes.</p>\n<p>If intravenous or intraosseous access cannot be obtained, then it can be administered via the endotracheal route at a dose of 0.1 mg/kg of a 1:1,000 solution.</p>\n<p>If epinephrine is not effective in increasing the heart rate, then atropine can be used with a dose of 0.02 mg/kg and repeated.</p>\n<p><strong>For adults, treatment is initiated with 1 mg atropine iv</strong> which may be repeated at 3-5 minute intervals to a <strong>maximum</strong> dose of <strong>3 mg</strong>. Along with atropine, transcutaneous pacing is to be done.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 44-year-old woman from Assam presented with fever and chills recurring every 48 hours. On examination, she was conscious, oriented, and febrile. CBC, LFT, and RFT were normal. Peripheral smear revealed the following. What is the drug of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Quinine"
      },
      {
        "id": 2,
        "text": "Artesunate and sulphadoxine-pyrimethamine"
      },
      {
        "id": 3,
        "text": "Artemether and lumefantrine"
      },
      {
        "id": 4,
        "text": "Chloroquine and pyrimethamine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario and peripheral smear showing crescent-shaped gametocytes are suggestive of <strong>uncomplicated</strong>&nbsp;<strong>falciparum malaria</strong>. As this woman is from a <strong>North-Eastern state</strong>, the drug regimen of choice&nbsp;is <strong>ACT-AL</strong> (artemisinin combination therapy):&nbsp;</p>\n<ul>\n<li><strong>Artemether </strong>(20mg)</li>\n<li><strong>Lumefantrine </strong>(120mg) <strong>&nbsp;</strong></li>\n</ul>\n<p>This regimen is followed in the North-Eastern states of India due to documented resistance to<strong>&nbsp;</strong>sulphadoxine-pyrimethamine in these areas. ACT-AL is <strong>contraindicated</strong> in:</p>\n<ul>\n<li><strong>1<sup>st</sup> trimester</strong> of pregnancy</li>\n<li>Children&nbsp;<strong>&lt; 5 kg</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/39374e8ae8ff4766ab580e0847668af7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Propranolol is drug of choice for:",
    "choices": [
      {
        "id": 1,
        "text": "Ulcerated infantile hemangioma"
      },
      {
        "id": 2,
        "text": "Lymphangioma circumscriptum"
      },
      {
        "id": 3,
        "text": "Capillary malformation"
      },
      {
        "id": 4,
        "text": "Pyogenic granuloma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Propranolol&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is the </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>drug of choice </strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">in the management of </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>infantile&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>hemangioma&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">complicated by ulceration or in symptomatic patients.&nbsp;</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">It acts by causing </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">vasoconstriction</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">, inducing </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">apoptosis</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">&nbsp;and&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">inhibition of angiogenesis.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old farmer presents with fever, weight loss, and lower backache for three weeks. Blood reports show predominant lymphocytosis. What are the drugs of choice for treating this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Cotrimoxazole and rifampicin"
      },
      {
        "id": 2,
        "text": "Doxycycline and cotrimoxazole"
      },
      {
        "id": 3,
        "text": "Doxycycline and streptomycin"
      },
      {
        "id": 4,
        "text": "Streptomycin and rifampicin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario of a farmer with fever, weightloss and back pain with a predominant lymphocytosis points towards a diagnosis of <strong>acute\u00a0brucellosis.</strong>\u00a0The <strong>drugs of choice</strong> for this condition in adults are\u00a0<strong>intramuscular\u00a0streptomycin</strong>\u00a0with <strong>doxycycline.\u00a0</strong></p>\n<p>The usual <strong>alternative</strong> regimen (and the current World Health\u00a0Organization recommendation) is <strong>rifampin plus\u00a0doxycycline</strong>. However, this is associated with a <strong>higher relapse</strong> rate, possibly because rifampicin increases clearance of doxycycline and reduces serum doxycycline levels.\u00a0</p>\n<p>In <strong>children</strong>, <strong>cotrimoxazole</strong> along with <strong>rifampicin</strong> or gentamycin may be used for the treatment of brucellosis.</p>\n<p>Note:<em> B. melitensis</em>\u00a0is<strong> endemic</strong> to the <strong>Middle East</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the treatment of choice for type 1 bipolar disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Lithium"
      },
      {
        "id": 2,
        "text": "Valproate"
      },
      {
        "id": 3,
        "text": "Carbamezepine"
      },
      {
        "id": 4,
        "text": "Lamotrigine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Treatment of choice for type 1 bipolar disorder is&nbsp;Lithium.</p>\n<p>Lithium is the <strong>only mood stabilizer that has proven data for reduction of suicides</strong> in bipolar patients on long-term use.</p>\n<p>Lamotrigine may be useful in&nbsp;patients with type II bipolar disorder.</p>\n<p>Valproate and&nbsp;Carbamazepine are used in the treatment of acute mania.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old man is diagnosed with cholera. Which of the following drug would you prescribe to his family members to prevent the spread of the disease?",
    "choices": [
      {
        "id": 1,
        "text": "Tetracycline"
      },
      {
        "id": 2,
        "text": "Azithromycin"
      },
      {
        "id": 3,
        "text": "Ciprofloxacin"
      },
      {
        "id": 4,
        "text": "Cotrimoxazole"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tetracycline</strong> is the drug of choice for <strong>chemoprophylaxis</strong> of cholera.</p>\n<p>It should be given for:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Adults - a 3-day period in a twice-daily dose of 500mg</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Children (4-13 years) - 125mg</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Children (0-3 years) - 50mg</li>\n</ul>\n<p><strong>Alternatively</strong>, the long-acting tetracycline (doxycycline) may be used for chemoprophylaxis, if the prevailing strains are not resistant. A single oral dose of <strong>doxycycline</strong> (300 mg for adults and 6 mg/kg for children under 15 years) has proved to be effective.</p>\n<p>Chemoprophylaxis is advised only for <strong>household contacts</strong> or a <strong>closed community </strong>in which cholera has occurred.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient undergoing evaluation for multiple gastroduodenal ulcers was diagnosed with Zollinger-Ellison syndrome. What would be the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Proton pump inhibitors"
      },
      {
        "id": 2,
        "text": "H2 blockers"
      },
      {
        "id": 3,
        "text": "Sucralfate"
      },
      {
        "id": 4,
        "text": "Prostaglandin analogs"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Proton-pump inhibitors </strong>are the drug of choice in<strong> Zollinger&ndash;Ellison syndrome.</strong>&nbsp;</p>\n<p>Zollinger Ellison syndrome includes pancreatic or duodenal <strong>gastrinoma</strong> which leads to the <strong>secretion</strong> of large amounts of <strong>gastrin.</strong> This, in turn, <strong>increases</strong> gastric <strong>acid</strong> leading to severe <strong>gastroduodenal ulceration</strong> and other effects of <strong>hyperchlorhydria.</strong></p>\n<p>Note: Netazepide is a gastrin/cholecystokinin-2 receptor antagonist used in the treatment of gastrinoma. It&nbsp;is also an antisecretory agent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man working in a rabbit farm presents with fever, lymphadenopathy and an ulcer on the hand and is diagnosed with tularemia. What is the drug of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Amikacin"
      },
      {
        "id": 2,
        "text": "Neomycin"
      },
      {
        "id": 3,
        "text": "Kanamycin"
      },
      {
        "id": 4,
        "text": "Streptomycin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Streptomycin </strong>(if not available, gentamicin) is considered the drug of choice for the treatment of <strong>tularemia</strong>.</p>\n<p>Tularemia is caused by <em>Francisella tularensis</em>, an aerobic gram-negative bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with abdominal pain. Imaging revealed a mass in the small intestine and a lesion in the liver. A diagnosis of a c-KIT positive gastrointestinal stromal tumor with liver metastasis was made on further evaluation. What is the drug of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Imatinib"
      },
      {
        "id": 2,
        "text": "Bevacizumab"
      },
      {
        "id": 3,
        "text": "Denosumab"
      },
      {
        "id": 4,
        "text": "Rituximab"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The drug of choice for the management of a patient with a&nbsp;<strong>metastatic gastrointestinal stromal tumor</strong> is <strong>imatinib.&nbsp;</strong></p>\n<p>It is an <strong>oral</strong> anticancer drug that acts by <strong>inhibiting tyrosine kinase</strong> activated due to BCR-ABL fusion. It also inhibits other related tyrosine kinases and hence is used in the treatment of conditions like gastrointestinal stromal tumor (driven by a<strong> c-KIT mutation).</strong></p>\n<p>Imatinib is the agent of choice for GIST patients with metastatic disease and as adjuvant therapy for c-kit positive GIST.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is used as a first-line choice in preventing vertical transmission of hepatitis B from a mother to fetus?",
    "choices": [
      {
        "id": 1,
        "text": "Tenofovir"
      },
      {
        "id": 2,
        "text": "Lamivudine"
      },
      {
        "id": 3,
        "text": "Adefovir"
      },
      {
        "id": 4,
        "text": "Zidovudine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tenofovir</strong> is used as the <strong>first-line choice&nbsp;</strong>in preventing vertical transmission of hepatitis B from the mother to fetus. This is because of the <strong>lower incidence of development of resistance</strong> to this drug.</p>\n<p>Because of the <strong>high risk for the development of resistance,</strong> <strong>lamivudine</strong>&nbsp;is no longer considered as the first-line agent in the treatment of active hepatitis B during pregnancy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old female was diagnosed to have primary biliary cirrhosis and requires liver transplantation. Which of the following neuromuscular blocker of choice can be used in this patient during the transplantation procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Cisatracurium"
      },
      {
        "id": 2,
        "text": "Pancuronium"
      },
      {
        "id": 3,
        "text": "Vecuronium"
      },
      {
        "id": 4,
        "text": "Rocuronium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: justify;\">The neuromuscular blocker (NMB) of choice in a cirrhotic patient is <strong>cisatracurium.</strong>&nbsp;</p>\n<p style=\"text-align: justify;\">It&nbsp;is used as NMB of choice because&nbsp;of its <strong>nonhepatic metabolism.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 17-year-old boy presents with painless hematuria. He has a history of travel to Kenya. Urine microscopy revealed the finding shown below. What is the drug of choice in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Albendazole"
      },
      {
        "id": 2,
        "text": "Mebendazole"
      },
      {
        "id": 3,
        "text": "Praziquantel"
      },
      {
        "id": 4,
        "text": "Triclabendazole"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario and the image showing the <strong>egg</strong> of <em><strong>Schistosoma hematobium</strong></em> (egg with terminal spine), point towards the diagnosis of schistosomiasis.&nbsp;<strong>Praziquantel</strong> is the drug of choice for <strong>schistosomiasis</strong> caused by all Schistosoma species that can infect humans.</p>\n<p>A single oral dose of 40 mg/kg&nbsp;or three doses of 20 mg/kg each, given 4&ndash;6 h apart, generally produce cure&nbsp;rates of 70%&ndash;95% and consistently high reductions (&gt;85%) in egg counts.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5b1873018b6449e5850fa0ec858dce74.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old female was brought to the hospital with complaints of recurrent episodes of acute onset breathlessness, palpitations, sweating and dizziness for the past 2 months. Physical examination and laboratory investigations were normal. Which of the following is the drug of choice in the treatment of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Selective serotonin reuptake inhibitors"
      },
      {
        "id": 2,
        "text": "Benzodiazepines"
      },
      {
        "id": 3,
        "text": "Monoamine oxidase inhibitors"
      },
      {
        "id": 4,
        "text": "Buspirone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The clinical features of recurrent panic attacks suggest a diagnosis of <strong>panic disorder</strong>. <strong>Selective serotonin reuptake inhibitors</strong> are the <strong>drug of choice</strong> in panic disorder.</p>\n<p>Option B: <strong>Benzodiazepines</strong> are used in <strong>acute attacks of panic disorder.</strong></p>\n<p>Option C: Monoamine oxidase inhibitors (<strong>MAOIs</strong>) and Tricyclic antidepressants (<strong>TCAs</strong>) are <strong>second-line</strong> drugs for <strong>panic disorder.</strong></p>\n<p>Option D: <strong>Buspirone</strong> is a second-line drug used in <strong>generalized anxiety disorder.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The partogram of a 26-year-old G2P1 woman is shown below. What is the prophylactic antibiotic of choice for this patient before definitive management is done?",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin"
      },
      {
        "id": 2,
        "text": "Cefazolin"
      },
      {
        "id": 3,
        "text": "Doxycycline"
      },
      {
        "id": 4,
        "text": "Ciprofloxacin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above partogram is suggestive of\u00a0<strong>obstructed labour</strong> and the definitive management in this case is <strong>caesarean </strong>section.\u00a0<strong>Cefazolin</strong> is an<strong> efficacious</strong> and <strong>cost-effective</strong> choice for antibiotic prophylaxis before caesarean section.</p>\n<p>According to the partogram, there is a secondary <strong>arrest of dilatation for &gt;2 hours</strong> and <strong>arrest of descent</strong> <strong>for &gt;1 hour</strong>. The <strong>amniotic fluid</strong> is <strong>stained with</strong> <strong>meconium</strong> and there is fall in fetal heart rate indicating <strong>fetal distress</strong>. Hence, the management plan is to perform a\u00a0caesarean section.</p>\n<p>The recommended prophylactic drug is a single intravenous dose of a <strong>\u03b2-lactam antimicrobial</strong>. This could either be a cephalosporin or an extended-spectrum penicillin derivative. A <strong>1 g</strong> dose of <strong>cefazolin</strong> is usually given. For <strong>obese</strong> women, a <strong>2 g</strong> dose is better to provide an adequate coverage.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c301d4ce63e541089d65739f2eb7839a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for rat bite fever is__________",
    "choices": [
      {
        "id": 1,
        "text": "Penicillin G"
      },
      {
        "id": 2,
        "text": "Cephalosporin"
      },
      {
        "id": 3,
        "text": "Amikacin"
      },
      {
        "id": 4,
        "text": "Tetracycline"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Drug of choice for rat bite fever is <strong>Penicillin G</strong>. It is considered to be treatment of choice for both forms of rat bite fever i.e <strong>Streptobacillus moniliformis and Spirillum minus</strong>.&nbsp;Penicillin resistance, though rare, but has been reported for S.moniliformis.</p>\n<p>Alternative drug: Streptomycin, tetracyclin, doxycycline.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old female came with complaints of greenish discharge per vaginum and on examination she had a strawberry cervix. Which of the following is the treatment for her",
    "choices": [
      {
        "id": 1,
        "text": "Doxycycline"
      },
      {
        "id": 2,
        "text": "Amoxicillin"
      },
      {
        "id": 3,
        "text": "Fluconazole"
      },
      {
        "id": 4,
        "text": "Metronidazole"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above case suggests Trichomonas vaginalis infection and the treatment of choice is<strong>&nbsp;metronidazole. </strong></p>\n<p>The greenish-colored vaginal discharge along with the <strong>strawberry cervix</strong> is characteristic of infection with Trichomonas vaginalis which can be an STD.</p>\n<p>The treatment regimen includes:</p>\n<ul>\n<li><strong>Metronidazole&nbsp;2 g orally in a single dose&nbsp;</strong>(or 400 mg 3 times/day for 5 days) is the standard treatment. It should be taken at&nbsp;night, after meals to avoid vomiting. If this too causes vomiting, or in resistant cases consider the use of alternative drugs.</li>\n<li>The alternative regimen includes&nbsp;<strong>tinidazole 2g as a single dose&nbsp;</strong>or secnidazole in a single dose of 2g. Single-dose therapy ensures better compliance.</li>\n<li>Both partners need to be given treatment at the same time to prevent the risk of recurrence.</li>\n</ul>\n<p>The given image below shows strawberry cervix in trichomonas infection:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c8f52714c45d4e1894fd9d6987618f39x253x237.PNG"
    ]
  },
  {
    "text": "A young girl was referred to the paediatrician with stage IV breast development and growth acceleration seen at the age of 5 years. Her estradiol concentrations were elevated. The sagittal MRI of the brain is as shown below. What is the treatment of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Cyproterone"
      },
      {
        "id": 2,
        "text": "Danazol"
      },
      {
        "id": 3,
        "text": "Medroxyprogesterone"
      },
      {
        "id": 4,
        "text": "GnRH agonists"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p style=\"text-align: justify;\">A <strong>pedunculated mass in the floor of the 3rd ventricle</strong>&nbsp;as shown in the MRI, with elevated levels of estrogen is suggestive of a <strong>Hypothalamic Hamartoma,&nbsp;</strong>which is the most common brain lesion causing central precocious puberty and is treated with GnRH agonists.&nbsp;</p>\n<p style=\"text-align: justify;\">Treatment of Hypothalamic Hamartoma-</p>\n<ul style=\"text-align: justify;\">\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>GnRH agonists</strong> (depot-forms or implant) are the treatment of choice of tumour-induced Central precocious puberty&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In patients with hypothalamic hamartoma and associated intractable <strong>gelastic or psychomotor seizures</strong>, stereotactic radiation therapy (<strong>Gamma Knife surgery</strong>) is more effective and has fewer risks than neurosurgical intervention.</li>\n</ul>\n<p style=\"text-align: justify;\"><br />Long-acting formulations of gonadotropin-releasing hormone (GnRH) agonists are the preparations of choice for the treatment of central precocious puberty as they maintain fairly constant serum concentrations of the drug for weeks or months.</p>\n<p style=\"text-align: justify;\">&nbsp;</p>\n<p style=\"text-align: justify;\">&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bf50df1b66e748b1823245b824f80ac7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 6-year-old boy who is a known case of sickle cell disease presents with acute chest syndrome. Which of the following is the drug of choice to reduce such painful crises in the future?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrocodone"
      },
      {
        "id": 2,
        "text": "Hydroxyurea"
      },
      {
        "id": 3,
        "text": "Corticosteroids"
      },
      {
        "id": 4,
        "text": "Ruxolitinib"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hydroxyurea</strong> is the&nbsp;<strong>drug of choice</strong> for <strong>reducing painful crises</strong> in sickle cell anemia.</p>\n<p>Hydroxyurea is a&nbsp;<strong>m</strong><strong>yelosuppressive agent&nbsp;</strong>that is effective in <strong>reducing</strong> the frequency of painful episodes like <strong>dactylitis and acute chest syndrome</strong>, decreasing the rate of hospitalization, and requirement for blood transfusion.&nbsp;It is&nbsp;safe and well-tolerated in children and infants.</p>\n<p>Option A: Hydrocodone (opioid) is used in the treatment of pain crisis in sickle cell anemia.</p>\n<p>Option C: Corticosteroids is one of the first-line therapies for acute idiopathic thrombocytic purpura (ITP) with risk factors for bleeding.</p>\n<p>Option D: Ruxolitinib is the drug of choice for the treatment of polycythemia vera.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the first line drug of choice in a patient with myasthenia gravis?",
    "choices": [
      {
        "id": 1,
        "text": "Azathioprine"
      },
      {
        "id": 2,
        "text": "Prednisone"
      },
      {
        "id": 3,
        "text": "Intravenous immunoglobulin"
      },
      {
        "id": 4,
        "text": "Pyridostigmine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Pyridostigmine</strong> is the <strong>first-line drug of choice</strong> in the treatment of symptomatic <strong>myasthenia gravis.</strong></p>\n<p>Treatment for myasthenia gravis involves:</p>\n<ul>\n<li class=\"bulletIndent1\"><strong>Symptomatic treatment</strong>: Anticholinesterase agents &ndash;&nbsp;Pyridostigmine is the initial therapy of choice.</li>\n<li class=\"bulletIndent1\"><strong>Chronic immunomodulating therapy</strong>: Glucocorticoids (prednisone) and immunosuppressive drugs (azathioprine, mycophenolate mofetil, cyclosporine) implemented in patients&nbsp;significantly symptomatic on pyridostigmine.</li>\n<li class=\"bulletIndent1\"><strong>Rapid immunomodulating treatment</strong>: IVIG and therapeutic plasma exchange&mdash;Used to tide over severe illness (myasthenic crisis) and as 'bridge' therapy before surgery, or starting chronic immunomodulating treatment.</li>\n<li class=\"bulletIndent1\"><strong>Surgical approach</strong>: Thymectomy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old boy was brought by his mother with new-onset nocturnal bedwetting. She also reported, he has been drinking more water for the last 3-4 months. 24-hour urine volume was 4 liters and the urine osmolality was low. ADH assays recorded a value was 0.7 pg/mL. T1 weighted MRI brain indicated an absence of a pituitary bright spot. What is the treatment of choice for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Leuprolide"
      },
      {
        "id": 2,
        "text": "Thiazide diuretics"
      },
      {
        "id": 3,
        "text": "Desmopressin"
      },
      {
        "id": 4,
        "text": "Terlipressin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of <strong>central</strong>&nbsp;<strong>diabetes insipidus</strong>. The treatment of choice is&nbsp;<strong>desmopressin</strong>. It is&nbsp;a <strong>vasopressin analog</strong> (V2 receptor agonist). It can be administered intranasally, or subcutaneously.&nbsp;</p>\n<p>Option A: Leuprolide&nbsp;is a&nbsp;<strong>GnRH</strong>&nbsp;(gonadotropin-releasing hormone)&nbsp;<strong>analog</strong>&nbsp;used in the treatment of prostate cancer, breast cancer, and endometriosis.</p>\n<p>Option B: Thiazides&nbsp;paradoxically exert an antidiuretic effect in DI but are not the drug of choice. They are generally used in&nbsp;<strong>nephrogenic DI.</strong></p>\n<p>Option D: Terlipressin&nbsp;is a long-acting analog on vasopressin that acts on V1 receptors of vascular smooth muscle. It is used as a vasopressor in shock and acute variceal bleeding.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 9-year-old child does not follow instructions, is disruptive, interferes when two people are talking, and cannot wait for his turn while playing a game. His teacher also complains that he is excessively talkative, disturbs other students, and is inattentive in class.  Which of the following is the drug of choice for the treatment of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Modafinil"
      },
      {
        "id": 2,
        "text": "Atomoxetine"
      },
      {
        "id": 3,
        "text": "Amitryptiline"
      },
      {
        "id": 4,
        "text": "Methylphenidate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>According to the given clinical scenario, the child has ADHD. <strong>Methylphenidate</strong> is the&nbsp;<strong>drug of choice</strong>&nbsp;for the treatment of <strong>ADHD in children.</strong></p>\n<p>Treatment of ADHD:</p>\n<ul>\n<li><strong>Stimulants</strong> (first-line medications) - Methylphenidate (drug of choice), amphetamines. These drugs have a rapid onset of action and are well tolerated. The most common adverse effect is decreased appetite.</li>\n<li><strong>Non-stimulants -&nbsp;</strong>atomoxetine (norepinephrine reuptake inhibitor), alpha-2 adrenergic agonists.</li>\n<li>Behavioral therapy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the anticoagulant of choice in a patient, who  is undergoing  a surgery requiring cardiopulmonary bypass ?",
    "choices": [
      {
        "id": 1,
        "text": "Lepirudin"
      },
      {
        "id": 2,
        "text": "Heparin"
      },
      {
        "id": 3,
        "text": "Fondaparinux"
      },
      {
        "id": 4,
        "text": "Dabigatran"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Heparin</strong> remains the agent of choice for surgery&nbsp;requiring cardiopulmonary bypass.</p>\n<p>Other options :&nbsp;</p>\n<ul>\n<li>Fondaparinux is not&nbsp;used because of the risk of catheter thrombosis, a complication&nbsp;caused by catheter-induced activation of factor XII.</li>\n<li>Lepirudin is used for treating thrombosis in &nbsp;case of heparin-induced&nbsp;thrombocytopenia.</li>\n<li>Dabigatran is used in treatment of acute venous&nbsp;thromboembolism.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The drug of choice for the management of acute  alcohol withdrawal is?",
    "choices": [
      {
        "id": 1,
        "text": "Disulfiram"
      },
      {
        "id": 2,
        "text": "Benzodiazepines"
      },
      {
        "id": 3,
        "text": "Fomepizole"
      },
      {
        "id": 4,
        "text": "Naltrexone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Benzodiazepines</strong> are the treatment of choice for the management of&nbsp;<strong>acute alcohol withdrawal.&nbsp;</strong>It is used to <strong>prevent the progression</strong> from minor withdrawal&nbsp;symptoms to major ones, such as <strong>seizures</strong> and <strong>delirium tremens</strong>.</p>\n<p>FDA-approved drugs used in the management of alcohol use disorder are:</p>\n<ul>\n<li><strong>Disulfiram:</strong>&nbsp;It inhibits the enzyme <strong>aldehyde dehydrogenase</strong>. It is used as an <strong>aversive drug</strong> and causes adverse effects when taken with alcohol. Therefore, it should not be administered until the patient has abstained&nbsp;from alcohol for at least 12 hours.</li>\n<li><strong>Naltrexone:</strong>&nbsp;It is a&nbsp;&mu;-opioid receptor antagonist. It decreased drinking by decreasing the feeling of reward with alcohol or decreasing craving.</li>\n<li><strong>Acamprosate:</strong>&nbsp;It may act by blocking hyperglutamatergic state and decreases craving.</li>\n<li><strong>Benzodiazepines:</strong>&nbsp;They act by increasing the binding of GABA to GABA<sub>A</sub> receptors. They are the&nbsp;<strong>drugs of choice</strong> for the management of <strong>acute alcohol withdrawal</strong>.</li>\n<li><strong>Fomepizole:</strong>&nbsp;It is used in the management of <strong>methanol poisoning</strong>. It acts by <strong>inhibiting</strong> the enzyme <strong>alcohol dehydrogenase</strong>.</li>\n</ul>\n<p>Other drugs that are commonly used&nbsp; in the management of alcohol use disorder, but not approved by the FDA are:</p>\n<ul>\n<li>Gabapentin: It blocks voltage-gated calcium channels</li>\n<li><strong>Varenicline</strong>: It is a partial or full agonist at central nicotinic AChR subtypes. It is used to decrease alcohol consumption and <strong>smoking cessation</strong>.</li>\n<li class=\"p1\">Nalmefene: It is an antagonist of &mu;- and &kappa;-opioid receptors. It is also used to treat opioid overdose or dependence.</li>\n<li class=\"p1\"><strong>Baclofen</strong>: It is a GABA<sub>B </sub>receptor agonist. It acts as a <strong>skeletal muscle relaxant</strong> and is used in the management of spasticity.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 41-year-old female presented with a one-month history of photophobia and foreign body sensation in her right eye. A slit-lamp examination showed a corneal ulcer. The culture of the corneal scrapings grew a filamentous organism identified as a fusarium species. What would be the drug of choice in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Natamycin"
      },
      {
        "id": 2,
        "text": "Nystatin"
      },
      {
        "id": 3,
        "text": "Fluconazole"
      },
      {
        "id": 4,
        "text": "Amphotericin B"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient with a one-month history of eye foreign body sensations and photophobia and slit lamp exam showing an ulcer that had fusarium growth most likely has a fungal corneal ulcer. <strong>Natamycin 5% </strong>suspension\u00a0is the drug of choice for <strong>filamentous fungal keratitis</strong> caused by <strong>fusariam</strong> species.\u00a0</p>\n<p>Surface debridement is also done as it helps to remove slough, reduce the load of infection and enhances drug penetration. Amphotericin B is particularly effective against yeasts but less effective against filamentous fungi. Also, its penetration through an intact epithelium is less than natamycin.</p>\n<p><strong>Amphotericin B i</strong>s the first <strong>agent of choice </strong>against<strong> yeasts. </strong>Amphotericin B (0.15%) drops can be considered alone or in combination with natamycin in refractory cases.</p>\n<p>Treatment of specific fungal corneal ulcers:</p>\n<p>Topical antifungal drops</p>\n<ul>\n<li><em>Aspergillus and Fusarium-\u00a0</em>Natamycin 5%, amphotericin B, fluconazole (0.2%)\u00a0</li>\n<li><em>Candida-\u00a0</em>Amphotericin B (0.15%) or econazole (1%)\u00a0</li>\n</ul>\n<p>Systemic antifungals such as itraconazole and voriconazole are used for severe <strong>non-responding cases</strong> or if the location of the ulcer is near the <strong>limbus</strong> or if there is a <strong>risk of perforation</strong> leading to endophthalmitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for hydatid cyst disease is ____________.",
    "choices": [
      {
        "id": 1,
        "text": "Albendazole"
      },
      {
        "id": 2,
        "text": "Mebendazole"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Metronidazole"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Albendazole is the drug of choice for hydatid cyst disease due to Echinococcus granulosus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 54-year-old farmer from Assam presented with the finding shown in the image.  He had also developed a painless swelling in his elbow 2 years back which has gradually been increasing in size.  Which of the following is the drug of choice to treat this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Eflornithine"
      },
      {
        "id": 2,
        "text": "Suramin"
      },
      {
        "id": 3,
        "text": "Ivermectin"
      },
      {
        "id": 4,
        "text": "Diethylcarbamazine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A painless swelling in the elbow and image showing <strong>sclerosing keratitis</strong> are suggestive of <strong>onchocerchiasis </strong>(river blindness). The drug of choice is <strong>ivermectin.\u00a0</strong></p>\n<p>Onchocerchiasis is caused by <strong><em>Onchocerca volvulus</em>.\u00a0</strong>It is also known as convoluted filaria or blinding filaria. The vector is blackfly (<em>Simulium</em> species) which breeds in fast-flowing rivers. Thus, the disease is most commonly seen along the course of rivers and is also called <strong>river blindness</strong>.</p>\n<p>Patients usually present with a <strong>subcutaneous nodule</strong> or onchocercoma. It is a firm,non-tender nodule arising from bony sites like scalp, elbow, ribs, and iliac crest. It is associated with pruritus and rashes. The presence of microfilaria in the eyes causes photophobia and gradual loss of vision. The most severe manifestations are <strong>sclerosing keratitis</strong> and <strong>chorioretinitis</strong>, leading to blindness. It is the 2<sup>nd</sup>\u00a0major infective cause of blindness in the world after trachoma.</p>\n<p>Suramin and diethylcarbamazine (DEC) were used earlier for its treatment but are not used nowadays. <strong>DEC</strong> destroys microfilariae but usually causes\u00a0<strong>Mazzotti reaction</strong> consisting of pruritus, rash,\u00a0lymphadenopathy, fever, hypotension, and occasionally,\u00a0eye damage.</p>\n<p>Note: Onchocerciasis is not endemic in India but sporadic cases have been reported from North-Eastern India.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/071a39c1b056476c9f171ef58db6951d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old child is posted for an elective tonsillectomy. Which drug will you use to facilitate his intubation?",
    "choices": [
      {
        "id": 1,
        "text": "Vecuronium"
      },
      {
        "id": 2,
        "text": "Rocuronium"
      },
      {
        "id": 3,
        "text": "Suxamethonium"
      },
      {
        "id": 4,
        "text": "Pancuronium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Rocuronium</strong> is the drug of choice during routine intubation in<strong> pediatric patients</strong> due to its <strong>faster onset</strong> of action and its availability as an intramuscular injection.</p>\n<p>Succinylcholine is avoided for routine, elective intubation in children due to its side effects.&nbsp;The only indication for intravenous <strong>succinylcholine</strong> in children is<strong> rapid sequence</strong><strong>&nbsp;induction </strong>with a &ldquo;full&rdquo; stomach and <strong>laryngospasm</strong>.</p>\n<p>The durations of action of vecuronium and pancuronium are prolonged in children due to immature hepatic function.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old Mexican male had a tick bite following which he develops fever, headache, and rashes. Later he is diagnosed with Rocky Mountain Spotted Fever. What is the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Chloramphenicol"
      },
      {
        "id": 2,
        "text": "Doxycycline"
      },
      {
        "id": 3,
        "text": "Erythromycin"
      },
      {
        "id": 4,
        "text": "Azithromycin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Drug of choice for&nbsp; <strong>Rocky Mountain Spotted Fever(RMSF)</strong> is&nbsp;<strong>Doxycycline.</strong></p>\n<p>RMSF is caused by&nbsp;Rickettsia rickettsii. It is usually transmitted by ticks. Fever, headache, malaise, myalgia, nausea, vomiting, and anorexia are the most common symptoms during the first 3 days. Rash is evident in only 14% of patients on the first day of illness .</p>\n<p>The most common serologic test for confirmation of the diagnosis is the indirect immunofluorescence assay.</p>\n<p class=\"p1\">The drug of choice for the treatment of both children and adults with RMSF is doxycycline. It is administered orally at 100 mg twice daily.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged man was brought to the ED with suspected morphine overdose. He was intubated and mechanical ventilation was started. What is the drug of choice to be administered in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "IV Naloxone"
      },
      {
        "id": 2,
        "text": "IM Methadone"
      },
      {
        "id": 3,
        "text": "IV Clonidine"
      },
      {
        "id": 4,
        "text": "Oral Naltrexone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Intravenous naloxone</strong> is the drug of choice in acute morphine overdose.</p>\n<p>The <strong>first step</strong> is to ensure an <strong>adequate airway</strong>. Intubation and mechanical ventilation may be necessary.</p>\n<p>IV<strong>&nbsp;</strong>Naloxone is administered at a slow rate. Signs of improvement (increased respiratory rate and pupillary dilation) should occur promptly. If no response to the initial dosage, repeat after a few minutes. Repeated administration may be required to prevent recurrence of opioid toxicity because the duration of action of naloxone is less.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the drug of choice in patients with onchocerciasis?",
    "choices": [
      {
        "id": 1,
        "text": "Albendazole"
      },
      {
        "id": 2,
        "text": "Praziquentel"
      },
      {
        "id": 3,
        "text": "Ivermectin"
      },
      {
        "id": 4,
        "text": "Diethylcarbamazine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ivermectin</strong> is the drug of choice for <strong>onchocerciasis</strong> caused by <em>Oncocerca volvulus</em> in adults and children aged more than 5 years.&nbsp;</p>\n<p>Ivermectin is the drug of choice for:&nbsp;</p>\n<ul>\n<li>Strongyloidiasis</li>\n<li>Onchocerciasis</li>\n</ul>\n<p>It is associated with<strong>&nbsp;Mazzotti reaction</strong> (fever, pruritic rash, lymphadenopathy) as a side effect&nbsp;when given for filariasis due to immune system activation by the dying parasite. This reaction is also seen with the use of <strong>diethylcarbamazine</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old multiparous woman who presented with chronic lower abdominal pain has been diagnosed with chronic PID. What is the treatment of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Radical hysterectomy"
      },
      {
        "id": 2,
        "text": "Supracervical hysterectomy with tuboplasty"
      },
      {
        "id": 3,
        "text": "Abdominal hysterectomy with bilateral salpingo-oophorectomy"
      },
      {
        "id": 4,
        "text": "Supracervical hysterectomy with bilateral salpingectomy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>treatment of choice</strong> for an old&nbsp;multiparous woman&nbsp;with chronic PID is <strong>abdominal hysterectomy</strong> <strong>with bilateral</strong> <strong>salpingo-oophorectomy</strong>.</p>\n<p>A <strong>radical hysterectomy</strong> involves the removal of the whole uterus, tissue from the sides of the uterus, the cervix, and the upper part of the vagina. It is generally done only in <strong>cancer</strong> patients.</p>\n<p>A <strong>supracervical hysterectomy</strong> involves the removal of only the body of the uterus and is not done in chronic PID. It is done for the treatment of<strong>&nbsp;endometriosis</strong>, uterine<strong> fibroids</strong>, and uterine <strong>prolapse</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the treatment of choice for juvenile myoclonic epilepsy in pregnancy?",
    "choices": [
      {
        "id": 1,
        "text": "Levetiracetam"
      },
      {
        "id": 2,
        "text": "Carbamazepine"
      },
      {
        "id": 3,
        "text": "Vigabatrin"
      },
      {
        "id": 4,
        "text": "Phenytoin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The drug of choice for <strong>juvenile myoclonic epilepsy</strong>&nbsp;(JME) in pregnancy is <strong>levetiracetam</strong>. <strong>Lamotrigine</strong>&nbsp;or levetiracetam are <strong>alternative</strong> first-line in pregnancy as they have fewer teratogenic effects.</p>\n<p>The drug of choice for JME is <strong>valproate</strong>.&nbsp;However, in pregnant women or women of childbearing age, valproate should be avoided because of the increased risks of fetal malformations and neurodevelopmental delay.</p>\n<p>Carbamazepine, vigabatrin, and phenytoin are <strong>not indicated</strong> in juvenile myoclonic epilepsy as they may <strong>worsen myoclonic jerks</strong> and<strong> absence</strong> <strong>seizures.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for ethylene glycol poisoning is",
    "choices": [
      {
        "id": 1,
        "text": "Ethanol"
      },
      {
        "id": 2,
        "text": "Fomepizole"
      },
      {
        "id": 3,
        "text": "Methanol"
      },
      {
        "id": 4,
        "text": "Disulfiram"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Intravenous fomepizole is the standard treatment for ethylene glycol poisoning</strong>. Intravenous ethanol is an alternative.</p>\n<p><strong>Fomepizole is administerd intravenously in methanol and ethylene glycol poisoning with a loading dose of 15 mg/kg</strong></p>\n<p><strong> Ethylene glycol poisoning</strong>:</p>\n<ul>\n<li>Ethylene glycol is used as heat exchangers, in antifreeze formulations and as industrial solvents.</li>\n<li>Ethylene glycol is relatively harmless but it forms metabolites like toxic aldehydes (converted to acids) and oxalate that are harmful.</li>\n<li>Inhibition of formation of toxic metabolites by adminitering fomepizole or ethanol is the mainstay of treatment.</li>\n</ul>\n<p><strong> Clinical features:</strong></p>\n<ul>\n<li>Initial excitation followed by CNS depression.</li>\n<li>After 4-12 hours, severe metabolic acidosis due to acid metabolites and lactate.</li>\n<li>Finally, renal insufficiency due to deposition of oxalate in renal tubules.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the diuretic of choice in treating hypertension in a patient having low GFR (<30 mL/min)?",
    "choices": [
      {
        "id": 1,
        "text": "K+ sparing Diuretics"
      },
      {
        "id": 2,
        "text": "Thiazide Diuretics"
      },
      {
        "id": 3,
        "text": "Loop Diuretics"
      },
      {
        "id": 4,
        "text": "Osmotic diuretics"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Loop Diuretics</strong> are the diuretic of choice in treating hypertension in a patient having low GFR (&lt;30 mL/min).</p>\n<p>Diuretics are used widely for treatment of hypertension&nbsp;in patients with normal renal function. But Loop Diuretics&nbsp;are not considered first-line diuretics for the treatment of hypertension.&nbsp;This is due to the lower antihypertensive efficacy of loop diuretics&nbsp;in patients with normal renal function. However, in <strong>patients with a low GFR</strong> (&lt;30 mL/min) or with&nbsp;<strong>resistant hypertension</strong>, loop diuretics are the diuretics of choice.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 11-year-old child presented with a pruritic lesion as shown. Which of the following is the drug of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Terbinafine"
      },
      {
        "id": 2,
        "text": "Griseofulvin"
      },
      {
        "id": 3,
        "text": "Fluconazole"
      },
      {
        "id": 4,
        "text": "Selenium sulphide shampoo"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a scaly pruritic lesion affecting the scalp hair, suggestive of <strong>tinea</strong> <strong>capitis.&nbsp;</strong>The drug of choice treatment for <strong>children</strong> in whom the cause of tinea capitis is unclear is <strong>g</strong><strong>riseofulvin</strong>.&nbsp;<strong>Terbinafine</strong> is the <strong>alternate</strong> first-line drug for adults.</p>\n<p>Option A: Oral terbinafine is also used in the treatment of<em> T. tonsurans</em> tinea capitis in children, but usually used in adults.</p>\n<p>Option C:&nbsp;Fluconazole is more effective in the treatment of <em>M. canis</em> compared to terbinafine.</p>\n<p>Option D:&nbsp;Selenium sulphide has only a supportive role in the treatment of tinea capitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/28ed60484bfc4c11934a1c7c52875bd2.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient undergoing radioactive iodine therapy for a non-toxic multinodular goitre later develops altered sensorium, fever, and vomiting. What is the anti-thyroid drug of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Propranolol"
      },
      {
        "id": 2,
        "text": "Iodide"
      },
      {
        "id": 3,
        "text": "Propylthiouracil"
      },
      {
        "id": 4,
        "text": "Methimazole"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario is suggestive of <strong>thyroid storm</strong> and&nbsp;<strong>propylthiouracil</strong> is the drug of choice in this patient. This is due to its <strong>inhibitory</strong> action on peripheral <strong>T4 &rarr; T3 conversion</strong>.</p>\n<p>PTU is administered in large doses (500&ndash;1000 mg loading dose and 250 mg every 4h) administered orally / via nasogastric tube / per rectum.&nbsp;</p>\n<p><strong>Propranolol</strong> is also given to <strong>reduce</strong> symptoms like tachycardia and other <strong>adrenergic manifestations</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are evaluating a 6-year-old unimmunised girl with cough and abdominal pain. Her mother informs you that her daughter has bouts of violent coughing which frequently ends with a loud whoop and is accompanied by vomiting. She gives history of similar complaints in a classmate 2-3 weeks back. Which of the following drugs will you prescribe for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Erythromycin"
      },
      {
        "id": 2,
        "text": "Penicillin"
      },
      {
        "id": 3,
        "text": "Ciprofloxacin"
      },
      {
        "id": 4,
        "text": "Cotrimoxazole"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given case scenario of <strong>whooping cough</strong>, post-tussive vomiting, and abdominal pain, along with positive history of<strong> exposure</strong> in an <strong>unimmunised</strong> child is suggestive of <strong>pertussis. Erythromycin</strong> or one of the newer macrolides such as azithromycin or clarithromycin is the<strong> drug of choice</strong> for the treatment of this condition.</p>\n<p>Antibiotic therapy in pertussis is used to eradicate the bacteria from the nasopharynx. The treatment is beneficial if it is started within 10 days of the disease. Macrolides are the drugs of choice. Trimethoprim-sulfamethoxazole (Cotrimoxazole) is recommended\u00a0as an <strong>alternative</strong> for individuals allergic to macrolides.\u00a0<strong>Macrolides</strong> may also be used in the\u00a0<strong>chemoprophylaxis</strong> of pertussis. <strong>Post-exposure prophylaxis</strong> is given to household close contacts, and high-risk contacts (infants, immunocompromised, pregnancy).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "which of the following drugs is considered as initial analgesic of choice for patients with osteoarthritis in knee joint?",
    "choices": [
      {
        "id": 1,
        "text": "Celecoxib"
      },
      {
        "id": 2,
        "text": "Naproxen"
      },
      {
        "id": 3,
        "text": "Paracetamol"
      },
      {
        "id": 4,
        "text": "Ibuprofen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Acetaminophen</strong> (paracetamol)&nbsp;is the <strong>initial analgesic of choice</strong> for patients with OA in knees, hips, or&nbsp;hands.It is adequate to control symptoms, in&nbsp;which case more toxic drugs such as NSAIDs can be avoided.</p>\n<p>NSAIDs are the most popular drugs to treat osteoarthritic pain. However, because of the increased rates of cardiovascular side effects associated&nbsp;with NSAIDs, they&nbsp;are not appropriate for long-term treatment choices.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug of choice for the treatment of hemophilus meningitis?",
    "choices": [
      {
        "id": 1,
        "text": "Cefotaxime"
      },
      {
        "id": 2,
        "text": "Ampicillin"
      },
      {
        "id": 3,
        "text": "Cotrimoxazole"
      },
      {
        "id": 4,
        "text": "Penicillin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>3rd-generation cephalosporins like <strong>cefotaxime</strong> or <strong>ceftazidime</strong> are the <strong>drugs of choice</strong> for the treatment of <strong>hemophilus meningitis.</strong>\u00a0</p>\n<p>Ampicillin and cotrimoxazole were popular for respiratory infections, but as plasmid-borne resistance to these drugs is now common, they are not recommended anymore. Amoxicillin-clavulanate can still be given and is is more effective than cotrimoxazole or ampicillin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for treatment of Arthritis in Rheumatic fever is",
    "choices": [
      {
        "id": 1,
        "text": "Aspirin"
      },
      {
        "id": 2,
        "text": "Naproxen"
      },
      {
        "id": 3,
        "text": "Ibuprofen"
      },
      {
        "id": 4,
        "text": "Morphine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Aspirin is the <strong>drug of choice</strong>, delivered at a dose of <strong>50&ndash;60 mg/kg per day</strong>, up to a maximum of <strong>80&ndash;100 mg/kg per day (4&ndash;8 g/d in adults)</strong> in four to five divided doses.</li>\n<li>At higher doses, the patient should be monitored for symptoms of salicylate toxicity such as nausea, vomiting, or tinnitus; if symptoms appear, lower doses should be used.</li>\n<li>After acute symptoms are substantially resolved, usually within the first 2 weeks, patients on higher doses can have the dose reduced to 50&ndash;60 mg/kg per day for a further 2&ndash;4 weeks.</li>\n<li>Fever, joint manifestations, and elevated acute-phase reactants sometimes recur up to 3 weeks after the medication is discontinued.</li>\n<li>This does not indicate a recurrence and can be managed by recommencing salicylates for a brief period.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young woman with celiac disease comes to you for a follow-up. She strictly follows a gluten-free diet, which has resulted in improvement of her diarrhea. However, the following itchy skin lesions have persisted despite her altered diet. What drug will you prescribe?",
    "choices": [
      {
        "id": 1,
        "text": "Dapsone"
      },
      {
        "id": 2,
        "text": "Oral steroids"
      },
      {
        "id": 3,
        "text": "Mycophenolate mofetil"
      },
      {
        "id": 4,
        "text": "Topical steroids"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image showing itchy, grouped vesicles in a patient with celiac disease is suggestive of <strong>dermatitis herpetiformis</strong>.&nbsp;The drug of choice is <strong>dapsone.</strong>&nbsp;</p>\n<p>The <strong>initial treatment</strong> of choice for dermatitis herpetiformis is a <strong>gluten-free diet</strong>.</p>\n<p>Dapsone is used when response to dietary modification is inadequate or slow. It is highly effective in such cases and improves symptoms within one week of starting the drug.</p>\n<p>Note: Gluten-containing grains such as<strong>&nbsp;b</strong>arley<strong>, r</strong>ye<strong>, o</strong>ats<strong>, w</strong>heat (<strong>BROW</strong>) should be avoided in the diet. Rice and maize are tolerated.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6f4a6d195eb9404a92011656ccd4a9d4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following patients can valacyclovir be used as the drug of choice?",
    "choices": [
      {
        "id": 1,
        "text": "An elderly woman with avian influenza"
      },
      {
        "id": 2,
        "text": "An infant with RSV bronchiolitis"
      },
      {
        "id": 3,
        "text": "An adolescent with chickenpox"
      },
      {
        "id": 4,
        "text": "An immunocompromised patient with CMV retinitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Oral valacyclovir</strong> 1g three times daily for 5-7 days is considered the drug of choice for <strong>chickenpox (VZV)&nbsp;</strong>in an immunocompetent patient. Treatment should be started ideally <strong>within 24 hours</strong> of rash onset.</p>\n<p>Oral acyclovir (800 mg five times daily) is an alternative drug, but valacyclovir is preferred due to its <strong>higher bioavailability </strong>and less frequent dosing.&nbsp;In immunocompromised patients, varicella infection is treated with IV acyclovir.</p>\n<p>Option A: <strong>Oseltamivir</strong> is used for the treatment of avian influenza.</p>\n<p>Option B: <strong>Ribavirin</strong> is used for treating RSV bronchiolitis.</p>\n<p class=\"p1\">Option D: Ganciclovir, foscarnet, and cidofovir are approved for CMV retinitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old immunocompromised male complaints of pain in  throat with dysphagia. Later he was diagnosed with fungal pharyngitis. Which of  following is the drug of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Nystatin"
      },
      {
        "id": 2,
        "text": "Flucanozole"
      },
      {
        "id": 3,
        "text": "Itracanozole"
      },
      {
        "id": 4,
        "text": "clotrimazole"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nystatin</strong> is the drug of choice in patients&nbsp;diagnosed with <strong>fungal pharyngitis.</strong></p>\n<p>Candida infection of the oropharynx can occur as an extension&nbsp;of oral thrush. It is seen in patients who are immunosuppressed,&nbsp;debilitated or taking high doses of antimicrobials.</p>\n<p>Often patient complains of pain in the throat with dysphagia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was diagnosed with coccidioidal meningitis. What is the drug of choice for the condition?",
    "choices": [
      {
        "id": 1,
        "text": "Itraconazole"
      },
      {
        "id": 2,
        "text": "Fluconazole"
      },
      {
        "id": 3,
        "text": "Amphotericin B"
      },
      {
        "id": 4,
        "text": "Griseofulvin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fluconazole</strong> is the drug of choice for <strong>coccidioidal</strong> meningitis&nbsp;caused by <em>Coccidioides immitis</em> because of better CSF penetration.&nbsp;</p>\n<p>Itraconazole is also effective in this condition but it is not the drug of choice.&nbsp;Amphotericin B is indicated in patients in whom triazoles have failed.&nbsp;</p>\n<p>Note: <strong>Amphotericin B</strong> is the drug of choice for initial treatment of <strong>cryptococcal</strong> meningitis caused by <em>Cryptococcus neoformans&nbsp;</em>and fluconazole is used for maintenance therapy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young female presented to ophthal OPD with complaints of irritation in left eye along with lacrimation.On examination there was no mucopurulant discharge and diagnosed the condition as phlyctenular conjunctivitis. which is the drug of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1% tetracycline ointment"
      },
      {
        "id": 2,
        "text": "2% sodium cromoglycate drops"
      },
      {
        "id": 3,
        "text": "Topical steroids."
      },
      {
        "id": 4,
        "text": "Moxifloxacin eye drops"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Drug of choice for phlyctenular conjunctivitis&nbsp;is <strong>topical steroids.</strong></p>\n<p>The most common cause for phlyctenular conjunctivitis&nbsp;is bacterial.</p>\n<p>Phlyctenular conjunctivitis is a delayed type hypersensitivity&nbsp;reaction most commonly to staphylococcal&nbsp;proteins.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old woman presents with the finding as shown in the image. She gives history of travel to South America and was bitten by a reduvid bug. Which of the following is the drug of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Nifurtimox"
      },
      {
        "id": 2,
        "text": "Albendazole"
      },
      {
        "id": 3,
        "text": "Benznidazole"
      },
      {
        "id": 4,
        "text": "Metronidazole"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The scenario and the image showing <strong>Roma&ntilde;a</strong> sign point towards a diagnosis of <strong>Chagas disease</strong> (American trypanosomiasis) and the<strong> drug of choice</strong>&nbsp;in this condition is&nbsp;<strong>benznidazole</strong>.&nbsp;</p>\n<p>American trypanosomiasis is caused by&nbsp;<strong><em>Trypanosoma cruzi</em> </strong>and&nbsp;can be&nbsp;managed by either benznidazole or nifurtimox. Due to its favorable safety profile, benznidazole is considered the drug of choice.</p>\n<p>Roma&ntilde;a sign is the unilateral painless periorbital swelling associated with the acute stage of Chagas disease.</p>\n<p>Albendazole and metronidazole are not indicated for American trypanosomiasis. Albendazole is used in infections with&nbsp;Ascaris lumbricoides, Trichuris trichiura and hookworms. Metronidazole is used in the treatment of trichomoniasis and amebiasis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/72c232f192204c96995fdc21466c7342.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man presented with progressive fatigue and weight loss for 3 months. CBC showed pancytopenia. On peripheral smear, the following cells were seen, which also showed positive staining with TRAP. What is the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vemurafenib"
      },
      {
        "id": 2,
        "text": "Pentostatin"
      },
      {
        "id": 3,
        "text": "Interferon \u03b1"
      },
      {
        "id": 4,
        "text": "Cladribine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows <strong>mononuclear cells</strong>&nbsp;with abundant pale<strong> blue-grey agranular </strong>cytoplasm with elongated (<strong>hairy</strong>) <strong>projections</strong>,<strong>&nbsp;</strong>which are&nbsp;<strong>TRAP</strong>-<strong>positive</strong>. This&nbsp;clinical scenario is suggestive of <strong>hairy cell leukemia.&nbsp;</strong>The&nbsp;drug of choice is&nbsp;<strong>cladribine.</strong></p>\n<p>Hairy cell leukemia is responsive to chemotherapy with interferon &alpha;, pentostatin, and cladribine. However, cladribine is the preferred drug of choice due to <strong>complete remission</strong> in the majority of patients, and higher rates of <strong>long-term</strong> disease-free <strong>survival</strong>.&nbsp;It is administered daily for 7 days by continuous intravenous infusion.</p>\n<p>Chemotherapy-refractory patients have&nbsp;responded to <strong>vemurafenib</strong>, a BRAF inhibitor.&nbsp;Splenectomy is often&nbsp;associated with prolonged remission.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a428add7718246468f1e6d3e15155bfd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for acute treatment of PSVT is",
    "choices": [
      {
        "id": 1,
        "text": "Verapamil"
      },
      {
        "id": 2,
        "text": "Esmolol"
      },
      {
        "id": 3,
        "text": "Diltiazem"
      },
      {
        "id": 4,
        "text": "Adenosine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The drug of choice for acute treatment of PSVT is <strong>Adenosine.</strong></p>\n<p>&nbsp;</p>\n<p>Option A: Verapamil is used in chronic treatment to prevent&nbsp;PSVT and control rate in AF.</p>\n<p>Option B: Short-acting beta-blocker like esmolol can be used for terminating PSVT. Though esmolol is a selective beta-blocker, the risk of precipitating bronchospasm is still present.</p>\n<p>Option C: Diltiazem increases vagal tone and can be used occasionally for PSVT when drugs blocking AV node conduction cannot be used. In asthmatics, diltiazem increases bronchospasm and is not indicated.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd15a7cda780455c992ae9f9386b4d7ex510x812.PNG"
    ]
  },
  {
    "text": "Drug of choice for the prevention of acute mountain sickness",
    "choices": [
      {
        "id": 1,
        "text": "Spironolactone"
      },
      {
        "id": 2,
        "text": "Dexamethasone"
      },
      {
        "id": 3,
        "text": "Acetazolamide"
      },
      {
        "id": 4,
        "text": "Ibuprofen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Acetazolamide</strong>&nbsp;is the drug of choice for <strong>acute mountain sickness prevention.</strong></p>\n<p>Acetazolamide inhibits renal carbonic anhydrase, causing prompt bicarbonate diuresis, that leads to metabolic acidosis and hyperventilation. Acetazolamide (125&ndash;250 mg twice a day), administered for 1 day before ascent and continued for 2 or 3 days is effective.</p>\n<p class=\"p1\">Paresthesia and a tingling sensation are common side effects of acetazolamide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old obese man presented to your OPD. His lipid profile showed elevated levels of cholesterol and triglycerides. On examination, you notice palmar xanthomas. What is the drug of choice for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Statins"
      },
      {
        "id": 2,
        "text": "Niacin"
      },
      {
        "id": 3,
        "text": "Fibrates"
      },
      {
        "id": 4,
        "text": "Alirocumab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\">The given scenario of elevated cholesterol and triglycerides along with the presence of <strong>palmar xanthomas</strong> (pathognomonic sign) is indicative of <strong>type III&nbsp;hyperlipoproteinemia. </strong>The drugs of choice for this condition are<strong>&nbsp;fibrates.</strong></p>\n<p style=\"text-align: left;\">Fibrates are also preferred in patients having severe hypertriglyceridemia (TG &gt;1000 mg/dl) who are at risk for pancreatitis.&nbsp;</p>\n<p style=\"text-align: left;\">The response to fibrate therapy in Type III&nbsp;hyperlipoproteinemia patients include:</p>\n<ul>\n<li style=\"text-align: left;\">Elevated cholesterol and triglyceride levels are dramatically lowered.</li>\n<li style=\"text-align: left;\">Tuberoeruptive and palmar xanthomas may regress completely.</li>\n<li style=\"text-align: left;\">Angina and intermittent claudication also improve.&nbsp;&nbsp;</li>\n</ul>\n<p>The image below shows <strong>palmar xanthoma</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b41419073a741deb611315c1b643f21x1280x1144.JPEG"
    ]
  }
];
        let quizName = 'Drugs Of Choice Mini Test';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>