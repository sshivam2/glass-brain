<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>008 Anatomy Ini-Cet 2021 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">23</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 6-month-old boy was brought to the casualty with seizures. The pediatrician tries to do CSF sampling. What are the structures punctured by the pediatrician while piercing through the marked structure?",
    "choices": [
      {
        "id": 1,
        "text": "Scalp, dura, arachnoid"
      },
      {
        "id": 2,
        "text": "Scalp, epicranium, endocranium and dura"
      },
      {
        "id": 3,
        "text": "Scalp, synchondral membrane, dura, arachnoid"
      },
      {
        "id": 4,
        "text": "Pericranium, dura, arachnoid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>&nbsp;</p>\n<p>The scalp is a soft tissue that covers the calvaria of the skull. It consists of five layers (Mnemonic: SCALP).&nbsp;Below the scalp and the calvaria lie the meningeal layers, namely,&nbsp;<strong>p</strong><strong>achymeninges</strong> [arachnoid + dura mater (P-AD)] and <strong>leptomeninges&nbsp;</strong>[arachnoid + pia mater (L-AP)]. One must reach the subarachnoid space below the arachnoid layer to collect or tap CSF. So, the layers pierced in the order are as follows:</p>\n<ol>\n<li><strong>S</strong>kin</li>\n<li><strong>C</strong>onnective tissue (superficial fascia) with blood vessels and nerves</li>\n<li><strong>A</strong>poneurosis (galea aponeurotica) with occipitofrontalis muscle</li>\n<li><strong>L</strong>oose areolar (subaponeurotic) tissue</li>\n<li><strong>P</strong>ericranium</li>\n<li>Dura mater</li>\n<li>Arachnoid membrane</li>\n</ol>\n<p>The given images show the various layers that are pierced.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/10d6683b67294cf6986153a37723161d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/35a53ccedc3f4a359a092d48fcf556f1x1024x760.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d81c377c6a784ff386d7d5792b8fd5b6x1200x1429.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6eaf29a13fe2400bb517cabc90c59a90x1279x954.JPEG"
    ]
  },
  {
    "text": "A 12-year-old presented with fever and difficulty swallowing. He had swelling in the marked region and was advised to undergo surgery. Post-surgery the gauze continued to soak with blood. Which of the following vessels must have been injured?",
    "choices": [
      {
        "id": 1,
        "text": "Tonsillar branch of facial artery"
      },
      {
        "id": 2,
        "text": "Ascending pharyngeal artery"
      },
      {
        "id": 3,
        "text": "Paratonsillar vein"
      },
      {
        "id": 4,
        "text": "Retromandibular vein"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is a cadaveric specimen with the arrow pointing towards, <strong>the tonsillar fossa,&nbsp;</strong>and the&nbsp;given clinical vignette is suggestive of&nbsp;<strong>tonsillitis. Post tonsillectomy hemorrhage </strong>is&nbsp;commonly venous in origin, from the<strong> paratonsillar/ external palatine vein.&nbsp;</strong></p>\n<p><strong>Torrential hemorrhage</strong>&nbsp;can be due&nbsp;<strong>to injury to an aberrantly large or aberrantly placed tonsillar arterial branch of the facial artery.</strong></p>\n<p>Blood supply of the tonsils:&nbsp;</p>\n<p><strong>Arterial supply:</strong></p>\n<ul>\n<li>The tonsillar branch of the facial artery is the main supply.</li>\n<li>Ascending palatine branch of the facial artery.</li>\n<li>Ascending pharyngeal branch of the external carotid artery.</li>\n<li>Dorsal lingual branches of the lingual artery.</li>\n<li>Descending palatine branches of the maxillary artery.</li>\n</ul>\n<p><strong>Venous supply:</strong></p>\n<ul>\n<li>Veins from the tonsils drain into&nbsp;paratonsillar&nbsp;vein which joins the common facial vein and pharyngeal venous plexus.</li>\n</ul>\n<p>Types of Hemorrhage seen during/post tonsillectomy:</p>\n<ul>\n<li><strong>Primary</strong>&nbsp;hemorrhage:\n<ul>\n<li>Occurs&nbsp;<strong>during surgery</strong>&nbsp;due to injury to blood vessels.</li>\n<li>Can be controlled by&nbsp;<strong>pressure, ligation, or electrocoagulation of the bleeding vessels</strong>.</li>\n</ul>\n</li>\n<li><strong>Reactionary</strong>&nbsp;hemorrhage:\n<ul>\n<li>It occurs&nbsp;<strong>within 24 hours of surgery</strong>.</li>\n<li>It may be due to&nbsp;<strong>dislodgement of the clot, slippage of ligature, or return of blood pressure to normal</strong>.</li>\n<li>It is managed by&nbsp;<strong>removal of clot and application of pressure or vasoconstrictor</strong>.</li>\n<li>If not controlled the patient is<strong>&nbsp;anesthetized</strong>&nbsp;and hemorrhage is&nbsp;<strong>managed by re-exploration</strong>.</li>\n</ul>\n</li>\n<li><strong>Secondary</strong>&nbsp;hemorrhage:\n<ul>\n<li>It occurs between&nbsp;<strong>24 hours to 10 days</strong>&nbsp;(most common between&nbsp;<strong>5<sup>th</sup>&nbsp;to 8<sup>th</sup>&nbsp;postoperative days</strong>).</li>\n<li>It is due to&nbsp;<strong>sepsis and premature separation</strong>&nbsp;of the membrane.</li>\n<li>The patient is started on&nbsp;<strong>IV antibiotics</strong>&nbsp;and if not controlled, general&nbsp;anesthesia&nbsp;is given and the bleeding vessel is&nbsp;electrocoagulated&nbsp;or&nbsp;ligated.</li>\n</ul>\n</li>\n</ul>\n<p>The images below summarize the blood supply to the tonsils and the relations of the tonsillar bed respectively.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ffd168c80ff54eb1a8270b6786cdbc73.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fb8458c8de68437c82f4469b05b8615bx1279x1669.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b4f1127bac0a459d94ff04e87868780bx1279x1929.JPEG"
    ]
  },
  {
    "text": "At which level does the nerve supply for the marked structure arise?",
    "choices": [
      {
        "id": 1,
        "text": "Red nucleus"
      },
      {
        "id": 2,
        "text": "Sub thalamic nuclei"
      },
      {
        "id": 3,
        "text": "Decussation of pyramidal tract"
      },
      {
        "id": 4,
        "text": "Olivary nucleus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>&nbsp;</p>\n<p>The image attached below summarizes the course of the oculomotor nerve.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e282ff8c68e8456683d26ea6971f45b2.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ce5c5c109893437888ff4df70d4aa73dx1280x1773.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1197cf3879214c7d80ba18298b60d484x1280x1548.JPEG"
    ]
  },
  {
    "text": "Which of the following are branches of the anterior division of the internal iliac artery?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 5"
      },
      {
        "id": 2,
        "text": "2, 3, 4, 6"
      },
      {
        "id": 3,
        "text": "2, 3, 4, 5, 6"
      },
      {
        "id": 4,
        "text": "1, 4, 5, 6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>\u00a0</p>\n<p><strong>Branches of the anterior trunk\u00a0</strong>of the internal iliac artery:</p>\n<ol>\n<li>Obturator artery</li>\n<li>Superior vesical artery</li>\n<li>Inferior vesical artery\u00a0</li>\n<li>Inferior gluteal artery</li>\n<li>Middle rectal artery</li>\n<li>Vaginal artery (in females)</li>\n<li>Uterine artery (in females)</li>\n<li>Internal pudendal artery</li>\n</ol>\n<p><strong>Branches of the posterior trunk</strong>\u00a0of the internal iliac artery:</p>\n<ul>\n<li>Iliolumbar artery</li>\n<li>Lateral sacral arteries</li>\n<li><strong>Superior gluteal artery</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/904913e2f83e4e95be719092e4a79a0dx795x599.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2dbdc4d411e54e38a8a7663dc7c93698x1280x1051.JPEG"
    ]
  },
  {
    "text": "Fibers from the marked structure terminate at which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Fastigial nucleus"
      },
      {
        "id": 2,
        "text": "Inferior olivary nucleus"
      },
      {
        "id": 3,
        "text": "Red nucleus"
      },
      {
        "id": 4,
        "text": "Subthalamus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The cerebellum consists of<strong>&nbsp;two hemispheres</strong>&nbsp;(right and left) joined by a median vermis. It is divided into&nbsp;<strong>three lobes</strong>:-</p>\n<ul>\n<li>Anterior lobe - lies superiorly above the primary fissure</li>\n<li><strong>Middle lobe&nbsp;</strong>- lies inferiorly below the primary fissure. It is the&nbsp;<strong>largest lobe</strong>. It is also called the posterior lobe.</li>\n<li>Flocculonodular lobe - lies posterior to the uvulonodular fissure</li>\n</ul>\n<p>It has<strong>&nbsp;two surfaces</strong>&nbsp;- superior and inferior separated by a horizontal fissure. It is connected to the other parts of the central nervous system via&nbsp;<strong>three peduncles</strong></p>\n<ul>\n<li>Superior cerebellar peduncle -connecting to the midbrain</li>\n<li>Middle cerebellar peduncle - connecting to the pons</li>\n<li>Inferior cerebellar peduncle - connecting to the medulla oblongata</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/64e09bf015fd405c80a5e43f524e618d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bbb4a665a5074327ad5d0cf51f17a431x1280x1099.JPEG"
    ]
  },
  {
    "text": "A woman with right-sided loss of sensations of both the upper and lower limb complains of shooting pain from her fingers to the right shoulder and a burning sensation when touching cold water. Motor functions are normal. Which of the following structures is likely to be involved?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical stem of a <strong>hemi-sensory loss</strong> and severe <strong>excruciating pain</strong> of the affected areas is suggestive of&nbsp;<strong>thalamic pain syndrome&nbsp;</strong>also known as&nbsp;<strong>Dejerine Roussy syndrome</strong>.&nbsp;Hence,&nbsp;<strong>thalamus&nbsp;</strong>marked as B is most likely to be involved.</p>\n<p>Occlusion of these&nbsp;<strong>thalamic and thalamogeniculate branches</strong>&nbsp;results in the&nbsp;<strong>thalamic pain syndrome</strong>. It is characterized by <strong>C/L hemisensory loss</strong> which starts as numbness and progresses to cause&nbsp;<strong>severe burning pain</strong>&nbsp;in the affected regions. As the thalamus is the site for the relay of sensory information between the periphery and cortex, a lesion in the thalamus causes a miscommunication between the afferent pathway and cortex of the brain. Pain occurs during the recovery from the thalamic infarct. This pain responds poorly to analgesics.&nbsp;<strong>Anticonvulsants</strong>&nbsp;such as carbamazepine or gabapentin or&nbsp;<strong>tricyclic antidepressants</strong>&nbsp;may be beneficial.</p>\n<p>Other markings:</p>\n<p>A: Caudate nucleus</p>\n<p>C: Substantia nigra</p>\n<p>D: Pons</p>\n<p>The image below shows the coronal section of the brain with different parts of the basal ganglia:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a5c5d4c972134a588be91039feecc823.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8e0699fb45d84bdbb1b76f69e1165c1ax1280x1156.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/95bc3bab79dc4bff83c7593a6838bf51x600x577.JPEG"
    ]
  },
  {
    "text": "A 25-year-old male presented with symptoms of inability to flex the distal interphalangeal joint of the 4th and 5th digits. He was also not able to hold a piece of paper between his fingers. What is the likely site of injury?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>&nbsp;</p>\n<p><strong>Other options:&nbsp;</strong></p>\n<ul>\n<li>Option A: Radial groove - Radial nerve</li>\n<li>Option D: Neck of humerus - Axillary nerve</li>\n<li>Option B: Lateral epicondyle &ndash; May lead to tardy ulnar nerve palsy after fracture but the incidence is less.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a9d5ea7e59204e6e9868bc55b945cdfc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bf145aa641474ac0b9a2f9509fa4e493x1280x1335.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0bb6a8f425664c459667fec3ee189213x1279x395.PNG"
    ]
  },
  {
    "text": "A young child with absent thymus is brought to the OPD with features of hypoparathyroidism and tetany. Which of the following marked area in the picture is defective in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the diagram,&nbsp;I-IV are the branchial arches, 1-4 are pharyngeal pouches (inside), and/or pharyngeal grooves (outside)</p>\n<ol style=\"list-style-type: lower-alpha;\">\n<li>Tuberculum lateral</li>\n<li>Tuberculum impar</li>\n<li>Foramen cecum</li>\n<li>Ductus thyroglossus</li>\n<li>Sinus cervicalis</li>\n</ol>\n<ol>\n<li>First pharyngeal pouch, middle ear cavity, and epithelial lining of the auditory tube.</li>\n<li>Second pharyngeal pouch, palatine tonsils</li>\n<li>Points towards third pharyngeal pouch which gives rise to inferior parathyroid gland and&nbsp;<strong>thymus</strong>.</li>\n<li>Fourth pharyngeal pouch, Superior parathyroid gland, and ultimobranchial body.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7a2c28b3554d477b96f5088a9c66c324.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd96b765a1b441ea9d51a905718ea15ax720x770.JPEG"
    ]
  },
  {
    "text": "A patient who has taken the first COVID vaccine comes for the second dose. An astute nurse noticed that the shoulder was flabby, flat, and was asymmetrical. There was an associated loss of contour of the shoulder joint. Injury to which of the structures might have resulted and was avoidable?",
    "choices": [
      {
        "id": 1,
        "text": "Rotator cuff"
      },
      {
        "id": 2,
        "text": "Posterior circumflex artery"
      },
      {
        "id": 3,
        "text": "Lateral cutaneous nerve of arm"
      },
      {
        "id": 4,
        "text": "Axillary nerve"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>&nbsp;</p>\n<p>Vaccine administration in the deltoid can sometimes injure the axillary and the radial nerve.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7160965da04e4a598af5c7205d5e762b.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5af635b6e20e45ec8810d37753bf2efdx720x756.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0824f06f8f3e40a8b9d9e8599c4c13cbx1280x1667.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e3b4ffff46f147e29ea78741fb87336ex1280x1592.JPEG"
    ]
  },
  {
    "text": "The Para-sagittal section of the abdomen is given below. What is the superior border of the marked structure?",
    "choices": [
      {
        "id": 1,
        "text": "Caudate lobe of liver"
      },
      {
        "id": 2,
        "text": "Duodenum"
      },
      {
        "id": 3,
        "text": "Lesser omentum"
      },
      {
        "id": 4,
        "text": "Inferior vena cava"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>&nbsp;</p>\n<p>Clinical note:&nbsp;<strong>Pringle maneuver&nbsp;</strong>(as shown below) is a technique where the free margin of the lesser omentum is compressed to obtain rapid control of the hepatic artery and portal vein in liver trauma and surgery.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d5c3407d3340498ea495ab67cd711183.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c1a6212633554f37af4828804c18d89bx1280x1722.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc8e7a49d13b4f2ea7a1cca867d8f1e6x720x569.GIF"
    ]
  },
  {
    "text": "Through which of the following marked sites does SARS-COVID 19 spread to the brain?",
    "choices": [
      {
        "id": 1,
        "text": "D"
      },
      {
        "id": 2,
        "text": "C"
      },
      {
        "id": 3,
        "text": "B"
      },
      {
        "id": 4,
        "text": "A"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows various skull foramina's.&nbsp;Infection through the <strong>cribriform plate and olfactory bulb (A)</strong> and dissemination through trans-synaptic transfer are some of the mechanisms proposed for the SARS-COV2 virus to reach the brain.&nbsp;</p>\n<p>Encephalitis, demyelination, neuropathy, and stroke are the neurological sequelae to severe COVID-19 infection. The neurological invasion of the virus on the medullary cardiorespiratory center can lead to refractory respiratory failure in patients infected with COVID-19.&nbsp;</p>\n<p>The pathogenesis implicated is explained in the image attached below.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2fa435631f254a39b44000e932736cb0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e24ecbf4f1ec49f380f4bf8e6bb15ef7x1280x1530.JPEG"
    ]
  },
  {
    "text": "A boy with a history of a fall from a tree presents with a lurching gait and dragging of his feet. Which of the following structures are involved?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options</p>\n<p>1 - <strong>Gluteus maximus</strong> - involved in the extension of flexed thigh, abduction (only upper fibres), and lateral rotation at the hip joint. Insertion is at the iliotibial tract.\u00a0</p>\n<p>3 - <strong>Piriformis</strong> - involved in lateral rotation and assists abduction at the hip joint. It is inserted into the medial side of greater trochanter of the femur. Entrapment of the sciatic nerve in the piriformis can lead to piriformis syndrome.</p>\n<p>4 - <strong>Sciatic nerve</strong> - The nerve passes over the obturator internus, gemellus superior, gemellus inferior and quadratus femoris. It supplies knee flexors and muscles below the knee. Paralysis of this nerve results in flail foot and severe difficulty in walking.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/08575f57ba0840979f86920a86f10ee2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/08c8c95e71014a448774c2a7ac0f0a6dx1280x4280.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ebbde3edd95e43ce84048037a1d66bd8x1280x1141.JPEG"
    ]
  },
  {
    "text": "A patient after a road traffic accident presents to the emergency room with difficulty in swallowing and slurred speech. Investigations reveal fractures in the occipitotemporal region. Which of the following areas should be tested in order to find the nerve which is involved?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of the involvement of <strong>9<sup>th</sup> </strong>and<strong> 10<sup>th</sup> cranial nerves</strong> due to&nbsp;occipitotemporal fracture and they are&nbsp;examined by testing<strong>&nbsp;</strong>the<strong> uvula </strong>which is marked as <strong>2</strong> in the given image.</p>\n<p class=\"p1\">The j<span class=\"s1\">ugular </span><span class=\"s2\">foramen is located between</span>&nbsp;the lower border of the petrous part of the <strong>temporal bone</strong> and the condylar part of the <strong>occipital bone</strong>. As the investigations reveal fractures in the occipitotemporal region, along with the history of difficulty in swallowing and slurred speech, are suggestive of injury to the <strong>glossopharyngeal </strong>and<strong> vagus nerve</strong> passing through the jugular foramen.</p>\n<p class=\"p1\">Unilateral lesions of IX and X cranial nerves are commonly caused by <strong>skull-base fractures,&nbsp;</strong>strokes, or tumors.</p>\n<p class=\"p1\"><strong>Glossopharyngeal and Vagus nerve</strong> examination include:</p>\n<ul>\n<li class=\"p1\">Observing the position and symmetry of the <strong>palate and uvula(</strong>marked as<strong> 2 </strong>in the given image)&nbsp;at rest and with phonation (&ldquo;aah&rdquo;).</li>\n<li class=\"p1\">The pharyngeal (&ldquo;gag&rdquo;) reflex is evaluated by stimulating the posterior pharyngeal wall on each side with a sterile, blunt object (e.g., tongue blade)</li>\n</ul>\n<p class=\"p1\">Patients with a proximal unilateral lesion of the vagus nerve complain of dysphagia. There will be a weakness of the soft palate muscles on the affected side. Attempts to voluntarily elevate the soft palate, like by asking the patient to say &ldquo;aah&rdquo; will reveal a weakness in elevation of the palate on the affected side. Along with this, there will be deviation of the uvula to the normal side, due to the unopposed action of palatal muscles on that side.</p>\n<p class=\"p1\">The below image shows the base of the skull and its foramina:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/632211d4bf964416b98c84183a7e7c70.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6290ea83b0f8475193919dfd5e23f73bx1279x1050.JPEG"
    ]
  },
  {
    "text": "Fibers from the marked structure end in which of the following areas of the thalamus?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior nucleus"
      },
      {
        "id": 2,
        "text": "Reticular nucleus"
      },
      {
        "id": 3,
        "text": "Anterior nucleus"
      },
      {
        "id": 4,
        "text": "Ventral Lateral nucleus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure marked in the above image is <strong>mamillary body</strong> and the fibers from the mamillary body end in the&nbsp;<strong>anterior nucleus of the thalamus.</strong></p>\n<p><strong>The mammillary bodies</strong>&nbsp;are two small hemispherical, pea-sized eminences, lying side by side, forming the floor of the third ventricle. The fibres from medial mammillary nucleus project to the <strong>anterior nucleus</strong> of the thalamus.</p>\n<p>The<strong>&nbsp;anterior thalamic nuclei</strong>&nbsp;have 3 subdivisions&mdash;anteroventral nucleus, anteromedial nucleus, and anterodorsal nucleus.</p>\n<ul>\n<li>Major input:&nbsp;<strong>Mamillothalamic tract</strong>&nbsp;from the mammillary nuclei of the hypothalamus.</li>\n<li>Major cortical output:&nbsp;<strong>Anterior limbic area, cingulate, and the parahippocampal gyrus</strong>&nbsp;</li>\n<li>Major function:\n<ul>\n<li>Regulation of&nbsp;<strong>alertness and attention</strong></li>\n<li>Acquisition of&nbsp;<strong>memory</strong></li>\n</ul>\n</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a611283a894e4d66ae84db7e80a2853e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The cell marked in the below slide is inhibitory to",
    "choices": [
      {
        "id": 1,
        "text": "Deep nuclei of cerebellum"
      },
      {
        "id": 2,
        "text": "Vestibular nuclei"
      },
      {
        "id": 3,
        "text": "Inferior olivary nucleus"
      },
      {
        "id": 4,
        "text": "Basal ganglia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The structure marked in the image is a <strong>flask-shaped neuron</strong> in the cerebellar cortex, which is a&nbsp;<strong>Purkinje cell. </strong>It is inhibitory to <strong>deep cerebellar nuclei</strong>. &nbsp;</p>\n<p>Purkinje cells are the <strong>flask-shaped</strong> cells present in the Purkinje cell layer of the cerebellum. They are <strong>evenly</strong> <strong>spaced </strong>and arranged in a single layer between molecular and granular cell layers. The<strong>&nbsp;dendrite</strong>&nbsp;from each cell passes upward to enter the <strong>molecular</strong> <strong>layer</strong>&nbsp;and the <strong>axon</strong> of each cell passes downwards, crosses the <strong>granular</strong> <strong>cell</strong> <strong>layer,</strong>&nbsp;and&nbsp;terminates on the<strong> deep cerebellar nuclei.&nbsp;</strong>They are inhibitory and use <strong>GABA</strong> as their neurotransmitter.</p>\n<p>Axons of Purkinje cells are the <strong>only efferents of the</strong> <strong>cerebellar cortex.&nbsp;</strong>They receive excitatory input from the climbing fibers from the inferior olivary nucleus and mossy fibers.&nbsp;</p>\n<p>Pathological significance of Purkinje cells:</p>\n<ul>\n<li><strong>Negri bodies </strong>in rabies are usually found as eosinophilic, <strong>cytoplasmic</strong> <strong>inclusions</strong> in the neurons of the <strong>hippocampus</strong> and <strong>Purkinje</strong> <strong>cells</strong> of the cerebellum.</li>\n<li>In <strong>paraneoplastic&nbsp;cerebellar degeneration, </strong>there is the destruction of Purkinje cells due to antibodies directed against them.&nbsp;</li>\n<li><strong>Purkinje cells</strong> and neurons in pyramidal cell layers of the hippocampus and cerebral cortex are the most sensitive neurons to hypoxia and are likely to be damaged in cases of<strong> global cerebral ischemia.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eb03c444d496460db67a9d89189cdd0b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The marked structure develops from which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "Common cardinal vein"
      },
      {
        "id": 2,
        "text": "Anterior cardinal vein"
      },
      {
        "id": 3,
        "text": "Supracardinal vein"
      },
      {
        "id": 4,
        "text": "Subcardinal vein"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure marked in the given image is the <strong>azygos vein</strong>, which develops from the <strong>supracardinal vein</strong>.</p>\n<p>The <strong>azygos system</strong> of veins forms a <strong>connecting channel </strong>between the<strong> superior </strong>and<strong> inferior venae cavae</strong>. It occupies the upper part of the posterior abdominal wall and the posterior mediastinum. It also connects the portal, caval system, and vertebral venous systems.It drains the thoracic wall and the upper lumbar region.</p>\n<p><strong>Development:&nbsp;</strong>The azygos venous system arises from the <strong>supra cardinal veins</strong> embryologically. The right supra cardinal vein becomes the azygos vein, while the left supra cardinal vein becomes the hemiazygos vein.</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">The 4th to 11th right intercostal veins empty into the right supracardinal vein, which together with a portion of the posterior cardinal vein forms the <strong>azygos vein</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">On the left, the 4th to 7th intercostal veins enter into the left supracardinal vein, and the left supracardinal vein, then known as the <strong>hemiazygos vein</strong>, which also empties into the azygos vein.</li>\n</ul>\n<p>Other options: Cardinal veins form the main venous drainage system of the embryo. It consists of,</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Anterior cardinal veins,</strong> which drain the cephalic part of the embryo, and</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Posterior cardinal veins</strong>, which drain the rest of the embryo.</li>\n</ul>\n<p>During the fifth to the seventh weeks, a number of additional veins are formed. It includes,</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Subcardinal veins</strong>, which mainly drain the kidneys;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sacrocardinal veins, which drain the lower extremities;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Supracardinal veins, which drain the body wall by way of the intercostal veins.</li>\n</ul>\n<p>Below image shows cardinal veins development.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/812c862f5e3247b49eb2d1da03ae5508.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2cba07cec260404597497fe3ec9ec33fx1279x1984.JPEG"
    ]
  },
  {
    "text": "Inferior thyroid artery supplies which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, and 4"
      },
      {
        "id": 2,
        "text": "1, 2, and 3 only"
      },
      {
        "id": 3,
        "text": "1 and 2 only"
      },
      {
        "id": 4,
        "text": "1, 2 and 4 only"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>All the given 4 structures are supplied by the <strong>Inferior thyroid artery</strong>.</p>\n<p><strong>Inferior thyroid artery</strong>&nbsp;is a branch of the&nbsp;<strong>thyrocervical trunk,</strong>&nbsp;which in turn, is a branch of the first part of&nbsp;<strong>the subclavian artery</strong>. The inferior thyroid artery loops upwards anterior to the medial border of the scalenus anterior, turns medially just below the sixth cervical transverse process, and then descends on longus colli to the lower border of the thyroid gland.</p>\n<p>Branches:</p>\n<ul>\n<li class=\"p1\">Pharyngeal branches: These supply the lower part of the pharynx.\n<ul>\n<li class=\"p1\">Tracheal branches supply the trachea and anastomose with the bronchial arteries;</li>\n<li class=\"p1\"><strong>Oesophageal branches</strong> supply the oesophagus and anastomose with the oesophageal branches of the thoracic aorta; and</li>\n<li class=\"p1\">Inferior and ascending glandular branches supply the posterior and inferior regions of the <strong>thyroid gland</strong>, and anastomose with the contralateral inferior and ipsilateral superior thyroid arteries.</li>\n<li class=\"p1\">The ascending branch also supplies the <strong>parathyroid glands</strong>.</li>\n</ul>\n</li>\n<li class=\"p1\">Ascending cervical artery</li>\n<li class=\"p1\">Inferior laryngeal</li>\n<li>Muscular branches</li>\n</ul>\n<p class=\"p1\">Note: <strong>Thymic branches</strong> originating from the internal thoracic, <strong>inferior thyroid artery</strong>, and sometimes superior thyroid arteries supply the thymus and the surrounding mediastinal connective tissue.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which part of this bone is palpable in the infraclavicular fossa?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The part of the scapula marked as <strong>1</strong> is the <strong>coracoid process</strong>\u00a0and it is <strong>palpable </strong>in the<strong> infraclavicular fossa.</strong>\u00a0The <strong>tip</strong> of the coracoid process lies approximately <strong>2.5 cm below</strong> the <strong>clavicle</strong>, immediately lateral to the infraclavicular fossa (deltopectoral triangle).\u00a0Hence, the coracoid process can be palpated below the clavicle.</p>\n<p>The <strong>coracoid</strong> process arises from the<strong> upper border</strong> of the neck of the scapula and it projects forwards and slightly laterally.\u00a0<strong>Attachments</strong> at the coracoid process include\u00a0</p>\n<ul>\n<li>The conoid portion of the coracoclavicular ligament\u00a0</li>\n<li>Pectoralis minor\u00a0</li>\n<li>Medial end of coraco-acromial ligament</li>\n<li>Coracohumeral ligament\u00a0</li>\n<li>Glenocorocoid ligament\u00a0</li>\n<li>Coracobrachialis muscle</li>\n</ul>\n<p>Other options\u00a0</p>\n<p>Option B - <strong>Acromian process</strong> <strong>continues</strong> from the <strong>spine</strong> of the scapula. The acromion is subcutaneous over its dorsal surface, The attachments at the acromion are the coracoacromial ligament, the articular capsule of the acromioclavicular joint, and horizontal fibers of the trapezius.\u00a0</p>\n<p>Option C - The <strong>glenoid fossa</strong> is present at the <strong>lateral angle</strong> of the scapula. It is articular with the humerus to form the shoulder joint.\u00a0</p>\n<p>Option D - The <strong>inferior angle</strong> lies over the <strong>seventh rib</strong>. Dorsally, it is related to latissimus dorsi. The angle is visible when the arm is raised over the head.</p>\n<p>Parts of the scapula are given in the image below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/15d955c3ecb24d6dbab9559a5104d3c7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f98f2bea2b2f44eca8a65b59439b75e1x1280x1187.JPEG"
    ]
  },
  {
    "text": "Identify the pelvic diaphragm in the picture given below.",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The structure marked \"1\" is the<strong> levator ani </strong>muscle which is part of the pelvic diaphragm.</p>\n<p>Other structures marked in the above image are</p>\n<p>2: External anal sphincter</p>\n<p>3: Internal anal sphincter</p>\n<p>4: Pudendal canal</p>\n<p>Pelvic diaphragm&nbsp;</p>\n<p>The muscular part of the pelvic floor is the pelvic diaphragm. It is attached to the pelvic wall on either side between the greater and lesser sciatic foramen.&nbsp;<strong>Levator ani </strong>and&nbsp;<strong>coccygeus</strong>&nbsp;muscles form the pelvic diaphragm and delineate the lower limit of the true pelvis.&nbsp;</p>\n<p><strong>Levator ani</strong> is formed by <strong>pubococcygeus, iliococcygeus,</strong> and <strong>puborectalis</strong>. The muscles blend together posterior to the vagina in women and around the anus in both sexes. Posterior to the anal aperture, the form the <strong>anococcygeal body</strong>&nbsp;attaches to the coccyx. <strong>Urogenital hiatus</strong> is present anteriorly separating the muscles. This allows the urethra and vagina to pass through. Levator ani reinforces the external <strong>anal sphincter</strong>. In women, it functions as the <strong>vaginal sphincter.</strong>&nbsp;</p>\n<p>The <strong>coccygeus</strong> muscles, one on each side are <strong>triangular</strong> in shape and form the posterior part of the pelvic diaphragm. The apices are attached to the tips of ischial spines. The bases are attached to the coccyx and sacrum.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/08797568d7df445b8291ef5fbc63f590.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the incorrect match.",
    "choices": [
      {
        "id": 1,
        "text": "1- Cilia"
      },
      {
        "id": 2,
        "text": "4- Lamina propria"
      },
      {
        "id": 3,
        "text": "2- Goblet cells"
      },
      {
        "id": 4,
        "text": "3- Nuclei of epithelial cell"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options, Option B represents an incorrect match, as the structure labeled as 4 is showing the basement membrane and not lamina propria.</p>\n<p>The given image is of&nbsp;<strong>pseudostratified ciliated columnar epithelium</strong>, as it shows&nbsp;irregular cells, which are attached to the <strong>basement membrane</strong>(<strong>marked as 4 in the image</strong>). It appears to be multi-layered. However, there is actually only one layer of cells. The multi-layered appearance is due to the fact that the <strong>nuclei of epithelial cell</strong>(<strong>marked as 3 in the image</strong>) lie at different levels.</p>\n<p>The epithelium shows&nbsp;hair-like projections called <strong>cilia</strong> (<strong>marked as 1 in the image</strong>) and<strong> goblet cells</strong> (<strong>marked as 2 in the image</strong>). Goblet cells secrete mucous which helps to trap dust entering the passages.&nbsp;The cilia are capable of movement and help in the clearance of mucous.</p>\n<p>Example include&nbsp;epithelium lining the&nbsp;trachea and in large bronchi.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/874f1e50fddc46ed821b13e9ae0ce5ba.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3eed76c3fb0241ae89d8234c1439897ax1280x1194.JPEG"
    ]
  },
  {
    "text": "Third part of vertebral artery is related to which of the following ?",
    "choices": [
      {
        "id": 1,
        "text": "4"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "2"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The third part of the vertebral artery (V3) is related to the area <strong>marked 2, </strong>which is&nbsp;the <strong>posterior arch</strong> of the <strong>first cervical vertebra</strong> or the&nbsp;<strong>atlas.</strong></p>\n<p>The given image shows the first cervical vertebra - atlas.</p>\n<ul>\n<li>The area marked<strong> 1</strong> is the posterior tubercle.</li>\n<li>The area marked <strong>2</strong> is the posterior arch. The superior surface bears a groove for the of <strong>vertebral artery</strong> and venous plexus immediately behind.</li>\n<li>The area marked <strong>3</strong>&nbsp;is the <strong>superior articular facet</strong>.</li>\n<li>The area marked<strong> 4</strong>&nbsp;is the posterior surface of the anterior arch. It gives attachment to the apex of dens from the second cervical vertebra.&nbsp;</li>\n</ul>\n<p>The <strong>vertebral artery</strong> arises from the <strong>first part</strong> of the&nbsp;<strong>subclavian artery</strong>. It passes through the foramina of transverse processes of C6 to C1 cervical vertebrae and enters the cranium through the foramen magnum. The vertebral arteries of both sides join to form the basilar artery. In its course, it is divided into four parts:</p>\n<p>The first part, <strong>V1</strong>, begins at its origin from the subclavian artery and <strong>ends</strong> at its entry into the <strong>transverse process of the C6 cervical vertebra</strong>. This part is crossed by the inferior thyroid artery on both sides, and thoracic duct on the left side, and the right lymphatic duct on the right side.&nbsp;</p>\n<p>The second part, <strong>V2</strong> is that part of the artery ascending through the <strong>foramina</strong> in the <strong>transverse process</strong> of the cervical vertebrae.&nbsp;</p>\n<p>The third part,<strong> V3</strong>&nbsp;is curved backward behind the atlas. In this position, it lies in a <strong>groove on the posterior arch of the atlas</strong>. This part of the artery lies in the suboccipital triangle.&nbsp;</p>\n<p>The fourth part, <strong>V4</strong> pierces the dura and arachnoid mater and <strong>unites</strong> with the <strong>contralateral vertebral artery</strong> to form the midline <strong>basilar artery</strong> at the lower border of pons.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e683b23056b14cb6a885d8f24992da1c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d0712ed74df0407e8984e89c7f14af4fx1280x1208.JPEG"
    ]
  },
  {
    "text": "What is the most common complication of the central line insertion below the marked bone?",
    "choices": [
      {
        "id": 1,
        "text": "Arterial puncture"
      },
      {
        "id": 2,
        "text": "Thrombophlebitis"
      },
      {
        "id": 3,
        "text": "Empyema"
      },
      {
        "id": 4,
        "text": "Chylothorax"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Below image shows radiograph of subclavian vein catherisation</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a83e8e190e884451854a27786b8c1fa0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9fc4c713fd8a45479ae51739eb48f525x569x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d49453c2de5f4fd78ae5e4f78d635246x708x585.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7437b272288a46b59408578159897e8ax450x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13cb91c4594c44adb13c9d3d9e296ce8x781x600.PNG"
    ]
  },
  {
    "text": "Identify the cranial nerve passing through the given structure",
    "choices": [
      {
        "id": 1,
        "text": "III"
      },
      {
        "id": 2,
        "text": "V"
      },
      {
        "id": 3,
        "text": "IV"
      },
      {
        "id": 4,
        "text": "VI"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given image, the <strong>dorsal</strong> aspect of the brainstem is marked and the cranial nerve that is passing there is the&nbsp;<strong>trochlear nerve (CN IV).</strong>&nbsp;</p>\n<p>The trochlear nerve is the fourth cranial nerve that originates from the trochlear nuclei within the <strong>midbrain</strong> at the level of the&nbsp;<strong>inferior colliculus</strong>. It is the <strong>only cranial nerve</strong> that emerges from the <strong>dorsal surface of the brainstem</strong> and has the <strong>longest intracranial course</strong>. It passes on to the lateral surface of the crus of cerebellar peduncle and lateral wall of the cavernous sinus. The nerve then crosses the oculomotor nerve to enter the orbit through the superior orbital fissure to exclusively supply the <strong>contralateral</strong>&nbsp;<strong>superior oblique muscle</strong>.</p>\n<p>The main actions of superior oblique are</p>\n<ul>\n<li><strong>Depression</strong> in adducted position-&nbsp;The muscle elevates the posterior of the eye causing the front of the eye to be depressed. Patients with trochlear nerve palsy have difficulty in looking downwards when eyes are in the adducted position.&nbsp;</li>\n<li><strong>Abduction</strong></li>\n<li><strong>Intortion</strong> of the eyeball.</li>\n</ul>\n<p>Other options- Oculomotor (CN III), trigeminal (CN V) and abducens (CN VI) nerves exit ventrally from the brainstem.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/52078a23190e4ad2ab0ab3e39699faf5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c7196f72f63346f1ba7c653796d3a365x1280x1188.JPEG"
    ]
  }
];
        let quizName = '008 Anatomy Ini-Cet 2021';
        let hierarchy = ["Marrow", "PYQs", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>