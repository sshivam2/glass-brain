<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>66 ‚Å†Tubes, Catheters, And Drains - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">11</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 45-year-old patient undergoes a mastectomy for breast cancer. Post-operatively, the surgeon decides to use a closed suction drain. Which of the following drain types is shown in the image below?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Intellec7\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Jackson-Pratt_drain#/media/File:Post-operative_Jackson-Pratt_Drains.JPG\" data-tags=\"\" height=\"256\" src=\"https://image.prepladder.com/content/ku3OR7kNzPky6Y3BTAmX1740136971.png\" width=\"224\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Penrose drain"
      },
      {
        "id": 2,
        "text": "Jackson Pratt drain"
      },
      {
        "id": 3,
        "text": "Romovac suction drain"
      },
      {
        "id": 4,
        "text": "Hemovac drain"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Jackson Pratt drain</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The image shows a <strong>Jackson Pratt (JP) drain</strong>, which is a type of closed <span class=\"customMeta\" data-dictid=\"bdc0a4cb9016927771995488a2b961\">suction</span> drain commonly used in various <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> procedures, including mastectomies.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Jackson Pratt drain:</strong></p>\n\n<ul>\n\t<li>Consists of a soft, flattened <span class=\"customMeta\" data-dictid=\"a4609c06fd16927771983dad60e1a3\">silicone</span> tube connected to a soft plastic bulb</li>\n\t<li>The bulb can be compressed to create negative pressure</li>\n\t<li>Typically clear or translucent, allowing easy <span class=\"customMeta\" data-dictid=\"33ba8d60fb16927772029d1067e602\">visualization</span> of drainage</li>\n\t<li>Suitable for various surgeries, including breast, plastic, and <span class=\"customMeta\" data-dictid=\"1665a40f1016927771801899eaed5d\">abdominal</span> procedures</li>\n\t<li>Easy to empty and maintain by patients</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"302\" src=\"https://image.prepladder.com/content/3Gf6xu3fFtZg9yMAi9qK1740137903.png\" width=\"264\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/ku3OR7kNzPky6Y3BTAmX1740136971.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/3Gf6xu3fFtZg9yMAi9qK1740137903.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/DtjMpOX65WBFN8Ahxp6J1747155457.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/EePkZQkzJXPUS1j5oTxE1747155516.mp3"
  },
  {
    "text": "<p>A 6-month-old infant is admitted with severe vomiting and requires placement of a gastric tube. The nurse sets up the feeding equipment as shown in the image. Which of the following tubes is correctly depicted in the image?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"335\" src=\"https://image.prepladder.com/content/UGq7Q8G5XM7IUN7CAo3t1740140530.png\" width=\"335\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Nasogastric tube"
      },
      {
        "id": 2,
        "text": "Infant feeding tube"
      },
      {
        "id": 3,
        "text": "Orogastric tube"
      },
      {
        "id": 4,
        "text": "Jejunal feeding tube"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tube</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The tube depicted in the image is an infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tube, which is smaller in <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> and more flexible compared to a standard <span class=\"customMeta\" data-dictid=\"de300f68ca16927771938f9572d888\">nasogastric</span> (NG) tube. Infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tubes are specifically designed for use in newborns and young infants due to their smaller <span class=\"customMeta\" data-dictid=\"9e99effc421692777181b02606e021\">anatomy</span> and inability to tolerate a larger NG tube.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Nasogastric (NG) Tubes:</strong><strong> (Option A)</strong></p>\n\n<ul>\n\t<li>Inserted through the nose and passed into the stomach</li>\n\t<li>Larger in <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> (typically 14-18 French)</li>\n\t<li>Common markings:\n\t<ul>\n\t\t<li>Measurement markings in centimeters to indicate the <span class=\"customMeta\" data-dictid=\"c88a7c1a0116927771909b2463968d\">insertion</span> depth</li>\n\t\t<li>'STOMACH' printed on the tube to confirm correct placement</li>\n\t</ul>\n\t</li>\n\t<li><strong>Indications:</strong>\n\t<ul>\n\t\t<li>Decompression of the stomach (e.g., in intestinal obstruction)</li>\n\t\t<li>Enteral <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> in adults and older children</li>\n\t\t<li>Medication administration</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Chen, Yen-Chun & Wang, Lien-Yen & Chang, Yu-Jun & Yang, Chao-Pin & Wu, Tsung-Ju & Lin, Fung-Ru & Liu, Sen-Yung & Wei, Ta-Sen.\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/A-common-type-of-NG-tube-is-125-cm-in-length-and-with-marks-at-45-55-65-and-75-cm-Four_fig7_260150569\" data-tags=\"\" height=\"367\" src=\"https://image.prepladder.com/content/m3SsYfEHVcOnQxRE27911740140603.png\" width=\"300\" /></p>\n\n<p><strong>Infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">Feeding</span> Tubes: </strong><strong>(Option B)</strong></p>\n\n<ul>\n\t<li>Smaller in <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> (typically 5-8 French) and more flexible</li>\n\t<li>Suitable for newborns and young infants due to their smaller anatomy</li>\n\t<li>No specific markings on the tube</li>\n\t<li><strong>Indications:</strong>\n\t<ul>\n\t\t<li>Enteral <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> in newborns and infants</li>\n\t\t<li>Gastric <span class=\"customMeta\" data-dictid=\"46a5e63f281692777185d3f56ea186\">decompression</span> in infants</li>\n\t\t<li>Medication administration in infants</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"400\" src=\"https://image.prepladder.com/content/Gct6U004Fd98rTublWiV1740141113.png\" width=\"400\" /></p>\n\n<ul>\n\t<li><strong>Considerations:</strong>\n\n\t<ul>\n\t\t<li>NG tubes are generally not suitable for infants due to their larger size and rigidity, which can cause discomfort and potential complications.</li>\n\t\t<li>Infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tubes are specifically designed for the delicate <span class=\"customMeta\" data-dictid=\"9e99effc421692777181b02606e021\">anatomy</span> of newborns and young infants, providing a more comfortable and safer option for <span class=\"customMeta\" data-dictid=\"b36da50c8d169277718782ffc6960b\">enteral</span> <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> and other applications.</li>\n\t\t<li>Proper placement and monitoring of both NG and infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tubes are crucial to ensure safe and effective use.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><br />\n<strong>Orogastric tubes: </strong> <strong>(Option C)</strong></p>\n\n<ul>\n\t<li>These are inserted through the mouth, whereas the tube in the image is clearly a <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> tube, indicating it is either an NG or infant <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tube.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>A jejunal <span class=\"customMeta\" data-dictid=\"11a5eea407169277720251b8446fa7\">feeding</span> tube: </strong> <strong>(Option D)</strong></p>\n\n<ul>\n\t<li>It is inserted beyond the stomach, into the jejunum, and has a different appearance compared to the tube shown in the image.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/UGq7Q8G5XM7IUN7CAo3t1740140530.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/m3SsYfEHVcOnQxRE27911740140603.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/8IRG6dnUIATwLeDvijwJ1749028883.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/QnwSwrlkwRNw5MrxBuRr1749028937.mp3"
  },
  {
    "text": "<p>A 45-year-old patient undergoes a choledochotomy for the removal of common bile duct stones. The surgeon decides to use the given tube during the procedure.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Liagre, Arnaud & Queralto, Michel & Levy, Jonathan & Combis, Jean & Peireira, Paulo & Buchwald, Jane & Juglard, Gildas & Petrucciani, Niccol\u00f2 & Martini, Francesco.\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Kehrs-T-tube-for-gastrocutaneous-fistulas-Hans-Kehr-professor-of-surgery-and-inventor_fig2_358482625\" data-tags=\"\" height=\"309\" src=\"https://image.prepladder.com/content/VZ5ciB8gNCoD5IcjTCBY1740141334.png\" width=\"300\" /></p>\n\n<p>Which of the following statements best describes its correct use and function in this scenario?</p>",
    "choices": [
      {
        "id": 1,
        "text": "It is inserted to provide long-term biliary drainage and should be left in place for several months."
      },
      {
        "id": 2,
        "text": "It acts as a stent and is retained for 4-6 weeks in the distal filling defect."
      },
      {
        "id": 3,
        "text": "It is used to create a biliary-enteric anastomosis and is removed immediately after surgery."
      },
      {
        "id": 4,
        "text": "It is placed to perform intraoperative cholangiography and is removed before closing the incision."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) It acts as a <span class=\"customMeta\" data-dictid=\"cb33defbb316927771991b2ef81ec3\">stent</span> and is retained for 4-6 weeks in the <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">distal</span> <span class=\"customMeta\" data-dictid=\"52edf0af4d1692777202dd1a490884\">filling</span> defect.</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The given image is of Kehr\u2019s T-tube, used in <span class=\"customMeta\" data-dictid=\"cf978047b61692777183c0569f21f2\">bile</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> surgeries, especially after Choledochotomy.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Liagre, Arnaud & Queralto, Michel & Levy, Jonathan & Combis, Jean & Peireira, Paulo & Buchwald, Jane & Juglard, Gildas & Petrucciani, Niccol\u00f2 & Martini, Francesco.\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Kehrs-T-tube-for-gastrocutaneous-fistulas-Hans-Kehr-professor-of-surgery-and-inventor_fig2_358482625\" data-tags=\"\" height=\"309\" src=\"https://image.prepladder.com/content/7XfPXLX8AgMm1aRYK4dz1740141443.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>After the <span class=\"customMeta\" data-dictid=\"7ba18aa5e616927771918a45051a40\">longitudinal</span> <span class=\"customMeta\" data-dictid=\"2afbd932801692777190be690704b3\">incision</span> in choledochotomy, the T-tube is inserted to act as a stent.</li>\n\t<li>T-tube has a <span class=\"customMeta\" data-dictid=\"6f4a4d02ec169277718995b05c1d26\">horizontal</span> part which is placed in the CBD and vertical part which is allowed to come out, to drain bile.</li>\n\t<li>Amount of <span class=\"customMeta\" data-dictid=\"cf978047b61692777183c0569f21f2\">bile</span> draining daily is measured.</li>\n\t<li>Before removal of the T-tube, <span class=\"customMeta\" data-dictid=\"8c660f0c321692777194046901e354\">patency</span> of CBD should be confirmed.</li>\n\t<li>T-tube is retained for 4-6 weeks in a <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">distal</span> <span class=\"customMeta\" data-dictid=\"52edf0af4d1692777202dd1a490884\">filling</span> defect.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>The tube is not intended for long-term <span class=\"customMeta\" data-dictid=\"7dd6eda7ce169277718325f22de9e8\">biliary</span> drainage; it is typically left in place for 4-6 weeks, not several months <strong>(Option A ruled out)</strong>.</li>\n\t<li>The tube is not used for creating a biliary-enteric anastomosis; it is for temporary <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> and is not removed immediately after surgery <strong>(Option C ruled out)</strong>.</li>\n\t<li>Although the tube can assist in <span class=\"customMeta\" data-dictid=\"a489e669011692777190af3dd98ed4\">intraoperative</span> cholangiography, it is not removed before closing the incision; it stays in place for <span class=\"customMeta\" data-dictid=\"8f584900e71692777196a6e8943d4e\">postoperative</span> monitoring and <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> <strong>(Option D ruled out)</strong>.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/VZ5ciB8gNCoD5IcjTCBY1740141334.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/7XfPXLX8AgMm1aRYK4dz1740141443.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/UK4tdrzKOrvY31OfOgrQ1749029111.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/oARQU9p1gwDozLYkXfbF1749029575.mp3"
  },
  {
    "text": "<p>A 45-year-old patient with a history of cirrhosis presents to the emergency department with massive hematemesis. The physician uses an instrument given in the picture below.\u00a0Which of the following statements is correct with respect to use of this device?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Olek Remesz \" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Sengstaken-Blakemore_tube_EN.svg#/media/File:Sengstaken-Blakemore_tube_numbered.svg\" data-tags=\"\" height=\"284\" src=\"https://image.prepladder.com/content/gYXnvfADNi8dUjvAUYA61740141869.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "This instrument is commonly used if variceal bleeding does not stop by banding/sclerotherapy/gluing."
      },
      {
        "id": 2,
        "text": "The esophageal balloon is inflated first with 30-40 mmHg pressure, followed by gastric balloon inflation with 400 mL of air."
      },
      {
        "id": 3,
        "text": "It is a definitive treatment and does not require further procedures like banding or sclerotherapy."
      },
      {
        "id": 4,
        "text": "The most common complication associated with its use is pressure necrosis of esophageal mucosa."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A. This instrument is commonly used when <span class=\"customMeta\" data-dictid=\"d4607865bb1692777201a35341db81\">variceal</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> does not stop after banding, sclerotherapy, or gluing.</strong></p>\n\n<ul>\n\t<li>\n\t<p>The Sengstaken-Blakemore tube is a <strong>temporary <span class=\"customMeta\" data-dictid=\"f6c884e91916927771829b26c9369a\">balloon tamponade</span> device</strong> used to control severe <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> <span class=\"customMeta\" data-dictid=\"d4607865bb1692777201a35341db81\">variceal</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> when initial <span class=\"customMeta\" data-dictid=\"35ca8c2d5f16927771879351e8f97e\">endoscopic</span> treatments fail.</p>\n\t</li>\n\t<li>\n\t<p>It acts as a <strong>bridge to <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> therapy</strong> (like band ligation, sclerotherapy, or TIPS).</p>\n\t</li>\n\t<li>\n\t<p>Balloon inflation is done in sequence: <strong>gastric balloon first (250-300 mL air/saline), then <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> balloon (20-40 mmHg)</strong>.</p>\n\t</li>\n\t<li>\n\t<p>Common complications include <strong>aspiration pneumonia</strong>, mucosal ulceration, and <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> rupture.</p>\n\t</li>\n</ul>\n\n<p><strong>Balloon <span class=\"customMeta\" data-dictid=\"d001df0a4e16927772005d4804a962\">Tamponade</span> and Management of <span class=\"customMeta\" data-dictid=\"d4607865bb1692777201a35341db81\">Variceal</span> Bleeding</strong></p>\n\n<table>\n\t<thead>\n\t\t<tr>\n\t\t\t<th>Aspect</th>\n\t\t\t<th>Details</th>\n\t\t</tr>\n\t</thead>\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>Purpose</td>\n\t\t\t<td>Temporary control of <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> in <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> varices</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Indications</td>\n\t\t\t<td>Bleeding uncontrolled by <span class=\"customMeta\" data-dictid=\"35ca8c2d5f16927771879351e8f97e\">endoscopic</span> treatment</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Balloon inflation order</td>\n\t\t\t<td>Gastric balloon first, then <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> balloon</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Definitive treatments</td>\n\t\t\t<td>Endoscopic banding, sclerotherapy, TIPS</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>Common complications</td>\n\t\t\t<td>Aspiration <span class=\"customMeta\" data-dictid=\"1000989d33169277719652247cd559\">pneumonia</span> (most common), mucosal ulceration, <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> rupture</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>The <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> balloon is inflated first with 30-40 mmHg pressure, followed by <span class=\"customMeta\" data-dictid=\"12347b15191692777188bc86d226e1\">gastric</span> balloon inflation with 400 mL of air (Option B):</strong> Incorrect because the <strong>gastric balloon is inflated first</strong> to prevent <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> rupture.</p>\n\n<p><strong>It is a <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> treatment and does not require further procedures like <span class=\"customMeta\" data-dictid=\"14a6f814ea1692777182619ddd636c\">banding</span> or <span class=\"customMeta\" data-dictid=\"c6eed7f30016927771988ace779458\">sclerotherapy</span> (Option C): </strong>Incorrect because the <strong>tube is only a temporary rescue device</strong>, and <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> treatments are still required afterward.</p>\n\n<p><strong>The most common <span class=\"customMeta\" data-dictid=\"8a6b09beac1692777184b08a2b5766\">complication</span> associated with its use is pressure <span class=\"customMeta\" data-dictid=\"5e84a7987c16927771931012aced83\">necrosis</span> of the <span class=\"customMeta\" data-dictid=\"192677035a169277718780b4d6dbbb\">esophageal</span> <span class=\"customMeta\" data-dictid=\"31ae8f4dc51692777193069d92be37\">mucosa</span> (Option D):</strong> Incorrect because the <strong>most common <span class=\"customMeta\" data-dictid=\"8a6b09beac1692777184b08a2b5766\">complication</span> is aspiration</strong>, not pressure necrosis.</p>",
    "question_images": [
      "https://image.prepladder.com/content/gYXnvfADNi8dUjvAUYA61740141869.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/D2Vg5a5MLOqG1hw8VI0Q1749029763.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/zAFACML1VnMEkbd2iwEb1749029981.mp3"
  },
  {
    "text": "<p>A 60-year-old man with a history of alcoholic cirrhosis presents to the emergency department with massive hematemesis. After initial stabilization, the decision is made to use the following device, as given in the picture below, for temporary management of suspected bleeding gastric varices.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/TCRJvdbUbiWUhYRESd2W1740142506.png\" width=\"300\" /></p>\n\n<p>Which of the following statements about the device is INCORRECT?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "The device shown in the picture is Sengstaken-Blakemore tube"
      },
      {
        "id": 2,
        "text": "It contains three lumens consisting of Esophageal and gastric aspiration port, and a port for balloon inflation"
      },
      {
        "id": 3,
        "text": "It has a single gastric balloon with capacity 500-600cc"
      },
      {
        "id": 4,
        "text": "It is used for temporary management of bleeding gastric varices"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) The device shown in the picture is Sengstaken-Blakemore tube</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The device shown in the image is <strong>Linton Nachlas tube,</strong> identified by the presence of a <strong>single inflatable balloon</strong>.</p>\n\n<p>On the contrary, <span class=\"customMeta\" data-dictid=\"43526c91e816927771986814712086\">Sengstaken-Blakemore tube</span> has 2 balloons- <strong>Gastric and Oesophageal inflatable balloon, </strong>as shown in the image below.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"400\" src=\"https://image.prepladder.com/content/A4N1FLn0JjQmGkNd9E2G1740142657.png\" width=\"400\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/TCRJvdbUbiWUhYRESd2W1740142506.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/A4N1FLn0JjQmGkNd9E2G1740142657.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/cfTzRgV1dvdklCNcWMKM1749030076.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/reDYF91jTAMKv175VooA1749030145.mp3"
  },
  {
    "text": "<p>Which of the following statements about the following instrument in the image is incorrect?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Cheng, Chunxia & Subedi, Jigyasa & Zhang, Aiqian & Johnson, Grace & Zhao, Xingping & Xu, Dabao & Guan, Xiaoming. \" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/A-14-Fr-Foley-catheter-used-in-this-study-with-80-ml-air-inside-the-balloon_fig4_338190245\" data-tags=\"\" height=\"183\" src=\"https://image.prepladder.com/content/fIKjjoG1HdR2valmFZ3B1740143288.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "The catheter is coated with silicone to minimize irritation during prolonged use."
      },
      {
        "id": 2,
        "text": "For self-retaining purposes, the balloon is inflated with 20-30 ml of saline."
      },
      {
        "id": 3,
        "text": "It can be used for administration of intravesical chemotherapy"
      },
      {
        "id": 4,
        "text": "2-way foley\u2019s catheter can be used for bladder irrigation following TURP"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) 2-way Foley\u2019s <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> can be used for <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">irrigation</span> following TURP</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>For <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">irrigation</span> following TURP, <strong>3-way Foley\u2019s</strong> is used. The additional channel in the 3-way <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is used for draining clots in patients with haematuria and <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> retention, following <span class=\"customMeta\" data-dictid=\"041fb2c22116927772007921f33a1e\">transurethral</span> <span class=\"customMeta\" data-dictid=\"19c0231fc41692777196ffce23771d\">prostate</span> or <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> surgery.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/OCLKrOlg4oy3mJQ6uMuc1740143435.png\" width=\"300\" /></p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Material</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>LATEX - </strong>Less <span class=\"customMeta\" data-dictid=\"3a74ed0fcf16927771901a79847565\">irritation</span> & <span class=\"customMeta\" data-dictid=\"62b976e2941692777185c4b2eb180b\">crust</span> formation</li>\n\t\t\t\t<li><strong>Silicone Coating-</strong>\u00a0For Prolonged use (upto 3 months) <strong>(Option A)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Types</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>2-way Foley catheter</li>\n\t\t\t\t<li>3-way Foley catheter</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #808080; border-right:1px solid #808080; border-top:1px solid #808080; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Channels</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #808080; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>2-way Foley catheter:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Main channel: For <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> of urine</li>\n\t\t\t\t<li>Small channel: For inflating balloon</li>\n\t\t\t</ul>\n\n\t\t\t<p><strong>3-way Foley catheter:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Main channel: for <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> of urine</li>\n\t\t\t\t<li>Additional channel for irrigation</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #808080; border-right:1px solid #808080; border-top:1px solid #808080; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Balloon Inflation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #808080; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>20-30 ml <span class=\"customMeta\" data-dictid=\"894da1dfe6169277719871d7210619\">saline</span> for self-retaining <strong>(Option B)</strong></li>\n\t\t\t\t<li>30-50 ml of <span class=\"customMeta\" data-dictid=\"894da1dfe6169277719871d7210619\">saline</span> for <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> effect</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #808080; border-right:1px solid #808080; border-top:1px solid #808080; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Sizes (French scale)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #808080; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Pediatric patients</strong>: 4, 6, 8, 10</li>\n\t\t\t\t<li><strong>Adult patients: </strong>12, 14, 16, 18</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #808080; border-right:1px solid #808080; border-top:1px solid #808080; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Size Calculation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #808080; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Outer <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> of <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> in mm = Fr/3 (Fr - French units)</li>\n\t\t\t\t<li>E.g, if the size of the <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is 18 French, then <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> = 18/3 = 6mm</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #808080; border-left:1px solid #808080; border-right:1px solid #808080; border-top:1px solid #808080; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Uses</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #808080; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>To relieve <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> retention</li>\n\t\t\t\t<li>To measure <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> output</li>\n\t\t\t\t<li>For administration of <span class=\"customMeta\" data-dictid=\"7651a08a051692777190d0e439f450\">intravesical</span> <span class=\"customMeta\" data-dictid=\"8602c4b260169277718439bb122cb0\">chemotherapy</span> <strong>(Option C)</strong></li>\n\t\t\t\t<li>3 ways <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> - for <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">Irrigation</span> after TURP</li>\n\t\t\t\t<li>May be used for supra-pubic cystostomy</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [
      "https://image.prepladder.com/content/fIKjjoG1HdR2valmFZ3B1740143288.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/OCLKrOlg4oy3mJQ6uMuc1740143435.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/X8RN2EFaEU8zuZDZoQo01749030208.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/HE40fA3ZttM0MkXrbztN1749030262.mp3"
  },
  {
    "text": "<p>A 58-year-old patient is rushed to the emergency department with symptoms of acute limb ischemia. The vascular surgeon diagnoses an arterial embolism and decides to perform an embolectomy. Which of the following catheters is specifically designed and most appropriate for this procedure?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Swan-Ganz catheter"
      },
      {
        "id": 2,
        "text": "Fogarty Catheter"
      },
      {
        "id": 3,
        "text": "De-Pezzer Catheter"
      },
      {
        "id": 4,
        "text": "Malecot\u2019s Catheter"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Fogarty Catheter</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Fogarty <span class=\"customMeta\" data-dictid=\"4f8aa8490916927771876a34458133\">Embolectomy</span> <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">Catheter</span> is used in <strong>embolectomy </strong>to treat <strong>arterial or <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> thrombus/emboli</strong> in blood vessels.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/ign9nT85gT3BdhTGvMfk1740143755.png\" width=\"300\" /></p>\n\n<p>The correct procedure for using the catheter:</p>\n\n<ul>\n\t<li>Insertion through the clot</li>\n\t<li>Inflation beyond the embolus</li>\n\t<li>Withdrawal to remove the clot</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/s1nGIwSmv6BQF8yfWwwr1740143890.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>Swan-Ganz <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> <strong>(Option A)</strong> is used for <span class=\"customMeta\" data-dictid=\"cdf4a197dd16927771881a652c8328\">hemodynamic</span> monitoring using <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> <span class=\"customMeta\" data-dictid=\"a66cd3adaa1692777182e77cb23021\">artery</span> catheterization, not for embolectomy.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"ICUnurses\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Pulmonary_Artery_Catheter.JPG\" data-tags=\"\" height=\"286\" src=\"https://image.prepladder.com/content/cpaGsVsCkITkYxn1I2JJ1740144038.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>De-Pezzer Self-Retaining Catheter<strong> </strong><strong>(Option C)</strong> & Malecot <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">Catheter</span> <strong>(Option D)</strong> are used for <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> and related procedures, not for <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> embolectomy.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/ign9nT85gT3BdhTGvMfk1740143755.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/rEU5hPJhiPdZDGqPr8AA1749030334.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/o3ZWyNWY0rAwKVkjJBDK1749030378.mp3"
  },
  {
    "text": "<p>Match the following:</p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:800px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>a. Foley\u2019s catheter</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1.\u00a0<img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"200\" src=\"https://image.prepladder.com/content/uhPVfOIzUvj3jvKxuTei1740144630.png\" width=\"200\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>b. Nelaton\u2019s catheter</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>2.\u00a0<img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"200\" src=\"https://image.prepladder.com/content/suVEIReURJpAlbCGNiyo1740144821.png\" width=\"200\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>c. Malecot\u2019s catheter</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>3.\u00a0<img alt=\"\" data-author=\"Cheng, Chunxia & Subedi, Jigyasa & Zhang, Aiqian & Johnson, Grace & Zhao, Xingping & Xu, Dabao & Guan, Xiaoming. \" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/A-14-Fr-Foley-catheter-used-in-this-study-with-80-ml-air-inside-the-balloon_fig4_338190245\" data-tags=\"\" height=\"122\" src=\"https://image.prepladder.com/content/7rB8sA8GibwndqnfsjYa1740144969.png\" width=\"200\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>d. Red-rubber catheter</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>4.\u00a0<img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"200\" src=\"https://image.prepladder.com/content/Bsa7bsQUn6X24yKbtTWq1740144732.png\" width=\"200\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "choices": [
      {
        "id": 1,
        "text": "a-3, b-4, c-1,d-2"
      },
      {
        "id": 2,
        "text": "a-4, b-3, c-2, d-1"
      },
      {
        "id": 3,
        "text": "a-1, b-2, c-3, d-4"
      },
      {
        "id": 4,
        "text": "a-2, b-1, c-4, d-3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Answer: (A) a-3, b-4, c-1, d-2</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Various catheters used in surgery-</strong></p>\n\n<p>A Malecot <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is a self-retaining <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> with an umbrella or flower tip. It contains sulfur, hence is radio-opaque. It can be sterilized by boiling.</p>\n\n<p><strong>Uses:</strong></p>\n\n<ul>\n\t<li>Suprapubic cystostomy</li>\n\t<li>Perinephric abscess</li>\n\t<li>Amoebic liver abscess</li>\n\t<li>Subphrenic abscess</li>\n\t<li>Cholecystostomy</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/qtbsfQFROG4uBL80ggQz1740144594.png\" width=\"300\" /></p>\n\n<p style=\"text-align: center;\"><strong>Fig: Malecot catheter</strong></p>\n\n<p>A Nelaton <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is used for one-time <span class=\"customMeta\" data-dictid=\"397f16a7a71692777187ffffefa7e6\">emptying</span> of the <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> during or after surgery.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/RLzFaSAjDHnkKpNU9yzF1740144691.png\" width=\"300\" /></p>\n\n<p style=\"text-align: center;\">Fig. Nelaton catheter</p>\n\n<p>A red-rubber <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is a non-self-retaining <span class=\"customMeta\" data-dictid=\"0b72f5e96b16927772018dec8a87e2\">urinary</span> <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> (has no balloon)</p>\n\n<ul>\n\t<li>Tip: rounded and blunt</li>\n\t<li>Uses: Temporarily used to drain <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> from the bladder</li>\n</ul>\n\n<p>Used to estimate the <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> urine</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/mAJnR1fDa3iZkY2bs7EH1740144789.png\" width=\"300\" /></p>\n\n<p style=\"text-align: center;\">Fig: Red -Rubber catheter</p>\n\n<p>A Foley\u2019s <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is a thin, <span class=\"customMeta\" data-dictid=\"fc3d080799169277719904701c07f9\">sterile</span> tube inserted into the <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> to drain urine.</p>\n\n<ul>\n\t<li>It is also known as an <span class=\"customMeta\" data-dictid=\"3d7fbfbd7f1692777190bde80be811\">indwelling</span> <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> as it can be left in place in the <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> for a period of time.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Cheng, Chunxia & Subedi, Jigyasa & Zhang, Aiqian & Johnson, Grace & Zhao, Xingping & Xu, Dabao & Guan, Xiaoming. \" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/A-14-Fr-Foley-catheter-used-in-this-study-with-80-ml-air-inside-the-balloon_fig4_338190245\" data-tags=\"\" height=\"183\" src=\"https://image.prepladder.com/content/1vKLwXBOsJzdk8mJu16x1740144920.png\" width=\"300\" /></p>\n\n<p style=\"text-align: center;\">Fig: Foley\u2019s catheter</p>",
    "question_images": [
      "https://image.prepladder.com/content/uhPVfOIzUvj3jvKxuTei1740144630.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/qtbsfQFROG4uBL80ggQz1740144594.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/ZnLQgMxI2kiPQG2fY9OC1749037431.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/uVjb7gH6QNEr902nZ2hD1749037484.mp3"
  },
  {
    "text": "<p>All of the following are true statements regarding central venous catheters except-</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "The tip of the catheter is situated in the inferior vena cava"
      },
      {
        "id": 2,
        "text": "The most dangerous complication is pneumothorax"
      },
      {
        "id": 3,
        "text": "Inside OT, the Internal jugular vein is the preferred vein"
      },
      {
        "id": 4,
        "text": "In acutely injured, critically ill patients Femoral vein is the preferred vein"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Answer: A) The tip of the <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is situated in the <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"3ddf6d5ea71692777201b70c8b9715\">vena</span> cava</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The tip of the central <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is situated in the superior <span class=\"customMeta\" data-dictid=\"3ddf6d5ea71692777201b70c8b9715\">vena</span> cava, not on the <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"3ddf6d5ea71692777201b70c8b9715\">vena</span> cava.</p>\n\n<p>The central <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> is used for fluid, medication, and <span class=\"customMeta\" data-dictid=\"05bef24e711692777193a154b462b4\">nutrition</span> administration.</p>\n\n<ul>\n\t<li>The tip is located in the superior <span class=\"customMeta\" data-dictid=\"3ddf6d5ea71692777201b70c8b9715\">vena</span> cava</li>\n\t<li>Order of preference: <span class=\"customMeta\" data-dictid=\"9562c879be1692777199afcb12fa54\">Subclavian</span> <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> > Internal <span class=\"customMeta\" data-dictid=\"af7ff6c5fd1692777190f88c20b21b\">jugular</span> <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> > <span class=\"customMeta\" data-dictid=\"ab8a987431169277720229e09c01d7\">Femoral</span> <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> <strong>(Option D)</strong></li>\n\t<li>Inside OT: Internal <span class=\"customMeta\" data-dictid=\"af7ff6c5fd1692777190f88c20b21b\">jugular</span> <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> <strong>(Option C)</strong></li>\n\t<li>Outside OT: <span class=\"customMeta\" data-dictid=\"9562c879be1692777199afcb12fa54\">Subclavian</span> vein</li>\n\t<li>Complications: catheter-related sepsis, <span class=\"customMeta\" data-dictid=\"d9d1e6f2801692777196f37b28fb6a\">pneumothorax</span> <strong>(Option B)</strong></li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\" BruceBlaus. \" data-hash=\"\" data-license=\"CC BY 3.0\" data-source=\"https://en.wikipedia.org/wiki/Central_venous_catheter#/media/File:Blausen_0181_Catheter_CentralVenousAccessDevice_NonTunneled.png\" data-tags=\"\" height=\"186\" src=\"https://image.prepladder.com/content/LLabnzFVT9Uimaf3GvkF1740145106.png\" width=\"300\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/LLabnzFVT9Uimaf3GvkF1740145106.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/YgSoXZg85Dfku6Jv0PGd1749030443.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/wg1VZndnIYFLKpmsBe4E1749030494.mp3"
  },
  {
    "text": "<p>What is the size of the cannula shown in the below image?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Saltanat ebli\" data-hash=\"\" data-license=\"CC0 1.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Intravenous_cannula_01.JPG\" data-tags=\"\" height=\"87\" src=\"https://image.prepladder.com/content/qhcdhGYN9IOBxl7wV8e61740145192.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "18G"
      },
      {
        "id": 2,
        "text": "20G"
      },
      {
        "id": 3,
        "text": "24G"
      },
      {
        "id": 4,
        "text": "26G"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) 18G</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The given <span class=\"customMeta\" data-dictid=\"7611186da51692777183be9dcf4063\">cannula</span> is an 18G IV <span class=\"customMeta\" data-dictid=\"7611186da51692777183be9dcf4063\">cannula</span> and its color code is green</li>\n</ul>\n\n<ul>\n\t<li>The green <span class=\"customMeta\" data-dictid=\"7611186da51692777183be9dcf4063\">cannula</span> has a flow rate of 90\u00a0ml/min and it is used for administering blood products, <span class=\"customMeta\" data-dictid=\"27d1e0446d16927771908376c1e30e\">irritant</span> medications, in major surgery, contrast study</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Sizes of Cannula:</strong></p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/u7fpUawdLGulx5rjUdpk1740145270.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/qhcdhGYN9IOBxl7wV8e61740145192.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/u7fpUawdLGulx5rjUdpk1740145270.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/DglKZ5ijN2r55QeccLxr1749037862.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/lMIGJxT0CjzhvCvytA7z1749037905.mp3"
  },
  {
    "text": "<p>All of the following about chemo-port is true, except</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Retained for 5 years"
      },
      {
        "id": 2,
        "text": "Used for chemotherapy administration"
      },
      {
        "id": 3,
        "text": "The catheter is placed beneath the skin"
      },
      {
        "id": 4,
        "text": "The veins used are the internal jugular and subclavian veins."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Retained for 5 years </strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Chemoport is an implantable <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> access device which is placed beneath the skin. <strong>(Option C)</strong></li>\n\t<li>It is retained for 1-2 years.</li>\n\t<li>The veins used are the internal <span class=\"customMeta\" data-dictid=\"af7ff6c5fd1692777190f88c20b21b\">jugular</span> <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> and the <span class=\"customMeta\" data-dictid=\"9562c879be1692777199afcb12fa54\">subclavian</span> vein. <strong>(Option D)</strong></li>\n\t<li>Used for <span class=\"customMeta\" data-dictid=\"8602c4b260169277718439bb122cb0\">chemotherapy</span> administration. <strong>(Option B)</strong></li>\n\t<li>In the chemo port, there are <span class=\"customMeta\" data-dictid=\"016b53d1731692777194a8d558c428\">palpation</span> pumps with which we can feel the presence of the septum.</li>\n\t<li>Complications- <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> embolization, port occlusion, <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> thrombosis.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/NHVa5DIk2mhcEkHyJPgW1740145334.png\" width=\"300\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/NHVa5DIk2mhcEkHyJPgW1740145334.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/0iSvAiXwBnFilz1SgzIP1749037968.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/PtIGUGl5i3gFYPSTG1zw1749038011.mp3"
  }
];
        let quizName = '66 ‚Å†Tubes, Catheters, And Drains';
        let hierarchy = ["PrepLadder", "qBank", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>