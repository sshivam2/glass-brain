<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 18 (Graphs And Charts) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In the given graph of a normal menstrual cycle, the mark 'X' represents levels of which of the following hormones?",
    "choices": [
      {
        "id": 1,
        "text": "Progesterone"
      },
      {
        "id": 2,
        "text": "Estrogen"
      },
      {
        "id": 3,
        "text": "LH"
      },
      {
        "id": 4,
        "text": "FSH"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given menstrual cycle graph, the mark 'X' represents levels of&nbsp;<strong>progesterone</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c33e08c9d92a4f3993c74889e00a4fe6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5388e1c07d8e46e887dbbd4e8d06d776x920x584.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fb15fd9f4de64d94a708c0519d96610fx600x655.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6bca067914a2482e9fbba7d5e0ecfde2x1280x2327.JPEG"
    ]
  },
  {
    "text": "In the image given below, the weight and height of a child are plotted against his age in years. Identify the correct statement.",
    "choices": [
      {
        "id": 1,
        "text": "WHO growth charts used now are developed by National Center for Health Statistics (NCHS)"
      },
      {
        "id": 2,
        "text": "Short stature is defined as a height below 5th percentile"
      },
      {
        "id": 3,
        "text": "Puberty in this child will be normal"
      },
      {
        "id": 4,
        "text": "Bone age of this child is less than chronological age"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Bone age of this child is less than chronological age, </strong>as seen in cases of\u00a0constitutional delay.</p>\n<p>As seen in the graph, the child was short initially, but the final height is within normal range. Hence, this child has\u00a0constitutional delay.</p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li>The\u00a0WHO growth charts are based on <strong>Multicentre Growth Reference Study</strong> (MGRS). National Center for Health Statistics (NCHS) developed growth charts</li>\n<li>were used in the past.</li>\n<li>Short stature is defined as a height <strong>below the\u00a0third percentile</strong> or more than 2 standard deviations below the median height for age and gender (&lt;-2 SD) according to the population standard.</li>\n<li>Puberty will be delayed in this child.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/12bfb11979cb4c6cb4c76df7df9599bd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Read the pedigree chart and identify the pattern of transmission.",
    "choices": [
      {
        "id": 1,
        "text": "X linked dominant"
      },
      {
        "id": 2,
        "text": "Autosomal dominant"
      },
      {
        "id": 3,
        "text": "X linked recessive"
      },
      {
        "id": 4,
        "text": "Autosomal recessive"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The pattern of inheritance shown in the image is <strong>X linked recessive pattern</strong> of inheritance.</p>\n<p>Clues for diagnosis of the pattern of inheritance as X-linked recessive:</p>\n<ul>\n<li>Males are affected and <strong>females are carriers</strong>.</li>\n<li><strong>No male-to-male transmission</strong>. Females transmit the disease.</li>\n<li>Females transmit the mutated genes to 50% of the males.</li>\n<li>Affected males have carrier daughters and unaffected sons.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ad493375eca4653a703c8d0ca213242.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding phase Ib of a cystometrogram?",
    "choices": [
      {
        "id": 1,
        "text": "It is due to the elasticity of bladder"
      },
      {
        "id": 2,
        "text": "It is due to the plasticity the bladder has"
      },
      {
        "id": 3,
        "text": "The graph is flat due to the contractility of the bladder"
      },
      {
        "id": 4,
        "text": "Micturition occur at the start of Ib"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The true statement regarding phase Ib in the cystometrogram is that<strong>\u00a0segment Ib</strong> is due to <strong>plasticity\u00a0</strong>of the badder. Plasticity is the ability of an object to deform its shape without breaking.</p>\n<p><strong>Cystometrogram </strong>is a plot of <strong>intravesical pressure</strong> against the <strong>volume</strong> of <strong>fluid</strong> in the <strong>bladder.</strong> The curve shows three segments:</p>\n<ul>\n<li><strong>Ia</strong>-<strong>\u00a0initial slight rise</strong> in pressure when the first increments in the volume are produced</li>\n<li><strong>Ib</strong>-\u00a0<strong>long</strong>, nearly <strong>flat segment</strong> as further increments are produced</li>\n<li><strong>II-</strong>\u00a0<strong>sudden, sharp rise</strong> in pressure as the<strong> micturition reflex</strong> is<strong> triggered</strong>.</li>\n<li>The <strong>dotted line-</strong>\u00a0pressure-volume relation if the<strong> micturition</strong> had<strong> not occurred</strong>.</li>\n</ul>\n<p>The<strong> flatness</strong> of segment Ib is a demonstration of the<strong> law of Laplace</strong>.\u00a0The law of Laplace states that the pressure (P) in a spherical viscus is equal to twice the wall tension (T) divided by the radius (R). This is expressed as\u00a0<strong>P= 2T/R.\u00a0</strong>In the blad\u00adder, the<strong> tension increases</strong> as the bladder get filled. Since the<strong> radius </strong>also <strong>increases</strong>\u00a0because of the plasticity of the bladder, there is only a<strong> slight increase</strong> in pressure\u00a0until the bladder is relatively full.</p>\n<p>The<strong>\u00a0first urge</strong>\u00a0to\u00a0void\u00a0is felt at a bladder volume of about\u00a0<strong>150 mL</strong>. A marked\u00a0sense\u00a0of<strong>\u00a0fullness</strong> is felt at a bladder volume of <strong>400ml</strong>.</p>\n<p><strong>Micturition reflex</strong>\u00a0is the result of <strong>sensory </strong>signals from the\u00a0<strong>stretch receptors</strong> in the bladder wall, which are conducted to the <strong>sacral segments</strong> of the cord through the <strong>pelvic nerves</strong> and then<strong> efferent </strong>signals conducts back again to the bladder through the <strong>parasympathetic</strong> nerve fibers.</p>\n<p>The micturition reflex pathway is given below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b96daabf5734f6fa233b506ae35e838.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94e1769c71d24e10ba39b39883687d6ex600x988.JPEG"
    ]
  },
  {
    "text": "This is the partograph of a primigravida in labor. What is the next line of management?",
    "choices": [
      {
        "id": 1,
        "text": "Wait and watch"
      },
      {
        "id": 2,
        "text": "Induction of labor by prostaglandins"
      },
      {
        "id": 3,
        "text": "Caesarean section"
      },
      {
        "id": 4,
        "text": "Induction of labor by mechanical methods"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cesarean section</strong> is the next line of management as the plotting on the above partograph has crossed the action line.</p>\n<div class=\"page\" title=\"Page 471\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 471\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Partograph is analysed using alert and action lines. When the graph crosses the action line, active intervention should be initiated.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Labor is divided into a latent phase (average of 8 hrs in primi and 6 hrs in multigravida) and an active phase.</p>\n<p>Clinically the active phase starts at &ge;6 cm dilatation, and progress should be no slower than 1 cm/hr.</p>\n<p>A 4-hour wait is recommended before intervention when the active phase is slow.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/85b264288f6145caa693757de16987fa.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The relative risks for vaccines A and B are 0.5 and 2.0 respectively. Identify which of the following graphs represent them correctly.",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "1 and 3"
      },
      {
        "id": 3,
        "text": "2 and 3"
      },
      {
        "id": 4,
        "text": "Only 1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Graphs 1 and 2</strong> correctly represent the relative risks of the vaccines.</p>\n<p>The relative risks of vaccines A and B are 0.5 and 2.</p>\n<p>Graph 1: The 1st bar is at <strong>0.5,</strong> and the 2nd bar is at <strong>2.</strong>&nbsp;</p>\n<p>Graph 2: The 1st bar is at <strong>0.5,</strong> and the 2nd bar is at <strong>2.</strong>&nbsp;</p>\n<p>Graph 3: The 1st bar is at<strong> 0</strong>, and the 2nd bar is at <strong>2.&nbsp;</strong></p>\n<p>Therefore, <strong>graph 3 is wrong</strong> and graphs 1 and 2 correctly depict the given scenario.</p>\n<p>&nbsp;</p>\n<p><strong>Relative Risk:</strong></p>\n<ul>\n<li>The ratio of incidence of disease or death among exposed to that among the non-exposed is called&nbsp;<strong>relative risk (RR).</strong></li>\n<li>It is also called the&nbsp;<strong>risk ratio</strong>.</li>\n<li>It is the direct measure of the&nbsp;<strong>strength of association</strong>&nbsp;between suspected cause and effect in&nbsp;<strong>cohort studies.</strong></li>\n<li>RR = 1 indicates no association.</li>\n<li>RR of 2 or higher indicates a 100% increase in risk.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c13461847a8047a094409a8e49c63726.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A biochemistry resident plots a graph while studying the effect of an inhibitor on an enzymatic reaction. Which of the following statements is false, with respect to the following graph that he has plotted?",
    "choices": [
      {
        "id": 1,
        "text": "Reaction is with a non-competitive inhibitor"
      },
      {
        "id": 2,
        "text": "Inhibitor binds to the enzyme in location other than the active site"
      },
      {
        "id": 3,
        "text": "Vmax decreases and Km is unchanged"
      },
      {
        "id": 4,
        "text": "Can be overcome by increasing the substrate concentration"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given&nbsp;graph represents a reaction with a <strong>non-competitive inhibitor&nbsp;</strong>and it <strong>cannot </strong>be<strong> overcome </strong>by<strong> increasing </strong>the<strong> concentration </strong>of the<strong> substrate.</strong></p>\n<p>The above graph is called the '<strong>Lineweaver-Burk plot' </strong>or<strong> 'double reciprocal' plot.&nbsp;</strong>1/v<sub>0</sub> is plotted versus 1/[S] and a straight line is obtained. This plot can be used to calculate K<sub>m</sub> and V<sub>max</sub> as well as to determine the mechanism of action of enzyme inhibitors.</p>\n<p>In non-competitive inhibition, <strong>V<sub>max</sub> decreases</strong> (or 1/V<sub>max</sub> increases) but <strong>K<sub>m</sub> </strong>is<strong> unchanged.&nbsp;</strong>Hence&nbsp;the graphs of inhibited and uninhibited reactions have the <strong>same x-intercepts</strong> (converge at -1/K<sub>m</sub>) but <strong>different y-intercepts.</strong></p>\n<p>In contrast to competitive inhibitors, noncompetitive inhibitors <strong>bind </strong>to<strong> enzymes</strong> in locations <strong>away from</strong> the<strong> active site</strong>.&nbsp;For this reason,&nbsp;the <strong>degree</strong> of <strong>inhibition</strong> is based solely upon the<strong> concentration of the inhibitor</strong>, and <strong>increasing </strong>the<strong> substrate concentrations</strong> does<strong> not</strong> compete with or <strong>change </strong>the<strong> inhibition</strong>. Therefore, unlike the increase in Km seen with competitive inhibition, in noncompetitive inhibition, Vmax decreases while Km usually remains the same. While <strong>competitive inhibitors</strong> can be <strong>overcome</strong> at a sufficiently<strong> high substrate concentration </strong>(i.e, reversible), <strong>non-competitive inhibition</strong> is <strong>irreversible</strong> and&nbsp;<strong>cannot </strong>be<strong> overcome</strong> by increasing the concentration of the substrate.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ad95ba5027c48d4bf68ac6ac29af8ef.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/68c62c7e31bc4e378bfde9d6effe5ecdx1280x1287.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/77321cdf68934ee38405cd6080bcbdd3x1280x2317.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/61e22ac671cd4d56bc7474bb882799f1x1280x2235.JPEG"
    ]
  },
  {
    "text": "What type of data does the image given below represent?",
    "choices": [
      {
        "id": 1,
        "text": "Nominal"
      },
      {
        "id": 2,
        "text": "Discrete"
      },
      {
        "id": 3,
        "text": "Continuous"
      },
      {
        "id": 4,
        "text": "Ordinal"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is of a <strong>histogram.&nbsp;</strong>It<strong>&nbsp;</strong>is used to represent frequency distributions of <strong>continuous quantitative </strong>data.</p>\n<p><strong>Nominal</strong> and <strong>ordinal</strong> data can be represented by a <strong>bar chart</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9e748530ff3840979f51c5048243c3e9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "This is the graph depicting the filterability of dextran through the kidney, 1 representing complete filtration and 0 representing no filtration. Choose the substance A, B, C respectively.",
    "choices": [
      {
        "id": 1,
        "text": "Polycationic, Neutral, Polyanionic"
      },
      {
        "id": 2,
        "text": "Polyanionic, Neutral, Polycationic"
      },
      {
        "id": 3,
        "text": "Neutral, Polycationic, Polyanionic"
      },
      {
        "id": 4,
        "text": "Polyanionic, Polycationic, Neutral"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given graph, the order of filterability is<strong> A&gt;B&gt;C,</strong> which likely indicates that the substances are&nbsp;Polycationic, Neutral, Polyanionic.</p>\n<p>The glomerular filtration barrier is <strong>negatively charged,</strong> which will <strong>repel</strong> most of the negative charged <strong>(anionic substances).</strong> Whereas, the <strong>cationic</strong> <strong>substances</strong> are <strong>easily filtered.</strong></p>\n<p>Hence, the order of filterability would be:&nbsp;<strong>Polycationic &gt; Neutral &gt; Polyanionic</strong>, represented by A, B, and C in the graph shown.</p>\n<p>&nbsp;</p>\n<p>The glomerular filtration barrier consists of:</p>\n<ul>\n<li>The <strong>endothelium </strong>of the capillary</li>\n<li>A&nbsp;<strong>basement membrane&nbsp;</strong>- lamina densa- electron-dense layer and contains type IV collagen, lamina rara interna and externa contains glycosaminoglycan heparan sulphate which has a negative charge.&nbsp;</li>\n<li>A layer of <strong>epithelial cells (podocytes)</strong> surrounding the outer surface of the capillary basement membrane.</li>\n</ul>\n<div class=\"page\" title=\"Page 317\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b256365117bc4730b092757854b218d5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the ions A and B based on conductance graph of a neuron shown below:",
    "choices": [
      {
        "id": 1,
        "text": "Na, K"
      },
      {
        "id": 2,
        "text": "K, Na"
      },
      {
        "id": 3,
        "text": "Na, Ca"
      },
      {
        "id": 4,
        "text": "Ca, Na"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Channel A: Na+, Channel B: K+</p>\n<p><strong>Na+ channels</strong> are <strong>fast activating</strong> and are responsible for <strong>depolarization phase</strong> of action potential.</p>\n<p><strong>K+ channels</strong> are slow activating and open for prolonged duration than the sodium channels. They are responsible for <strong>repolarization phase</strong> of action potential. Also, the postassium channels return slowly to their closed state, which is responsible for after-hyperpolarization.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5b41f73493e346d69577df981ee24144.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/510f8bc1700b46e49988256fc470af77x1280x788.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3137550a82044cc7a89135c871eb2be3x1280x1401.JPEG"
    ]
  },
  {
    "text": "In the following osmotic fragility curve, \u2018A\u2019 occurs in _________.",
    "choices": [
      {
        "id": 1,
        "text": "Beta thalassemia"
      },
      {
        "id": 2,
        "text": "Sickle-cell anaemia"
      },
      {
        "id": 3,
        "text": "Hereditary spherocytosis"
      },
      {
        "id": 4,
        "text": "Both A and B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given osmotic fragility curve, the green-shaded region is the normal zone of red blood cell hemolysis. Here, curve A is more towards the left, indicating that RBCs have an <strong>increased osmotic fragility</strong><strong>.\u00a0</strong>When there is an increase in osmotic fragility, hemolysis occurs at a higher concentration of NaCl. <strong>Curve A</strong> signifies a higher concentration of NaCl in this graph which occurs in <strong>hereditary spherocytosis</strong>.</p>\n<p>In thalassemia and sickle-cell\u00a0anemia,\u00a0on the other hand,\u00a0the red cells become more resistant to\u00a0osmotic lysis due to which there is a decrease in osmotic fragility. Hence, the curve\u00a0will\u00a0shift to the right.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1d7e73d1c7de485a97bd29577b3fd529.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Name the principle of the test shown below:",
    "choices": [
      {
        "id": 1,
        "text": "Spherical aberration"
      },
      {
        "id": 2,
        "text": "Chromatic aberration"
      },
      {
        "id": 3,
        "text": "Coma"
      },
      {
        "id": 4,
        "text": "Diplopic projection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image depicts a <strong>Duochrome test</strong> based on<strong> chromatic aberration.</strong> It is used to refine the final sphere in subjective refraction.</p>\n<ul>\n<li>The patient is asked to compare the clarity of the letters on the green and the red side.</li>\n<li>If a myopic sees the letters of the green side clearer, he is overcorrected. So, +0.25 D sphere is added or -0.25D is removed.</li>\n<li>However, if a myopic sees the letters on the red side clearer, he is undercorrected and&nbsp;-0.25 D sphere is added.</li>\n<li>With optimal spherical correction, the letters on the red and green halves of the chart appear equally clear.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a2c2836b5d47438fb8dea39446daca15.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An oxygen hemoglobin dissociation curve of a 30-year-old athlete was recorded. If curve 3 represents the dissociation curve during rest, how would the graph shift if he was exercising?",
    "choices": [
      {
        "id": 1,
        "text": "Curve 1"
      },
      {
        "id": 2,
        "text": "Curve 2"
      },
      {
        "id": 3,
        "text": "Curve 3"
      },
      {
        "id": 4,
        "text": "Curve 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>From the given scenario, during <strong>exercise</strong>, the oxygen hemoglobin curve shifts considerably towards the right and is denoted by the <strong>curve 4.</strong></p>\n<p><strong>Curve 3</strong>&nbsp;represents the <strong>normal</strong> oxygen hemoglobin curve during rest.&nbsp;</p>\n<p>Conditions that cause a <strong>right shift (curve 3 to curve 4)</strong> in the oxygen hemoglobin curve are: (Conditions with the increased requirement of O2 - metabolically active tissues)</p>\n<ul>\n<li>Hypoxia and Hypercarbia - Metabolically active tissues utilize O2 and tissues produce CO2</li>\n<li>&darr; pH - Secondary to increased CO2 production</li>\n<li>&uarr; in temperature, heat</li>\n<li>&uarr; in 2,3-DPG - increased anaerobic glycolysis</li>\n</ul>\n<p>Conditions that cause a <strong>left shift (curve 3 to curve 2)</strong>&nbsp; in the oxygen hemoglobin dissociation curve are:</p>\n<ul>\n<li>Decreased carbon dioxide</li>\n<li>&uarr; pH of the blood</li>\n<li>&darr; in the temperature of the body</li>\n</ul>\n<p><strong>Curve 1</strong>&nbsp;represents the Myoglobin-O2 binding curve. It is a rectangular hyperbola (unlike a sigmoid curve of the oxygen-hemoglobin curve). This is because it only has a single oxygen binding site. It is present in muscles in large amounts and can provide oxygen to muscles even at low blood oxygen levels.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9a224341ca1f4a96a8584ba6b355b4a4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc35180960c142238cea26e0e603e24ax1280x1379.JPEG"
    ]
  },
  {
    "text": "Identify the virus in the following transmission cycle:",
    "choices": [
      {
        "id": 1,
        "text": "Nipah virus"
      },
      {
        "id": 2,
        "text": "Ebola virus"
      },
      {
        "id": 3,
        "text": "Japanese encephalitis virus"
      },
      {
        "id": 4,
        "text": "Zika virus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Transmission cycle of the <strong>Japanese encephalitis virus</strong> is shown above.</p>\n<p>Humans are the <strong>dead-end hosts</strong> for the Japanese encephalitis virus. The disease is transmitted by the bite of Culex mosquitoes, specifically Culex tritaeniorhynchus and&nbsp;Culex vishnui&nbsp;(common in India) species.</p>\n<p>Japanese encephalitis follows bird-arthropod-human transmission.</p>\n<p>JE virus infects several extra-human hosts, e.g., pigs and birds (like pond herons).&nbsp; The basic cycles of transmission are:</p>\n<p>&nbsp;(a)Pig &rarr; Mosquito&nbsp; &rarr; Pig</p>\n<p>(b) Bird&nbsp;&rarr; Mosquito&nbsp;&rarr; Bird</p>\n<p>Herons act as reservoir hosts and pigs as amplifier hosts.&nbsp;The control measures include mosquito control, locating piggeries away from the human dwellings and vaccinating pigs.</p>\n<p>Other options:</p>\n<p><strong>Nipah virus </strong>is a&nbsp;zoonotic&nbsp;virus, which is transmitted by animals to humans.&nbsp;</p>\n<p><strong>Transmission</strong>:</p>\n<ul>\n<li>Unprotected exposure to the secretions from the&nbsp;<strong>pigs</strong>, or unprotected contact with the tissue of a sick animal.</li>\n<li>Consumption of&nbsp;<strong>fruits</strong>&nbsp;or fruit products (such as raw date palm juice) contaminated with urine or saliva from infected&nbsp;<strong>fruit</strong>&nbsp;<strong>bats.</strong></li>\n<li><strong>Human-to-human transmission</strong>&nbsp;through close contact with people's secretions and excretions.</li>\n</ul>\n<p>The image depicts the life cycle of the Nipah virus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e27f6cbcbcb941ea886b0345ade975fd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2a1283ae8d794dfab9ab1f1508cdf977x720x1440.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d37b0ead09c243da81b3beb53938c5d8x720x449.JPEG"
    ]
  },
  {
    "text": "What is the location of the complexes shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Inner mitochondrial membrane"
      },
      {
        "id": 2,
        "text": "Outer mitochondrial membrane"
      },
      {
        "id": 3,
        "text": "Mitochondrial matrix"
      },
      {
        "id": 4,
        "text": "Intermembrane space"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows the\u00a0<strong>electron transport chain </strong>(ETC) which is located on the\u00a0<strong>inner mitochondrial membrane.\u00a0</strong></p>\n<p>The <strong>electron transport chain </strong>(ETC)\u00a0is a specialized set of electron carriers that can accept electrons. Energy-rich molecules like glucose are oxidized to produce water and carbon dioxide. The intermediate substrates in these reactions can pass on electrons to certain <strong>coenzymes</strong>\u00a0like nicotinamide adenine dinucleotide (<strong>NAD<sup>+</sup></strong>) and flavin adenine dinucleotide (<strong>FADH2</strong>).</p>\n<p>The energy from electron transfer is used to move H<sup>+</sup> through the inner mitochondrial membrane. The <strong>H+ gradient</strong> thus produced results in the production of ATP. <strong>ATP synthesis</strong> together with electron transport is known as <strong>oxidative phosphorylation</strong>.\u00a0</p>\n<p>Option B -\u00a0<strong>Outer mitochondrial membrane</strong> has acyl-CoA synthetase and glycerol phosphate acyltransferase.</p>\n<p>Option C -\u00a0<strong>Mitochondrial matrix</strong> has citric acid cycle enzymes, \u03b2-oxidation enzymes, and pyruvate dehydrogenase.</p>\n<p>Option D -\u00a0<strong>Intermembrane space</strong> has adenylyl kinase and creatine kinase. It is filled with H+ creating a proton gradient.\u00a0</p>\n<p>\u00a0The reactions in oxidative phosphorylation and the arrangement of complexes that form the ETC are shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cde3400b20774b5792a76de24e6baf21.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b1c9b24fcdb4c51b96ed9c5caa12a43x1280x2560.JPEG"
    ]
  },
  {
    "text": "A pressure-volume diagram of the left ventricle is given below. Calculate the stroke volume considering the heart rate as 65 beats per minute.",
    "choices": [
      {
        "id": 1,
        "text": "50 mL"
      },
      {
        "id": 2,
        "text": "120 mL"
      },
      {
        "id": 3,
        "text": "70 mL"
      },
      {
        "id": 4,
        "text": "100 mL"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: left;\">The stroke volume of this pressure-volume diagram is <strong>70 mL.</strong></p>\n<p style=\"text-align: left;\">The points in the graph indicate the following events of the cardiac cycle:</p>\n<ul>\n<li style=\"text-align: left;\">Point<strong> 1</strong>: <strong>Opening of the mitral valve</strong>. The corresponding reading on the graph denotes <strong>end-systolic volume</strong> (<strong>ESV</strong>).</li>\n<li style=\"text-align: left;\">Point <strong>2</strong>: <strong>Closing of the mitral valve</strong>.&nbsp;The corresponding reading on the graph denotes <strong>end-diastolic volume</strong> (<strong>EDV</strong>).</li>\n<li>Point 3: Opening of the aortic valve.</li>\n<li>Point 4: Closing of the aortic valve.</li>\n</ul>\n<p class=\"p2\"><strong>Stroke volume</strong> is the amount of blood that the heart pumps out with each beat. It is about 70 mL from each ventricle in&nbsp;<span class=\"Apple-converted-space\">resting conditions.</span></p>\n<p>In a pressure-volume diagram, stroke volume (SV) can be calculated using the values of ESV (50 mL) and EDV (120 mL):</p>\n<p><strong>Stroke volume = End diastolic volume&nbsp;&ndash; End systolic volume</strong></p>\n<p>Therefore, <strong>SV</strong> = 120 - 50 = <strong>70 mL</strong>.</p>\n<p><strong>Cardiac output</strong>&nbsp;can be calculated from the given data using the formula: &nbsp;Cardiac output = Stroke volume x heart rate</p>\n<p>Therefore, in this case, cardiac output = 70 x 65 = 4550 mL.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3b4b95d918834769841331ec9128fb09.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b35c30d3d1444ce28a07bc83908402fbx1280x1418.PNG"
    ]
  },
  {
    "text": "Analyze the graphs given below on different occupational groups and the chance of developing fever amongst each group. Which of the following groups has the highest chance of developing fever?",
    "choices": [
      {
        "id": 1,
        "text": "Industrial workers"
      },
      {
        "id": 2,
        "text": "Farmers"
      },
      {
        "id": 3,
        "text": "White collar jobs"
      },
      {
        "id": 4,
        "text": "Housewives"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows a&nbsp;<strong>component bar graph(A) and a pie chart(B).&nbsp;</strong>The pie chart shows the different groups and their percentage among the total workers, whereas the component bar graph shows the chance of them developing a fever. The <strong>highest chance of developing a fever</strong> is around <strong>90%</strong> , which is seen among <strong>white-collar jobs</strong> as evident <strong>from the component bar graph</strong>.</p>\n<p>The chance of developing fever in other groups are Industrial workers-50%, Farmers- 50% and Houseweives-around 20%. If the question was on the group having the highest proportion among the total workers, then it would be industrial workers, from the pie graph.</p>\n<p><strong>Component bar graph:</strong></p>\n<p>The bars can be divided into two or more parts where each part represents a certain item, proportional to the magnitude of that particular item (males and females in this image).</p>\n<p>It is used mainly for&nbsp;<strong>nominal or ordinal scale data.</strong></p>\n<p>The difference between a bar graph and a histogram is that the rectangles are <strong>separated by spaces</strong> representing data that forms&nbsp;<strong>discrete categories</strong>&nbsp;instead of continuous groups. Frequency polygon and Ogive can be constructed using a histogram, not a component bar chart</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fa7597478f5c48a29c82b2356574d67f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The graph below shows the relationship between the log[Dose] and the response of three drugs A, B, and C. Which of the following options is true in regards to the drugs' efficacy?",
    "choices": [
      {
        "id": 1,
        "text": "A = B > C"
      },
      {
        "id": 2,
        "text": "A > B > C"
      },
      {
        "id": 3,
        "text": "A > B = C"
      },
      {
        "id": 4,
        "text": "C > A = B"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the log dose-response curve, the <strong>perpendicular height</strong> represents the drug efficacy.</p>\n<p>Therefore, Drug C has the least efficacy.&nbsp;Both Drug A&nbsp;and Drug B have the highest efficacy that is the maximum effect produced by the drug. Thus, in the above image, the efficacy is <strong>Drug A = Drug B &gt; Drug C.</strong></p>\n<p>Efficacy:</p>\n<ul>\n<li>It is defined as the<strong> maximum effect produced</strong> by the drug.</li>\n<li>It reflects the capacity of the drug to activate a receptor and produce the response.</li>\n<li>In the log dose-response curve, the <strong>perpendicular height</strong> represents the drug efficacy. Thus, in the above image, the efficacy is Drug A = Drug B &gt; Drug C.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ec383ab64622466c8e3da2ca249e6193.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/31dc380ad3314fbc84b8312c08dd272cx1280x1165.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/322b8f3ab83e486784da84d544735a56x1280x1147.JPEG"
    ]
  },
  {
    "text": "The diagram below shows the pressure-volume curves for 3 different lungs. Which of the following is the best representation of compliance between the three lungs?",
    "choices": [
      {
        "id": 1,
        "text": "A<B<C"
      },
      {
        "id": 2,
        "text": "B>A>C"
      },
      {
        "id": 3,
        "text": "B>C>A"
      },
      {
        "id": 4,
        "text": "C>A>B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given diagram depicts the change in volume with a change in intrapleural pressure, which is nothing but <strong>compliance. </strong>Here, the change is more (steep curve) with B and least (flat curve) with C.<strong>\u00a0</strong></p>\n<p><strong>The pressure-volume relationship is the fundamental relation between the work of breathing and lung mechanics.</strong></p>\n<ul>\n<li>The \u201cstiffer\u201d lung displays a more horizontal curve (C), meaning that it takes a greater pressure to achieve the same inflation volume compared with a normal lung (A). These lungs are called\u00a0less compliant.</li>\n<li>Curve (B) is more compliant as it takes lesser pressure to achieve the same inflation volume compared to normal (A).</li>\n</ul>\n<p><strong>Applied aspect:</strong></p>\n<p><strong>Compliance is increased in emphysema.</strong>\u00a0The mechanism is shown in the flow chart below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/63e4512903e84386a11ea9ff3f55ad50.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f1a4eecaa0b6429b979ac6cce3f14cd4x269x250.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/572f398643fe457c8c25854f78d63401x1280x1179.JPEG"
    ]
  },
  {
    "text": "What does number 9 in the given diagram related to hypertension denote?",
    "choices": [
      {
        "id": 1,
        "text": "Diagnosed and untreated"
      },
      {
        "id": 2,
        "text": "Diagnosed and treated"
      },
      {
        "id": 3,
        "text": "Inadequately treated"
      },
      {
        "id": 4,
        "text": "Adequately treated"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above diagram depicts the\u00a0<strong>rule of halves</strong>,<strong>\u00a0</strong>which is observed in hypertension, and \"number 9\" denotes <strong>adequately treated</strong> subjects.</p>\n<p>The rule of halves depicts that only about half of the hypertensive subjects in the general population of most developed countries were aware of the condition and only half of those aware are being treated and only half of those being treated are considered to be adequately treated.\u00a0</p>\n<p>The numbers in the diagram denote the following:</p>\n<ol>\n<li>Whole community</li>\n<li>Normotensive subjects</li>\n<li>Hypertensive subjects</li>\n<li>Undiagnosed hypertension</li>\n<li>Diagnosed hypertension</li>\n<li><strong>Diagnosed but untreated</strong></li>\n<li><strong>Diagnosed and treated</strong></li>\n<li><strong>Inadequately treated</strong></li>\n<li><strong>Adequately treated</strong></li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e041fe2d297d41fd857bf72dcdecc033.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The growth parameters of an 18-month-old girl baby were charted as shown in the image below. This child can be classified to have ____.",
    "choices": [
      {
        "id": 1,
        "text": "Acute malnutrition"
      },
      {
        "id": 2,
        "text": "Chronic malnutrition"
      },
      {
        "id": 3,
        "text": "Severe wasting"
      },
      {
        "id": 4,
        "text": "Moderate stunting"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>From the World Health Organization (WHO) growth chart\u00a0 (length for age), the child falls <strong>below -3SD</strong> and is classified to have <strong>chronic malnutrition/ severe stunting.</strong></p>\n<p><strong>Low\u00a0height for age\u00a0</strong>(height for age\u00a0<strong>&lt; -2SD</strong>)\u00a0in children indicates\u00a0<strong>chronic malnutrition\u00a0</strong>and stunting.\u00a0</p>\n<p>Classification of nutritional status depending on the anthropometry (height/length for age):\u00a0</p>\n<table style=\"height: 182px; width: 367.85px;\">\n<tbody>\n<tr>\n<td style=\"width: 169px;\"><strong>Classification</strong></td>\n<td style=\"width: 178.85px;\"><strong>Criteria</strong></td>\n</tr>\n<tr>\n<td style=\"width: 169px;\">Moderate stunting (or) moderate chronic malnutrition</td>\n<td style=\"width: 178.85px;\">Height/length-for-age\u00a0<strong>&lt; \u20132 SD and &gt; \u20133 SD</strong></td>\n</tr>\n<tr>\n<td style=\"width: 169px;\"><strong>Severe stunting</strong> (or) severe chronic malnutrition</td>\n<td style=\"width: 178.85px;\">Height/length-for-age\u00a0<strong>&lt; \u20133 SD</strong></td>\n</tr>\n</tbody>\n</table>\n<p>The nutritional status of a child is assessed in terms of anthropometry:</p>\n<p>The World Health Organization (WHO) has established international standards for normal child growth from birth to 5 years of age. The normalization of the anthropometric measures is done in terms of <strong>z-scores (standard deviation scores).</strong> The anthropometric indicators are marked in a growth chart which is compared with a reference curve.</p>\n<p>The anthropometric measures used are weight for age, height for age, weight for height, BMI, and mid-upper arm circumference.</p>\n<ul>\n<li><strong>Low weight-for-height</strong>, or wasting, indicates\u00a0<strong>acute malnutrition.</strong>\u00a0It is also mentioned as <strong>wasting.</strong></li>\n<li>High weight-for-height indicates overweight.</li>\n<li><strong>Low height-for-age,</strong>\u00a0or\u00a0stunting, indicates\u00a0<strong>chronic malnutrition.\u00a0</strong>This is the best\u00a0indicator of\u00a0<strong>long-term\u00a0</strong>nutritional status in the pediatric population.\u00a0</li>\n<li>Low<strong>\u00a0weight-for-age</strong>\u00a0indicates\u00a0acute or chronic malnutrition. It\u00a0does not differentiate between wasting and stunting. Hence, it has limited clinical significance.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e18525c027e64cd2a6143fa2d33101f6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/caa5e322f0dd4ebea661314bd149bbd5x1280x1271.JPEG"
    ]
  },
  {
    "text": "Which of the following skeletal muscle relaxants exhibit the following response to the 'train of four protocol' used in the clinical assessment of neuromuscular blockade?",
    "choices": [
      {
        "id": 1,
        "text": "d-Tubocurarine"
      },
      {
        "id": 2,
        "text": "Mivacurium"
      },
      {
        "id": 3,
        "text": "Succinylcholine"
      },
      {
        "id": 4,
        "text": "Atracurium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Succinylcholine</strong> exhibits the above-given response to the <strong>'train of four</strong> <strong>protocol</strong>' used in the clinical assessment of <strong>neuromuscular blockade.</strong></p>\n<p>Train of four protocol is one of the methods used in the clinical assessment of neuromuscular blockade. It is done by stimulating the<strong> ulnar nerve</strong> with a stimulus and watching the contractile responses in the <strong>adductor pollicis</strong> muscle. Four successive stimuli of 2Hz strength are given at fixed time intervals and the response achieved is plotted as a graph.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0fd570beebc843bdaa5d8114639f8d1d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d82ec65887b446d18af0026ea5495ad1x1280x1199.JPEG"
    ]
  },
  {
    "text": "What is the angle at which the letters in Snellen\u2019s chart subtend on the nodal point of eye?",
    "choices": [
      {
        "id": 1,
        "text": "5 degree"
      },
      {
        "id": 2,
        "text": "5 min"
      },
      {
        "id": 3,
        "text": "15 degree"
      },
      {
        "id": 4,
        "text": "15 min"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>At the given distance, <strong>each letter subtends an angle of 5 min at the nodal point of the eye</strong></p>\n<p>Snellen&rsquo;s chart is used for <strong>distant vision</strong>.</p>\n<p>Patient should read the chart at a <strong>distance of 6 m</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5626d6025abb4d8da6f8e21901e25ec3x1200x2303.JPEG"
    ]
  },
  {
    "text": "A patient being examined by you in the OPD describes the image below on the Amsler grid test. In which of the given conditions is this phenomenon noted?",
    "choices": [
      {
        "id": 1,
        "text": "Anterior uveitis"
      },
      {
        "id": 2,
        "text": "Posterior uveitis"
      },
      {
        "id": 3,
        "text": "Cataract"
      },
      {
        "id": 4,
        "text": "Glaucoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows <strong>metamorphopsia</strong> seen in <strong>posterior uveitis.</strong></p>\n<p>Metamorphopsia is a condition in which patients <strong>perceive distorted images</strong> of the object. In <strong>posterior uveitis, </strong>it occurs due to <strong>macular edema.</strong></p>\n<p>Various visual symptoms in posterior uveitis/choroiditis:</p>\n<ul>\n<li>Defective vision</li>\n<li>Black spots floating in front of the eye</li>\n<li>Micropsia</li>\n<li>Macropsia</li>\n<li>Positive scotoma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cea0914255584f51900b4b6d14adad1f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A post-mortem cooling graph is plotted. What is the ideal shape of this graph?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperbolic"
      },
      {
        "id": 2,
        "text": "Sigmoid"
      },
      {
        "id": 3,
        "text": "S-shaped"
      },
      {
        "id": 4,
        "text": "Parabolic"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>graph</strong> plotted during <strong>post-mortem cooling </strong>is ideally<strong> sigmoid </strong>or<strong> inverted S-shaped.\u00a0</strong></p>\n<p><strong>Algor mortis/postmortem cooling</strong> is one of the early changes occurring after death. After death, the body loses heat mainly by <strong>conduction</strong> and <strong>convection</strong>. Up to the first hour, a<strong> temperature plateau </strong>may be seen due to the heat generated by residual metabolic activities of dying tissues. This is followed by a <strong>linear</strong> rate of <strong>cooling</strong> over the next<strong> 12 to 16 hours</strong>. The temperature rarely reaches the ambient temperature, most likely due to bacterial action with decomposition setting in.\u00a0</p>\n<p>The graph with the changes occurring after death plotted against time is as follows:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a903c0387fce412a89962944e1511103x1279x1178.JPEG"
    ]
  },
  {
    "text": "The following diagram charts the HDL values in a given population. What is the statistical diagram used here?",
    "choices": [
      {
        "id": 1,
        "text": "Frequency polygon"
      },
      {
        "id": 2,
        "text": "Line diagram"
      },
      {
        "id": 3,
        "text": "Component bar graph"
      },
      {
        "id": 4,
        "text": "Multiple bar graphs"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>Frequency polygons.</strong></p>\n<p><strong>Frequency polygons:</strong></p>\n<ul>\n<li>Frequency polygons are <strong>used for ratio and interval scale data.</strong></li>\n<li>In a frequency polygon, the mid-points of each class interval are joined together by straight lines.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/93e104c809fe4dc5983aa7795d17bd84.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old patient comes to the OPD with a history significant for a mood disorder. Her moods can be charted as done in the image given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Cyclothymia"
      },
      {
        "id": 2,
        "text": "Dysthymia"
      },
      {
        "id": 3,
        "text": "Rapid cycling disorder"
      },
      {
        "id": 4,
        "text": "Bipolar disorder"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\">The given image showing 4 episodes of depression and 2 episodes of mania <strong>within 1 year,</strong> points towards a diagnosis of <strong>rapid cycling bipolar disorder</strong>.&nbsp;</p>\n<p class=\"p1\">It is diagnosed when the patient has 4 or more episodes of depression and/or mania or hypomania within one&nbsp;year. There must be less than 2 weeks of normalcy between the episodes or an immediate shift between the symptoms with no intervening normal mood.</p>\n<p>Risk factors:</p>\n<ul>\n<li>Female patients</li>\n<li>Hypothyroidism</li>\n<li>Alcoholism or substance abuse</li>\n<li>Antidepressants (if used without mood stabilizers)</li>\n<li>Cyclothymia</li>\n<li>Bipolar II disorder</li>\n</ul>\n<p>The <strong>drug of choice</strong> for rapid cycling disorder is <strong>valproate.&nbsp;</strong></p>\n<p>Note:&nbsp;If the phases of mania and depression <strong>alternate</strong> very rapidly in a matter of<strong> hours or days </strong>then&nbsp;the condition is known as <strong>ultra-rapid cycling disorder</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ec5f0d31993744088b439d745c971efb.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the hormone demonstrating the depicted fluctuations:",
    "choices": [
      {
        "id": 1,
        "text": "ACTH"
      },
      {
        "id": 2,
        "text": "GH"
      },
      {
        "id": 3,
        "text": "TSH"
      },
      {
        "id": 4,
        "text": "Prolactin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Growth hormone</strong> demonstrates the depicted fluctuations. Growth hormone is secreted in a pulsatile fashion, with <strong>increase</strong> during strenuous <strong>exercise</strong> and during the <strong>early period of sleep</strong>, (Non-REM Sleep)&nbsp;as shown in the graph. It is reduced during the later stages of sleep. (REM Sleep)</p>\n<p>Other options:</p>\n<p>Option A: <strong>ACTH</strong> levels are <strong>high</strong>&nbsp;in the early&nbsp;<strong>morning </strong>and&nbsp;low in late evening.&nbsp;</p>\n<p>Option C: <strong>TSH</strong> is secreted in pulses, but the <strong>fluctuations are less</strong> in comparison to other pituitary hormones because of the low amplitude of the pulses and the relatively long half-life of TSH.</p>\n<p>Option D: <strong>Prolactin</strong> is secreted in a pulsatile fashion, with the <strong>highest</strong> secretory peak between <strong>4:00 and 6:00 a.m</strong>. (REM Sleep)</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dd6372189a6e4fa78d4a935cbafef315.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The given image represents  which  of the following ?",
    "choices": [
      {
        "id": 1,
        "text": "Hypnogram"
      },
      {
        "id": 2,
        "text": "Electroencephalogram"
      },
      {
        "id": 3,
        "text": "Polysomnogram"
      },
      {
        "id": 4,
        "text": "Epworth sleep assessment"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image represents a<strong> hypnogram</strong>. It is a graph that <strong>depicts the stages of sleep as a function of time</strong>. It provides a visual representation of sleep structure and is useful in the diagnosis of various sleep disorders.&nbsp;</p>\n<p>Other options:</p>\n<ul>\n<li>An <strong>electroencephalogram </strong>is the depiction of the<strong> electrical activity of the surface </strong>of the brain. Different waveforms (alpha, beta, theta, delta) are produced depending on the functional status of the brain.</li>\n<li><strong>Polysomnography </strong>is a muti parametric test that is considered as the<strong> gold standard </strong>in the<strong> diagnosis of sleep disorders</strong>. It is a continuous recording of biophysiological changes that occur during sleep.</li>\n<li><strong>Epworth sleep assessment scale </strong>is a questionnaire used to<strong> quantify daytime sleepiness.&nbsp;</strong>It determines how frequently a patient is likely to doze off in 8 commonly encountered situations. It is a subjective assessment and hence less reliable.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/59f17336e75049cf9fa1cc92537d1a0b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What does the area between the dotted lines in graph indicate?",
    "choices": [
      {
        "id": 1,
        "text": "Median effective dose"
      },
      {
        "id": 2,
        "text": "Median lethal dose"
      },
      {
        "id": 3,
        "text": "Therapeutic index"
      },
      {
        "id": 4,
        "text": "Therapeutic window"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The area between the dotted lines in the graph shows <strong>a therapeutic window</strong>. It is the range of steady-state concentrations of drug that provides therapeutic efficacy with minimal toxicity.</p>\n<p><strong>The therapeutic index</strong> (TI) describes a relationship between the doses of a drug that causes lethal or toxic effects with the dose that causes therapeutic effects. It is also called <strong>therapeutic ratio</strong>.</p>\n<p>Mathematically, you can calculate TI by following way:</p>\n<p><strong>Therapeutic Index = LD<sub>50</sub>/ED<sub>50</sub></strong>\u00a0(<strong>or</strong>)\u00a0<strong>Therapeutic Index = TD<sub>50</sub>/ED<sub>50</sub></strong></p>\n<p>Where,</p>\n<ul>\n<li><strong>LD<sub>50</sub></strong>\u00a0(<strong>Median Lethal dose</strong>) is the minimum amount of drug that causes adverse effects in 50% of the population.\u00a0<strong>LD<sub>50</sub></strong>\u00a0 could also be replaced with Toxic dose (<strong>TD<sub>50</sub></strong>).</li>\n<li><strong>ED<sub>50</sub></strong>\u00a0(<strong>Median Effective dose</strong>) is the quantity of a drug that can produce desired therapeutic effects in 50% of the population.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bf7bbe2556a9463ba629937cc36653e2.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 18 (Graphs And Charts)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>