<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>60 Bones, Joints And Cartilage - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The total number of bones present in the axial skeleton and appendicular skeleton in an adult human being is ______ and ______, respectively.",
    "choices": [
      {
        "id": 1,
        "text": "88, 118"
      },
      {
        "id": 2,
        "text": "84, 122"
      },
      {
        "id": 3,
        "text": "76, 130"
      },
      {
        "id": 4,
        "text": "80, 126"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the adult, <strong>80 bones</strong> are present in the <strong>axial skeleton</strong>, and <strong>126 bones</strong>&nbsp;in the <strong>appendicular skeleton</strong>.&nbsp;</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><strong>Region&nbsp;</strong></td>\n<td style=\"text-align: center;\"><strong>Number</strong></td>\n<td style=\"text-align: center;\"><strong>Bones</strong></td>\n</tr>\n<tr>\n<td>Skull</td>\n<td style=\"text-align: center;\">28</td>\n<td>\n<ul>\n<li>Cranial bones (8)</li>\n<li>Facial bones (14)</li>\n<li>Auditory ossicles (6)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Hyoid</td>\n<td style=\"text-align: center;\">1</td>\n<td>\n<ul>\n<li>&nbsp;Hyoid bone (1)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Vertebral column</td>\n<td style=\"text-align: center;\">26</td>\n<td>\n<ul>\n<li class=\"p1\">Cervical vertebrae (7)</li>\n<li class=\"p1\">Thoracic vertebrae (12)</li>\n<li class=\"p1\">Lumbar vertebrae (5)</li>\n<li class=\"p1\">Sacrum (1)</li>\n<li class=\"p1\">Coccyx (1)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Thoracic cage</td>\n<td style=\"text-align: center;\">25</td>\n<td>\n<ul>\n<li>Ribs (24)</li>\n<li>Sternum (1)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\" colspan=\"3\"><strong>Axial Skeleton -&nbsp;</strong><strong>80</strong>&nbsp;</td>\n</tr>\n<tr>\n<td>Pectoral girdle</td>\n<td style=\"text-align: center;\">4</td>\n<td>\n<ul>\n<li class=\"p1\">Clavicle (2)</li>\n<li class=\"p1\">Scapula (2)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Upper extremity</td>\n<td style=\"text-align: center;\">60</td>\n<td>\n<ul>\n<li class=\"p1\">Humerus (2)</li>\n<li class=\"p1\">Radius (2)</li>\n<li class=\"p1\">Ulna (2)</li>\n<li class=\"p1\">Carpals (16)</li>\n<li class=\"p1\">Metacarpals (10)</li>\n<li class=\"p1\">Phalanges (28)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Pelvic girdle</td>\n<td style=\"text-align: center;\">2</td>\n<td>\n<ul>\n<li>Hip bones (2)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>Lower extremity</td>\n<td style=\"text-align: center;\">60</td>\n<td>&nbsp;\n<ul>\n<li>Femur (2)</li>\n<li>Tibia (2)</li>\n<li>Fibula (2)</li>\n<li>Patella (2)</li>\n<li>Tarsals (14)</li>\n<li>Metatarsals (10)</li>\n<li>Phalanges (28)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\" colspan=\"3\"><strong>Appendicular Skeleton -&nbsp;</strong><strong>126</strong>&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/640466b3c1f2419ca7e068a5b3066ee3x1280x2560.JPEG"
    ]
  },
  {
    "text": "Which of the following statements regarding bones is false?",
    "choices": [
      {
        "id": 1,
        "text": "Osteocytes are the major cell type in mature bone"
      },
      {
        "id": 2,
        "text": "Collagen is synthesized in bone by osteoblasts"
      },
      {
        "id": 3,
        "text": "Bone mainly contains type 2 collagen fibres"
      },
      {
        "id": 4,
        "text": "Calcium phosphate is the major inorganic mineral"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Bone mainly contains <strong>type 1 collagen</strong> fibres. Bones&nbsp;are made up of mineralized collagenous <strong>extracellular matrix</strong> around <strong>specialized cells</strong>.</p>\n<p class=\"p1\"><strong>The extracellular matrix is composed of:</strong></p>\n<ul>\n<li>Organic component -&nbsp;around 30% of the organic matrix of bone is made up of collagen, <strong>mainly type 1 collagen.</strong></li>\n<li>Inorganic component -<strong>&nbsp;</strong>the major inorganic mineral in the bone matrix is <strong>calcium phosphate&nbsp;</strong>in the form of microcrystalline hydroxyapatite.</li>\n</ul>\n<p><strong>The specialized cells are:</strong></p>\n<ul>\n<li><strong>Osteoblasts&nbsp;</strong>-&nbsp;responsible for the synthesis, deposition, and mineralization of the bone matrix.&nbsp;Collagen is synthesized in bone by osteoblasts. Osteoblasts get embedded in the matrix to become osteocytes.</li>\n<li><strong>Osteocytes </strong>-&nbsp;<strong>major cell type</strong> of a mature bone and is distributed throughout the matrix. They have lost the ability to divide or to secrete new matrix.</li>\n<li><strong>Osteoclasts </strong>-&nbsp;responsible for the local removal of bone during bone growth and remodelling.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a modified long bone?",
    "choices": [
      {
        "id": 1,
        "text": "Humerus"
      },
      {
        "id": 2,
        "text": "Fibula"
      },
      {
        "id": 3,
        "text": "Metacarpal"
      },
      {
        "id": 4,
        "text": "Clavicle"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>clavicle</strong> is a <strong>modified long bone,</strong> as it has a modified shaft and no medullary cavity.</p>\n<p>Long bones are classified as follows:</p>\n<ul>\n<li><strong>Typical</strong> long bones&nbsp;(see figure) have an elongated shaft (diaphysis) and two expanded ends (epiphysis). The shaft has a central medullary cavity and a nutrient foramen directed away from the growing end. e.g.,<strong> humerus, ulna, radius, femur, tibia,</strong> and<strong> fibula.</strong>&nbsp;&nbsp;</li>\n<li><strong>Miniature</strong> long bones contain only one epiphysis. e.g.,<strong> metacarpals, metatarsals,</strong> and<strong> phalanges.</strong></li>\n<li><strong>Modified</strong> long bones<strong>&nbsp;</strong>have a modified&nbsp;shaft or ends, and no medullary cavity. e.g.,<strong> clavicle.</strong></li>\n</ul>\n<p>The following image shows a graphical illustration of a typical long bone:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3766fde0c5ca4c14b32032c38cb8ab0cx684x1156.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a sesamoid bone?",
    "choices": [
      {
        "id": 1,
        "text": "Fabella"
      },
      {
        "id": 2,
        "text": "Os trigonum"
      },
      {
        "id": 3,
        "text": "Patella"
      },
      {
        "id": 4,
        "text": "Pisiform"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Os trigonum </strong>is an<strong> accessory bone</strong>, not a sesamoid bone.&nbsp;</p>\n<p class=\"p1\">Accessory bones, also known as <strong>supernumerary bones</strong> are not always present. They may arise due to ununited epiphysis developed from <strong>extra ossification centres</strong>. Clinically, they may be mistaken for fractures.&nbsp;</p>\n<p class=\"p1\"><strong>Examples of accessory bones:</strong></p>\n<ul>\n<li class=\"p1\">Os trigonum - Uncommon accessory bone seen <strong>behind the talus</strong>. Also known as lateral tubercle of the talus.</li>\n<li class=\"p1\">Os vesalianum -<strong>&nbsp;</strong>Uncommon accessory bone&nbsp;located <strong>proximal to the fifth metatarsal</strong> and found within the <strong>peroneus brevis tendon</strong>. Also known as tuberosity of the fifth metatarsal.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/151f1dbe842f4410a520da5ab1f1157bx1280x2048.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/101e6394649944f08ded153f9b3cf0e2x1280x2048.JPEG"
    ]
  },
  {
    "text": "Which of the following is an example of a \u200bpneumatic bone?",
    "choices": [
      {
        "id": 1,
        "text": "Carpal bones"
      },
      {
        "id": 2,
        "text": "Maxilla"
      },
      {
        "id": 3,
        "text": "Sternum"
      },
      {
        "id": 4,
        "text": "Hip bone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>maxilla&nbsp;</strong>is a <strong>pneumatic bone.</strong>&nbsp;</p>\n<p>Pneumatic bones contain<strong> air-filled cavities</strong>, which make them light-weight. They also aid in the resonance of sound and act as air conditioning chambers for inspired air. e.g.,<strong>&nbsp;maxilla, sphenoid, ethmoid, etc</strong>.&nbsp;</p>\n<p><strong>Short bones: </strong>Carpal bones and tarsal bones</p>\n<p><strong>Flat bones: </strong>Sternum, ribs, scapula, and bones of the skull vault</p>\n<p><strong>Irregular bones: </strong>Hip bones, vertebra, and bones in the base of the skull.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following accurately describes fabella?",
    "choices": [
      {
        "id": 1,
        "text": "Accessory bone"
      },
      {
        "id": 2,
        "text": "Pneumatic bone"
      },
      {
        "id": 3,
        "text": "Sesamoid bone"
      },
      {
        "id": 4,
        "text": "Irregular bone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Fabella</strong> is a <strong>sesamoid</strong> bone. This term is used to describe a bone embedded within a tendon or a muscle. It is a variant of normal anatomy&nbsp;present in 10% to 30% of individuals. Fabella&nbsp;is found within the tendon of the<strong> lateral head of gastrocnemius</strong>, where it moves over the lateral femoral condyle.</p>\n<p>Important sesamoid bones:</p>\n<ul>\n<li><strong>Patella</strong>&nbsp;- largest sesamoid bone in the tendon of quadriceps femoris.</li>\n<li><strong>Pisiform</strong>&nbsp;- tendon of flexor carpi ulnaris.</li>\n<li><strong>Fabella</strong>&nbsp;- lateral head of the gastrocnemius.&nbsp;</li>\n<li>Two sesamoid bones&nbsp;can be found in the first metacarpal within the tendons of flexor pollicis brevis and adductor pollicis.</li>\n<li>Two sesamoid bones&nbsp;can be found in the first&nbsp;metatarsophalangeal articulation&nbsp;within the double tendon of flexor hallucis brevis.</li>\n</ul>\n<p>The X-ray image below depicts the fabella (marked with an arrow).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/88e58b5d0f3a40cb9704a0b13b7ce4bcx1280x1157.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is true regarding long bones?",
    "choices": [
      {
        "id": 1,
        "text": "Cancellous bone is absent in the epiphysis"
      },
      {
        "id": 2,
        "text": "Cancellous bone is present in the outer cortex"
      },
      {
        "id": 3,
        "text": "Haversian system is absent in cancellous bone"
      },
      {
        "id": 4,
        "text": "Compact bone has lamellae arranged in a meshwork"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>Haversian system</strong> is seen in <strong>compact</strong> bones, not&nbsp;cancellous bones.&nbsp;</p>\n<p>Based on their macroscopic structure, bones can be classified as <strong>compact</strong> and <strong>cancellous</strong> (spongy) bones.&nbsp;</p>\n<p><strong>Compact</strong> bones are composed of cylindrical structural units called <strong>Haversian systems</strong> or osteons.&nbsp;Each Haversian system contains a central canal within which the small blood vessels, nerves, and endosteum are present. This canal is surrounded by multiple layers or <strong>lamellae</strong> of the calcified matrix containing type I collagen fibers. These canals <strong>communicate</strong> with each other by <strong>Volkmann's canal.</strong></p>\n<p>The <strong>lamellae</strong> of the <strong>cancellous</strong>/spongy bone are arranged in a <strong>meshwork,</strong> and hence do not form Haversian systems.</p>\n<p>The <strong>diaphysis</strong> and <strong>outer cortex</strong> of long bones are predominantly made of <strong>compact</strong> bone, while the <strong>epiphysis</strong> and <strong>inner medulla</strong> are predominantly made of&nbsp;<strong>cancellous</strong> bone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d83afba2bb59464da001c9bee8cdd1f8x1280x1897.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7333835b119746c1921eae5e4d28b202x600x941.JPEG"
    ]
  },
  {
    "text": "A 16-year-old boy presented to your OPD with progressive swelling and worsening knee pain over the past 2 months. An X-ray reveals the following finding. Which of the following is true regarding the layer of bone involved?",
    "choices": [
      {
        "id": 1,
        "text": "It contains three fibrous layers"
      },
      {
        "id": 2,
        "text": "Progenitor cells are present in the outer fibrous layer"
      },
      {
        "id": 3,
        "text": "It is continuous with the capsule of the joint"
      },
      {
        "id": 4,
        "text": "It is devoid of nerve supply"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given X-ray shows <strong>Codman's triangle</strong>, which is due to an irregular&nbsp;<strong>periosteal reaction</strong> (outermost layer), commonly seen in patients with&nbsp;<strong>osteosarcoma.</strong> The <strong>periosteum</strong> is a thick fibrous membrane that covers the outer surface of all bones, except at the joint surfaces and insertion points of tendons and ligaments (entheses).&nbsp;At the articular margin, the periosteum is <strong>continuous</strong> with the <strong>capsule</strong> of the joint.</p>\n<p>The<strong> periosteum</strong> has <strong>2 layers</strong>:&nbsp;</p>\n<ul>\n<li>The outer&nbsp;<strong>fibrous</strong> <strong>layer</strong>&nbsp;- contains&nbsp;<strong>fibroblasts</strong>.</li>\n<li>The inner&nbsp;<strong>cambium</strong> <strong>layer</strong> (osteogenic layer) - contains <strong>progenitor</strong> <strong>cells</strong> that develop into <strong>osteoblasts.</strong></li>\n</ul>\n<p>Periosteum gets<strong> nourishment</strong> from<strong> periosteal arteries.</strong> It has a <strong>rich nerve supply,</strong> which makes it the most sensitive part of the bone.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6aae499ff64b4a6199716cbb90d9e801.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/676e862dab0d4e0eb6b0e94676ecac1ax649x342.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/daec556d86d741de966d52197d5419cax1280x2155.JPEG"
    ]
  },
  {
    "text": "Which of the following structures do the Sharpey's fibers connect?",
    "choices": [
      {
        "id": 1,
        "text": "Periosteum to synovial membrane"
      },
      {
        "id": 2,
        "text": "Joint capsule to periosteum"
      },
      {
        "id": 3,
        "text": "Periosteum to bone"
      },
      {
        "id": 4,
        "text": "Enamel to dentin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sharpey's fibers</strong> are thick<strong> collagen</strong> <strong>fibers</strong> that connect the periosteum to the underlying bone.&nbsp;</p>\n<p>Sharpey's fibers are present in the bone and the teeth.&nbsp;</p>\n<ul>\n<li class=\"p1\"><strong>Bone </strong>-&nbsp;tether the<strong> periosteum </strong>to the<strong> underlying bone</strong>.&nbsp;</li>\n<li class=\"p1\"><strong>Teeth </strong>-&nbsp;connect the&nbsp;<strong>cementum </strong>to the<strong> periosteum</strong> of the<strong> alveolar bone</strong> (tooth socket).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following bones develops through intramembranous ossification?",
    "choices": [
      {
        "id": 1,
        "text": "Ribs"
      },
      {
        "id": 2,
        "text": "Tibia"
      },
      {
        "id": 3,
        "text": "Frontal bone"
      },
      {
        "id": 4,
        "text": "Humerus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Frontal</strong> bones undergo <strong>intramembranous ossification.</strong> Other bones listed have enchondral ossification.&nbsp;</p>\n<p>Based on their development, bones can be classified into 3 categories:&nbsp;</p>\n<ol>\n<li><strong>Membranous bones</strong> (dermal bones)&nbsp;are formed through intramembranous ossification. There is direct bone formation within highly vascular sheets or &lsquo;membranes&rsquo; derived from <strong>mesenchymal condensations.</strong>&nbsp;e.g., bones of the facial skeleton including the frontal, lacrimal, zygomatic, and nasal bones.&nbsp;</li>\n<li><strong>Cartilaginous bones&nbsp;</strong>are formed by&nbsp;intra-cartilaginous (<strong>enchondral</strong>) <strong>ossification.</strong> Bone forms by ossification of preformed hyaline cartilage model. This is the <strong>main method</strong> of bone formation in the body. e.g., bones of limbs, vertebral column, and thoracic cage.&nbsp;</li>\n<li><strong>Membranocartilaginous bones</strong>&nbsp;ossify from <strong>both cartilage </strong>and<strong>&nbsp;mesenchymal condensation</strong>. e.g.,&nbsp;clavicle, mandible, occipital bone, temporal bone, sphenoid bone, etc.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The structure that the marked muscle in the gluteal region inserts into has ____ type of epiphysis?",
    "choices": [
      {
        "id": 1,
        "text": "Pressure epiphysis"
      },
      {
        "id": 2,
        "text": "Traction epiphysis"
      },
      {
        "id": 3,
        "text": "Atavistic epiphysis"
      },
      {
        "id": 4,
        "text": "Aberrant epiphysis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The muscle marked in the image is the&nbsp;<strong>piriformis </strong>and its insertion is at the <strong>greater trochanter</strong> of the femur, which is an example of&nbsp;<strong>traction epiphysis.</strong></p>\n<p>Traction epiphysis&nbsp;is <strong>nonarticular</strong> and does not transmit weight. They provide&nbsp;attachment to&nbsp;one or more tendons that exert traction on the epiphysis. <strong>Examples</strong> of traction epiphysis include greater and lesser&nbsp;<strong>tubercles of the humerus </strong>and greater and lesser&nbsp;<strong>trochanters of the femur</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e82df2a66c0443baa27c2aece55c0727.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "While assessing a child with short stature, the senior resident orders an X-ray to better evaluate the structure marked X in the radiograph. Which of the following is a true statement regarding this structure?",
    "choices": [
      {
        "id": 1,
        "text": "It is made of elastic cartilage"
      },
      {
        "id": 2,
        "text": "It is supplied only by epiphyseal arteries"
      },
      {
        "id": 3,
        "text": "It separates epiphysis from diaphysis"
      },
      {
        "id": 4,
        "text": "It is the site for enchondral ossification"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">The structure marked X in the radiograph is the <strong>epiphyseal plate.</strong>&nbsp;It is the site for <strong>enchondral ossification</strong> that is mainly responsible for the <strong>growth</strong> of <strong>long bones.</strong>&nbsp;</p>\n<p class=\"p1\">The epiphyseal plate (growth plate) is a <strong>hyaline cartilage</strong> layer that&nbsp;separates the epiphysis from the metaphysis. It receives nourishment from both the&nbsp;<strong>epiphyseal</strong> and <strong>metaphyseal arteries</strong>.&nbsp;Fractures involving epiphyseal plates are known as&nbsp;<strong>Salter-Harris fractures</strong>.&nbsp;</p>\n<p>The growing ends of bones include:</p>\n<ul>\n<li>Upper limb: Upper end of<strong> humerus</strong>, and lower ends of<strong> radius and ulna</strong></li>\n<li>Lower limb: Lower end of<strong> femur</strong>, and upper end of<strong> tibia&nbsp;</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d17e01bdd5df433e86f0ee703ee63688.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "'The secondary ossification center that appears first, fuses last'. Which of the following bones violates this law?",
    "choices": [
      {
        "id": 1,
        "text": "Radius"
      },
      {
        "id": 2,
        "text": "Fibula"
      },
      {
        "id": 3,
        "text": "Ulna"
      },
      {
        "id": 4,
        "text": "Sternum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong>&nbsp;fibula</strong> violates the <strong>law of ossification </strong>which states that the secondary ossification center that appears first is the last to fuse.</p>\n<p>The secondary ossification center at the<strong> lower end&nbsp;of the fibula</strong> appears before the ossification center of the upper end and <strong>fuses before</strong> the upper end.</p>\n<p>Ossification centers are of two types:</p>\n<ol>\n<li><strong>Primary centers</strong> appear <strong>before birth</strong>, usually during late embryonic or early fetal life (seventh week to the fourth month). They form the <strong>diaphysis</strong>.</li>\n<li><strong>Secondary centers</strong> usually appear <strong>after birth</strong>. They form the<strong> epiphysis</strong>.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following parts of the bone is not nourished by the nutrient artery?",
    "choices": [
      {
        "id": 1,
        "text": "Medullary cavity"
      },
      {
        "id": 2,
        "text": "Inner 2/3 of the cortex"
      },
      {
        "id": 3,
        "text": "Outer 1/3 of the cortex"
      },
      {
        "id": 4,
        "text": "Metaphysis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>nutrient artery</strong> does not nourish the <strong>outer one-third</strong> of the <strong>cortex.</strong></p>\n<p>The nutrient artery enters the bone shaft through the <strong>nutrient foramen</strong> and runs obliquely through the cortex.</p>\n<table style=\"width: 655px;\">\n<tbody>\n<tr>\n<td style=\"text-align: center; width: 636px;\" colspan=\"2\"><strong>Blood supply of the Bone</strong></td>\n</tr>\n<tr>\n<td style=\"width: 189.156px; text-align: center;\"><strong>Artery</strong></td>\n<td style=\"text-align: center; width: 446.844px;\"><strong>Regions supplied</strong></td>\n</tr>\n<tr>\n<td style=\"width: 189.156px; text-align: left;\">Nutrient artery&nbsp;</td>\n<td style=\"width: 446.844px;\">Medullary cavity, inner 2/3 of the cortex, metaphysis</td>\n</tr>\n<tr>\n<td style=\"width: 189.156px; text-align: left;\">Metaphyseal arteries</td>\n<td style=\"width: 446.844px;\">Metaphysis and growth plate</td>\n</tr>\n<tr>\n<td style=\"width: 189.156px; text-align: left;\">Epiphyseal arteries</td>\n<td style=\"width: 446.844px;\">Epiphysis and growth plate</td>\n</tr>\n<tr>\n<td style=\"width: 189.156px; text-align: left;\">Periosteal arteries</td>\n<td style=\"width: 446.844px;\">Periosteum, outer 1/3 of the cortex</td>\n</tr>\n</tbody>\n</table>\n<p>Nutrient arteries of the long bones are <strong>directed away from</strong> the dominant <strong>growing epiphysis</strong> as the growing bone might pull and rupture the artery. So the nutrient foramina are directed away from the growing end. The direction of the nutrient artery can be remembered by the axiom 'To the elbow, I go, from the knee I flee'.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d02cbfa7b57b453584c5af1f6de02f69x600x824.JPEG"
    ]
  },
  {
    "text": "In which of the following parts of the bone are hairpin bends of end arteries abundantly present?",
    "choices": [
      {
        "id": 1,
        "text": "Epiphysis"
      },
      {
        "id": 2,
        "text": "Metaphysis"
      },
      {
        "id": 3,
        "text": "Diaphysis"
      },
      {
        "id": 4,
        "text": "Epiphyseal plate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hairpin bends</strong> of end arteries are seen<strong> abundantly</strong> in the <strong>metaphysis.</strong></p>\n<p>The metaphysis is the portion of a long bone between the epiphysis and diaphysis. It\u00a0is the <strong>zone</strong> of <strong>active growth</strong> and is <strong>highly vascular.</strong> Before epiphysial fusion, the metaphysis is richly supplied through end arteries that form 'hairpin' bends.</p>\n<p>The metaphysis is the most common location for <strong>osteomyelitis</strong> in children because the bacteria or emboli are easily trapped in the hairpin bends, thereby causing infection.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements regarding cartilage is false?",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline cartilage has perichondrium"
      },
      {
        "id": 2,
        "text": "Fibrocartilage lacks perichondrium"
      },
      {
        "id": 3,
        "text": "Articular cartilage has perichondrium"
      },
      {
        "id": 4,
        "text": "Elastic cartilage has perichondrium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Articular cartilage</strong>&nbsp;despite being a type of hyaline cartilage&nbsp;<strong>lacks perichondrium.</strong></p>\n<p>Cartilage is a connective tissue composed of cells (chondrocytes) and fibers (collagen or yellow elastic fibers). These are embedded in a firm, gel-like <strong>matrix</strong> that is rich in <strong>mucopolysaccharides.</strong> It is much more <strong>elastic</strong> than bone. Cartilage <strong>does not have blood vessels</strong> or <strong>lymphatics.</strong> Chondrocytes get their nutrition by diffusion. Cartilage has no nerves and is&nbsp;<strong>insensitive.</strong></p>\n<p>There are three types of cartilages:</p>\n<ol>\n<li>Hyaline cartilage</li>\n<li>Elastic cartilage</li>\n<li>Fibrocartilage</li>\n</ol>\n<p><strong>Hyaline</strong> cartilage <strong>(except</strong> the subtype of <strong>articular</strong> cartilage) and <strong>elastic</strong> cartilage have <strong>perichondrium.</strong>&nbsp;Fibrocartilage does not have perichondrium.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not have yellow cartilage?",
    "choices": [
      {
        "id": 1,
        "text": "Epiglottis"
      },
      {
        "id": 2,
        "text": "Pinna"
      },
      {
        "id": 3,
        "text": "Apex of the arytenoid"
      },
      {
        "id": 4,
        "text": "Septal nasal cartilage"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>septal</strong> nasal cartilage has <strong>hyaline</strong>&nbsp;<strong>cartilage</strong> and not yellow (elastic) cartilage.</p>\n<p><strong>Elastic cartilage</strong>&nbsp;(or yellow cartilage) contains a matrix rich in&nbsp;fine yellow elastic fibers containing the protein elastin. It is present in:</p>\n<ol>\n<li>Apices of arytenoid</li>\n<li>Epiglottis</li>\n<li>Corniculate cartilages</li>\n<li>Cuneiform cartilages</li>\n<li>Eustachian tube</li>\n<li>Pinna (Auricle)</li>\n<li>External auditory meatus&nbsp;</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the type of cartilage found in the structure marked X in the following radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Hyaline cartilage"
      },
      {
        "id": 2,
        "text": "Calcified cartilage"
      },
      {
        "id": 3,
        "text": "Fibrocartilage"
      },
      {
        "id": 4,
        "text": "Elastic cartilage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure marked X is the <strong>pubic symphysis</strong> and the type of cartilage seen is <strong>fibrocartilage.</strong></p>\n<p>Fibrocartilage contains a <strong>mixture</strong> of <strong>white fibrous</strong> tissue and <strong>cartilaginous tissue</strong>.&nbsp;This mix of fibrous and cartilaginous components make this tissue extremely tough and resilient.&nbsp;Fibrocartilage is present in the following sites:</p>\n<ol>\n<li>Pubic symphysis</li>\n<li>Manubriosternal joint</li>\n<li>Articular discs of temporomandibular and sternoclavicular joints</li>\n<li>Anulus fibrosus of intervertebral discs</li>\n<li>Menisci of the knee</li>\n<li>Acetabular labrum</li>\n<li>Glenoid labrum</li>\n<li>The lining of bony grooves for tendons</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f4f62242601b47809ecb7cf8806c92b7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following cartilages is type I collagen predominantly seen?",
    "choices": [
      {
        "id": 1,
        "text": "Reticular tissue"
      },
      {
        "id": 2,
        "text": "Fibrocartilage"
      },
      {
        "id": 3,
        "text": "Elastic cartilage"
      },
      {
        "id": 4,
        "text": "Basement membrane"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><strong>Fibrocartilage</strong> predominantly contains <strong>type I collagen.</strong> Hyaline and elastic cartilages&nbsp;mainly contain&nbsp;<strong>type II collagen</strong>.</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><strong>Collagen&nbsp;</strong></td>\n<td style=\"text-align: center;\"><strong>Locations</strong></td>\n<td style=\"text-align: center;\"><strong>Mnemonic</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Type I</td>\n<td style=\"text-align: left;\">Bone, Fibrocartilage, Fascia, Tendon, Ligaments</td>\n<td style=\"text-align: left;\">B-<strong>one</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Type II</td>\n<td style=\"text-align: left;\">Hyaline and Elastic cartilage</td>\n<td style=\"text-align: left;\">Car-<strong>two</strong>-lage</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Type III</td>\n<td style=\"text-align: left;\">Reticular tissue</td>\n<td style=\"text-align: left;\">Re-<strong>three</strong>-cular</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">Type IV</td>\n<td style=\"text-align: left;\">Basement membrane</td>\n<td style=\"text-align: left;\">Floor-<strong>four</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Ligamentum flavum has high levels of:",
    "choices": [
      {
        "id": 1,
        "text": "Type 1 collagen"
      },
      {
        "id": 2,
        "text": "Type 2 collagen"
      },
      {
        "id": 3,
        "text": "Reticular fibres"
      },
      {
        "id": 4,
        "text": "Elastin fibres"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ligamentum flavum</strong> has high levels of <strong>elastin fibres</strong>.</p>\n<p>The ligamenta flava are a series of ligaments that connect the ventral parts of the laminae of adjacent vertebrae. They predominantly contain elastic tissue and form part of the posterior surface of the vertebral canal. The <strong>high content of elastin </strong>allows it to be<strong> stretched by 80%</strong> without damage. The ligamentum flava&nbsp;resist separation of the laminae in flexion and assist in extension back to the anatomical position.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/15d303505c1c4e3a94a5f5191376a9a7x1280x1184.PNG"
    ]
  },
  {
    "text": "Which of the following is not a fibrous joint?",
    "choices": [
      {
        "id": 1,
        "text": "Cranial sutures"
      },
      {
        "id": 2,
        "text": "Syndesmosis"
      },
      {
        "id": 3,
        "text": "Symphysis"
      },
      {
        "id": 4,
        "text": "Gomphosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> symphysis</strong> is not a fibrous joint, but a&nbsp;<strong>secondary cartilaginous joint</strong>.&nbsp;</p>\n<p><strong>Structural</strong> classification of joints is as follows:</p>\n<table>\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><strong>Type&nbsp;</strong></td>\n<td style=\"text-align: center;\"><strong>Subtypes</strong></td>\n</tr>\n<tr>\n<td><strong>Fibrous joints</strong></td>\n<td>\n<ul>\n<li>Cranial sutures</li>\n<li>Syndesmosis</li>\n<li>Gomphosis</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td><strong>Cartilaginous joints</strong></td>\n<td>\n<ul>\n<li>Primary cartilaginous joints (or synchondrosis)</li>\n<li>Secondary cartilaginous joints (or symphysis)</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>&nbsp;<strong>Synovial joints</strong></td>\n<td>\n<ul>\n<li>Ball-and-socket or spheroidal joints</li>\n<li>Sellar or saddle joints</li>\n<li>Condylar or bicondylar joints</li>\n<li>Ellipsoid joints</li>\n<li>Hinge joints</li>\n<li>Pivot or trochoid joints</li>\n<li>Plane joints</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What are synovial joints functionally classified as?",
    "choices": [
      {
        "id": 1,
        "text": "Synarthroses"
      },
      {
        "id": 2,
        "text": "Amphiarthroses"
      },
      {
        "id": 3,
        "text": "Diarthroses"
      },
      {
        "id": 4,
        "text": "Syndesmosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Synovial joints</strong>&nbsp;are freely movable joints and therefore functionally classified as <strong>diarthrosis.</strong>&nbsp;</p>\n<p><strong>Functional </strong>classification of joints:</p>\n<ul>\n<li><strong>Synarthroses</strong>&nbsp;- These are immovable. e.g.,<strong>&nbsp;fibrous</strong> joints&nbsp; &nbsp; &nbsp;<strong> &nbsp;</strong> &nbsp; &nbsp;</li>\n<li><strong>Amphiarthroses </strong>- They&nbsp;are slightly&nbsp;mobile. e.g.,<strong>&nbsp;cartilaginous</strong> joints&nbsp;</li>\n<li><strong>Diarthroses </strong>- These&nbsp;are freely mobile. e.g.,&nbsp;<strong>synovial</strong> joints.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following accurately describes a joint with three or more articular surfaces?",
    "choices": [
      {
        "id": 1,
        "text": "Simple joint"
      },
      {
        "id": 2,
        "text": "Complex joint"
      },
      {
        "id": 3,
        "text": "Synarthrosis joint"
      },
      {
        "id": 4,
        "text": "Compound joint"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A joint with <strong>three</strong> or more <strong>articular surfaces</strong> is classified as a <strong>compound joint.</strong>&nbsp;&nbsp;</p>\n<p>Classification of joints based on the number of articulating surfaces:</p>\n<ul>\n<li><strong>Simple</strong> joints&nbsp;have <strong>2</strong> articulation&nbsp;surfaces. e.g., shoulder joint,&nbsp;hip&nbsp;joint.</li>\n<li><strong>Compound</strong> joints have <strong>3</strong> or more articulation surfaces. e.g., elbow joint, wrist joint.</li>\n<li><strong>Complex</strong> joints have an intra-articular disc between the articular surfaces which divides the joint space. e.g., temporomandibular joint, sternoclavicular joint.&nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following joints is known as a peg-and-socket joint?",
    "choices": [
      {
        "id": 1,
        "text": "Syndesmosis"
      },
      {
        "id": 2,
        "text": "Gomphosis"
      },
      {
        "id": 3,
        "text": "Hinge joint"
      },
      {
        "id": 4,
        "text": "Pivot joint"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><strong>Gomphosis</strong> (dentoalveolar syndesmosis)&nbsp;is a <strong>peg-and-socket joint</strong> between a tooth and its socket.&nbsp;</p>\n<p>Fibrous joints are joints where bones are joined together by fibrous tissue. They are further classified as sutures, syndesmosis, and gomphosis (see Table).</p>\n<table style=\"width: 595px; height: 432px;\">\n<tbody>\n<tr>\n<td style=\"text-align: center; width: 575px;\" colspan=\"3\"><strong>Classification of Fibrous joints</strong></td>\n</tr>\n<tr>\n<td style=\"width: 119.266px;\"><strong>Subtype</strong></td>\n<td style=\"width: 160.734px;\"><strong>Description</strong></td>\n<td style=\"width: 295px;\"><strong>Examples</strong></td>\n</tr>\n<tr>\n<td style=\"width: 119.266px;\"><strong>Sutures</strong></td>\n<td style=\"width: 160.734px;\">Peculiar to the skull. Bones are separated by a layer of membrane-derived connective tissue.</td>\n<td style=\"width: 295px;\">\n<ul>\n<li>Plane<strong> -&nbsp;</strong>internasal suture</li>\n<li>Serrate<strong> -&nbsp;</strong>interparietal suture</li>\n<li>Squamous<strong> -&nbsp;</strong>temporoparietal suture</li>\n<li>Denticulate<strong> -&nbsp;</strong>lambdoid suture</li>\n<li>Schindylesis type, specialized suture in which a ridged bone fits into a groove on a neighboring bone <strong>-</strong>&nbsp;the cleft between the alae of the vomer receives the rostrum of the sphenoid</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 119.266px;\"><strong>Syndesmosis</strong></td>\n<td style=\"width: 160.734px;\">There is a true fibrous connection between bones.</td>\n<td style=\"width: 295px;\">\n<ul>\n<li>Connected by interosseous ligament<strong> -&nbsp;</strong>tibiofibular syndesmosis and radioulnar syndesmosis</li>\n<li>Connected by a dense fibrous membrane<strong> -&nbsp;</strong>posterior region of sacroiliac joint</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 119.266px;\"><strong>Gomphosis</strong></td>\n<td style=\"width: 160.734px;\">A peg sits inside a socket supported by fibrous connections.</td>\n<td style=\"width: 295px;\">\n<ul>\n<li>The tooth in its socket</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The following image shows the types of fibrous joints:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff9b0e1460934d9aa98d9868a6dd3706x1280x4143.JPEG"
    ]
  },
  {
    "text": "What type of joint is an incudostapedial joint?",
    "choices": [
      {
        "id": 1,
        "text": "Saddle"
      },
      {
        "id": 2,
        "text": "Hinge"
      },
      {
        "id": 3,
        "text": "Ball and socket"
      },
      {
        "id": 4,
        "text": "Pivot"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>incudostapedial</strong> joint&nbsp;is a&nbsp;<strong>ball and socket type</strong> of joint.</p>\n<p>In ball and socket type of joints, the articular surfaces include a <strong>globular head</strong> (male surface) fitting into a <strong>cup-shaped socket</strong> (female surface). These joints are <strong>multi-axial</strong> and movements occur around a number of axes. Flexion, extension, abduction, adduction, medial rotation, lateral rotation, and circumduction, all occur quite freely. E.g.,&nbsp;<strong>shoulder joint</strong>, <strong>hip joint</strong>, <strong>talocalcaneonavicular joint</strong>, and incudostapedial joint.</p>\n<p>Note: The other joint between the incus and malleus <strong>(incudomalleolar joint)</strong> is a <strong>saddle joint.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 47-year-old lady diagnosed with rheumatoid arthritis presented to the clinic with the following deformity. The joint involved in this condition is an example of_________",
    "choices": [
      {
        "id": 1,
        "text": "Pivot joints"
      },
      {
        "id": 2,
        "text": "Saddle joints"
      },
      {
        "id": 3,
        "text": "Ellipsoid joints"
      },
      {
        "id": 4,
        "text": "Hinge joints"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The deformity shown is\u00a0<strong>hallux valgus. </strong>This is caused due to an excessive lateral deviation at the <strong>first metatarsophalangeal</strong> joint. It is an example of an\u00a0<strong>ellipsoid joint.</strong>\u00a0</p>\n<p>Ellipsoid joints have an oval, convex (male) surface fitting into an elliptical concave (female) surface.\u00a0They show <strong>biaxial movements</strong>\u00a0such as\u00a0flexion-extension, and abduction\u2013adduction. A combination of these movements results in <strong>circumduction.</strong>\u00a0Movement on the third axis is prevented due to the general articular shape.</p>\n<p class=\"p1\">E.g., Wrist (radiocarpal) joint,\u00a0atlanto-occipital joints,\u00a0metacarpophalangeal joints, and metatarsophalangeal joints.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/77a355ee1bfa4dbca2f6a0eee58e9ada.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/350df0f6a7864073ba9970ad756cf572x1279x1587.JPEG"
    ]
  },
  {
    "text": "The talocalcaneonavicular joint is a ________type of joint.",
    "choices": [
      {
        "id": 1,
        "text": "Ball and Socket"
      },
      {
        "id": 2,
        "text": "Saddle type"
      },
      {
        "id": 3,
        "text": "Plane"
      },
      {
        "id": 4,
        "text": "Ellipsoid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The talocalcaneonavicular joint is a <strong>ball and socket joint</strong>.</p>\n<ul>\n<li>The <strong>ball</strong> part is formed by the&nbsp;rounded<strong> head</strong> of the<strong> talus</strong>.</li>\n<li>The <strong>socket</strong> is formed by 3 structures:\n<ul>\n<li>Posterior surface of the<strong> navicular</strong></li>\n<li>Anterior articular surface of the<strong> calcaneus</strong></li>\n<li>Upper surface of the<strong> plantar calcaneonavicular ligament</strong> (spring ligament).</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97e73a759036440fab353f3632d95573x599x490.JPEG"
    ]
  },
  {
    "text": "Forward and backward movements of the mandible that occur at the temporomandibular joint is called as______and ______, respectively.",
    "choices": [
      {
        "id": 1,
        "text": "Opposition and reposition"
      },
      {
        "id": 2,
        "text": "Excursion and incursion"
      },
      {
        "id": 3,
        "text": "Protraction and retraction"
      },
      {
        "id": 4,
        "text": "Depression and elevation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Forward</strong> and <strong>backward movement</strong> of the <strong>mandible</strong> that occurs at the <strong>temporomandibular joints</strong> are called as <strong>protraction</strong> and <strong>retraction</strong>, respectively. Protraction occurs when the lower jaw is pushed forward, while retraction pulls the lower jaw backward.</p>\n<p>Protraction and retraction <strong>also</strong> occur in the <strong>scapula</strong>. During protraction, the <strong>scapula</strong> is moved <strong>laterally and anteriorly</strong> along the chest wall, such as during rowing movements. Retraction is bringing scapula back to the original position after protraction.</p>\n<p>Option A:&nbsp;Opposition is the thumb movement that brings the tip of the thumb in contact with the tip of a finger. Returning the thumb to its anatomical position next to the index finger is called reposition.&nbsp;</p>\n<p>Option B: Excursion is the side to side movement of the mandible.</p>\n<p>Option D: Depression and elevation are downward and upward movements of the mandible (or scapula), respectively.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are rounded or irregular elevations of bones, except _______",
    "choices": [
      {
        "id": 1,
        "text": "Tubercle"
      },
      {
        "id": 2,
        "text": "Epicondyle"
      },
      {
        "id": 3,
        "text": "Styloid process"
      },
      {
        "id": 4,
        "text": "Trochanter"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The styloid process is a sharp elevation of bone.</p>\n<p><strong>Bony elevations</strong> can be sharp or rounded:</p>\n<ul>\n<li><strong>Rounded or irregular elevations</strong>&nbsp;include a <strong>tubercle, tuberosity, epicondyle, malleolus, </strong>and<strong>&nbsp;trochanter</strong>.</li>\n<li><strong>Sharp elevations</strong> of bones include&nbsp;<strong>styloid process,&nbsp;spine, cornu (horn), </strong>and<strong>&nbsp;hamulus&nbsp;(hook-like)</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The type of joint marked in the image below is _________:",
    "choices": [
      {
        "id": 1,
        "text": "Syndesmosis"
      },
      {
        "id": 2,
        "text": "Synarthrosis"
      },
      {
        "id": 3,
        "text": "Synchondrosis"
      },
      {
        "id": 4,
        "text": "Synovial"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The joint marked in the above image is the <strong>costotransverse</strong> <strong>joint</strong>, which is a <strong>synovial</strong> type of joint.</p>\n<p>The various types of joints in the thoracic wall include:</p>\n<table style=\"height: 277px; width: 358px;\">\n<tbody>\n<tr style=\"height: 30px;\">\n<td style=\"width: 121.65625px; height: 30px;\"><strong>Type of Joint</strong></td>\n<td style=\"width: 235.34375px; height: 30px;\">&nbsp;<strong>Examples&nbsp;</strong></td>\n</tr>\n<tr style=\"height: 84.5px;\">\n<td style=\"width: 121.65625px; height: 84.5px;\">Synovial joint</td>\n<td style=\"width: 235.34375px; height: 84.5px;\">\n<p>Costovertebral joint</p>\n<p>Costotranverse joint</p>\n<p>Interchondral joints</p>\n</td>\n</tr>\n<tr style=\"height: 48px;\">\n<td style=\"width: 121.65625px; height: 48px;\">Primary cartilaginous joint/Synchondrosis</td>\n<td style=\"width: 235.34375px; height: 48px;\">Costochondral joint</td>\n</tr>\n<tr style=\"height: 48px;\">\n<td style=\"width: 121.65625px; height: 48px;\">Secondary cartilaginous/Symphyses joint</td>\n<td style=\"width: 235.34375px; height: 48px;\">Manubriosternal and xiphisternal joints</td>\n</tr>\n</tbody>\n</table>\n<p>Sternocostal joints: These are the joints between the costal cartilages&nbsp;of the first seven ribs and the sternum.</p>\n<ul>\n<li>The joint between the <strong>1<sup>st</sup> costal cartilage</strong> and <strong>manubrium</strong> is a <strong>fibrocartilaginous</strong> joint (synarthrosis).</li>\n<li>The joints between the <strong>2<sup>nd</sup> to 7<sup>th</sup></strong> costal cartilages and the <strong>sternum</strong> are <strong>synovial</strong> joints.</li>\n</ul>\n<p>The interchondral joint between the costal cartilages of the 9th and 10th ribs is never synovial and is usually absent.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5b0d041e434545d7af303ee6ebecfac7.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = '60 Bones, Joints And Cartilage';
        let hierarchy = ["Marrow", "qBank", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>