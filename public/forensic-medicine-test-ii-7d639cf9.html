<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forensic Medicine Test Ii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The color of urine in a 25-year-old girl who ingested some unknown poison is given in the image below. Which of the following is likely to have been ingested by her?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrofluoric acid"
      },
      {
        "id": 2,
        "text": "Kerosene"
      },
      {
        "id": 3,
        "text": "Carbolic acid"
      },
      {
        "id": 4,
        "text": "Oxalic acid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows <strong>olive green&nbsp;</strong>colored<strong>&nbsp;</strong>urine which is known as <strong>carboluria</strong>. It is seen after ingestion of <strong>carbolic acid</strong>.</p>\n<p>In carbolic acid poisoning, if the patient <strong>survives for 48 hrs,&nbsp;</strong>there will be<strong> carboluria </strong>followed by<strong> anuria. </strong>Carboluria is due to <strong>oxidation</strong> of <strong>hydroquinone</strong> and <strong>pyrecatechol </strong>on exposure to air.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/78b174ca34bb432b91cacc3cccb866d9.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Xanthoproteic reaction seen in poisoning with_____",
    "choices": [
      {
        "id": 1,
        "text": "Sulphuric acid"
      },
      {
        "id": 2,
        "text": "Oxalic acid"
      },
      {
        "id": 3,
        "text": "Hydrochloric acid"
      },
      {
        "id": 4,
        "text": "Nitric acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Xanthoproteic reaction is seen in poisoning with Nitric acid.</p>\n<p><strong>Nitric acid</strong>:</p>\n<ul>\n<li>Xanthoproteic reaction\n<ul>\n<li><strong>Nitric acid in concentrated form</strong>\u00a0<strong>combines with organic matter</strong> and produces <strong>a yellow discoloration of tissues</strong> due to the production of <strong>picric acid</strong></li>\n<li>It causes yellowish discoloration of the tissues including crowns of teeth and yellow stains on clothing</li>\n</ul>\n</li>\n<li>Perforation of stomach is not seen</li>\n</ul>\n<p>Second-degree burn caused by nitric acid with Xanthoproteic reaction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0dfc34a9f00f40b58e5619f4c52c6849x1280x960.JPEG"
    ]
  },
  {
    "text": "A patient presents to you with a history of anemia, foot drop, and behavioral changes. On examination, there are bluish-gray lines on the gum. The image shows the radiograph of the knee of the patient. Deposition of which substance is responsible for this finding in the X-ray?",
    "choices": [
      {
        "id": 1,
        "text": "Mercury"
      },
      {
        "id": 2,
        "text": "Phosphorus"
      },
      {
        "id": 3,
        "text": "Lead"
      },
      {
        "id": 4,
        "text": "Calcium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The X-ray is suggestive of&nbsp;<strong>lead lines </strong>seen in<strong>&nbsp;</strong><strong>lead toxicity&nbsp;</strong>which&nbsp;are due to the <strong>deposition </strong>of<strong> calcium</strong> at the growth plates.</p>\n<p>The <strong>radiodensity</strong> of the lead line is due to persistent<strong> mineralized</strong> metaphyseal <strong>cartilage</strong> and <strong>not</strong> to a primary osseous change or <strong>lead</strong> itself. It is the result of a lead-induced inability of cartilage-resorbing cells to degrade the mineralized matrix. This impairs the resorption of metaphyseal cartilage.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2632501907494ec398794e9a7499ae83.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old man presented to the ER with severe dehydration and weakness. History was suggestive of multiple episodes of watery diarrhea and non-bilious vomiting since morning. His breath reeked of garlic odor. ECG showed QT prolongation.  Which of the following samples must be collected for a definitive diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "24 hour urine sample"
      },
      {
        "id": 2,
        "text": "Blood sample"
      },
      {
        "id": 3,
        "text": "Hair sample"
      },
      {
        "id": 4,
        "text": "Fingernail sample"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario points towards the diagnosis of <strong>acute arsenic poisoning. </strong>For a definitive diagnosis, the arsenic levels are measured in <strong>24-hour urine</strong> samples.</p>\n<p>If the baseline <strong>urinary</strong> level is within <strong>normal</strong> limits and arsenic intoxication is still suspected, <strong>hair</strong> and <strong>nail clippings</strong> should be harvested for laboratory analysis. Due to the rapid distribution of arsenic in tissues, <strong>blood arsenic </strong>levels are<strong> unreliable</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presented with vomiting and diarrhea followed by chest pain and palpitations. Later, it was revealed that due to her unfaithfulness, her husband poisoned her with foxglove. Which of the following is the most specific treatment for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Digoxin immune Fab"
      },
      {
        "id": 2,
        "text": "IV hydration"
      },
      {
        "id": 3,
        "text": "Atropine administration"
      },
      {
        "id": 4,
        "text": "Potassium supplementation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong><em>Digitalis purpurea</em>&nbsp;</strong>is also known as <strong>foxglove</strong>. The most <strong>specific antidote</strong> for its poisoning is&nbsp;<strong>digoxin-immune Fab fragments.&nbsp;</strong></p>\n<p>Digitalis is a <strong>cardioactive steroid</strong> that acts by <strong>inhibiting</strong> the sodium/potassium (<strong>Na<sup>+</sup>-K<sup>+</sup></strong>)&nbsp;<strong>ATPase</strong> pump. Acute toxicity closely resembles that caused by digoxin and includes <strong>early GI symptoms</strong>,&nbsp;followed by <strong>cardiac dysrhythmias</strong>.</p>\n<p>Digoxin immune Fab fragments should be administered to those with serum <strong>potassium &gt;5 mEq/L</strong> in patients with acute toxicity.&nbsp;</p>\n<p>The following image shows the <em>Digitalis purpurea</em> plant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/267aede590644f1fab241b69a1a53667x1280x1786.JPEG"
    ]
  },
  {
    "text": "Identify the following poisonous snakes.",
    "choices": [
      {
        "id": 1,
        "text": "1-b, 2-c, 3-d, 4-a"
      },
      {
        "id": 2,
        "text": "1-c, 2-d, 3-b, 4-a"
      },
      {
        "id": 3,
        "text": "1-b, 2-a, 3-d, 4-c"
      },
      {
        "id": 4,
        "text": "1-c, 2-d, 3-a, 4-b"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The correct match is:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/efda97f4c8494af4a5b6b1ddadb28d5c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/55249b5ca72a4af382310f2f5621df51x1280x1516.JPEG"
    ]
  },
  {
    "text": "A 19-year-old boy is brought to the doctor because his family found him dressed as a woman. He says that he derives sexual pleasure from this act. However, he has no wish to undergo sex-change surgery. What is this type of perversion called?",
    "choices": [
      {
        "id": 1,
        "text": "Transsexualism"
      },
      {
        "id": 2,
        "text": "Fetishistic transvestism"
      },
      {
        "id": 3,
        "text": "Frotteurism"
      },
      {
        "id": 4,
        "text": "Gender dysphoria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario is suggestive of<strong> fetishistic transvestism. </strong></p>\n<p>It<strong>\u00a0</strong>is a\u00a0paraphilia characterized by recurrent sexually arousing fantasies, sexual urges, or behavior involving the wearing of clothes of the opposite sex and appearing as a member of the opposite sex. It is also called\u00a0<strong>transvestic fetishism. </strong>It is usually seen in males who obtain sexual pleasure by wearing female clothes.</p>\n<p>Fetishistic transvestism is a paraphilia whereas transvestism is a gender identity disorder.\u00a0There is no hormonal/genital abnormality in fetishistic transvestism.</p>\n<p>Option A: <strong>Transsexualism </strong>refers to\u00a0an obsessional desire to become a member of the opposite sex and seek surgery for anatomical alterations.\u00a0</p>\n<p>Option C: <strong>Frotteurism\u00a0</strong>refers to a person who obtains sexual gratification by contact with another person (rubbing his private parts against female buttocks, breasts, or thighs, in public places). It is punishable under <strong>Sec 292 BNS</strong> (Section 290 IPC), with a fine of up to 1000 rupees.</p>\n<div class=\"wDYxhc\" lang=\"en-IN\" data-md=\"61\">\n<div class=\"LGOjhe\" role=\"heading\" data-attrid=\"wa:/description\" aria-level=\"3\" data-hveid=\"CAsQAA\"><span class=\"ILfuVd\"><span class=\"hgKElc\">Option D: <strong>Gender dysphoria</strong> is a term that\u00a0describes a sense of unease that a person has due to\u00a0a <strong>mismatch </strong>between their<strong> biological sex </strong>and<strong> their gender identity</strong>. This sense of unease or dissatisfaction can lead to depression and anxiety and can have a harmful impact on daily life.</span></span></div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While examining a man who is accused of rape, you find the presence of smegma on his corona glandis. Which of the following can be inferred from this finding?",
    "choices": [
      {
        "id": 1,
        "text": "The person has engaged in sexual act recently"
      },
      {
        "id": 2,
        "text": "The person has not engaged in sexual act in last 24 hours"
      },
      {
        "id": 3,
        "text": "The person has not engaged in sexual act in last 48 hours"
      },
      {
        "id": 4,
        "text": "The person has not engaged in sexual act in last 1 week"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> presence</strong> of <strong>smegma</strong> on the&nbsp;<strong>corona glandis</strong> indicates that the person has<strong> not engaged </strong>in<strong>&nbsp;</strong>a<strong> sexual act </strong>in the last<strong> 24 hours.</strong></p>\n<p>Smegma requires about 24 hours to collect. It gets removed by bathing or washing or intercourse.&nbsp;The <strong>absence</strong> indicates <strong>sexual activity</strong> might have been <strong>performed</strong> in the <strong>last 24 hours</strong>&nbsp;as it gets rubbed off during intercourse.&nbsp;The presence of smegma absolutely negates the possibility of complete penetration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Consent is a good defence in\u202f________.",
    "choices": [
      {
        "id": 1,
        "text": "Civil negligence"
      },
      {
        "id": 2,
        "text": "Criminal negligence"
      },
      {
        "id": 3,
        "text": "Ethical negligence"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Consent is a good defence in\u202fCivil negligence\u202f</p>\n<p>Difference between civil and criminal negligence</p>\n<table style=\"height: 134px; width: 378px;\">\n<tbody>\n<tr>\n<td style=\"width: 72px;\">&nbsp;</td>\n<td style=\"width: 209px;\">Civil negligence\u202f</td>\n<td style=\"width: 232px;\">Criminal negligence\u202f</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Offence\u202f</td>\n<td style=\"width: 209px;\">&nbsp;No specific and clear violation of law need to be proved.\u202f&nbsp;</td>\n<td style=\"width: 232px;\">Must have specifically violated a particular criminal law.\u202f</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Negligence</td>\n<td style=\"width: 209px;\">&nbsp;<span class=\"TextRun SCXW160132265\" lang=\"EN-GB\" xml:lang=\"EN-GB\"><span class=\"NormalTextRun SCXW160132265\">Simple absence of care and skill.</span></span></td>\n<td style=\"width: 232px;\">&nbsp;Gross negligence.\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Consent\u202f</td>\n<td style=\"width: 209px;\">&nbsp;Good defence, cannot recover damages.\u202f&nbsp;</td>\n<td style=\"width: 232px;\">Not a defence. Can be prosecuted.\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Litigation\u202f</td>\n<td style=\"width: 209px;\">&nbsp;Between two parties\u202f&nbsp;</td>\n<td style=\"width: 232px;\">&nbsp;Between state and doctor\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Trial by</td>\n<td style=\"width: 209px;\">&nbsp;Civil court\u202f&nbsp;</td>\n<td style=\"width: 232px;\">&nbsp;Criminal court\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\"><span class=\"TextRun SCXW200823556\" lang=\"EN-GB\" xml:lang=\"EN-GB\"><span class=\"NormalTextRun SCXW200823556\">Evidence\u202f</span></span><span class=\"TextRun SCXW200823556\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCXW200823556\">\u202f</span></span><span class=\"EOP SCXW200823556\" data-ccp-props=\"{&quot;201341983&quot;:0,&quot;335559739&quot;:200,&quot;335559740&quot;:276}\">&nbsp;</span></td>\n<td style=\"width: 209px;\">&nbsp;Strong evidence is sufficient\u202f\u202f&nbsp;</td>\n<td style=\"width: 232px;\">&nbsp;Guilt should be proved beyond reasonable doubt\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 72px;\">Punishment\u202f\u202f</td>\n<td style=\"width: 209px;\">&nbsp;Liable to pay damages</td>\n<td style=\"width: 232px;\">&nbsp;Imprisonment\u202f\u202f&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>Ethical negligence is violation of code of medical ethics; Consent is not related to this.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Conduct money is paid in",
    "choices": [
      {
        "id": 1,
        "text": "Civil cases"
      },
      {
        "id": 2,
        "text": "Criminal cases"
      },
      {
        "id": 3,
        "text": "Civil cases and criminal cases"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Conduct money is the fee paid to the witness in <strong>civil cases</strong> at<strong> the time of serving the summons,</strong> to meet the expenses of attending the court.\u202f</p>\n<p>Note: In criminal cases, no fee is paid to the witness at the time of serving the summons but if the witness is a doctor in private practice, he may request the court for conveyance charges and daily allowance according to the Government rules. As&nbsp;per law (Section 312 CrPC), he or she will be paid the travel allowances (TA) by the court. This is referred to as \"Witness Bata\" .</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "McNaughten rule is concerned with ______.",
    "choices": [
      {
        "id": 1,
        "text": "Criminal responsibility of voluntary intoxication"
      },
      {
        "id": 2,
        "text": "Criminal responsibility of involuntary intoxication"
      },
      {
        "id": 3,
        "text": "Criminal responsibility of insane"
      },
      {
        "id": 4,
        "text": "Criminal responsibility of a child"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>McNaughten</strong> rule is concerned with\u202fthe<strong>&nbsp;criminal responsibility</strong> of&nbsp;the<strong> insane</strong>. In India, the law of criminal responsibility is under<strong> Sec 84 I.P.C.</strong></p>\n<ul>\n<li>McNaughten&rsquo;s Rule was formed by the Judges of McNaughten&rsquo;s case, to clarify the common law of insanity in England during 1843. It is similar to IPC 84 which states &ldquo;Nothing is an offence which is done by a person who at the time of doing it by reason of unsoundness of mind is incapable of knowing the nature of the act, or that he is doing what is either wrong or contrary to law.</li>\n<li><strong>Curren's rule</strong> of 1961 states that an accused person<strong> </strong>is not criminally responsible if, at the time of&nbsp;committing the act,<strong> </strong>he did not have the<strong> capacity </strong>to<strong> regulate</strong>&nbsp;his conduct to the requirements of the law,&nbsp;<strong>as a result of mental disease</strong>&nbsp;or defect.</li>\n<li><strong>Durham's rule</strong>&nbsp;of 1954 States that an accused person is&nbsp;not criminally responsible&nbsp;if&nbsp;his unlawful act&nbsp;is the&nbsp;<strong>product </strong>of<strong> mental disease</strong>&nbsp;or mental defect.&nbsp;</li>\n</ul>\n<p>&nbsp;</p>\n<p>Other options -&nbsp;</p>\n<p>Option A: Criminal responsibility for voluntary intoxication - <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">An intoxicated person (voluntary intoxication) is criminally responsible if he had the intention or knowledge of committing a crime (<strong>Sec 86 IPC</strong>).</span></p>\n<p>Option B: Criminal responsibility for involuntary intoxication - <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">An act done by a person, who is incapable of knowing the nature of the act due to intoxication is not an offence, if the thing which intoxicated him was administered to him without his knowledge or against his will (<strong>Sec 85 IPC</strong>)</span></p>\n<p>Option D: Criminal responsibility of a child - <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Any act which is done by a<strong> </strong>child under seven years of age is not an offence (<strong>Sec 82 IPC</strong>). A child between 7-12 years is presumed to be capable of committing an offence, if he attained sufficient maturity of understanding to judge the nature and consequences of his conduct on that occasion (<strong>Sec. 83 IPC</strong>). This maturity is presumed in a child unless proved otherwise by the defence.&nbsp;</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Who can be considered as an expert witness?",
    "choices": [
      {
        "id": 1,
        "text": "Firearm expert"
      },
      {
        "id": 2,
        "text": "Medical men"
      },
      {
        "id": 3,
        "text": "Fingerprinting expert"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>All of the above can be considered as an <strong>expert witness</strong>.</p>\n<p>An expert witness is a person who is skilled in technical or scientific objects and capable of drawing opinions and conclusions from the fact observed by him or by others.\u202f Examples: Doctor, Firearm expert, fingerprinting expert, handwriting expert.\u202f<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">(<strong>S. 45 I.E.A.</strong>)</span></p>\n<p>&nbsp;</p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Witnesses: A witness is a person who gives evidence regarding facts. Sec 118 to 134 of I.E.A deal with witnesses</span></p>\n<div class=\"page\" title=\"Page 20\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Other types of witnesses</strong>:\u202f</span></p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Common witness</strong> is a person who gives evidence about the facts observed by him.\u202f <strong>The first-hand knowledge rule</strong>&nbsp;refers to the concept that the witness must show that he was&nbsp;<strong>capable of perceiving the fact</strong>&nbsp;by one of his own senses and that&nbsp;<strong>he actually observed this fact. It&nbsp;</strong>is applicable to&nbsp;<strong>all&nbsp;common witness</strong>&nbsp;who gives&nbsp;<strong>evidence</strong>&nbsp;about the<strong>&nbsp;facts observed&nbsp;</strong>or<strong>&nbsp;perceived&nbsp;</strong>by him/her.</li>\n</ul>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">A <strong>doctor</strong> can be <strong>both a common and expert witness</strong>. Common witness - When he describes the wounds on the body.&nbsp; </span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Expert witness - when he says that the wounds were antemortem or post-mortem, or they were suicidal, homicidal, or accidental, or gives an opinion regarding the cause of death.</span></p>\n<div class=\"page\" title=\"Page 20\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>A&nbsp;<strong>hostile witness</strong>&nbsp;is one who has some interest or&nbsp;<strong>motive</strong>&nbsp;for&nbsp;<strong>concealing part</strong>&nbsp;of the truth or for&nbsp;<strong>giving completely false evidence</strong>(<strong>Sec 191 IPC</strong>). There must be some evidence to prove that the witness has retracted from his earlier statement or is not desirous of disclosing the truth, or has exhibited an element of hostility. If a witness is declared as hostile,&nbsp;he can be&nbsp;<strong>cross-examined by the same side lawyer.</strong></li>\n</ul>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 21\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Perjury</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> is defined as&nbsp;the offence of&nbsp;</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">wilfully telling an untruth</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">&nbsp;or making a misrepresentation under oath. <strong>IPC</strong>&nbsp;</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">193</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">&nbsp;deals with&nbsp;</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">punishment</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> for false evidence. A person who intentionally gives false evidence or produces fabricated evidence for it to be used in a judicial proceeding shall be punished with <strong>imprisonment up to 7 years</strong>, and also liable to a fine.</span></p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Indians are_______",
    "choices": [
      {
        "id": 1,
        "text": "Dolicocephalic"
      },
      {
        "id": 2,
        "text": "Mesaticephalic"
      },
      {
        "id": 3,
        "text": "Brachycephalic"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Average Indian has a Mesaticephalic skull.</p>\n<p>The skull of an Indian is&nbsp;<strong>Caucasian with a few Negroid characteristics</strong>. Because of racial mixing, the Indian skull cannot be correctly differentiated into the broad categories of Dolichocephalic, Mesaticephalic, and Brachycephalic.</p>\n<p>Note: This is a controversial question. The use of the cephalic index for determination of race has been discredited and the cephalic index of the entire Indian population cannot be generalized to belong to one category. But the best answer to this question is Mesaticephalic.</p>\n<p>Pure Aryans, Aborigines and Negroes are Dolicocephalic with Cephalic index 70&ndash;75.\u202f</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d2f538dad5714635b1ef2dc781f9339ax1280x1531.PNG"
    ]
  },
  {
    "text": "Age of mixed dentition is",
    "choices": [
      {
        "id": 1,
        "text": "2\u20135 years"
      },
      {
        "id": 2,
        "text": "7\u201312 years"
      },
      {
        "id": 3,
        "text": "12\u201315 years"
      },
      {
        "id": 4,
        "text": "15\u201317 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Age of mixed dentition is\u202f7 &ndash; 12 years.\u202f </p>\n<p>7 &ndash; 12 years is the age of mixed dentition and the number of teeth remains constant at 24.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are suspecting organophosphorus poisoning in a farmer who presented with chronic fatigue and urinary incontinence. What would be the most accurate investigation to assess potential toxicity?",
    "choices": [
      {
        "id": 1,
        "text": "Plasma cholinesterase"
      },
      {
        "id": 2,
        "text": "RBC cholinesterase"
      },
      {
        "id": 3,
        "text": "Serum levels of organophosphorus compounds"
      },
      {
        "id": 4,
        "text": "Urinary levels of organophosphorus compound metabolites"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>RBC cholinesterase</strong> enzyme activity is the most <strong>accurate</strong> indicator to assess potential organophosphorus (<strong>OP</strong>) <strong>toxicity</strong>. It is an indicator of synaptic cholinesterase inhibition.</p>\n<p>However,&nbsp;<strong>plasma butyrylcholinesterase</strong> is <strong>easier</strong> to assay and more easily available. Hence, it is more commonly used.</p>\n<p class=\"p1\">Measurement of parent compound in blood and metabolites urine&nbsp;are rarely carried out in a&nbsp;clinical setting.</p>\n<p class=\"p1\">Note: The correlation between cholinesterase activity, clinical symptoms, and atropine dose is inconsistent. Hence, treatment should be guided predominately by clinical symptoms.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding opioid intoxication?",
    "choices": [
      {
        "id": 1,
        "text": "Hallucination results from stimulation of kappa receptors"
      },
      {
        "id": 2,
        "text": "Bronchospasm is due to histamine release"
      },
      {
        "id": 3,
        "text": "Opioid-induce acute lung injury is a rare complication"
      },
      {
        "id": 4,
        "text": "Opioid intoxication can be ruled out in absence of miosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Miosis</strong> is <strong>not universally present</strong> in intoxication from every opioid. Its absence cannot be used to rule out opioid intoxication. <strong>Normal</strong> or even <strong>enlarged pupils</strong> have been documented secondary to diphenoxylate, meperidine, morphine, pentazocine, and propoxyphene toxicity.</p>\n<p><strong>Opioid intoxication:</strong></p>\n<ul>\n<li>Mental status depression</li>\n<li>Analgesia</li>\n<li>Miosis</li>\n<li>Orthostatic hypotension</li>\n<li>Nausea and vomiting</li>\n<li>Histamine release resulting in localized urticaria</li>\n<li>Ileus secondary to decreased GI motility</li>\n<li>Urinary retention secondary to increased vesical sphincter tone</li>\n<li>Respiratory depression, <strong>bronchospasm (histamine release)</strong>, <strong>acute lung injury (rare</strong> complication)</li>\n</ul>\n<table style=\"height: 179px;\" width=\"371\">\n<tbody>\n<tr style=\"height: 34.4375px;\">\n<td style=\"width: 177px; height: 34.4375px;\"><strong>Opioid receptor</strong></td>\n<td style=\"width: 178px; height: 34.4375px;\"><strong>Effects</strong></td>\n</tr>\n<tr style=\"height: 239px;\">\n<td style=\"width: 177px; height: 239px;\">mu</td>\n<td style=\"width: 178px; height: 239px;\">\n<p>Analgesia</p>\n<p>Sedation</p>\n<p>Miosis</p>\n<p>Respiratory depression</p>\n<p>Cough suppression</p>\n<p>Euphoria</p>\n<p>Decreased GI motility</p>\n</td>\n</tr>\n<tr style=\"height: 207px;\">\n<td style=\"width: 177px; height: 207px;\">kappa</td>\n<td style=\"width: 178px; height: 207px;\">\n<p>Analgesia</p>\n<p>Sedation</p>\n<p>Miosis</p>\n<p>Decreased GI motility</p>\n<p>Dysphoria</p>\n<p><strong>Hallucinations</strong></p>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 177px; height: 78px;\">delta</td>\n<td style=\"width: 178px; height: 78px;\">\n<p>Analgesia</p>\n<p>Antidepressant effect</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Least common fingerprint pattern is",
    "choices": [
      {
        "id": 1,
        "text": "Loops"
      },
      {
        "id": 2,
        "text": "Whorls"
      },
      {
        "id": 3,
        "text": "Composite"
      },
      {
        "id": 4,
        "text": "Arches"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Composite forms (1 \u2013 2%) are the least common fingerprint pattern.</p>\n<p>Loops (60 \u2013 70%) are the most common fingerprint pattern</p>\n<p>Types of finger print:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bbde1da114d6424187de7970fb44b5f7x1280x734.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa43248c318841cea07cc0093195ce4ax1280x852.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/46a07a69bbcc486588bb08c26daee280x1280x824.PNG"
    ]
  },
  {
    "text": "A 20-year-old who was found missing for the past three days was later found in a swimming pool nearby. On examination, parts of the faded tattoo were found remaining on his back. Which of the following tests can best reveal the presence of a tattoo in its entirety?",
    "choices": [
      {
        "id": 1,
        "text": "Magnifying lens"
      },
      {
        "id": 2,
        "text": "Infrared photography"
      },
      {
        "id": 3,
        "text": "Optical coherence tomography"
      },
      {
        "id": 4,
        "text": "Application of 3% hydrogen peroxide"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Infrared photography</strong> makes old tattoos readily visible. Also, due to its <strong>non</strong>-<strong>invasive</strong> nature and <strong>micron</strong>-level <strong>resolution</strong> along with the use of common equipment in forensic laboratories, has placed this technique over others in visualising faded tattoo marks.</p>\n<p>A <strong>faded</strong> <strong>tattoo</strong> <strong>mark</strong> can be visualized by:</p>\n<ul>\n<li>Ultraviolet light</li>\n<li>Infrared photography</li>\n<li>Rubbing the part and examining it with a magnifying lens</li>\n<li>3% Hydrogen peroxide</li>\n</ul>\n<p>In <strong>decomposed</strong> <strong>bodies</strong>, the <strong>tattoo</strong> <strong>marks</strong> can be visualized by removing the epidermis with a moist cloth. The lymph nodes near a tattoo mark also show a deposit of the pigment.</p>\n<p>Other options:</p>\n<p>Option A: A <strong>magnifying</strong> <strong>lens</strong> can be used but is <strong>inferior</strong> to infrared photography.</p>\n<p>Option C: Although <strong>optical</strong> <strong>coherence</strong> <strong>tomography</strong> can be used to visualise faded tattoos, the <strong>increased</strong> <strong>technical</strong> <strong>skill</strong> required to utilise this technique makes it not very viable.</p>\n<p>Option D: <strong>Hydrogen</strong> <strong>peroxide</strong> can also be used to visualise faded tattoos but due to its <strong>destructive</strong> <strong>nature</strong> it has been replaced by the use of infrared photography. Also, prior <strong>knowledge</strong> <strong>of</strong> the <strong>existence</strong> of a tattoo <strong>at</strong> <strong>the</strong> <strong>location</strong> is required prior to the application of hydrogen peroxide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Length of the Humerus corresponds to ___% of stature of individual\u202f.",
    "choices": [
      {
        "id": 1,
        "text": "20"
      },
      {
        "id": 2,
        "text": "22"
      },
      {
        "id": 3,
        "text": "27"
      },
      {
        "id": 4,
        "text": "35"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Length of the Humerus is 20% of the stature.\u202f\u202f</p>\n<p>Relationship between bone and % of height of individual.</p>\n<table style=\"width: 284px;\">\n<tbody>\n<tr>\n<td style=\"width: 130px;\"><strong>Bone\u202f</strong>&nbsp;</td>\n<td style=\"width: 146px;\"><strong>% of height\u202f&nbsp;</strong></td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Humerus\u202f&nbsp;</td>\n<td style=\"width: 146px;\">20\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Tibia\u202f&nbsp;</td>\n<td style=\"width: 146px;\">22\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Femur\u202f&nbsp;</td>\n<td style=\"width: 146px;\">27\u202f&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Spine\u202f&nbsp;</td>\n<td style=\"width: 146px;\">35\u202f&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image shows a child with",
    "choices": [
      {
        "id": 1,
        "text": "Cephalhaematoma"
      },
      {
        "id": 2,
        "text": "Caput succedaneum"
      },
      {
        "id": 3,
        "text": "Epidural haemorrhage"
      },
      {
        "id": 4,
        "text": "Subgaleal haemorrhage"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows collection of blood between the periosteum of the skull and the skull bone. It is localised to one cerebral hemisphere. Hence it is a cephalhaematoma.</p>\n<p>Difference between a Caput Succedaneum and Cephalhematoma</p>\n<table style=\"height: 174px; width: 434px;\">\n<tbody>\n<tr>\n<td style=\"width: 84px;\"><strong>Indicators</strong></td>\n<td style=\"width: 193px;\"><strong>Caput Succedaneum</strong></td>\n<td style=\"width: 139px;\"><strong>Cephalhematoma</strong></td>\n</tr>\n<tr>\n<td style=\"width: 84px;\">Location</td>\n<td style=\"width: 193px;\">Presenting part of head</td>\n<td style=\"width: 139px;\">Periosteum of skull bone and bone</td>\n</tr>\n<tr>\n<td style=\"width: 84px;\">Extent of movement</td>\n<td style=\"width: 193px;\">Both hemisphere, crosses the suture line</td>\n<td style=\"width: 139px;\">Individual bones, doesnot crosses the suture lines</td>\n</tr>\n<tr>\n<td style=\"width: 84px;\">Period of absorption</td>\n<td style=\"width: 193px;\">3-4 days</td>\n<td style=\"width: 139px;\">\u00a0Few weeks to months</td>\n</tr>\n<tr>\n<td style=\"width: 84px;\">Treatment</td>\n<td style=\"width: 193px;\">None</td>\n<td style=\"width: 139px;\">Support</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Option C</strong>: Epidural haemorrhage is bleeding in the space between duramater and the skull.</p>\n<p><strong>Option D</strong>: Subgaleal haemorrhage is bleeding in the potential space between the skull\u202fperiosteum\u202fand the scalp\u202fgalea aponeurosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2d40e90984f0496cbf82b6154bd84e9b.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f17ae90ca1d14cc68f138371b3916e7bx800x313.JPEG"
    ]
  },
  {
    "text": "Nobbing fracture is common in",
    "choices": [
      {
        "id": 1,
        "text": "Battered baby syndrome"
      },
      {
        "id": 2,
        "text": "Munchausen syndrome"
      },
      {
        "id": 3,
        "text": "Sudden infant death syndrome"
      },
      {
        "id": 4,
        "text": "Sandifer\u2019s syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Nobbing fracture is common in Battered baby syndrome.</p>\n<ul>\n<li>In battered baby syndrome or infantile whiplash syndrome violent squeezing of chest from side to side causes fracture of costochondral junctions and also along the posterior angles of the rib.</li>\n<li>After callus formation which takes around 2 weeks, it gives \u201cstring of beads\u201d appearance in paravertebral region on X ray also known as nobbing fractures.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In starvation gall bladder is",
    "choices": [
      {
        "id": 1,
        "text": "Distended"
      },
      {
        "id": 2,
        "text": "Atrophied"
      },
      {
        "id": 3,
        "text": "Show stones"
      },
      {
        "id": 4,
        "text": "Normal"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In starvation, the gall bladder is distended.</p>\n<p>In starvation, bile does not get secreted into the stomach due to absence of food entering the stomach and intestine. So bile gets accumulated in gall bladder and gets distended.</p>\n<p><strong>Starvation:</strong></p>\n<ul>\n<li>Feeling of intense hunger lasts for 30-48 hours.</li>\n<li>Person can survive for 10-12 days without food and water and for 6-8 weeks without food alone.</li>\n<li>Loss of 40% of body weight is usually fatal.\u00a0</li>\n<li>Loss of 70-90% of body fat and 20% of body protein is fatal.\u00a0</li>\n<li>There is reduction in weight and size of all organs except brain.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "About 2 kg of tension in the ligature around the neck occludes which of the following structure?",
    "choices": [
      {
        "id": 1,
        "text": "Jugular vein"
      },
      {
        "id": 2,
        "text": "Carotid artery"
      },
      {
        "id": 3,
        "text": "Vertebral artery"
      },
      {
        "id": 4,
        "text": "Trachea"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>2kg of tension in the ligature must be present to occlude jugular vein.</p>\n<p>Tension in the ligature to occlude carotid artery, trachea and vertebral artery are 5kg, 15kg and 20kg respectively.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of mortality in patients with organophosphate poisoning?",
    "choices": [
      {
        "id": 1,
        "text": "Cardiac arrhythmias"
      },
      {
        "id": 2,
        "text": "Renal failure"
      },
      {
        "id": 3,
        "text": "Hypovolemic shock"
      },
      {
        "id": 4,
        "text": "Respiratory failure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most common cause of <strong>death</strong> in <strong>organophosphate poisoning</strong> is <strong>respiratory failure</strong>. It usually occurs within 24 hours in untreated patients, secondary to paralysis of respiratory muscles.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The method shown in the image below is called chasing the dragon. Which drug is taken through this route?",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "LSD"
      },
      {
        "id": 3,
        "text": "Heroin"
      },
      {
        "id": 4,
        "text": "Marijuana"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Chasing the dragon</strong>&nbsp;is a method used to take <strong>heroin</strong>.</p>\n<p>In this, users <strong>inhale</strong> a thick, white pyrolysate that is generated by heating heroin base on aluminum foil using a hand-held flame. This means of administration produces heroin <strong>concentrations similar</strong> to those observed following <strong>IV</strong> administration.</p>\n<p>Other methods used to take drugs are:</p>\n<ul>\n<li>Mainlining -&nbsp;Intravenous injection</li>\n<li>Insufflation - Snorting</li>\n<li>Skin popping -&nbsp;Subcutaneous injection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/60b2360051c041d1bdf21f69952e23e5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Asphyxia caused by mechanical occlusion of internal air passages is called",
    "choices": [
      {
        "id": 1,
        "text": "Lynching"
      },
      {
        "id": 2,
        "text": "Choking"
      },
      {
        "id": 3,
        "text": "Smothering"
      },
      {
        "id": 4,
        "text": "Mugging"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Choking is a form of asphyxia caused by mechanical occlusion of internal air passages.</p>\n<p><strong>Option A:</strong></p>\n<ul>\n<li>Lynching- When several persons jointly and illegally over power an individual and hang him i.e. homicidal hanging.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8541756634e5453699bfc342a11e8c81x339x399.PNG"
    ]
  },
  {
    "text": "Most cases of drowning in India are",
    "choices": [
      {
        "id": 1,
        "text": "Homicidal"
      },
      {
        "id": 2,
        "text": "Suicidal"
      },
      {
        "id": 3,
        "text": "Accidental"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most cases of drowning in India are accidental.</p>\n<p>Accidental drowning is the most common form seen usually in epileptics, intoxicated individuals, swimmers, fisherman, dock workers etc.</p>\n<p><strong>Option A:</strong> Homicidal drowning is the rarest form of drowning.</p>\n<p><strong>Option B:</strong> Suicidal drowning is common in women.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The postmortem finding seen in smothering is",
    "choices": [
      {
        "id": 1,
        "text": "Thyroid fracture"
      },
      {
        "id": 2,
        "text": "Marks on the neck"
      },
      {
        "id": 3,
        "text": "Hyoid fracture"
      },
      {
        "id": 4,
        "text": "Abrasion on the inner side of the mouth"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Abrasion on the inner side of mouth is found in <strong>smothering.</strong></p>\n<p>Smothering is a form of asphyxia which occurs due to closure of external respiratory orifices by means of hands or by blocking of nose or mouth using foreign substances like mud, cloth etc.</p>\n<p>Accidental smothering is the most common type.</p>\n<p>Postmortem findings in case of smothering:</p>\n<ul>\n<li>Since there is slow asphyxia, asphyxial signs will be severe.</li>\n<li>Victim\u2019s face might show lacerations, nail marks and scratches.</li>\n<li>Bruising and laceration of lips, gums and tongue and oozing of blood from mouth and nose will be seen.</li>\n<li>Protruded tongue</li>\n<li>Asphyxial signs are absent in case of sudden death due to reflex cardiac arrest and in case of plastic bag suffocation.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of illusion in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Affect illusions"
      },
      {
        "id": 2,
        "text": "Pareidolic illusions"
      },
      {
        "id": 3,
        "text": "Illusion of nature"
      },
      {
        "id": 4,
        "text": "Both B and C"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The type of illusion in the given image is <strong>pareidolic illusions.&nbsp;</strong>Pareidolic illusions are those where images are seen from shapes, e.g. seeing human faces in the rocks.</p>\n<p>Illusions may be of three types:</p>\n<ul>\n<li>Completion illusions</li>\n<li>Affect illusions</li>\n<li>Pareidolic illusions</li>\n</ul>\n<p>Completion illusions are seen in human tendency to complete a familiar and unfinished pattern.</p>\n<p>Affect illusions can be understood in context with the prevailing mood state.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/099e54b6c6da49d08a3cf4aeeae6c776.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the given image",
    "choices": [
      {
        "id": 1,
        "text": "Lilliputian hallucination"
      },
      {
        "id": 2,
        "text": "Physical torture"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Scenic hallucinations"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image describes Lilliputian hallucination:</p>\n<ul>\n<li>In delirious states, visual hallucinations of small animals are common.</li>\n<li>In alcoholic delirium tremens, lilliputian hallucinations, i.e. hallucinations of small animals and human beings, are reported (person sees figures in reduced size like midgets or dwarfs).</li>\n<li>Scenic hallucinations are associated with various psychiatric disorders and also temporal lobe epilepsy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f1a690891ad7480a8bf03a3c8016df2a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "In dry drowning, death commonly occurs due to",
    "choices": [
      {
        "id": 1,
        "text": "Cerebral anoxia"
      },
      {
        "id": 2,
        "text": "Laryngospasm"
      },
      {
        "id": 3,
        "text": "Lung haemorrhage"
      },
      {
        "id": 4,
        "text": "Entry of water into the alveoli"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In dry drowning, death occurs due to immediate sustained laryngospasm.&nbsp;</p>\n<p><span class=\"s1\">In dry drowning</span>, water does not enter the&nbsp;<span class=\"s2\">lungs, but </span>death results from immediate sustained laryngeal spasm due to inrush of water into the&nbsp; nasopharynx or larynx. Thick mucus, foam and froth may develop, producing a plug. This is seen in some cases of immersion and is commonly seen in children and adults under the influence of alcohol or sedative hypnotics.</p>\n<p>Drowning can also cause hypoxia to vital tissues like brain and heart leading to <strong>cardiac dysrhythmias</strong> (progressing from tachycardia, bradycardia, pulseless electrical activity, and <strong>asystole)</strong></p>\n<p><strong>Other types of drowning:</strong></p>\n<ul>\n<li>Wet/primary/typical drowning: Water enters lungs and death occurs due to cardiac arrest or ventricular fibrillation.</li>\n<li>Secondary drowning/post immersion syndrome/near drowning: It is a condition where victim of drowning is resuscitated and survives for 24 hours.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the identification of preauricular sulcus useful for?",
    "choices": [
      {
        "id": 1,
        "text": "Skull fusion"
      },
      {
        "id": 2,
        "text": "Race identification"
      },
      {
        "id": 3,
        "text": "Sex determination"
      },
      {
        "id": 4,
        "text": "Age identification"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>preauricular sulcus</strong> is useful for<strong> sex determination</strong>. It is a groove on the iliac bone <strong>broad </strong>and<strong> deep</strong> in a <strong>female </strong>pelvis&nbsp;and&nbsp;narrow and shallow in a male pelvis.</p>\n<p>The differences between male and female pelvis are summarized in the table below.</p>\n<table style=\"height: 1199px; width: 481.453125px;\" border=\"0\">\n<tbody>\n<tr style=\"height: 27px;\">\n<td style=\"width: 111px; text-align: center; height: 27px;\"><strong>Characteristic</strong></td>\n<td style=\"width: 181px; text-align: center; height: 27px;\"><strong>Male pelvis</strong></td>\n<td style=\"width: 169.453125px; text-align: center; height: 27px;\"><strong>Female pelvis</strong></td>\n</tr>\n<tr style=\"height: 83px;\">\n<td style=\"width: 111px; text-align: center; height: 83px;\">General Morphology</td>\n<td style=\"width: 181px; text-align: center; height: 83px;\">Massive, &nbsp;rougher, marked muscle attachments</td>\n<td style=\"width: 169.453125px; text-align: center; height: 83px;\">Less massive, slender, smoother</td>\n</tr>\n<tr style=\"height: 68px;\">\n<td style=\"width: 111px; text-align: center; height: 68px;\">Overall shape</td>\n<td style=\"width: 181px; text-align: center; height: 68px;\">Deep funnel</td>\n<td style=\"width: 169.453125px; text-align: center; height: 68px;\">Flat bowl</td>\n</tr>\n<tr style=\"height: 68px;\">\n<td style=\"width: 111px; text-align: center; height: 68px;\">Preauricular sulcus</td>\n<td style=\"width: 181px; text-align: center; height: 68px;\">Narrow, shallow</td>\n<td style=\"width: 169.453125px; text-align: center; height: 68px;\">Broad, deep</td>\n</tr>\n<tr style=\"height: 68px;\">\n<td style=\"width: 111px; text-align: center; height: 68px;\">Acetabulum</td>\n<td style=\"width: 181px; text-align: center; height: 68px;\">Large, wider, deeper</td>\n<td style=\"width: 169.453125px; text-align: center; height: 68px;\">Small, narrower</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 111px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Body of pubis</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 181px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Narrow, triangular, thick</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Broad, square</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 111px; text-align: center; height: 50px;\">Obturator foramen</td>\n<td style=\"width: 181px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 71\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Large, oval with base upward</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 71\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Small, triangular with apex forwards</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 52px;\">\n<td style=\"width: 111px; text-align: center; height: 52px;\">Subpubic angle</td>\n<td style=\"width: 181px; text-align: center; height: 52px;\">V-shaped, narrow, (70<sup>o</sup>)</td>\n<td style=\"width: 169.453125px; text-align: center; height: 52px;\">U-shaped, rounded, wide, (90<sup>o</sup>)</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 111px; text-align: center; height: 50px;\">Greater sciatic notch</td>\n<td style=\"width: 181px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 71\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Smaller, narrower, deeper</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 50px;\">\n<div class=\"page\" title=\"Page 71\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Larger, wider, shallower</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 111px; text-align: center; height: 50px;\">Ischial Tuberosity</td>\n<td style=\"width: 181px; text-align: center; height: 50px;\">Inverted</td>\n<td style=\"width: 169.453125px; text-align: center; height: 50px;\">Everted, more widely separated</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 111px; text-align: center; height: 51px;\">Pelvic Brim</td>\n<td style=\"width: 181px; text-align: center; height: 51px;\">Heart-Shaped</td>\n<td style=\"width: 169.453125px; text-align: center; height: 51px;\">Circular or elliptical</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 111px; text-align: center; height: 51px;\">Pelvic outlet</td>\n<td style=\"width: 181px; text-align: center; height: 51px;\">Smaller</td>\n<td style=\"width: 169.453125px; text-align: center; height: 51px;\">Larger</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 111px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sacroiliac articulation</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 181px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Large extends to 2<sup>1/2</sup> to 3 vertebrae</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Small, oblique, extends to 2 to 2<sup>1/2</sup> vertebrae</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 111px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sacroiliac joint surface</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 181px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Large and less sharply angulated&nbsp;</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>L-shaped and elevated anteriorly&nbsp;</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 51px;\">\n<td style=\"width: 111px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sacrum</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 181px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Longer, narrower, with more evenly distributed curvature, promontory well marked. Body of first sacral vertebra is larger.</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 169.453125px; text-align: center; height: 51px;\">\n<div class=\"page\" title=\"Page 72\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Shorter, wider; upper<br />half almost straight, curve forward in the lower half, promontory less marked. Body of first sacral vertebra is small.</p>\n</div>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are considered as unnatural sexual offences in India?",
    "choices": [
      {
        "id": 1,
        "text": "4 and 5"
      },
      {
        "id": 2,
        "text": "1, 2 and 5"
      },
      {
        "id": 3,
        "text": "3 and 4"
      },
      {
        "id": 4,
        "text": "2 only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Bestiality</strong>\u00a0is an act of\u00a0using a lower <strong>animal</strong>\u00a0for <strong>sexual gratification.</strong> It is an unnatural<strong> sexual offence </strong>and is<strong> punishable in India.</strong></p>\n<p>Sexual offences may be described as natural or unnatural offences:</p>\n<div class=\"page\" title=\"Page 137\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Natural sexual offences:</strong> Sexual offences committed in order of nature. Eg: rape.</li>\n<li><strong>Unnatural sexual offences:\u00a0</strong>Sexual offences committed against the order of nature. Eg: bestiality.</li>\n</ul>\n</div>\n</div>\n</div>\n<p><strong>Incest\u00a0</strong>is sexual intercourse between man and woman who are related by blood or a certain degree of blood relationship. In India, incest per se is not a crime unless it attracts provisions of rape. It comes under the category of natural sexual offenses if the act is non-consensual.</p>\n<p><strong>Sodomy/buggery </strong>is <strong>consensual anal intercourse</strong> between man and man or man and woman. It has been <strong>decriminalized\u00a0</strong>now.<strong><br /></strong></p>\n<p><strong>Tribadism/lesbianism </strong>means female homosexuality. It has been <strong>decriminalised</strong>\u00a0now though it was not punishable previously.</p>\n<p><strong>Buccal coitus</strong> is not a punishable offence, unless it is performed by force or in public.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following substances are irritant poisons?",
    "choices": [
      {
        "id": 1,
        "text": "1, 4 and 5"
      },
      {
        "id": 2,
        "text": "2, 3 and 5"
      },
      {
        "id": 3,
        "text": "3 and 4"
      },
      {
        "id": 4,
        "text": "4 and 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Phosphorus</strong> and <strong>lead</strong> are inorganic<strong> irritant poisons.</strong></p>\n<p>Sodium hydroxide, ammonia, and sulphuric acid are all&nbsp;corrosive<strong>&nbsp;</strong>poisons.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about ectopic contusions?",
    "choices": [
      {
        "id": 1,
        "text": "Bruising on the neck may indicate a jaw fracture"
      },
      {
        "id": 2,
        "text": "Bruising at the nape of the neck indicates fracture of the posterior cranial fossa"
      },
      {
        "id": 3,
        "text": "A black eye may be from fracture of the anterior cranial fossa"
      },
      {
        "id": 4,
        "text": "Bruising behind the ear indicates fracture of the middle cranial fossa"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Bruising at the nape of the neck does not indicate a fracture of the posterior cranial fossa.</p>\n<p><strong>Ectopic bruises</strong> are also called <strong>migratory/percolated</strong> bruising. They are found at a <strong>different location</strong> than the actual site of <strong>injury.</strong> They are caused by the<strong> percolation</strong> of blood in the <strong>subcutaneous tissue</strong> from one site to another.</p>\n<p>Examples are:</p>\n<ul>\n<li><strong>Black eye</strong> - due to actual trauma to the eye, or maybe an ectopic bruise. It may be from trauma to the forehead or from a fracture of the anterior cranial fossa.</li>\n</ul>\n<p>The image below shows a black eye.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8babad4ef7b74db698c947c02efef0abx1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa6dd8ed3b92443ab9a115b8a513003dx720x743.JPEG"
    ]
  },
  {
    "text": "An abrasion involves which of the following layers of the skin?",
    "choices": [
      {
        "id": 1,
        "text": "Partial thickness of epidermis"
      },
      {
        "id": 2,
        "text": "Full thickness of epidermis"
      },
      {
        "id": 3,
        "text": "Epidermis + superficial dermis"
      },
      {
        "id": 4,
        "text": "Epidermis + dermis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An <strong>abrasion</strong> is the most superficial of injuries and is one that <strong>does not penetrate </strong>the <strong>full thickness</strong> of the<strong> epidermis</strong>.</p>\n<p>Thus the <strong>pure abrasion does not bleed</strong>, as blood vessels are confined to the dermis. The dermal papillae are corrugated in nature. Therefore, many abrasions enter the dermis, and bleeding commonly occurs.</p>\n<p>Abrasions are commonly known as\u00a0grazes or scratches.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Fracture through the line shown in the image is called as?",
    "choices": [
      {
        "id": 1,
        "text": "Ring fracture"
      },
      {
        "id": 2,
        "text": "Motorcyclist's fracture"
      },
      {
        "id": 3,
        "text": "Diastatic fracture"
      },
      {
        "id": 4,
        "text": "Signature fracture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The line shown in the given image corresponds closely to the location of a <strong>hinge fracture</strong> of the base of the skull, also called a <strong>motorcyclist's fracture</strong>.</p>\n<p class=\"p1\">It is a basal linear <strong>fracture</strong> that <strong>passes across the floor of the middle cranial fossa</strong>, often following the petrous temporal or greater wing of the sphenoid bone <strong>into the pituitary fossa.</strong> This frequently continues symmetrically across the other middle fossa separating the base of the skull into two halves, usually being caused by a<strong> </strong>heavy blow on the side of the head and is associated with injuries to the brainstem (pontomedullary tears).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/00821c487fb64d3ab24496990545dc4f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a false statement regarding contrecoup injuries?",
    "choices": [
      {
        "id": 1,
        "text": "Fracture of the skull may not occur, even in the presence of severe coup and contrecoup injuries"
      },
      {
        "id": 2,
        "text": "A fall on the frontal region will produce an occipital contrecoup"
      },
      {
        "id": 3,
        "text": "A fall on the temporal region will produce a contrecoup in the ipsilateral lobe"
      },
      {
        "id": 4,
        "text": "The most common site for contrecoup injury is frontal and temporal lobes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A fall on the frontal region will not produce occipital contrecoup injuries. This is due to the relatively <strong>smooth</strong> internal <strong>surface</strong> of the <strong>posterior cranial fossa.</strong></p>\n<p><strong>Coup </strong>injury is\u00a0damage that occurs on the <strong>same side</strong> of the <strong>direct trauma</strong>. <strong>Contrecoup</strong> injuries are present <strong>opposite</strong> to the site of trauma and is due to <strong>shear strain</strong>.</p>\n<p>Fracture of the skull may not occur, even in the presence of severe coup and contrecoup injuries (option A). The skull's anterior and middle cranial fossae have sharp edges. This makes the <strong>temporal</strong> and <strong>frontal</strong> lobes highly <strong>prone</strong> to <strong>contrecoup</strong> injuries (option D).\u00a0</p>\n<p>A fall on the <strong>temporal</strong> region can produce a <strong>contrecoup</strong> injury on the <strong>ipsilateral</strong> lobe due to the <strong>presence</strong> of the <strong>falx cerebri</strong> (option C). <br />During the impact, the ipsilateral lobe moves in the opposite direction striking the falx cerebri, resulting in contrecoup injury on the same lobe (as the impact) but opposite to the site of initial trauma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8d0f005638c5413dad28c3ffb6c4265fx1280x1411.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3875ed3e645d4017a731ac3b47d8df5fx1280x1373.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/72ef5116fb944b82a7cc0d7a0d473db7x1279x1656.JPEG"
    ]
  },
  {
    "text": "An elderly woman was found dead during winter in her wardrobe. On house inspection, the heater was found to be broken. She was also identified to be a known case of hypothyroidism. Which of the following most likely explains her scenario?",
    "choices": [
      {
        "id": 1,
        "text": "Myxedema coma"
      },
      {
        "id": 2,
        "text": "Terminal burrowing behaviour"
      },
      {
        "id": 3,
        "text": "Paradoxical undressing"
      },
      {
        "id": 4,
        "text": "Sudden cardiac arrest"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most likely explanation for the given scenario is <strong>terminal burrowing behaviour</strong> or <strong>hide and die syndrome</strong>.&nbsp;</p>\n<p>An elderly lady with hypothyroidism is more likely to develop hypothermia. About 20% of hypothermia cases are associated with terminal burrowing behaviour.</p>\n<p>In some cases the bodies were found in strange situations, i.e. lying under a bed, behind a wardrobe, or on a shelf, etc. indicating that the final positions were a kind of self-protective burrowing-like behaviour.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following features of electrical injury will develop if the contact with the electrocuting surface is poorly established?",
    "choices": [
      {
        "id": 1,
        "text": "Crocodile skin"
      },
      {
        "id": 2,
        "text": "Joule burn"
      },
      {
        "id": 3,
        "text": "Bone pearl"
      },
      {
        "id": 4,
        "text": "Spark lesion"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>When the contact with the electrocuting surface is not firm, the skin lesion that develops is called a <strong>spark lesion</strong>.</p>\n<p>When the contact is less firm, an air gap (albeit narrow) exists between skin and conductor the current jumps the gap as a spark. This causes the outer skin keratin to melt over a small area. On cooling, the keratin fuses into a hard brownish nodule, usually raised above the surrounding surface.</p>\n<p>Various skin lesions in electrical injury:</p>\n<ul>\n<li>When the skin has been in firm contact with an electrical conductor, this may split the layers of the epidermis or the epidermal-dermal junction and produce a raised blister called&nbsp;<strong>Joule burns.</strong></li>\n<li>In high-voltage burns, such as those sustained from high-tension grid transmission cables, where the voltage is in the multi-kilovolt range, sparking may occur over many centimeters. This can cause multiple spark lesions giving rise to a <strong>&lsquo;crocodile-skin&rsquo; effect.</strong></li>\n<li>The heat generated by the current may melt the calcium phosphate, which is radiologically seen as typical round dense foci called as '<strong>bone pearls</strong>' or 'wax drippings'.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/78a1a5b9a362479bb6c741086b8a9730x1280x1882.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bb8aec3bc8a04cca8b628abeca0ff59ex720x484.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e4a5bf7f876f43f08e4eb6aaface8651x512x342.JPEG"
    ]
  },
  {
    "text": "A rifled weapon produces damage mainly by which of the following mechanism?",
    "choices": [
      {
        "id": 1,
        "text": "Tissue disintegration"
      },
      {
        "id": 2,
        "text": "Permanent tract"
      },
      {
        "id": 3,
        "text": "Cavitation effect"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Rifled weapons produce most of their damage by <strong>cavitation</strong> effect.</p>\n<p class=\"p1\">Two different mechanisms of injury can be distinguished when a projectile penetrates a dense medium such as tissue:</p>\n<ul>\n<li class=\"p1\">\n<p class=\"p1\"><strong>Crush-mechanism and Permanent Tract</strong> -&nbsp;Tissue located in line with the trajectory is crushed by excessive pressures buildup directly in front of the tip of the moving projectile. The tissue is completely disintegrated, resulting morphologically in the permanent tract. This is the main mechanism of damage in a <strong>shotgun</strong>.</p>\n</li>\n<li class=\"p1\">\n<p class=\"p1\"><strong>Stretch-mechanism and Temporary Cavity</strong> -&nbsp;Tissue located at the side of the trajectory is temporarily accelerated radially.&nbsp;This radial displacement of tissue creates a fusiform or conical cavity. Tissue elasticity causes the cavity to collapse immediately, hence the name temporary cavity. This is the main mechanism of damage in a <strong>rifled gun</strong>.</p>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the most common fingerprint pattern?",
    "choices": [
      {
        "id": 1,
        "text": "Loops"
      },
      {
        "id": 2,
        "text": "Whorls"
      },
      {
        "id": 3,
        "text": "Tented-arch"
      },
      {
        "id": 4,
        "text": "Plain-arch"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Loops</strong> are the <strong>most common</strong> fingerprint pattern encountered.&nbsp;</p>\n<p><strong>Patterns</strong> of fingerprints:</p>\n<ul>\n<li>Loops (60-70%)\n<ul>\n<li>Radial</li>\n<li>Ulnar</li>\n</ul>\n</li>\n<li>Whorls&nbsp;\n<ul>\n<li>Concentric</li>\n<li>Spiral</li>\n<li>Double spiral</li>\n<li>Almond shaped</li>\n</ul>\n</li>\n<li>Arches&nbsp;\n<ul>\n<li>Plain</li>\n<li>Tented</li>\n</ul>\n</li>\n<li>Composite\n<ul>\n<li>Central pocket loop</li>\n<li>Lateral pocket loop</li>\n<li>Twinned loop</li>\n<li>Accidentals</li>\n</ul>\n</li>\n</ul>\n<p>The image given below shows the different patterns of fingerprints.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7fca3fb351b5488e8063c9325d50cf6cx1280x2223.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a3c1008075764ce597a742df99b40170x600x454.PNG"
    ]
  },
  {
    "text": "In a peculiar case of robbery, the forensic team finds that no finger prints were left behind despite the footage showing that the thief did not wear any gloves. Which of the following medical conditions could he be suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "Epidermolysis bullosa"
      },
      {
        "id": 2,
        "text": "Guttate psoriasis"
      },
      {
        "id": 3,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 4,
        "text": "Dermatopathia pigmentosa reticularis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A person suffering from <strong>dermatopathia pigmentosa reticularis</strong> (DPR) has a lack of fingerprint patterns, and hence will not leave fingerprint marks.</p>\n<p>There are two closely related autosomal dominant<strong> ectodermal dysplasia</strong> syndromes causing complete absence of fingerprints. They are Naegeli\u2013Franceschetti\u2013Jadassohn syndrome (NFJS) and dermatopathia pigmentosa reticularis (DPR).</p>\n<p>A permanent damage of fingerprints also occurs in patients with leprosy, electrical injury, and irradiation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A convict who was earlier granted a death sentence was then later commuted to life imprisonment. What IPC section does this come under?",
    "choices": [
      {
        "id": 1,
        "text": "IPC 51"
      },
      {
        "id": 2,
        "text": "IPC 53"
      },
      {
        "id": 3,
        "text": "IPC 54"
      },
      {
        "id": 4,
        "text": "IPC 55"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>IPC Section <strong>54</strong> deals with the&nbsp;<strong>commutation </strong>of a <strong>death sentence</strong>. Commutation&nbsp;denotes the substitution of one form of punishment for a lighter form. For example, a death sentence commuted to life imprisonment.</p>\n<p>Sections <strong>53 to 75</strong> of the IPC deal with <strong>punishments</strong>.&nbsp;</p>\n<p>Option A: IPC <strong>51</strong>&nbsp;denotes the section on <strong>oath.</strong>&nbsp;It includes a solemn affirmation sub&shy;stituted by law for an oath, and any declaration required or authorized by law to be made before a public servant or to be used for the purpose of proof, whether in a Court of Justice or not.<strong>&nbsp;</strong></p>\n<p>Option B: IPC&nbsp;<strong>53</strong>&nbsp;denotes the section on <strong>punishments</strong>. The punishments provided are death, life imprisonment, imprisonment for a certain time, forfeiture of property, and lastly fine.</p>\n<p>Option D: IPC&nbsp;<strong>55</strong>&nbsp;denotes the <strong>commutation</strong> of a sentence of <strong>life imprisonment</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newly married woman was found dead in her house. On inquiry, it was informed by the neighbours that the couple used to fight a lot regarding dowry. Which section deals with this scenario?",
    "choices": [
      {
        "id": 1,
        "text": "BNS Section 63 [IPC 375]"
      },
      {
        "id": 2,
        "text": "BNS Section 80 [IPC 304B]"
      },
      {
        "id": 3,
        "text": "BNS Section 72 [IPC 228A]"
      },
      {
        "id": 4,
        "text": "BNS Section 100 [IPC 299]"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Dowry Death</strong> is defined under <strong>section 80</strong> of Bharatiya Nyaya Sanhita (BNS) 2023 (IPC 304B)<strong>.</strong></p>\n<ul>\n<li>If a husband or his relative subjects the woman to cruelty or harassment in demand of dowry within 7 years of marriage, they shall be deemed to have caused her death.</li>\n<li>The punishment for such cases is imprisonment for<strong> not less than 7 years</strong> but may be extended to life imprisonment.</li>\n</ul>\n<p>Option A: <strong>Section 63 (IPC 375) </strong>deals with <strong>rape</strong>.</p>\n<p>Option C: <strong>Section 72 (IPC 228A) </strong>deals with imprisonment for up to 2 years and a fine for <strong>disclosure of the identity of a rape victim</strong>.</p>\n<p>Option D: <strong>Section 100 (IPC 299)</strong> deals with <strong>culpable homicide</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are declaring a patient brain dead by using Harvard criteria. All of the following parameters are checked for, except:",
    "choices": [
      {
        "id": 1,
        "text": "Unresponsiveness to painful stimuli"
      },
      {
        "id": 2,
        "text": "Isoelectric ECG waves"
      },
      {
        "id": 3,
        "text": "Loss of elicitable reflexes"
      },
      {
        "id": 4,
        "text": "No spontaneous muscular movements"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Isoelectric EEG</strong> is included in <strong>Harvard criteria</strong> for <strong>brain death</strong> and <strong>not ECG</strong>.</p>\n<p>Harvard criteria for brain death include:</p>\n<ul>\n<li>Unreceptivity and unresponsiveness</li>\n<li>No movements</li>\n<li>Apnoea</li>\n<li>Absence of elicitable reflexes</li>\n<li>Isoelectric EEG (confirmatory)</li>\n</ul>\n<p>All these tests should be recorded. If there is no change after 24 hours, then the patient is declared brain dead.</p>\n<p><strong>Philadelphia protocol</strong>, <strong>Minnesota criteria</strong> are other criteria used to diagnose brain death.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements are true about cadaveric rigidity in contrast to cadaveric spasm?",
    "choices": [
      {
        "id": 1,
        "text": "2, 4 and 5"
      },
      {
        "id": 2,
        "text": "1, 3 and 4"
      },
      {
        "id": 3,
        "text": "2 and 3"
      },
      {
        "id": 4,
        "text": "1 and 5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cadaveric rigidity</strong>&nbsp;is also known as <strong>rigor mortis.&nbsp;</strong>It is due to the depletion of ATP and indicates time since death. Muscle stiffening is not marked and can be overcome by moderate force.&nbsp;The rigor starts occurring <strong>1-2 hours</strong> <strong>after</strong> death (postmortem nature) and muscles <strong>do not</strong> respond to <strong>electrical stimuli.</strong></p>\n<p><strong>Cadaveric spasm</strong>&nbsp;/&nbsp;instantaneous rigor/ cataleptic rigidity/ death clutch&nbsp;is a phenomenon where a<strong> group of muscles </strong>in a state of contraction at the time of death<strong> remains contracted after death </strong>until&nbsp;molecular death occurs.</p>\n<p>Cadaveric spasm is an <strong>antemortem</strong> phenomenon and occurs <strong>immediately</strong> after death. There is <strong>no stage </strong>of <strong>primary relaxation</strong>.&nbsp;It is seen in cases of <strong>deaths </strong>coupled with<strong> emotional disturbances</strong> like:</p>\n<ul>\n<li>In cases of excitement, fear, severe pain</li>\n<li>Exhaustion at the time of death</li>\n<li>Cerebral hemorrhage</li>\n<li>Injury to the nervous system</li>\n<li>Drowning</li>\n<li>Strychnine poisoning</li>\n</ul>\n<p>Examples:</p>\n<ul>\n<li>In case of drowning, weeds and grass caught in hand during struggle remain firmly grasped even after death. This indicates that the person was alive when entering the water</li>\n<li>In case of suicides, weapons remain firmly grasped in the hand</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old unmarried woman discovers that she is pregnant. She wishes to undergo an abortion as it was unplanned. Within what period of gestation is this procedure permissible under MTP Amendment Bill, 2021 for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "12 weeks"
      },
      {
        "id": 2,
        "text": "22 weeks"
      },
      {
        "id": 3,
        "text": "24 weeks"
      },
      {
        "id": 4,
        "text": "20 weeks"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>As per the Medical Termination of Pregnancy (Amendment) Act, 2021, Medical Termination of Pregnancy <strong>(MTP)</strong> for <strong>contraceptive failure</strong> is permissible up to&nbsp;<strong>20 weeks</strong>. This bill was passed by Rajya Sabha on 17th March 2021.</p>\n<p><strong>Features </strong>of the Medical Termination of Pregnancy (Amendment) Bill:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Enhancing the upper gestation limit <strong>from 20 to 24</strong> <strong>weeks</strong> for special categories of women which includes survivors of <strong>rape,</strong> victims of <strong>incest,</strong> and other <strong>vulnerable women</strong> (like differently-abled women, minors), etc.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Up to&nbsp;<strong>20 weeks</strong>&nbsp;in case of&nbsp;<strong>contraception failure</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Opinion of only one provider will be required up to 20 weeks of gestation and of two providers for termination of pregnancy of 20-24 weeks of gestation.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Upper gestation limit not to apply in cases of substantial fetal abnormalities.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Name and other particulars of a woman whose pregnancy has been terminated shall not be revealed except to a person authorized in any law for the time being in force.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">The ground of failure of contraceptives has been extended to women and their partners.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following indices are used to determine race of the individual except",
    "choices": [
      {
        "id": 1,
        "text": "Cephalic index"
      },
      {
        "id": 2,
        "text": "Medullary index"
      },
      {
        "id": 3,
        "text": "Brachial index"
      },
      {
        "id": 4,
        "text": "Intermembranal index"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Cephalic index, brachial index, intermembranal index are all used to determine race of the individual whereas medullary index is used to differentiate between human v/s animal hairs.</p>\n<p>Osteometric indices to determine race are:</p>\n<ul>\n<li>Cephalic index.</li>\n<li>Brachial index.</li>\n<li>Crural index.</li>\n<li>Humero-femoral index.</li>\n<li>Inter-membranal index.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "During autopsy, stomach is opened",
    "choices": [
      {
        "id": 1,
        "text": "Along the lesser curvature, from cardiac to pyloric end"
      },
      {
        "id": 2,
        "text": "Along the lesser curvature, from pyloric to cardiac end"
      },
      {
        "id": 3,
        "text": "Along the greater curvature, from cardiac to pyloric end"
      },
      {
        "id": 4,
        "text": "Along the greater curvature, from pyloric to cardiac end"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>During autopsy stomach is opened along the greater curvature, starting from the cardiac end and proceeding towards pyloric end.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Forensic Medicine Test Ii';
        const quizFilename = 'forensic-medicine-test-ii-7d639cf9.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>