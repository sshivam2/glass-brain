<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covid19 Mini Test - New Pattern (20 Questions) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 42-year-old asymptomatic woman is diagnosed with COVID 19 infection. Her CT chest is unremarkable. She was incidentally diagnosed with gall stones 2 months back and wishes to get an elective surgery done. As per the American Society of Anesthesiologists, how long is the suggested wait time for elective surgeries after diagnosis of COVID 19?",
    "choices": [
      {
        "id": 1,
        "text": "4 weeks from date of diagnosis"
      },
      {
        "id": 2,
        "text": "8 weeks  from date of diagnosis"
      },
      {
        "id": 3,
        "text": "8 weeks from date of recovery"
      },
      {
        "id": 4,
        "text": "4 weeks from date of recovery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>For asymptomatic and mildly symptomatic COVID 19 positive patients, elective surgeries can be planned <strong>4 weeks from the date of diagnosis of COVID-19.</strong></p>\n<p>The American Society of Anesthesiologists (ASA) recommended waiting time for elective surgery from the date of diagnosis of COVID-19 infection are as follows:\u00a0\u00a0</p>\n<ul>\n<li><strong>4 weeks</strong> for an asymptomatic patient or <strong>recovery from only</strong> <strong>mild</strong>, non-respiratory symptoms</li>\n<li><strong>6 weeks</strong> for symptomatic patients with cough/dyspnea <strong>not requiring hospitalization</strong></li>\n<li><strong>8 to 10 weeks</strong>\u00a0for symptomatic patients who <strong>required hospitalization</strong> and/or <strong>diabetic</strong> patients and/or <strong>immunocompromised</strong></li>\n<li><strong>12 weeks</strong> for patients that had to be <strong>admitted to the ICU</strong> due to COVID 19\u00a0\u00a0</li>\n</ul>\n<p>The American College of Surgeons recommends <strong>non-operative managemen</strong>t, if feasible and safe for the patient in surgical emergencies in a COVID-19 positive patient or is at high clinical suspicion of COVID-19.</p>\n<p>If the surgery is required in such patients, then proper<strong> personal protective equipment</strong> should be utilized and precautions to be taken to protect the health care team.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 16-year-old, healthy otherwise asymptomatic girl, who wanted to join back in her school after lockdown came to the local PHC for taking the rapid antigen test for COVID-19. She has tested positive. Which of the following is the next best appropriate step?",
    "choices": [
      {
        "id": 1,
        "text": "Repeat an RT-PCR test for her"
      },
      {
        "id": 2,
        "text": "Admit her to the COVID unit"
      },
      {
        "id": 3,
        "text": "Advise her for home isolation"
      },
      {
        "id": 4,
        "text": "Reconfirm with repeat RAT"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario is an <strong>asymptomatic mild case of COVID-19</strong> with <strong>no risk factors</strong> who can be recommended home isolation for a duration of 10 days starting from symptom onset.\u00a0Repeating the RAT test is not recommended. A single Positive RAT is sufficient enough to make the diagnosis of COVID19.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a4fd35c45c3b46879b25388976adb992x600x804.JPEG"
    ]
  },
  {
    "text": "Which of the following statements are true about COVID 19?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 4, and 5"
      },
      {
        "id": 2,
        "text": "2, 3,  and 4"
      },
      {
        "id": 3,
        "text": "1, 2, 3"
      },
      {
        "id": 4,
        "text": "1 and 3 only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Statements 1 and 3 are true about COVID-19. <strong>SARS - COV2</strong> is an<strong>&nbsp;enveloped RNA virus</strong>&nbsp;with <strong>club-shaped spikes</strong> and <strong>FELUDA</strong> based on the <strong>CRISPR gene-editing</strong> technology is a strip test that can <strong>detect SARS COV 2 genes.</strong></p>\n<p>A biosafety level cabinet <strong>BSL of level 3</strong> is required for <strong>culturing</strong> the virus while a <strong>level 2</strong> would suffice for <strong>specimen handling or molecular testing</strong> of the virus. <strong>KAVACH ELISA</strong> is for <strong>antibody detection</strong> of COVID-19. Coronavirus belongs to the family of <strong>Coronaviridae.</strong></p>\n<p>Coronaviruses are enveloped positive-sense, single-stranded RNA viruses with an unsegmented genome, and they exhibit&nbsp;<strong>helical</strong>&nbsp;<strong>symmetry</strong>.&nbsp;</p>\n<p>The coronaviridiae have a single unsegmented&nbsp;<strong>ss (+) RNA</strong>&nbsp;which is, in fact, the largest genome among RNA viruses. They are about 120 - 160 nm in size and contain a&nbsp;<strong>helical nucleocapsid.&nbsp;</strong>It also has&nbsp;<strong>spike proteins - S1 and S2.</strong>&nbsp;They are responsible for the&nbsp;<strong>host specificty</strong>, faster spread of the disease and it is highly&nbsp;<strong>suscpetible to mutations</strong>. While&nbsp;<strong>S1 protein</strong>&nbsp;is involved in the&nbsp;<strong>attachment of the virus</strong>&nbsp;with&nbsp;<strong>ACE-2 receptor</strong>, S2 protein is involved in virus-host cell fusion.&nbsp;</p>\n<p>The virus responsible for the recent pandemic that started in 2019 is named&nbsp;<strong>SARS-CoV-2</strong>&nbsp;(severe acute respiratory syndrome- coronavirus-2) and the disease it causes has been named&nbsp;<strong>coronavirus disease 2019</strong>&nbsp;(abbreviated COVID-19).&nbsp;</p>\n<p>SARS-CoV-2 is a member of the order Nidovirales, family Coronaviridae, subfamily Orthocoronavirinae,<strong>&nbsp;genera Betacoronavirus, and sub-genus Sarbecovirus.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following patients, would you administer Covidshield vaccination?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "1, 2, 4, 5"
      },
      {
        "id": 3,
        "text": "2, 3, 4, 5"
      },
      {
        "id": 4,
        "text": "3, 4, 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The&nbsp;<span data-preserver-spaces=\"true\">51-year-old man</span> should receive&nbsp;COVID-19 vaccination<strong>&nbsp;</strong>at least<strong> 3 months after hematopoietic cell transplantation</strong> (and not 5 weeks)&nbsp;to&nbsp;maximize vaccine efficacy.&nbsp;</p>\n<p><strong>Graft-versus-host disease</strong> and immunosuppressive regimens like systemic corticosteroids can blunt the immune responses to vaccination. Delay of vaccination until<strong> immunosuppressive therapy</strong> is reduced can be considered.&nbsp;</p>\n<p>Consider additional risk factors linked to <strong>adverse COVID-19 complications</strong> including, but not limited to:&nbsp;</p>\n<ul>\n<li>Patients with advanced age (eg, &ge;65 years of age)&nbsp;</li>\n<li>Patients with comorbidities (eg, chronic pulmonary, cardiovascular, or renal disease)&nbsp;</li>\n<li>Social and demographic factors</li>\n</ul>\n<p>COVID-19 vaccines should be prioritized over other vaccines. A gap of&nbsp;<strong>14 days</strong>&nbsp;is recommended between COVID-19 vaccines and any other vaccine.&nbsp;</p>\n<p>If COVID vaccine has been given first, then TT vaccine can be given on the same day. If TT vaccine have been given first, then wait for 14 days to give COVID vaccine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following equipment with a sample was sent from the COVID-19 positive ward for testing. Where should the empty container be disposed of?",
    "choices": [
      {
        "id": 1,
        "text": "Yellow bin"
      },
      {
        "id": 2,
        "text": "Red bin"
      },
      {
        "id": 3,
        "text": "Blue bin"
      },
      {
        "id": 4,
        "text": "Black bin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The image shows an</span><strong><span data-preserver-spaces=\"true\">&nbsp;Eppendorf micro-centrifugation tube</span></strong><span data-preserver-spaces=\"true\">. It should be discarded in <strong>r</strong></span><strong><span data-preserver-spaces=\"true\"><strong>ed</strong> bin.</span></strong></p>\n<p>These<strong><span data-preserver-spaces=\"true\">&nbsp;</span></strong><span data-preserver-spaces=\"true\">are single-use disposable tubes used for storing human test samples (except blood) for <strong>in-vitro testing</strong>. The tube is sensitive to temperature and seals may breach in higher temperatures.</span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b8f6784a86304d46b7e0f67982eaea1f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young girl, who recently recovered from COVID-19, presents with fever, abdominal pain and rashes for 4 days. On examination, strawberry tongue is observed and cervical nodes are found to be enlarged bilaterally. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Kawasaki disease"
      },
      {
        "id": 2,
        "text": "Multisystem inflammatory syndrome in children"
      },
      {
        "id": 3,
        "text": "Bacterial sepsis"
      },
      {
        "id": 4,
        "text": "Toxic shock syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This is a case of <strong>m</strong><strong>ultisystem inflammatory syndrome in children (MIS-C)</strong>, associated with<strong> COVID-19</strong> infection.</p>\n<p><strong>Diagnostic criteria for MIS-C:</strong></p>\n<p>Children and adolescents 0&ndash;18 years of age with fever &ge;3 days</p>\n<p>AND two of these:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Rash or bilateral non-purulent conjunctivitis or mucocutaneous inflammation signs (palmoplantar erythema,&nbsp;lip hyperemia, periorbital erythema and edema, strawberry tongue, and malar erythema)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Hypotension or shock.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Features of myocardial dysfunction, pericarditis, valvulitis, or coronary abnormalities&nbsp;(including ECHO findings or elevated Troponin/NT-proBNP)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Evidence of coagulopathy&nbsp;(PT, PTT, elevated D-Dimers)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Acute gastrointestinal problems (diarrhoea, vomiting, or abdominal pain)</li>\n</ul>\n<p>AND</p>\n<p>Elevated ESR(&gt;40 mm), C-reactive protein (&gt;5 mg/L), or procalcitonin.</p>\n<p>AND</p>\n<p>No other obvious microbial cause of inflammation including bacterial sepsis, staphylococcal or streptococcal shock syndromes.</p>\n<p>AND</p>\n<p>Evidence of COVID-19 (RT-PCR, antigen test,&nbsp;or serology positive), or likely contact with patients with COVID-19.</p>\n<p><strong>Types of MIS-C</strong>:</p>\n<ul>\n<li>MIS-C with shock/multi-organ dysfunction</li>\n<li>Kawasaki phenotype</li>\n<li>MIS-C without shock</li>\n</ul>\n<p>MIS-C is treated with <strong>IV methylprednisolone</strong>. The dose can be increased in patients with shock. If the condition does not improve for 48-72 hours, specialists can be consulted for the addition of biologicals to the treatment regimen.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A G2P1 woman presents to the clinic at 37 weeks of gestation with mild dyspnea. Her husband was COVID positive and now she has tested positive for COVID 19. She is febrile and you note that she is tachypneic on examination. Which of the following is/are incorrect regarding the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 4, 5"
      },
      {
        "id": 2,
        "text": "1, 2, 4"
      },
      {
        "id": 3,
        "text": "1, 2, 5"
      },
      {
        "id": 4,
        "text": "3, 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>As the pregnant female has tested positive for SARS COV 2 she requires admission to a tertiary care center. Once admitted, maternal surveillance should include maternal heart rate, respiratory rate BP, and temperature measurement at least 3-4 times a day along with requisite chest imaging using X-ray or CT.</p>\n<p>As part of fetal monitoring, <strong>FHR should be measured on a daily basis</strong>, not once in two days. Since the patient is at 37 weeks, betamethasone should be given to facilitate fetal maturation. <strong>Betamethasone can be given</strong> to mothers between 34-37 weeks. IV antibiotics can be added as per the local protocols.</p>\n<p>Once delivered, RT-PCR of the New-born should be done.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Working as a duty doctor in a COVID care centre, you were trained on sanitation techniques, donning, doffing of PPE and other preventive measures to reduce the incidence of disease. You were recommended to use alcohol-based hand rubs to curtail the spread of COVID-19 infection. The microbiological basis for the same would be?",
    "choices": [
      {
        "id": 1,
        "text": "COVID-19 virus has spike proteins"
      },
      {
        "id": 2,
        "text": "COVID-19 virus has an ss-RNA"
      },
      {
        "id": 3,
        "text": "COVID-19 virus has a lipid envelope"
      },
      {
        "id": 4,
        "text": "COVID-19 virus has a glycoprotein capsid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Alcohol-based hand rubs</strong> are preferred because <strong>COVID 19 virus has a lipid envelope</strong>&nbsp;that contributes to its susceptibility to lipid solvents.&nbsp;</p>\n<p>Coronaviruses are <strong>enveloped helically symmetrical</strong>&nbsp;viruses. Alcohol, especially ethanol present in the hand rubs, dissolves the lipid envelope and denatures the proteins present. This leads to membrane disruption and inhibition of the metabolism, as depicted below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf6db79d20a44b199b76dd895ca8107bx800x292.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/105418143db243799a8c028a61bf7753x1280x1089.JPEG"
    ]
  },
  {
    "text": "You are working in a covid ward. After doffing, where will you dispose of the plastic coverall?",
    "choices": [
      {
        "id": 1,
        "text": "Red bin"
      },
      {
        "id": 2,
        "text": "Black bag"
      },
      {
        "id": 3,
        "text": "Yellow bin"
      },
      {
        "id": 4,
        "text": "Blue bin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>plastic coverall</strong> used by a healthcare worker during the&nbsp;<strong>COVID-19</strong> pandemic should be disposed of in the <strong>red bin</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old female diagnosed with mild-moderate COVID19 gave birth to a healthy, term neonate. It was a spontaneous vaginal delivery at 38 weeks of gestation with uneventful intrapartum history. The APGAR score of the baby at 1 and 5 minutes were 8/10 and 9/10 respectively. You are the rotating intern from the department of pediatrics. Which of the following would you be correct to advise?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, 5"
      },
      {
        "id": 2,
        "text": "1, 2, 4, 5"
      },
      {
        "id": 3,
        "text": "3 and 5 only"
      },
      {
        "id": 4,
        "text": "1, 3 and 4 only"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct advice would include 1, 2, 4, and 5.</p>\n<p>Guidelines for Neonatal management of a baby born to COVID19 positive mother include:</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Mother and child should be separated from each other.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Colocation / Rooming-in should be avoided as and when possible.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">If the situation demands rooming-in or if the mother does not have a healthy caregiver or if she is not consenting to the separation, arrangements have to be made accordingly. A screen can be placed in between the two and a distance of 6 feet minimum can be maintained between the two.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Breastfeeding is not contraindicated in COVID19 infected mothers.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Mother can express the breastmilk using a dedicated breast pump and ask the caregiver to feed the child. If a dedicated breast pump is not available,&nbsp;all parts<br />that come into contact with breast milk should be thoroughly washed and the entire pump should be appropriately disinfected as per the manufacturer&rsquo;s instructions after each pumping session.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In case the caregiver is not available, she can feed the child directly wearing a face mask and she must follow hand hygiene properly.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old CKD patient had tested positive for COVID-19 infection. He was also put on a ventilator due to worsening saturation but, unfortunately, he passed away. A pathologist working in your hospital is researching histopathology of COVID19 infection and takes a section of the diseased lung. She notices the image shown below under her microscope. Which of the following is wrong about the given finding?",
    "choices": [
      {
        "id": 1,
        "text": "The image shows diffuse alveolar damage"
      },
      {
        "id": 2,
        "text": "It is specific to COVID 19 pneumonia"
      },
      {
        "id": 3,
        "text": "This is the commonest pattern of lung lesions in patients with COVID-19"
      },
      {
        "id": 4,
        "text": "Commonly associated with mononuclear cell infiltration"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The given HP slide shows <strong>Diffuse alveolar damage</strong> and it is <strong>non-specific</strong> to COVID 19 pneumonia.</span></p>\n<p><span data-preserver-spaces=\"true\">Though diffuse alveolar damage is the <strong>most common finding</strong> in the histopathological analysis of COVID-19 infected lungs, it is not specific to COVID-19. It can also be seen in <strong>ARDS, burns, near-drowning</strong>.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">Other findings seen in the lungs infected with COVID-19 include:</span></p>\n<ul>\n<li><strong>Hyaline membrane formation</strong></li>\n<li><span data-preserver-spaces=\"true\">Desquamation of pneumocytes</span></li>\n<li><span data-preserver-spaces=\"true\">Fibrin deposits in the lungs</span></li>\n<li><strong>Inflammation with mononuclear cells\u00a0</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8eb4275e03f641cc8e2f1da7e598b720.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "You are posted as an intern in casualty. An elderly 60-year-old man is brought to you with complaints of chest pain. He has tested positive for COVID. Which of the following features will prompt you to get this patient admitted to dedicated COVID Health Centre?",
    "choices": [
      {
        "id": 1,
        "text": "A & B only"
      },
      {
        "id": 2,
        "text": "A, B, C, & E only"
      },
      {
        "id": 3,
        "text": "A, B & C only"
      },
      {
        "id": 4,
        "text": "A, B, C, D & E"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>A, B, C &amp; E</strong> are clinical criteria of admission under COVID-19 ward.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/43d094ce4619426698ff0444460bf1f9x1280x4371.JPEG"
    ]
  },
  {
    "text": "Which case scenarios along with the drugs prescribed are inappropriate?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, 5"
      },
      {
        "id": 2,
        "text": "1, 2, 3, and 4 only"
      },
      {
        "id": 3,
        "text": "3, 4 and 5"
      },
      {
        "id": 4,
        "text": "1 and 2 only"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The correct answer is <strong>1, 2, 3, and 4.</strong></span></p>\n<ol>\n<li><span data-preserver-spaces=\"true\">Tocilizumab is <strong>contraindicated</strong> in<strong> HIV-positive</strong> patients and those with active bacterial or fungal infection.</span></li>\n<li><span data-preserver-spaces=\"true\">Bamlanivimab is <strong>not</strong>&nbsp;</span><span data-preserver-spaces=\"true\">authorized for patients with&nbsp;<strong>mild&nbsp;</strong></span><span data-preserver-spaces=\"true\">COVID-19 pneumonia who are not at&nbsp;a high risk for <strong>hospitalization</strong>.</span></li>\n<li><span data-preserver-spaces=\"true\">Remedisivir is <strong>contraindicated </strong>in<strong> postnatal</strong> lactating women.</span></li>\n<li><span data-preserver-spaces=\"true\">Convalescent plasma therapy is&nbsp;<strong>no longer recommended</strong>&nbsp;in the management of COVID patients.</span></li>\n</ol>\n<p><strong><span data-preserver-spaces=\"true\">Tocilizumab</span></strong><span data-preserver-spaces=\"true\">&nbsp;acts by <strong>IL-6 inhibition</strong>. It may be considered in moderate-severe COVID patients with progressively increasing oxygen requirements and mechanically ventilated patients not improving despite the use of steroids. Patients should be carefully monitored for secondary infections and neutropenia after treatment with tocilizumab. It is contraindicated in:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">HIV&nbsp;</span></li>\n<li><span data-preserver-spaces=\"true\">Active infections (systemic bacterial/fungal)</span></li>\n<li><span data-preserver-spaces=\"true\">Tuberculosis</span></li>\n<li><span data-preserver-spaces=\"true\">Active hepatitis</span></li>\n<li><span data-preserver-spaces=\"true\">Absolute neutrophil count &lt; 2000/mm3</span></li>\n<li><span data-preserver-spaces=\"true\">Platelet count &lt; 1,00,000/mm3</span></li>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">Bamlanivimab</span></strong><span data-preserver-spaces=\"true\">&nbsp;is a monoclonal antibody directed against the&nbsp;</span><strong><span data-preserver-spaces=\"true\">spike protein</span></strong><span data-preserver-spaces=\"true\">&nbsp;of SARS-CoV-2. The FDA has issued an <strong>emergency use authorization</strong> for bamlanivimab for the treatment of adult and pediatric mild to moderate COVID patients (12 years of age and older weighing at least 40 kilograms) who are at high risk for progressing to severe COVID-19 and/or hospitalization.&nbsp;</span><span data-preserver-spaces=\"true\">Possible side effects include anaphylaxis and infusion-related reactions, nausea, diarrhea, dizziness, headache, itching, and vomiting. There is&nbsp;</span><strong><span data-preserver-spaces=\"true\">no specific contraindication</span></strong><span data-preserver-spaces=\"true\">&nbsp;for this drug.&nbsp;</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Remdesivir&nbsp;</span></strong><span data-preserver-spaces=\"true\">is an</span><span data-preserver-spaces=\"true\">&nbsp;antiviral drug that works by <strong>inhibiting RNA-dependent RNA polymerase</strong>. It may be considered in moderate and severe hospitalized COVID patients requiring supplemental oxygen/oxygen delivery through a high flow device/ noninvasive ventilation/ invasive mechanical ventilation/ ECMO.&nbsp;</span><span data-preserver-spaces=\"true\">It is contraindicated in:&nbsp;</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">AST/ALT &gt; 5 times upper limit of normal</span></li>\n<li><span data-preserver-spaces=\"true\">Severe renal impairment (i.e., eGFR &lt; 30ml/min/m2 or need for hemodialysis)&nbsp;</span></li>\n<li><span data-preserver-spaces=\"true\">Pregnancy or lactating females&nbsp;</span></li>\n<li><span data-preserver-spaces=\"true\">Children &lt;12 years of age</span></li>\n</ul>\n<p><strong>Convalescent plasma therapy</strong> is no longer recommended in the management of COVID patients, as per the revised guidelines.</p>\n<p><strong><span data-preserver-spaces=\"true\">Dexamethasone</span></strong><span data-preserver-spaces=\"true\">&nbsp;is generally given to all patients of moderate and severe COVID-19. Patients with severe COVID-19 can develop a</span><strong><span data-preserver-spaces=\"true\">&nbsp;systemic inflammatory response</span></strong><span data-preserver-spaces=\"true\">&nbsp;that can lead to lung injury and multisystem organ dysfunction. </span></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a criterion for discharge in a patient with mild COVID-19 infection?",
    "choices": [
      {
        "id": 1,
        "text": "Discharge after 10 days from testing positive & no fever for 3 days"
      },
      {
        "id": 2,
        "text": "Discharge after 7 days from testing positive & no fever for 3 days"
      },
      {
        "id": 3,
        "text": "Discharge if SpO2>98% on room air for 3 consecutive days"
      },
      {
        "id": 4,
        "text": "Discharge if repeat RT-PCR testing is negative"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>COVID-19 cases that are <strong>mild/very mild/presymptomatic</strong> can be discharged from home isolation after <strong>7</strong><strong>&nbsp;days </strong>of <strong>testing positive</strong><strong>&nbsp;</strong>and<strong> no fever </strong>for<strong> 3 successive days.&nbsp;</strong>There is no need for testing after the end of home isolation.&nbsp;</p>\n<p>Criteria to diagnose asymptomatic COVID-19: Laboratory confirmed case with no symptoms with a saturation of more than 93% in room air.&nbsp;</p>\n<p>Criteria to diagnose mild COVID-19:&nbsp;Laboratory confirmed case with upper respiratory tract symptoms with/without fever, without shortness of breath, and saturation of more than 93% in room air.&nbsp;</p>\n<p>Patients are advised to isolate from other family members and monitor themselves at home, under proper medical guidance.&nbsp;Patients &gt;60 years with co-morbidities, and immunocompromised patients are allowed to isolate only after receiving clearance from the designated medical officer.&nbsp;</p>\n<p>Immediate medical attention is required if the patient experiences the following:&nbsp;</p>\n<ul>\n<li>A 100 &ordm;F fever persists for &gt;3 days and does not resolve on medication.</li>\n<li>Difficulty in breathing&nbsp;</li>\n<li>Oxygen saturation&nbsp;&le;93% (at least 3 readings within 1 hour)</li>\n<li>Respiratory rate&nbsp;&gt;24/min</li>\n<li>Persistent chest pain or pressure</li>\n<li>Mental confusion&nbsp;</li>\n<li>Severe fatigue or myalgia&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old male, known case of diabetes mellitus type-2, hypertension, and chronic kidney disease, presents to the ER with complaints of breathing difficulty and fever. On examination, pulse rate is 96 bpm, BP is 118/70 mmHg, the temperature is 100.4 degree F, RR is 15/min and SpO2 is 96%. RT PCR indicates he is COVID positive. Chest CT as shown below demonstrates ground-glass opacities close to the visceral pleural surfaces and visible intralobular lines. Which CO-RADS (COVID-19 Reporting and Data System) category does this patient fall under?",
    "choices": [
      {
        "id": 1,
        "text": "CO-RADS 5"
      },
      {
        "id": 2,
        "text": "CO- RADS 6"
      },
      {
        "id": 3,
        "text": "CO- RADS 4"
      },
      {
        "id": 4,
        "text": "CO - RADS 7"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>As the patient has a positive COVID RT PCR, he would be classified as CORADS 6 - irrespective of his CT appearance.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c13e1315a03d49eba7e0b20b6f0097dc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The median incubation period of the SARS-COV2 virus is?",
    "choices": [
      {
        "id": 1,
        "text": "10- 14 days"
      },
      {
        "id": 2,
        "text": "12 - 24 days"
      },
      {
        "id": 3,
        "text": "4-6 days"
      },
      {
        "id": 4,
        "text": "1-3 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>median incubation period</strong> is <strong>around 4-6 days</strong>.\u00a0The incubation period of SARS-CoV-2 infection ranges from 2-14 days.</p>\n<p><strong>The incubation period</strong>\u00a0is the time interval between invasion of the infectious agent and appearance of the first symptom or sign in the body. It is termed as the\u00a0<strong>latent period</strong>\u00a0in non-infectious diseases. The incubation period depends upon\u00a0<strong>generation time of the pathogen, the portal of entry, infective dose, and individual susceptibility.</strong></p>\n<p>The\u00a0<strong>median incubation </strong>period\u00a0is the <strong>time required for 50% of the cases to occur </strong>after exposure<strong>.\u00a0</strong></p>\n<p><strong>Application</strong>\u00a0of incubation period is for</p>\n<ul>\n<li>Tracing the source of infection and contacts</li>\n<li>Determining the period of surveillance\u00a0or<strong> quarantine</strong></li>\n<li>For immunization</li>\n<li>Identification of point source or propagated epidemics</li>\n<li>Prognosis</li>\n</ul>\n<p>Quarantine is the\u00a0<strong>limitation</strong>\u00a0in freedom of movement of healthy contacts of cases, who have been exposed for a period that lasts as much as the\u00a0<strong>maximal incubation period of the disease.\u00a0</strong>It is a primary level of prevention, under specific protection. That is why contacts of COVID 19 patients are quarantined for 14 days.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A thirteen-year-old boy was brought to the OPD with fever and cough. His history is significant for frequent fever and painful swelling of hands after playing football. His mother brings an old sonology report which reveals his spleen to be shrunken. His vitals are within normal limits. You order certain radiological investigations and RT-PCR tests for SARS-COV2 and he is diagnosed with mild to moderate COVID. His vitals are stable and hence you decide to treat him on an outpatient basis. You can use all of the following drugs, as part of a combination, to treat the coronavirus disease in this patient except:",
    "choices": [
      {
        "id": 1,
        "text": "Crizanlizumab"
      },
      {
        "id": 2,
        "text": "Casirivimab"
      },
      {
        "id": 3,
        "text": "Bamlanivimab"
      },
      {
        "id": 4,
        "text": "Imdevimab"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The finding of dactylitis along with the shrunken spleen is suggestive of\u00a0<strong>sickle cell disease</strong>.</p>\n<p><strong> Crizanlizumab</strong> is a <strong>selectin blocker</strong> indicated to <strong>reduce the frequency of vasoocclusive crises</strong> in adults and pediatric patients aged 16 years and older with sickle cell disease. It is not used to treat COVID.</p>\n<p><span data-preserver-spaces=\"true\">The FDA has given emergency use authorization for the use of the\u00a0</span><span data-preserver-spaces=\"true\">following combination anti-SARS-CoV-2 monoclonal antibodies to treat outpatients with mild to moderate COVID-19 who are at high risk of clinical progression:<br /></span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\"><strong>Bamlanivimab 700 mg plus etesevimab 1,400 mg</strong>\u00a0administered together</span></li>\n<li><span data-preserver-spaces=\"true\"><strong>Casirivimab 1,200 mg plus imdevimab 1,200 mg</strong>\u00a0administered together</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\"><strong>Bamlanivimab</strong> and <strong>etesevimab</strong> are <strong>neutralizing IgG1 monoclonal antibodies</strong> that <strong>bind to distinct but overlapping epitopes</strong> within the <strong>receptor-binding domain of the spike protein of SARS-CoV2</strong>.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\"><strong>Casirivimab</strong> and <strong>imdevimab</strong>\u00a0are also <strong>IgG1 monoclonal antibodies</strong> that bind to non-overlapping epitopes of the <strong>spike protein receptor-binding domain</strong> (RBD) of SARS-CoV-2 and <strong>block the\u00a0RBD binding to the human ACE2 receptor.\u00a0</strong></span><span data-preserver-spaces=\"true\">The FDA has issued an emergency use authorization for using this combination for the treatment of adult and pediatric mild to moderate COVID patients (12 years of age and older weighing at least 40 kilograms) who are at high risk for progressing to severe COVID-19 and/or hospitalization.</span></p>\n<p><strong>Indication:</strong></p>\n<p><strong>High-Risk Criteria for Emergency Use Authorization</strong></p>\n<p>High-risk individuals who at least one of the following criteria:</p>\n<ul>\n<li>BMI \u226535</li>\n<li>Chronic kidney disease</li>\n<li>Diabetes mellitusImmunocompromising condition</li>\n<li>Currently receiving immunosuppressive treatment</li>\n<li>Aged \u226565 years</li>\n<li>Aged \u226555 years and have Cardiovascular disease; or Hypertension; or Chronic obstructive pulmonary disease/other chronic respiratory diseases.</li>\n</ul>\n<p>For those between 12 - 17 years: (either of the following)</p>\n<ul>\n<li>BMI \u226585th percentile for their age and gender-based on the Centers for Disease Control and Prevention growth charts</li>\n<li><strong>Sickle cell disease</strong></li>\n<li>Congenital or acquired heart disease</li>\n<li>\u00a0Neurodevelopmental disorders, for example, cerebral palsy</li>\n<li>A medical-related technological dependence, for example, tracheostomy, gastrostomy, or positive pressure ventilation (not related to COVID-19)</li>\n<li>Asthma or a reactive airway or other chronic respiratory diseases that require daily medication <br />for control.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old African-American presents to you with puffiness of the face, edema of feet, and oliguria. Past history was significant for COVID 19 disease. He was on home quarantine for 17 days. It has been a week since his quarantine period got over. The histopathological image of a section of his kidney is indicative of collapsing glomerulopathy and appears as shown below. Which of the following genes increases the risk of this disease entity in COVID-19 patients?",
    "choices": [
      {
        "id": 1,
        "text": "NPHS1"
      },
      {
        "id": 2,
        "text": "ACTN4"
      },
      {
        "id": 3,
        "text": "APOL1"
      },
      {
        "id": 4,
        "text": "TRPC6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Apolipoprotein\u00a0L1 (<em>APOL1</em>) gene\u00a0</strong>increases the risk of <strong>collapsing nephropathy</strong> in <strong>patients infected with COVID-19</strong>. The given HP section shows collapsing nephropathy with\u00a0<strong>microcystic tubular dilatation and tubular injury.</strong></p>\n<p>This type of COVID-19-\u200bassociated nephropathy (COVAN) specifically affects individuals of <strong>African ancestry</strong> who are carriers of this gene variant. Histopathology is similar to those seen in other forms of collapsing glomerulopathy. But, <strong>tubulointerstitial lesions</strong> including microcystic tubular dilatation and tubular injury are typically associated with APOL1- related disease.\u00a0</p>\n<p>\u00a0</p>\n<p>The proposed pathogenesis of COVAN is as follows:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5de2d26fc1cb40eb870ceb8da01b4139.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8eee5f0d7bc4404e92e7c72bf81465d0x685x325.JPEG"
    ]
  },
  {
    "text": "Which of the following is least likely to be useful in a patient with severe COVID-19?",
    "choices": [
      {
        "id": 1,
        "text": "Low molecular weight heparin"
      },
      {
        "id": 2,
        "text": "Oxygen"
      },
      {
        "id": 3,
        "text": "Favipiravir"
      },
      {
        "id": 4,
        "text": "Steroids"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Favipiravir(inhibits viral RNA polymerase) is the first oral drug approved in India for restricted emergency use for the treatment of mild to moderate COVID-19 patients. Studies show that the drug offers a rapid reduction in viral load and also provides a faster symptomatic and radiological improvement.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:895,&quot;3&quot;:{&quot;1&quot;:0},&quot;4&quot;:{&quot;1&quot;:2,&quot;2&quot;:16777215},&quot;5&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;6&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;7&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;8&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;9&quot;:1,&quot;11&quot;:4,&quot;12&quot;:0}\">Favipiravir (inhibits viral RNA polymerase) was the first oral drug approved in India for restricted emergency use for the treatment of <strong>mild to moderate COVID-19</strong> patients. It was <strong>not approved</strong> for <strong>severe COVID-19</strong>.&nbsp;</span></p>\n<p>&nbsp;</p>\n<p>Note: This is a question from INICET 2020, during which time&nbsp;<span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Favipiravir(inhibits viral RNA polymerase) is the first oral drug approved in India for restricted emergency use for the treatment of mild to moderate COVID-19 patients. Studies show that the drug offers a rapid reduction in viral load and also provides a faster symptomatic and radiological improvement.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:895,&quot;3&quot;:{&quot;1&quot;:0},&quot;4&quot;:{&quot;1&quot;:2,&quot;2&quot;:16777215},&quot;5&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;6&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;7&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;8&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;9&quot;:1,&quot;11&quot;:4,&quot;12&quot;:0}\">Favipiravir</span> had gained approval from DCGI for mild to moderate COVID. The current clinical management protocol for COVID-19 does not recommend Favipiravir.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The specimens collected for COVID-19 testing should be transported to the lab at what temperatures?",
    "choices": [
      {
        "id": 1,
        "text": "-30 degree C"
      },
      {
        "id": 2,
        "text": "-4 to -8 degree C"
      },
      {
        "id": 3,
        "text": "2 to 8 degree C"
      },
      {
        "id": 4,
        "text": "12 to 16 degree C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Specimens collected for COVID-19 testing should be transported to the lab at a temperature of <strong>2 to 8 degrees C</strong> as per the <strong>WHO</strong> guidelines. The <strong>ICMR/NIV</strong> guidelines recommend <strong>4 degrees C</strong> for transport to the laboratory.&nbsp;</p>\n<p>Both guidelines recommend storing specimens at <strong>-70&deg;C or below</strong> if a <strong>delay</strong> in testing or shipping is expected.</p>\n<table style=\"height: 172px;\" width=\"399\">\n<tbody>\n<tr>\n<td style=\"width: 327.312px;\"><strong>Specimen</strong></td>\n<td style=\"width: 55.6875px;\"><strong>Sensitivity</strong></td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Bronchoalveolar lavage fluid</td>\n<td style=\"width: 55.6875px;\">93%</td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Sputum</td>\n<td style=\"width: 55.6875px;\">72%</td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Nasopharyngeal swab</td>\n<td style=\"width: 55.6875px;\">63%</td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Oropharyngeal swab</td>\n<td style=\"width: 55.6875px;\">32%</td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Faeces</td>\n<td style=\"width: 55.6875px;\">29%</td>\n</tr>\n<tr>\n<td style=\"width: 327.312px;\">Blood</td>\n<td style=\"width: 55.6875px;\">1%</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Covid19 Mini Test - New Pattern (20 Questions)';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>