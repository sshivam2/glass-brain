<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radiology Test Ii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is not a feature of sickle cell anemia",
    "choices": [
      {
        "id": 1,
        "text": "H shaped vertebra"
      },
      {
        "id": 2,
        "text": "Hair on end appearance"
      },
      {
        "id": 3,
        "text": "Avascular necrosis of femoral head"
      },
      {
        "id": 4,
        "text": "Polka dot appearance"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Polka dot appearance&nbsp; is not a feature of sickle cell anemia.</p>\n<p>Skeletal features of sickle cell anemia</p>\n<ul>\n<li>Hair on end appearance</li>\n<li><strong>H shaped vertebra</strong></li>\n<li><strong>Avascular necrosis</strong></li>\n<li><strong>Snowcap sign</strong>: refers to the subarticular area of increased density, particularly in a humeral head, which reflects the revascularisation of an area of bone that has been necrotic</li>\n<li><strong>Bone within bone appearance</strong></li>\n<li><strong>Salmonella osteomyelitis</strong> which is typically seen in the diaphysis of the long bones</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged woman comes to your clinic due to recurrent episodes of cough productive of large amounts of sputum for 2 years. She is a non-smoker. Lung examination reveals wheezes with crackles bilaterally. A transverse section of the CT lung is given in the image below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary tuberculosis"
      },
      {
        "id": 2,
        "text": "Bronchiectasis"
      },
      {
        "id": 3,
        "text": "Chronic obstructive pulmonary disease"
      },
      {
        "id": 4,
        "text": "Bronchial asthma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of <strong>repeated chest infections </strong>with the presence of <strong>large amounts of sputum </strong>in a non-smoker point to the diagnosis of<strong> bronchiectasis. </strong>The CT scan showing the <strong>signet ring sign</strong> is specific for <strong>bronchiectasis</strong>.</p>\n<p><strong>Bronchiectasis</strong> refers to the <strong>irreversible</strong> dilatation of bronchi due to <strong>recurrent cycles</strong>&nbsp;of infection, inflammation, and tissue damage. Development of the disease requires an infectious insult in combination with impaired bacterial clearance (eg, impaired immune defenses, structural airway defect).</p>\n<p>Bronchiectasis is commonly associated with <strong>Kartagener syndrome, </strong>cystic fibrosis, and<strong> allergic bronchopulmonary aspergillosis</strong>.</p>\n<p>Clinically, patients present with persistent productive cough and production of thick tenacious sputum. On examination, there will be clubbing, wheeze, and crackles.</p>\n<p>A chest X-ray shows tram track appearance due to the dilated airways.&nbsp;<strong>Chest CT</strong> is the best method for the diagnosis of bronchiectasis.&nbsp;CT findings include:</p>\n<ul>\n<li><strong>Tram track appearance</strong></li>\n<li><strong>Signet ring sign</strong></li>\n<li>Lack of bronchial tapering</li>\n<li><strong>Tree-in-bud pattern</strong> - It occurs due to the thickening of the dilated airways along with the inspissated secretions.</li>\n<li>Cysts originating from the bronchial wall (pronounced in cystic bronchiectasis)</li>\n</ul>\n<p>The image given below shows the signet ring sign (arrows) seen in bronchiectasis:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98cc8995fe354abaa0d5962f5c68dd4e.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2a951d0e7a1d442295c2ca3269558daex720x900.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49642fae82914b418ae5694d1c5cb66fx500x426.JPEG"
    ]
  },
  {
    "text": "A child with progressive cyanosis was brought to the hospital. The chest radiograph of the patient is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ebstein\u2019s anomaly"
      },
      {
        "id": 2,
        "text": "Total anomalous pulmonary venous connection"
      },
      {
        "id": 3,
        "text": "Transposition of great arteries"
      },
      {
        "id": 4,
        "text": "Tricuspid atresia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of a cyanotic heart disease and the chest X-ray shows a&nbsp;<strong>box-shaped heart</strong>&nbsp;with<strong> oligemic lung fields. </strong>Therefore, the most likely diagnosis is<strong> Ebstein&rsquo;s anomaly.</strong></p>\n<p>Ebstein's anomaly&nbsp;is a congenital anomaly of the tricuspid valve wherein there is downward displacement of the abnormal tricuspid valve into the right ventricle. This leads to tricuspid regurgitation and atrialization of the right ventricle.</p>\n<p>It&nbsp;is usually associated with an atrial septal defect. In severe cases, there is&nbsp;<strong>right-to-left shunting</strong> at the atrial level with subsequent <strong>cyanosis</strong>. In newborns marked cyanosis, massive cardiomegaly and holosystolic murmurs are seen.&nbsp;</p>\n<p>On the chest radiograph, Ebstein&rsquo;s anomaly leads to a grossly enlarged cardiac contour and a prominent curved right atrial border, appearing as a<strong>&nbsp;box-shaped enlargement</strong> of the heart. In newborns with severe disease, the pulmonary fields may be totally obscured.&nbsp;Echocardiography is diagnostic. It provides the degree of tricuspid valve displacement, dilatation of the right atrium, and any right ventricular obstruction if present.</p>\n<p>Other options:&nbsp;</p>\n<p>Option B: Total anomalous pulmonary venous connection (TAPV) presents with severe cyanosis and respiratory distress. The radiograph shows a <strong>snowman appearance</strong>&nbsp;or<strong>&nbsp;figure of 8</strong>&nbsp;configurations of heart.</p>\n<p>Option C: <strong>Transposition of great arteries</strong> (TGA) can present from birth to infancy with cyanosis, decreased exercise tolerance, and poor physical development. Radiography shows the <strong>egg-on-string</strong> appearance of the heart.&nbsp;</p>\n<p>Option D:<strong> Tricuspid atresia</strong> also presents also with cyanosis at birth and holosystolic murmur along the left border of the sternum. Cyanosis with left axis deviation on ECG is suggestive of tricuspid atresia. 2D Echo shows a fibromuscular membrane in place of the tricuspid valve, small right ventricle, an enlarged left ventricle, and a VSD.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/23c703b0ef7648d2908c2600fc862de3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Investigation of choice for acute appendicitis is",
    "choices": [
      {
        "id": 1,
        "text": "Serum amylase"
      },
      {
        "id": 2,
        "text": "MRI"
      },
      {
        "id": 3,
        "text": "CT scan"
      },
      {
        "id": 4,
        "text": "USG"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>CT is a highly accurate test for <strong>confirming or excluding appendicitis</strong></li>\n<li>CT signs of appendicitis include an <strong>appendix measuring greater than 6 mm</strong> in diameter, <strong>failure of the appendix to fill with oral contrast or air up to its tip</strong>, an <strong>appendicolith,</strong> and <strong>enhancement of its wall with intravenous contrast</strong></li>\n<li>Sometimes the <strong>lumen of the caecum can be seen pointing towards the obstructed opening</strong> to the appendix<strong> (the 'arrow-head' sign)</strong></li>\n<li>Serum amylase is used in the diagnosis of acute pancreatitis</li>\n<li>USG is helpful in diagnosing acute appendicitis in pediatric patients</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the mismatched radiological sign among the following",
    "choices": [
      {
        "id": 1,
        "text": "Hot cross bun sign: Progressive supranuclear palsy"
      },
      {
        "id": 2,
        "text": "Molar tooth sign: Joubert syndrome"
      },
      {
        "id": 3,
        "text": "Eye of tiger appearance: Pntothenate kinase associated neurodegeneration"
      },
      {
        "id": 4,
        "text": "Face of panda sign: Wilson\u2019s disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Hot cross bun sign is seen in <strong>Multiple system atrophy</strong></li>\n<li><strong>Progressive supranuclear palsy</strong> shows <strong>&lsquo;humming bird sign&rsquo;</strong> on imaging</li>\n</ul>\n<p>Image below shows hot cross bun sign (arrow)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aadf751364a041c588390288256e2a6bx267x237.PNG"
    ]
  },
  {
    "text": "The half life of technetium 99m is",
    "choices": [
      {
        "id": 1,
        "text": "6 hours"
      },
      {
        "id": 2,
        "text": "12 hours"
      },
      {
        "id": 3,
        "text": "2 days"
      },
      {
        "id": 4,
        "text": "4 days"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The half life of technetium 99m is 6 hours.</p>\n<p>Some of the radioactive materials with their half life</p>\n<table style=\"width: 226.455px;\">\n<tbody>\n<tr>\n<td style=\"width: 123px;\"><strong>Radioactive substances</strong></td>\n<td style=\"width: 95.4546px;\"><strong>Half life</strong></td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>99m</sup>Tc</td>\n<td style=\"width: 95.4546px;\">6 hours</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>123</sup>I</td>\n<td style=\"width: 95.4546px;\">13.2 hours</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>125</sup>I</td>\n<td style=\"width: 95.4546px;\">60 days</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>131</sup>I</td>\n<td style=\"width: 95.4546px;\">8 days</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>111</sup>In</td>\n<td style=\"width: 95.4546px;\">2.8 days</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>127</sup>Xe</td>\n<td style=\"width: 95.4546px;\">36.4 days</td>\n</tr>\n<tr>\n<td style=\"width: 123px;\"><sup>133</sup>Xe</td>\n<td style=\"width: 95.4546px;\">5.3 days</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most commonly used active ingredient of an X-ray film?",
    "choices": [
      {
        "id": 1,
        "text": "Silver chloride"
      },
      {
        "id": 2,
        "text": "Silver bromide"
      },
      {
        "id": 3,
        "text": "Silver nitrate"
      },
      {
        "id": 4,
        "text": "Silver fluoride"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>An X-ray film is coated with a photosensitive emulsion on both sides, most commonly <strong>silver bromide.</strong></p>\n<p>Apart from silver bromide, silver iodide is also used. In <strong>routine</strong> films, <strong>both sides</strong> are coated, whereas, in <strong>mammography,</strong> only <strong>one side</strong> of the film is coated.</p>\n<p>Note: X-ray films are most sensitive to blue light and least sensitive to red light. So, the safe light used in the darkroom is a <strong>red light.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Functional MRI was done for a stroke patient. What is the principle behind this investigation?",
    "choices": [
      {
        "id": 1,
        "text": "BOLD technique"
      },
      {
        "id": 2,
        "text": "Time of fight technique"
      },
      {
        "id": 3,
        "text": "Brownian motion"
      },
      {
        "id": 4,
        "text": "Diffusion of water molecules"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Functional MRI is based on the technique called <strong>BOLD</strong> i.e., <strong>blood oxygen level-dependent technique.</strong></p>\n<p>During a particular <strong>activity</strong>, the corresponding brain area will have <strong>increased oxygen consumption</strong>. Thus, this type of MRI helps in the detection of functions of different brain parts.</p>\n<table style=\"height: 176px; width: 417px;\">\n<tbody>\n<tr>\n<td style=\"width: 173.672px;\"><strong>Types of MRI</strong></td>\n<td style=\"width: 227.328px;\"><strong>Principle</strong></td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Functional MRI</td>\n<td style=\"width: 227.328px;\">Blood oxygen level-dependent (BOLD) technique</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Diffusion tensor MRI</td>\n<td style=\"width: 227.328px;\">Diffusion of water molecules</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">MR angiography</td>\n<td style=\"width: 227.328px;\">Time of flight (TOF)</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Diffusion-weighted MRI (DWI)</td>\n<td style=\"width: 227.328px;\">Brownian motion</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not included in the 4 R\u2019s of radiotherapy?",
    "choices": [
      {
        "id": 1,
        "text": "Reoxygenation"
      },
      {
        "id": 2,
        "text": "Reduction"
      },
      {
        "id": 3,
        "text": "Repopulation"
      },
      {
        "id": 4,
        "text": "Repair"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Reduction is not a part of the 4 Rs of radiotherapy.\u00a0</p>\n<p>The <strong>success or failure</strong> of standard clinical <strong>radiation treatment</strong> is determined by the<strong> 4 R\u2019s</strong> of radiobiology. These are described below:</p>\n<ol>\n<li><strong>Repair -\u00a0</strong>cellular recovery occurs a few hours after exposure.\u00a0</li>\n<li><strong>Reoxygenation</strong> - In a tumour, the radioresistant hypoxic cells will selectively survive after a dose fraction, but thereafter, when their oxygen supply improves, their radiosensitivity will increase.</li>\n<li><strong>Reassortment -\u00a0</strong>Cells that survive the first dose of radiation will tend to be in a resistant phase of the cell cycle. Within a few hours, they may progress into a more radiosensitive phase.</li>\n<li><strong>Repopulation -</strong>\u00a0During a 4 to 6-week course of radiotherapy, tumour cells that survive irradiation may proliferate and thus increase the number of cells which must be killed.</li>\n</ol>\n<p><strong>Radiosensitivity,</strong> often known as the <strong>\"fifth R,\"</strong> varies depending on the tissues and tumors involved.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man complains of right hip pain while walking up the stairs. He has been on long-term steroid therapy for rheumatoid arthritis. Physical examination and radiograph of the hip are unremarkable. What is the best imaging modality for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "MRI scan"
      },
      {
        "id": 2,
        "text": "CT scan"
      },
      {
        "id": 3,
        "text": "Bone scan"
      },
      {
        "id": 4,
        "text": "PET scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario of a patient with hip pain on chronic glucocorticoid therapy, with non-significant findings on radiographs and exam, is suggestive of avascular necrosis (<strong>AVN</strong>) of the <strong>femoral head. </strong>The best imaging modality for this is <strong>MRI</strong>.</p>\n<p><strong>Long-term steroid</strong> usage is a risk factor for the development of AVN.\u00a0MRI allows the identification of avascular necrosis of the femoral head in earlier stages and also helps determine the exact stage and extent of the pathologic process.</p>\n<p>The X-ray below shows flattening of the femoral head and degenerative changes associated with osteonecrosis or AVN.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a7c6680d38048fd850c612eca6e1838x594x790.JPEG"
    ]
  },
  {
    "text": "Milkman\u2019s lines are found in",
    "choices": [
      {
        "id": 1,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 2,
        "text": "Osteoporosis"
      },
      {
        "id": 3,
        "text": "Osteomalacia"
      },
      {
        "id": 4,
        "text": "Pagets disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Milkman&rsquo;s lines or looser&rsquo;s zone are seen in <strong>osteomalacia.</strong></p>\n<p>This is a <strong>narrow zone of lucency, usually running perpendicular or nearly perpendicular</strong> to the bone cortex</p>\n<p>They are generally accepted as <strong>occurring at sites of stress as subclinical stress</strong> fractures that are repaired by unossified osteoid</p>\n<p>They are frequently bilateral and symmetrical, and occur at regular sites such as the <strong>pubic rami, proximal femur, scapula, lower ribs and ulna.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common organism responsible for the given condition is",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Klebsiella pneumoniae"
      },
      {
        "id": 3,
        "text": "Pneumocystis carinii"
      },
      {
        "id": 4,
        "text": "RSV"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above-given image shows <strong>pneumatocele </strong>which is usually air-filled cystic space present in the lung and&nbsp;the most common organism causing pneumtocele is <strong>Staphylococcus aureus.&nbsp;</strong>Other causes are <strong>Klebsiella pnemoniae</strong>, <strong>kerosene poisoning,</strong> <strong>and Pneumocystis carinii</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8174c6bf427e495e9160f6887bc9f130.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man presented to the outpatient department with dysphagia. Barium swallow was done and it showed the following finding in the lower end of the esophagus. The most probable cause is",
    "choices": [
      {
        "id": 1,
        "text": "Achalasia cardia"
      },
      {
        "id": 2,
        "text": "Gastroesophageal reflux disease"
      },
      {
        "id": 3,
        "text": "Schatzki ring"
      },
      {
        "id": 4,
        "text": "Foreign body"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most probable diagnosis, in this case, is<strong>&nbsp;<strong>Schatzki&rsquo;s ring.</strong></strong></p>\n<p>Schatzki&rsquo;s ring is a <strong>thin submucosal circumferential ring</strong> in the lower esophagus at the squamocolumnar junction. It is often associated with hiatal hernia. The patient experiences brief episodes of dysphagia during hurried ingestion of solid foods.</p>\n<p>The <strong>presence of a ring&nbsp;</strong>in the esophagus, with or without hiatal hernia, can be visualized on <strong>barium swallow.</strong></p>\n<p>Treatment:</p>\n<p>For symptomatic patients who do not have reflux, the best form of treatment consists of <strong>esophageal dilation </strong>for relief of the obstructive symptoms. In patients who have proven reflux and a mechanically defective sphincter, <strong>an antireflux procedure</strong> is done to obtain relief and avoid repeated dilation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f7fa6a5290394bf6b68c11c0fe83a337.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The below IVU shows",
    "choices": [
      {
        "id": 1,
        "text": "Supernumerary kidney"
      },
      {
        "id": 2,
        "text": "Horse shoe kidney"
      },
      {
        "id": 3,
        "text": "Duplicated ureter"
      },
      {
        "id": 4,
        "text": "Posterior urethral valve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The above image shows duplicated ureter</li>\n<li><strong>Duplicated ureter</strong>&nbsp;or&nbsp;<strong>Duplex</strong>&nbsp;Collecting System is a congenital condition in which the&nbsp;<strong>ureteric</strong>&nbsp;bud, the embryological origin of the <strong>ureter</strong>, splits (or arises twice), resulting in two&nbsp;<strong>ureters</strong>&nbsp;draining a single kidney.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9f1123ae4b504a65bbd6bf123b4b532e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Earliest time to detect intrauterine gestational sac by transvaginal ultrasound is by",
    "choices": [
      {
        "id": 1,
        "text": "4 weeks"
      },
      {
        "id": 2,
        "text": "5 weeks"
      },
      {
        "id": 3,
        "text": "6 weeks"
      },
      {
        "id": 4,
        "text": "5.5 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>An intraunterine gestational sac is reliably visualized with transvaginal sonography <strong>by 5 weeks</strong> and an embryo with cardiac activity by 6 weeks.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "SI unit of absorbed dose is",
    "choices": [
      {
        "id": 1,
        "text": "Rad"
      },
      {
        "id": 2,
        "text": "Gray"
      },
      {
        "id": 3,
        "text": "Roentgen"
      },
      {
        "id": 4,
        "text": "Rem"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Absorbed dose</strong>&nbsp;is a physical dose quantity&nbsp;<em>D</em>&nbsp;representing the mean energy imparted to&nbsp;matter&nbsp;per unit mass by&nbsp;ionizing radiation and its <strong>SI unit is Gray (Gy)</strong> and conventional unit is <strong>rad</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman came with complaints of breast pain following surgery. Her MRI is shown below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Extra-capsular silicone rupture"
      },
      {
        "id": 2,
        "text": "Contracture and calcification"
      },
      {
        "id": 3,
        "text": "Intra-capsular silicone rupture"
      },
      {
        "id": 4,
        "text": "Breast abscess"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows curvilinear hypointense lines (arrows) in the left breast implant indicative of the collapsed shell floating in the silicone gel. This is called the<strong> linguini sign</strong>&nbsp;that is seen in&nbsp;<strong>intra-capsular rupture&nbsp;of a breast implant. </strong></p>\n<p>After implantation of a silicone or saline&nbsp;breast implant, a fibrous capsule (scar) forms around the implant shell. In an intracapsular rupture, the contents of the implant are contained by the fibrous scar, while the shell appears as a group of wavy lines.</p>\n<p>Multiple hyperintense foci on T2-weighted images are sometimes found within the implant lumen. These findings are referred to as the <strong>salad oil sign</strong>&nbsp;or <strong>droplet sign</strong>.</p>\n<p>Indications for <strong>breast MRI</strong>:</p>\n<ul>\n<li>Screening for DCIS in <strong>high-risk</strong> patients</li>\n<li>Evaluation of breast <strong>implants</strong></li>\n<li>Evaluation of breast scar tissue versus recurrent tumors.</li>\n</ul>\n<p>Ultrasound is the preferred modality of imaging in suspected cases of extracapsular rupture. The <strong>s</strong><strong>nowstorm sign </strong>on USG&nbsp;is seen in&nbsp;<strong>extracapsular</strong>&nbsp;rupture.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b4174e5fc354c13ae605f2665d97d0d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The contrast material used in the diagnosis of esophageal atresia is _____",
    "choices": [
      {
        "id": 1,
        "text": "Gastrograffin"
      },
      {
        "id": 2,
        "text": "Conray 420"
      },
      {
        "id": 3,
        "text": "Dianosil"
      },
      {
        "id": 4,
        "text": "Urograffin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Dianosil</strong> is the contrast media used in esophageal atresia, as it does not cause chemical pneumonitis.</p>\n<p>In general, contrast media having <strong>low osmolarity</strong> (eg: iohexol) is <strong>safer than</strong> contrast media having <strong>high osmolarity</strong> (eg: gastrograffin, conray 420). However, in special cases of oesophageal atresia, tracheoesophageal fistula or for bronchoscopy, dianosol has been traditionally used.&nbsp;It is a unique lipid-based contrast that has been proven to be safe even if it enters the tracheobronchial tree. But practically it is not used nowadays.</p>\n<p>The order of preference for contrast media is as follows - Iohexol &gt; Dianosol &gt; Gastrograffin</p>\n<p>Below image shows double contrast barium enema.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/006e024c26a044f187f3b6bbca5a1d0bx387x450.JPEG"
    ]
  },
  {
    "text": "What was the first isotope used for radiotherapy?",
    "choices": [
      {
        "id": 1,
        "text": "Radium 226"
      },
      {
        "id": 2,
        "text": "Iridium 192"
      },
      {
        "id": 3,
        "text": "Cesium 137"
      },
      {
        "id": 4,
        "text": "Iodine 131"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Radium 226</strong> was&nbsp;the <strong>first</strong> isotope used in <strong>radiotherapy</strong></p>\n<p>It decays to release radon which is a radioactive gas. Its use has been discontinued due to it being a potential risk factor for lung carcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged smoker presented with burning epigastric pain. A barium meal was done and showed the following finding. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Benign gastric ulcer"
      },
      {
        "id": 2,
        "text": "Malignant gastric ulcer"
      },
      {
        "id": 3,
        "text": "Benign duodenal ulcer"
      },
      {
        "id": 4,
        "text": "Malignant duodenal ulcer"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario along with the barium study showing the <strong>Hampton line</strong> is suggestive of a<strong> benign gastric ulcer</strong>.</p>\n<p>The\u00a0<strong>Hampton</strong> <strong>line\u00a0</strong>is a thin millimetric radiolucent line seen at the neck of a\u00a0gastric ulcer\u00a0in barium studies, indicating its benign nature. It is caused by a thin line of mucosa overhanging the ulcer's crater.\u00a0</p>\n<p>The below image shows a single-contrast upper GI barium study showing a <strong>typical benign gastric ulcer</strong>. It shows a central crater surrounded by smooth, symmetric folds resulting in a<strong> spoke-wheel pattern</strong>. A surrounding mound of edema may be seen.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bbe524b699554893acbec328d671f543.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0a86c2443677448f934f5f1bbbebf259x405x441.PNG"
    ]
  },
  {
    "text": "The condition is seen in all except:",
    "choices": [
      {
        "id": 1,
        "text": "Hypoparathyroidism"
      },
      {
        "id": 2,
        "text": "Pseudohypoparathyroidism"
      },
      {
        "id": 3,
        "text": "Pseudopseudohypoparathyroidism"
      },
      {
        "id": 4,
        "text": "Turner\u2019s syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above radiologicalimage shows a short 4<span style=\"font-size: 8pt;\"><sup>th</sup></span> metacarpal.</p>\n<p><strong>Causes of short 4<span style=\"font-size: 8pt;\"><sup>th</sup></span> metacarpal:</strong></p>\n<ul>\n<li>Pseudohypoparathyroidism</li>\n<li>Pseudopseudohypoparathyroidism</li>\n<li>Turner&rsquo;s syndrome</li>\n<li>Idiopathic</li>\n<li>Post infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8b0233e96eff4258a23d259ea2444baa.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Best imaging modality in patient with breast implant is",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "USG"
      },
      {
        "id": 3,
        "text": "CT"
      },
      {
        "id": 4,
        "text": "Radionuclide scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>MRI is the most sensitive technique for the assessment of implants</strong> and should be used if mammography and ultrasound are non-diagnostic or equivocal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Coffee bean appearance is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Intussusception"
      },
      {
        "id": 2,
        "text": "Bowel Ischemia"
      },
      {
        "id": 3,
        "text": "Sigmoid Volvulus"
      },
      {
        "id": 4,
        "text": "Congenital hypertrophic pyloric stenosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Sigmoid volvulus produces a characteristic <strong>bent inner tube or coffee bean appearance</strong>, with the <strong>convexity of the loop lying in the right upper quadrant</strong> (opposite the site of obstruction). <strong>Gastrografin </strong>enema shows a narrowing at the site of the volvulus and a <strong>pathognomonic bird&rsquo;s beak</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was brought to emergency department following road traffic accident. On examination he was unconscious and had features of raised intracranial pressure. CT brain showed Biconvex shaped hyperdense lesion. The most common source of bleed is",
    "choices": [
      {
        "id": 1,
        "text": "Bridging veins"
      },
      {
        "id": 2,
        "text": "Middle meningeal artery"
      },
      {
        "id": 3,
        "text": "Berry aneuryms"
      },
      {
        "id": 4,
        "text": "Hypertension"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Biconvex shaped hyperdense lesion</strong> on CT is suggestive of <strong>acute epidural hematoma </strong>and the most common cause of <strong>epidural hematoma is due to the rupture of middle meningeal artery.</strong></p>\n<p>&nbsp;<strong>Note: </strong></p>\n<p>Acute bleed appears <strong>hyperdense on CT, subacute appears hypodense and chronic hematoma appears as hypodense on CT scan</strong></p>\n<p><strong>Shape:</strong></p>\n<ul>\n<li><strong>Lentiform: </strong>EDH</li>\n<li><strong>Lunate shape crescent shape:</strong> SDH</li>\n<li><strong>SAH:</strong> Blood in CSF</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Nuchal translucency, to screen aneuploidy is done at which week?",
    "choices": [
      {
        "id": 1,
        "text": "6-8 weeks"
      },
      {
        "id": 2,
        "text": "11-14 weeks"
      },
      {
        "id": 3,
        "text": "17-20 weeks"
      },
      {
        "id": 4,
        "text": "20-22 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Nuchal translucency evaluation is done in between <strong>11-14weeks</strong> for the aneuploidy screening</li>\n<li>It is done in <strong>sagittal plane</strong></li>\n<li>When the <strong>nuchal translucency is increased </strong>the risk <strong>for fetal aneuploidy and various fetal anomalies like heart defects</strong> is significantly increased.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following appears brighter than normal tissues on both USG and CT imaging",
    "choices": [
      {
        "id": 1,
        "text": "Fat"
      },
      {
        "id": 2,
        "text": "Calculus"
      },
      {
        "id": 3,
        "text": "Clear Fluid"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Calculus appears bright on both </strong>on ultrasound and CT imaging. In USG it also shows <strong>posterior acoustic shadowing</strong> as it reflects all the ultrasound waves coming to it</li>\n<li>Fat appears bright on USG but in CT scan since the Hounsfield units of fat is around <strong>-100</strong> it appears <strong>less bright compared to normal tissues</strong></li>\n<li><strong>Clear fluid appears black on USG with posterior acoustic enhancement</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the best plane for the measurement of volume of hippocampus?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The best plane for measurement of the <strong>volume of the hippocampus</strong> is the <strong>coronal plane, angled perpendicular to the long axis of the hippocampus </strong>in<strong> MRI,</strong> which is represented by the image marked B.<br /><br /></p>\n<p>Coronal MRI is taken perpendicular to the long axis of the temporal horn can be used to measure:</p>\n<ul>\n<li>Volume of hippocampus - measured in <strong>Alzheimer's</strong> disease and <strong>medial temporal seizures</strong></li>\n<li><strong>Medial temporal lobe atrophy</strong> (MTA)</li>\n</ul>\n<p>The planes of MRI are given below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/01f8fa613e1e4e7ab159edee5ad571a0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fd7ffd78af74626a77ce253d45060f2x1280x4062.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf2ec49040674c66b3d3f7f3f01e7688x1280x1423.JPEG"
    ]
  },
  {
    "text": "Which of the following is true regarding PET scans?",
    "choices": [
      {
        "id": 1,
        "text": "It uses gamma emitting radioisotope"
      },
      {
        "id": 2,
        "text": "It is used for 2D image reproduction"
      },
      {
        "id": 3,
        "text": "Lead collimators are used"
      },
      {
        "id": 4,
        "text": "It can be used for hybrid imaging"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>PET\u00a0</strong>or\u00a0positron emission tomography\u00a0is a nuclear medicine imaging technique that can be used for <strong>hybrid imaging</strong>. That is, it can be <strong>combined with</strong> <strong>CT</strong> to allow a correlation between the metabolic information (PET) and the cross-sectional anatomic information (CT).</p>\n<p>PET scanning measures the uptake of <strong>positron-emitting radioisotopes</strong> in the body, allowing us to visualize the\u00a0<strong>functional processes</strong> of the body. <strong>3D images</strong> of tracer concentration within the body are then constructed by computer analysis. Hence, it provides metabolic and functional information, unlike CT and MRI, as it is\u00a0based on the principle that tumor cells generally have <strong>high metabolic activity</strong> compared with normal tissues.</p>\n<p>A glucose analogue called <strong>fluorodeoxyglucose (FDG)</strong> is used in PET imaging. FDG is taken up by metabolically active cells, where it undergoes phosphorylation to form <strong>FDG-6-phosphate.</strong> Unlike glucose, FDG-6-phosphate cannot undergo further metabolism and becomes<strong> trapped</strong> within the cell and this is detected by the PET scanner.</p>\n<p>Single-photon emission computed tomography <strong>(SPECT)</strong>\u00a0is\u00a0another similar imaging technique.</p>\n<table style=\"width: 21.5054%; height: 327.383px;\">\n<tbody>\n<tr style=\"height: 54.3984px;\">\n<td style=\"text-align: center; width: 49.2355%; height: 54.3984px;\" width=\"147\">\n<p><strong>PET</strong></p>\n</td>\n<td style=\"text-align: center; width: 50.7645%; height: 54.3984px;\" width=\"152\">\n<p><strong>SPECT</strong></p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 49.2355%; height: 54.3984px;\" width=\"147\">\n<p>Very expensive</p>\n</td>\n<td style=\"width: 50.7645%; height: 54.3984px;\" width=\"152\">\n<p>Lower cost</p>\n</td>\n</tr>\n<tr style=\"height: 151.391px;\">\n<td style=\"width: 49.2355%; height: 151.391px;\" width=\"147\">\n<p>Uses <strong>positron</strong>-emitting radioisotope (tracer) like <sup><strong>18</strong></sup><strong>F-FDG</strong></p>\n</td>\n<td style=\"width: 50.7645%; height: 151.391px;\" width=\"152\">\n<p>Uses <strong>gamma</strong>-emitting radioisotopes (tracer) such as\u00a0<strong>Tc-99m,\u00a0</strong>I-123,\u00a0I-131</p>\n</td>\n</tr>\n<tr style=\"height: 67.1953px;\">\n<td style=\"width: 49.2355%; height: 67.1953px;\" width=\"147\">\u00a0Better contrast and spatial resolution</td>\n<td style=\"width: 50.7645%; height: 67.1953px;\" width=\"152\">\u00a0Less contrast and spatial resolution</td>\n</tr>\n</tbody>\n</table>\n<p>The below imaging modality is a PET CT scan.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fe0d4b182d584796931ff29f00ff66d2x720x1267.PNG"
    ]
  },
  {
    "text": "Which of the following findings are you unlikely to see in a patient with achondroplasia?",
    "choices": [
      {
        "id": 1,
        "text": "Bullet nose shaped vertebra"
      },
      {
        "id": 2,
        "text": "Chevron sign in the epiphysis"
      },
      {
        "id": 3,
        "text": "Trident hand"
      },
      {
        "id": 4,
        "text": "Tomb stone appearance of acetabula"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Squaring of the&nbsp;<strong>iliac blades</strong>&nbsp;and not the acetabula give a&nbsp;<strong>tombstone </strong>appearance in achondroplasia.</p>\n<p>Other&nbsp;<strong>radiological findings</strong> seen in <strong>achondroplasia</strong> include:</p>\n<ul>\n<li>Large skull with -\n<ul>\n<li>Prominent forehead</li>\n<li>Depressed nasal bridge</li>\n<li>Small foramen magnum that is funnel-shaped</li>\n</ul>\n</li>\n<li>The epiphyses have V-shaped distal ends with deep intercondylar notches&mdash;the <strong>&lsquo;chevron&rsquo; sign</strong></li>\n<li>Bullet nose vertebrae with posterior scalloping</li>\n<li><strong>Trident hand&nbsp;</strong>(as shown below)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/958cd72dea744dbb9d416ad735996cc7x1064x3981.JPEG"
    ]
  },
  {
    "text": "The following investigation was performed in a patient with postmenopausal bleeding. Which of the following is false about the same?",
    "choices": [
      {
        "id": 1,
        "text": "Bladder should be full"
      },
      {
        "id": 2,
        "text": "A condom is placed over the probe"
      },
      {
        "id": 3,
        "text": "It provides higher resolution images"
      },
      {
        "id": 4,
        "text": "Endometrial thickness can be measured"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image demonstrates\u00a0<strong>transvaginal ultrasonography</strong>. The <strong>bladder</strong> should be <strong>empty</strong> and not full, for transvaginal USG (TVS) to allow visualisation of other structures.</p>\n<p>A condom is placed on the transducer before the TVS transducer is inserted into the vagina. It provides higher-resolution images compared to transabdominal USG because of the proximity to the pelvic organs.\u00a0During a<strong> transabdominal ultrasound</strong>, the bladder should be full to create a good echo window.</p>\n<p><strong>Indications</strong> of TVS include early pregnancy, LUS in late pregnancy, ectopic, pelvic masses, obese patients, follicular and endometrial studies, doppler examination of pelvic organs and interventional procedures.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/df04cd3749964c11bce5fdc1236321b7.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30 year old woman had a trauma to the hand 1 month back. Now she complains of severe pain and swelling in the affected hand. On examination the hand is warm The radiological image of the hand is given below. The most likely cause is",
    "choices": [
      {
        "id": 1,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 2,
        "text": "Sudeck\u2019s atrophy"
      },
      {
        "id": 3,
        "text": "Fracture of third metacarpal"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario is suggestive of <strong>Sudeck&rsquo;s atrophy</strong>.<strong>&nbsp;</strong>This is a rare condition in which, <strong>following injury to a limb, intense pain and swelling occur, resulting in severe disuse osteoporosis.</strong></p>\n<p>Interestingly, <strong>the initial injury may be relatively minor</strong>; the effects however are dramatic, with loss of function which is often protracted.</p>\n<p><strong>An associated neurovascular reaction may be present</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4130b757fc514071b06f2cb9c29e3401.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Among the following signs which is not related to Pulmonary embolism?",
    "choices": [
      {
        "id": 1,
        "text": "Westermark\u2019s sign"
      },
      {
        "id": 2,
        "text": "Palla\u2019s sign"
      },
      {
        "id": 3,
        "text": "Hampton\u2019s hump"
      },
      {
        "id": 4,
        "text": "Air crescent sign"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Air crescent sign is seen in invasive aspergillosis&nbsp;</strong>(and not in pulmonary embolism).</p>\n<p>The radiological signs found in Pulmonary embolism are</p>\n<ul>\n<li><strong>Westermark&rsquo;s sign</strong>: Focal oligemia</li>\n<li><strong>Hampton&rsquo;s hump:</strong> Peripheral wedge shaped density above the diaphragm</li>\n<li><strong>Palla&rsquo;s sign</strong> : enlarged large descending pulmonary artery</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most sensitive investigation for the diagnosis of pheochromocytoma is",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "MIBG scan"
      },
      {
        "id": 3,
        "text": "CT"
      },
      {
        "id": 4,
        "text": "Sestamibi scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>MRI scans </strong>are 95% sensitive and almost 100% specific for pheochromocytomas because these tumors have a characteristic appearance on T2-weighted images or after gadolinium.</p>\n<p>MRI is also the <strong>study of choice in pregnant women as there is no risk of radiation exposure</strong>.</p>\n<p><strong>Metaiodobenzylguanidine (MIBG)</strong> is taken up and concentrated by vesicles in the adrenal medullar cells because its structure is similar to <strong>norepinephrine</strong>. Normal adrenal medullary tissue does not take up appreciable MIBG. 131I-radiolabeled MIBG is, therefore, useful for localizing pheochromocytomas especially those in ectopic positions. This test has a reported sensitivity <strong>of 77% to 89% and specificity ranging from 88% to 100%.<br /><br /><br />Note:&nbsp;</strong>Pheochromocytomas are diagnosed by testing 24-hour urine samples for catecholamines and their metabolites and by determining plasma metanephrine levels. <strong>Radiologic studies</strong> are useful to localize tumors and to assess the extent of spread once the diagnosis has been made with biochemical tests.</p>\n<div class=\"page\" title=\"Page 1613\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>However out of the given options, MRI is the best possible answer.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On a CT scan, intracranial calcifications seen in all of the following structures are considered normal in the elderly population, except ___________.",
    "choices": [
      {
        "id": 1,
        "text": "Habenula"
      },
      {
        "id": 2,
        "text": "Pineal gland"
      },
      {
        "id": 3,
        "text": "Pituitary gland"
      },
      {
        "id": 4,
        "text": "Red nucleus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>red nucleus</strong> is not a usual site&nbsp;of normal intracranial calcification.</p>\n<p>Sites of normal intracranial calcification, visible on CT scan are:</p>\n<ul>\n<li>Pineal</li>\n<li>Habenula</li>\n<li>Choroid plexuses</li>\n<li>Dura (falx; tentorium; over vault)</li>\n<li>Ligaments (petroclinoid and interclinoid)</li>\n<li>Pacchionian bodies</li>\n<li>Basal ganglia and dentate nuclei</li>\n<li>Pituitary gland</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True statement regarding Iodine 131 is all except",
    "choices": [
      {
        "id": 1,
        "text": "Emits alpha rays"
      },
      {
        "id": 2,
        "text": "Emits beta rays"
      },
      {
        "id": 3,
        "text": "Emits gamma rays"
      },
      {
        "id": 4,
        "text": "Contraindicated in pregnancy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>I-131</strong> emits <strong>beta and gamma rays</strong>&nbsp;( and not alpha rays)</li>\n<li>It is <strong>contraindicated in pregnancy</strong></li>\n<li>It is used in <strong>radio-ablation of thyroid.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Exit window used in mammography is made up of",
    "choices": [
      {
        "id": 1,
        "text": "Molybdenum"
      },
      {
        "id": 2,
        "text": "Aluminum"
      },
      {
        "id": 3,
        "text": "Glass"
      },
      {
        "id": 4,
        "text": "Beryllium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most mammography tubes <strong>use beryllium exit windows</strong> between the evacuated tube and the atmosphere</p>\n<p>Difference in mammogram to that of normal radiograph</p>\n<ul>\n<li>It uses <strong>low energy and high amperage waves</strong></li>\n<li>It has <strong>Molybdenum target</strong></li>\n<li>The <strong>filter</strong> is made up of <strong>molybdenum</strong></li>\n<li>It has <strong>single screen cassette</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following uses the time of flight principle to visualise the blood flow in vessels?",
    "choices": [
      {
        "id": 1,
        "text": "Spiral CT"
      },
      {
        "id": 2,
        "text": "MR imaging"
      },
      {
        "id": 3,
        "text": "CT angiography"
      },
      {
        "id": 4,
        "text": "Colour doppler"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>time-of-flight</strong> (TOF) principle is best employed in <strong>M</strong><strong>agnetic Resonance Angiography. </strong></p>\n<p>TOF angiographic technique is based on the difference between the high signal of blood flowing into an imaging slice and reduced signal from the stationary background tissue.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While performing a PET-CT scan, uptake in which of the following areas is likely to be a false positive?",
    "choices": [
      {
        "id": 1,
        "text": "Urinary bladder"
      },
      {
        "id": 2,
        "text": "Testes"
      },
      {
        "id": 3,
        "text": "Pancreas"
      },
      {
        "id": 4,
        "text": "Lymph nodes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>On 18F-FDG <strong>PET-CT</strong> scan, the<strong> urinary bladder</strong> shows normal physiological uptake and\u00a0is a <strong>potential</strong> source of <strong>false-positive </strong>in oncologic imaging.\u00a0</p>\n<p>The following are areas of <strong>normal physiological uptake</strong> on PET CT:</p>\n<ul>\n<li>Brain tissue</li>\n<li>Skeletal muscle, especially after strenuous activity and laryngeal muscles following speech</li>\n<li>Myocardium</li>\n<li>Gastrointestinal tract - intestinal wall</li>\n<li>Genitourinary tract - as FDG is excreted via the renal system and passes into the collecting systems</li>\n<li>Brown fat - FDG accumulates here as glucose and ATP are required for heat production</li>\n<li>Thymus</li>\n<li>Bone marrow</li>\n</ul>\n<p>The following image shows supraclavicular uptake on a PET scan, due to the presence of brown adipose tissue.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa0e461783e34c3ca1afd3412feeadf3x512x130.PNG"
    ]
  },
  {
    "text": "A 7-year-old child is brought to the clinic for evaluation of kyphoscoliosis. On examination, he is noted to have blue sclera. A radiograph of his long bones shows multiple diaphyseal fractures. Which of the following is not true about his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Type 1 of the disease is most lethal"
      },
      {
        "id": 2,
        "text": "Skull may have Wormian bones"
      },
      {
        "id": 3,
        "text": "Can be associated with autosomal dominant inheritance"
      },
      {
        "id": 4,
        "text": "Battered baby syndrome is a differential diagnosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical features are suggestive of <strong>osteogenesis imperfecta</strong>.\u00a0<strong>Type 2 </strong>osteogenesis imperfecta\u00a0is the<strong> most lethal </strong>type.</p>\n<p><strong>Radiological features </strong>of osteogenesis imperfecta include:</p>\n<ul>\n<li><strong>Multiple diaphyseal fractures</strong>\u00a0of long bones with various stages\u00a0can be seen</li>\n<li>A radiograph of the skull shows <strong>wormian bones </strong>or<strong>\u00a0</strong>intrasutural bone ossicles\u00a0</li>\n</ul>\n<p>As battered baby syndrome can present with multiple fractures secondary to abuse, it is a common differential diagnosis for osteogenesis imperfecta. However, the region affected is the <strong>metaphyses</strong> of long bones, unlike osteogenesis imperfecta where diaphysis is involved.\u00a0</p>\n<p>A Wormian bone (intrasutural bone) in the skull is shown below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e4e55fcbde7942779bd60229d2df1f1ax498x626.JPEG"
    ]
  },
  {
    "text": "The contrast-enhanced CT abdomen of a 50-year-old woman shows the following finding. Which of the following classifications would you use to assess the severity of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Jackson staging"
      },
      {
        "id": 2,
        "text": "Bosniak classification"
      },
      {
        "id": 3,
        "text": "Durie-Salmon staging"
      },
      {
        "id": 4,
        "text": "Todani classification"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given CT image shows a simple <strong>renal cyst</strong>. The\u00a0<strong>Bosniak classification</strong> system is used for the classification of\u00a0renal cystic masses based on characteristics seen on\u00a0<strong>contrast-enhanced CT</strong>.\u00a0It is helpful in predicting malignancy risk and formulating a management plan.</p>\n<table style=\"height: 850.351px; width: 387px;\">\n<tbody>\n<tr style=\"height: 44.7969px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 44.7969px;\"><strong>Bosniak class</strong></td>\n<td style=\"width: 138.406px; text-align: center; height: 44.7969px;\"><strong>Appearance</strong></td>\n<td style=\"width: 115.93px; text-align: center; height: 44.7969px;\"><strong>Malignancy</strong></td>\n<td style=\"width: 114.133px; text-align: center; height: 44.7969px;\"><strong>Management</strong></td>\n</tr>\n<tr style=\"height: 115.195px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 115.195px;\">\u00a01</td>\n<td style=\"width: 138.406px; height: 115.195px;\">\n<p>Simple cyst :\u00a0</p>\n<p>Rounded with imperceptible wall</p>\n</td>\n<td style=\"width: 115.93px; height: 115.195px;\">Not malignant</td>\n<td style=\"width: 114.133px; height: 115.195px;\">No further workup required</td>\n</tr>\n<tr style=\"height: 175.992px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 175.992px;\">2</td>\n<td style=\"width: 138.406px; height: 175.992px;\">\n<p>Minimally complex:\u00a0</p>\n<ul>\n<li>Size &lt;1 mm with septa, thin\u00a0calcifications</li>\n</ul>\n<p>\u00a0</p>\n</td>\n<td style=\"width: 115.93px; height: 175.992px;\">Not malignant</td>\n<td style=\"width: 114.133px; height: 175.992px;\">No further workup required</td>\n</tr>\n<tr style=\"height: 227.188px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 227.188px;\">2F</td>\n<td style=\"width: 138.406px; height: 227.188px;\">\n<p>Minimally complex:</p>\n<ul>\n<li>Size &gt;3 cm</li>\n<li>Increased number of septa</li>\n<li>Minimally thickened with nodular/thick calcifications</li>\n</ul>\n</td>\n<td style=\"width: 115.93px; height: 227.188px;\">5% chance\u00a0</td>\n<td style=\"width: 114.133px; height: 227.188px;\">Ultrasound/CT follow-up every 6 months</td>\n</tr>\n<tr style=\"height: 271.984px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 271.984px;\">3</td>\n<td style=\"width: 138.406px; height: 271.984px;\">\n<p>Indeterminate:</p>\n<ul>\n<li>Complicated cysts, thickened septa</li>\n<li>Nodular calcification/solid non-enhancing areas (appears hyperdense on CT)</li>\n</ul>\n</td>\n<td style=\"width: 115.93px; height: 271.984px;\">55% chance</td>\n<td style=\"width: 114.133px; height: 271.984px;\">\n<p>Partial nephrectomy</p>\n<p>Radiofrequency ablation (elderly/poor surgical candidates)</p>\n</td>\n</tr>\n<tr style=\"height: 15.1953px;\">\n<td style=\"width: 61.5781px; text-align: center; height: 15.1953px;\">4</td>\n<td style=\"width: 138.406px; height: 15.1953px;\">\n<p>Solid mass with a large cystic or necrotic component</p>\n</td>\n<td style=\"width: 115.93px; height: 15.1953px;\">\n<p>Clearly malignant (100%)</p>\n</td>\n<td style=\"width: 114.133px; height: 15.1953px;\">Partial/ total nephrectomy</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3f96aaa956a6439f92ec3a7986c3c4e9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/89ed11aeaf8f4038a2534cac0454053bx1280x2560.JPEG"
    ]
  },
  {
    "text": "Identify the given image",
    "choices": [
      {
        "id": 1,
        "text": "Anterior dislocation of shoulder"
      },
      {
        "id": 2,
        "text": "Posterior dislocation of shoulder"
      },
      {
        "id": 3,
        "text": "Fracture of humerus"
      },
      {
        "id": 4,
        "text": "Bankart lesion"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The image given above <strong>shows the detachment of the bony glenoid margin</strong> at <strong>the inferior aspect</strong>. This is known as <strong>Bankart lesion</strong></li>\n<li>It is caused due to the recurrent <strong>anterior dislocation of humeral head</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dc022fe9c6524f3fa18da3ffa2ad12e6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 55 year alcoholic had repeated episodes of retching and vomiting after a meal. The patient now presents with severe sub sternal chest pain. His chest radiograph is given below. What will be the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pneumomediastinum"
      },
      {
        "id": 2,
        "text": "Pericardial effusion"
      },
      {
        "id": 3,
        "text": "Pneumothorax"
      },
      {
        "id": 4,
        "text": "Fracture of third rib"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image <strong>shows a translucent area</strong> around the heart which implies that there is <strong>air in mediastinum</strong> which is called as <strong>Pneumomediastinum.</strong></p>\n<p>The three main causes are:</p>\n<ol>\n<li><strong>alveolar rupture</strong> with dissection of air into the mediastinum</li>\n<li><strong>perforation or rupture of the esophagus</strong>, trachea, or main bronchi</li>\n<li><strong>dissection of air</strong> from the neck or the abdomen into the mediastinum</li>\n</ol>\n<p>Typically, there <strong>is severe sub sternal chest pain </strong>with or without radiation into the neck and arms. The physical examination usually reveals subcutaneous emphysema in the suprasternal notch and <strong>Hamman&rsquo;s sign,</strong> which is a crunching or clicking noise synchronous with the heartbeat and is best heard in the left lateral decubitus position.</p>\n<p>The diagnosis is confirmed with the <strong>chest radiograph. </strong></p>\n<p>Usually, no treatment is required, but the mediastinal air will be absorbed faster if the patient inspires high concentrations of oxygen.</p>\n<p>If mediastinal structures are compressed, the compression can be relieved with needle aspiration.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb7b9d7f6284429b92d3d021fbdc1782.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Peripheral nodular enhancement in arterial phase with centripetal filling  in biphasic contrast CT is",
    "choices": [
      {
        "id": 1,
        "text": "Hepatocellular carcinoma"
      },
      {
        "id": 2,
        "text": "Pseudocyst pancreas"
      },
      {
        "id": 3,
        "text": "Pheochromocytoma"
      },
      {
        "id": 4,
        "text": "Liver Hemangioma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>On biphasic contrast CT scan</strong>, large hemangiomas show <strong>asymmetrical nodular peripheral enhancement</strong> that is isodense with large vessels and exhibit <strong>progressive centripetal enhancement fill-in over time</strong>.</li>\n<li>On MRI, hemangiomas are <strong>hypointense on T1</strong>-weighted images and <strong>hyperintense on T2-weighted</strong> images.</li>\n<li>With gadolinium enhancement, <strong>hemangiomas show a pattern of peripheral nodular enhancement similar to that seen on contrast CT scans.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f3e54e60ba364e41b5ecaf9e4fc4914ex295x230.PNG"
    ]
  },
  {
    "text": "A 19-year-old boy presented with fever, cough diarrhea, seizures, and vomiting. On examination, there are signs of meningeal irritation. The MRI of the patient is given below. The most likely diagnosis is _______.",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculosis"
      },
      {
        "id": 2,
        "text": "Japanese encephalitis"
      },
      {
        "id": 3,
        "text": "Neurocysticercosis"
      },
      {
        "id": 4,
        "text": "Meningioma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The boy presented with features of <strong>meningitis</strong> and non specific features like<strong> fever cough and diarrhea. </strong></p>\n<p>The MRI T2-weighted FLAIR shows areas of<strong> hyperintensity</strong> in the <strong>bilateral thalamus, </strong>which is a feature of <strong>viral encephalitis</strong>. Hence among the following the most probable diagnosis is <strong>Japanese encephalitis.</strong></p>\n<p><strong>Other options:</strong></p>\n<ul>\n<li><strong>Tuberculosis</strong> more commonly shows <strong>basal exudates.</strong></li>\n<li><strong>Neurocysticercosis</strong> will show the presence of <strong>cysts, scolex and calcification </strong>depending on the stage of the disease.</li>\n<li><strong>Meningioma also shows calcification.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/18696bc6d6f4479a83c07f8e2744bdc2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All are true regarding PET scan except",
    "choices": [
      {
        "id": 1,
        "text": "Helps in assessment of functional status of the tissue"
      },
      {
        "id": 2,
        "text": "It is superior to CT for anatomical details"
      },
      {
        "id": 3,
        "text": "FDG is used"
      },
      {
        "id": 4,
        "text": "It poses the threat of radiation exposure to the patient"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>PET gives the <strong>functional status of the tissues and to some extent the anatomical details</strong></li>\n<li>The anatomical details of PET is <strong>inferior to that of the image obtained from CT</strong></li>\n<li>Radiopharmaceuticals used in PET along with FDG are (Rubidium) <strong><sup>82</sup>Rb, <sup>18</sup>F , <sup>15</sup>O, <sup>13</sup>N, <sup>11</sup>C</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True about MRI are all except",
    "choices": [
      {
        "id": 1,
        "text": "Not helpful in breast implant"
      },
      {
        "id": 2,
        "text": "Not good for calcified lesions"
      },
      {
        "id": 3,
        "text": "Multiple plane images"
      },
      {
        "id": 4,
        "text": "Contraindicated in cardiac pacemaker"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>MRI is the most sensitive technique for the assessment of implants</strong> and should be used if mammography and ultrasound are non-diagnostic or equivocal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient suspected to have biliary tract abnormalities undergoes the investigation shown in the image below. Identify the imaging and structure marked as A.",
    "choices": [
      {
        "id": 1,
        "text": "MRCP - Right hepatic duct"
      },
      {
        "id": 2,
        "text": "ERCP - Cystic duct"
      },
      {
        "id": 3,
        "text": "MRCP - Common bile duct"
      },
      {
        "id": 4,
        "text": "ERCP - Pancreatic duct"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image depicts a magnetic resonance cholangiopancreatography (<strong>MRCP</strong>), and the structure marked as A is the <strong>common bile duct</strong>.</p>\n<p>MRCP is a non-invasive test showing a heavy <strong>T2-weighted</strong> image. The endoscope or contrast medium is not used as bile\u00a0itself serves as a contrast medium.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f49d4ff133014d86922647ae17e93924.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ca7bc3b7b6b446c0b4f5f67f89e02230x1280x1369.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd32162a7b9b41d0972161c4995855e7x1280x1339.JPEG"
    ]
  },
  {
    "text": "A 60-year-old woman is being evaluated for severe leg and back pain. CBC shows Hb of 7 g/dl and serum creatinine is 2.3 mg/dl. A plain X-ray of her femur reveals the following.  A bone scan in this patient would likely show which of the following findings?",
    "choices": [
      {
        "id": 1,
        "text": "Hot spots"
      },
      {
        "id": 2,
        "text": "Cold spots"
      },
      {
        "id": 3,
        "text": "Diffusely increased uptake"
      },
      {
        "id": 4,
        "text": "Diffusely decreased uptake"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario and image showing multiple lytic lesions are suggestive of <strong>multiple myeloma.</strong>&nbsp;This condition&nbsp;presents with&nbsp;<strong>cold spots</strong>&nbsp;on bone scans<strong>&nbsp;</strong>as there is a&nbsp;<strong>lack of</strong>&nbsp;compensatory<strong> osteoblastic activity.</strong></p>\n<p>Multiple myelomas are the most common primary malignant bone neoplasm in adults arising from red marrow due to the monoclonal proliferation of the <strong>plasma cells.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4b11703a6d7546a298f76a1d2cc51a1b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presented with a port-wine stain over the face, and seizures. CT image is given below. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Von Hippel-Lindau disease"
      },
      {
        "id": 2,
        "text": "Neurofibromatosis 1"
      },
      {
        "id": 3,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 4,
        "text": "Sturge Weber syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>CT image given above shows <strong>calcification</strong> mainly <strong>involving left hemisphere</strong>, and the likely diagnosis is&nbsp;<strong>Sturge-Weber syndrome</strong>.</p>\n<p>It is also called&nbsp;<strong>encephalotrigeminal angiomatosis.&nbsp;</strong>It is a&nbsp;phakomatosis&nbsp;characterized by<strong> facial port-wine stains </strong>and<strong> pialangiomas</strong>.&nbsp;A port-wine stain is almost always present and usually involves the ophthalmic division (V1) of the&nbsp;<strong>trigeminal nerve.&nbsp;</strong>It is not an inherited condition.</p>\n<p>The most common clinical manifestation is <strong>childhood seizures</strong> which are refractory<strong>.&nbsp;</strong>Other features include <strong>mental retardation</strong> and <strong>focal neurological deficits</strong>. CT shows <strong>subcortical calcification</strong> in a<strong> tram-track pattern</strong> which is characteristic of the condition.</p>\n<p>The given image shows port-wine stain:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/13cddef4229e4f9495e3540065bc2096.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a502b0983ec94ce4a367630d10f22113x472x720.PNG"
    ]
  },
  {
    "text": "A 59-year-old man was referred for abdominal pain and sterile pyuria. He was diagnosed with tuberculosis 10 years ago but was non-adherent to treatment. What is the most sensitive imaging modality for his current presentation?",
    "choices": [
      {
        "id": 1,
        "text": "CT intravenous pyelogram"
      },
      {
        "id": 2,
        "text": "Bladder ultrasound"
      },
      {
        "id": 3,
        "text": "Non contrast CT"
      },
      {
        "id": 4,
        "text": "MRI"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Sterile pyuria in a patient with history of tuberculosis raises suspicion of <strong>renal tuberculosis.</strong>\u00a0The <strong>most sensitive</strong> imaging modality for diagnosing renal tuberculosis is<strong> CT Intravenous Pyelogram.</strong></p>\n<p>Renal tuberculosis occurs due to hematogenous dissemination of <em>Mycobacterium tuberculosis</em>, making it a<strong> secondary</strong> infection. There is either reinfection or reactivation of old TB. It is more common in males and typically presents with symptoms such as increased urinary frequency, polyuria, dysuria, hematuria, loin pain/suprapubic pain and sterile pyuria.\u00a0</p>\n<p>In sterile pyuria, urine appears pale and opalescent due to the presence of pus cells. Renal TB is a cause of sterile pyuria. Diagnosis is confirmed with a <strong>tuberculin test</strong>, or at least 3 consecutive <strong>early-morning urine specimens</strong> are examined for acid-fast bacilli. They are stained with a <strong>Ziehl\u2013Neelsen</strong> stain and subsequently cultured.</p>\n<p>The most sensitive imaging modality in renal tuberculosis is<strong> CT urography/pyelography</strong>. <strong>NCCT</strong> is the preferred means of visualizing <strong>renal calcifications</strong>. Manifestations of renal TB as seen on CT are as follows:</p>\n<ul>\n<li><strong>Early</strong> changes:\n<ul>\n<li>Papillary necrosis (single or multiple) and uneven caliectasis</li>\n</ul>\n</li>\n<li><strong>Progressive</strong> changes:\n<ul>\n<li>Multifocal strictures in any part of the collecting system</li>\n<li>Generalized or focal hydronephrosis</li>\n<li>Mural thickening and enhancement</li>\n<li>Poorly enhancing renal parenchyma, either due to direct involvement or due to hydronephrosis</li>\n</ul>\n</li>\n<li><strong>End-stage</strong>:\n<ul>\n<li>Progressive hydronephrosis results in very thin parenchyma, mimicking multiple thin-walled cysts</li>\n<li>Amorphous dystrophic calcification eventually involves the entire kidney (known as the putty kidney), as shown below:</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13f1eb75debd4695b8255ef673fedd82x720x737.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f984103f7cce4bbc95cdb44deb240957x1280x1703.JPEG"
    ]
  }
];
        let quizName = 'Radiology Test Ii';
        const quizFilename = 'radiology-test-ii-ab3a2817.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>