<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>269 Paediatrics Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Pediatrics
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">25</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is not seen in Kawasaki disease?",
    "choices": [
      {
        "id": 1,
        "text": "Purulent conjunctivitis"
      },
      {
        "id": 2,
        "text": "Strawberry tongue"
      },
      {
        "id": 3,
        "text": "Rash"
      },
      {
        "id": 4,
        "text": "Cervical lymphadenopathy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Diagnosis requires fever and at least<strong>\u00a0four of the five </strong>principal criteria. <strong>Myocarditis</strong> develops frequently in acute Kawasaki disease. It presents as <strong>tachycardia</strong> and<strong> reduced ventricular systolic function.</strong> The tachycardia will be disproportionate to the fever. Patients may develop <strong>coronary artery aneurysms</strong> in the 2nd to 3rd week of illness. They are generally asymptomatic and diagnosed on echocardiography. However, if large it can lead to death. Thus, echocardiography should be performed at diagnosis and after 1-2 weeks.\u00a0</p>\n<p>Treatment involves <strong>2g/kg of intravenous immunoglobulin</strong> as an infusion <strong>over 10-12 hours</strong> <strong>within 10 days of onset.</strong> Moderate to high-dose <strong>aspirin</strong> should be administered until the patient is afebrile.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/69d5ad270aca4dae8f37cad3c84fa902.JPEG"
    ]
  },
  {
    "text": "What is the ideal maintenance fluid of choice in children?",
    "choices": [
      {
        "id": 1,
        "text": "5% dextrose and N/2 saline"
      },
      {
        "id": 2,
        "text": "5% dextrose and N saline"
      },
      {
        "id": 3,
        "text": "10% dextrose and N/2 saline"
      },
      {
        "id": 4,
        "text": "5% dextrose and N/4 saline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>5% dextrose and N saline</strong> is the ideal maintenance fluid in children. \u00a0</p>\n<p>5% dextrose provides <strong>17 calories/100 mL</strong> and nearly <strong>20%</strong> of the <strong>daily caloric needs</strong>. This level is enough to <strong>prevent ketone</strong> production and helps minimise <strong>protein degradation</strong>. However, the child will lose weight on this regimen and therefore it is necessary to <strong>start enteral feeds</strong> sooner or if not possible, <strong>total parenteral nutrition</strong> is recommended.</p>\n<p>Other options:</p>\n<p><strong>Hypotonic fluids</strong> like <strong>N/2</strong> or <strong>N/4</strong> saline can increase the risk of <strong>hyponatraemia</strong> and free water movement inside RBCs, leading to <strong>haemolysis</strong>. Hence, isotonic fluids with 5% dextrose are recommended as standard maintenance fluids in children.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not seen in nutritional rickets?",
    "choices": [
      {
        "id": 1,
        "text": "Low phosphorus"
      },
      {
        "id": 2,
        "text": "Normal calcium"
      },
      {
        "id": 3,
        "text": "Urine calcium: creatinine ratio > 15"
      },
      {
        "id": 4,
        "text": "High PTH"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Urine calcium: creatinine ratio &gt; 15</strong> is not seen in a case of nutritional rickets. Instead <strong>low urine calcium</strong> and <strong>high urinary phosphate</strong> excretion are seen due to stimulation of <strong>PTH</strong>(parathormone) in <strong>vitamin D deficiency</strong>(nutritional rickets).(Option C)</p>\n<p>Initially, low calcium levels in the blood stimulate increased PTH secretion from the parathyroid glands that results in <strong>bone resorption</strong> and <strong>increased reabsorption of calcium</strong> and <strong>increased excretion</strong> of <strong>phosphorus</strong> in the kidneys.</p>\n<p>Hence blood calcium levels can be low to <strong>normal\u00a0</strong>with <strong>low phosphorus</strong> levels and<strong> high ALP</strong> due to increased bone resorption activity.</p>\n<p>Note -<strong> High urinary calcium</strong> excretion is associated with <strong>hereditary hypophosphatemic rickets with hypercalciuria.</strong></p>\n<p>Nutritional rickets is a<strong> skeletal disorder</strong> primarily caused by a deficiency in vitamin D, calcium, or phosphorus, or a combination of these nutrients. Rickets typically affect children during periods of rapid growth and bone development.\u00a0</p>\n<p>25-hydroxy vitamin D level should be measured to diagnose <strong>vitamin D deficiency rickets</strong>. The initial lab tests in this child should also include serum calcium, phosphorous, alkaline phosphatase (ALP), and parathyroid hormone (PTH). Lab findings reveal<strong> decreased calcium</strong> and phosphate levels, increased PTH, and ALP.</p>\n<p>Treatment with oral vitamin D is preferred. Patients who show no response should be evaluated for other disorders, such as hypophosphatemic rickets, vitamin D-dependent rickets, renal tubular acidosis-associated rickets, and chronic kidney disease-associated rickets.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is CORRECT regarding febrile seizure",
    "choices": [
      {
        "id": 1,
        "text": "A,B,C"
      },
      {
        "id": 2,
        "text": "A,C,D"
      },
      {
        "id": 3,
        "text": "A,B,C,D"
      },
      {
        "id": 4,
        "text": "A,B,D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Chance of recurrence</strong> after one episode of febrile seizure is <strong>not 54%</strong></p>\n<p>Febrile seizures are seizures that-</p>\n<ul>\n<li>Occur between the age of <strong>6 months and 5 years</strong></li>\n<li>Occur at a temperature of 38\u00b0C <strong>(100.4\u00b0F) </strong>or<strong> higher</strong></li>\n<li>Are not due to any CNS infection or any metabolic imbalance</li>\n<li>Occur without a history of prior afebrile seizures</li>\n<li>Occur with <strong>no post-ictal neurological deficit</strong>.</li>\n</ul>\n<p><strong>Types of febrile seizures:</strong></p>\n<table style=\"width: 446px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 220px; text-align: center;\"><strong>Simple febrile seizures</strong></td>\n<td style=\"width: 218px; text-align: center;\"><strong>Complex (atypical) febrile seizures</strong></td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Occurs within 24 hours of the onset of fever</td>\n<td style=\"width: 218px; text-align: center;\">Can occur at any time during a fever</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Generalized seizures</td>\n<td style=\"width: 218px; text-align: center;\">Focal seizures</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Duration is &lt;15 min</td>\n<td style=\"width: 218px; text-align: center;\">Prolonged</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">No recurrence within 24 hrs of seizures</td>\n<td style=\"width: 218px; text-align: center;\">Recurrent</td>\n</tr>\n<tr>\n<td style=\"width: 220px; text-align: center;\">Chances of going into epilepsy 1%</td>\n<td style=\"width: 218px; text-align: center;\">Chances of going into epilepsy 6%</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li>Lumbar puncture should be performed in the <strong>first episode</strong> of seizures with fever, for all infants <strong>&lt;6 months</strong> age (to exclude meningitis).</li>\n<li>EEG and neuroimaging are advised for children with atypical febrile seizures.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<p>Antipyretics and proper hydration. Midazolam or diazepam (rectal) can be used if seizures present.</p>\n<p><strong>Prophylaxis:</strong></p>\n<ul>\n<li><strong>Intermittent prophylaxis:</strong> If the febrile seizures are 3 or more in 6 months, or 4 or more seizures in 1 year, oral <strong>clobazam</strong> (1mg/kg/day) for 3 days during the fever episode.</li>\n<li><strong>Continuous prophylaxis: </strong>If intermittent prophylaxis fails or in recurrent atypical febrile seizures, sodium valproate and phenobarbitone can be used.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the rate of increase in head circumference in the first 3 months of life?",
    "choices": [
      {
        "id": 1,
        "text": "1 cm/month"
      },
      {
        "id": 2,
        "text": "2 cm/month"
      },
      {
        "id": 3,
        "text": "4 cm/month"
      },
      {
        "id": 4,
        "text": "0.5 cm/month"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Rate of increase of<strong> head circumference</strong> in the <strong>first 3 months</strong> of life is <strong>2 cm/month.</strong></p>\n<p>The maximum circumference of the head from the <strong>occipital protuberance</strong> to the <strong>supraorbital ridges</strong> on the forehead is recorded using the\u00a0cross-tape method.</p>\n<p>Head circumference increases at the following rates:</p>\n<ul>\n<li>2 cm/month in first 3 months</li>\n<li>1 cm/month in the next 3 months</li>\n<li>0.5 cm/month in the next 6 months</li>\n</ul>\n<table border=\"1\">\n<tbody>\n<tr>\n<td style=\"text-align: center;\"><strong>Age</strong></td>\n<td style=\"text-align: center;\"><strong>Head circumference</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">At birth</td>\n<td style=\"text-align: center;\">33 to 35cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">3 m</td>\n<td style=\"text-align: center;\">40 cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">6 m</td>\n<td style=\"text-align: center;\">43 cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\"><strong>1 year</strong></td>\n<td style=\"text-align: center;\"><strong>46 cm</strong></td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2 years</td>\n<td style=\"text-align: center;\">48 cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">3 years</td>\n<td style=\"text-align: center;\">49 cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">4 years</td>\n<td style=\"text-align: center;\">50 cm</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">12 years</td>\n<td style=\"text-align: center;\">52 cm (adult size)</td>\n</tr>\n</tbody>\n</table>\n<p><br />Head circumference is <strong>equal to chest circumference </strong>at <strong>1 year</strong> of age.</p>\n<div class=\"page\" title=\"Page 26\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Head circumference is<strong> more than chest circumference by 2.5 cm at birth.</strong></p>\n<ul>\n<li>At birth: <strong>Head circumference</strong> <strong>&gt;</strong> <strong>Chest circumference</strong></li>\n<li>At 9-12 months:\u00a0<strong>Head circumference = Chest circumference</strong></li>\n<li>After 1 year: Head circumference <strong>&lt;</strong> <strong>Chest circumference</strong></li>\n</ul>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following holds true for \"some dehydration\" in a child:",
    "choices": [
      {
        "id": 1,
        "text": "1, 3, 5 only"
      },
      {
        "id": 2,
        "text": "1, 2, 4 only"
      },
      {
        "id": 3,
        "text": "1, 3, 4, 5 only"
      },
      {
        "id": 4,
        "text": "1, 2, 3, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Increased thirst, delayed skin pinch, </strong><strong>sunken eyes,</strong> and <strong>reduced urine output</strong> indicate <strong>some dehydration</strong>. Lethargy indicates severe dehydration.</p>\n<p>The <strong>degree of dehydration </strong>is assessed as follows:</p>\n<table style=\"height: 359px; width: 566px;\">\n<tbody>\n<tr>\n<td style=\"width: 129.5px;\"><strong>Parameters</strong></td>\n<td style=\"width: 135.5px;\"><strong>No dehydration</strong></td>\n<td style=\"width: 134px;\"><strong>Some dehydration</strong></td>\n<td style=\"width: 134px;\"><strong>Severe dehydration</strong></td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Condition</td>\n<td style=\"width: 135.5px;\">Well alert</td>\n<td style=\"width: 134px;\">Restless, irritable</td>\n<td style=\"width: 134px;\">Lethargic or unconscious,<strong> </strong>floppy</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Eyes</td>\n<td style=\"width: 135.5px;\">Normal</td>\n<td style=\"width: 134px;\">Sunken</td>\n<td style=\"width: 134px;\">Very sunken and dry</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Tears</td>\n<td style=\"width: 135.5px;\">Present</td>\n<td style=\"width: 134px;\">Absent</td>\n<td style=\"width: 134px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Mouth and tongue</td>\n<td style=\"width: 135.5px;\">Moist</td>\n<td style=\"width: 134px;\">Dry</td>\n<td style=\"width: 134px;\">Very dry</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Thirst</td>\n<td style=\"width: 135.5px;\">Drinks normally<br />not thirsty</td>\n<td style=\"width: 134px;\">Thirsty, drinks eagerly</td>\n<td style=\"width: 134px;\">Drinks poorly or is<strong> </strong>not able to drink</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Skin pinch</td>\n<td style=\"width: 135.5px;\">Goes back quickly</td>\n<td style=\"width: 134px;\">Goes back slowly</td>\n<td style=\"width: 134px;\">Goes back very slowly</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Urine output</td>\n<td style=\"width: 135.5px;\">Normal</td>\n<td style=\"width: 134px;\">Decreased</td>\n<td style=\"width: 134px;\">Oliguria, anuria</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Capillary refill</td>\n<td style=\"width: 135.5px;\">2-3 seconds</td>\n<td style=\"width: 134px;\">3-4 seconds</td>\n<td style=\"width: 134px;\">&gt;4 seconds</td>\n</tr>\n<tr>\n<td style=\"width: 129.5px;\">Treatment</td>\n<td style=\"width: 135.5px;\">Plan A</td>\n<td style=\"width: 134px;\">Weigh the patient, if possible,<br />and use treatment Plan B</td>\n<td style=\"width: 134px;\">Weigh the patient and use treatment<br />Plan C urgently</td>\n</tr>\n</tbody>\n</table>\n<p><br />Based on the degree of dehydration after history and examination, the <strong>estimated fluid loss</strong> is calculated as follows:</p>\n<table style=\"height: 140px;\" width=\"397\">\n<tbody>\n<tr>\n<td style=\"width: 190.55px;\"><strong>Degree of dehydration</strong></td>\n<td style=\"width: 190.45px;\"><strong>Assessment of fluid loss</strong></td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">No dehydration</td>\n<td style=\"width: 190.45px;\">less than 50 mL/kg</td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">Some dehydration</td>\n<td style=\"width: 190.45px;\">50-100 mL/kg</td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">Severe dehydration</td>\n<td style=\"width: 190.45px;\">more than 100 mL/kg</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a suitable method for free flow oxygen delivery to a newborn baby?",
    "choices": [
      {
        "id": 1,
        "text": "Oxygen tube kept close to the baby's nose and mouth"
      },
      {
        "id": 2,
        "text": "Oxygen mask placed firmly over the baby's mouth and nose"
      },
      {
        "id": 3,
        "text": "Self-inflating bag attached to an oxygen mask placed over baby's mouth and nose"
      },
      {
        "id": 4,
        "text": "A reservoir bag attached to oxygen mask kept over the baby's nose and mouth"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Self-inflating bag</strong> is not used for free flow oxygen delivery. It is used to provide <strong>positive pressure ventilation. Self-inflating bag </strong>and <strong>mask </strong>is used in <strong>neonatal resuscitation.</strong></p>\n<p>Bag and mask ventilation is used<strong>\u00a0</strong>as the first step in airway management to provide<strong> positive pressure ventilation</strong>. It serves as a rescue technique to provide <strong>oxygenation</strong> and ventilation in patients with difficult airways until tracheal intubation is achieved.\u00a0</p>\n<p>The\u00a0<strong>bag </strong>in this apparatus\u00a0is\u00a0a\u00a0<strong>self-inflating bag</strong>. This allows\u00a0for it to be used without a pressurized gas supply and is delivered to the patient when the bag is squeezed (compressed).\u00a0A <strong>patent airway</strong> and a <strong>good seal</strong> are essential to facilitate bag and mask ventilation.</p>\n<p>The rescuer should be positioned at the patient\u2019s head. A one-person technique involves the \"<strong>E-C seal</strong>\" in which your first and second digits form a \"C\" over the mask with your thumb pressing down by the nasal bridge, your second digit over the bottom of the mask by the mouth, and your third through fifth digits forming an \"E\" and applying pressure to the mandible to hold the mask tight</p>\n<p><strong>Effective ventilation\u00a0</strong>can be confirmed by:</p>\n<ul>\n<li>Chest rise on squeezing the bag</li>\n<li>Condensation in the clear mask</li>\n<li>Pulse oximetry shows improved saturation</li>\n<li>Capnography shows exhaled carbon dioxide</li>\n</ul>\n<p>Mask ventilation is usually contraindicated in patients with an increased risk of <strong>regurgitation</strong>. It should be used with caution in patients with <strong>severe facial trauma.</strong></p>\n<p>The following image shows the parts of a self-inflating bag and mask apparatus with a reservoir bag.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dcb417ef8fb64f2ab58493ba92e69b6cx1280x1212.JPEG"
    ]
  },
  {
    "text": "All are true about renal tubular acidosis in children except",
    "choices": [
      {
        "id": 1,
        "text": "Type 4 is due to defective ammoniagenesis and aldosterone resistance"
      },
      {
        "id": 2,
        "text": "Type 2 is Fanconi and hypophosphatemic rickets"
      },
      {
        "id": 3,
        "text": "Type 4 with paradoxical aciduria and hypokalemia"
      },
      {
        "id": 4,
        "text": "Type 2 - abnormal loss of HCO3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Hyperkalemia</strong> and <strong>metabolic acidosis </strong>are features of<strong> type 4 </strong>renal tubular acidosis\u00a0</p>\n<p><strong>Type IV (hyperkalemic) renal tubular acidosis</strong>: <strong>Hyperkalemia</strong> with distal RTA occurring due to <strong>aldosterone resistance or deficiency</strong> is termed type 4 RT A. Aldosterone directly stimulates the proton pump, increases Na+ absorption resulting in negative intrahibular potential and increases urinary K+ losses and stimulates basolateral Na+ /K+ ATPase. Hence, aldosterone deficiency or resistance is expected to cause <strong>hyperkalemia and acidosis.</strong>\u00a0\u00a0</p>\n<p>The clinical features seen in Type IV RTA are as follows:</p>\n<ul>\n<li><strong>Hyperkalemia</strong>: Hypoaldosteronism results in an increase in potassium concentration.\u00a0</li>\n<li><strong>Metabolic acidosis</strong>: The important buffers in urine are ammonia and phosphate. Hyperkalemia impairs ammonia production in the proximal tubule, which reduces the buffering of hydrogen ions. This results in decreased hydrogen ion excretion.\u00a0</li>\n<li><strong>Urinary pH&lt;5.5</strong>: Due to the <strong>decreased production of ammonia</strong> in the proximal tubule, excess protons are excreted in the renal tubules, thus decreasing the urinary pH.</li>\n</ul>\n<p><strong>RTA type I</strong> (distal RTA) is seen in autoimmune diseases like Sjogren's syndrome, systemic lupus erythematosus, systemic sclerosis, medullary sponge kidney disease, cirrhosis, drugs like amphotericin B, lithium, etc. The patients develop <strong>hypokalemia</strong>\u00a0and\u00a0<strong>metabolic acidosis</strong> with alkaline urine (urinary pH &gt;5.5).\u00a0</p>\n<p><strong>RTA type II</strong> (proximal RTA) is seen in <strong>Fanconi syndrome</strong>, Wilson's disease, heavy metals ingestion, etc., The patients develop <strong>hypokalemia</strong>\u00a0and\u00a0<strong>metabolic acidosis</strong> with acidic urine (urinary pH &lt;5.5). <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">It occurs due to generalized </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">proximal tubule dysfunction</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">. Defective\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">HCO<sup>3- </sup>resorption</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0is the primary dysfunctional mechanism causing metabolic acidosis and is also associated with\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">glycosuria, aminoaciduria,\u00a0</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">and</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> phosphaturia.\u00a0</strong><strong>Rickets </strong>is rare in isolated proximal RTA but <strong>common in Fanconi </strong>syndrome.</p>\n<p><strong>RTA type III</strong> (mixed RTA) is seen in inherited mutations of carbonic anhydrase II. A combined pathology of type I and type II RTA is seen in this type. It results in <strong>hypokalemia</strong> and <strong>metabolic acidosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a reliable sign of \"some dehydration\" in severe acute malnutrition?",
    "choices": [
      {
        "id": 1,
        "text": "Increased thirst"
      },
      {
        "id": 2,
        "text": "Sunken eyes"
      },
      {
        "id": 3,
        "text": "Skin pinch that goes back slowly"
      },
      {
        "id": 4,
        "text": "Altered sensorium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Increased thirst\u00a0</strong>is the best indicator of 'some dehydration' in severe acute malnutrition.</p>\n<p>Increased thirst is the most reliable indicator because <strong>impaired skin pinch</strong> and <strong>sunken eyes</strong> can also be seen due to <strong>loss</strong> of <strong>subcutaneous fat</strong> in a child with <strong>acute malnutrition</strong>. <strong>Altered sensorium</strong> is a feature of <strong>severe dehydration.</strong>\u00a0</p>\n<p>The <strong>degree of dehydration </strong>is assessed as follows:</p>\n<table style=\"height: 359px; width: 566px;\">\n<tbody>\n<tr>\n<td style=\"width: 123.445px;\"><strong>Parameters</strong></td>\n<td style=\"width: 129.141px;\"><strong>No dehydration</strong></td>\n<td style=\"width: 127.867px;\"><strong>Some dehydration</strong></td>\n<td style=\"width: 129.359px;\"><strong>Severe dehydration</strong></td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Condition</td>\n<td style=\"width: 129.141px;\">Well alert</td>\n<td style=\"width: 127.867px;\">Restless, irritable</td>\n<td style=\"width: 129.359px;\">Lethargic or <strong>unconscious, </strong>floppy</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Eyes</td>\n<td style=\"width: 129.141px;\">Normal</td>\n<td style=\"width: 127.867px;\">Sunken</td>\n<td style=\"width: 129.359px;\">Very sunken and dry</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Tears</td>\n<td style=\"width: 129.141px;\">Present</td>\n<td style=\"width: 127.867px;\">Absent</td>\n<td style=\"width: 129.359px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Mouth and tongue</td>\n<td style=\"width: 129.141px;\">Moist</td>\n<td style=\"width: 127.867px;\">Dry</td>\n<td style=\"width: 129.359px;\">Very dry</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Thirst</td>\n<td style=\"width: 129.141px;\">Drinks normally<br />not thirsty</td>\n<td style=\"width: 127.867px;\">Thirsty, drinks eagerly</td>\n<td style=\"width: 129.359px;\">Drinks poorly or is <strong>not able to drink</strong></td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Skin pinch</td>\n<td style=\"width: 129.141px;\">Goes back quickly</td>\n<td style=\"width: 127.867px;\">Goes back slowly</td>\n<td style=\"width: 129.359px;\"><strong>Goes back very slowly</strong></td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Urine output</td>\n<td style=\"width: 129.141px;\">Normal</td>\n<td style=\"width: 127.867px;\">Decreased</td>\n<td style=\"width: 129.359px;\">Oliguria, anuria</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Capillary refill</td>\n<td style=\"width: 129.141px;\">2-3 seconds</td>\n<td style=\"width: 127.867px;\">3-4 seconds</td>\n<td style=\"width: 129.359px;\">&gt;4 seconds</td>\n</tr>\n<tr>\n<td style=\"width: 123.445px;\">Treatment</td>\n<td style=\"width: 129.141px;\">Plan A</td>\n<td style=\"width: 127.867px;\">Weigh the patient, if possible,<br />and use treatment Plan B</td>\n<td style=\"width: 129.359px;\">Weigh the patient and use treatment<br />Plan C urgently</td>\n</tr>\n</tbody>\n</table>\n<p><br />Based on the degree of dehydration after history and examination, the <strong>estimated fluid loss</strong> is calculated as follows:</p>\n<table style=\"height: 140px;\" width=\"397\">\n<tbody>\n<tr>\n<td style=\"width: 190.55px;\"><strong>Degree of dehydration</strong></td>\n<td style=\"width: 190.45px;\"><strong>Assessment of fluid loss</strong></td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">No dehydration</td>\n<td style=\"width: 190.45px;\">less than 50 mL/kg</td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">Some dehydration</td>\n<td style=\"width: 190.45px;\">50-100 mL/kg</td>\n</tr>\n<tr>\n<td style=\"width: 190.55px;\">Severe dehydration</td>\n<td style=\"width: 190.45px;\">more than 100 mL/kg</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old has the following anthropometry values. According to WHO criteria for malnutrition, what is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Severe acute malnutrition"
      },
      {
        "id": 2,
        "text": "Chronic malnutrition"
      },
      {
        "id": 3,
        "text": "Moderate acute malnutrition"
      },
      {
        "id": 4,
        "text": "Acute on chronic malnutrition"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>According to WHO criteria for malnutrition, the diagnosis of this child is <strong>chronic malnutrition</strong>. (Option B)</p>\n<p>Height for age <strong>less than -2 SD</strong> ( -2.5 in this case) indicates <strong>moderate\u00a0stunting</strong>, pointing towards a diagnosis of <strong>chronic malnutrition</strong>.</p>\n<p>Weight for age <strong>less than -2 SD</strong> (-3.2 in this case) indicates <strong>underweight</strong> but it cannot differentiate between wasting and stunting.</p>\n<p>Weight for height:</p>\n<ul>\n<li><strong>less than - 3SD </strong>suggests<strong> severe acute malnutrition </strong>(SAM)</li>\n<li><strong>between -2 to -3 SD </strong>suggests<strong> moderate acute malnutrition</strong></li>\n</ul>\n<p>Weight for height in this case is -1.7 SD. Hence it is not a case of SAM or moderate acute malnutrition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Downe's score includes which all of the following?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3"
      },
      {
        "id": 2,
        "text": "2,3"
      },
      {
        "id": 3,
        "text": "1,2,4"
      },
      {
        "id": 4,
        "text": "2, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Respiratory rate, cyanosis </strong>and<strong> grunting\u00a0</strong>are a part of <strong>Downe's</strong> score. Feeding is not a part of it.</p>\n<p><strong>Downes\u2019 Score</strong> is a comprehensive scoring system and can be <strong>applied to any gestational age and condition</strong>. Scoring is to be done <strong>every half an hour</strong> and charting is carried out to monitor progress.\u00a0</p>\n<table>\n<tbody>\n<tr>\n<td>Score</td>\n<td><strong>\u00a00</strong></td>\n<td><strong>\u00a01</strong></td>\n<td><strong>\u00a02</strong></td>\n</tr>\n<tr>\n<td><strong>Respiratory rate</strong></td>\n<td>&lt;60/min</td>\n<td>\u00a060\u201380/min</td>\n<td>&gt;80/min</td>\n</tr>\n<tr>\n<td><strong>Air entry</strong></td>\n<td>\u00a0Normal</td>\n<td>Mild decrease</td>\n<td>Marked decrease</td>\n</tr>\n<tr>\n<td><strong>Cyanosis</strong></td>\n<td>\u00a0Nil</td>\n<td>In-room air</td>\n<td>On &gt;40% O2</td>\n</tr>\n<tr>\n<td><strong>Grunting</strong></td>\n<td>\u00a0None</td>\n<td>Only on auscultation</td>\n<td>Audible with the naked ear</td>\n</tr>\n<tr>\n<td><strong>Retraction</strong></td>\n<td>\u00a0Nil</td>\n<td>Mild</td>\n<td>Moderate</td>\n</tr>\n</tbody>\n</table>\n<p><br />Downe\u2019s score of <strong>&gt;6</strong>\u00a0means impending respiratory failure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15 year old boy presents with short stature. On examination, his upper segment/lower segment ratio is 0.8:1. Which of the following is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spondyloepiphyseal dysplasia"
      },
      {
        "id": 2,
        "text": "Achondroplasia"
      },
      {
        "id": 3,
        "text": "Growth hormone deficiency"
      },
      {
        "id": 4,
        "text": "Hypothyroidism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>High</strong> <strong>U/L ratio:</strong></p>\n<ul>\n<li>Rickets</li>\n<li>Achondroplasia (short limb dwarfism)</li>\n<li>Turner syndrome</li>\n<li>Untreated congenital hypothyroidism</li>\n</ul>\n<p><strong>Low U/L ratio:</strong></p>\n<ul>\n<li><strong>Spondyloepiphyseal dysplasia</strong></li>\n<li>Marfan syndrome</li>\n<li>Morquio syndrome</li>\n<li>Vertebral anomalies</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f96c1801a72240a68cc1a424b15d8276x1279x1001.JPEG"
    ]
  },
  {
    "text": "Which of the following MRI findings will be seen in a child with spastic quadriplegia?",
    "choices": [
      {
        "id": 1,
        "text": "Periventricular leukomalacia"
      },
      {
        "id": 2,
        "text": "Multicystic encephalomalacia"
      },
      {
        "id": 3,
        "text": "Cerebellar degeneration"
      },
      {
        "id": 4,
        "text": "Basal ganglia calcification"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Spastic hemiplegia</strong> affects <strong>one-half</strong> of the body. It is seen due to a <strong>vascular insult</strong> leading to a perinatal stroke event. <strong>Early hand</strong> <strong>preference</strong> is seen (before 1 year), where one side of the body is always preferred as the other side is weak. MRI shows <strong>focal changes</strong> and porencephalic cysts due to infarcts.</p>\n<p><strong>Dyskinetic/ Extrapyramidal </strong>palsy\u00a0is associated with birth asphyxia and <strong>kernicterus </strong>in the early neonatal period. Unlike spastic diplegia, the <strong>upper limbs</strong> are affected more than the lower limb. Brain MRI reveals lesions in the <strong>basal ganglia </strong>and <strong>thalamus</strong> (option D).</p>\n<p><strong>Cerebellar degenerations</strong> are associated with <strong>ataxic cerebral palsy\u00a0</strong>(option C).</p>\n<p>Note: Periventricular leukomalacia can also be seen in spastic quadriplegia but multicystic encephalomalacia is more common.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/87a297b621f44293964df056b6cee9bd.JPEG"
    ]
  },
  {
    "text": "A 10 year boy presents to you with sexual maturity rating 5, height for age > chronological age, hyperpigmentation and short stature. His blood pressure measured 180/110mmHg. Which of the following enzymes deficiency is responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "11 beta hydroxylase"
      },
      {
        "id": 2,
        "text": "21 alpha hydroxylase"
      },
      {
        "id": 3,
        "text": "3 beta dehydrogenase"
      },
      {
        "id": 4,
        "text": "Cholesterol side chain cleavage enzyme"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>11 beta hydroxylase deficiency</strong> is the enzyme deficiency responsible for this condition. It is one of the variants of congenital adrenal hyperplasia(CAH) where there is <strong>increased aldosterone</strong> and <strong>testosterone</strong> activity with <strong>reduced cortisol</strong> levels.</p>\n<p>The given clinical scenario of <strong>precocious puberty</strong>(SMR grading of 5 in a 10 year old boy) with <strong>height age&gt; chronological age</strong> with <strong>short stature</strong> and <strong>increased blood pressure</strong> 180/110 suggests 11 beta hydroxylase deficient variant of CAH.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "INSURE is associated with which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory distress in new born"
      },
      {
        "id": 2,
        "text": "Birth Asphyxia"
      },
      {
        "id": 3,
        "text": "Neonatal jaundice"
      },
      {
        "id": 4,
        "text": "Transient tachypnea of newborn"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>INSURE is associated with <strong>respiratory distress in newborns</strong>.</p>\n<p>INSURE is abbreviated as <strong>in</strong>tubate-intratracheal <strong>sur</strong>factant administration-<strong>e</strong>xtubation. It is a treatment modality performed in neonates with respiratory distress especially in preterm where surfactant production is reduced. It is indicated in neonates who are not maintaining <strong>oxygen saturation &gt;90%</strong> while breathing <strong>40-70% FiO</strong><sub><strong>2</strong> </sub>in <strong>nasal CPAP</strong>(continuous positive airway pressure).</p>\n<p><strong>Extubation</strong> back to nasal CPAP is done immediately once the infant is stable, usually <strong>within minutes to &lt;1 hr</strong> of surfactant administration. The amount of nasal CPAP required usually decreases after approximately <strong>72 hr of age</strong> and most infants can be weaned from nasal CPAP.\u00a0</p>\n<p>Variations of the INSURE method are <strong>MIST</strong> (minimally invasive surfactant therapy) and <strong>LISA</strong> (less invasive surfactant administration), in which a <strong>small feeding tube</strong>, rather than an endotracheal tube (ETT), is used to deliver <strong>intratracheal surfactant</strong> to a <strong>spontaneously breathing</strong> infant on nasal CPAP.</p>\n<p>The combination of early rescue surfactant by these methods along with nasal CPAP has been associated with the <strong>reduced </strong>need for <strong>mechanical ventilation</strong> and prevention of <strong>bronchopulmonary dysplasia</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are included under diagnostic criteria of severe acute malnutrition except",
    "choices": [
      {
        "id": 1,
        "text": "Height for age"
      },
      {
        "id": 2,
        "text": "Weight for height"
      },
      {
        "id": 3,
        "text": "Pedal edema"
      },
      {
        "id": 4,
        "text": "MUAC"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Height for age</strong> is not a diagnostic criterion of severe acute malnutrition.</p>\n<p>Criteria for severe acute malnutrition (SAM) in a 6-month-old child are mid-upper arm circumference, symmetrical pedal edema , and weight for height. Height for age is not the criteria for the diagnosis of severe acute malnutrition.</p>\n<p>The presence of any of the following confers severe acute malnutrition in children 6 to 59 months of age:</p>\n<ol>\n<li><strong>Weight-for-height </strong>below -3 standard deviation (<strong>&lt;-3SD</strong>) on the WHO Growth Standard <strong>(Option B)</strong></li>\n<li>Presence of <strong>bipedal edema \u00a0(Option C)</strong></li>\n<li><strong>Mid-upper arm circumference (MUAC) below 11.5 cm (Option D)</strong></li>\n</ol>\n<p>Once the child is diagnosed with severe acute malnutrition, the doctor must assess for the following <strong>complications:</strong></p>\n<ol>\n<li>Severe edema (+++)</li>\n<li>Low appetite (failed appetite test)</li>\n<li>Medical complications (severe anemia, pneumonia, diarrhea, dehydration, cerebral palsy, tuberculosis, HIV, heart disease, etc.)<br />One or more danger signs as per IMNCI</li>\n</ol>\n<p>If any of the complications are present, the child is diagnosed with <strong>complicated SAM</strong> and is managed inpatient in the facility.\u00a0</p>\n<p>If the above-mentioned signs are absent, the child is diagnosed with <strong>uncomplicated SAM </strong>and supervised management at home is given.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In children diagnosed with congenital heart disease, NADA's criteria include all the following, except?",
    "choices": [
      {
        "id": 1,
        "text": "Diastolic murmur"
      },
      {
        "id": 2,
        "text": "Increased troponin-T"
      },
      {
        "id": 3,
        "text": "Abnormal X-ray"
      },
      {
        "id": 4,
        "text": "Congestive cardiac failure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Increased troponin-T is not included in NADA\u2019s criteria.</p>\n<p><strong>Nada\u2019s criteria </strong>is used to diagnose congenital heart disease in children. The presence of 1 major or 2 minor criteria indicates congenital heart disease.</p>\n<table style=\"border-collapse: collapse; width: 26.4065%; height: 134.39px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 48.3114%; height: 22.3984px;\"><strong>Major criteria\u00a0</strong></td>\n<td style=\"width: 51.6886%; height: 22.3984px;\"><strong>Minor criteria</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 48.3114%; height: 22.3984px;\">\n<p>Systolic murmur \u00a0grade 3 or more</p>\n<p><strong>Any diastolic murmur (Option A)</strong></p>\n<p>Cyanosis</p>\n<p><strong>Congestive cardiac failure (Option D)</strong></p>\n</td>\n<td style=\"width: 51.6886%; height: 22.3984px;\">\n<p>Systolic murmur &lt; grade 3</p>\n<p>Abnormal second sound (S2)</p>\n<p>Abnormal ECG</p>\n<p><strong>Abnormal chest X-ray findings (Option C)</strong></p>\n<p>Abnormal BP</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding neonatal cholestasis?",
    "choices": [
      {
        "id": 1,
        "text": "Kasai procedure should be done within 90 days"
      },
      {
        "id": 2,
        "text": "HIDA scan is an investigation of choice"
      },
      {
        "id": 3,
        "text": "Biliary atresia is the most common cause"
      },
      {
        "id": 4,
        "text": "Liver biopsy rules out other causes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Kasai procedure</strong> should be done <strong>within</strong> <strong>60 days</strong> of age, and not 90 days. \u00a0Delay beyond 60 days significantly reduces success rates and increases the risk of requiring liver transplantation.</p>\n<p><strong>Neonatal cholestasis</strong> refers to prolonged jaundice in newborns caused by impaired bile flow.\u00a0</p>\n<p>Option B: <strong>HIDA scan</strong> is the <strong>investigation of choice</strong>. The hepatobiliary iminodiacetic acid (HIDA) scan is used to evaluate bile flow from the liver into the intestine and can help differentiate biliary atresia from other causes of neonatal cholestasis.</p>\n<p>Option C: <strong>Biliary atresia</strong> is the <strong>most common\u00a0cause </strong>of neonatal cholestasis, this condition requires surgical intervention.</p>\n<p>Option D: <strong>Liver biopsy</strong> is a key diagnostic tool in neonatal cholestasis as it can confirm biliary atresia and <strong>rule out</strong> other causes like metabolic diseases or neonatal hepatitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What causes the closure of ductus arteriosus?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in Oxygen"
      },
      {
        "id": 2,
        "text": "Decrease in CO2"
      },
      {
        "id": 3,
        "text": "Increase in pulmonary vascular resistance"
      },
      {
        "id": 4,
        "text": "Fall in concentration of catecholamines"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An<strong> increase in oxygen</strong> causes the closure of ductus arteriosus.</p>\n<p>Mechanism of closure of the ductus arteriosus:</p>\n<p>1. <strong>Functional Closure</strong> (Minutes to Hours): <strong>Increased oxygen tension</strong> (PaO\u2082) after birth causes smooth muscle contraction in the ductus. <strong>Decreased prostaglandin E2</strong> (PGE2) levels (due to loss of placental production and increased pulmonary clearance) also contribute.</p>\n<p>2. <strong>Anatomical Closure</strong> (Days to Weeks): <strong>Smooth muscle proliferation </strong>and fibrosis lead to permanent closure, forming the <strong>ligamentum arteriosum.</strong></p>\n<p>Thus, oxygen, reduced PGE2, and smooth muscle constriction drive ductus closure.</p>\n<p>Changes in vascular resistance at birth:</p>\n<p><strong>Pulmonary vascular resistance</strong> (PVR): Before birth, the lungs are fluid-filled, and PVR is high. At birth, with the first breath, the lungs expand, oxygen tension rises, and pulmonary blood flow increases. This causes a <strong>decrease in PVR.</strong></p>\n<p><strong>Systemic vascular resistance</strong> (SVR): At birth, clamping of the umbilical cord eliminates the low-resistance placental circulation. This leads to an <strong>increase in SVR.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old child was diagnosed with croup. Which of the following is the most common causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Hemophilus influenza"
      },
      {
        "id": 2,
        "text": "Streptococcus pneumonia"
      },
      {
        "id": 3,
        "text": "Influenza virus"
      },
      {
        "id": 4,
        "text": "Diphtheria"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Among the options, the <strong>Influenza virus</strong> is the most common causative organism of croup.</p>\n<p><strong>Croup,</strong> or laryngotracheobronchitis, is a viral infection affecting the upper airway, primarily in children aged 6 months to 6 years. It causes inflammation of the larynx, trachea, and bronchi, leading to characteristic symptoms such as:</p>\n<ul>\n<li><strong>Barking cough (seal-like cough)</strong></li>\n<li><strong>Inspiratory stridor</strong></li>\n<li>Hoarseness</li>\n<li>Respiratory distress in severe cases</li>\n</ul>\n<p>The most common causative organism for croup is the <strong>parainfluenza virus</strong>. While other viruses like<strong> influenza, respiratory syncytial virus (RSV)</strong>, and <strong>adenovirus</strong> can also cause croup, parainfluenza is the predominant cause.</p>\n<p><strong>Management:</strong></p>\n<ul>\n<li><strong>Racemic epinephrine nebulization </strong>leads to the rapid improvement of upper airway obstruction. Epinephrine constricts pre-capillary arterioles in the upper airway mucosa and decreases capillary hydrostatic pressure, leading to fluid resorption and improvement in airway edema.</li>\n<li><strong>Dexamethasone</strong>-by the least invasive route (Oral&gt;IV&gt;IM ). It is indicated in all the grades of croup.</li>\n<li><strong>Oxygen</strong> should be administered to children who are hypoxemic (SpO2 &lt;92 %)</li>\n</ul>\n<p>Antibiotics are not indicated in laryngotracheobronchitis.</p>\n<p>Other options:</p>\n<p><strong>Option A: \u00a0Hemophilus influenza</strong> is associated with <strong>epiglottitis.</strong></p>\n<p><strong>Option B: \u00a0Streptococcus pneumonia </strong>is associated with <strong>pneumonia, otitis media, or meningitis, </strong>not croup.</p>\n<p><strong>Option D: \u00a0Diphtheria</strong> is associated with <strong>pseudomembrane</strong> in the throat and airway obstruction</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What would be the age of a child who copies crosses, tell stories, and goes to the toilet alone?",
    "choices": [
      {
        "id": 1,
        "text": "3 years"
      },
      {
        "id": 2,
        "text": "4 years"
      },
      {
        "id": 3,
        "text": "5 years"
      },
      {
        "id": 4,
        "text": "2 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The combination of copying a cross, telling stories, and independent toileting aligns with the developmental milestones of a <strong>4-year-old child.</strong></p>\n<p><span style=\"text-decoration: underline;\"><strong>Developmental milestones\u00a0</strong></span><br /><strong>At 1 year</strong></p>\n<ul>\n<li>Motor: Walks with support</li>\n<li>Adaptive: Mature pincer grasp</li>\n<li>Language: Speaks a few words</li>\n<li>Social: Plays simple ball game</li>\n<li>Domestic mimicry at 18 months</li>\n</ul>\n<p><strong>At 2 years (Option D)</strong></p>\n<ul>\n<li>Motor: Walks up and downstairs, one step at a time</li>\n<li>Adaptive: Makes a tower of 6 blocks\u00a0</li>\n<li>Language: Simple sentences, a vocabulary of 50-100 words, uses pronouns at 2.5 yrs</li>\n<li>Social: Asks for food and starts toilet training, listens to stories</li>\n</ul>\n<p><strong>At 3 years (Option A)</strong></p>\n<ul>\n<li>Motor: Rides tricycle</li>\n<li>Adaptive: Makes a tower of 9 blocks, handedness is established</li>\n<li>Language: Knows full name, age, gender</li>\n<li>Social: Plays simple games and engages in parallel play with other children</li>\n</ul>\n<p><strong>At 4 years</strong></p>\n<ul>\n<li>Motor: Hops</li>\n<li>Adaptive: Draws square and constructs a bridge with blocks</li>\n<li>Language: Tells stories</li>\n<li>Social: Goes to the toilet alone<br />\u00a0</li>\n</ul>\n<p><strong>At 5 years (Option C)</strong></p>\n<ul>\n<li>Motor: Skips</li>\n<li>Adaptive: Draws a triangle</li>\n<li>Language: Asks the meaning of words, names 4 colors</li>\n<li>Social: Dresses and undresses</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about breastmilk jaundice?",
    "choices": [
      {
        "id": 1,
        "text": "Breastfeeding need not be stopped for the treatment"
      },
      {
        "id": 2,
        "text": "Most of the children require phototherapy"
      },
      {
        "id": 3,
        "text": "Exclusive breastfeeding with a total bilirubin of more than 10mg/dl after 3-4 weeks of birth"
      },
      {
        "id": 4,
        "text": "Unconjugated hyperbilirubinemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Most of the children</strong> suffering from <strong>breastmilk jaundice</strong> <strong>do not require phototherapy.</strong></p>\n<p><strong>Breastmilk jaundice</strong> is due to significant <strong>unconjugated hyperbilirubinemia (Option D)</strong>, after the 7th day and may last for 2\u20133 weeks. This may be caused by the breast milk that might contain <strong>\u03b2-glucuronidase,</strong> which deconjugates intestinal bilirubin and promotes its absorption and other inhibitors of glucuronyl transferase. Persistently high bilirubin levels may require <strong>changing from breast milk to infant formula</strong> for 24\u201348 h and/or treatment with phototherapy, without cessation of breastfeeding. <strong>(Option A)</strong></p>\n<p>Most cases of breast milk jaundice are mild and self-limiting, and phototherapy is required only in rare severe cases where bilirubin levels are significantly elevated. <strong>(Option B)</strong></p>\n<p>Breast milk jaundice is typically observed in <strong>exclusively breastfed infants,</strong> often with elevated <strong>bilirubin (&gt;10mg/dl) </strong>levels persisting beyond the neonatal period (after 3-4 weeks of birth). <strong>(Option C)</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a feature of cystic fibrosis?",
    "choices": [
      {
        "id": 1,
        "text": "Nasal polyposis"
      },
      {
        "id": 2,
        "text": "Biliary atresia"
      },
      {
        "id": 3,
        "text": "Meconium ileus"
      },
      {
        "id": 4,
        "text": "Bleeding diathesis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The diagnosis is confirmed if both of the following criteria are met:</p>\n<p>1. Presence of</p>\n<ul>\n<li>Clinical symptoms affecting at least <strong>one organ system </strong>(respiratory, gastrointestinal, or genitourinary) or</li>\n<li><strong>Positive newborn screening</strong> or</li>\n<li>A <strong>sibling</strong> with cystic fibrosis.</li>\n</ul>\n<p>2. Evidence of dysfunction of the <strong>CFTR gene </strong>by</p>\n<ul>\n<li><strong>Two positive sweat chloride test </strong>results were obtained on separate days or</li>\n<li>Identification of <strong>two CFTR mutations</strong> by genetic testing or</li>\n<li>An <strong>abnormal </strong>measurement of <strong>nasal potential difference.</strong></li>\n</ul>\n<p>Cystic fibrosis requires a <strong>multidisciplinary approach</strong> to management. The<strong> correction</strong> of the defect can be done via:</p>\n<ul>\n<li><strong>Lumacaftor, </strong>corrects the misfolding and reverts the mutation defect.</li>\n<li><strong>Ivacaftor</strong> potentiates CFTR channel opening and stimulates ion transport.</li>\n</ul>\n<p>End-stage pulmonary failure requires <strong>lung transplantation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2ac03e0c93745ca8c5ac69ef585b632x668x482.JPEG"
    ]
  },
  {
    "text": "A 2-week-old infant presents with a history of epistaxis and recurrent rectal bleeding. The parents also reported a history of continuous bleeding from the umbilicus since birth. Laboratory investigations revealed normal prothrombin time, normal thrombin time, normal partial thromboplastin time, normal platelet count, and normal function. The urea clot solubility test was positive. What is the most likely deficient factor in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Factor XIII"
      },
      {
        "id": 2,
        "text": "Factor XI"
      },
      {
        "id": 3,
        "text": "Factor X"
      },
      {
        "id": 4,
        "text": "Factor XII"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The infant\u2019s history of umbilical bleeding, recurrent bleeding episodes, normal coagulation studies, and positive urea clot solubility test strongly suggest <strong>Factor XIII deficiency.</strong></p>\n<p>FXIII <strong>cross-links fibrin polymers</strong> and <strong>strengthens the clot</strong>, making it resistant to premature breakdown. Its deficiency leads to delayed wound healing, spontaneous bleeding, and in severe cases, life-threatening hemorrhages.</p>\n<p>Presents with<strong> recurrent umbilical bleeding</strong> since birth and Epistaxis and rectal bleeding\u00a0</p>\n<p><strong>Laboratory Findings:</strong> <strong>Normal PT, PTT, TT, platelet count and function</strong>: These indicate that the coagulation cascade and platelets are functioning normally up to fibrin formation. Positive urea clot solubility test: This is a classic diagnostic test for Factor XIII deficiency. Clots deficient in Factor XIII dissolve in 5M urea because they lack cross-linked fibrin</p>\n<p>The preferred <strong>treatment</strong> is <strong>FXIII concentrates</strong>. Fresh frozen plasma (FFP) and cryoprecipitate are alternatives. Antifibrinolytics like tranexamic acid can be adjunctive for minor bleeding. Regular monitoring and prophylaxis are crucial for long-term management and preventing complications.</p>\n<p>Other Options:</p>\n<p><strong>Option B: Factor XI: </strong>Deficiency typically causes mild to moderate bleeding, mainly in mucosal sites, and does not present with umbilical bleeding.<br />PT and PTT may be prolonged, which is not the case here.</p>\n<p><strong>Option C: Factor X: </strong>Deficiency causes severe bleeding and affects PT and PTT (both would be prolonged), unlike in this case where all tests are normal.</p>\n<p><strong>Option D: Factor XII: </strong>Deficiency does not cause bleeding; it is often asymptomatic. It can lead to prolonged PTT, which is not observed here.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following indicates the primary failure of recovery in an admitted patient with severe acute malnutrition?",
    "choices": [
      {
        "id": 1,
        "text": "i,ii,iii"
      },
      {
        "id": 2,
        "text": "i,ii,iv"
      },
      {
        "id": 3,
        "text": "i,iii,iv"
      },
      {
        "id": 4,
        "text": "ii,iii,iv"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Failure to regain appetite by day 4, failure to start to loose edema by day 4 and presence of edema by day 10 indicate <strong>primary failure of recovery</strong> in admitted patient with severe acute malnutrition.</p>\n<p>For assessing primary failure of recovery in a patient with severe acute malnutrition (SAM), key clinical benchmarks guide the evaluation.\u00a0</p>\n<p><strong>Difference</strong> between primary and secondary failure of malnutrition treatment:</p>\n<p>Inpatient cases</p>\n<table style=\"border-collapse: collapse; width: 80.0363%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 49.4819%;\">Primary Failure</td>\n<td style=\"width: 50.5181%;\">Secondary failure</td>\n</tr>\n<tr>\n<td style=\"width: 49.4819%;\">\n<ul>\n<li><strong>Failure to regain appetite by day 4 (i)</strong></li>\n<li><strong>Failure to start losing edema by day 4 (ii)</strong></li>\n<li><strong>Presence of edema on day 10 (iii)</strong></li>\n<li>Failure to gain at least 5 g/kg/day by day 10</li>\n</ul>\n</td>\n<td style=\"width: 50.5181%;\">\n<ul>\n<li>Failure to gain 5 g/kg/day for 3 consecutive days during rehabilitation</li>\n<li>Reappearance of edema after 4 weeks</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Day of admission is considered as day 0.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '269 Paediatrics Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Pediatrics"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>