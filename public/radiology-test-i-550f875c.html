<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Radiology Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Most common hormone deficiency seen after intracranial radiation therapy-",
    "choices": [
      {
        "id": 1,
        "text": "Growth hormone"
      },
      {
        "id": 2,
        "text": "Prolactin"
      },
      {
        "id": 3,
        "text": "Gonadotrophins"
      },
      {
        "id": 4,
        "text": "ACTH"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Growth hormone deficiency</strong> is most common endocranial complication of intracranial radiation therapy.</p>\n<p>Hypopituitarism frequently occurs after exposure of hypothalamus or pituitary gland to therapeutic radiation; especially in children and adolescent.</p>\n<p>It&nbsp; develops usually after 5-15 years and reflects hypothalmic damage rather than absolute destruction of pituitary cells.</p>\n<p><strong>Sensitivity of hormones to radiation</strong></p>\n<ul>\n<li>Most sensitive - Growth hormone,</li>\n<li>Intermediate sensitivity- ACT, Prolactin, Gonadotropins ,</li>\n<li>Least sensitive- Thyroid stimulating hormone.</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the ionizing radiation -",
    "choices": [
      {
        "id": 1,
        "text": "Alpha  rays"
      },
      {
        "id": 2,
        "text": "Beta rays"
      },
      {
        "id": 3,
        "text": "Gamma rays"
      },
      {
        "id": 4,
        "text": "Proton rays"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image is of <strong>beta rays</strong> as it can penetrate paper but stopped by few millimeters of aluminium.</p>\n<p>Beta particle is a high energy, high speed electron or positron which can penetrate paper and can be stopped by a few millimetres of aluminium. The range of beta rays depends on their initial energy and electron density of the material.</p>\n<p>Typical ranges in tissue are a few millimetres, in air the range may go to several meters. Beta particles cause damage to tissue in a similar manner to alpha rays but less severely.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9a72a6ba06094e66ab57549f2e85497d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "2 rem is equal to",
    "choices": [
      {
        "id": 1,
        "text": "0.02 sievert"
      },
      {
        "id": 2,
        "text": "200  sievert"
      },
      {
        "id": 3,
        "text": "2 sievert"
      },
      {
        "id": 4,
        "text": "0.2 rem"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>For equivalent dose,the unit corresponding to rads is the Rem and if absorbed dose is in grays then the unit for dose equivalent is Sievert .</p>\n<p>So 1 sievert = 100 rem</p>\n<p>0.01 sievert = 1 rem</p>\n<p>therefore, 2 rem = 0.01 x2 = <strong>0.02 sievert</strong></p>\n<p>Dose equivalent is defined as the product of the dose D and a quality factor Q ,which is based on the type of radiation so that H=D.Q.The dose equivalent is intended to estimate the biological effect of different types of radiation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True statements regarding single photon emission computed tomography as compared to positron emission tomography -\na)better contrast and spatial resolution\nb)very expensive\nc)uses gamma emitting radioisotope tracers",
    "choices": [
      {
        "id": 1,
        "text": "Only a"
      },
      {
        "id": 2,
        "text": "Both a and b"
      },
      {
        "id": 3,
        "text": "Only c"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Single Photon emission computed tomography (SPECT) uses gamma emitting radioisotope tracers <strong>Technetium-99m,&nbsp;</strong>Iodine-123, Iodine-131 whereas Positron emission tomography (PET) uses positron emitting radioisotope tracers 18F-FDG (flurodeoxy glucose).</p>\n<p>Rest all options are false.</p>\n<p><strong>Single photon emission computed tomography&nbsp;(SPECT)</strong>&nbsp;and&nbsp;<strong>Positron emission tomography (PET)</strong>&nbsp;are nuclear medicine imaging techniques which provide metabolic and functional information, unlike CT and MRI.</p>\n<table style=\"width: 460px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 132px; text-align: center;\">\n<p><strong>Positron emission tomography (PET)&nbsp;&nbsp;&nbsp;</strong></p>\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 324px; text-align: center;\"><strong>Single-photon emission computed tomography&nbsp;(SPECT)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 132px;\">\n<ul>\n<li>Very expensive</li>\n<li>Uses positron emitting radioisotope(tracer)&nbsp;<strong><sup>18</sup>F-FDG</strong><strong>&nbsp;</strong></li>\n<li>Better contrast and spatial resolution&nbsp;</li>\n</ul>\n</td>\n<td style=\"width: 324px;\">\n<ul>\n<li>Lower cost</li>\n<li>Uses gamma emitting radioisotope (tracer)\n<ul>\n<li><strong>Technetium-99m</strong></li>\n<li>Iodine-123</li>\n<li>Iodine-131&nbsp;</li>\n</ul>\n</li>\n<li>Less contrast and spatial resolution <strong>&nbsp;</strong></li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For which of the following CNS conditions radiopharmaceutical 99m Tc-HMPAO (Technetium exametazime) is not used?",
    "choices": [
      {
        "id": 1,
        "text": "Cerbrovascular accidents"
      },
      {
        "id": 2,
        "text": "CSF rhinorrhoea"
      },
      {
        "id": 3,
        "text": "Dementia"
      },
      {
        "id": 4,
        "text": "Encephalitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Radiopharmaceutical 99m Tc-HMPAO (Technetium exametazime) is not used in CSF rhinorrhoea.</p>\n<p>For <strong>CSF rhinorrhoea</strong> radiopharmaceutical used is<strong> 111 In -DPTA(diethylenetriaminepenta-acetic acid)</strong>. It detects, localizes and quantifies CSF rhinorrhoea. It is used to diagnose abnormalities in CSF circulation, to assess and help localizing site of CSF leakage and to test patency of or localize CSF shunt.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Given below is the image showing an X-ray finding of a bone tumor. Which of the following is the true statement regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Highly radiosensitive tumor"
      },
      {
        "id": 2,
        "text": "Highly radio resistant tumor"
      },
      {
        "id": 3,
        "text": "Metaphysis of distal femur is a common location"
      },
      {
        "id": 4,
        "text": "Diaphysis of humerus is the most common location"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a lateral radiograph of the tibia demonstrating the <strong>lamellated periosteal reaction</strong> in the <strong>diaphysis&nbsp;</strong>suggestive of <strong>Ewing&rsquo;s sarcoma.&nbsp;</strong>The true statement regarding this condition is that it&nbsp;is a<strong> highly radiosensitive tumor</strong>.</p>\n<p>Ewing&nbsp;sarcoma<strong>&nbsp;</strong>is the <strong>2nd most common</strong>&nbsp;bone sarcoma in children. The majority of the patients affected are usually&nbsp;<strong>&lt;20 years</strong> of age. It has a slight <strong>male</strong> <strong>predominance</strong>.&nbsp;The majority of Ewing sarcomas have a balanced translocation between the EWSR1 gene on <strong>chromosome 22</strong> and the FLI1 gene on <strong>chromosome 11</strong>.&nbsp;</p>\n<p>It commonly involves the&nbsp;<strong>diaphysis</strong>&nbsp;of the <strong>long bones</strong> like the <strong>femur</strong>,<strong> tibia</strong>, fibula, humerus, and <strong>flat bones</strong> of the <strong>pelvis</strong>.</p>\n<p>Patients present with&nbsp;<strong>painful enlarging mass</strong>, fever, and anemia. The affected area is usually tender, swollen, and warm. Laboratory findings may show an elevated WBC count and erythrocyte sedimentation rate (ESR).&nbsp;</p>\n<p>A histopathological examination of Ewing sarcoma shows sheets of<strong> uniform, round blue cells </strong>arranged in<strong> Homer-Wright rosettes</strong> (shown in the image given below). Immunohistochemistry is usually&nbsp;positive for<strong> synaptophysin </strong>and<strong> mic-2.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/97780ce4e1da48d08dfa52b9d649c443.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1057042b2af84564b1ef726547539a08x800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b53c61392a774b9088e8b14a831281bex720x553.PNG"
    ]
  },
  {
    "text": "Match the following intracranial bleed:",
    "choices": [
      {
        "id": 1,
        "text": "A -i B-ii C- iii  D- iv"
      },
      {
        "id": 2,
        "text": "A -ii  B-iv   C-i  D-iii"
      },
      {
        "id": 3,
        "text": "A-iv   B-iii    C -ii    D-i"
      },
      {
        "id": 4,
        "text": "A -iv   B-ii   C-iii    D-i"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Epidural hematoma:</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8be21605f63b486bb2124eec2733e7ff.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1f1690155c0e4d0c8dea154ff9b88729x181x181.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c92c6114a0643f0ab0741d215bffdb6x172x121.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0cf55af2acdd4b3ca9c3eff50412a2b5x155x159.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6dd2003fbbde453b904c3c99eba4bd16x193x159.JPEG"
    ]
  },
  {
    "text": "A patient presented with Acute Renal Failure (ARF) with complete anuria but a normal USG. Next investigation would be",
    "choices": [
      {
        "id": 1,
        "text": "IVP"
      },
      {
        "id": 2,
        "text": "Radiorenogram"
      },
      {
        "id": 3,
        "text": "Anterograde Pyelography"
      },
      {
        "id": 4,
        "text": "Retrograde Pyelography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Radiorenogram would be the next choice of investigation.</p>\n<p>Renal imaging is useful in case of <strong>ARF secondary to obstruction. </strong></p>\n<p>The commonly used imaging modalities are:</p>\n<ul>\n<li><strong>USG</strong></li>\n<li><strong>Nuclear scan &ndash; Radio renogram</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman is referred from a PHC for the evaluation of nodular thyroid enlargement. As part of the evaluation, she is planned for a radio uptake scan. Which of the following isotopes is not used in this test?",
    "choices": [
      {
        "id": 1,
        "text": "Iodine-123"
      },
      {
        "id": 2,
        "text": "Iodine-124"
      },
      {
        "id": 3,
        "text": "Tc 99m"
      },
      {
        "id": 4,
        "text": "Iodine-127"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Iodine-127</strong> is the<strong> stable isotope</strong> and is not useful for thyroid imaging.</p>\n<p>The following isotopes are useful in thyroid imaging:</p>\n<ul>\n<li>Iodine-<strong>123: </strong>Functional scan of the thyroid</li>\n<li>Iodine-<strong>124: </strong>Produces positrons and is used in <strong>PET scans</strong></li>\n<li><strong>Tc 99m</strong> pertechnetate\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hilar dance was seen on fluoroscopy of an infant with suspected congenital heart disease. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Atrial septal defect"
      },
      {
        "id": 2,
        "text": "Ventricular septal defect"
      },
      {
        "id": 3,
        "text": "Patent ductus arteriosus"
      },
      {
        "id": 4,
        "text": "Tetralogy of Fallot"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hilar dance</strong> on fluoroscopy is seen in patients with an <strong>atrial septal defect</strong> (<strong>ASD</strong>), due to vigorous<strong> pulmonary artery pulsations</strong>.</p>\n<p>ASD is characterised by an <strong>abnormal opening</strong> in the atrial septum, allowing communication between the right and left atria. There are <strong>four</strong>\u00a0<strong>types</strong>\u00a0based on their location within the septum:</p>\n<ul>\n<li>Secundum ASD -\u00a0<strong>most common</strong>, usually an isolated abnormality</li>\n<li>Primum ASD - associated with abnormal mitral valve leaflet (partial AV septal defect)</li>\n<li>Sinus venous - associated with anomalous right pulmonary venous return to the\u00a0SVC or RA</li>\n<li>Coronary sinus type ASD - also called unroofed coronary sinus</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6e17ae2c4b26467e8f9823d175671e21x1280x1274.JPEG"
    ]
  },
  {
    "text": "A 24-year-old primigravida has come for an antenatal ultrasound examination. The sonographic image obtained is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spina bifida"
      },
      {
        "id": 2,
        "text": "Anencephaly"
      },
      {
        "id": 3,
        "text": "Holoprosencephaly"
      },
      {
        "id": 4,
        "text": "Omphalocele"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows the <strong>lemon sign</strong>, which is seen in <strong>spina bifida.</strong></p>\n<p><strong>Spina bifida</strong>\u00a0is the common\u00a0<strong>open neural tube defect</strong>\u00a0associated with hydrocephalus and<strong> Arnold-Chiari II </strong>malformation. It is the most common open neural tube disorder. Spina bifida is characterized by a cleft in the vertebral column with a corresponding defect in the skin so that the<strong> meninges and spinal cord are exposed.</strong></p>\n<p>The 3 main types of spina bifida:</p>\n<ul>\n<li><strong>Spina bifida occulta</strong> - This is the mildest form of spina bifida. The defect in the vertebral arches is covered by the skin. The splits in the vertebrae are so small that the spinal cord does not protrude. The skin at the site of the lesion may be normal, or it may have some hair growing from it.</li>\n<li><strong>Meningocele</strong> - The defect in the vertebra allows the meninges to protrude through the defect.</li>\n<li><strong>Myelomeningocele</strong> (meningomyelocele) - A defect in the vertebral column allows the spinal cord with the meningeal coverings to protrude.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7adc5b32b0144e20a15e9527b047f4ec.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4898652bfb914bfd95154ad132c676aex500x254.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc4130462341426a971b770dd25a14d3x512x392.PNG"
    ]
  },
  {
    "text": "A young female patient with a history of renal calculi presents with bone pain and abdominal cramps. On investigation, multiple fractures and raised levels of serum calcium and PTH are noted. Which of the following will be the best investigation to arrive at a definitive diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Contrast-enhanced CT neck"
      },
      {
        "id": 2,
        "text": "Sestamibi scan"
      },
      {
        "id": 3,
        "text": "Ultrasound neck"
      },
      {
        "id": 4,
        "text": "Radioiodine scan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical presentation is suggestive of <strong>hyperparathyroidism</strong>.&nbsp;<strong>Sestamibi scan</strong>&nbsp;is the best investigation for parathyroid abnormalities. The most common cause of primary hyperparathyroidism is parathyroid adenoma.</p>\n<p>Sestamibi is a monovalent, lipophilic cation that passively diffuses across cell membranes and accumulates in mitochondria.</p>\n<p>There are mainly two techniques used to differentiate sestamibi uptake by abnormal parathyroid and thyroid tissue:</p>\n<ul>\n<li><strong>Subtraction imaging -&nbsp;</strong>This method uses a dual radionu&shy;clide approach with sestamibi and either iodine-123 or&nbsp;either <sup>99m</sup>Tc pertechnetate.</li>\n<li><strong>Dual-phase imaging -&nbsp;</strong>This method uses sesta&shy;mibi alone with early and delayed imaging.</li>\n</ul>\n<p>Sestamibi single-photon emission CT has become the most commonly used preoperative imaging study in parathyroid disease because of its improved spatial resolution.</p>\n<p>The image below shows left inferior thyroid adenoma:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8a5e368b90b74f42954abcb1570d763ax290x276.JPEG"
    ]
  },
  {
    "text": "A patient with carcinoma endometrium is treated with pelvic external beam irradiation. Which of the following organs is likely to be affected the most?",
    "choices": [
      {
        "id": 1,
        "text": "Ovary"
      },
      {
        "id": 2,
        "text": "Vagina"
      },
      {
        "id": 3,
        "text": "Bladder"
      },
      {
        "id": 4,
        "text": "Rectum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options, the <strong>ovary</strong> is most likely to be affected as it is the <strong>most radiosensitive</strong> organ.\u00a0</p>\n<p>Radiosensitivity of pelvic organs is as follows:\u00a0<strong>ovary&gt;rectum&gt;bladder&gt;vagina. </strong>The radiation tolerance dose for the ovary is 2-3 Gy whereas the vagina is 90 Gy. Hence, among the given options, the <strong>vagina</strong> is the <strong>most radioresistant</strong> organ.</p>\n<p>The radiation dose necessary to induce ovarian failure is age-dependent. A single dose of 3-4 Gray can induce amenorrhea in almost all women &gt;40 years of age. In young women, oogenesis is much less sensitive to radiation as compared to the elderly.\u00a0</p>\n<p>The radiosensitivity of various tissues is summed up in the table given below:\u00a0</p>\n<table style=\"height: 292px; width: 488px;\">\n<tbody>\n<tr>\n<td style=\"width: 122.156px;\">\u00a0</td>\n<td style=\"width: 185px;\"><strong>Most radiosensitive</strong></td>\n<td style=\"width: 158.844px;\"><strong>Least radiosensitive</strong></td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Tissue</strong></td>\n<td style=\"width: 185px;\">Bone marrow, Gonads</td>\n<td style=\"width: 158.844px;\">Nervous tissue, Muscle fibers</td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Blood cells</strong></td>\n<td style=\"width: 185px;\">Lymphocytes</td>\n<td style=\"width: 158.844px;\">Platelets</td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Stages of cell cycle</strong></td>\n<td style=\"width: 185px;\">G2M interphase</td>\n<td style=\"width: 158.844px;\">S phase</td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Cell types</strong></td>\n<td style=\"width: 185px;\">Rapidly dividing</td>\n<td style=\"width: 158.844px;\">Quiescent</td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Ocular structure</strong></td>\n<td style=\"width: 185px;\">Lens</td>\n<td style=\"width: 158.844px;\">Sclera</td>\n</tr>\n<tr>\n<td style=\"width: 122.156px;\"><strong>Layer of retina</strong></td>\n<td style=\"width: 185px;\">Rods</td>\n<td style=\"width: 158.844px;\">Ganglion cell layer</td>\n</tr>\n</tbody>\n</table>\n<p>Note: The skin is most commonly affected due to radiation. Stratum basalis is the layer of the skin most affected.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions do not cause dense metaphyseal bands?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin D intoxication"
      },
      {
        "id": 2,
        "text": "Primary hyperparathyroidism"
      },
      {
        "id": 3,
        "text": "Congenital syphilis"
      },
      {
        "id": 4,
        "text": "Scurvy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Dense metaphyseal bands are not seen in <strong>primary hyperparathyroidism.</strong>\u00a0</p>\n<p><strong>Dense metaphyseal bands</strong> are formed due to <strong>increased bone deposition</strong> and/or reduced osteoclastic remodeling. There is increased bone resorption in primary hyperparathyroidism. Other causes of dense metaphyseal bands\u00a0include:</p>\n<ul>\n<li>Scurvy</li>\n<li>Vitamin D intoxication</li>\n<li>Arsenic poisoning</li>\n<li>Normal variant</li>\n<li>Congenital syphilis,\u00a0TORCH infections</li>\n<li>Estrogen to mother in pregnancy</li>\n<li>Leukemia (after treatment, the lucent bands become dense )</li>\n<li>Healed rickets</li>\n<li>Early hypothyroidism</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presented with severe pain in the wrist after suffering a fall on an outstretched hand during his morning jog. His X-ray is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Colle\u2019s fracture"
      },
      {
        "id": 2,
        "text": "Smith\u2019s fracture"
      },
      {
        "id": 3,
        "text": "Rolando's fracture"
      },
      {
        "id": 4,
        "text": "Reverse Barton\u2019s fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given features and radiograph are suggestive of <strong>volar </strong>or<strong> reverse Barton&rsquo;s fracture</strong>.&nbsp;<strong>Volar-type/reverse Barton's</strong>&nbsp;is a fracture-dislocation of the <strong>volar rim</strong> of the radius. This type is the <strong>most common</strong>.&nbsp;</p>\n<p>Dislocation of the radiocarpal joint is the hallmark of Barton's fracture. The radiographic findings are the following:</p>\n<ul>\n<li>Comminuted intraarticular fracture of the distal radius</li>\n<li>Volar rim maintains a relationship with the carpus and both are displaced proximally</li>\n<li>Fracture of the radial styloid process with loss of radial inclination</li>\n</ul>\n<p><strong>Reverse-type </strong>Barton's<strong>&nbsp;</strong>fracture is similar to <strong>Smith&rsquo;s fracture</strong>, but the difference is that the fracture line runs obliquely and extends into the joint surface.</p>\n<p>Another type is<strong> dorsal Barton's fracture </strong>which results due to&nbsp;fracture-dislocation of the <strong>dorsal rim</strong> of the radius.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e9377abdaacc469d857182f64adc36de.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/17b3fa5e367745f0b5e1145d8556e3eax1280x1294.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2e9f7ffbefa04dbaa802ad8b14799effx1280x2012.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3db6bce5d3ec44e68c08e9a27828b992x720x585.PNG"
    ]
  },
  {
    "text": "Match the following radiological image with the diagnosis:",
    "choices": [
      {
        "id": 1,
        "text": "A-2, B-3, C-4, D-1"
      },
      {
        "id": 2,
        "text": "A-4, B-2, C-3, D-1"
      },
      {
        "id": 3,
        "text": "A-4, B-2, C-1, D-3"
      },
      {
        "id": 4,
        "text": "A-4, B-3, C-2, D-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the image:</p>\n<p>A - Fallot's tettrology</p>\n<p>B - Pericardial effusion</p>\n<p>C - Pulmonary edema</p>\n<p>D - Epstein's anomaly</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9d6eb91ed70240b28c931a91ba245bae.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0189f46a28904a1b90299fa4bb035938x617x653.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9aa7a63d2a2b4b4e8b923de16c559d13x632x791.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/485faa780933407f93b1508fcf6ea04ex940x527.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/feeb784f5ab34ab0a3e53afecc3f371cx629x822.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/635c30a8faf4471a869963a39e7111e8x723x630.PNG"
    ]
  },
  {
    "text": "What is the best chest X-ray view to visualise the right lung?",
    "choices": [
      {
        "id": 1,
        "text": "Right anterior oblique"
      },
      {
        "id": 2,
        "text": "Left anterior oblique"
      },
      {
        "id": 3,
        "text": "Right posterior oblique"
      },
      {
        "id": 4,
        "text": "Left posterior oblique"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The best view to visualize the <strong>right lung</strong> is the <strong>left anterior oblique.</strong> For the left lung, it is the right anterior oblique.&nbsp;</p>\n<p>The <strong>left anterior oblique</strong> view demonstrates the maximum area of the<strong> right lung field</strong>. It is also used for the assessment of both the&nbsp;<strong>ventricles</strong>,<strong> left atrium</strong>, aortic window, and <strong>aorta</strong>.</p>\n<p>The <strong>right anterior oblique</strong> view demonstrates the maximum area of the<strong> left lung field</strong>. It is used for the assessment of the <strong>pulmonary artery</strong>, <strong>right ventricle</strong>, and <strong>right atrium</strong></p>\n<p>Both these views are also used in coronary angiography.</p>\n<p>The image below shows the right anterior oblique (image 1) and the left anterior oblique (image 2) views of chest radiograph:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/908464067c7943a6bb26f96c3652de68x1280x806.JPEG"
    ]
  },
  {
    "text": "MR spectroscopy graph of a child shows the following:\n\nWhat is the most likely diagnosis ?",
    "choices": [
      {
        "id": 1,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Canavan\u2019s disease"
      },
      {
        "id": 4,
        "text": "Juvenile myoclonic epilepsy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given MR spectroscopy image shows a <strong>peak in NAA levels</strong> ( N-acetyl aspartate). This is characteristic of <strong>Canavan&rsquo;s disease.&nbsp;</strong>The peak is abnormally high due to decreased catabolization of NAA.</p>\n<p><strong>NAA</strong> is a neuronal marker and is <strong>decreased</strong> in cases of insults to brain</p>\n<ul>\n<li>Neoplasm</li>\n<li>Infarct</li>\n<li>Epilepsy</li>\n<li>Dementia</li>\n</ul>\n<p><strong>MR spectroscopy</strong>&nbsp;is a non-invasive means of obtaining&nbsp;<strong>metabolic information</strong>.&nbsp;The image below shows a normal MR spectroscopy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/f1b8dcf8bee94c4d8a28f620b37fcdb6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7e70937bf25841718a843eea5c7403a3x1279x1223.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a feature of renovascular hypertension on IVU?",
    "choices": [
      {
        "id": 1,
        "text": "Delayed wash out of contrast"
      },
      {
        "id": 2,
        "text": "Ureteral kinking"
      },
      {
        "id": 3,
        "text": "Filling defect in calyces"
      },
      {
        "id": 4,
        "text": "Normal or small sized kidney"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Filling defect incalyces is not a feature of renovascular hypertension on IVU.</p>\n<p>IVU findings of Renal vascular hypertension are :</p>\n<ul>\n<li><strong>Delayed or absent nephrogram</strong></li>\n<li><strong>Normal or atrophic kidney </strong>with atrophic deformity or abnormality</li>\n<li><strong>Ureteral kinking</strong> (in retroperitoneal fibrosis)</li>\n<li>Rim Nephrogram</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man complains of right hip pain while walking up the stairs. He has been on long-term steroid therapy for rheumatoid arthritis. Physical examination and radiograph of the hip are unremarkable. What is the best imaging modality for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "MRI scan"
      },
      {
        "id": 2,
        "text": "CT scan"
      },
      {
        "id": 3,
        "text": "Bone scan"
      },
      {
        "id": 4,
        "text": "PET scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario of a patient with hip pain on chronic glucocorticoid therapy, with non-significant findings on radiographs and exam, is suggestive of avascular necrosis (<strong>AVN</strong>) of the <strong>femoral head. </strong>The best imaging modality for this is <strong>MRI</strong>.</p>\n<p><strong>Long-term steroid</strong> usage is a risk factor for the development of AVN.\u00a0MRI allows the identification of avascular necrosis of the femoral head in earlier stages and also helps determine the exact stage and extent of the pathologic process.</p>\n<p>The X-ray below shows flattening of the femoral head and degenerative changes associated with osteonecrosis or AVN.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a7c6680d38048fd850c612eca6e1838x594x790.JPEG"
    ]
  },
  {
    "text": "What is the device shown in the image given below used for?",
    "choices": [
      {
        "id": 1,
        "text": "Teletherapy"
      },
      {
        "id": 2,
        "text": "Brachytherapy"
      },
      {
        "id": 3,
        "text": "Radioactive iodine therapy"
      },
      {
        "id": 4,
        "text": "Targeted therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The device shown in the image is a<strong> remote afterloader</strong>. Remote afterloading is related to <strong>brachytherapy</strong>.</p>\n<p><strong>Brachytherapy</strong> is a method of treatment in which sealed radioactive sources are used to deliver <strong>radiation</strong> at a <strong>short distance</strong> by interstitial, intracavitary, or surface application.</p>\n<p>The following isotopes are used in brachytherapy:</p>\n<ul>\n<li><strong>Iodine-125</strong> and<strong>\u00a0</strong><strong>Iridium-192 </strong>are<strong>\u00a0</strong>used in low-dose rate (LDR) brachytherapy.\u00a0</li>\n<li><strong>Cobalt-60</strong>\u00a0is used for high-dose rate (HDR) brachytherapy.</li>\n</ul>\n<p>Afterloading is the process of placing the radioactive material into the target region. This is either done manually by the oncologist or by using remote afterloading devices.</p>\n<p><strong>Remote afterloading</strong> devices enable us to<strong> eliminate direct contact</strong> with <strong>radioactive</strong> sources during administration. It protects healthcare professionals from radiation exposure by securing the radiation source in a <strong>shielded, safe manner</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f7ce5f26b2b04b3cbbd74536f8734c41.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The skull X-ray of a patient who presented with bone pains is shown below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Paget's disease"
      },
      {
        "id": 2,
        "text": "Multiple myeloma"
      },
      {
        "id": 3,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 4,
        "text": "Osteomyelitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The radiograph shows <strong>cotton wool skull</strong>&nbsp;which is diagnostic of <strong>Paget&rsquo;s disease.</strong></p>\n<p>Radiological features during the early phase of this disease include osteolytic (lucent) regions which is later followed by coarse trabeculae and bony enlargement. Sclerotic changes occur much later in the disease process. The lesions seen are:</p>\n<ul>\n<li>Osteoporosis circumscripta: large, well-defined lytic lesion</li>\n<li><strong>Cotton wool appearance</strong>: mixed lytic and sclerotic lesions of the skull</li>\n<li>Diploic widening: both inner and outer calvarial tables are involved, with the former usually more extensively affected</li>\n<li><strong>Tam o'Shanter sign</strong>: frontal bone enlargement, with the appearance of the skull falling over the facial bones, like a Tam o' Shanter hat.</li>\n</ul>\n<p>The image below shows cotton wool appearance on skull X-ray:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5682d5626b494333a6247e420fe106e9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00125f11309f4ce2a41aca620101003bx618x458.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de01dbcee404407db5a80e87e893c233x1200x658.JPEG"
    ]
  },
  {
    "text": "Given below is a barium meal study of a child. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Duodenal atresia"
      },
      {
        "id": 2,
        "text": "Congenital hypertrophic pyloric stenosis"
      },
      {
        "id": 3,
        "text": "Gastric volvulus"
      },
      {
        "id": 4,
        "text": "Annular pancreas"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given barium meal study is showing <strong>string sign </strong>and <strong>mushroom sign </strong>is<strong>\u00a0</strong>suggestive of<strong> congenital hypertrophic pyloric stenosis</strong> (CHPS).\u00a0</p>\n<p>Congenital (infantile) hypertrophic pyloric stenosis is a condition caused by hypertrophy of the circular pyloric muscles of the stomach, leading to <strong>gastric outlet obstruction</strong>. It typically presents between 2 to 6 weeks of age with progressive, forceful, <strong>non-bilious vomiting</strong> immediately after feeding. This results in <strong>hypochloremic metabolic alkalosis</strong> due to the loss of fluid, hydrogen and chloride ions.\u00a0</p>\n<p>On examination, a firm, movable, <strong>olive-shaped mass</strong> is palpable in the epigastrium., often accompanied by <strong>visible gastric peristalsis</strong>. <strong>Ultrasound </strong>is the investigation of choice for this condition.\u00a0</p>\n<p>Given below is the barium meal study showing string sign and mushroom sign:\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3b3df2a12a594060805eb1692e0b57bd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7300441f56f043c3ab2f44eaf6f7d6cfx1280x1316.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49a16946311b4181940af71447f438ccx1280x1282.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a66aaf0cf744ede802dda0b46924d99x1279x1328.PNG"
    ]
  },
  {
    "text": "CT scan of a patient is being reviewed. Identify the given pathology.",
    "choices": [
      {
        "id": 1,
        "text": "Hydatid lung"
      },
      {
        "id": 2,
        "text": "Lung abscess"
      },
      {
        "id": 3,
        "text": "Pneumatocele"
      },
      {
        "id": 4,
        "text": "Emphysematous bullae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The CT shows an air-fluid level with floating membranes (marked using yellow arrows in the image below) characteristic of a <strong>hydatid cyst</strong>. It is called a <strong>water lily</strong> or <strong>camalote sign</strong>. The most common location of hydatid cysts is<strong>\u00a0</strong>the<strong> liver</strong>, followed by the <strong>lung</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/572ad0b7f8814f039a6fdbdf2ae96188.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/438c3ce4f14b498fb49e8ec7044457ebx600x667.JPEG"
    ]
  },
  {
    "text": "In which of the following conditions is the given X-ray finding seen?",
    "choices": [
      {
        "id": 1,
        "text": "Esophageal atresia"
      },
      {
        "id": 2,
        "text": "Esophageal stenosis"
      },
      {
        "id": 3,
        "text": "Reflux esophagitis"
      },
      {
        "id": 4,
        "text": "Barrett's esophagus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is a barium swallow X-ray showing a <strong>feline esophagus</strong> suggestive of <strong>reflux esophagitis</strong>.</p>\n<p>The<strong> feline esophagus</strong>\u00a0is also known as\u00a0<strong>esophageal shiver</strong>. These folds are 1-2 mm thick and run <strong>horizontally</strong> around the entire circumference of the esophageal lumen. It is thought to be due to the contraction of the muscularis mucosae of the esophagus. This results in the shortening of the esophagus and the bunching up of the mucosa in the lumen.\u00a0</p>\n<p>The appearance is almost always associated with active <strong>gastroesophageal reflux</strong>.\u00a0The findings are <strong>transient</strong>, seen <strong>following reflux</strong> and not during swallowing. The appearance is confined to the <strong>distal two-thirds</strong> of the thoracic esophagus.\u00a0</p>\n<p>It can also be seen in <strong>hiatus hernia</strong> and <strong>eosinophilic esophagitis</strong>. Here, the folds are <strong>permanent</strong> and associated with <strong>strictures</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/01b23632376a4b5aaa616d63a438657e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What dye is used for the diagnosis of esophageal perforation?",
    "choices": [
      {
        "id": 1,
        "text": "Gastrograffin"
      },
      {
        "id": 2,
        "text": "Iohexol"
      },
      {
        "id": 3,
        "text": "Gadolinium"
      },
      {
        "id": 4,
        "text": "Barium sulphate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Iohexol </strong>is the contrast medium used for the diagnostic work-up for a suspected <strong>esophageal perforation.</strong>\u00a0</p>\n<p>Although<strong> gastrograffin</strong> (water-soluble) was used previously, it has a high chance of causing aspiration pneumonitis and pulmonary edema consequently. Hence it is not preferred nowadays. (Option A)</p>\n<p>Barium contrast is not used in esophageal perforation as it causes barium-related inflammation of the mediastinum. (Option D)</p>\n<table style=\"height: 173px;\" width=\"420\">\n<tbody>\n<tr>\n<td style=\"width: 202px;\"><strong>Contraindications to the use of barium contrast</strong></td>\n<td style=\"width: 202px;\"><strong>Alternative dyes used</strong></td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">Tracheoesophageal fistula</td>\n<td style=\"width: 202px;\">Dianosil- water-soluble, non-ionic agent</td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">Esophageal perforation</td>\n<td style=\"width: 202px;\">Iohexol</td>\n</tr>\n<tr>\n<td style=\"width: 202px;\">Perforation peritonitis</td>\n<td style=\"width: 202px;\">Gastrograffin / Iohexol</td>\n</tr>\n</tbody>\n</table>\n<p>Given below is a plain chest radiography with a water-soluble contrast swallow, showing contrast leakage in a patient with spontaneous rupture of the esophagus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4643e814ca784c89915f369848f551d3x600x420.JPEG"
    ]
  },
  {
    "text": "A 24-year-old woman presents with chronic bloody diarrhea and abdominal pain. A barium enema was done and is as shown. What is her likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ulcerative colitis"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Crohns disease"
      },
      {
        "id": 4,
        "text": "Sigmoid volvulus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario along with the<strong> lead pipe</strong> <strong>appearance</strong> of the colon in the barium study is suggestive of<strong>\u00a0ulcerative colitis</strong>.\u00a0</p>\n<p>Ulcerative colitis is an inflammatory bowel disease resulting in <strong>superficial</strong> erosions confined to the mucosa and submucosa of the colon. It starts from the rectum and extends proximally in a continuous manner. Clinical features include abdominal pain, diarrhea (often with blood), rectal bleeding, tenesmus, and passage of mucus.\u00a0</p>\n<p>On barium studies, the lead pipe appearance refers to the complete <strong>loss </strong>of<strong> haustral markings</strong> in the affected section of the colon, which appears smooth-walled and cylindrical, resulting from chronic inflammation.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8abbcdf657964919ba30ac567cdf09a5.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "During intravenous pyelography of a patient, the left kidney could not be visualized. What condition is this suggestive of?",
    "choices": [
      {
        "id": 1,
        "text": "Duplicated collecting system"
      },
      {
        "id": 2,
        "text": "Polycystic kidney disease"
      },
      {
        "id": 3,
        "text": "Multicystic dysplastic kidney"
      },
      {
        "id": 4,
        "text": "Renal hypoplasia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Non-visualization</strong> of the kidney on IVP is seen in the case of\u00a0<strong>multicystic dysplastic kidney </strong>(MCDK).</p>\n<p>MCDK is a form of renal dysplasia characterized by multiple,<strong> non-communicating cysts</strong> of varying sizes, separated by dysplastic parenchyma, with the absence of a normal pelvicalyceal system. It results from a developmental abnormality due to failure of the renal mesenchyme to unite with the ureteric bud. This condition is associated with ureteral or ureteropelvic atresia, and the affected kidney is non-functional.\u00a0</p>\n<p>Most cases of MCDK are detected <strong>antenatally</strong> through <strong>ultrasonography</strong>. In some cases, the cysts identified prenatally may regress in utero, resulting in the affected kidney being undetectable on imaging at birth. Renal <strong>ultrasonography</strong> is the initial investigation of choice. It reveals a <strong>soap bubble </strong>appearance.\u00a0Bilateral MCDK can lead to pulmonary hypoplasia and\u00a0<strong>Potter syndrome</strong>.</p>\n<p>The following image shows a non-visualized right kidney (red arrow).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e0bdb99e1d574639b2049ec5889afdf5x360x308.PNG"
    ]
  },
  {
    "text": "A 48-year-old woman underwent retrograde ureterography as part of an evaluation for intermittent loin pain and dysuria. The following finding is seen. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ureteric calculi"
      },
      {
        "id": 2,
        "text": "Tuberculosis of ureter"
      },
      {
        "id": 3,
        "text": "Transitional cell cancer of ureter"
      },
      {
        "id": 4,
        "text": "Hydroureter"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given retrograde ureterogram shows focal dilatation of the ureter by an intraluminal mass called a <strong>goblet</strong>\u00a0or <strong>champagne glass sign</strong>. It is most commonly caused by <strong>transitional cell carcinoma\u00a0</strong>of the <strong>ureter.\u00a0</strong>\u00a0</p>\n<p>Transitional cell carcinoma of the ureter can manifest as focal, eccentric, or circumferential wall thickening. On imaging, it often appears as fixed filling defects or irregular narrowing with proximal shouldering, a characteristic finding known as a <strong>goblet sign</strong> or <strong>champagne glass sign.</strong> This sign occurs due to <strong>luminal dilatation</strong> distal to the tumour, caused by the slow-growing tumor expanding the ureteral lumen. Additional features include <strong>hydronephrosis</strong>, with or without hydroureter, and, in advanced cases, <strong>absent renal function</strong> due to chronic obstruction.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b3a27b3911d645c292d98287e1af349a.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b6929a4dcf7439ba70ed4e8c1c6aab9x510x565.GIF"
    ]
  },
  {
    "text": "Milkman\u2019s lines are found in",
    "choices": [
      {
        "id": 1,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 2,
        "text": "Osteoporosis"
      },
      {
        "id": 3,
        "text": "Osteomalacia"
      },
      {
        "id": 4,
        "text": "Pagets disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Milkman&rsquo;s lines or looser&rsquo;s zone are seen in <strong>osteomalacia.</strong></p>\n<p>This is a <strong>narrow zone of lucency, usually running perpendicular or nearly perpendicular</strong> to the bone cortex</p>\n<p>They are generally accepted as <strong>occurring at sites of stress as subclinical stress</strong> fractures that are repaired by unossified osteoid</p>\n<p>They are frequently bilateral and symmetrical, and occur at regular sites such as the <strong>pubic rami, proximal femur, scapula, lower ribs and ulna.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Best X-RAY view for a small pleural effusion of 25-50 ml:",
    "choices": [
      {
        "id": 1,
        "text": "PA view"
      },
      {
        "id": 2,
        "text": "Lateral view"
      },
      {
        "id": 3,
        "text": "Lateral decubitus view"
      },
      {
        "id": 4,
        "text": "Not possible  to detect the pleural fluid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Lateral decubitus view can identify as little as 25 ml of pleural fluid.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9211f79cc02a46f69b48707ca519fd53x212x198.JPEG"
    ]
  },
  {
    "text": "On the lateral projection the cardiac silhouette is not formed by _____",
    "choices": [
      {
        "id": 1,
        "text": "Anterior border by right ventricle"
      },
      {
        "id": 2,
        "text": "Posterior border superiorly by left atrium"
      },
      {
        "id": 3,
        "text": "Anterior border by right atrium"
      },
      {
        "id": 4,
        "text": "Posterior  border inferiorly by left ventricle"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>On the lateral projection the cardiac silhouette is not formed by <strong>right atrium in anterior border.</strong></p>\n<p><strong>Cardiac silhouette&nbsp;</strong>refers to the outline of the&nbsp;heart&nbsp;as seen on frontal and lateral&nbsp;chest radiographs&nbsp;and forms part of the&nbsp;cardiomediastinal contour.&nbsp;The size and shape of the cardiac silhouette provide useful clues for underlying disease.</p>\n<p>From the frontal projection, the cardiac silhouette can be divided into right and left borders:</p>\n<ul>\n<li>the&nbsp;<strong>right border</strong>&nbsp;is formed by the&nbsp;right atrium\n<ul>\n<li>the&nbsp;superior vena cava&nbsp;entering superiorly and the&nbsp;inferior vena cava&nbsp;often seen at its lower margin</li>\n</ul>\n</li>\n<li>the&nbsp;<strong>left border</strong>&nbsp;is formed by the&nbsp;left ventricle&nbsp;and&nbsp;left atrial appendage\n<ul>\n<li>the&nbsp;pulmonary artery,&nbsp;aortopulmonary window&nbsp;and&nbsp;aortic notch&nbsp;extend superiorly</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8dc7ac6a688046f2bd840bf222a4edcbx280x320.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/53ad09be8f64479ca16e8341834b59ccx800x1109.JPEG"
    ]
  },
  {
    "text": "Identify the congenital anomaly shown in the MRI image ______",
    "choices": [
      {
        "id": 1,
        "text": "Holoprosencephaly"
      },
      {
        "id": 2,
        "text": "Lissencephaly"
      },
      {
        "id": 3,
        "text": "Schizencephaly"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The MRI image shows <strong>absence of gyri and sulci</strong> suggestive of <strong>Lissencephaly.</strong></p>\n<p><strong>Lissencephaly</strong> represents a group of disorders caused by <strong>defective</strong> <strong>neuronal migration</strong> in the period between the 8th and 14<sup>th</sup>gestational weeks, <strong>resulting in the lack of development of gyri and sulci.</strong></p>\n<p>Option c: Schizencephaly is the presence of unilateral or bilateral clefts within the cerebral hemispheres due to an abnormality of morphogenesis.</p>\n<p>Option b: Holoprosencephaly is a developmental disorder of the brain that results from the defective formation of the prosencephalon and inadequate induction of forebrain structures.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/20330ffb21e5446d80c3a6238ea07c33.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What condition causes the skull appearance as in the given radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 2,
        "text": "Multiple myeloma"
      },
      {
        "id": 3,
        "text": "Hyperthyroidism"
      },
      {
        "id": 4,
        "text": "Paget's disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given X-ray of the skull shows <strong>multiple radiolucent</strong> lytic lesions, typical of the <strong>salt</strong> and <strong>pepper</strong> appearance (<strong>pepperpot</strong> appearance). This is seen in <strong>hyperparathyroidism.</strong></p>\n<p>In hyperparathyroidism, there is\u00a0<strong>resorption</strong> of the <strong>trabecular</strong> bone of the skull (which causes the radiolucent areas) in combination with <strong>cystic</strong> areas of <strong>osteopenia.</strong>\u00a0There is also a <strong>loss</strong>\u00a0of <strong>definition</strong> between the <strong>inner</strong> and <strong>outer tables</strong> of the skull.</p>\n<p>Other options:</p>\n<p>Option B: In <strong>multiple myeloma,</strong> multiple well-defined <strong>\"punched out\"</strong> lytic lesions exist.</p>\n<p>Option C: Untreated <strong>hyperthyroidism</strong> for several years can lead to <strong>osteoporosis</strong> of bones.</p>\n<p>Option D: In <strong>Paget's</strong> disease, the pelvis, spine, skull, and proximal long bones are most frequently affected. Radiological skull changes include:</p>\n<ul>\n<li>Osteoporosis <strong>circumscripta:</strong> Large, well-defined lytic lesion</li>\n<li><strong>Cotton wool</strong> appearance:\u00a0Mixed lytic and sclerotic lesions of the skull</li>\n<li><strong>Diploic</strong> widening: Both inner and outer calvarial tables are involved, with the former usually more extensively affected</li>\n<li><strong>Tam o'Shanter</strong> sign: Frontal bone enlargement, with the appearance of the skull falling over the facial bones, like a Tam o'Shanter hat</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0ff7909ab8af4f0ab7233a27e0c58643.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old man presented with anorexia, weight loss, and anemia. Endoscopy revealed a gastric ulcer.  Which of the following barium study finding in this patient is suggestive of a malignant gastric ulcer?",
    "choices": [
      {
        "id": 1,
        "text": "Hampton's line"
      },
      {
        "id": 2,
        "text": "Folds around the ulcer are smooth and even"
      },
      {
        "id": 3,
        "text": "Carman meniscus sign"
      },
      {
        "id": 4,
        "text": "Ulcer extends beyond gastric wall"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The&nbsp;<strong>Carman meniscus sign&nbsp;</strong>is suggestive of a malignant gastric ulcer.</p>\n<p>It is seen in the setting of a large, flat,&nbsp;<strong>malignant</strong> ulcer with healed-up edges. These edges trap the barium, which gives a <strong>convex</strong> formation towards the lumen of the stomach. In <strong>benign</strong> ulcers, it forms a <strong>concave</strong> shape towards the lumen of the stomach.</p>\n<p>The&nbsp;<strong>Kirklin complex</strong>&nbsp;is a combination of the&nbsp;<strong>Carman meniscus sign</strong>&nbsp;associated with a radiolucent semi-circular zone surrounding the elevated ridge of the ulcer. This complex is seen in cases of&nbsp;<strong>gastric adenocarcinoma</strong>&nbsp;in barium studies.</p>\n<p>Differences between benign and malignant gastric ulcers:</p>\n<table style=\"width: 322px; height: 376px;\">\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\"><strong>Barium swallow findings</strong></td>\n<td style=\"height: 13px; width: 90.0312px;\"><strong>Benign</strong></td>\n<td style=\"height: 13px; width: 106px;\"><strong>Malignant</strong></td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\">Hampton&rsquo;s line</td>\n<td style=\"height: 13px; width: 90.0312px;\"><strong>Present</strong></td>\n<td style=\"height: 13px; width: 106px;\">Absent</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\">Extends beyond the gastric wall</td>\n<td style=\"height: 13px; width: 90.0312px;\"><strong>Yes</strong></td>\n<td style=\"height: 13px; width: 106px;\">No</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\">Folds</td>\n<td style=\"height: 13px; width: 90.0312px;\"><strong>Smooth, even</strong></td>\n<td style=\"height: 13px; width: 106px;\">Irregular, nodular, may fuse</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\">Carman meniscus</td>\n<td style=\"height: 13px; width: 90.0312px;\">Absent</td>\n<td style=\"height: 13px; width: 106px;\"><strong>Present</strong></td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 103.969px;\">Ulcer shape</td>\n<td style=\"height: 13px; width: 90.0312px;\">Round, oval, linear</td>\n<td style=\"height: 13px; width: 106px;\">Irregular</td>\n</tr>\n</tbody>\n</table>\n<p>The radiograph&nbsp;below shows thickened, clubbed, interrupted, nodular, and fused folds around a malignant ulcer.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/8fdf619537584e9b9c6241635c98e2b9x267x260.PNG"
    ]
  },
  {
    "text": "Which of the following is not included in the 4 R\u2019s of radiotherapy?",
    "choices": [
      {
        "id": 1,
        "text": "Reoxygenation"
      },
      {
        "id": 2,
        "text": "Reduction"
      },
      {
        "id": 3,
        "text": "Repopulation"
      },
      {
        "id": 4,
        "text": "Repair"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Reduction is not a part of the 4 Rs of radiotherapy.\u00a0</p>\n<p>The <strong>success or failure</strong> of standard clinical <strong>radiation treatment</strong> is determined by the<strong> 4 R\u2019s</strong> of radiobiology. These are described below:</p>\n<ol>\n<li><strong>Repair -\u00a0</strong>cellular recovery occurs a few hours after exposure.\u00a0</li>\n<li><strong>Reoxygenation</strong> - In a tumour, the radioresistant hypoxic cells will selectively survive after a dose fraction, but thereafter, when their oxygen supply improves, their radiosensitivity will increase.</li>\n<li><strong>Reassortment -\u00a0</strong>Cells that survive the first dose of radiation will tend to be in a resistant phase of the cell cycle. Within a few hours, they may progress into a more radiosensitive phase.</li>\n<li><strong>Repopulation -</strong>\u00a0During a 4 to 6-week course of radiotherapy, tumour cells that survive irradiation may proliferate and thus increase the number of cells which must be killed.</li>\n</ol>\n<p><strong>Radiosensitivity,</strong> often known as the <strong>\"fifth R,\"</strong> varies depending on the tissues and tumors involved.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Functional MRI was done for a stroke patient. What is the principle behind this investigation?",
    "choices": [
      {
        "id": 1,
        "text": "BOLD technique"
      },
      {
        "id": 2,
        "text": "Time of fight technique"
      },
      {
        "id": 3,
        "text": "Brownian motion"
      },
      {
        "id": 4,
        "text": "Diffusion of water molecules"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Functional MRI is based on the technique called <strong>BOLD</strong> i.e., <strong>blood oxygen level-dependent technique.</strong></p>\n<p>During a particular <strong>activity</strong>, the corresponding brain area will have <strong>increased oxygen consumption</strong>. Thus, this type of MRI helps in the detection of functions of different brain parts.</p>\n<table style=\"height: 176px; width: 417px;\">\n<tbody>\n<tr>\n<td style=\"width: 173.672px;\"><strong>Types of MRI</strong></td>\n<td style=\"width: 227.328px;\"><strong>Principle</strong></td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Functional MRI</td>\n<td style=\"width: 227.328px;\">Blood oxygen level-dependent (BOLD) technique</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Diffusion tensor MRI</td>\n<td style=\"width: 227.328px;\">Diffusion of water molecules</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">MR angiography</td>\n<td style=\"width: 227.328px;\">Time of flight (TOF)</td>\n</tr>\n<tr>\n<td style=\"width: 173.672px;\">Diffusion-weighted MRI (DWI)</td>\n<td style=\"width: 227.328px;\">Brownian motion</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the best plane for the measurement of volume of hippocampus?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The best plane for measurement of the <strong>volume of the hippocampus</strong> is the <strong>coronal plane, angled perpendicular to the long axis of the hippocampus </strong>in<strong> MRI,</strong> which is represented by the image marked B.<br /><br /></p>\n<p>Coronal MRI is taken perpendicular to the long axis of the temporal horn can be used to measure:</p>\n<ul>\n<li>Volume of hippocampus - measured in <strong>Alzheimer's</strong> disease and <strong>medial temporal seizures</strong></li>\n<li><strong>Medial temporal lobe atrophy</strong> (MTA)</li>\n</ul>\n<p>The planes of MRI are given below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/01f8fa613e1e4e7ab159edee5ad571a0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fd7ffd78af74626a77ce253d45060f2x1280x4062.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf2ec49040674c66b3d3f7f3f01e7688x1280x1423.JPEG"
    ]
  },
  {
    "text": "Exit window used in mammography is made up of",
    "choices": [
      {
        "id": 1,
        "text": "Molybdenum"
      },
      {
        "id": 2,
        "text": "Aluminum"
      },
      {
        "id": 3,
        "text": "Glass"
      },
      {
        "id": 4,
        "text": "Beryllium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most mammography tubes <strong>use beryllium exit windows</strong> between the evacuated tube and the atmosphere</p>\n<p>Difference in mammogram to that of normal radiograph</p>\n<ul>\n<li>It uses <strong>low energy and high amperage waves</strong></li>\n<li>It has <strong>Molybdenum target</strong></li>\n<li>The <strong>filter</strong> is made up of <strong>molybdenum</strong></li>\n<li>It has <strong>single screen cassette</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most sensitive investigation for the diagnosis of pheochromocytoma is",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "MIBG scan"
      },
      {
        "id": 3,
        "text": "CT"
      },
      {
        "id": 4,
        "text": "Sestamibi scan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>MRI scans </strong>are 95% sensitive and almost 100% specific for pheochromocytomas because these tumors have a characteristic appearance on T2-weighted images or after gadolinium.</p>\n<p>MRI is also the <strong>study of choice in pregnant women as there is no risk of radiation exposure</strong>.</p>\n<p><strong>Metaiodobenzylguanidine (MIBG)</strong> is taken up and concentrated by vesicles in the adrenal medullar cells because its structure is similar to <strong>norepinephrine</strong>. Normal adrenal medullary tissue does not take up appreciable MIBG. 131I-radiolabeled MIBG is, therefore, useful for localizing pheochromocytomas especially those in ectopic positions. This test has a reported sensitivity <strong>of 77% to 89% and specificity ranging from 88% to 100%.<br /><br /><br />Note:&nbsp;</strong>Pheochromocytomas are diagnosed by testing 24-hour urine samples for catecholamines and their metabolites and by determining plasma metanephrine levels. <strong>Radiologic studies</strong> are useful to localize tumors and to assess the extent of spread once the diagnosis has been made with biochemical tests.</p>\n<div class=\"page\" title=\"Page 1613\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>However out of the given options, MRI is the best possible answer.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The condition is seen in all except:",
    "choices": [
      {
        "id": 1,
        "text": "Hypoparathyroidism"
      },
      {
        "id": 2,
        "text": "Pseudohypoparathyroidism"
      },
      {
        "id": 3,
        "text": "Pseudopseudohypoparathyroidism"
      },
      {
        "id": 4,
        "text": "Turner\u2019s syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above radiologicalimage shows a short 4<span style=\"font-size: 8pt;\"><sup>th</sup></span> metacarpal.</p>\n<p><strong>Causes of short 4<span style=\"font-size: 8pt;\"><sup>th</sup></span> metacarpal:</strong></p>\n<ul>\n<li>Pseudohypoparathyroidism</li>\n<li>Pseudopseudohypoparathyroidism</li>\n<li>Turner&rsquo;s syndrome</li>\n<li>Idiopathic</li>\n<li>Post infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8b0233e96eff4258a23d259ea2444baa.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "X-Ray positioning shown in the photograph is used to visualize:",
    "choices": [
      {
        "id": 1,
        "text": "Sella turcica"
      },
      {
        "id": 2,
        "text": "Optic foramen"
      },
      {
        "id": 3,
        "text": "Inferior orbital foramen"
      },
      {
        "id": 4,
        "text": "Superior orbital foramen"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The X-ray positioning is of <strong>Rhese view</strong> used to visualise <strong>optic foramen</strong>.</p>\n<p>Rhese view: The patient is positioned with the orbit to be studied. The zygoma, nose and chin should touch the cassette. The xray beam is directed posterioranteriorly at 40 degrees to midsagittal plane.</p>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/ed6ba56915544956b3cd9d05dac512c5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6129b43bad5a4ec9a43d4a2872819c4bx706x569.PNG"
    ]
  },
  {
    "text": "The endoscope type shown in photograph is useful for:",
    "choices": [
      {
        "id": 1,
        "text": "Gastroesophegal reflux disease"
      },
      {
        "id": 2,
        "text": "Motility disorder"
      },
      {
        "id": 3,
        "text": "Bleeding disorder"
      },
      {
        "id": 4,
        "text": "Congential malformations"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The Endoscope type shown is CAPUSLE ENDOSCOPY useful in <strong>gastrointestinal bleeding disorders</strong>.</p>\n<p>Capsule endoscopy is a procedure that uses a tiny wireless camera to take pictures of your digestive tract. A capsule endoscopy camera sits inside a vitamin-size capsule you swallow. As the capsule travels through your digestive tract, the camera takes thousands of pictures that are transmitted to a recorder you wear on a belt around your waist.</p>\n<p>Uses:&nbsp; &nbsp;</p>\n<ul>\n<li>Gastrointestinal bleeding</li>\n<li>Diagnose inflammatory bowel disease</li>\n<li>Diagnose cancer in small intestine or other part of digestive tract.</li>\n<li>Diagnose celiac disease</li>\n<li>Screen for polyps in small intestine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0cd4dc465ed4418dbf100c313212456f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 52-year-old female patient with breathlessness, and dry cough on and off for the past 6 months. She provides a history of working in the sand filtration segment in a brick production unit for the last 15 years. An X-ray was done and is given below. Which of the following is not a differential diagnosis for the X-ray finding?",
    "choices": [
      {
        "id": 1,
        "text": "Sarcoidosis"
      },
      {
        "id": 2,
        "text": "Histoplasmosis"
      },
      {
        "id": 3,
        "text": "Blastomycosis"
      },
      {
        "id": 4,
        "text": "Asbestosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The x-ray image shows <strong>eggshell calcification</strong>, <strong>Asbestosis</strong> is not a differential diagnosis for eggshell calcification.</p>\n<p>There are no pathognomonic radiological features specific to asbestosis.<strong> Chest radiographs</strong> may show <strong>irregular opacities</strong> with a <strong>fine reticular pattern</strong>. Additional evidence of asbestos exposure such as<strong> calcified or noncalcified pleural plaques</strong>\u00a0may be evident.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ea0b9ff924c64315b8421b83d1750bba.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The filament shown in the photograph is generally composed of ?",
    "choices": [
      {
        "id": 1,
        "text": "Molybedenum"
      },
      {
        "id": 2,
        "text": "Selenium"
      },
      {
        "id": 3,
        "text": "Tungsten"
      },
      {
        "id": 4,
        "text": "Gold"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The filament is made up of <strong>Tungsten</strong>.</p>\n<p>The cathode in an x-ray tube consists of a filament and a focusing cup. The&nbsp;<strong>filament</strong>&nbsp;is the source of electrons within the x-ray tube. It is a coil of <strong>tungsten </strong>wire about 2\u202fmm in diameter and 1\u202fcm or less in length. Filaments typically contain about 1% thorium, which greatly increases the release of electrons from the heated wire.</p>\n<p>The filament is mounted between two stiff support wires that carry an electrical current. These two mounting wires lead through the glass envelope and connect to both the high-voltage and the low-voltage electrical sources. The filament is heated to incandescence by the flow of current from the low-voltage source and emits electrons at a rate proportional to the temperature of the filament.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6c0f05ad2fa643609bd57cee0bbe0aca.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b7577fb12c264405a82f49464e3ef879x1280x1102.JPEG"
    ]
  },
  {
    "text": "A 60-year-old male complains of recurrent cough and difficulty in breathing for 2 months. A chest X-ray is provided below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Right upper lobe collapse"
      },
      {
        "id": 2,
        "text": "Left lower lobe collapse"
      },
      {
        "id": 3,
        "text": "Right lower lobe collapse"
      },
      {
        "id": 4,
        "text": "Left upper lobe collapse"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The chest x-ray shown here demonstrates the <strong>Luftsichel sign, </strong>which translates from German as<strong> 'air crescent'. </strong>It is typically seen in the\u00a0<strong>left upper lobe collapse, </strong>resulting in para-mediastinal translucency.\u00a0\u00a0</p>\n<p>It occurs due to <strong>hyperinflation</strong> of the superior segment of the<strong> </strong>left lower lobe, creating a crescent of air between the aortic arch and the medial border of the collapsed left upper lobe.</p>\n<p>The CT below shows the collapse of the left upper lobe.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a0628047f3b74ffab7a504fb6dae810d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96acc1287a154e13b311c935439f4abex600x440.JPEG"
    ]
  },
  {
    "text": "What is the most common radiation used in radiotherapy?",
    "choices": [
      {
        "id": 1,
        "text": "Gamma rays"
      },
      {
        "id": 2,
        "text": "X-rays"
      },
      {
        "id": 3,
        "text": "Beta rays"
      },
      {
        "id": 4,
        "text": "Alpha rays"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>X-rays</strong> are the <strong>most common</strong> form of radiation used in <strong>radiotherapy.\u00a0</strong>They are produced from <strong>LINAC </strong>(Linear Accelerator).</p>\n<p>If X-rays are not among the options, the second best answer would be <strong>gamma rays</strong>.</p>\n<p>Note: Sources of radiation exposure:</p>\n<ul>\n<li><strong>Natural</strong>: Cosmic rays, environmental (terrestrial and atmospheric), and radioactive isotopes - of potassium (K-40) and carbon (C-14).</li>\n<li><strong>Man-made</strong>: Medical and dental (X-rays, radioisotopes), occupational exposure and nuclear (radioactive fallout).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with prostate cancer is undergoing brachytherapy with Iridium-192. What is its half-life?",
    "choices": [
      {
        "id": 1,
        "text": "5.2 years"
      },
      {
        "id": 2,
        "text": "8 days"
      },
      {
        "id": 3,
        "text": "73.83 days"
      },
      {
        "id": 4,
        "text": "28 years"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The half life of&nbsp;<strong>Iridium 192</strong> is<strong>&nbsp;73.83 days</strong>.&nbsp;</p>\n<p>It is used in brachytherapy for prostate cancer.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is PACS in medical imaging?",
    "choices": [
      {
        "id": 1,
        "text": "Planned archiving and communication system"
      },
      {
        "id": 2,
        "text": "Planned archiving computerized system"
      },
      {
        "id": 3,
        "text": "Picture archiving and communication system"
      },
      {
        "id": 4,
        "text": "Picture archiving or computerized system"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Picture archiving and communication system </strong>(PACS) is a modality of imaging technology that helps in image transmission from the site of acquisition of images, to multiple different sites at different locations.</p>\n<p>This is not only economical (film-less department), but is also convenient to access multiple modalities (radiographs, CT, MRI, ultrasound) simultaneously at multiple locations within the hospital or across the globe.</p>\n<p>Digital Imaging and Communications in Medicine\u00a0(<strong>DICOM</strong>) is a standard for handling, storing, printing, and transmitting information in medical imaging.\u00a0DICOM is used worldwide to store, exchange, and transmit medical images.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 61-year-old stroke patient is scheduled to undergo cerebral perfusion scanning. Which of the following would not be useful?",
    "choices": [
      {
        "id": 1,
        "text": "82RbCl"
      },
      {
        "id": 2,
        "text": "15O-H2O"
      },
      {
        "id": 3,
        "text": "13N-NH3"
      },
      {
        "id": 4,
        "text": "18F-FDG"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>18F-FDG</strong> is a metabolic tracer that is a glucose analog tagged with positron-emitting fluorine-18. It has <strong>no role</strong> in measuring <strong>cerebral perfusion</strong>.</p>\n<p>The following radiotracers are used for the measurement of&nbsp;cerebral perfusion:</p>\n<ul>\n<li>82RbCl (Rubidium chloride)</li>\n<li>15O-H2O&nbsp;</li>\n<li>13N-NH3 (Ammonia)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Radiology Test I';
        const quizFilename = 'radiology-test-i-550f875c.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>