<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>45 Oral Cavity & Salivary Glands - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In patients with confirmed sialolithiasis, what is the most common location of stone formation?",
    "choices": [
      {
        "id": 1,
        "text": "Parotid gland"
      },
      {
        "id": 2,
        "text": "Minor salivary glands"
      },
      {
        "id": 3,
        "text": "Submandibular gland"
      },
      {
        "id": 4,
        "text": "Sublingual gland"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The&nbsp;<strong>most common site</strong> for salivary gland stone formation is the&nbsp;<strong>submandibular gland</strong>&nbsp;due to highly viscous&nbsp;secretions.&nbsp;</p>\n<p>80% of<strong> submandibular </strong>stones are<strong> radio-opaque, </strong>while <strong>parotid duct </strong>stones are usually <strong>radiolucent</strong> and rarely visible on plain radiography.&nbsp;Parotid gland<strong> sialography</strong> is usually required to identify the stone. A stone located in the collecting duct or within the gland may be managed by either <strong>endoscopic retrieval </strong>or<strong> lithotripsy</strong>; in rare cases, surgical removal via a parotidectomy approach may be required.</p>\n<p>&nbsp;The below USG image shows a stone in the Wharton duct of the submandibular gland.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2d49dd0e04d44facbdc8910d29aa1f4ax781x575.JPEG"
    ]
  },
  {
    "text": "Which of the following is true regarding management considerations in a patient with submandibular gland stones?",
    "choices": [
      {
        "id": 1,
        "text": "Surgical gland excision is the treatment of choice if patient is unresponsive to conservative management"
      },
      {
        "id": 2,
        "text": "Associated chronic sialadenitis is a contraindication for sialendoscopy"
      },
      {
        "id": 3,
        "text": "Conventional radiography is mostly useless as more than 80% of submandibular stones are radiolucent"
      },
      {
        "id": 4,
        "text": "Stones proximal to the lingual nerve can be removed via an intra-oral approach"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>If the stone is<strong> proximal to the lingual nerve</strong>, stone retrieval can be done via an<strong> intraoral surgical approach</strong> under general anesthesia.</p>\n<p><strong>80%</strong> of submandibular stones are <strong>radio-opaque</strong>. Conventional radiography is useful in the initial workup of salivary stones, but ultrasound, CT, MRI, and sialendoscopy are required for accurate diagnosis and localization (especially for smaller and parenchymal stones).</p>\n<p>The only <strong>contraindication</strong> for sialendoscopy is <strong>acute sialadenitis. </strong>This is because\u00a0sialendoscopy and ductal dilation is more difficult in the setting of inflammation and there will be a greater likelihood of ductal trauma and potential spread of infection.</p>\n<p>Management of sialolithiasis should begin with <strong>conservative</strong> measures, oral hydration, analgesia, massaging of gland, sialogogues, and antibiotics (if there are signs of infection). If unsuccessful, the next step is based on the sialolith's size, number, and location:</p>\n<ul>\n<li><strong>Small stones (&lt;4mm) - endoscopic removal using Dormia basket.</strong></li>\n<li><strong>larger stones\u00a0</strong>- <strong>external shockwave lithotripsy (ESWL) + fragment removal </strong>or<strong>\u00a0 Open surgery and stone removal</strong></li>\n<li><strong>Surgical excision</strong> of the gland should always be a <strong>last resort</strong></li>\n</ul>\n<p>If <strong>distal to lingual nerve</strong>: Make a <strong>longitudinal</strong> <strong>incision</strong> over the duct. Remove the stone. Suture the duct using absorbable suture.\u00a0\u00a0\u00a0\u00a0\u00a0</p>\n<p>If <strong>proximal to lingual nerve</strong>: <strong>intraoral</strong> approach\u00a0\u00a0</p>\n<p>The image below shows a stone in the submandibular salivary duct.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2924112e405a40ff90f9ec512c1f0183x1095x1198.JPEG"
    ]
  },
  {
    "text": "A 56-year-old man presented with complaints of recurrent bilateral painless swelling over the parotid glands. FNAC done showed acinar cell hypertrophy without any inflammatory signs.  All of the following are associated with this condition except?",
    "choices": [
      {
        "id": 1,
        "text": "Diabetes mellitus"
      },
      {
        "id": 2,
        "text": "Alcoholism"
      },
      {
        "id": 3,
        "text": "Bulimia nervosa"
      },
      {
        "id": 4,
        "text": "Hyperthyroidism"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario and FNAC report of acinar hypertrophy are suggestive of <strong>sialadenosis</strong>. Hyperthyroidism is <strong>not</strong> associated with sialadenosis.</p>\n<p><strong>Sialosis (sialadenosis)</strong> is defined as an asymptomatic, <strong>non-inflammatory</strong>, non-neoplastic parenchymal <strong>salivary gland</strong> disease. It is accompanied by a <strong>persistent painless bilateral swelling </strong>of the salivary glands, most commonly involving the <strong>parotid glands</strong>. Most cases of sialadenosis are observed in patients between <strong>40 to 70</strong> years of age, and the salivary gland swellings are often <strong>soft and symmetrical</strong>.&nbsp;On FNAC, acinar cell hypertrophy is seen without any inflammatory signs.</p>\n<p>Sialadenosis <strong>is associated</strong> with the following conditions:</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Nutritional disorders</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Bulimia nervosa</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Vitamin deficiency</li>\n</ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Endocrine disorders</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Diabetes mellitus</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Hypothyroidism</strong></li>\n</ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Metabolic disorders</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Obesity</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Cirrhosis</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Malabsorption</li>\n</ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Autoimmune disorders&nbsp;</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Sj&ouml;gren disease&nbsp;</li>\n</ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Drug-induced&nbsp;</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Valproic acid</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Thiourea</li>\n</ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Pregnancy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Alcoholism</strong></li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man on routine dental checkup was found to have the following finding on orthopantomogram. What is the reason for the finding marked with the arrow?",
    "choices": [
      {
        "id": 1,
        "text": "Benign tumor of alveolus"
      },
      {
        "id": 2,
        "text": "Submandibular gland cyst"
      },
      {
        "id": 3,
        "text": "Ectopic salivary tissue"
      },
      {
        "id": 4,
        "text": "Dentigerous cysts"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given orthopantomogram shows a right-sided <strong>clearly demarcated radiolucent lesion</strong> suggestive of a <strong>stafne bone cyst</strong>. It is the most common type of <strong>ectopic salivary tissue</strong>.</p>\n<p>It presents as an <strong>asymptomatic</strong>, clearly demarcated radiolucent lesion at the angle of the mandible, characteristically below the inferior dental neurovascular bundle. It is more common in <strong>males</strong>. Usually, no treatment is required.</p>\n<p>A <strong>dentigerous cyst</strong> is a cyst in relation to an <strong>unerupted tooth</strong>. Most commonly involves the <strong>3rd molar</strong>. It is managed by enucleation and removal of the tooth.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9b3224e10b0c485694da99bda94bd987.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 5 year-old-boy was brought to the OPD by his parents with a painless, soft, translucent swelling under the tongue. On examination, the swelling is as seen below. Which of the following statements best describe his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Mucous retention cyst from a minor salivary gland"
      },
      {
        "id": 2,
        "text": "Mucous extravasation cyst from sublingual gland"
      },
      {
        "id": 3,
        "text": "Mucous extravasation cyst from a minor salivary gland"
      },
      {
        "id": 4,
        "text": "Mucous retention cyst from sublingual gland"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario and image points to a diagnosis of an oral&nbsp;<strong>ranula. </strong>It&nbsp;is a mucous<strong>&nbsp;extravasation cyst</strong>&nbsp;arising from the&nbsp;<strong>sublingual gland</strong>.</p>\n<p><strong>Ranula</strong> is a <strong>transilluminant</strong>&nbsp;mucocele. It&nbsp;is also known as \"<strong>frog's belly</strong>\", as it resembles the vocal sacs of a frog. It is of two types:</p>\n<ul>\n<li><strong>Oral ranula -&nbsp;</strong>It is a<strong> benign cystic lesion formed by extravasation of mucus, involving the sublingual gland.&nbsp;</strong>Clinically present as cystic swelling in the floor of the mouth. On examination <strong>fluctuation test</strong> and <strong>transillumination test is positive</strong>. It is conservatively managed by&nbsp;<strong>marsupialisation</strong>. Definitive management is <strong>excision of the cyst</strong>. Some may resolve spontaneously.</li>\n<li>Cervical or <strong>plunging ranula</strong>- is a rare type of <strong>retention cyst</strong> arising from the sublingual gland. The mucous passes through the mylohyoid muscle diaphragm to enter the neck. Clinically present as <strong>intraoral and cervical swelling</strong>. Diagnosis is made by <strong>USG</strong> or <strong>MRI</strong>. Management includes <strong>excision of&nbsp; sublingual gland + aspiration of saliva out of the sac.</strong></li>\n</ul>\n<p>&nbsp;</p>\n<p>Note: Oral ranulas located in the floor of the mouth can often be confused with an epidermoid cyst.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/05ef2a4a69e143c2b45a44008d73e104.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding salivary gland tumors?",
    "choices": [
      {
        "id": 1,
        "text": "90% of the minor salivary gland tumors are malignant"
      },
      {
        "id": 2,
        "text": "The submandibular gland is the most common site for salivary tumors"
      },
      {
        "id": 3,
        "text": "Adenoid cystic carcinoma is the most common malignant tumor of the salivary gland"
      },
      {
        "id": 4,
        "text": "A salivary gland tumor with perineural invasion is mucoepidermoid carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>90</strong>% of the <strong>minor </strong>salivary gland tumors are <strong>malignant</strong>, and the common sites are the upper lip, palate, and retromolar regions.</p>\n<p>Option B: The <strong>most common site </strong>for salivary tumors is the<strong> parotid gland</strong>, mostly involving the superficial lobe.</p>\n<p>Option C:<strong> Mucoepidermoid carcinoma</strong> is the most common <strong>malignant tumor</strong> of the salivary gland.</p>\n<p>Option D: <strong>Adenoid cystic carcinoma&nbsp;</strong>is known to be associated with perineural invasion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man presents with a slowly progressive swelling over the past 1 and 1/2 years. On examination, it has a variable consistency and appears as shown in the image. What is the probable cause?",
    "choices": [
      {
        "id": 1,
        "text": "Adamantinoma"
      },
      {
        "id": 2,
        "text": "Dermoid cyst"
      },
      {
        "id": 3,
        "text": "Pleomorphic adenoma"
      },
      {
        "id": 4,
        "text": "Sebaceous cyst"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>slowly progressive swelling</strong>, with a <strong>variable consistency</strong>, <strong>lifting the ear lobe</strong>, is suggestive of <strong>pleomorphic adenoma</strong> of the parotid gland.</p>\n<p><strong>Pleomorphic adenoma</strong>, the <strong>most common</strong> benign salivary gland tumor, primarily affects the parotid gland, particularly its superficial lobe. It is also referred to as a <strong>mixed tumor</strong> due to its combination of epithelial and mesenchymal components. This tumor most commonly occurs in <strong>females</strong> around the age of 40.</p>\n<p>Clinical features:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Painless</strong>, <strong>slow-growing swelling</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lobulated, firm, <strong>variable in consistency</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Lifts the earlobe</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">No facial nerve involvement</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Curtain sign positive</strong> - cannot be moved above the zygomatic bone.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">In case of deep lobe involvement, tonsils, and faucial pillars will be pushed medially.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Features of <strong>malignancy</strong> - a <strong>sudden</strong> <strong>increase</strong> in size, <strong>ulceration</strong> of the overlying skin,<strong> facial nerve palsy </strong>(involvement of facial nerve), painful swelling, and<strong> restriction of jaw movements</strong>.</li>\n</ul>\n<p>Fine needle aspiration cytology<strong> (FNAC) </strong>is the<strong> investigation of choice</strong> in diagnosing pleomorphic adenoma. <strong>Open biopsy</strong> is <strong>contraindicated</strong> due to the chances of <strong>injury to the facial nerve</strong>.</p>\n<p>All tumors of the superficial lobe of the parotid gland should be <strong>managed</strong> by <strong>superficial parotidectomy</strong>. <strong>Radical parotidectomy </strong>is performed for <strong>malignant pleomorphic adenoma</strong>.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Adamantinoma</strong> is a low-grade malignant tumor that usually presents with pre-tibial pain and swelling since it most commonly affects the <strong>tibial diaphysis.</strong></p>\n<p>Option B:&nbsp; <strong>Dermoid cysts</strong> present as <strong>firm painless subcutaneous nodules</strong> and are of 4 types:</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sequestration dermoid - sequestration of epithelium during embryological development.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tubulodermoid - accumulation of secretions from ectodermal tube/duct</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Implantation dermoid - implantation of the epidermis due to trauma</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Teratomatous dermoid - having all 3 germ layers (ecto, meso, and endoderm)</li>\n</ol>\n<p>Option D: <strong>Sebaceous cysts</strong> are <strong>retention</strong> cysts of the sebaceous glands that present as smooth, <strong>non-tender</strong>, <strong>non-transillumination</strong> swelling with a <strong>punctum</strong> (in 70% of the patients).&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2c4be8180e9f46b4b452a4eeaea50264.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old woman presented with painless swelling in front of the left ear for the past 2 years. On examination, her left earlobe was lifted and the curtain sign was positive. Which of the following is false about the condition?",
    "choices": [
      {
        "id": 1,
        "text": "Treatment of choice is total radical parotidectomy"
      },
      {
        "id": 2,
        "text": "Investigation of choice is FNAC"
      },
      {
        "id": 3,
        "text": "Open biopsy is contraindicated"
      },
      {
        "id": 4,
        "text": "Malignant form shows LMN facial palsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>pleomorphic</strong> <strong>adenoma</strong>. The treatment of choice is <strong>superficial parotidectomy</strong>.&nbsp;</p>\n<p>Clinical features:</p>\n<ul>\n<li>Painless, slow-growing swelling</li>\n<li>Lobulated, firm, elastic-to-hard in consistency</li>\n<li>Lift the ear lobe</li>\n<li>Free from deeper structures</li>\n<li>With <strong>no facial nerve </strong>involvement</li>\n<li><strong>Curtain sign positive</strong> - cannot be moved above the zygomatic bone</li>\n</ul>\n<p>Pleomorphic adenoma involves the <strong>superficial</strong> <strong>lobe</strong> of parotid gland and should be managed by <strong>superficial parotidectomy</strong>.</p>\n<p>Types of Parotidectomy</p>\n<ul>\n<li>If only the superficial lobe is involved:&nbsp;\n<ul>\n<li><strong>Superficial parotidectomy</strong> - only <strong>superficial</strong> <strong>lobe</strong> removed. Usually done in benign conditions.</li>\n</ul>\n</li>\n<li>If both lobes are involved:\n<ul>\n<li><strong>Total conservative parotidectomy</strong> - <strong>both</strong> <strong>lobes</strong> are removed but the facial nerve is preserved.</li>\n<li><span style=\"font-size: 14px;\"><strong>Total radical parotidectomy</strong> - <strong>both lobes</strong> and <strong>facial nerve</strong> removed.</span></li>\n</ul>\n</li>\n</ul>\n<p>Sometimes it may undergo malignant transformation. The malignant form is <strong>mixed malignant tumor</strong> or <strong>carcinoma ex pleomorphic adenoma</strong> (most aggressive salivary malignancy).</p>\n<p>Signs of malignant transformation</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">A rapid increase in size</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Pain and ulceration</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Facial nerve involvement (LMN)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lymph node involvement</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Restricted jaw movements</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Technetium-99m pertechnetate scintigraphy done for a patient with a chronic painless facial swelling is shown below. Which of the following statements is false regarding this tumor?",
    "choices": [
      {
        "id": 1,
        "text": "This tumor has no malignant potential"
      },
      {
        "id": 2,
        "text": "Superficial parotidectomy is the treatment of choice"
      },
      {
        "id": 3,
        "text": "Histology shows a double layer of epithelial cells with dense lymphoid stroma"
      },
      {
        "id": 4,
        "text": "It is the most common unilateral benign tumor of the parotid gland"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Note: Both pleomorphic adenoma and Warthin's tumors commonly present as unilateral tumors. A bilateral presentation is usually rare. However in rare cases, if there is a bilateral benign salivary tumor, the tumor is most likely to be a Warthin's tumor.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/37cdf34549194a59ae54579629c81787.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d08989b8841344c19bcd5c5c294d9857x510x501.GIF"
    ]
  },
  {
    "text": "Match the following",
    "choices": [
      {
        "id": 1,
        "text": "1-b, 2-d, 3-a, 4-c"
      },
      {
        "id": 2,
        "text": "1-b, 2-a, 3-d, 4-c"
      },
      {
        "id": 3,
        "text": "1-a, 2-b, 3-c, 4-d"
      },
      {
        "id": 4,
        "text": "1-c, 2-a, 3-d, 4-b"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<table style=\"height: 96px;\" width=\"420\">\n<tbody>\n<tr>\n<td style=\"width: 137.033px;\">Tumor</td>\n<td style=\"width: 269.367px;\">Description</td>\n</tr>\n<tr>\n<td style=\"width: 137.033px;\">Godwin&rsquo;s tumor&nbsp;</td>\n<td style=\"width: 269.367px;\">Benign lymphoepithelial tumor</td>\n</tr>\n<tr>\n<td style=\"width: 137.033px;\">Eskimoma&nbsp;</td>\n<td style=\"width: 269.367px;\">Malignant salivary gland tumor</td>\n</tr>\n<tr>\n<td style=\"width: 137.033px;\">Kuttner&rsquo;s tumor&nbsp;</td>\n<td style=\"width: 269.367px;\">Chronic sclerosing sialadenitis</td>\n</tr>\n<tr>\n<td style=\"width: 137.033px;\">oncocytoma&nbsp;</td>\n<td style=\"width: 269.367px;\">Hotspot on 99Tc scintigraphy</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;<strong>Godwin&rsquo;s tumor&nbsp;</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;<strong>Benign lymphoepithelial tumor</strong> of the salivary gland.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">It is associated with CMV.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&lt; 5% shows malignancy - known as <strong>Eskimoma</strong>.</li>\n</ul>\n<p><strong>Kuttner&rsquo;s</strong> tumor is <strong>chronic sclerosing sialadenitis</strong> of the submandibular gland.</p>\n<p><strong>Oncocytoma</strong> (oxyphil adenoma) -&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Usually benign, originating from oncocytes.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Grossly - tan-colored small, well-circumscribed, and encapsulated.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Microscopically - large oncocytes with swollen granular cytoplasm.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Appear as a <strong>hotspot on Technetium-99m pertechnetate scintigraphy</strong> due to an abundance of mitochondria.&nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly woman presents with recent onset facial asymmetry and a lump over the roof of the mouth for the past 1 year. On examination, a solitary erythematous swelling with diffuse borders is seen over the left hard palate. Biopsy of the lesion reveals a swiss cheese pattern. Which of the following conditions is she likely to have?",
    "choices": [
      {
        "id": 1,
        "text": "Malignant mixed tumor"
      },
      {
        "id": 2,
        "text": "Mucoepidermoid carcinoma"
      },
      {
        "id": 3,
        "text": "Adenoid cystic carcinoma"
      },
      {
        "id": 4,
        "text": "Adenocarcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario and biopsy finding is suggestive of <strong>adenoid cystic carcinoma</strong>.&nbsp;&nbsp;Facial asymmetry points to<strong>&nbsp;</strong>the<strong> perineural invasion</strong> of the tumor into the facial nerve, which is characteristic of adenoid cystic carcinoma.</p>\n<p>It is the <strong>second most common</strong> malignant tumor of the parotid gland. It is a slow-growing tumor most commonly involving the parotid and submandibular glands. Histology shows a <strong>swiss cheese pattern</strong>. The <strong>tubular type</strong> has the <strong>best prognosis</strong>, while the <strong>solid type</strong> has the <strong>worst</strong>.&nbsp;</p>\n<p>It has a&nbsp;deceptively benign histologic appearance characterized by indolent, locally invasive growth with a high propensity for local recurrence and distant metastasis. The most common site of <strong>distant metastasis</strong> is the<strong> lung</strong>.&nbsp;Treatment involves <strong>removal </strong>of the<strong> gross tumor</strong>, with <strong>radiation</strong> therapy for the <strong>microscopic</strong> disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common malignant tumor involving the parotid gland?",
    "choices": [
      {
        "id": 1,
        "text": "Pleomorphic adenoma"
      },
      {
        "id": 2,
        "text": "Mucoepidermoid carcinoma"
      },
      {
        "id": 3,
        "text": "Adenoid cystic carcinoma"
      },
      {
        "id": 4,
        "text": "Adenocarcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Mucoepidermoid carcinoma</strong> is the most common <strong>malignant tumor</strong>,<strong>&nbsp;</strong>while <strong>pleomorphic adenoma&nbsp;</strong>is the most common<strong> benign tumor </strong>of the <strong>parotid gland.</strong></p>\n<p><strong>Histological classification and incidence of tumors of salivary glands:</strong></p>\n<table style=\"height: 209px; width: 544px;\">\n<tbody>\n<tr>\n<td style=\"width: 162px; text-align: center;\"><strong>Benign Tumors</strong></td>\n<td style=\"width: 81px; text-align: center;\"><strong>Incidence</strong></td>\n<td style=\"width: 193.25px; text-align: center;\"><strong>Malignant tumors</strong></td>\n<td style=\"width: 83.75px;\"><strong>Incidence</strong></td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Pleomorphic adenoma</td>\n<td style=\"width: 81px; text-align: center;\">50%</td>\n<td style=\"width: 193.25px; text-align: center;\">Mucoepidermoid carcinoma</td>\n<td style=\"width: 83.75px; text-align: center;\">15%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Warthin&rsquo;s tumor</td>\n<td style=\"width: 81px; text-align: center;\">5&ndash;10%</td>\n<td style=\"width: 193.25px; text-align: center;\">Adenocarcinoma (NOS)</td>\n<td style=\"width: 83.75px; text-align: center;\">10%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Oncocytoma</td>\n<td style=\"width: 81px; text-align: center;\">1%</td>\n<td style=\"width: 193.25px; text-align: center;\">Acinic cell carcinoma</td>\n<td style=\"width: 83.75px; text-align: center;\">5%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Other adenomas</td>\n<td style=\"width: 81px; text-align: center;\">5&ndash;10%</td>\n<td style=\"width: 193.25px; text-align: center;\">Adenoid cystic carcinoma</td>\n<td style=\"width: 83.75px; text-align: center;\">5%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Basal cell adenoma</td>\n<td style=\"width: 81px; text-align: center;\">&nbsp;1-2%</td>\n<td style=\"width: 193.25px; text-align: center;\">Malignant mixed tumor</td>\n<td style=\"width: 83.75px; text-align: center;\">3&ndash;5%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Canalicular adenoma</td>\n<td style=\"width: 81px; text-align: center;\">1%&nbsp;</td>\n<td style=\"width: 193.25px; text-align: center;\">Squamous cell carcinoma</td>\n<td style=\"width: 83.75px; text-align: center;\">1%</td>\n</tr>\n<tr>\n<td style=\"width: 162px; text-align: center;\">Ductal papillomas</td>\n<td style=\"width: 81px; text-align: center;\">&nbsp;-</td>\n<td style=\"width: 193.25px; text-align: center;\">Other carcinomas</td>\n<td style=\"width: 83.75px; text-align: center;\">2%</td>\n</tr>\n</tbody>\n</table>\n<p>NOS: Not otherwise specified.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As a 1st year resident assisting in a superficial parotidectomy, you have been asked to identify the facial nerve trunk.  All of the following structures can be used for its localization except:",
    "choices": [
      {
        "id": 1,
        "text": "Posterior belly of digastric"
      },
      {
        "id": 2,
        "text": "Conley's pointer"
      },
      {
        "id": 3,
        "text": "Inferior belly of omohyoid muscle"
      },
      {
        "id": 4,
        "text": "Mastoid process"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>inferior belly of the omohyoid muscle</strong> is <strong>not</strong> <strong>used</strong> as an anatomical landmark for the identification of the<strong> facial nerve trunk</strong>.</p>\n<p>There are two methods for <strong>localization of the facial nerve trunk:&nbsp;</strong></p>\n<p><strong>1. Anterograde method:&nbsp;</strong>In this method, the facial nerve trunk is identified based on the anatomical landmarks after it exits from the stylomastoid foramen. The anatomical landmarks include:</p>\n<ul>\n<li><strong>Conley's pointer&nbsp;</strong>is the inferior portion of the cartilaginous canal. The facial nerve trunk lies 1 cm deep and inferior to its tip.</li>\n<li><strong>Posterior belly of digastric-</strong>&nbsp;The facial nerve lies superior to the upper border of the muscle.</li>\n<li><strong>Mastoid process-&nbsp;</strong>Upon drilling it, the nerve is identified proximally.</li>\n<li><strong>Squamotympanic fissure</strong>&nbsp;is a fissure in the temporal bone, which runs from TMJ to the tympanic cavity. The facial nerve runs through this fissure.</li>\n<li><strong>Styloid process-</strong>&nbsp;The facial nerve lies superficial to it.</li>\n</ul>\n<p><strong>2. Retrograde method:&nbsp;</strong>In this method, the main branches of the facial nerve trunk are identified and are then traced proximally until the main tunk is identified. Some of the main branches that are commonly used for tracing the facial nerve trunk include:</p>\n<ul>\n<li><strong>Buccal branch</strong>&nbsp;lies in relation to the parotid gland</li>\n<li><strong>Marginal mandibular branch</strong>&nbsp;lies in relation to the facial vessels</li>\n<li><strong>Temporal branch</strong></li>\n</ul>\n<p>The given image points to the facial nerve (marked by arrow).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dbb63d857ffa40afb8bf53f3a00baad3x1280x1401.JPEG"
    ]
  },
  {
    "text": "A patient is scheduled to undergo a total parotidectomy with selective node dissection of levels Ib, IIa, IIb, and III. Which of the following groups of lymph nodes will be removed during the procedure?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3 and 4"
      },
      {
        "id": 2,
        "text": "2 and 3"
      },
      {
        "id": 3,
        "text": "3, 4 and 5"
      },
      {
        "id": 4,
        "text": "2, 3, 4 and 5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options, only <strong>submandibular</strong> (Level Ib) and <strong>middle jugular nodes</strong> (Level III) nodes will be removed. The other nodes that will be removed in the procedure will be <strong>upper jugular nodes</strong> (Level IIa and IIb).</p>\n<p>Selective neck dissection has been used in the treatment of patients with cancer of the upper aerodigestive tract (oral cavity, pharynx, larynx), cancer of the thyroid gland, cutaneous malignancies, and cancer of the salivary gland. The type of selective neck dissection used varies depending on the <strong>lymphatic drainage </strong>and<strong> metastatic pattern </strong>associated with the\u00a0<strong>primary cancer</strong>\u00a0site.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with pleomorphic adenoma is posted for submandibular gland excision. Which of the following nerves is least likely to be injured during this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Marginal mandibular branch of the facial nerve"
      },
      {
        "id": 2,
        "text": "Lingual nerve"
      },
      {
        "id": 3,
        "text": "Hypoglossal nerve"
      },
      {
        "id": 4,
        "text": "Inferior alveolar nerve"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The<strong> inferior alveolar nerve</strong> is the nerve <strong>least likely</strong> to be affected by <strong>submandibular surgery</strong>.</p>\n<p>Nerves at risk for injury during removal of the submandibular gland include:</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Marginal mandibular branch of the facial nerve</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Lingual nerve</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Hypoglossal nerve</li>\n</ol>\n<p>An important landmark in <strong>submandibular gland dissection</strong> is the <strong>posterior border of the mylohyoid muscle</strong>. Once identified, it can be retracted to reveal the <strong>deep lobe</strong> of the gland. The hypoglossal nerves lie deep to the submandibular capsule and should not be damaged during intracapsular dissection. The facial artery is ligated twice during the surgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2208d20ce0b4b25a667f38dea899ac8x451x715.JPEG"
    ]
  },
  {
    "text": "Which nerve is involved in Frey\u2019s syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Facial Nerve"
      },
      {
        "id": 2,
        "text": "Oculomotor nerve"
      },
      {
        "id": 3,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 4,
        "text": "Glossopharyngeal nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Other options:</p>\n<p>Option A: <strong>Facial nerve</strong> is the 7th cranial nerve that supplies the muscles of the face, and results in <strong>facial</strong> <strong>paralysis</strong> if injured during parotidectomy</p>\n<p>Option B: <strong>Oculomotor</strong> is the 3rd cranial nerve which supplies the <strong>extraocular</strong> <strong>muscles</strong>. If injured during ophthalmic surgeries, it results in ocular paralysis and the eye pointing <strong>down and out</strong>.</p>\n<p>Option D: <strong>Glossopharyngeal</strong> nerve is the 9th cranial nerve and its injury causes <strong>loss of taste sensation</strong> from the <strong>posterior 1/3rd</strong> of the tongue.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6089cbcee2814801af9b7c9f34f099edx1280x1508.JPEG"
    ]
  },
  {
    "text": "After parotidectomy patients complains of loss of sensation while shaving. Which nerve is most likely affected?",
    "choices": [
      {
        "id": 1,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 2,
        "text": "Great auricular nerve"
      },
      {
        "id": 3,
        "text": "Facial nerve"
      },
      {
        "id": 4,
        "text": "Mandibular nerve"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Other options:</p>\n<p>Option A: The auriculotemporal nerve, a branch of the mandibular nerve (V3 of trigeminal) supplies the posterior part of the <strong>temple</strong>, <strong>tragus</strong>, and adjoining auricle. It does not supply the area where a person is likely to shave. However, the injury to the auriculotemporal nerve resulting in aberrant regeneration would result in <strong>Frey's Syndrome</strong> (gustatory sweating).</p>\n<p>Option C: Though the facial nerve is the most common nerve affected during parotidectomy, any damage would result in <strong>facial paralysis</strong> and not loss of sensation of the face.</p>\n<p>Option D: The mandibular nerve is a branch of the trigeminal nerve (cranial nerve V) that supplies the skin over the mandible, lower lip, and cheek. However, they are <strong>not injured</strong> during parotidectomy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c9a0690eb72a443ca860da60760bcb6bx1280x1308.JPEG"
    ]
  },
  {
    "text": "At what age should the congenital defect (shown in the image below) be ideally repaired?",
    "choices": [
      {
        "id": 1,
        "text": "3-6 months"
      },
      {
        "id": 2,
        "text": "6-8 months"
      },
      {
        "id": 3,
        "text": "8-10 months"
      },
      {
        "id": 4,
        "text": "10-12 months"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows a&nbsp;<strong>unilateral cleft lip</strong>. Repair of cleft lip (primary palate) along with associated nasal deformities is done at&nbsp;<strong>3&ndash;6 months of age</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e6b22e7b1f1474e9c120d82a6ff8f3d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child with a cleft lip is posted for surgery. Which of the following methods is not used to repair this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Le Muserier\u2019s method"
      },
      {
        "id": 2,
        "text": "Tennison\u2019s method"
      },
      {
        "id": 3,
        "text": "Millard\u2019s method"
      },
      {
        "id": 4,
        "text": "Wardill\u2019s method"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Wardill&rsquo;s method</strong> is <strong>not</strong> a method of cleft lip repair. It is a technique for <strong>hard palate closure</strong>.&nbsp;</p>\n<p><strong>Cleft-lip repair techniques</strong>:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Millard&rsquo;s rotation advancement technique</strong> (most common)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Thompson</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Le Mesurier</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tennison&ndash;Randall</li>\n</ul>\n<p>Techniques of <strong>hard palate closure</strong> include the use of the following:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Unipedicled hard palate mucoperiosteal flaps as in the Wardill-Veau-Kilner repair&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Bipedicled hard palate mucoperiosteal flaps as in the von Langenbeck repair</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is an oral cavity lesion with a  high-risk of malignant transformation?",
    "choices": [
      {
        "id": 1,
        "text": "Oral lichen planus"
      },
      {
        "id": 2,
        "text": "Discoid lupus erythematosus"
      },
      {
        "id": 3,
        "text": "Discoid keratosis congenita"
      },
      {
        "id": 4,
        "text": "Speckled erythroplakia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Speckled erythroplakia</strong>&nbsp;has<strong>&nbsp;</strong>a high risk of malignant transformation.</p>\n<p><strong>Malignancy risk:</strong></p>\n<p><strong>High-risk lesions&nbsp;</strong></p>\n<p>Erythroplakia (homogenous/speckled)&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;Seen as <strong>red velvety</strong> lesions</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;<strong>Speckled</strong> type is the most &nbsp;<strong>aggressive</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;The treatment of choice is&nbsp;<strong>surgical</strong> <strong>ablation&nbsp;</strong></li>\n</ul>\n<p>Proliferative verrucous leucoplakia</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">A&nbsp;<strong>white patchy</strong> lesion that<strong> cannot be rubbed off</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Speckled leucoplakia has an erythematous base</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">The treatment of choice is excision</li>\n</ul>\n<p>Chronic hyperplastic candidiasis</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>White patches</strong> that <strong>can be rubbed off</strong> with a <strong>hyperaemic</strong> <strong>border</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Management includes prolonged treatment with <strong>topical</strong> <strong>antifungals</strong> or <strong>systemic</strong> <strong>antifungal</strong> therapy. If no improvement or if there are any signs of dysplasia, <strong>surgical excision</strong> is done.</li>\n</ul>\n<p><strong>Medium risk lesions</strong></p>\n<p>Oral submucous fibrosis</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Hypersensitive</strong> <strong>reaction</strong> to betel nut product.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Other risk factors are - tobacco, chili, vitamin deficiency&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Clinical features - trismus, ankyloglossia, soreness, and burning sensation in the mouth.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Management includes antioxidants, intralesional triamcinolone, and surgical excision.</li>\n</ul>\n<p>Syphilitic glossitis</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Associated with tertiary syphilis</li>\n</ul>\n<p><strong>Low-risk lesions</strong></p>\n<p>Oral lichen planus&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Reticulate fine lace-like pattern.</li>\n<li>Management is&nbsp;<strong>topical</strong> <strong>corticosteroids</strong>.&nbsp; &nbsp;</li>\n</ul>\n<p>Discoid lupus erythematosus <br />Discoid keratosis congenita</p>\n<p><strong>Speckled erythroplakia:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bee5fccfb3e5438a8b5044a08da4d69dx325x400.JPEG"
    ]
  },
  {
    "text": "A 35-year-old man presented with complaints of difficulty in opening his mouth, restricted tongue movements, and a burning sensation in the mouth while eating food. He is a smoker and chews pan masala. On examination, scarring is present in the oral cavity. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Plummer-Vinson syndrome"
      },
      {
        "id": 2,
        "text": "Proliferative verrucous leucoplakia"
      },
      {
        "id": 3,
        "text": "Oral submucous fibrosis"
      },
      {
        "id": 4,
        "text": "Erythroplakia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most likely diagnosis is <strong>oral submucous fibrosis</strong>. It is a <strong>premalignant</strong> lesion of the oral cavity, in which fibrous bands are formed beneath the oral mucosa.<br style=\"font-weight: 400;\" />Risk factors are</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Betel nut</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Chilli</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tobacco</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Vitamin deficiency</li>\n</ul>\n<p>Clinical features include <strong>ankyloglossia</strong>, <strong>trismus</strong>, <strong>soreness</strong>, and a <strong>burning</strong> sensation in the mouth while eating.</p>\n<p>Management includes <strong>intralesional</strong> <strong>steroids</strong>, vitamin supplements, and <strong>surgical</strong> <strong>excision</strong>.</p>\n<p>Option A: <strong>Plummer-Vinson syndrome</strong> is characterized by post cricoid web that is associated with iron deficiency anemia, glossitis, and koilonychia. It usually presents as <strong>dysphagia</strong>.</p>\n<p>Option B:&nbsp;<strong>Proliferative verrucous leucoplakia</strong> appears as a white patchy lesion, that cannot be rubbed off.</p>\n<p>Option D: <strong>Erythroplakia</strong> is seen as bright <strong>red</strong> <strong>velvety</strong> <strong>plaque</strong> in the oral cavity.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 57-year-old male patient presents to the surgery OPD, with a 7cm lesion over the left buccal mucosa and difficulty opening the mouth. On examination, the right cervical lymph node is 4cm in size with overlying skin involvement. What is the TNM staging of this lesion?",
    "choices": [
      {
        "id": 1,
        "text": "T4aN2bMx"
      },
      {
        "id": 2,
        "text": "T4bN3aMx"
      },
      {
        "id": 3,
        "text": "T4bN3bMx"
      },
      {
        "id": 4,
        "text": "T4aN2cMx"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The TNM staging in this patient is&nbsp;<strong>T4bN3bMX</strong>.&nbsp;A 7-cm primary tumor in the&nbsp;oral cavity with difficulty in opening mouth denotes a <strong>locally advanced tumor</strong>: <strong>T4b</strong>.&nbsp;<strong>Contralateral cervical lymph node</strong> involvement with skin involvement (<strong>extranodal extension-positive):&nbsp;N3b</strong></p>\n<p>Note:<strong>&nbsp;</strong>Here the skin invasion corresponds to ENE positive, and hence, the N staging is N3b instead of N2c (contralateral lymph nodes, &lt;6 cm and ENE\u2010negative).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the given incision used for maxillectomy.",
    "choices": [
      {
        "id": 1,
        "text": "Crile's incision"
      },
      {
        "id": 2,
        "text": "Martin's incision"
      },
      {
        "id": 3,
        "text": "MacFee incision"
      },
      {
        "id": 4,
        "text": "Weber\u2013Ferguson incision"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows&nbsp;<strong>Weber&ndash;Ferguson incision</strong>&nbsp;which is used to access the <strong>floor of the maxillary sinus</strong> in the case of <strong>maxillary carcinoma</strong>.</p>\n<p>The rest of the options are incisions used for modified radical neck&nbsp;dissection (MRND).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/02c499fc092a4a38a02d2819ae1988d6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3308698927bf4eb5bd52d3e6f2af0089x1280x3676.JPEG"
    ]
  },
  {
    "text": "What is this approach used in the treatment of oral cancer?",
    "choices": [
      {
        "id": 1,
        "text": "Lip-split approach"
      },
      {
        "id": 2,
        "text": "Visor approach"
      },
      {
        "id": 3,
        "text": "Wedge resection"
      },
      {
        "id": 4,
        "text": "Commando operation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows the <strong>visor approach.</strong></p>\n<p>In the visor approach, an incision is made extending from one end of the mandible to the opposite side and subplatysmal flaps are elevated superiorly over the mandible (like a visor of a helmet). This approach provides a <strong>wide exposure</strong> to remove larger lesions involving the anterior oral cavity&nbsp;that is not amenable to a peroral approach. This&nbsp;<strong>avoids</strong>&nbsp;a&nbsp;<strong>lip-splitting incision </strong>but<strong>&nbsp;</strong>has the disadvantage of anesthesia of chin/lower lip (due to the sacrifice of submental nerves).</p>\n<p>The surgical approach selected for excision of oral cavity tumors depends on the size of the tumor, location (anterior vs posterior), proximity to bone (mandible or maxilla), and the need to perform neck dissection. The most commonly employed approaches are as follows:</p>\n<ul>\n<li><strong>Peroral</strong> - accessible early-stage tumors</li>\n<li><strong>Lower cheek flap</strong> - t<span id=\"word_1_1\" class=\"ocrx_word\" title=\"bbox 0 20 98 66; x_wconf 48\">umors</span>&nbsp;<span id=\"word_1_2\" class=\"ocrx_word\" title=\"bbox 109 31 230 61; x_wconf 92\">requiring</span>&nbsp;partial mandibulectomy<span id=\"word_1_9\" class=\"ocrx_word\" title=\"bbox 633 30 761 54; x_wconf 92\">&nbsp;or</span>&nbsp;<span id=\"word_1_11\" class=\"ocrx_word\" title=\"bbox 809 30 877 61; x_wconf 92\">large</span>&nbsp;<span id=\"word_1_12\" class=\"ocrx_word\" title=\"bbox 888 30 1080 61; x_wconf 92\">posterolateral</span>&nbsp;<span id=\"word_1_13\" class=\"ocrx_word\" title=\"bbox 1090 33 1191 54; x_wconf 91\">tumors</span>&nbsp;<span id=\"word_1_14\" class=\"ocrx_word\" title=\"bbox 1200 30 1255 54; x_wconf 93\">that</span>&nbsp;<span id=\"word_1_15\" class=\"ocrx_word\" title=\"bbox 1265 33 1361 54; x_wconf 92\">cannot</span>&nbsp;<span id=\"word_1_16\" class=\"ocrx_word\" title=\"bbox 1372 30 1404 54; x_wconf 92\">be</span>&nbsp;<span id=\"word_1_17\" class=\"ocrx_word\" title=\"bbox 1415 30 1547 54; x_wconf 91\">accessed</span>&nbsp;<span id=\"word_1_18\" class=\"ocrx_word\" title=\"bbox 1557 31 1596 54; x_wconf 92\">via</span>&nbsp;<span id=\"word_1_19\" class=\"ocrx_word\" title=\"bbox 1607 36 1621 54; x_wconf 92\">a</span>&nbsp;<span id=\"word_1_20\" class=\"ocrx_word\" title=\"bbox 1633 30 1728 61; x_wconf 93\">peroral</span>&nbsp;<span id=\"word_1_21\" class=\"ocrx_word\" title=\"bbox 1739 30 1869 61; x_wconf 91\">approach</span></li>\n<li><strong>Upper cheek flap</strong> -&nbsp;tumors requiring partial maxillectomy or those involving the hard palate, upper gum, upper gingivobuccal sulcus and anterior soft palate</li>\n<li><strong>Mandibulotomy</strong> - l<span id=\"line_1_1\" class=\"ocr_line\" title=\"bbox 26 13 1892 45; baseline 0 -7; x_size 31; x_descenders 7; x_ascenders 6\"><span id=\"word_1_1\" class=\"ocrx_word\" title=\"bbox 26 15 115 45; x_wconf 89\">arger</span>&nbsp;<span id=\"word_1_2\" class=\"ocrx_word\" title=\"bbox 125 14 223 38; x_wconf 89\">tumors</span>&nbsp;<span id=\"word_1_3\" class=\"ocrx_word\" title=\"bbox 233 13 262 38; x_wconf 92\">of</span>&nbsp;<span id=\"word_1_4\" class=\"ocrx_word\" title=\"bbox 269 14 313 38; x_wconf 92\">the</span>&nbsp;<strong><span id=\"word_1_5\" class=\"ocrx_word\" title=\"bbox 324 15 450 44; x_wconf 91\">posterior</span></strong>&nbsp;<span id=\"word_1_6\" class=\"ocrx_word\" title=\"bbox 459 14 510 38; x_wconf 93\">oral</span>&nbsp;<span id=\"word_1_7\" class=\"ocrx_word\" title=\"bbox 521 15 606 45; x_wconf 91\">cavity,</span>&nbsp;</span><span id=\"line_1_2\" class=\"ocr_line\" title=\"bbox 24 63 1919 95; baseline 0 -7; x_size 31; x_descenders 7; x_ascenders 6\"><span id=\"word_1_30\" class=\"ocrx_word\" title=\"bbox 354 67 454 88; x_wconf 90\">tumors</span>&nbsp;<span id=\"word_1_31\" class=\"ocrx_word\" title=\"bbox 464 64 519 88; x_wconf 93\">that</span>&nbsp;<span id=\"word_1_32\" class=\"ocrx_word\" title=\"bbox 530 64 626 88; x_wconf 93\">involve</span>&nbsp;<span id=\"word_1_33\" class=\"ocrx_word\" title=\"bbox 634 64 678 88; x_wconf 92\">the</span>&nbsp;<span id=\"word_1_34\" class=\"ocrx_word\" title=\"bbox 690 64 755 88; x_wconf 92\">base</span>&nbsp;<span id=\"word_1_35\" class=\"ocrx_word\" title=\"bbox 765 63 794 88; x_wconf 93\">of</span>&nbsp;<span id=\"word_1_36\" class=\"ocrx_word\" title=\"bbox 801 64 845 88; x_wconf 92\">the</span>&nbsp;<span id=\"word_1_37\" class=\"ocrx_word\" title=\"bbox 854 67 958 95; x_wconf 90\">tongue or</span>&nbsp;<span id=\"word_1_38\" class=\"ocrx_word\" title=\"bbox 969 64 1122 95; x_wconf 92\">pharyngeal</span>&nbsp;<span id=\"word_1_39\" class=\"ocrx_word\" title=\"bbox 1133 64 1187 88; x_wconf 92\">wall.</span></span></li>\n<li><strong>Visor flap</strong> - l<span id=\"word_1_1\" class=\"ocrx_word\" title=\"bbox 26 31 115 61; x_wconf 91\">arger</span>&nbsp;<span id=\"word_1_2\" class=\"ocrx_word\" title=\"bbox 125 30 223 54; x_wconf 91\">lesions</span>&nbsp;<span id=\"word_1_3\" class=\"ocrx_word\" title=\"bbox 233 29 262 54; x_wconf 92\">of</span>&nbsp;<span id=\"word_1_4\" class=\"ocrx_word\" title=\"bbox 269 30 314 54; x_wconf 93\">the</span>&nbsp;<strong><span id=\"word_1_5\" class=\"ocrx_word\" title=\"bbox 324 30 432 54; x_wconf 92\">anterior</span></strong>&nbsp;<span id=\"word_1_6\" class=\"ocrx_word\" title=\"bbox 442 30 492 54; x_wconf 93\">oral</span>&nbsp;<span id=\"word_1_7\" class=\"ocrx_word\" title=\"bbox 503 30 584 61; x_wconf 92\">cavity</span>&nbsp;<span id=\"word_1_8\" class=\"ocrx_word\" title=\"bbox 595 30 716 61; x_wconf 93\">involving</span>&nbsp;<span id=\"word_1_9\" class=\"ocrx_word\" title=\"bbox 726 30 770 54; x_wconf 93\">the</span>&nbsp;<span id=\"word_1_10\" class=\"ocrx_word\" title=\"bbox 781 30 889 54; x_wconf 91\">anterior</span>&nbsp;<span id=\"word_1_11\" class=\"ocrx_word\" title=\"bbox 898 29 962 54; x_wconf 91\">floor</span>&nbsp;<span id=\"word_1_12\" class=\"ocrx_word\" title=\"bbox 972 29 1000 54; x_wconf 93\">of</span>&nbsp;the&nbsp;<span id=\"word_1_13\" class=\"ocrx_word\" title=\"bbox 1010 30 1098 54; x_wconf 92\">mouth</span>&nbsp;<span id=\"word_1_14\" class=\"ocrx_word\" title=\"bbox 1109 30 1159 54; x_wconf 92\">and</span>&nbsp;<span id=\"word_1_15\" class=\"ocrx_word\" title=\"bbox 1171 30 1247 54; x_wconf 92\">lower</span>&nbsp;<span id=\"word_1_16\" class=\"ocrx_word\" title=\"bbox 1256 36 1316 61; x_wconf 91\">gum</span>&nbsp;<span id=\"word_1_17\" class=\"ocrx_word\" title=\"bbox 1326 30 1381 54; x_wconf 92\">that</span>&nbsp;<span id=\"word_1_18\" class=\"ocrx_word\" title=\"bbox 1391 36 1434 54; x_wconf 93\">are</span>&nbsp;<span id=\"word_1_19\" class=\"ocrx_word\" title=\"bbox 1445 33 1488 54; x_wconf 92\">not</span>&nbsp;<span id=\"word_1_20\" class=\"ocrx_word\" title=\"bbox 1499 30 1636 54; x_wconf 91\">amenable</span>&nbsp;<span id=\"word_1_21\" class=\"ocrx_word\" title=\"bbox 1645 33 1672 54; x_wconf 92\">to</span>&nbsp;<span id=\"word_1_22\" class=\"ocrx_word\" title=\"bbox 1683 36 1697 54; x_wconf 93\">a</span>&nbsp;<span id=\"word_1_23\" class=\"ocrx_word\" title=\"bbox 1709 30 1804 61; x_wconf 92\">peroral approach</span></li>\n</ul>\n<p><strong>Commando operation</strong> is the combined mandibular resection and neck node dissection. It is used mainly for <strong>carcinoma of the tongue</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/39bdd26fe9c34c8db8034a0ddb6dd20c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "You will use an Abbe-Estlander flap for the reconstruction of which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "Lip"
      },
      {
        "id": 2,
        "text": "Palate"
      },
      {
        "id": 3,
        "text": "Floor of the mouth"
      },
      {
        "id": 4,
        "text": "Tongue"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Abb&eacute;- Estlander flaps</strong> are used for the <strong>reconstruction of the lip</strong>.</p>\n<p>They are lip switch flaps based on the<strong> sublabial or superior labial artery</strong>. When the defect involves the <strong>commissure</strong>, the <strong>Estlander flap</strong> is used, and the <strong>Abb&eacute; flap</strong> is used for more <strong>midline defects.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24e91c1be89c44e8934f9db1e616f2e2x512x155.PNG"
    ]
  },
  {
    "text": "A woman from Himachal Pradesh,  presented with complaints of neck swelling for the past 1 year. On examination, a firm, non-tender, pulsatile mass was palpated on the left side of the neck. The mass is mobile from side to side, but not up and down. A carotid angiogram of the patient is shown below. Which of the following is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is usually benign"
      },
      {
        "id": 2,
        "text": "Shamblin classification is used for staging"
      },
      {
        "id": 3,
        "text": "It arises from neuroendocrine tissue"
      },
      {
        "id": 4,
        "text": "FNAC is the initial investigation of choice"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario and carotid angiogram showing splaying of the bifurcation of the carotids, also known as <strong>lyre sign</strong> points to a diagnosis of <strong>chemodectoma</strong>.&nbsp;Fine-needle aspiration cytology (FNAC)&nbsp;<strong>is contraindicated</strong> when a&nbsp;chemodectoma is suspected.</p>\n<p>Chemodectoma is also known as&nbsp;<strong>carotid body tumor</strong> (aka potato tumor). It is a<strong>&nbsp;benign</strong> tumor of the <strong>neuroendocrine tissue </strong>of the carotid body.&nbsp;It has a higher incidence at<strong>&nbsp;high altitudes</strong> because of <strong>chronic hypoxia, </strong>which leads to carotid body hyperplasia.</p>\n<p>The tumor presents as a slowly enlarging mass that is firm, rubbery, pulsatile, mobile from side to side but not up and down. A bruit may be heard.&nbsp;Family history can be present in 10% of the cases.&nbsp;</p>\n<p><strong>Shamblin classification</strong> is used for staging carotid body tumors.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6ab044fdc0764f0fa53c404b6276dbb0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d4ffbbde197a43a280fad5e7d83ac50bx510x618.GIF"
    ]
  },
  {
    "text": "The most common site of branchial cyst is ______.",
    "choices": [
      {
        "id": 1,
        "text": "Junction of upper and middle third of the sternomastoid muscle"
      },
      {
        "id": 2,
        "text": "Junction of middle and lower third of the sternomastoid muscle"
      },
      {
        "id": 3,
        "text": "Middle of the sternomastoid muscle"
      },
      {
        "id": 4,
        "text": "Between the two heads of the sternomastoid muscle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Branchial cyst</strong> develops due to the persistence of the&nbsp;<strong>cervical sinus</strong>. The cervical sinus is formed when the 2nd arch mesoderm overgrows the succeeding arches and overhangs them as shown in the image. The <strong>space</strong> between the overhanging <strong>2nd pharyngeal arch&nbsp;</strong>and the <strong>3rd, 4th, and 6th arches</strong> is called the <strong>cervical sinus</strong>. The cavity of the cervical sinus&nbsp;is <strong>lined by</strong> <strong>ectoderm</strong> and normally gets <strong>obliterated.</strong></p>\n<p><strong>Branchial cysts</strong> are usually lined by squamous epithelium and contain thick, turbid fluid full of <strong>cholesterol crystals.&nbsp;</strong>It is fluctuant and may transilluminate when it contains clear fluid.</p>\n<p>A <strong>branchial fistula</strong> may be acquired or congenital. <strong>The congenital fistula </strong>is seen at the <strong>junction of the middle and lower third</strong> of the sternomastoid (option B). An <strong>acquired fistula</strong> is usually seen in cases of incomplete surgery for the branchial cyst or spontaneous rupture, and it is seen at the <strong>same site as the cyst</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e958c1ce5034e74b88ccc31e90e2bc3x900x1200.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bbfe56269aff4879acd49324704d5815x600x523.JPEG"
    ]
  },
  {
    "text": "To which group of lymph nodes does a tumor limited to the glottis of the larynx spread commonly?",
    "choices": [
      {
        "id": 1,
        "text": "Pre-tracheal"
      },
      {
        "id": 2,
        "text": "Pre-laryngeal"
      },
      {
        "id": 3,
        "text": "Upper jugular"
      },
      {
        "id": 4,
        "text": "None"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Tumors <strong>limited to the glottis</strong> usually <strong>do not spread</strong> to any <strong>lymph nodes</strong>, as there are no lymphatics in the vocal cords. However, if the tumor <strong>invades the supra- </strong>or <strong>the infra-glottic spaces</strong>, lymph node <strong>spread</strong> can occur.&nbsp;</p>\n<p>The&nbsp;most common malignant tumor of the larynx is <strong>squamous cell carcinoma.</strong>&nbsp;<strong>Glottis</strong> is the most common site of laryngeal cancer.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Radical neck dissection spares which of the following structures?",
    "choices": [
      {
        "id": 1,
        "text": "Digastric muscle"
      },
      {
        "id": 2,
        "text": "Sternocleidomastoid muscle"
      },
      {
        "id": 3,
        "text": "Spinal accessory nerve"
      },
      {
        "id": 4,
        "text": "Ipsilateral cervical lymph nodes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Digastric muscle is spared in radical neck dissection (RND). RND is used in the treatment of malignant lesions of the neck with local spread or metastasis.&nbsp;</p>\n<p>In 1905, Crile described <strong>RND</strong> where<strong> Level I-V LN</strong>, sternocleidomastoid <strong>(SCM)</strong>, internal jugular vein<strong> (IJV)</strong>, and <strong>XI cranial nerve</strong> (spinal accessory nerve) are <strong>removed</strong>.</p>\n<p>In 1962, Suarez described modified RND<strong> (MRND)</strong> where <strong>Level I-V LNs</strong>&nbsp;are&nbsp;<strong>removed</strong> and the following are <strong>preserved</strong>:</p>\n<ol>\n<li style=\"font-weight: 400;\" aria-level=\"1\">MRND I - XI cranial nerve&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">MRND II -&nbsp; XI cranial nerve and IJV</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">MRND III - XI cranial nerve, IJV, and SCM</li>\n</ol>\n<p><br />Note: RND with an additional LN/muscle/nerve is called extended RND.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient is posted under your unit for type 2 modified radical neck dissection. Which of the following structures will you preserve during this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Only 5"
      },
      {
        "id": 2,
        "text": "2 & 3"
      },
      {
        "id": 3,
        "text": "1 & 5"
      },
      {
        "id": 4,
        "text": "2,3 & 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In<strong> type 2 </strong>modified radical neck dissection<strong> (MRND),&nbsp;</strong>internal jugular vein and spinal&nbsp;accessory nerve will be preserved.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '45 Oral Cavity & Salivary Glands';
        let hierarchy = ["Marrow", "qBank", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>