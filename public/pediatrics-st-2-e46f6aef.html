<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatrics St 2 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "When should folic acid supplementation start in order to be effective in preventing neural tube defects?",
    "choices": [
      {
        "id": 1,
        "text": "As soon as pregnancy is diagnosed"
      },
      {
        "id": 2,
        "text": "Before the beginning of 2nd trimester"
      },
      {
        "id": 3,
        "text": "At least one month before conception"
      },
      {
        "id": 4,
        "text": "At least 1 week before conception"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>To be effective, folic acid supplementation should be started <strong>at least 1 month before conception</strong>, and continued through the first 2-3 months of pregnancy.</li>\n<li>All women desirous of becoming pregnant should consume 400-800 &mu;g folic acid daily; the dose is 4 mg/ day in those having delivered a child with neural tube defect.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False statement about febrile convulsions is:",
    "choices": [
      {
        "id": 1,
        "text": "Absence of a history of prior afebrile seizures"
      },
      {
        "id": 2,
        "text": "Associated with temperature of 38\u00b0C or higher"
      },
      {
        "id": 3,
        "text": "Antipyretics reduce the risk of recurrent febrile convulsions"
      },
      {
        "id": 4,
        "text": "Absence of postictal neurological deficit"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Antipyretics <strong>do not reduce</strong> the risk of recurrent febrile seizure because the seizure often occurs as the temperature is rising or falling abruptly.</p>\n<p>Febrile seizures are seizures:</p>\n<ul>\n<li>That occur between the age of 6months and 5years</li>\n<li><strong>With a temperature of 38&deg;C (100.4&deg;F) or higher</strong></li>\n<li>That are not the result of central nervous system infection or any metabolic imbalance</li>\n<li>That which <strong>occur in the absence of a history of prior afebrile seizures</strong>\n<ul>\n<li>Tthere is <strong>no post ictal neurological deficit</strong></li>\n</ul>\n</li>\n<li>Antipyretics do not reduce the risk of recurrent febrile seizure because the seizure often occurs as the temperature is rising or falling.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child of age 5 years presents with developmental delay and multiple seizure types. The seizures could not be controlled with multiple drugs. EEG shows1-2 Hz spike and slow waves and polyspike bursts in sleep. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Juvenile myoclonic epilepsy"
      },
      {
        "id": 2,
        "text": "Lennox gestaut syndrome"
      },
      {
        "id": 3,
        "text": "Landau Kleffner syndrome"
      },
      {
        "id": 4,
        "text": "West syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The likely diagnosis is<strong> Lennox-Gastaut syndrome.</strong></p>\n<p>It typically starts between the ages of <strong>2 and 10 years of age. </strong>Consists of a triad of</p>\n<ul>\n<li style=\"list-style-type: none;\">\n<ul>\n<li><strong>Developmental delay</strong></li>\n<li><strong>Multiple seizure types</strong> (includes atypical absences, myoclonic, astatic, and tonic seizures)</li>\n<li>EEG findings <strong>1-2 Hz spike\u2013and\u2013 slow waves, polyspike bursts in sleep</strong>, and a slow background in wakefulness</li>\n</ul>\n</li>\n</ul>\n<p>\u00a0</p>\n<p>Patients commonly have myoclonic, atonic, and other seizure types that are difficult to control, and most are left with <strong>long-term cognitive impairment and intractable seizures</strong> despite multiple therapies.</p>\n<p>Other options:</p>\n<p><strong>Juvenile myoclonic epilepsy</strong> (Janz syndrome) typically, it starts in early adolescence (NOT in childhood). The EEG usually shows generalized 4-5 Hz polyspike\u2013and\u2013slow- wave discharges (NOT 1-2 Hz spike\u2013and\u2013 slow waves)</p>\n<p><strong>Landau-Kleffner syndrome </strong>is a\u00a0rare condition characterized by loss of language skills attributed to auditory agnosia in a previously normal child (NOT a child with developmental delay)</p>\n<p><strong>West syndrome </strong>starts between the ages of 2 and 12 months (NOT in childhood). Typical EEG picture called hypsarrhythmia (NOT 1-2 Hz spike\u2013and\u2013 slow waves, polyspike bursts)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10 month old child presents with 2 weeks history of fever, vomiting and alteration of sensorium. Cranial CT scan reveals basal exudates and hydrocephalus, the most likely etiological agent is",
    "choices": [
      {
        "id": 1,
        "text": "Mycobacterium tuberculosis"
      },
      {
        "id": 2,
        "text": "Cryptococcus neoformans"
      },
      {
        "id": 3,
        "text": "Listeria monocytogenes"
      },
      {
        "id": 4,
        "text": "Streptococcus pneumoniae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario suggests <strong>tuberculous meningitis.</strong></p>\n<p>Characteristic features are:</p>\n<ul>\n<li>Insidious onset of fever</li>\n<li>Raised ICT</li>\n<li>Basal exudates and Hydrocephalus on CT scan</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gelastic seizures are associated with",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculous meningitis"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Hypothalamic hamartoma"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Gelastic seizures</strong> are characteristically associated with <strong>hypothalamic hamartoma.</strong></p>\n<p><strong>Gelastic seizures :</strong></p>\n<ul>\n<li>Epileptic events characterised by <strong>bouts of laughter.</strong></li>\n<li><strong>Autonomic features</strong> are present.</li>\n<li>Hypothalamic hamartomas present with triad of :\n<ul>\n<li>Gelastic epilepsy</li>\n<li>Precocious puberty</li>\n<li>Developmental delay</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The earliest indicator of response after starting iron therapy in a 6 year old with iron deficiency is",
    "choices": [
      {
        "id": 1,
        "text": "Increased ferritin"
      },
      {
        "id": 2,
        "text": "Increased haemoglobin"
      },
      {
        "id": 3,
        "text": "Increased reticulocyte count"
      },
      {
        "id": 4,
        "text": "Increased serum iron"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Reticulocyte count</strong> is the <strong>earliest</strong> to rise after starting iron therapy.</li>\n<li>This is followed by <strong>elevation of haemoglobin levels.</strong></li>\n<li><strong>Body iron stores</strong> are repleted after the correction of haemoglobin levels.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following disease the given appearance of calves is seen ?",
    "choices": [
      {
        "id": 1,
        "text": "Spinal muscular dystrophy"
      },
      {
        "id": 2,
        "text": "Muscular dystrophy"
      },
      {
        "id": 3,
        "text": "Myopathy"
      },
      {
        "id": 4,
        "text": "Peripheral neuropathy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The given image shows <strong>Pseudohypertrophy of the calves</strong>. This is characteristic of <strong>Duchenne Muscular dystrophy.</strong></li>\n<li>In DMD due to the weakness of proximal thigh muscles there is compensatory hypertrophy of the distal calf muscle.</li>\n<li>This is <strong>pseudo hypertrophy</strong> as there is only a <strong>deposition of fat and connective tissue</strong> and not true hypertrophy of muscles.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a8f134239d1b4fb8a3d65beb0661bc7a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 1 year old child presents with features of hypotonia. On examination , he has tongue fasciculations, normal intelligence , keeps his body in a frog like position. The most likely diagnosis would be",
    "choices": [
      {
        "id": 1,
        "text": "Limb girdle dystrophy"
      },
      {
        "id": 2,
        "text": "Down\u2019s syndrome"
      },
      {
        "id": 3,
        "text": "Spinal muscular atrophy"
      },
      {
        "id": 4,
        "text": "Guillian Barre syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical situation suggests <strong>Floppy Infant syndrome.</strong></p>\n<div class=\"page\" title=\"Page 741\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Spinal muscular atrophy is a genetic disease characterized by progressive degeneration of anterior horn cells, which results in weakness.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Among the causes of Floppy Infant syndrome, <strong>Spinal muscular atrophy</strong> is the best choice as:</p>\n<ul>\n<li>Intelligence is normal</li>\n<li>Tongue fasciculations</li>\n</ul>\n<p><strong>Other options :</strong></p>\n<ul>\n<li><strong>Down&rsquo;s syndrtome</strong> &ndash; Intelligence impaired</li>\n<li><strong>Guillian barre </strong>&ndash; Acute condition with history of fever or viral infections.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 8 year old boy presented with fever and bilateral cervical lymphadenopathy with prior history of sore throat. There was no hepatomegaly. The peripheral blood smear shows > 20 % lympho plasmacytoid cells. The most likely diagnosis is",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculosis"
      },
      {
        "id": 2,
        "text": "Infectious Mononucleosis"
      },
      {
        "id": 3,
        "text": "Acute lymphoblastic leukemia"
      },
      {
        "id": 4,
        "text": "Influenza"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical situation suggests <strong>Infectious Mononucleosis</strong></p>\n<p>Features of Infectious Mononucleosi :</p>\n<ul>\n<li>Cervical Lymphadenopathy</li>\n<li>Fever</li>\n<li>History of sore throat</li>\n<li>&gt;20% atypical lymphocytes</li>\n</ul>\n<p>Hepatomegaly may be <strong>absent</strong> (Occurs only in 30 % of cases)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are used in diagnosis of HIV in a 2 month old child except",
    "choices": [
      {
        "id": 1,
        "text": "HIV ELISA"
      },
      {
        "id": 2,
        "text": "p24 antigen assay"
      },
      {
        "id": 3,
        "text": "DNA PCR"
      },
      {
        "id": 4,
        "text": "Viral culture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>HIV ELISA <strong>cannot </strong>be used in diagnosis of HIV in a child upto <strong>18 months of age.</strong></p>\n<ul>\n<li>This is because all neonates born to HIV infected mothers <strong>will have IgG antibody</strong> in their blood<strong> regardless of their infection status</strong>.</li>\n<li>So up until 18 months of age they will continue to test positive. Hence HIV ELISA should not be used.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sandifer syndrome due to GERD in infants is most often confused with ?",
    "choices": [
      {
        "id": 1,
        "text": "Acute otitis media"
      },
      {
        "id": 2,
        "text": "Recurrent vomiting"
      },
      {
        "id": 3,
        "text": "Seizures"
      },
      {
        "id": 4,
        "text": "Sinusitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Abnormal or Dystonic neck posturing in <strong>Sandifer syndrome</strong> is most often confused with <strong>Seizures. </strong></li>\n<li>Posturing in Sandifer syndrome occurs <strong>1 hour after feeding</strong>, and babies frequently have a <strong>history of vomiting</strong>, failure to thrive and repeated chest infections.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Test done  to diagnose syphilis in newborn if mother is syphilitic is",
    "choices": [
      {
        "id": 1,
        "text": "ZN staining"
      },
      {
        "id": 2,
        "text": "Detection of IgG"
      },
      {
        "id": 3,
        "text": "Fluorescent antigen test"
      },
      {
        "id": 4,
        "text": "Syphilis captia M test"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Syphilis captia M test</strong> is an <strong>Enzyme immunoassay</strong> used to detect syphilis in newborn if the mother is syphilitic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "First sign of puberty in a female is",
    "choices": [
      {
        "id": 1,
        "text": "Tanner stage 1"
      },
      {
        "id": 2,
        "text": "Pubic hair"
      },
      {
        "id": 3,
        "text": "Tanner stage 2"
      },
      {
        "id": 4,
        "text": "Axillary hair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Thelarche</strong> is the first sign of puberty in girls.</p>\n<ul>\n<li><strong>Beginning of secondary breast development</strong> at onset of puberty</li>\n<li><strong>Tanner stage 2</strong></li>\n<li>Due to increased levels of <strong>Estradiol</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cardiac lesions are expected in the patient seen in the image?",
    "choices": [
      {
        "id": 1,
        "text": "Aortic regurgitation"
      },
      {
        "id": 2,
        "text": "Coarctation of the aorta"
      },
      {
        "id": 3,
        "text": "VSD"
      },
      {
        "id": 4,
        "text": "ASD"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This is a patient with a\u00a0<strong>webbed neck</strong>, seen typically in\u00a0Turner\u2019s syndrome.</p>\n<p><strong>Turner\u2019s syndrome:</strong></p>\n<ul>\n<li>Also known as Ullrisch- Turner syndrome or <strong>\u2018Gonadal dysgenesis\u2019</strong> \u2013 Caused by absence of set of genes from the short arm of X chromosome ( 45XO )</li>\n<li>Breast development is absent with ovarian failure and primary or secondary amenorrhea.</li>\n<li>Lymphadema, short stature</li>\n<li>Low set ears, low hairline and webbed neck</li>\n<li>Horse shoe kidney</li>\n<li>Cardiac manifestations \u2013 <strong>Coarctation of aorta</strong>, bicuspid aortic valve</li>\n<li>Treatment \u2013 GH, Estrogen replacement therapy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dc936e0da19143d59f433666de254391.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Lesion in the given figure is caused by:",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus"
      },
      {
        "id": 2,
        "text": "Streptococcus"
      },
      {
        "id": 3,
        "text": "Pseudomonas"
      },
      {
        "id": 4,
        "text": "Y.Pestis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The lesion shown is <strong>Bullous Impetigo</strong></p>\n<ul>\n<li>Bullous impetigo is mainly an infection of infants and young children, caused by <strong>Staph aureus</strong> strains that produce <strong>exfoliative toxins</strong>, such as ETA, ETB, and ETD.</li>\n<li>These toxins blister the superficial epidermis by hydrolyzing <strong>human desmoglein 1</strong>, resulting in a <strong>subcorneal vesicle \u2013 Localized staphylococcal skin syndrome.</strong></li>\n<li>Lesions develop most commonly on skin of the face, buttocks, trunk, perineum, and extremities</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0250fc7df24a4e81adcc6e6cae8af32e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/54c5513d0a344a9dad93b8f78590a146x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/19afb32ac0af46e6b4698c37258c07ffx720x960.JPEG"
    ]
  },
  {
    "text": "Most common cause of acute diarrhoea in paediatric age group in India is :",
    "choices": [
      {
        "id": 1,
        "text": "ETEC"
      },
      {
        "id": 2,
        "text": "EPEC"
      },
      {
        "id": 3,
        "text": "Rota virus"
      },
      {
        "id": 4,
        "text": "Campylobacter jejuni"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rotavirus infection</strong> is the <strong>most common cause</strong> of diarrhoea in all children &lt;5years of age.</p>\n<p>Other agents are:</p>\n<ul>\n<li>E.coli \u2013 second most common cause</li>\n<li>Campylobacter jejuni</li>\n<li>Salmonella</li>\n<li>Shigella</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Commonest cause of obstructive hydrocephalus in children",
    "choices": [
      {
        "id": 1,
        "text": "Aqueductal stenosis"
      },
      {
        "id": 2,
        "text": "Dandy walker syndrome"
      },
      {
        "id": 3,
        "text": "Subarachnoid hemorrhage"
      },
      {
        "id": 4,
        "text": "Tubercular meningitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Etiology of Hyrocephalus :</p>\n<ul>\n<li>Obstructive /non-communicating hydrocephalus develops most commonly in children due to <strong>Aqueductal stenosis.</strong></li>\n<li><strong>Non-obstructive hydrocephalus</strong> most commonly occurs due to <strong>subarachnoid hemorrhage</strong> which is usually a result of intraventricular hemorrhage in a preterm infant.</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<td><strong>Communicating/non-obstructive</strong></td>\n<td><strong>Non-communicating/obstructive</strong></td>\n</tr>\n<tr>\n<td>Post meningitic</td>\n<td>Aqueductal stenosis</td>\n</tr>\n<tr>\n<td>Post haemorrhagic</td>\n<td>Dandy Walker/Chiari malformation</td>\n</tr>\n<tr>\n<td>Choroid plexuses papilloma</td>\n<td>Tuberculosis</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Automatism is seen in all except",
    "choices": [
      {
        "id": 1,
        "text": "Complex Partial seizures"
      },
      {
        "id": 2,
        "text": "Infantile spasm"
      },
      {
        "id": 3,
        "text": "Landau\u2013Kleffner syndrome"
      },
      {
        "id": 4,
        "text": "Absence seizures"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Infantile spasm doesn't present with automatism</li>\n<li>Automatism are the characteristic feature of <strong>Complex partial seizures.</strong></li>\n<li>Automatisms are <strong>automatic semi purposeful</strong> movements of mouth (oral,alimentary such as chewing) or of the extremities (eg.manipulation of sheets/walking).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Congenital adrenal hyperplasia in a female child, with the feature shown in the image is due to deficiency of?",
    "choices": [
      {
        "id": 1,
        "text": "21 alpha hydroxylase"
      },
      {
        "id": 2,
        "text": "17 alpha hydroxylase"
      },
      {
        "id": 3,
        "text": "11 alpha hydroxylase"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image depicts features of congenital virilization seen in\u00a0<strong>congenital adrenal hyperplasia with\u00a021-hydroxylase deficiency\u00a0</strong></p>\n<p><strong>Features:</strong></p>\n<ul>\n<li>Group of <strong>autosomal recessive</strong> disorders caused by deficiency of enzymes responsible for synthesis of <strong>cortisol</strong> and <strong>aldosterone</strong> such as 21-hydroxylase, 11-beta-hydroxylase, or 3-beta-hydroxysteroid dehydrogenase.</li>\n<li>Deficiency of 21-hydroxylase, resulting from mutations or deletions of <strong>CYP21A</strong>, is the most common form of CAH, accounting for more than 90% of cases.</li>\n<li><strong>Females </strong>with mild 21-hydroxylase deficiency are identified later in childhood because <strong>of precocious pubic hair</strong>, <strong>clitoromegaly</strong>, or both, often accompanied by accelerated growth and skeletal maturation (simple virilizing adrenal hyperplasia).</li>\n<li><strong>Males </strong>with 21-hydroxylase deficiency have <strong>normal genitalia</strong></li>\n<li><strong>Lab diagnosis</strong> \u2013 decreased cortisol, increased ACTH,17-hydroxyprogesterone, plasma rennin, serum androgens</li>\n<li><strong>Treatment </strong>\u2013 Glucocorticoid replacement</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/acc3b28806a84cd7a928c19c71125e46.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The newborn cardiac output is",
    "choices": [
      {
        "id": 1,
        "text": "200ml/kg/min"
      },
      {
        "id": 2,
        "text": "250 ml/kg/min"
      },
      {
        "id": 3,
        "text": "300 ml/kg/min"
      },
      {
        "id": 4,
        "text": "350ml/kg/min"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The newborn cardiac output is 350ml/kg/min.</p>\n<table style=\"height: 225px;\" width=\"312\">\n<tbody>\n<tr>\n<td style=\"width: 101.734px;\"><strong>Age</strong></td>\n<td style=\"width: 194.266px;\"><strong>Cardiac output(ml/kg/min)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 101.734px;\">Fetus</td>\n<td style=\"width: 194.266px;\">450</td>\n</tr>\n<tr>\n<td style=\"width: 101.734px;\">Newborn</td>\n<td style=\"width: 194.266px;\">350</td>\n</tr>\n<tr>\n<td style=\"width: 101.734px;\">1-2 months of life</td>\n<td style=\"width: 194.266px;\">150</td>\n</tr>\n<tr>\n<td style=\"width: 101.734px;\">Adult</td>\n<td style=\"width: 194.266px;\">75</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "1 and \u00bd year old child with history of chronic diarrhea was brought to the hospital with complaints of perioral and perineal rash. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Epidermolysis bullosa"
      },
      {
        "id": 2,
        "text": "Staphylococcal scalded skin syndrome"
      },
      {
        "id": 3,
        "text": "Acrodermatitis enteropathica"
      },
      {
        "id": 4,
        "text": "Toxic epidermal necrolysis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Acrodermatitis enteropathica:</strong></p>\n<ul>\n<li><strong>Autosomal recessive</strong> disorder seen in infants due to defect in intestinal zinc specific transporter \u2013 Human <strong>ZIP4 protein</strong></li>\n<li>Genetic locus \u2013 Chromosome <strong>8q24.3</strong></li>\n<li>Classically presents while <strong>weaning</strong> from breast milk to formula, which has lower zinc bioavailability than breast milk.</li>\n<li><strong>C/F</strong> \u2013 Perioral and perineal rashes, periungal dermatitis- Beau\u2019s lines on nails, chronic diarrhea, alopecia.</li>\n<li><strong>Labs</strong> \u2013 Low serum zinc, ALP</li>\n<li><strong>Paneth cell</strong> inclusion in intestinal mucosal biopsy</li>\n<li><strong>Treatment</strong> \u2013 Zinc \u2013 50mg/ day for infants, upto 150mg/day for children</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4b328f43b9b74287920132bd0b71bee8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which one of the following is not a feature in cerebral palsy?",
    "choices": [
      {
        "id": 1,
        "text": "Hypotonia"
      },
      {
        "id": 2,
        "text": "Microcephaly"
      },
      {
        "id": 3,
        "text": "Ataxia"
      },
      {
        "id": 4,
        "text": "Flaccid paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Flaccid paralysis </strong>is <strong>not</strong> a feature of cerebral palsy (CP).&nbsp;</p>\n<p>CP is an <strong>upper motor neuron disease </strong>characterized by <strong>rigidity</strong> and <strong>scissoring gait</strong>.<strong>&nbsp;</strong><strong>Flaccid paralysis</strong> would be seen in&nbsp;<strong>lower motor neuron disease</strong>.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Hypotonia</strong> is a characteristic feature of <strong>athetoid CP.&nbsp;</strong>These infants generally have poor head control.&nbsp;</p>\n<p>Option B:<strong>&nbsp;Microcephaly</strong><strong>&nbsp;</strong>can be seen in CP due to perinatal insults to the developing brain.&nbsp;</p>\n<p>Option C: <strong>Ataxia&nbsp;</strong>is a common feature of <strong>extrapyramidal&nbsp;CP</strong>.</p>\n<p>The <strong>subtypes</strong> of cerebral palsy are given in the table below:&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd480ee47cc947ccb1c31d18bad0e6aax510x520.GIF"
    ]
  },
  {
    "text": "Stranger anxiety develops at",
    "choices": [
      {
        "id": 1,
        "text": "3 months"
      },
      {
        "id": 2,
        "text": "7 months"
      },
      {
        "id": 3,
        "text": "11 months"
      },
      {
        "id": 4,
        "text": "4 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Stranger anxiety develops at <strong>7 months</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A primigravida gives birth to a term baby. You, as a medical officer, counsel her about breastfeeding. Which of the following is a sign of poor attachment of the baby to the breast?",
    "choices": [
      {
        "id": 1,
        "text": "Baby\u2019s mouth wide open"
      },
      {
        "id": 2,
        "text": "Lower areola more visible"
      },
      {
        "id": 3,
        "text": "Baby\u2019s lower lip everted"
      },
      {
        "id": 4,
        "text": "Baby\u2019s chin touching the breast"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Signs of <strong>good attachment</strong> of baby&rsquo;s mouth to nipple include</p>\n<ul>\n<li>The mouth is <strong>wide open</strong></li>\n<li>Most of the nipple and areola are in the mouth and <strong>only upper areola is visible</strong></li>\n<li>The baby&rsquo;s <strong>chin </strong>is touching the<strong> breast</strong></li>\n<li>The <strong>lower lip everted</strong></li>\n</ul>\n<p><strong>Exclusive breastfeeding</strong>&nbsp;is recommended for<strong>&nbsp;6 months</strong>. <strong>Complementary foods</strong>&nbsp;rich in iron and other micronutrients should be introduced at about 6 months of age. Breastfeeding should continue for at least the first year.</p>\n<p class=\"p1\">The composition of breast&nbsp;<span class=\"s1\">milk&nbsp;</span><span class=\"s2\">varies&nbsp;</span>at different time points of lactation to&nbsp;<span class=\"s2\">suit&nbsp;</span>the&nbsp;<span class=\"s2\">needs&nbsp;</span>of the baby.</p>\n<ul>\n<li><strong>Colostrum&nbsp;</strong>is secret in small quantities during the first 3 to 4 days. It is thick, and yellow and contains a large number of antibodies, immune-competent cells, and vitamins A, D, E, and K.&nbsp;</li>\n<li><strong>Transitional milk&nbsp;</strong>is the one that is seen after 3-4 days until 2 weeks and has an increased fat and sugar content while the protein and immunoglobulin content reduces.</li>\n<li><strong>Mature milk&nbsp;</strong>is secreted after transitional milk. It is essential for the optimum growth of the baby as it contains all the nutrients. It is thinner and more watery.</li>\n<li>A mother who delivers before 37 weeks secretes<strong>&nbsp;preterm milk&nbsp;</strong>that contains proteins, sodium, iron, immunoglobulin, and calories as needed by the preterm infant.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3 yr old male child with left flank pain is diagnosed to have an acute UTI. On USG, the left ureter was found to be duplicated. The most probable site of the opening of ectopic ureter will be?",
    "choices": [
      {
        "id": 1,
        "text": "Prostatic urethra"
      },
      {
        "id": 2,
        "text": "Seminal vesicle"
      },
      {
        "id": 3,
        "text": "Ejaculatory duct"
      },
      {
        "id": 4,
        "text": "Trigone of bladder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Opening of the ectopic ureter in male (most to least common)&nbsp;:</p>\n<ul>\n<li><strong>Posterior urethra (prostatic) above the external sphincter</strong></li>\n<li>Seminal vesicle</li>\n<li>Prostatic utricle</li>\n<li>Ejaculatory duct</li>\n<li>Vas deferens</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a child, non-functioning Kidney is best diagnosed by",
    "choices": [
      {
        "id": 1,
        "text": "USG"
      },
      {
        "id": 2,
        "text": "IVU"
      },
      {
        "id": 3,
        "text": "MAG 3 Renogram"
      },
      {
        "id": 4,
        "text": "Creatinine clearance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Renal scintigraphy</strong> is the best method to identify a non functioning kidney.</p>\n<p>Renograms can be of :</p>\n<ul>\n<li>MAG 3</li>\n<li>DTPA</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pupils in stage 2 of hypoxic ischaemic encephalopathy show",
    "choices": [
      {
        "id": 1,
        "text": "Mydriasis"
      },
      {
        "id": 2,
        "text": "Miosis"
      },
      {
        "id": 3,
        "text": "Unequal pupils"
      },
      {
        "id": 4,
        "text": "Normal light reflex"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pupils in different stages of HIE :</strong></p>\n<p>Stage 1\u00a0 - Mydriasis</p>\n<p><strong>Stage 2 - Miosis</strong></p>\n<p>Stage 3 - Unequal, poor light reflex</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Successful ventilation is determined by",
    "choices": [
      {
        "id": 1,
        "text": "EtCO2 being zero"
      },
      {
        "id": 2,
        "text": "Symmetric breath sounds"
      },
      {
        "id": 3,
        "text": "HR around 90 beats / min"
      },
      {
        "id": 4,
        "text": "Decreased tone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Successful ventilation</strong> is signified by:</p>\n<ul>\n<li>Adequate chest rise</li>\n<li><strong>Symmetric breath sounds</strong></li>\n<li>Improved pink colour</li>\n<li><strong>Heart rate &gt; 100 beats/min</strong></li>\n<li>Spontaneous respirations</li>\n<li><strong>Presence of end-tidal CO2 (EtCO2 should not be zero)</strong></li>\n<li><strong>Improved tone</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a child with Tetralogy of Fallot, with fever and diarrhoea, which is the surest sign of a cyanotic spell?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatomegaly"
      },
      {
        "id": 2,
        "text": "Absence of murmur"
      },
      {
        "id": 3,
        "text": "S3 gallop rhythm"
      },
      {
        "id": 4,
        "text": "Arterial oxygen saturation less than 75 %"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>The absence of murmur</strong> can be considered as <strong>a sure sign</strong> of Cyanotic spell.</p>\n<p>There is a <strong>characteristic temporary decrease</strong> or absence of systolic murmur during a cyanotic spell because <strong>of decreased flow across the right ventricular outflow tract.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Differential Cyanosis occurs in which of the following disease",
    "choices": [
      {
        "id": 1,
        "text": "Severe coarctation"
      },
      {
        "id": 2,
        "text": "PPHN"
      },
      {
        "id": 3,
        "text": "Interrupted aortic arch"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Differential cyanosis</strong> can be caused by</p>\n<ul>\n<li>Persistent pulmonary hypertension of Newborn</li>\n<li>Coarctation of Aorta</li>\n<li>Interrupted aortic arch</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The feature of breast feeding jaundice is:",
    "choices": [
      {
        "id": 1,
        "text": "Withholding Breastfeeding"
      },
      {
        "id": 2,
        "text": "Conjugated hyperbilirubinemia"
      },
      {
        "id": 3,
        "text": "Occurs in the 1st week after birth in breastfed infants"
      },
      {
        "id": 4,
        "text": "Supplementation with formula or expressed breast milk is inappropriate even if the infant appears dehydrated"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Breast feeding jaundice is an <strong>early-onset,\u00a0unconjugated hyperbilirubinemia\u00a0which occurs in the\u00a01st week after birth\u00a0in\u00a0breastfed infants.</strong></li>\n<li>It is the <strong>result of decreased milk intake\u00a0</strong>with dehydration and/or reduced caloric intake.</li>\n<li><strong>Frequent breastfeeding\u00a0of &gt;10times /24 hr</strong> (<strong>NOT</strong> withholding breastfeeding), rooming-in with night feeding, and ongoing lactation support helps to\u00a0reduce the incidence of early breastfeeding jaundice.</li>\n<li>Even when breastfeeding jaundice develops, breastfeeding should be continued if possible.</li>\n<li>Supplementation with formula or expressed breast milk is appropriate if the intake seems inadequate, weight loss is excessive, or the infant appears dehydrated.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old child presents with an upper limb deformity as given in the image below. He has had recurrent respiratory infections and is breathless while walking. You hear a wide split and fixed second heart sound through all phases of respiration. Identify the heart disease likely to be present in this child.",
    "choices": [
      {
        "id": 1,
        "text": "Atrial septal defect"
      },
      {
        "id": 2,
        "text": "Transposition of great vessels (TGV)"
      },
      {
        "id": 3,
        "text": "Patent ductus arteriosus (PDA)"
      },
      {
        "id": 4,
        "text": "Total anomalous pulmonary venous connection (TAPVC)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The heart disease likely to be present in this child is an&nbsp;<strong>atrial septal defect (ASD).</strong></p>\n<p>The given clinical history along with the image is suggestive of <strong>Holt Oram syndrome</strong>. The syndrome is characterized by hypoplasia of the thumb, phocomelia, atrial septal defect, and triphalangism.&nbsp;</p>\n<p><strong>Clinical features of ASD</strong>&nbsp;include&nbsp;<strong>exercise intolerance</strong> and <strong>failure to thrive</strong> although many children are asymptomatic. On auscultation, there is a&nbsp;<strong>widely split </strong>and<strong> fixed second heart sound</strong> in all phases of respiration, along with an <strong>ejection systolic murmur</strong>. Occasionally an ejection click is heard over the pulmonary area.</p>\n<p>Chest X-ray shows <strong>enlarged right atrium and right ventricle</strong>. The diagnosis can be further affirmed in ECG which interprets <strong>right ventricular volume overload</strong> with normal peripheral vascular resistance. The location and size of the ASD can be confirmed in <strong>2D scanning of the defect</strong>. Treatment involves <strong>closure</strong> of the defect either by surgery or by percutaneous catheter device insertion over the defect.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B:&nbsp;<strong>Transposition of great vessels (TGV)</strong> - ejection systolic murmur of grade 1 or 2 with features of cyanosis and failure to thrive.</p>\n<p>Option C:&nbsp;<strong>Patent ductus arteriosus (PDA)</strong> - continuous murmur is distinctly heard on auscultation due to systolic and diastolic overloading of the pulmonary artery.&nbsp;</p>\n<p>Option D <strong>Total anomalous pulmonary venous connection (TAPVC</strong>)&nbsp;- pulmonary ejection systolic murmur with a tricuspid flow murmur.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8bea1f12248440ad8659c8784adb5d3a.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A neonate presents with fever, lethargy, abdominal distension, vomiting and constipation. Clinically he was diagnosed as volvulus neonatarum with suspected perforation. Best investigation would be?",
    "choices": [
      {
        "id": 1,
        "text": "Barium enema"
      },
      {
        "id": 2,
        "text": "Plain X ray"
      },
      {
        "id": 3,
        "text": "Upper GI endoscopy"
      },
      {
        "id": 4,
        "text": "Barium meal follow through"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Plain X ray</strong> is the <strong>initial investigation of choice</strong> to demonstrate free air under diaphragm in suspected cases of perforation.</li>\n<li><strong>Barium contrast studies with fluoroscopy</strong> is the <strong>investigation of choice in early stages of volvulus</strong>.</li>\n<li>However in cases of perforation barium contrast is not used because of <strong>high risk of peritonitis.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the shape of caecum in the newborn",
    "choices": [
      {
        "id": 1,
        "text": "Ovoid"
      },
      {
        "id": 2,
        "text": "Trapezoid"
      },
      {
        "id": 3,
        "text": "Globular"
      },
      {
        "id": 4,
        "text": "Conical"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The shape of caecum in an infant is <strong>conical </strong>with <strong>appendix at the base of the cone</strong></li>\n<li>Thereafter caecum descends and assumes its <strong>round shape</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The treatment of choice for a primary grade 5 VUR involving both kidneys in a 6 month old boy is",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotic prophylaxis"
      },
      {
        "id": 2,
        "text": "Ureteric reimplantation"
      },
      {
        "id": 3,
        "text": "Bilateral ureterostomies"
      },
      {
        "id": 4,
        "text": "Cystoscopy followed by subureteric injection of Teflon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Treatment of choice\u00a0</strong>of <strong>Grade 5 Vesico Ureteric Reflux</strong> :</p>\n<ul>\n<li>Less than 1 year \u2013 Antibiotic prophylaxis</li>\n<li>1-5 years \u2013 Unilateral - Antibiotic prophylaxis</li>\n<li>1-5 years \u2013 Bilateral \u2013 Surgery</li>\n<li>1-5 years with scarring \u2013 Surgery</li>\n<li>Above 5 years \u2013 Surgery</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10 year old boy presents to the pediatric emergency unit with seizures. Blood pressure in the upper extremity is measured as 200/140 mm Hg. Femoral pulses were not palpable. The most likely diagnosis is",
    "choices": [
      {
        "id": 1,
        "text": "Grandmal seizures"
      },
      {
        "id": 2,
        "text": "Coarctation of aorta"
      },
      {
        "id": 3,
        "text": "Renal parenchymal disease"
      },
      {
        "id": 4,
        "text": "Takayasu aortoarteritis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Isolated upper extremity hypertension</strong> with absent or <strong>diminished femoral pulses</strong> clearly suggest the diagnosis of <strong>Coarcation of aorta.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true regarding tricuspid atresia except",
    "choices": [
      {
        "id": 1,
        "text": "Patent foramen ovale"
      },
      {
        "id": 2,
        "text": "Pulmonary oligemia in chest X ray"
      },
      {
        "id": 3,
        "text": "Left axis deviation in ECG"
      },
      {
        "id": 4,
        "text": "Split S2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Single S2</strong> is present in <strong>tricuspid atresia.</strong></p>\n<p>Features of Tricuspid Atresia :</p>\n<ul>\n<li>Underdeveloped Right ventricle</li>\n<li>ASD or <strong>patent foramen ovale</strong></li>\n<li><strong>Hypertrophy of left ventricle \u2013 Left axis deviation</strong></li>\n<li><strong>Pulmonary oligemia \u2013 90%</strong></li>\n<li>Normal S1</li>\n<li><strong>Single S2</strong></li>\n<li>Murmur grade 2 to grade 3</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn is being evaluated for anuria. Imaging reveals renal agenesis and pulmonary hypoplasia. The delivery was complicated due to oligohydramnios. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Potter sequence"
      },
      {
        "id": 2,
        "text": "Pierre Robin syndrome"
      },
      {
        "id": 3,
        "text": "Congenital diaphragmatic hernia"
      },
      {
        "id": 4,
        "text": "CHARGE syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A newborn infant with anuria, renal agenesis, and pulmonary hypoplasia, with a&nbsp;history of oligohydramnios, is suggestive of <strong>Potter's sequence</strong></p>\n<p>Potter's sequence is characterized by the triad of:</p>\n<ul>\n<li><strong>Renal agenesis</strong></li>\n<li><strong>Oligohydramnios</strong></li>\n<li><strong>Pulmonary hypoplasia</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/41d0c61174554bb389fbcfdb9f26423fx1280x2156.5021156558532.JPEG"
    ]
  },
  {
    "text": "All of the following are considered normal in a newborn except",
    "choices": [
      {
        "id": 1,
        "text": "Pustular melanosis"
      },
      {
        "id": 2,
        "text": "Mongolian spots"
      },
      {
        "id": 3,
        "text": "Tuft of hair over LS spine"
      },
      {
        "id": 4,
        "text": "Erythema toxicum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A tuft of hair over the lumbosacral spine is not a normal finding in newborns. It suggests an underlying abnormality such as an occult spina bifida, a sinus tract, or a tumor.</p>\n<p>Normal skin findings in a newborn:</p>\n<ul>\n<li>Erythema toxicum &ndash; small white papules on an erythematous base, seen 1-3 days after birth. They contain eosinophils and may persist for a week.</li>\n<li>Pustular melanosis &ndash; Seen predominantly in black neonates, they contain neutrophils and are present at birth as a vesiculopustular eruption. Lasts for 2-3 days.</li>\n<li>Mongolian spots &ndash; Slate-blue, demarcated areas of pigmentation seen over the buttocks and back. They tend to disappear within the first year.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male infant born at 34 weeks of gestation by emergency LSCS was found to have the following finding on histopathological examination of his umbilical cord. Anomalies of which of the following systems are most likely to be found in this infant?",
    "choices": [
      {
        "id": 1,
        "text": "Renal system"
      },
      {
        "id": 2,
        "text": "Central nervous system"
      },
      {
        "id": 3,
        "text": "Gastro-intestinal system"
      },
      {
        "id": 4,
        "text": "Endocrine system"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows the presence of a&nbsp;<strong> single umbilical artery</strong>&nbsp;which is associated with an increased risk for an <strong>occult</strong>&nbsp;<strong>renal anomaly.</strong></p>\n<p>The histopathological image of the cross-section of the umbilical cord shows 2 vessels as marked, a <strong>thin-walled</strong> umbilical<strong> vein</strong> and a <strong>thicker-walled</strong> umbilical<strong> artery.</strong>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a420f2e6e164a8896b87fcd0a1cadc3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10827f5c9c9c4555b6b49ad310524ff4x1280x1530.0423131170662.JPEG"
    ]
  },
  {
    "text": "You notice a child pulling to the standing position and then shuffling around by holding onto furniture. At what age is this milestone typically attained?",
    "choices": [
      {
        "id": 1,
        "text": "8 months"
      },
      {
        "id": 2,
        "text": "10 months"
      },
      {
        "id": 3,
        "text": "13 months"
      },
      {
        "id": 4,
        "text": "15 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cruising</strong>\u00a0is an activity in which a child pulls to the standing position and then shuffles around holding onto a piece of furniture.\u00a0Cruising is attained by 10-11 months.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-month-old child diagnosed with severe acute malnutrition (SAM) is receiving treatment in your clinic. Given below are five statements regarding the treatment. Pick out the incorrect statements.",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, 5"
      },
      {
        "id": 2,
        "text": "1, 3, 5"
      },
      {
        "id": 3,
        "text": "2 and 4 only"
      },
      {
        "id": 4,
        "text": "3 only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Vitamin A</strong> is <strong>not\u00a0</strong><strong>given daily\u00a0</strong>in the treatment of SAM. It\u00a0is given on <strong>day 1, day 2</strong> and <strong>day 14.</strong></p>\n<p>The general treatment involves <strong>10 steps in 2 phases:</strong></p>\n<p><strong>Initial stabilization phase:\u00a0</strong>It focuses on restoring homeostasis and treating medical conditions and requires<strong> 2-7 days</strong> of inpatient treatment.</p>\n<p><strong>Mnemonic: SHIELDED</strong></p>\n<ul>\n<li><strong>S</strong>ugar deficiency(hypoglycemia)\u00a0</li>\n<li><strong>H</strong>ypothermia</li>\n<li><strong>I</strong>nfection</li>\n<li><strong>E</strong><strong>L</strong>ectrolyte imbalance</li>\n<li><strong>DE</strong>hydration</li>\n<li><strong>D</strong>eficiency of nutrients</li>\n</ul>\n<p><strong>R</strong><strong>ehabilitation phase: </strong>It focuses on rebuilding wasted tissue and generally takes <strong>several weeks.</strong></p>\n<p><strong>Steps:</strong></p>\n<ul>\n<li>Treat <strong>hypoglycemia</strong> (blood glucose level &lt;54 mg/dl): if symptomatic, give 10% Dextrose IV at 5ml/kg. Feeding should be initiated with starter <strong>F-75</strong> (formula with 75 kcal/100 ml of feed)</li>\n<li>Treat <strong>hypothermia</strong> (axillary &lt;35\u00b0C or 95\u00b0F): Skin-to-skin contact with care called \u201c<strong>kangaroo technique\u201d </strong>or dress in warmer clothes, cover head, wrap in a warmed blanket, and provide indirect heat.</li>\n<li>Treat <strong>dehydration</strong>:\u00a0Hydrate with <strong>ReSoMal</strong> (45 mmol Na/L). It is a low-sodium rehydration solution for malnutrition.</li>\n<li>Correct <strong>electrolyte imbalance</strong>:\u00a0There is a deficit of potassium and magnesium and excess sodium. Give extra potassium (3 to 4 mEq/kg/day) and magnesium (4 mEq/ kg/day) for at least 2 weeks.</li>\n<li>Treat an\u00a0<strong>infection</strong>:\u00a0Starting on the first day, give broad-spectrum antibiotics to all children.</li>\n<li>Correct <strong>micronutrient deficiencies</strong>:\n<ul>\n<li><strong>Do not give iron </strong>in the<strong> stabilization phase,</strong>\u00a0because excess iron leads to free radical injury. Give iron 3 mg/kg/day once the child starts gaining weight after the stabilization phase.</li>\n<li>Give vitamin A on day 1. Repeat on day 2 and day 14.</li>\n<li>Folic acid 1 mg (5 mg on day 1)</li>\n<li>Zinc (2 mg/kg/day)</li>\n<li>Copper (0.3 mg/kg/day)</li>\n</ul>\n</li>\n<li>Start <strong>cautious feeding</strong>: Give 8 to 12 small feeds of F75 feeds. It is low-lactose milk that contains\u00a0<strong>75 kcal and 0.9 g protein per 100 mL</strong>.\u00a0 After 3 days, transition to\u00a0<strong>F100 feeds</strong>\u00a0is made which is called a catch-up<strong>\u00a0diet.\u00a0</strong>This\u00a0provides 100 kcal and 2.9 g protein per 100 mL. After 1 week, calories are further increased to 150\u2013200 kcal/kg/day and protein to 4\u20136 g/kg/day.</li>\n<li><strong>Rehabilitation</strong>: The indications of entry to this phase are reduced/minimal oedema and the return of appetite.\n<ul>\n<li>Beginning of feeding.</li>\n<li>After 3 days, the transition to energy-dense feeding</li>\n<li>Stimulation of emotional and sensorial development</li>\n<li>Transfer to home-based diet</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/22a6f8392f5641839c27b495dcf6099dx1280x1485.JPEG"
    ]
  },
  {
    "text": "In the pediatric wards, you notice a baby, totally occupied with his little game and a mother trying hard to spoonfeed him. He is busy stacking toy cubes on top of each other and starts gleefully clapping once he makes a tower of 6. What is the likely age that this milestone corresponds to?",
    "choices": [
      {
        "id": 1,
        "text": "15 months"
      },
      {
        "id": 2,
        "text": "24 months"
      },
      {
        "id": 3,
        "text": "18 months"
      },
      {
        "id": 4,
        "text": "36 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A child can usually make a<strong> tower of 6</strong> blocks by <strong>24 months.</strong></p>\n<p>A child makes a tower of:</p>\n<ul>\n<li>2 blocks by 15 months</li>\n<li>3 blocks by 18 months</li>\n<li><strong>6 blocks by 2 years</strong></li>\n<li>9 blocks by 3 years</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are sent for active field surveillance of malnourished children to a rural district in central India. Which of the following specific finding would prompt you to make a diagnosis of marasmus?",
    "choices": [
      {
        "id": 1,
        "text": "Fatty change in liver"
      },
      {
        "id": 2,
        "text": "Voracious appetite"
      },
      {
        "id": 3,
        "text": "Hypoalbuminemia"
      },
      {
        "id": 4,
        "text": "Edema"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Children with&nbsp;<strong>marasmus</strong>&nbsp;have<strong>&nbsp;a&nbsp;voracious&nbsp;appetite,</strong> whereas children with <strong>kwashiorkor</strong> often <strong>refuse to eat</strong>.</p>\n<p>Marasmus is a calorie deficit state and kwashiorkor is a protein deficit state. The signs of low protein manifesting as hypoalbuminemia and edema are characteristically seen in kwashiorkor.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 2-month-old child is brought to your OPD with complaints of diarrhoea. The mother wants to know if she should continue breastfeeding. Which of these components in breast milk, beneficial in intestinal cell maturation and repair, prompt you to advise her to continue breastfeeding?",
    "choices": [
      {
        "id": 1,
        "text": "Lactoferrin"
      },
      {
        "id": 2,
        "text": "Epidermal growth factor"
      },
      {
        "id": 3,
        "text": "Para aminobenzoic acid"
      },
      {
        "id": 4,
        "text": "Glutathione peroxidase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The\u00a0<strong>epidermal growth factor\u00a0</strong>present in breastmilk helps in intestinal cell maturation and repair. This is why mothers are advised to continue breastfeeding in an infant affected with diarrhoea. It\u00a0is also beneficial in luminal surveillance.</p>\n<p><strong>Lactoferrin\u00a0</strong>(Option A) helps in immunomodulation, iron chelation, <strong>antimicrobial action.\u00a0</strong>It is also an\u00a0antiadhesive and trophic for intestinal growth.\u00a0</p>\n<p><strong>Para-aminobenzoic acid\u00a0</strong>(Option C) is present in low levels and offers protection against <strong>plasmodium</strong>.\u00a0</p>\n<p><strong>Glutathione peroxidase\u00a0</strong>(Option D) prevents lipid oxidation.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The eldest child of a ragpicker from the urban slums of Bandra presents with severe lower limb pain. Examination reveals swelling of costochondral junctions. The X-ray image obtained is given below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Scurvy"
      },
      {
        "id": 2,
        "text": "Achondroplasia"
      },
      {
        "id": 3,
        "text": "Osteomyelitis"
      },
      {
        "id": 4,
        "text": "Rickets"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette involving a neglected child (eldest usually) from a poor socio-economic background with bone pains due to <strong>subperiosteal haemorrhages</strong> and <strong>scorbutic rosary</strong> (swelling of costochondral junctions) is suggestive of&nbsp;<strong>scurvy.&nbsp;</strong></p>\n<p>Radiological features of scurvy:</p>\n<p><strong>Early changes</strong></p>\n<ul>\n<li><strong>The white line of Frankel </strong>on the ends of the shafts of the tibia and fibula</li>\n<li><strong>Wimberger ring sign: </strong>Sclerotic rings around the epiphyses of the femur and tibia.</li>\n</ul>\n<p><strong>Late changes</strong></p>\n<ul>\n<li><strong>Trummerfeld zone</strong>: Zones of destruction in the femur and tibia</li>\n<li><strong>Pelkan spur </strong>at the cortical end</li>\n</ul>\n<p>The image sums up the X-ray features noted in scurvy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6657d80c535a44c0bdd0b4c2d97cf523.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7be3f9b160724774b8fc1809117debbfx437x386.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/abd09f8853154d8caaf402a57f293629x720x507.JPEG"
    ]
  },
  {
    "text": "A newborn infant develops respiratory distress 2 days after birth. On examination, she is mottled and has weak upper extremity pulses and absent femoral pulses. Investigations reveal the coarctation of the aorta. Which of the following drugs can you use to keep the ductus open medically before surgical repair?",
    "choices": [
      {
        "id": 1,
        "text": "Trometamol"
      },
      {
        "id": 2,
        "text": "Indomethacin"
      },
      {
        "id": 3,
        "text": "Alprostadil"
      },
      {
        "id": 4,
        "text": "Morphine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Alprostadil</strong>, a prostaglandin E1 <strong>(PGE1) analogue</strong>, can be used to keep the <strong>ductus open</strong> medically in the coarctation of the aorta.</p>\n<p>The ductus arteriosus (the fetal connection between the pulmonary artery and the descending aorta) is <strong>functionally closed at 10-15hrs</strong> after birth and <strong>anatomically closed at 10-21 days&nbsp;</strong>after birth.</p>\n<p>Survival of newborns with certain heart lesions such as <strong>coarctation of the aorta, hypoplastic left heart syndrome and transposition of great vessels</strong> depends on the patency of ductus arteriosus. Closure of PDA in such conditions can lead to hypoperfusion, severe hypoxia and cyanosis.</p>\n<p>PGE1 is a potent and specific relaxant of ductal smooth muscle. PGE1 analogues like <strong>alprostadil, misoprost and rioprostil</strong> can be used to keep the ductus open and support systemic blood supply.</p>\n<p>In patent ductus arteriosus, the ductus is <strong>closed medically</strong> by NSAIDS (which inhibit prostaglandin synthesis) like <strong>ibuprofen trometamol/ ibuprofen lysine and indomethacin. Morphine&nbsp;</strong>can be used to manage respiratory distress &nbsp;but rarely preferred in a neonate.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A primigravida was taken up for emergency cesarean section in view of placental abruption, at 32 weeks of gestation. Immediately after delivery, you dry the baby, clear secretions from the mouth and nose, and provide tactile stimulation. But even after 30 seconds, you note the baby is still gasping for breath and oxygen saturation has not increased more than 92%. Which is the next best step?",
    "choices": [
      {
        "id": 1,
        "text": "Mechanical  ventilation"
      },
      {
        "id": 2,
        "text": "CPAP"
      },
      {
        "id": 3,
        "text": "100% oxygen"
      },
      {
        "id": 4,
        "text": "Surfactant and ventilation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>most common cause </strong>of<strong> respiratory distress</strong> in a <strong>preterm </strong>infant is <strong>neonatal RDS </strong>(hyaline membrane disease). The infant has presented with moderate respiratory distress without any signs of respiratory failure so early <strong>continuous positive airway pressure (CPAP)</strong> is the appropriate treatment.</p>\n<p>CPAP started at birth is the choice for the management of a preterm infant at risk for respiratory distress syndrome (RDS).\u00a0Early nasal CPAP has shown to lower mortality and risk of bronchopulmonary dysplasia. Room air is better than oxygen for the resuscitation of preterm infants, and 100% oxygen is also harmful, causing increased oxidative stress.</p>\n<p>The intubate-surfactant-extubate (INSURE) on CPAP technique is recommended for <strong>surfactant</strong> administration when babies showed signs of<strong> RDS</strong> and <strong>needed more than 30% inspired oxygen</strong> to maintain saturation\u00a0in the normal range.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common extracranial solid tumor in pediatric age group is_____",
    "choices": [
      {
        "id": 1,
        "text": "Juvenile pilocytic astrocytoma"
      },
      {
        "id": 2,
        "text": "Chloroma"
      },
      {
        "id": 3,
        "text": "Retinoblastoma"
      },
      {
        "id": 4,
        "text": "Neuroblastoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Neuroblastoma</strong> &ndash; is the most common intra-abdominal malignancy and also, the <strong>most common extracranial solid tumor</strong> in children.</li>\n<li>It is an embryonal cancer of the peripheral sympathetic nervous system.</li>\n<li>The median age for diagnosis is 22 months and 90% of cases are diagnosed by 5 years of age.</li>\n<li>Other options:\n<ul>\n<li>Optic nerve glioma, more properly referred to as <strong>juvenile pilocytic astrocytoma</strong>, is the <strong>most frequent tumor of the optic nerve</strong> in childhood.</li>\n<li><strong>Chloromas</strong>, which are collections of <strong>myeloid leukemia cells</strong>, seen in patients with AML, can occur throughout the neuroaxis.</li>\n<li><strong>Retinoblastoma</strong> is the <strong>most common primary malignant intraocular tumor </strong>of childhood.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common leukemia you would encounter in a child with the following findings?",
    "choices": [
      {
        "id": 1,
        "text": "Acute myeloid leukemia"
      },
      {
        "id": 2,
        "text": "Acute lymphoblastic leukemia"
      },
      {
        "id": 3,
        "text": "Chronic myeloid leukemia"
      },
      {
        "id": 4,
        "text": "Chronic lymphoid leukemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a typical Down's facies (flattened nose, flat occiput, low set ears, protruding tongue). The most common leukemia in children with <strong>Down syndrome</strong> is <strong>acute lymphoblastic leukemia (ALL).</strong></p>\n<p>Children with Down syndrome are at<strong> increased risk</strong> of both acute lymphoid leukemia (ALL) and acute myeloid leukemia (AML).</p>\n<p>10% of neonates with Down's syndrome develop<strong> transient leukemia or myeloproliferative disorder</strong>. These features usually resolve within the <strong>first 3 months of life</strong>. However, they require close follow-up, because 20\u201330% will develop <strong>typical leukemia (often acute megakaryocytic leukemia) by 3 years of life.</strong></p>\n<p>Note:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Most common leukemia in Down's syndrome: <strong>B-cell Acute lymphoblastic leukemia</strong> (overall)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">The most common leukemia in children<strong> &lt;3years</strong> of age with<strong> Down syndrome</strong> is<strong> acute myeloid leukemia (AML).</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Most common AML in Down's syndrome:<strong> M7/megakaryoblastic</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/845860367ea948d0affb5f5e2cd48976.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Pediatrics St 2';
        const quizFilename = 'pediatrics-st-2-e46f6aef.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>