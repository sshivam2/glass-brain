<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 007 (Image Based) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The given sago-grain appearance of conjunctiva is caused by ________",
    "choices": [
      {
        "id": 1,
        "text": "Chlamydia Trachomatis"
      },
      {
        "id": 2,
        "text": "Neisseria gonorrhoeae"
      },
      {
        "id": 3,
        "text": "Hemophilus influenza"
      },
      {
        "id": 4,
        "text": "Vitamin A deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given<strong> sago-grain appearance</strong> of conjunctiva is seen in <strong>trachoma&nbsp;</strong>caused by <strong>Chlamydia trachomatis</strong>.</p>\n<p>Conjunctival appearance:</p>\n<p><strong>1. In trachoma</strong></p>\n<ul>\n<li><strong>Sago-grain appearance</strong></li>\n<li>A <strong>follicular</strong> reaction</li>\n</ul>\n<p><strong style=\"font-size: 14px;\">2. In vernal keratoconjunctivitis</strong></p>\n<ul>\n<li><strong>Cobblestone appearance</strong></li>\n<li>A <strong>papillary</strong> reaction</li>\n<li>Seen in palpebral conjunctiva</li>\n</ul>\n<p><strong>3. Phlyctenular conjunctivitis</strong></p>\n<ul>\n<li>White-pinkish <strong>nodule</strong> in <strong>bulbar</strong> conjunctiva</li>\n</ul>\n<p><strong>4. Xerophthalmia</strong></p>\n<ul>\n<li>Epithelial xerosis</li>\n<li><strong>Bitots spot</strong> in <strong>bulbar</strong> conjunctiva</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e3351a65401444ab9b90b964778e3f4d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient with a history of peptic ulcer underwent upper GI endoscopic biopsy of the stomach. The biopsy is stained with a special stain and shown in the image. What is the special stain used?",
    "choices": [
      {
        "id": 1,
        "text": "Gomori's methanamine silver stain"
      },
      {
        "id": 2,
        "text": "Warthin starry silver stain"
      },
      {
        "id": 3,
        "text": "Congo Red stain"
      },
      {
        "id": 4,
        "text": "Acid Fast stain"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">The given slide shows the GI mucosa, which has been stained with&nbsp;<strong>Warthin-Starry silver stain</strong>, demonstrating the bacilli (Helicobacter pylori) causing type B gastritis<em><strong>.</strong></em></p>\n<p class=\"p1\"><span class=\"s1\">On antral biopsy, H. pylori organisms are seen abundantly within the surface mucus layer, but they are difficult to visualize with routine hematoxylin (H&amp;E) stains.&nbsp;</span>Organisms are most easily demonstrated with <strong>special stains</strong> like <strong>Warthin starry silver stain</strong> or <strong>Giemsa stain.</strong></p>\n<p><strong>Type B gastritis&nbsp;</strong></p>\n<ul>\n<li>Type B gastritis is associated with&nbsp;<em>H. pylori.</em></li>\n<li>It commonly affects the antrum.</li>\n<li>Intestinal metaplasia is associated with chronic pan-gastritis with atrophy.</li>\n<li>Intestinal metaplasia with dysplasia has&nbsp;<strong>malignant potential.</strong></li>\n</ul>\n<p><em>H. pylori</em>&nbsp;infection is also a risk factor for the following:</p>\n<ul>\n<li>Peptic ulcer disease (duodenal &gt; gastric)</li>\n<li>Gastric adenocarcinoma</li>\n<li>Gastric lymphoma</li>\n</ul>\n<div class=\"page\" title=\"Page 770\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><span class=\"s1\"><strong>Image:&nbsp;Warthin-Starry silver stain </strong>showing Helicobacter pylori&nbsp;colonized on the surface of the regenerative epithelium.</span></p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c2909c74625d492dbe36d3e5bf08865d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b3e67860a1f42f9a6ee89d6c6b4a92ax600x400.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7c816716cf7645eb9f76358bbb85f4f5x800x533.JPEG"
    ]
  },
  {
    "text": "All of the following are true about the scientist who performed the given experiment except :",
    "choices": [
      {
        "id": 1,
        "text": "He developed the concept of learning by association"
      },
      {
        "id": 2,
        "text": "He developed the theory of classical conditioning"
      },
      {
        "id": 3,
        "text": "He studied the physiology of digestion"
      },
      {
        "id": 4,
        "text": "He gave the model for operant conditioning"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">The experiment shown in the image is that of <strong>classical conditioning </strong>by&nbsp;Ivan Pavlov.&nbsp;</p>\n<p class=\"p1\">The theory of <strong>operant conditioning</strong> was given by&nbsp;<strong>Skinner</strong>.</p>\n<p class=\"p2\">&nbsp;<strong>Ivan Pavlov's contributions:</strong></p>\n<ul>\n<li class=\"p1\">Classical conditioning, which is also called <strong>learning by association</strong> or respondent conditioning.</li>\n<li class=\"p1\">Work on the <strong>physiology of digestion</strong>.</li>\n<li class=\"p1\">Classical conditioning by Pavlov:&nbsp;The theory of learning in which a natural response (salivation) is elicited by a conditioned or learned stimulus (bell), that was previously presented with an unconditioned stimulus (food).</li>\n</ul>\n<p class=\"p2\"><strong>Operant conditioning by Skinner: </strong>It&nbsp;is a method of&nbsp;learning&nbsp;that occurs through <strong>rewards and punishments</strong> for behavior.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/726be4f7e93d422393fcb190e0cef276.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The device shown in the image given below is used in.",
    "choices": [
      {
        "id": 1,
        "text": "Tele therapy"
      },
      {
        "id": 2,
        "text": "Brachytherapy"
      },
      {
        "id": 3,
        "text": "Radioactive iodine therapy"
      },
      {
        "id": 4,
        "text": "Targeted therapy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The device shown in the image is a<strong> remote afterloader</strong>. Remote afterloading is related to <strong>brachytherapy</strong>.</p>\n<p><strong>Brachytherapy</strong> is a method of treatment in which sealed radioactive sources are used to deliver <strong>radiation</strong> at a <strong>short distance</strong> by interstitial, intracavitary, or surface application.</p>\n<p>The following isotopes are used in brachytherapy:</p>\n<ul>\n<li><strong>I-125</strong> and<strong>&nbsp;</strong><strong>Iridium-192 -&nbsp;</strong>used in low dose rate (LDR) brachytherapy.&nbsp;</li>\n<li><strong>Cobalt-60</strong> - is used for high dose rate (HDR) brachytherapy.</li>\n</ul>\n<p>Afterloading is the process of placing the radioactive material into the target region. This is either done manually by the oncologist, or by using remote afterloading devices.</p>\n<p><strong>Remote afterloading</strong> devices enable us to<strong> eliminate direct contact</strong> with <strong>radioactive</strong> sources while administration. It provides protection from radiation exposure to healthcare professionals by securing the radiation source in a <strong>shielded safe manner</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b3562d31f734145bf466fdba0bbc03c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the procedure shown in the image.",
    "choices": [
      {
        "id": 1,
        "text": "Venesection"
      },
      {
        "id": 2,
        "text": "Fasciotomy of lower limb"
      },
      {
        "id": 3,
        "text": "GSV stripping"
      },
      {
        "id": 4,
        "text": "Linton's operation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image depicts a <strong>fasciotomy</strong> of the lower limb.</p>\n<p>Fasciotomy involves incising the <strong>deep muscle fascia </strong>and is best carried out via longitudinal incisions of skin, fat and fascia. The <strong>muscle will be seen bulging out </strong>through the fasciotomy opening. The lower limb can be decompressed via <strong>two incisions</strong>, each being lateral to the subcutaneous border of the tibia. This gives access to the two posterior compartments and to the peroneal and anterior compartments of the leg.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a6ba36f852444d81923191e20c4ead3f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about the given dose-response curve:",
    "choices": [
      {
        "id": 1,
        "text": "Drug B is the most potent"
      },
      {
        "id": 2,
        "text": "Drug B is the most efficacious"
      },
      {
        "id": 3,
        "text": "Drug C is more efficacious than drug D"
      },
      {
        "id": 4,
        "text": "Drug B is more efficacious than drug A"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The more the <strong>curve</strong> is to the<strong> left</strong>, the <strong>more</strong> is its <strong>potency</strong>. Hence <strong>drug B </strong>is the <strong>most potent&nbsp;</strong>on the given dose-response curve (DRC).</p>\n<p><strong>Potency</strong></p>\n<ul>\n<li>It is defined as the <strong>amount of drug</strong> needed to produce a given response.</li>\n<li>The more the curve is on the left side, the more is its potency.</li>\n<li>Hence in the given DRC <strong>drug B</strong> is <strong>most </strong>potent and <strong>drug D</strong> is the<strong> least</strong> potent.</li>\n</ul>\n<p><strong>Efficacy</strong></p>\n<ul>\n<li>It is defined as the <strong>maximum effect</strong> produced by the drug and is determined by the peak of the curve.</li>\n</ul>\n<p>Hence in the given DRC, <strong>drug B has the least efficacy,</strong> and drugs A, C &amp; D are equally efficacious.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a1d51a037e64ae498722fe1669b3cf6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/29a1326c91ea4e47bb57387a171d1677x1280x938.JPEG"
    ]
  },
  {
    "text": "A 30-year-old woman presents with a painless beefy-red ulcer on the labia that bleeds when touched. There is no lymphadenopathy. Microscopic findings are as shown below. What is the causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "Treponema pallidum"
      },
      {
        "id": 2,
        "text": "Hemophilus ducreyi"
      },
      {
        "id": 3,
        "text": "Klebsiella  granulomatis"
      },
      {
        "id": 4,
        "text": "Chlamydia trachomatis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical picture of a<strong> painless</strong>, <strong>beefy red</strong>, <strong>foul-smelling ulcer</strong> with <strong>no lymphadenopathy</strong>, with microscopy showing <strong>Donovan bodies,</strong> points to a diagnosis of&nbsp;<strong>granuloma inguinale</strong>. It is caused by&nbsp;<strong><em>Klebsiella granulomatis</em>&nbsp;</strong>also known as&nbsp;<strong><em>Calymmatobacterium granulomatis</em></strong><strong>.</strong></p>\n<p>The&nbsp;<strong>incubation</strong>&nbsp;period varies from<strong>&nbsp;8-80 days</strong>, the average being<strong>&nbsp;50 days</strong>.</p>\n<p>Four types of lesions have been described in this condition:</p>\n<ul>\n<li><strong>Ulcerogranulomatous -</strong>&nbsp;<strong>most common</strong>&nbsp;type with&nbsp;<strong>painless beefy red</strong>&nbsp;ulcers<strong>.&nbsp;</strong>They are also highly&nbsp;<strong>vascular&nbsp;</strong>and&nbsp;<strong>bleed</strong>&nbsp;on touch.</li>\n<li><strong>Hypertrophic -</strong>&nbsp;usually with a raised irregular edge</li>\n<li><strong>Necrotic -</strong>&nbsp;offensive smelling ulcer that causes tissue destruction</li>\n<li><strong>Sclerotic</strong>&nbsp;or&nbsp;<strong>cicatricial -</strong>&nbsp;with fibrous or scar tissue</li>\n</ul>\n<p>The image below shows a beefy-red ulcer characteristic of donovanosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1f05dfe755c421db43dd97848bdf9e5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4465a723820740639de897db67e3f990x720x537.JPEG"
    ]
  },
  {
    "text": "Identify the type of study from the following design.",
    "choices": [
      {
        "id": 1,
        "text": "Prospective cohort study"
      },
      {
        "id": 2,
        "text": "Retrospective cohort study"
      },
      {
        "id": 3,
        "text": "Case\u2013control study"
      },
      {
        "id": 4,
        "text": "Nested case control study"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The design given is of a case&ndash;control study.&nbsp;The study proceeds from <strong>effect to cause</strong> and is done after the exposure and outcome have occurred.</p>\n<p>This is the first approach to test <strong>causal hypothesis</strong> and uses controls to support or refute an inference.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3f446d211074c8abad962ff30f848da.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The cell seen in pap smear is ______",
    "choices": [
      {
        "id": 1,
        "text": "Estrogen dominant"
      },
      {
        "id": 2,
        "text": "Progesterone dominant"
      },
      {
        "id": 3,
        "text": "Mixed"
      },
      {
        "id": 4,
        "text": "Human papilloma virus infected"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above cell in PAP smear is <strong>progesterone-dependent</strong>.&nbsp;</p>\n<p><strong>Identified by :-&nbsp;</strong></p>\n<ul>\n<li>Progesterone dominant: Smear shows intermediate cells (Basophillic with haphazard shape and pyknotic nucleus) and navicular cells, dirty smear.</li>\n<li>Oestrogen dominant: Clean smear with acidophillic cells (pink), polygonal in shape</li>\n<li>Human papiloma infected: Koilocytes with perinuclear halo and peripheral condensation of cytoplasm</li>\n<li>After menopause: PAP is predominantly filled with basal and parabasal cells.</li>\n</ul>\n<p>In the image below :</p>\n<p>(a) Normal squamous, (b) Intermediate squamous, (c) Columnar, (d) Mild dysplasia, (e) Moderate dysplasia, (f) Severe dysplasia, and (g) Carcinoma in situ.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/14a60f8b5163488ca649aa7ef6973030.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/01a352d169ef4fff942bd01b0f6c484ax512x277.JPEG"
    ]
  },
  {
    "text": "A 50-year-old man comes to the clinic with a fever for 3 days associated with chills, rigors and multiple painless lesions on palms as below.  He has a history of prosthetic valve surgery and cardiac auscultation shows a new-onset systolic murmur in the mitral region. Which of the following is not seen in this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Splinter hemorrhages in nails"
      },
      {
        "id": 2,
        "text": "Sydenham's chorea in advanced disease"
      },
      {
        "id": 3,
        "text": "Splenic infarction is a complication"
      },
      {
        "id": 4,
        "text": "Hemorrhagic lesions on fundoscopy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of&nbsp;<strong>infective endocarditis&nbsp;</strong>(IE). Sydenham's chorea is a late-stage manifestation of rheumatic fever, not infectious endocarditis.</p>\n<p>Fever PLUS a&nbsp;<strong>new-onset systolic murmur</strong>&nbsp;in the mitral region with a&nbsp;<strong>history of prosthetic valve surgery</strong>&nbsp;is strongly suggestive of&nbsp;<strong>infective endocarditis.</strong></p>\n<p>The <strong>skin lesions</strong> shown in the image are&nbsp;<strong>Janeway lesions</strong>.&nbsp;They are&nbsp;<strong>non-tender, erythematous or hemorrhagic macular or nodular lesions</strong>, which are present on the palms or soles.</p>\n<p><strong>Infective endocarditis</strong> is the <strong>infection of the&nbsp;endocardial&nbsp;layer of the heart</strong>. It may involve the endocardial layer over the heart valves, mural endocardium or septum. However, it can also affect&nbsp;intracardiac devices.</p>\n<p>Risk factors for Infectious Endocarditis (IE):</p>\n<ul>\n<li>Age &gt;60 years</li>\n<li>Male sex</li>\n<li>Injection drug use</li>\n<li>Poor dentition, dental infection or inadequate antimicrobial microbial prophylaxis</li>\n<li>Structural heart disease</li>\n<li>Valvular disease</li>\n<li>Congenital heart disease</li>\n<li>Prosthetic heart valves</li>\n<li>History of IE</li>\n<li>Intravascular devices</li>\n<li>Implantable cardiac devices</li>\n<li>Transcatheter aortic valve replacement</li>\n<li>Chronic hemodialysis</li>\n<li>HIV infection</li>\n</ul>\n<p>Clinical features of left-sided endocarditis include:</p>\n<ul>\n<li>Fever with chills, anorexia, weight loss, malaise, headache, night sweats, abdominal pain and arthralgias</li>\n<li>Cardiac murmurs, valvular insufficiency, heart failure</li>\n<li>Splenomegaly, splenic infarction, renal infarction, glomerulonephritis</li>\n<li>Embolic stroke, intracerebral hemorrhage</li>\n<li>Vertebral osteomyelitis, septic arthritis, and abscesses</li>\n<li>Peripheral manifestations</li>\n</ul>\n<p>Peripheral manifestations of infective endocarditis include the following:</p>\n<ul>\n<li>Petechiae: Common but nonspecific finding.</li>\n<li>Osler nodes: Tender subcutaneous nodules usually found on the distal pads of the digits.</li>\n<li>Janeway lesions: Nontender maculae on the palms and soles.</li>\n<li>Roth spots: Relatively rare retinal hemorrhages with small, clear centers.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/31f2c4eb865f4e5e920e0aa45c5df645.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f116c79c92164f8d860b0805258c6f37x187x270.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b35099e4c53c4bbd9562539deab27ec4x600x468.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4f06388ece0047afb2986dc3ec009c51x259x194.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3cd3888a55224065bf2a3369eb140453x552x599.JPEG"
    ]
  },
  {
    "text": "A specimen of the posterior surface of the larynx is kept in an anatomy practical exam and a structure is marked with red. What would be the action of the structure?",
    "choices": [
      {
        "id": 1,
        "text": "Adducts the vocal cords"
      },
      {
        "id": 2,
        "text": "Abducts the vocal cords"
      },
      {
        "id": 3,
        "text": "Tenses the vocal cords"
      },
      {
        "id": 4,
        "text": "Relaxes the vocal cords"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows the posterior view of the larynx and the marked muscle is&nbsp;the <strong>posterior cricoarytenoid</strong>.&nbsp;Its action is to <strong>abduct the vocal cords</strong> and <strong>open</strong> the glottis. The <strong>posterior cricoarytenoid muscle </strong>is identified by<strong>&nbsp;</strong>its origin from the <strong>posterior surface</strong> of the cricoid<strong>.</strong>&nbsp;</p>\n<p>The posterior cricoarytenoid muscle <strong>arises </strong>from the <strong>posterior surface of the cricoid lamina</strong> and is attached to the upper and posterior surfaces of the muscular processes of the ipsilateral arytenoids. It is innervated by a branch of the<strong> recurrent laryngeal nerve</strong>. They are <strong>active </strong>in the production of <strong>unvoiced sounds.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/85574121651c472989c1bf0ea1fc3d29.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/648d8cf164504713b8fb9a45b04b96b1x800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/887d5473925944c8b2515b313b2a572cx363x500.PNG"
    ]
  },
  {
    "text": "A 20 yr old male was brought to casualty in unconscious state after a head injury.What is the name of the sign seen in this image?",
    "choices": [
      {
        "id": 1,
        "text": "Duret haemorrhage"
      },
      {
        "id": 2,
        "text": "Kernohan\u2019s phenomenon"
      },
      {
        "id": 3,
        "text": "Battle sign"
      },
      {
        "id": 4,
        "text": "Raccoon sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image is of battle sign i.e. <strong>a skull base fracture</strong> associated with <strong>bruising over mastoid process.</strong></p>\n<p><strong>Middle Cranial Fossa Fracture</strong>&nbsp;is associated with:</p>\n<ul>\n<li>CSF otorrhea or rhinorrhea</li>\n<li>Hemotympanum</li>\n<li>Ossicular disruption</li>\n<li><strong>Battle sign: Bruising behind the ear</strong></li>\n<li>7th and 8th cranial nerve palsies</li>\n</ul>\n<p><strong>Anterior Cranial Fossa Fracture</strong>&nbsp;is associated with:</p>\n<ul>\n<li>Subconjunctival hematoma</li>\n<li><strong>CSF rhinorrhea</strong></li>\n<li><strong>Carotico-cavernous fistula</strong></li>\n<li>Periorbital hematoma or&nbsp;<strong>&ldquo;Raccoon eyes&rdquo;</strong></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb4e8ce7914d41d998fe9cc0a2b6c475.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The X-ray given below is seen in which condition?",
    "choices": [
      {
        "id": 1,
        "text": "Esophageal atresia"
      },
      {
        "id": 2,
        "text": "Esophageal stenosis"
      },
      {
        "id": 3,
        "text": "Reflux esophagitis"
      },
      {
        "id": 4,
        "text": "Barrett's esophagus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows folds that run horizontally around the entire circumference of the oseophageal lumen, which is called a<strong> feline esophagus</strong> and is seen in <strong>reflux esophagitis.&nbsp;</strong></p>\n<p><strong>Feline oesophagus</strong>&nbsp;is also known as&nbsp;<strong>oesophageal shiver</strong>, refers to the transient transverse bands seen in the mid and lower oesophagus on a double contrast barium swallow. The appearance is almost always associated with active gastroesophageal reflux&nbsp;and is thought to be due to contraction of the muscularis mucosae with resultant shortening of the oesophagus and bunching up of the mucosa in the lumen.</p>\n<p><strong>Radiologic features:</strong> The folds are 1-2 mm thick and run horizontally around the entire circumference of the oesophageal lumen. The findings are transient, seen following reflux and not during swallowing. The appearance is confined to the distal two-thirds of the thoracic oesophagus.</p>\n<p>It can also be seen in <strong>hiatus hernia</strong> and <strong>eosinophilic oesophagitis</strong> (wherein the folds will be permanent and be associated with strictures).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c0627054460541f4bd813bf2a20f3ca3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The image shown below is commonly seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Alopecia areata"
      },
      {
        "id": 2,
        "text": "Telogen effluvium"
      },
      {
        "id": 3,
        "text": "Netherton syndrome"
      },
      {
        "id": 4,
        "text": "Cicatricial alopecia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows an <strong>exclamation mark hair sign </strong>which is a characteristic feature seen in <strong>Alopecia areata.</strong></p>\n<p><strong>Alopecia areata</strong> is a <strong>chronic inflammatory disease</strong> that causes <strong>nonscarring patches</strong> of hair loss. It is a T-cell-mediated<strong>\u00a0inflammatory disease</strong> that occurs in <strong>genetically predisposed patients.</strong></p>\n<p>The most characteristic lesion initially is a <strong>smooth circumscribed patch</strong> <strong>of alopecia</strong> which has <strong>short extractable broken hairs</strong> called\u00a0<strong>exclamation mark hair.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/47274951cafe493cb56379d851e81bce.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/029e9df746554aba860c62255cc70da4x1200x1203.JPEG"
    ]
  },
  {
    "text": "A female patient visits the OPD with complaints of swelling around her eye as shown in the image. Which of the following transmits the organism responsible for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Soft tick"
      },
      {
        "id": 2,
        "text": "Sand fly"
      },
      {
        "id": 3,
        "text": "Hard tick"
      },
      {
        "id": 4,
        "text": "Reduviid bug"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The sign shown in the image above is <strong>Romana&rsquo;s sign.</strong> It is seen in acute <strong>Chagas disease</strong> which is caused by the flagellate <strong><em>Trypanosoma cruzi</em>. </strong>It is transmitted by&nbsp;the&nbsp;<strong>Reduviid bug.</strong></p>\n<p><span style=\"font-size: 14px;\">The person can become infected if <em>T. cruzi</em> parasites in the bug feces enter the body through mucous membranes or breaks in the skin. The sleeping person may accidentally scratch or rub the feces into the bite wound, eyes, or mouth.&nbsp;</span></p>\n<p>Clinically, the infection course of Chagas disease is divided into acute and chronic phases.</p>\n<p>In the acute phase, the majority of the patients will be asymptomatic.&nbsp;Fever, regional lymphadenitis, <strong>chagoma </strong>(localized subcutaneous nodule at the bite site), and the <strong>Romana's sign </strong>(unilateral swelling of the eyelids) may be seen.</p>\n<p>The chronic phase is characterized by the following findings:</p>\n<ul>\n<li><strong>Chagasic dilated cardiomyopathy</strong> with&nbsp;marked <strong>bilateral ventricular enlargement.</strong> This may lead to congestive heart failure presenting as <strong>shortness of breath.</strong> Endomyocardial biopsy shows fibrosis and the presence of intracellular parasites.</li>\n<li><strong>Megaesophagus</strong> and <strong>megacolon</strong>.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e2fd8449930f4256a6a5347d81f516b7.jpeg"
    ],
    "explanation_images": []
  },
  {
    "text": "A middle-aged woman presents with proteinuria, and hemoptysis, with the following clinical presentation. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Churg-Strauss syndrome"
      },
      {
        "id": 2,
        "text": "Leprosy"
      },
      {
        "id": 3,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 4,
        "text": "Granulomatosis with polyangiitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>saddle nose deformity,</strong> which occurs due to the\u00a0destruction of the nasal septum. A history of proteinuria and hemoptysis along with the saddle nose deformity is suggestive of <strong>granulomatosis with polyangiitis</strong> (Wegener's granulomatosis).</p>\n<p>Granulomatosis with polyangiitis is a granulomatous and\u00a0<strong>necrotizing</strong>\u00a0<strong>vasculitis</strong>\u00a0of the\u00a0<strong>small</strong>\u00a0arteries and veins that mainly affects:</p>\n<ul>\n<li><strong>Upper respiratory tract:</strong>\u00a0chronic\u00a0<strong>sinusitis</strong>, serous otitis media due to eustachian tube blockage, nasal septal perforation, and mucosal\u00a0<strong>ulceration</strong>\u00a0of the nasopharynx.</li>\n<li><strong>Lower respiratory tract:</strong>\u00a0presenting with cough,<strong>\u00a0</strong><strong>hemoptysis,</strong>\u00a0dyspnea, and persistent pneumonitis.<strong>\u00a0</strong>Lung involvement typically appears as multiple, bilateral\u00a0<strong>nodular</strong>\u00a0<strong>cavitary</strong>\u00a0<strong>infiltrates</strong>.</li>\n<li><strong>Kidneys</strong>: focal or segmental\u00a0<strong>glomerulonephritis</strong>\u00a0presenting with proteinuria, hematuria, and hypertension. If left untreated it can lead to rapidly progressive glomerulonephritis.</li>\n</ul>\n<p>Apart from these organs, it can also affect the eyes and skin. Skin lesions present as\u00a0<strong>palpable purpura</strong>\u00a0or\u00a0<strong>subcutaneous</strong>\u00a0<strong>nodules</strong>.</p>\n<p>Lab investigations will show\u00a0<strong>anemia,\u00a0</strong>leucocytosis, elevated ESR, and\u00a0<strong>high titers</strong>\u00a0of cytoplasmic ANCA (<strong>c-ANCA</strong>) targetted against\u00a0<strong>anti-proteinase-3</strong>\u00a0(anti-PR-3)<strong>.</strong>\u00a0The specificity of a positive PR-3 ANCA for Wegener's is very high, especially in the presence of active glomerulonephritis.<strong>\u00a0</strong>Chest radiograph will show\u00a0<strong>multiple, bilateral cavitating nodules\u00a0</strong>and\u00a0<strong>pulmonary infiltrates</strong>.\u00a0</p>\n<p>The diagnosis is\u00a0<strong>confirmed</strong>\u00a0by the presence of\u00a0<strong>necrotizing granulomatous vasculitis</strong>\u00a0on\u00a0<strong>biopsy</strong>. This finding is commonly seen in the tissues obtained from the\u00a0<strong>lungs</strong>, upper airways, skin, and rarely in the kidneys.\u00a0HPE shows necrotizing vasculitis of small arteries and veins together with either intravascular or extravascular granuloma formation. Chronic nasal carriage of Staphylococcus aureus is associated with a higher relapse rate.\u00a0</p>\n<p>Options A: <strong>Churg-Strauss syndrome</strong>\u00a0(eosinophilic granulomatosis with polyangiitis) is a small vessel vasculitis characterized by\u00a0<strong>asthma</strong>, peripheral and tissue eosinophilia, extravascular\u00a0<strong>granuloma formation,</strong> and vasculitis of multiple organs. The clinical features include non-specific symptoms like fever, malaise, anorexia, and weight loss. Severe <strong>asthmatic</strong> attacks and <strong>pulmonary</strong> <strong>infiltrates</strong> characterize the pulmonary findings. Renal disease is less common in these patients.</p>\n<p>Option B: <strong>Leprosy</strong>\u00a0or Hansen disease is a chronic granulomatous disease caused by infection with\u00a0<em><strong>Mycobacterium leprae</strong></em>. it can present as a deformity on the nose and nasal perforation but is often accompanied by crusting. It is also accompanied by skin symptoms like anesthesia and nerve involvement</p>\n<p>Option C: <strong>SLE</strong> is an <strong>autoimmune</strong> disease that is seen more commonly in women. The abnormal immune response leads to the production of various forms of nucleic acids, proteins, and self-antigens. Clinical features include a slightly elevated, <strong>photosensitive</strong>\u00a0rash seen around the\u00a0<strong>cheeks</strong>\u00a0and<strong>\u00a0nose</strong> (butterfly rash), <strong>oral ulcers</strong>, non-scarring alopecia, and\u00a0<strong>synovitis</strong>\u00a0involving more than<strong>\u00a0two joints</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8c523a1ec8344b4aab8f54709c9759b6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a normal finding in a newborn?",
    "choices": [
      {
        "id": 1,
        "text": "Only C"
      },
      {
        "id": 2,
        "text": "Only B"
      },
      {
        "id": 3,
        "text": "Both B and C"
      },
      {
        "id": 4,
        "text": "All are normal findings"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Image B shows <strong>buphthalmos,</strong> which is not a normal finding in a newborn. It is suggestive of <strong>congenital glaucoma</strong> and thus it should be investigated. The sclera and cornea are more elastic in early childhood and an increase in intraocular pressure (IOP), therefore, leads to an expansion of the globe and the development of buphthalmos (ox eye).</p>\n<p>Features of congenital glaucoma:</p>\n<ul>\n<li><strong>Photophobia</strong></li>\n<li><strong>Blepharospasm</strong></li>\n<li><strong>Watering</strong></li>\n<li><strong>Enlarged eyeball (buphthalmos)</strong></li>\n<li><strong>Cloudy cornea</strong> <strong>&gt; 1cm in diameter</strong></li>\n<li>Autosomal recessive disease</li>\n<li>Definitive treatment involves surgical correction</li>\n</ul>\n<p>Image A shows mongolian spots, and image C shows erythema toxicum. These both are normal findings.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1f6e817d8be74b4d9933f85b688046e4.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Name the procedure depicted in the picture below.",
    "choices": [
      {
        "id": 1,
        "text": "Southern Blotting"
      },
      {
        "id": 2,
        "text": "Northern Blotting"
      },
      {
        "id": 3,
        "text": "Western Blotting"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The picture depicts the nothern blotting technique.</p>\n<p><strong>Northern</strong> <strong>blotting</strong> is used for detection of <strong>RNA</strong>.</p>\n<p>Other blotting techniques :</p>\n<ul>\n<li><strong>Southern</strong> <strong>blotting</strong> is used for detection of <strong>DNA</strong>.</li>\n<li><strong>Western</strong> <strong>blotting</strong> is used for detection of <strong>protein</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1516fe068c9949179df63a11d97f0a0e.jpeg"
    ],
    "explanation_images": []
  },
  {
    "text": "The prototype of the device shown here was first invented by",
    "choices": [
      {
        "id": 1,
        "text": "John Lundy"
      },
      {
        "id": 2,
        "text": "August Bier"
      },
      {
        "id": 3,
        "text": "Edmund Boyle"
      },
      {
        "id": 4,
        "text": "Oliver Wendell"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shown above is the<strong> anesthesia workstation.</strong></p>\n<p>The prototype of this device is Boyle's machine which was first invented by <strong>Edmund Gaskin Boyle</strong> in 1917.&nbsp;</p>\n<p><strong>Boyle&rsquo;s machine,</strong> which is used to provide anesthesia, has evolved over the years into anesthetic workstations, which are currently in use.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f9436b9776942708b1220f365ad1f13.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man presenting with halitosis and regurgitation, underwent a barium swallow scan as shown below. Weakness located in which of the following muscles predisposes to the suspected condition\u200b?",
    "choices": [
      {
        "id": 1,
        "text": "Superior constrictor"
      },
      {
        "id": 2,
        "text": "Middle constrictor"
      },
      {
        "id": 3,
        "text": "Inferior constrictor"
      },
      {
        "id": 4,
        "text": "Palatopharyngeus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario of a patient with halitosis and regurgitation with the GIF of an X-ray showing the barium swallow filling a sac in the posterior pharyngeal wall is highly suggestive of<strong>&nbsp;Zenker's diverticulum.</strong>&nbsp;It protrudes through the <strong>Killian's dehiscence,</strong> a potential space present in the <strong>inferior constrictor muscle</strong>.</p>\n<p>The inferior constrictor muscle is made up of 2 parts: The upper<strong> thyropharyngeus</strong>&nbsp;and the lower<strong> cricopharyngeus</strong>. The cricopharyngeus muscle is divisible into the superficial oblique component (<strong>pars oblique</strong>) and the deeper transverse component (<strong>pars fundiformis</strong>). These 2 components of the muscle have a potential space between them termed&nbsp;<strong>Killian's dehiscence.&nbsp;</strong>&nbsp;</p>\n<p>As a result of the uncoordinated contraction between the cricopharyngeus and upper oesophagal sphincter, mucosal herniation through the Killian's dehiscence gives rise to&nbsp;<strong>Zenker's diverticulum.&nbsp;</strong>This diverticulum is a common site for food impaction and accumulation (halitosis, regurgitation) and may cause dysphagia in affected patients.&nbsp;</p>\n<p>Note -&nbsp;Another potential site of diverticulum formation is the&nbsp;<strong>Laimer's triangle,&nbsp;</strong>situated below the cricopharyngeus and above the longitudinal fibres of the oesophagus.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/00013fa0bddb435fb8b941132b434da6.GIF"
    ],
    "explanation_images": []
  },
  {
    "text": "A person has been bitten by the following snake. Which of the following options describes the symptoms seen classically in this snake bite?",
    "choices": [
      {
        "id": 1,
        "text": "Anaphylaxis"
      },
      {
        "id": 2,
        "text": "Intravascular Hemolysis"
      },
      {
        "id": 3,
        "text": "Myoglobinuria"
      },
      {
        "id": 4,
        "text": "Neurotoxicity and muscle paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image given above shows&nbsp;<strong>common krait,</strong>&nbsp;which is&nbsp;<strong>neurotoxic</strong>&nbsp;and shows classical symptoms such as&nbsp;<strong>muscle paralysis</strong>.</p>\n<p>The neurotoxicity symptoms that would be seen in the patient include:&nbsp;</p>\n<ul>\n<li>headache</li>\n<li>blurred vision</li>\n<li>perioral paraesthesia</li>\n<li>hyperacusis</li>\n<li>dizziness</li>\n<li>vertigo</li>\n<li>gooseflesh</li>\n<li>vomiting</li>\n<li>hypersalivation</li>\n</ul>\n<p>Neurotoxicity effects are&nbsp;<strong>completely reversible</strong>&nbsp;in response to antivenom or anticholinesterase or they may wear off spontaneously in about a week.</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Anaphylaxis</strong>&nbsp;is seen in poisoning due to&nbsp;<strong>stiletto snakes</strong>. Other symptoms include pain, swelling, blisters, and local lymph node enlargements.</p>\n<p>Option B: Systemic bleeding such as&nbsp;<strong>intravascular hemolysis</strong>, ecchymosis, and incoagulable blood is seen in bites due to&nbsp;<strong>back-fanged snakes.</strong></p>\n<p>Option C:&nbsp;<strong>Myoglobinuria</strong>&nbsp;is seen in poisoning due to&nbsp;<strong>sea snakes.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5ab159f647e04bf0adc12c601e1ff381.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the condition given in the image :",
    "choices": [
      {
        "id": 1,
        "text": "Dermatomyositis"
      },
      {
        "id": 2,
        "text": "Acanthosis nigricans"
      },
      {
        "id": 3,
        "text": "Pityriasis rotunda"
      },
      {
        "id": 4,
        "text": "Melasma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The condition in the given image is <strong>acanthosis nigricans.</strong></p>\n<p>It is a skin condition is characterized by <strong>thickened, gray-brown velvety plaques</strong> seen in flexural areas such as the back of the neck, axillae, inframammary creases, waist, and groin.</p>\n<p>The causal mechanism is due to the secretion of epidermal growth factor in the region involved. It can be benign or malignancy-associated.</p>\n<p><strong>Benign acanthosis nigricans</strong> is often associated with <strong>obesity or insulin resistance</strong>, it is common and usually mild.</p>\n<p><strong>Malignancy associated acanthosis nigricans</strong> is much less common. It is usually associated with <strong>gastric carcinoma, lung carcinoma,</strong>&nbsp;and <strong>uterine carcinoma.</strong></p>\n<p>Acanthosis nigricans can also be seen in the following:</p>\n<ul>\n<li>Drugs such as Nicotinic acid used to treat hyperlipidemia&nbsp;</li>\n<li>Sudden onset of multiple seborrhoeic keratosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1368f727c67c40cbbdff572ee6e47609.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The below picture depicts ______",
    "choices": [
      {
        "id": 1,
        "text": "placenta circummarginata"
      },
      {
        "id": 2,
        "text": "Placenta succenturiata"
      },
      {
        "id": 3,
        "text": "Circumvallate placenta"
      },
      {
        "id": 4,
        "text": "Placenta marginata"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above picture depicts placenta with <strong>two lobes</strong>, hence the answer is <strong>placenta succenturiata.</strong></p>\n<p><strong>Succenturiate Placenta</strong></p>\n<ul>\n<li>The second lobe is also known as the accessory lobe.&nbsp;</li>\n<li>Accessory lobe is attached to main lobe by membrane which has leash of blood vessels.&nbsp;</li>\n<li>A placenta containing three or more equally sized lobes is rare and termed multilobate.</li>\n</ul>\n<p><strong>Complication</strong></p>\n<ul>\n<li>Accessory lobe can be retained causing subinvolution, sepsis, Post-partum haemorrhage, vasa previa, <strong>fetal hemorrhage.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/771fce971a364afeb0c52dd8098665fd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 41-year-old female patient presented with a tortuous swelling over the left side of the scalp and face as shown in the image given below. On local examination, the swelling was pulsatile. On auscultation, a bruit was heard. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Neurofibromatosis"
      },
      {
        "id": 2,
        "text": "Liposarcoma"
      },
      {
        "id": 3,
        "text": "Cirsoid Aneurysm"
      },
      {
        "id": 4,
        "text": "Varicocele"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image showing tortuous swelling over the scalp and the clinical findings are suggestive of a&nbsp;<strong>cirsoid aneurysm.</strong></p>\n<p><strong>Cirsoid aneurysm&nbsp;</strong>is a slow-growing, tortuous swelling that develops due to<strong> abnormal arteriovenous connections</strong>&nbsp;among the subcutaneous blood vessels. They are usually <strong>congenital. </strong>However, in some cases, they may be traumatic. Patients present with a <strong>tortuous, pulsatile swelling</strong> over the <strong>scalp</strong> or <strong>face.&nbsp;</strong>They are usually asymptomatic and present to the clinic due to cosmetic deformity. However, some patients may have headache, tinnitus, and/or bleeding. A loud <strong>bruit</strong> is heard on auscultation.</p>\n<p><strong>Angiography</strong> is the investigation of choice.</p>\n<p><strong>Treatment</strong> includes <strong>surgical resection, endovascuar occlusion&nbsp;</strong>or injection of <strong>percutaneous sclerosing agents.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/62742f03effd463bbebc2af8a2f917c8.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man presents with a fracture of the right tibia following an RTA. Distal pulses could be felt well. The wound was highly contaminated and appeared as shown below. According to the Gustilo-Anderson classification,  the fracture would be classified as Type____________",
    "choices": [
      {
        "id": 1,
        "text": "I"
      },
      {
        "id": 2,
        "text": "II"
      },
      {
        "id": 3,
        "text": "IIIB"
      },
      {
        "id": 4,
        "text": "IIIC"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This wound will be classified as <strong>Type 3B on Gustilo-Anderson's classification</strong> due to the extensive wound (&gt;10 cm), high contamination, severe loss of soft tissue cover and intact vascularity.</p>\n<p>A fracture where the skin and soft tissues are breached is known as an open fracture (or a\u00a0compound fracture). Gustilo and Anderson's classification is the most commonly followed classification for open fractures.\u00a0</p>\n<p><strong>Gustilo and Anderson's classification for open injuries:</strong></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Type</strong></td>\n<td><strong>Wound</strong></td>\n<td><strong>Level of contamination</strong></td>\n<td><strong>Soft tissue injury</strong></td>\n<td><strong>Bone injury</strong></td>\n</tr>\n<tr>\n<td><strong>I</strong></td>\n<td>&lt;1 cm</td>\n<td>Clean</td>\n<td>Minimal</td>\n<td>Simple, minimal comminution</td>\n</tr>\n<tr>\n<td><strong>II</strong></td>\n<td>&gt;1 cm</td>\n<td>Moderate</td>\n<td>Moderate; some muscle damage</td>\n<td>Moderate comminution</td>\n</tr>\n<tr>\n<td><strong>IIIA</strong></td>\n<td>usually &gt;10 cm</td>\n<td>High</td>\n<td>Severe with crushing</td>\n<td>Usually comminuted; soft tissue coverage of bone possible</td>\n</tr>\n<tr>\n<td><strong>IIIB</strong></td>\n<td>usually &gt;10 cm</td>\n<td>High</td>\n<td>Very severe loss of cover</td>\n<td>Bone cover poor; usually requires soft tissue reconstructive surgery</td>\n</tr>\n<tr>\n<td><strong>IIIC</strong></td>\n<td>usually &gt;10 cm</td>\n<td>High</td>\n<td>Very severe loss of cover; vascular injury requiring repair</td>\n<td>Bone cover poor; usually requires soft tissue reconstructive surgery</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Note:</strong> Open fractures with an arterial injury that requires repair will be classified as 3C, irrespective of the size of the soft-tissue wound.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/32409a9f44144542a0ef09f8a01fd845.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "You are a physiologist, studying the microstructure of a skeletal muscle. In the image given below, all of the following can be found in the area marked 'x' except ______.",
    "choices": [
      {
        "id": 1,
        "text": "Actin"
      },
      {
        "id": 2,
        "text": "Myosin"
      },
      {
        "id": 3,
        "text": "Troponin"
      },
      {
        "id": 4,
        "text": "Tropomyosin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The marked region 'x' is depicting the <strong>I-band</strong>&nbsp;of the myofibril.&nbsp;It does not contain myosin.</p>\n<p><span data-preserver-spaces=\"true\">The portion of myofibril that lies between two&nbsp;<strong>Z lines</strong>&nbsp;is known as the&nbsp;<strong>sarcomere.&nbsp;</strong>One sarcomere comprises&nbsp;<strong>1 entire A band</strong>&nbsp;and&nbsp;<strong>2 half-I bands.&nbsp;</strong></span></p>\n<p><span data-preserver-spaces=\"true\"><strong>A band</strong> consists of <strong>Myosin</strong>&nbsp;(thick filaments) surrounded by Actin filaments. I-band comprises&nbsp;<strong>thin filaments</strong>&nbsp;that contain&nbsp;<strong>actin, troponin,</strong> and <strong>tropomyosin.&nbsp;</strong><strong>H zone</strong>&nbsp;is the middlemost part of the<strong> A band</strong> which comprises only myosin heads.&nbsp;During skeletal muscle contraction,&nbsp;<strong>A band</strong>&nbsp;remains constant.&nbsp;<strong>Z lines</strong>&nbsp;come closer to each other.&nbsp;<strong>H and I bands</strong>&nbsp;reduce in their lengths.&nbsp;</span></p>\n<p><strong>Tropomyosin&nbsp;</strong>molecules are long filaments located in the groove between the two chains in the actin. Each thin filament contains 300&ndash;400 actin molecules and 40&ndash;60 tropomyosin molecules.</p>\n<p><strong>Troponin</strong>&nbsp;molecules are small globular units located at intervals along with the tropomyosin molecules. Each of the three troponin subunits has a unique function:</p>\n<ul>\n<li>Troponin&nbsp;<strong>T</strong>&nbsp;binds the troponin components to tropomyosin.</li>\n<li>Troponin&nbsp;<strong>I</strong>&nbsp;inhibits the <strong>i</strong>nteraction of myosin with actin.</li>\n<li>Troponin&nbsp;<strong>C</strong>&nbsp;contains the binding sites for the&nbsp;<strong>Ca&nbsp;</strong><strong><sup>2+</sup></strong>&nbsp;that help to initiate contraction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e00cb0bad1549dbbb6c39d6181d356e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81984b509dcd497685b5e4c7bbf63aa5x1280x2342.JPEG"
    ]
  },
  {
    "text": "The image given below represents ______",
    "choices": [
      {
        "id": 1,
        "text": "Pratt\u2019s sign"
      },
      {
        "id": 2,
        "text": "Moses sign"
      },
      {
        "id": 3,
        "text": "Homan\u2019s sign"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Image shows eliciting \"Homan&rsquo;s sign\" i.e. calf tenderness on forced ankle dorsiflexion seen in DVT(deep venous thrombosis)</p>\n<p>Other signs are:</p>\n<ul>\n<li>Moses Sign - Calf tenderness on direct pressure on calf.</li>\n<li>Pratt&rsquo;s Sign - Calf tenderness on squeezing the calf from sides.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/479d74c727c24571b425e3b57b0b61a3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the type of hymen.",
    "choices": [
      {
        "id": 1,
        "text": "Cribriform Hymen"
      },
      {
        "id": 2,
        "text": "Parous Hymen"
      },
      {
        "id": 3,
        "text": "Virginial Hymen"
      },
      {
        "id": 4,
        "text": "Septate Hymen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows cribrifrom hymen because it has multiple small openings.</p>\n<p><strong>Based on the shape of its opening, the hymen may be classified as</strong>:</p>\n<table>\n<tbody>\n<tr>\n<td>Hymen</td>\n<td>Description</td>\n</tr>\n<tr>\n<td>Annular</td>\n<td>Oval central opening</td>\n</tr>\n<tr>\n<td>Crescentric</td>\n<td>Semilunar central opening</td>\n</tr>\n<tr>\n<td>Vertical</td>\n<td>Vertical slit-like opening</td>\n</tr>\n<tr>\n<td>Septate</td>\n<td>2 lateral openings partitioned by a bridge of hymenal tissue</td>\n</tr>\n<tr>\n<td>Cribriform</td>\n<td>Multiple small openings</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Other variants of the hymen:</strong></p>\n<table>\n<tbody>\n<tr>\n<td>Variants</td>\n<td>Description</td>\n</tr>\n<tr>\n<td>Absence of hymen</td>\n<td>Congenital deformity.</td>\n</tr>\n<tr>\n<td>Infantile</td>\n<td>Small central linear opening.</td>\n</tr>\n<tr>\n<td>Imperforated</td>\n<td>Without any opening</td>\n</tr>\n<tr>\n<td>Fimbriated</td>\n<td>\n<p>The free margin of the hymenal opening shows symmetrical indentations or notches placed anteriorly.</p>\n</td>\n</tr>\n<tr>\n<td>Ring or fringe-like&nbsp;</td>\n<td>\n<p>With a narrow ring or fringe or band of thick membrane all around the vaginal orifice (can easily distend during sexual intercourse without</p>\n<p>rupturing the hymen)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Note:</p>\n<ul>\n<li>The hymen is lined by stratified squamous epithelium on both sides.</li>\n<li>The hymen is most commonly <strong>torn posterolaterally or posteriorly</strong>.&nbsp;</li>\n<li>It is replaced by <strong>tags</strong> after childbirth called as <strong>carunculae myrtiformes</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4200f5cd478e4b75886cc9dc2cf940bb.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ac6fe818748b48c782a0739ed9dc8e05x1280x962.JPEG"
    ]
  },
  {
    "text": "What is the sign represented by the image below called?",
    "choices": [
      {
        "id": 1,
        "text": "Chvostek\u2019s sign"
      },
      {
        "id": 2,
        "text": "Trousseau's sign"
      },
      {
        "id": 3,
        "text": "Lhermitte's sign"
      },
      {
        "id": 4,
        "text": "Troisier\u2019s sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image indicates the presence of <strong>Trousseau's sign or carpopedal spasm</strong> in patients experiencing <strong>hypocalcemia</strong>.</p>\n<ul>\n<li>To elicit the sign, a <strong>blood pressure cuff</strong> is placed around the arm, inflated to a pressure greater than the systolic blood pressure, and held in <strong>place for 3 minutes</strong>.</li>\n<li>This will <strong>occlude</strong> the <strong>brachial artery</strong>.</li>\n<li>In the absence of blood flow, the patient's condition of\u00a0<strong>hypocalcemia</strong> and subsequent neuromuscular irritability will <strong>induce spasm of the muscles of the hand and forearm</strong>.</li>\n<li>This sign is also known as <strong>main d'accoucheur</strong> (French word for \"<strong>hand of the obstetrician</strong>\") because it supposedly resembles the position of an obstetrician's hand while delivering a baby.</li>\n</ul>\n<p><strong>Other options</strong></p>\n<p><strong>Chvostek's sign</strong></p>\n<ul>\n<li>Seen in hypocalcemia</li>\n<li>When the facial nerve is <strong>tapped in front of the tragus,</strong> the facial muscles on the same side of the face will <strong>contract momentarily</strong> (typically a twitch of the nose or lips) because of hypocalcemia.</li>\n</ul>\n<p><strong>Troisier's sign </strong></p>\n<ul>\n<li>Associated with left supraclavicular lymphadenopathy in metastatic abdominal malignancy.</li>\n</ul>\n<p><strong>Lhermitte\u2019s sign</strong></p>\n<ul>\n<li><strong>Barber chair phenomenon</strong> - Electric shock-like sensation upon flexion of the neck observed, involving the <strong>posterior column</strong>.</li>\n<li>Classically seen in association with\u00a0<strong>multiple sclerosis.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/14ae8a110963409f95685da4ea98797e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The image given below is used for the depiction of _______ of a disease in epidemiology.",
    "choices": [
      {
        "id": 1,
        "text": "International variations"
      },
      {
        "id": 2,
        "text": "Local distributions"
      },
      {
        "id": 3,
        "text": "Rural \u2013 urban distributions"
      },
      {
        "id": 4,
        "text": "National variation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Spot maps are used to understand the local distributions of a disease.</p>\n<p>Spot maps:</p>\n<ul>\n<li>They are also called <strong>shaded maps</strong>.</li>\n<li>They depict areas of high or low frequency, the boundaries, and patterns of disease distribution.</li>\n<li>This method was used by <strong>John Snow</strong> to investigate the epidemic of cholera in London in 1854.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4677a8249d394b12b81421f8a77942ba.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 007 (Image Based)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>