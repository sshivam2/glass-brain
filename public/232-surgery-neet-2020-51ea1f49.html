<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>232 Surgery Neet 2020 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">26</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is true about the flap given in the image.",
    "choices": [
      {
        "id": 1,
        "text": "Pedicled TRAM based on superior epigastric artery"
      },
      {
        "id": 2,
        "text": "Free TRAM based on superior and inferior epigastric artery"
      },
      {
        "id": 3,
        "text": "DIEP based on deep inferior epigastric artery"
      },
      {
        "id": 4,
        "text": "Lower Abdominal Fat based inferior epigastric vessels"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image showing only skin and fat moved to the chest is suggestive of a\u00a0<strong>deep inferior epigastric artery perforator flap</strong> (DIEP), based on<strong>\u00a0</strong>the<strong> deep inferior epigastric artery.</strong></p>\n<p>DIEP is a variant of TRAM flap and free flap where only the <strong>skin</strong> and <strong>fat</strong> are moved to the chest. A<strong>\u00a0microvascular technique</strong> is used in which <strong>no muscle is taken</strong> and the perforating vessels are dissected out.</p>\n<p>As the muscle is spared in DIEP, there is<strong>\u00a0</strong>a <strong>reduced risk of abdominal wall weakness</strong> and its associated complications.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p>Options A and B: The<strong> pedicled\u00a0TRAM flap</strong> is based on the superior epigastric artery and the <strong>free TRAM flap</strong> is based on superior and inferior epigastric arteries (supercharged TRAM flap); however, the given image depicts a deep inferior epigastric artery flap. In TRAM flaps:\u00a0</p>\n<ul>\n<li>The <strong>skin</strong>, <strong>fat,</strong> and <strong>muscle</strong> are moved to the chest.</li>\n<li>It provides good cosmesis and bulk since it has a soft tissue consistency similar to the breast.</li>\n<li>Disadvantages include epigastric bulge, partial flap loss, fat necrosis, abdominal wall weakness, and hernias.</li>\n</ul>\n<p>The given image below shows a TRAM flap:\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5bf83a483d1b47beb5a8c67096f0d29a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd753d65292d41a180d9a45f7d268338x1280x1547.JPEG"
    ]
  },
  {
    "text": "What is the most common site of gastrinoma in MEN 1 syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Jejunum"
      },
      {
        "id": 2,
        "text": "Ileum"
      },
      {
        "id": 3,
        "text": "Duodenum"
      },
      {
        "id": 4,
        "text": "Stomach"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common site of <strong>gastrinoma</strong> in MEN 1 syndrome is the&nbsp;<strong>duodenum.</strong></p>\n<p><strong>Gastrinoma</strong> is the <strong>most common</strong> pancreatic islet tumor in MEN 1 syndrome, arising from the G cells of the pancreas. Gastrinoma, associated with marked gastric acid production and recurrent peptic ulcers,&nbsp;is called <strong>Zollinger-Ellison syndrome.&nbsp;</strong>The majority of gastrinomas occur in the gastrinoma (<strong>Passaro's</strong>) triangle.</p>\n<p>In MEN 1, they often occur in patients &lt;30 years. Patients present with abdominal pain (the most common symptom), diarrhea and steatorrhea.&nbsp;</p>\n<p>Management:&nbsp;</p>\n<ul>\n<li>Medical management for tumors <strong>&lt;2 cm</strong> with proton-pump inhibitors.&nbsp;</li>\n<li>Surgery for tumors <strong>&gt;2 cm</strong>.</li>\n<li>Proton-pump inhibitors with somatostatin analogues for advanced locoregional disease or metastasis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male who is a chronic smoker presented to the hospital with intermittent claudication pain of both thigh and buttock region on walking about 500 m. Which of the following is a likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Arterial disease involving the superficial femoral artery"
      },
      {
        "id": 2,
        "text": "Arterial disease with aortoiliac involvement"
      },
      {
        "id": 3,
        "text": "Femoral venous insufficiency"
      },
      {
        "id": 4,
        "text": "Arterial disease involving the profunda femoris artery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>arterial disease with aortoiliac involvement</strong>.&nbsp;Classically, the&nbsp;<strong>muscle group affected</strong> by claudication is <strong>one anatomical level below</strong> the level of arterial disease.</p>\n<p>Intermittent claudication is a feature of chronic arterial disease or occlusion of the artery.&nbsp; Aortoiliac disease affects the <strong>infrarenal aorta</strong> and<strong> iliac arteries</strong>.</p>\n<p><strong>Management</strong> involves smoking cessation, lifestyle modifications, and treatment of underlying diabetes or hyperlipidemia if present.</p>\n<p>For claudication, <strong>cilostazol</strong> or pentoxyfilline is used. <strong>Cilostazol</strong> is <strong>superior</strong> to pentoxyfilline.&nbsp;</p>\n<p>Surgical options include&nbsp;aortoiliac bypass, aortobifemoral bypass, percutaneous transluminal angioplasty (PTA), which can be with or without stent placement, and thromboendarterectomy.</p>\n<table style=\"width: 478px;\">\n<tbody>\n<tr>\n<td style=\"width: 213.577px; text-align: left;\" colspan=\"2\"><strong>Correlation of clinical findings to the Site of Disease</strong></td>\n</tr>\n<tr>\n<td style=\"width: 213.5771942138672px;\">Aortoiliac obstruction</td>\n<td style=\"width: 272.4228057861328px;\">\n<p>Claudication in <strong>buttocks, thighs, and calves</strong></p>\n<p>Bruit over the aortoiliac region</p>\n<p><strong>Impotence</strong> (Leriche's syndrome)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 213.5771942138672px;\">Iliac obstruction</td>\n<td style=\"width: 272.4228057861328px;\">\n<p>Claudication of <strong>thigh and calf,</strong> unilaterally</p>\n<p>Absence of femoral and distal pulses</p>\n<p>Bruit over iliac region</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 213.5771942138672px;\">Femoropopliteal obstruction</td>\n<td style=\"width: 272.4228057861328px;\">\n<p>Claudication in <strong>calf</strong></p>\n<p>Femoral pulse felt but distal pulses absent</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 213.5771942138672px;\">Distal obstruction</td>\n<td style=\"width: 272.4228057861328px;\">\n<p>Ankle pulses absent</p>\n<p>Claudication in <strong>calf and foot</strong></p>\n<p>Femoral and popliteal pulses palpable</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about retrosternal goitre?",
    "choices": [
      {
        "id": 1,
        "text": "Operated in all patients regardless of symptoms"
      },
      {
        "id": 2,
        "text": "Sternal incision is always required to operate"
      },
      {
        "id": 3,
        "text": "It receives blood supply from the thoracodorsal artery"
      },
      {
        "id": 4,
        "text": "Most of the retrosternal goitres can be removed by a neck incision"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Most of the retrosternal goiters can be removed by<strong>&nbsp;neck incision </strong>(transcervical approach).</p>\n<p>Retrosternal goitre is defined as having <strong>&gt;50%</strong> of the goiter <strong>below </strong>the<strong> suprasternal notch</strong>. It can be either <strong>primary</strong> or <strong>secondary.</strong></p>\n<ul>\n<li><strong>Primary:</strong> rare and arises from ectopic thyroid tissue in the mediastinum; receives blood supply from <strong>intrathoracic blood vessels</strong>. It is <strong>not related to thyroid tissue</strong> in the <strong>neck.</strong></li>\n<li><strong>Secondary:</strong>&nbsp;they are the <strong>most common type;</strong>&nbsp;an extension of enlarged thyroid from the neck, usually arising from the lower pole of <strong>nodular</strong> goitre. It receives its blood supply from <strong>superior and inferior thyroid vessels</strong>.</li>\n</ul>\n<p>The majority of patients are <strong>asymptomatic</strong> or have minimal symptoms. If the gland enlarges within the thoracic inlet, the <strong>pressure</strong> may lead to dysphagia, tracheal compression, and eventually airway symptoms. <strong>Pemberton sign</strong> can be positive (facial flushing and dilatation of cervical veins upon raising the arms above the head).</p>\n<p><strong>CECT</strong> neck and thorax is the <strong>investigation of choice.</strong></p>\n<p>Over 95% of retrosternal goiters can be removed via a transcervical incision since they are an extension from thyroid tissue in the neck.</p>\n<p>Other options:</p>\n<p>Option A: Surgical removal of the retrosternal goiter is indicated in patients with significant <strong>airway compression,</strong>&nbsp;and in <strong>young</strong> <strong>patients</strong> who have symptoms such as <strong>dyspnoea</strong> or <strong>dysphagia.&nbsp;</strong></p>\n<p>Option B: <strong>Median sternotomy</strong> approach is indicated in:</p>\n<ul>\n<li aria-level=\"1\">Primary mediastinal goiter</li>\n<li aria-level=\"1\">Malignant retrosternal goitre</li>\n<li aria-level=\"1\">Very large retrosternal goiter</li>\n<li aria-level=\"1\">Recurrence in the mediastinum</li>\n</ul>\n<p>For a primary mediastinal goiter&nbsp;whose boundaries are <strong>completely</strong> <strong>within the chest</strong>, resection is often achieved through <strong>median sternotomy</strong> or <strong>thoracotomy</strong> to ensure that the vessels supplying the tumor are properly ligated. Removing the tumor through a cervical approach can result in uncontrolled bleeding and is generally avoided.&nbsp;</p>\n<p>Option C: Blood supply to the retrosternal goiter is from the thyroid vessels (secondary retrosternal goiter).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While performing surgery on a patient who presented with clinical features suggestive of peritonitis, a diverticular perforation is seen along with fecal peritonitis. What is the Hinchey's stage?",
    "choices": [
      {
        "id": 1,
        "text": "Stage 1"
      },
      {
        "id": 2,
        "text": "Stage 2"
      },
      {
        "id": 3,
        "text": "Stage 3"
      },
      {
        "id": 4,
        "text": "Stage 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Fecal peritonitis</strong> belongs to <strong>grade 4</strong> in the Hinchey classification.</p>\n<p>Diverticulitis refers to the inflammation and infection associated with the diverticula. <strong>Hinchey classification</strong> is the <strong>most commonly</strong> used classification for the <strong>severity and complication of acute diverticulitis.&nbsp;</strong>It is used additionally to guide the overall <strong>management</strong> of acute diverticulitis.&nbsp;</p>\n<div class=\"page\" title=\"Page 1295\">\n<table style=\"height: 263px;\" width=\"526\"><colgroup><col /><col /> </colgroup>\n<tbody>\n<tr style=\"height: 33.5625px;\">\n<td style=\"width: 516px; height: 33.5625px;\" colspan=\"2\">\n<p><strong>Hinchey classification:</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"width: 104.18px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Stage 1</p>\n</div>\n</div>\n</td>\n<td style=\"width: 405.82px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Mesenteric or pericolic abscess</p>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"width: 104.18px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Stage 2</p>\n</div>\n</div>\n</td>\n<td style=\"width: 405.82px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Pelvic abscess</p>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"width: 104.18px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Stage 3</p>\n</div>\n</div>\n</td>\n<td style=\"width: 405.82px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Purulent peritonitis</p>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td style=\"width: 104.18px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Stage 4</p>\n</div>\n</div>\n</td>\n<td style=\"width: 405.82px; height: 46px;\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Fecal peritonitis</p>\n</div>\n</div>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 80-year-old woman presented with complaints of fatigue. On imaging, she was found to have a scleroatrophic gall bladder with impacted stones in it. A large stone was also present in the common bile duct and the biliary tree is dilated. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Immediately take up patient for cholecystectomy"
      },
      {
        "id": 2,
        "text": "Endoscopic retrograde cholangiopancreatography"
      },
      {
        "id": 3,
        "text": "Wait and watch"
      },
      {
        "id": 4,
        "text": "CT scan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>An 80-year-old woman with imaging showing a <strong>scleroatrophic gall bladder</strong> with <strong>impacted stones</strong> and a <strong>stone in the bile duct</strong> is suggestive of chronic cholelithiasis with choledocholithiasis. <strong>ERCP</strong> is the next line of management for this patient.&nbsp;</p>\n<p>Choledocholithiasis is the presence of stone in the common bile duct (CBD) or biliary tree. It can be primary or secondary:&nbsp;&nbsp;</p>\n<ul>\n<li>Primary stones are formed in the CBD or biliary tree itself and are rare.</li>\n<li>Secondary stones are passed from the gallbladder to the CBD. They are easier to manage than primary stones.</li>\n</ul>\n<p>It can be an asymptomatic and incidental finding or present with features such as jaundice (most common), abdominal pain, and <strong>fatigue</strong>. When there is inflammation of the biliary tree (cholangitis), the patient will have intermittent pain, fever, and jaundice (<strong>Charcot's triad</strong>).&nbsp;</p>\n<p>Investigations:&nbsp;</p>\n<ul>\n<li>Liver function tests will show elevated direct bilirubin and alkaline phosphatase levels.&nbsp;</li>\n<li>Abdominal ultrasound is the first imaging modality done and may show <strong>gallstones</strong> and <strong>dilated bile duct</strong> (&gt;8 mm).&nbsp;</li>\n<li>CT is sensitive for CBD stones. It shows stones, location, ductal stricture or block, ductal dilatation, and intrahepatic biliary changes.</li>\n<li>MRCP is highly sensitive and specific for CBD stones, but it is<strong> only diagnostic</strong> and intervention cannot be performed.</li>\n</ul>\n<p>Management:&nbsp;</p>\n<ul>\n<li><strong>ERCP with sphincterotomy</strong> is the procedure of choice, followed by the removal of stones using a dormia basket or placement of a stent.</li>\n<li>Despite ERCP being an invasive procedure, it has the advantage of being <strong>both a diagnostic and therapeutic procedure</strong> and is more suited for <strong>elderly patients</strong> who cannot tolerate anesthesia and surgery.</li>\n</ul>\n<p>Other options:&nbsp;</p>\n<p>Option A: Cholecystectomy is not recommended for elderly patients, owing to the risk of old age and associated anesthetic and surgical complications.</p>\n<p>Option C: Wait and watch approach can be done for asymptomatic patients, and patients with smaller stones.</p>\n<p>Option D: CT is sensitive for CBD stones, but it is only diagnostic and intervention cannot be performed.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man presented with recurrent episodes of fever with chills. MRCP image is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Primary sclerosing cholangitis"
      },
      {
        "id": 2,
        "text": "Caroli disease"
      },
      {
        "id": 3,
        "text": "Oriental cholangitis"
      },
      {
        "id": 4,
        "text": "Primary biliary carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The common age group of primary sclerosing cholangitis is <strong>30-45 years</strong>. <strong>Men</strong> are affected twice as commonly as women. Two-thirds of these cases are associated with <strong>ulcerative colitis.&nbsp;</strong>It is also associated with <strong>Riedel&rsquo;s&nbsp;thyroiditis</strong> and<strong> retroperitoneal fibrosis.</strong>&nbsp;10&ndash;20% of patients develop <strong>cholangiocarcinoma. </strong></p>\n<p>Clinical features of a patient with PSC include pruritis, fever, chills, right upper quadrant discomfort, jaundice, and weight loss.&nbsp;</p>\n<p>Liver function tests show a cholestatic pattern with an <strong>elevation of ALP </strong>and <strong>GGT</strong> and smaller rises in the aminotransferases. Bilirubin values may be variable.</p>\n<p>Liver biopsy <strong>excludes</strong> other causes of cholestatic liver disease and defines the <strong>stage</strong> of PSC. It shows <strong>onion skin concentric periductal fibrosis</strong>. With disease progression, periportal fibrosis occurs, progressing to bridging necrosis, and eventually biliary cirrhosis.</p>\n<p>Currently, there is <strong>no known effective medical therapy.</strong>&nbsp;Surgical management involving&nbsp;<strong>resection of extrahepatic biliary tree </strong>and<strong> hepaticojejunostomy</strong>&nbsp;has shown reasonable effects. For patients with&nbsp;advanced liver disease, <strong>liver transplantation </strong>is the&nbsp;only available option.</p>\n<p>Other options:&nbsp;</p>\n<p>Option C: Oriental cholangitis, also known as<strong> recurrent pyogenic cholangitis</strong> is characterized by recurrent attacks of cholangitis due to bile stasis and stone formation. Patients between <strong>30-40 years</strong> and<strong> both sexes</strong> are equally affected. It is caused due to infections (liver flukes, E.coli, Klebsiella, Pseudomonas, and Proteus). Patients present with Charcot's triad (intermittent fever, pain, and jaundice). <strong>MRCP</strong> shows intra or extrahepatic <strong>calculi,</strong> dilatation of ducts, and strictures.&nbsp;</p>\n<p>Option D: Biliary carcinoma&nbsp; (cholangiocarcinoma) most commonly affects patients <strong>&gt;60 years</strong> and presents with fever, abdominal pain, weight loss, and features of obstructive jaundice. <strong>MRCP</strong> shows irregular <strong>narrowing</strong> of the bile duct involved by the <strong>tumor,</strong> with asymmetric upstream dilatation of the intrahepatic ducts.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/08dbd37ac2644dddbce5f384204f9914.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/615f6ae3c19f4f27a8acdddfd78aa2f3x315x307.JPEG"
    ]
  },
  {
    "text": "A 5-year-old child with Wilson's disease is being considered for liver transplantation. Which of the following is not a parameter in the selection criteria for transplantation?",
    "choices": [
      {
        "id": 1,
        "text": "Age <10years"
      },
      {
        "id": 2,
        "text": "PT >100 s"
      },
      {
        "id": 3,
        "text": "Bilirubin >300 \u03bcmol/L"
      },
      {
        "id": 4,
        "text": "Jaundice less than 7 days before development of encephalopathy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A 5-year-old child with Wilson's disease is a case of <strong>non-paracetamol-induced acute liver failure</strong> and jaundice&nbsp;for <strong>more than 7 days</strong> before the development of encephalopathy is one of the parameters in the&nbsp;<strong>King's College criteria for liver transplantation.</strong></p>\n<p>It includes the following parameters:</p>\n<p><strong>Non-paracetamol-induced acute liver failure</strong>:</p>\n<div class=\"page\" title=\"Page 1177\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>PT &gt;100 s (INR &gt;6.5)</li>\n</ul>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; or/and</p>\n<ul>\n<li><strong>Any three</strong> of the following:\n<ul>\n<li>Age &lt;10 years or &gt;40 years</li>\n<li>Etiology non-A, non-B hepatitis, or idiosyncratic drug reaction</li>\n<li><strong>Jaundice more than 7 days before the development of encephalopathy</strong> i.e., not hyperacute</li>\n<li>PT &gt;50 s (INR &gt; 3.5)</li>\n<li>Bilirubin &gt; 18 mg/dl (300 &mu;mol/L)</li>\n</ul>\n</li>\n</ul>\n<p><strong>Paracetamol-induced acute liver failure:</strong></p>\n<div class=\"page\" title=\"Page 1177\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>pH &lt;7.30 (irrespective of the grade of encephalopathy)&nbsp;</li>\n</ul>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; or/and</p>\n<ul>\n<li><strong>All three</strong> of the following:\n<ul>\n<li>Prothrombin time &gt;100 s (INR &gt;6.5)</li>\n<li>Serum creatinine &gt;3.4 mg/dl (300 &mu;mol/L)</li>\n<li>Grade 3 or 4 hepatic encephalopathy</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common neuroendocrine tumor of the pancreas is",
    "choices": [
      {
        "id": 1,
        "text": "Gastrinoma"
      },
      {
        "id": 2,
        "text": "Somatostatinoma"
      },
      {
        "id": 3,
        "text": "Insulinoma"
      },
      {
        "id": 4,
        "text": "VIPoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The\u00a0<strong>most common neuroendocrine</strong> tumor of the<strong> pancreas </strong>is<strong>\u00a0</strong><strong>insulinoma\u00a0</strong>(4 per million).</p>\n<p>Insulinoma is an insulin-producing tumor of the pancreas, with more than 90% of them being benign. It occurs in <strong>&gt;40 years</strong> in patients <strong>without</strong> MEN 1 syndrome and <strong>&lt;40 years</strong> in patients <strong>with MEN 1</strong>. It presents with symptoms of <strong>hypoglycemia</strong> such as weakness, headaches, sweating, faintness, seizures, and altered behavior. These occur <strong>after</strong> <strong>fasting</strong> or <strong>exertion</strong> and <strong>improve</strong> <strong>after glucose</strong> intake.\u00a0</p>\n<p>The investigation of choice for insulinoma is the determination of\u00a0<strong>72-hour fasting glucose</strong>\u00a0and\u00a0<strong>serum insulin levels.\u00a0</strong>C-peptide and proinsulin levels are also <strong>elevated.</strong></p>\n<p>Medical management includes:</p>\n<ul>\n<li><strong>Frequent</strong> carbohydrate-rich meals</li>\n<li><strong>Somatostatin analogs</strong> like\u00a0<strong>octreotide</strong> are effective in controlling symptoms due to excess insulin secretion. They should be used with caution as they can <strong>suppress</strong> <strong>counterregulatory hormones</strong>, such as growth hormone (GH), glucagon, and catecholamines, and precipitously <strong>worsen</strong> hypoglycemia.\u00a0</li>\n<li><strong>Diazoxide</strong> can be used in the <strong>initial management</strong>\u00a0of insulinoma as it <strong>inhibits insulin release</strong>. Its side effects include sodium retention and nausea.\u00a0</li>\n<li><strong>Everolimus</strong> has been found to be highly effective in <strong>improving glycemic control</strong> in patients with insulinoma owing to its <strong>antitumor effect</strong> and <strong>induction of insulin resistance.</strong></li>\n</ul>\n<p><strong>Enucleation</strong> and <strong>pancreatectomy </strong>are\u00a0the definitive surgical management of insulinoma.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Gastrinoma</strong> has an incidence of <strong>0.5 to 4 in a million</strong>.</p>\n<p>Options B &amp; D: <strong>Somatostatinoma</strong> and <strong>VIPoma</strong> are much rarer than gastrinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "ASEPSIS wound scoring takes all of the following into consideration except:",
    "choices": [
      {
        "id": 1,
        "text": "Wound swab from the site"
      },
      {
        "id": 2,
        "text": "Serous discharge"
      },
      {
        "id": 3,
        "text": "Erythema"
      },
      {
        "id": 4,
        "text": "Induration"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">ASEPSIS wound score <strong>does not</strong> take <strong>induration</strong> into consideration. Instead, the I in ASEPS<strong>I</strong>S stands for the&nbsp;<strong>isolation of bacteria from the wound</strong>.</p>\n<p class=\"p1\"><strong>ASEPSIS wound score</strong> and <strong>Southampton wound score</strong> are used to determine the&nbsp;<strong>severity</strong> of the <strong>surgical site wound infection (SSI)</strong>.</p>\n<p class=\"p1\">ASEPSIS score includes:</p>\n<ul>\n<li class=\"p1\"><strong>A</strong>dditional treatment\n<ul>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">Antibiotics for wound infection</span></li>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">Drainage of pus under local anesthesia</span></li>\n<li class=\"p1\"><span style=\"font-size: 10pt;\">Debridement of the wound under general anesthesia</span></li>\n</ul>\n</li>\n<li class=\"p1\"><strong>S</strong>erous discharge</li>\n<li class=\"p1\"><strong>E</strong>rythema</li>\n<li class=\"p1\"><strong>P</strong>urulent exudate</li>\n<li class=\"p1\"><strong>S</strong>eparation of deep tissue</li>\n<li class=\"p1\"><strong>I</strong>solation of bacteria from the wound</li>\n<li class=\"p1\"><strong>S</strong>tay as inpatient prolonged over 14 days as a result of wound infection</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes with long-standing non-pitting edema in the legs. What is the most probable cause?",
    "choices": [
      {
        "id": 1,
        "text": "Lymphedema"
      },
      {
        "id": 2,
        "text": "Arterial Disorders"
      },
      {
        "id": 3,
        "text": "Venous Disorders"
      },
      {
        "id": 4,
        "text": "Coronary heart disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Lymphedema</strong> is the most probable cause of long-standing non-pitting edema in the limbs.</p>\n<p><strong>Lymphedema</strong> is the abnormal accumulation of <strong>protein-rich</strong> fluid in the interstitial spaces of the tissues.</p>\n<p>Lymphedema can be primary or secondary.</p>\n<p><strong>Primary</strong> lymphedema includes:\u00a0</p>\n<ul>\n<li><strong>Lymphedema congenita</strong> (0-2 years): more common in <strong>males,</strong> involves multiple limbs, face, and genitalia. It can be familial or sporadic. The familial type is called <strong>Nonne Milroy</strong> syndrome.</li>\n<li><strong>Lymphedema praecox</strong> (2-35 years): more common in <strong>females,</strong> the <strong>most common</strong> type of <strong>primary</strong> lymphedema with a peak incidence in puberty. It can be familial or sporadic. The familial type is called <strong>Meig's disease.</strong></li>\n<li><strong>Lymphedema tarda</strong> (&gt;35 years): Rare and uncommon.</li>\n</ul>\n<p><strong>Secondary</strong> lymphedema is more <strong>common</strong> than primary and is the <strong>most common</strong> cause of lymphedema <strong>overall.</strong> Causes include <strong>lymph node dissection</strong> (axillary or inguinal), post-mastectomy, postoperative radiotherapy, obesity, varicose vein surgery, and trauma.</p>\n<p><strong>Complications</strong> of lymphedema include infections, skin changes, recurent <strong>cellulitis, non-healing ulcers,</strong> and <strong>lymphangiosarcoma.</strong></p>\n<p><strong>Treatment </strong>mostly includes patient education and <strong>nonsurgical interventions</strong>, which include limb elevation, and external compressive garments. When the above methods\u00a0fail, <strong>surgery</strong> can be considered.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 41-year-old female patient presented with a tortuous swelling over the left side of the scalp and face as shown in the image given below. On local examination, the swelling was pulsatile. On auscultation, a bruit was heard. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Neurofibromatosis"
      },
      {
        "id": 2,
        "text": "Liposarcoma"
      },
      {
        "id": 3,
        "text": "Cirsoid Aneurysm"
      },
      {
        "id": 4,
        "text": "Varicocele"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Patients present with a tortuous, pulsatile swelling over the <strong>scalp</strong> or <strong>face.&nbsp;</strong>They are usually asymptomatic and present to the clinic due to cosmetic deformity. However, some patients may have headache, tinnitus, and/or bleeding. A <strong>loud</strong> <strong>bruit</strong> is heard on auscultation.</p>\n<p><strong>Angiography</strong> is the investigation of choice.</p>\n<p>Treatment includes surgical <strong>resection</strong>, endovascular occlusion&nbsp;or injection of percutaneous sclerosing agents.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c693a37778f0421f862afc975217e3c3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c732bf0326d04f2fa6ac759d025da830x720x737.JPEG"
    ]
  },
  {
    "text": "What does the given barium swallow film show?",
    "choices": [
      {
        "id": 1,
        "text": "Aortic aneurysm"
      },
      {
        "id": 2,
        "text": "Pharyngeal pouch"
      },
      {
        "id": 3,
        "text": "Carotid body tumor"
      },
      {
        "id": 4,
        "text": "Esophageal carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given barium swallow film shows an <strong>outpouching</strong> from the <strong>posterior wall</strong> of the pharynx suggestive of a&nbsp;<strong>Zenker's</strong> <strong>diverticulum</strong> (pharyngeal pouch).&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bb36b1b2888a4db2abd0c3f186c47629.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "True statement about intermittent claudication:",
    "choices": [
      {
        "id": 1,
        "text": "Felt at rest"
      },
      {
        "id": 2,
        "text": "Most commonly felt in the calf muscles"
      },
      {
        "id": 3,
        "text": "Day to day distance is variable"
      },
      {
        "id": 4,
        "text": "Relived after getting out of bed"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Intermittent claudication</strong> is most commonly felt in the <strong>calf</strong> muscles because of the involvement of the&nbsp;<strong>superficial femoral</strong> <strong>artery&nbsp;</strong>in chronic vascular occlusive disease.</p>\n<p>Intermittent claudication:</p>\n<ul>\n<li>Intermittent claudication is the debilitating cramp-like pain felt in the leg muscles due to <strong>reduced blood flow</strong>&nbsp;and anaerobic metabolism brought on by peripheral arterial disease.</li>\n<li>It&nbsp;usually signifies <strong>mild </strong>to<strong> moderate chronic vascular occlusive disease</strong></li>\n<li>The pain is brought on by walking (option D)</li>\n<li>Not present on taking the first step&nbsp;</li>\n<li>Relieved by rest in both the standing and sitting positions, usually within 5 minutes (option A).</li>\n<li>The distance that a patient is able to walk without stopping is known as <strong>claudication distance.&nbsp;</strong>It<strong> varies only slightly from day to day&nbsp;</strong>(option C).</li>\n<li>The superficial femoral artery (70%) is the <strong>most commonly</strong> affected artery by claudication and manifests as pain in the <strong>calf</strong> muscles.&nbsp;</li>\n<li>Aorto-iliac occlusion may cause thigh or buttock claudication.<strong> Leriche's syndrome</strong> occurs due to aortoiliac occlusion and presents with a triad of claudication, impotence, and absent femoral pulses.</li>\n</ul>\n<p>Boyd's classification of claudication:&nbsp;</p>\n<ul>\n<li>Grade I: Patient complains of pain after walking. If the patient continues to walk, due to increased blood flow in muscle and opening of collaterals metabolites causing pain are washed away and the pain subsides.</li>\n<li>Grade II: Pain still persists on continuing to walk; but can walk with effort.</li>\n<li>Grade III: The patient has to take rest to relieve the pain.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a part of the primary survey?",
    "choices": [
      {
        "id": 1,
        "text": "Measuring blood pressure"
      },
      {
        "id": 2,
        "text": "Removing clothes to inspect for wounds"
      },
      {
        "id": 3,
        "text": "Taking CT scan of the patient"
      },
      {
        "id": 4,
        "text": "Checking airway patency"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Taking a <strong>CT scan</strong> of the patient is a part of <strong>secondary</strong> survey.</p>\n<p><strong>Primary survey</strong>\u00a0identifies and manages the most immediately life-threatening pathologies first.\u00a0</p>\n<p>The\u00a0<strong>s</strong><strong>econdary survey </strong>includes investigations that help identify all other injuries, excluding the apparent ones. This includes <strong>X-rays</strong> of the spine and extremities and a <strong>CT</strong> of the abdomen, head, chest, and spine.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male patient, during his routine annual checkup, is found to have an abdominal aortic aneurysm measuring 40 mm in diameter on USG. Which of the following is true about the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Urgent endovascular aneurysm repair"
      },
      {
        "id": 2,
        "text": "Surgery is indicated if aneurysmal diameter is >55mm"
      },
      {
        "id": 3,
        "text": "Urgently wheel the patient to OT for surgery"
      },
      {
        "id": 4,
        "text": "Surgery is indicated only if aneurysm is >77mm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Surgery is indicated in an asymptomatic abdominal aortic aneurysm (AAA) only if its diameter is <strong>more than 55 mm&nbsp;</strong>in a&nbsp;<strong>male patient.&nbsp;</strong></p>\n<p>If the diameter is less than <strong>55 mm</strong>, regular <strong>ultrasound monitoring</strong> is required. This is because <strong>elective open surgery</strong> has a <strong>higher rate of mortality</strong> when compared to conservative management for aneurysms of size &lt; 55 mm.</p>\n<p>Indications for surgery in abdominal aortic aneurysm:</p>\n<ul>\n<li>Size &gt;5.5 cm in <strong>males&nbsp;</strong></li>\n<li>Size &gt;5 cm in <strong>females&nbsp;</strong></li>\n<li>Expansion of <strong>&gt;1 cm in one year</strong>&nbsp;</li>\n<li><strong>Painful</strong> tender aneurysm&nbsp;</li>\n<li><strong>Thrombosed</strong> aneurysm; aneurysm with <strong>distal emboli</strong></li>\n</ul>\n<p><strong>Management</strong> of aortic aneurysm: AAA is surgically managed by <strong>dacron graft repair</strong>. It can be either <strong>open or EVAR </strong>(endovascular aneurysm repair)&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Open surgical repair</strong> is done by exposing the aorta through a mid-sternal incision and graft replacement. To expose the aorta the <strong>descending colon should be mobilized medially</strong> and this is known as <strong>left</strong> <strong>visceral rotation</strong> or <strong>Mattox procedure</strong>.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>EVAR</strong>&nbsp;is a <strong>minimally</strong> <strong>invasive</strong> procedure in which an aortic stent graft is placed on the n<strong>onaneurysmal</strong> aortoiliac segment.</li>\n</ul>\n<p><strong>Complications</strong>&nbsp;following an AAA repair are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cardiovascular (ischemia and infarction)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Respiratory (atelectasis or consolidation).</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Colonic ischemia.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Renal failure.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Aortoduodenal fistula</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">spinal cord ischemia</li>\n</ul>\n<p>The given image below shows the technique of EVAR:&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/02286229034b4dbaaedbd1adec51e8c3x400x401.JPEG"
    ]
  },
  {
    "text": "Which of the following is the Miami criteria for intraoperative parathyroid hormone (PTH) measurement?",
    "choices": [
      {
        "id": 1,
        "text": "Quarter fall in 5 min"
      },
      {
        "id": 2,
        "text": "Quarter fall in 10 min"
      },
      {
        "id": 3,
        "text": "Half fall in 5 min"
      },
      {
        "id": 4,
        "text": "Half fall in 10 min"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A drop in the level of PTH to <strong>less than half the maximum value</strong> (corresponding to the preoperative levels)&nbsp;<strong> at 10 min</strong> postresection is the <strong>Miami criteria</strong>.</p>\n<p>It is used to determine the <strong>extent of resection</strong> of the parathyroid gland which is done in a case of primary hyperparathyroidism due to <strong>adenoma.</strong></p>\n<p><strong>Intraoperative</strong> parathyroid hormone monitoring is a commonly used adjunct, which guides the surgeon on when to <strong>stop</strong> parathyroid exploration and helps in confirming there is <strong>no residual hyperfunctioning parathyroid</strong> tissue. The PTH levels are expected to drop after the gland is excised due to its<strong> short half-life</strong> (3-5 minutes). Blood is drawn at various time points and the hormone levels are assessed.</p>\n<p>Based on the Miami Criteria, <strong>a more than 50% decline in PTH at 10 minutes</strong> following parathyroid gland removal <strong>compared to the highest baseline level,</strong> either the pre-incision or pre-excision, <strong>suggests a cure</strong>, and the procedure can be terminated.</p>\n<p>Indications for parathyroidectomy:&nbsp;</p>\n<p>All symptomatic patients with hyperparathyroidism should be offered surgery. Indications for surgery in asymptomatic patients include:&nbsp;</p>\n<table style=\"height: 224px; width: 1144px;\" width=\"1167\">\n<tbody>\n<tr style=\"height: 36px;\">\n<td style=\"width: 147.962px; height: 36px;\">Serum calcium levels&nbsp;</td>\n<td style=\"width: 968.037px; height: 36px;\">0.25 mmol/L (<strong>1.0 mg/dL</strong>) <strong>above</strong> the upper limit serum calcium of normal&nbsp;</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td style=\"width: 147.962px; height: 64px;\">Skeletal&nbsp;</td>\n<td style=\"width: 968.037px; height: 64px;\">\n<ul>\n<li>BMD by DEXA:&nbsp;<strong>T score &ndash;2.5</strong> at the lumbar spine, total hip, femoral neck, or distal one-third of radius</li>\n<li><strong>Vertebral fracture</strong></li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 114px;\">\n<td style=\"width: 147.962px; height: 114px;\">Renal</td>\n<td style=\"width: 968.037px; height: 114px;\">\n<ul>\n<li>Creatinine clearance <strong>&lt;60 mL/min&nbsp;</strong></li>\n<li>24-hour urinary calcium &gt;10 mmol/dL (<strong>&gt;400 mg/day</strong>)</li>\n<li>Increased<strong> risk of stone formation</strong> by risk analysis&nbsp;</li>\n</ul>\n<p>&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 14px;\">\n<td style=\"width: 147.962px; height: 14px;\">Age&nbsp;</td>\n<td style=\"width: 968.037px; height: 14px;\"><strong>&lt;50</strong> <strong>years&nbsp;</strong></td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;<em>*BMD - bone mineral density</em></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old boy undergoes bilateral adrenalectomy for phaeochromocytoma. On the third postoperative day, the boy feels lethargic and tired. Blood pressure is 80/60 mm Hg, there is no sign of bleed. What could be the cause of this?",
    "choices": [
      {
        "id": 1,
        "text": "Addisonian crisis"
      },
      {
        "id": 2,
        "text": "SIADH"
      },
      {
        "id": 3,
        "text": "Diabetes insipidus"
      },
      {
        "id": 4,
        "text": "Cerebral salt wasting disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of <strong>hypotension</strong> with no presence of bleeding and <strong>bilateral adrenalectomy</strong> is suggestive of <strong>an Addisonian</strong><strong>&nbsp;crisis.&nbsp;</strong>It is a life-threatening condition caused due to <strong>sudden insufficiency</strong> <strong>of adrenal hormones</strong>.</p>\n<p>Acute adrenal insufficiency (adrenal or addisonian's crisis) is a medical emergency caused due to a precipitating illness unmasking insufficiency or trauma or severe sepsis causing adrenal hemorrhage (Waterhouse-Friderichsen syndrome) or surgical removal of the glands. It presents with non-specific symptoms such as shock with fever, nausea, vomiting, abdominal pain, hypocalcemia and electrolyte imbalances. It may be often misdiagnosed as an acute abdominal emergency.</p>\n<p>Adrenal insufficiency can be primary (due to adrenal pathology), secondary (due to pituitary pathology- lack of ACTH) or tertiary (due to hypothalamus pathology- lack of CRH).&nbsp;</p>\n<p><strong>Autoimmune adrenalitis</strong> is the most common cause of primary adrenal insufficiency worldwide.</p>\n<p><strong>Tuberculosis</strong> is the most common cause of primary adrenal insufficiency in India.</p>\n<p>Adrenal crisis requires immediate intervention owing to its high mortality rate. Immediate rehydration is initiated with a saline infusion at <strong>1 litre/hr</strong> with <strong>continuous cardiac</strong> <strong>monitoring</strong>. Glucocorticoid replacement is initiated with an initial bolus injection of <strong>hydrocortisone 100 mg</strong> followed by <strong>200 mg</strong> over 24 hours, preferably by continuous infusion or alternatively by IV or IM injections. Mineralocorticoid replacement is initiated once the daily dose of hydrocortisone has been reduced to <strong>&lt;50 mg</strong>, since hydrocortisone at higher doses provides sufficient stimulation of mineralocorticoids.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a component of Thoracoscore?",
    "choices": [
      {
        "id": 1,
        "text": "Performance status"
      },
      {
        "id": 2,
        "text": "Complication of surgery"
      },
      {
        "id": 3,
        "text": "ASA grading"
      },
      {
        "id": 4,
        "text": "Priority of surgery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>complication of surgery</strong> is <strong>not</strong> a component of thoracoscore.</p>\n<p><strong>Thoracoscore</strong>\u00a0is used to <strong>assess the risk of operative mortality</strong> in a patient undergoing <strong>thoracic surgery.</strong>\u00a0It includes <strong>9 variables:</strong></p>\n<div class=\"page\" title=\"Page 936\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Age</li>\n<li>Sex</li>\n<li>American Society of Anesthesiologists score (ASA)</li>\n<li>Performance status</li>\n<li>Dyspnoea score</li>\n<li>Priority of surgery</li>\n<li>Extent of surgery</li>\n<li>Malignant diagnosis\u00a0</li>\n<li>Composite comorbidity score</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged man presented to the emergency department with upper abdominal pain after having a heavy meal. On clinical examination, upper abdominal tenderness was noted. On chest radiography widening of the mediastinum with pneumomediastinum was seen. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spontaneous perforation of esophagus"
      },
      {
        "id": 2,
        "text": "Perforation of peptic ulcer"
      },
      {
        "id": 3,
        "text": "Foreign body in esophagus"
      },
      {
        "id": 4,
        "text": "Rupture of emphysematous bulla of lung"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to a diagnosis of <strong>spontaneous perforation</strong> of the<strong> esophagus</strong>.</p>\n<p>In a perforated peptic ulcer, patients develop sudden onset <strong>severe generalized </strong>abdominal pain, tenderness, and <strong>board-like rigidity </strong>and<strong> </strong>an<strong> erect</strong> plain chest X-ray shows <strong>gas under the diaphragm </strong>(Option B). The <strong>foreign&nbsp;body</strong> in the esophagus can be asymptomatic or may present with perforation after ingestion. The<strong> radiopaque</strong> foreign body can be seen with a&nbsp;<strong>chest X-ray</strong>&nbsp;(Option C).&nbsp;<strong> Rupture</strong> of emphysematous<strong> bullae</strong> of the lung will lead to secondary pneumothorax, which manifests as chest pain and dyspnoea. A plain <strong>chest X-ray</strong>&nbsp;shows <strong>air</strong> in the <strong>thorax</strong>, and the mediastinum is pushed to the opposite side (Option D).</p>\n<p>Spontaneous perforation of the esophagus needs immediate diagnosis and intervention due to the higher mortality associated with it. The most common site of perforation is the <strong>lower esophagus towards the left esophageal cavity.</strong></p>\n<p>Causes:&nbsp;</p>\n<ul>\n<li>Iatrogenic perforation (most common)</li>\n<li>Boerhaave's syndrome (spontaneous emetogenic perforation)</li>\n<li>Sharp foreign body&nbsp;</li>\n<li>Corrosive ingestion&nbsp;</li>\n<li>Esophageal carcinoma&nbsp;</li>\n</ul>\n<p>It usually manifests as <strong>severe pain</strong> in the <strong>chest</strong> or abdomen after a meal or after a bout of drinking, commonly associated with dyspnoea. On clinical examination, there is<strong> rigidity and tenderness</strong> in the <strong>upper abdomen.</strong>&nbsp;The diagnosis is usually confirmed by a&nbsp;<strong>chest radiograph</strong> which shows pneumomediastinum<strong>, </strong>pneumoperitoneum<strong>, </strong>and pneumothorax. Subcutaneous emphysema can be seen in Boerhaave's syndrome. Patients with sepsis will have a fever, tachycardia and tachypnea.&nbsp;</p>\n<p>Treatment includes adequate drainage, antibiotics, closure of the perforation site if possible and supportive measures.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old male was diagnosed with achalasia cardia. High-resolution manometry revealed massive, simultaneous, high-pressure contractions of the distal oesophagus. According to the \u200bChicago classification, the patient has which type of achalasia?",
    "choices": [
      {
        "id": 1,
        "text": "Type II"
      },
      {
        "id": 2,
        "text": "Type I"
      },
      {
        "id": 3,
        "text": "Type IV"
      },
      {
        "id": 4,
        "text": "Type III"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given features are suggestive of <strong>type III achalasia cardia.</strong></p>\n<p><strong>Type III&nbsp;</strong>achalasia cardia is&nbsp;characterised by massive, <strong>simultaneous</strong>, <strong>high-pressure contractions</strong> of the <strong>distal esophagus.</strong>&nbsp;</p>\n<p>Achalasia cardia occurs due to the&nbsp;<strong>loss of inhibitory ganglion cells</strong>&nbsp;in the&nbsp;<strong>myenteric plexus</strong>&nbsp;of GIT. During swallowing, the food bolus normally triggers a&nbsp;<strong>primary peristaltic wave</strong>, which is responsible for carrying the bolus to the stomach, accompanied by the <strong>relaxation of the lower esophageal sphincter</strong>&nbsp;<strong>(LES)</strong>&nbsp;to allow esophageal emptying into the stomach.</p>\n<p>Achalasia is characterized by a disruption of this normal process.&nbsp;<strong>Failure of relaxation of the LES</strong>&nbsp;causes an&nbsp;<strong>elevated median integrated relaxation pressure </strong>and a complete <strong>failure of peristalsis</strong>. The esophagus becomes progressively more tortuous, leading to a <strong>megaesophagus</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the investigation and the lesion depicted in the image given below.",
    "choices": [
      {
        "id": 1,
        "text": "Retrograde cystourethrogram with membranous urethra stricture"
      },
      {
        "id": 2,
        "text": "Retrograde cystourethrogram with penile urethral stricture"
      },
      {
        "id": 3,
        "text": "Micturating cystourethrography with bulbar stricture"
      },
      {
        "id": 4,
        "text": "Micturating cystourethrography with prostratic urethra stricture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: left;\"><br />In VCU,&nbsp;after injecting contrast into the bladder using a Foleys catheter,&nbsp;the <strong>posterior urethra </strong>(membranous urethra and prostatic urethra)&nbsp;is visualized during micturition. It is helpful for diagnosing <strong>posterior urethral abnormalities </strong>and&nbsp;<strong>bladder abnormalities. </strong>It is the investigation of choice for <strong>vesicoureteric reflux</strong>&nbsp;(VUR) and <strong>posterior urethral valve</strong>.</p>\n<p style=\"text-align: left;\">&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/32eb798d6bc34d4892cb9c59c28224b0.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3e25e9ceb90c490d861289d850eac22ex608x520.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/08236bd5a4d343518c8760b7cb3d28f3x1080x1400.JPEG"
    ]
  },
  {
    "text": "According to the TNM staging, a patient with lung cancer of  size 2.5 cm is staged as _______",
    "choices": [
      {
        "id": 1,
        "text": "T1b"
      },
      {
        "id": 2,
        "text": "T1c"
      },
      {
        "id": 3,
        "text": "T2a"
      },
      {
        "id": 4,
        "text": "T1a"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">According to TNM staging, a patient with lung carcinoma of size <strong>2.5cm</strong> is staged as <strong>T1c.</strong></p>\n<table class=\"t1\" style=\"height: 1722px; width: 530px;\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 73px;\">\n<td class=\"td1\" style=\"width: 524px; text-align: center; height: 73px;\" colspan=\"2\" valign=\"top\">\n<p class=\"p1\" style=\"text-align: center;\"><strong>TNM staging system of Lung carcinoma</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" colspan=\"2\" valign=\"top\">\n<p class=\"p1\"><strong>T: Primary tumor</strong></p>\n</td>\n</tr>\n<tr style=\"height: 100px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 100px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>x</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 100px;\" valign=\"top\">\n<p class=\"p1\" style=\"text-align: left;\">Primary tumor cannot be assessed or tumor proven by the presence of malignant cells in sputum or bronchial washings but not visualized by imaging or bronchoscopy</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>0</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">No evidence of primary tumor</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>is</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Carcinoma in situ</p>\n</td>\n</tr>\n<tr style=\"height: 100px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 100px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>1</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 100px;\" valign=\"top\">\n<p class=\"p1\" style=\"text-align: left;\">Tumour &le;3 cm in the greatest dimension surrounded by lung or visceral pleura without bronchoscopic evidence of invasion more proximal than the lobar bronchus (i.e. not in the main bronchus)</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>1a(mi)</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>Minimally invasive adenocarcinoma</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>1a</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Tumour <strong>&le;1 cm</strong> in greatest dimension</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>1b</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Tumor&nbsp;<strong>&gt;1 cm but &le;2 cm</strong> in greatest dimension</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>1c</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Tumor&nbsp;&gt;2 cm but<strong> &le;3 cm</strong> in the greatest dimension</p>\n</td>\n</tr>\n<tr style=\"height: 190px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 190px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>2</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 190px;\" valign=\"top\">\n<p class=\"p1\" style=\"text-align: left;\">Tumor &gt;3 cm but <strong>&le;5 cm</strong> or tumor with any of the following features:<br /> &ndash; involves the <strong>main bronchus regardless of distance</strong> from the <strong>carina</strong> but <strong>without</strong> the involvement of the carina<br /> &ndash; invades visceral pleura<br /> &ndash; associated with <strong>atelectasis</strong> or <strong>obstructive pneumonitis</strong> that extends to the <strong>hilar region</strong>, involving part or all of the lung</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>2a</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Tumor <strong>&gt;3 cm but &le;4 cm</strong> in greatest dimension</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>2b</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Tumor <strong>&gt;4 cm but &le;5 cm</strong> in greatest dimension</p>\n</td>\n</tr>\n<tr style=\"height: 136px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 136px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>3</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 136px;\" valign=\"top\">\n<p class=\"p1\">Tumor <strong>&gt;5 cm but &le;7 cm</strong> in greatest dimension or associated with separate tumor nodule(s) in the same lobe as the primary tumor <strong>or</strong> directly invades any of the following structures:</p>\n<p class=\"p1\">chest wall (including the parietal pleura and superior sulcus tumors), phrenic nerve, the parietal pericardium</p>\n</td>\n</tr>\n<tr style=\"height: 136px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 136px;\" valign=\"top\">\n<p class=\"p1\"><strong>T<sub>4</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 136px;\" valign=\"top\">\n<p class=\"p1\">Tumor <strong>&gt;7 cm</strong> in greatest dimension or associated with separate tumor nodule(s) in a different ipsilateral lobe than that of the primary tumor or invades any of the following structures: <strong>diaphragm</strong>, mediastinum, heart, great vessels, trachea, recurrent laryngeal nerve, esophagus, vertebral body, and carina</p>\n</td>\n</tr>\n<tr style=\"height: 53px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 53px;\" colspan=\"2\" valign=\"top\">\n<p class=\"p1\"><strong>N: Lymph node involvement</strong>&nbsp;</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>N<sub>x</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Regional lymph nodes cannot be assessed</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>N<sub>0</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">No regional lymph node metastasis</p>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 82px;\" valign=\"top\">\n<p class=\"p1\"><strong>N<sub>1</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Metastasis in ipsilateral peribronchial and/or ipsilateral hilar lymph nodes and intrapulmonary nodes, including involvement by direct extension</p>\n</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 64px;\" valign=\"top\">\n<p class=\"p1\"><strong>N<sub>2</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 64px;\" valign=\"top\">\n<p class=\"p1\">Metastasis in ipsilateral mediastinal and/or subcarinal lymph node(s)</p>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 82px;\" valign=\"top\">\n<p class=\"p1\"><strong>N<sub>3</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Metastasis in contralateral mediastinal, contralateral hilar, ipsilateral or contralateral scalene, or supraclavicular lymph node(s)</p>\n</td>\n</tr>\n<tr style=\"height: 47.5903px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 47.5903px;\" colspan=\"2\" valign=\"top\">\n<p class=\"p1\"><strong>M: Distant metastasis</strong></p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>M<sub>0</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">No distant metastasis</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>M<sub>1</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Distant metastasis present</p>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 82px;\" valign=\"top\">\n<p class=\"p1\"><strong>M<sub>1a</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Separate tumor nodule(s) in a contralateral lobe; tumor with pleural or pericardial nodule(s) or malignant pleural or pericardial effusion</p>\n</td>\n</tr>\n<tr style=\"height: 46px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 46px;\" valign=\"top\">\n<p class=\"p1\"><strong>M<sub>1b</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 46px;\" valign=\"top\">\n<p class=\"p1\">Single extrathoracic metastasis</p>\n</td>\n</tr>\n<tr style=\"height: 64px;\">\n<td class=\"td1\" style=\"width: 141.128px; text-align: center; height: 64px;\" valign=\"top\">\n<p class=\"p1\"><strong>M<sub>1c</sub></strong></p>\n</td>\n<td class=\"td1\" style=\"width: 382.872px; text-align: left; height: 64px;\" valign=\"top\">\n<p class=\"p1\">Multiple extrathoracic metastases in one or more organs</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Stage <strong>T<sub>1-3</sub>/N<sub>0-1</sub>/M<sub>0</sub></strong> are amenable to <strong>resection.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following should be the treatment of choice for renal cell carcinoma with tumor less than 4 cm in size?",
    "choices": [
      {
        "id": 1,
        "text": "Partial nephrectomy"
      },
      {
        "id": 2,
        "text": "Partial nephrectomy + neoadjuvant chemotherapy"
      },
      {
        "id": 3,
        "text": "Radical nephrectomy"
      },
      {
        "id": 4,
        "text": "Radical nephrectomy + postoperative radiotherapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Partial<strong> nephrectomy</strong>&nbsp;(also known as <strong>nephron-sparing surgery</strong>) is the treatment of choice for tumors &lt;4 cm.</p>\n<p>Indications for partial nephrectomy:</p>\n<ul>\n<li><strong>Tumors &lt; 4cm</strong></li>\n<li><strong>Well-selected tumors between 4-7 cm</strong></li>\n<li><strong>Bilateral tumors</strong></li>\n<li><strong>Tumor in solitary kidneys</strong></li>\n<li>Patients with <strong>pre-existing renal dysfunction</strong>.</li>\n</ul>\n<p>Recently, partial nephrectomy is also increasingly being performed for <strong>stage T1b</strong> tumors.&nbsp;</p>\n<p>Treatment of renal cell carcinoma:&nbsp;</p>\n<p>RCC is a <strong>radio </strong>and <strong>chemoresistant</strong> tumor.</p>\n<table style=\"border-collapse: collapse; width: 80.853%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 12.0225%; text-align: center;\">Staging&nbsp;</td>\n<td style=\"width: 43.3674%; text-align: center;\">Description&nbsp;</td>\n<td style=\"width: 44.6101%; text-align: center;\">Management&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 12.0225%;\">Stage 1&nbsp;</td>\n<td style=\"width: 43.3674%;\">Tumor &lt;7 cm, confined to the kidney</td>\n<td style=\"width: 44.6101%;\">Partial nephrectomy&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 12.0225%;\">Stage 2&nbsp;</td>\n<td style=\"width: 43.3674%;\">Tumor &gt;7 cm, confined to the kidney</td>\n<td style=\"width: 44.6101%;\">Radical nephrectomy&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 12.0225%;\">Stage 3&nbsp;</td>\n<td style=\"width: 43.3674%;\">Tumor extends into the major veins or adrenal gland with intact Gerota&rsquo;s fascia or regional lymph nodes involved.&nbsp;</td>\n<td style=\"width: 44.6101%;\">Radical nephrectomy&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 12.0225%;\">Stage 4&nbsp;</td>\n<td style=\"width: 43.3674%;\">Tumor invades beyond Gerota fascia (including contiguous extension into the ipsilateral adrenal gland)&nbsp;</td>\n<td style=\"width: 44.6101%;\">\n<ul>\n<li>Debulking surgery</li>\n<li>mTOR inhibitors such as everolimus, sirolimus</li>\n<li>Tyrosine kinase inhibitors: sunitinib, sorafenib</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Radical nephrectomy</strong>&nbsp;consists of the removal of the&nbsp;<strong>kidney, perirenal fat, adrenal gland, and regional lymph nodes.&nbsp;</strong>The adrenal gland is&nbsp;<strong>no longer removed</strong> except in cases of obvious tumor involvement. Lymphadenectomy is indicated only in high-risk patients with large primary tumors and enlarged lymph nodes.</p>\n<p><strong>Cryoablation</strong>&nbsp;is indicated in the&nbsp;<strong>T1a</strong>&nbsp;stage of RCC if surgery cannot be performed. It is also indicated in&nbsp;<strong>advanced/metastatic</strong>&nbsp;tumors.&nbsp;</p>\n<p>Note: Sunitinib and sorafenib are also used in GIST and hepatocellular carcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 38-year-old man was brought to the emergency department after suffering a stab injury to the lower chest. On presentation, he had bradycardia and hypotension which did not improve despite IV fluid administration. Chest radiography showed clear lung fields. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "eFAST"
      },
      {
        "id": 2,
        "text": "Tube thoracostomy"
      },
      {
        "id": 3,
        "text": "CECT chest"
      },
      {
        "id": 4,
        "text": "CECT abdomen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of a patient with a stab injury and hypotension not responding to IV fluids indicates <strong>persistent hypotension</strong> due to <strong>ongoing hemorrhage</strong> and the next step in the management is to perform an <strong>eFAST.</strong></p>\n<p><strong>Cardiogenic shock </strong>or <strong>hemorrhagic shock</strong> are the most likely causes of persistent hypotension in a trauma patient. Ultrasound evaluation using eFAST to look for pericardium, pleural cavities, and abdomen in combination with plain radiographs of the chest and pelvis will usually identify the source of the bleed.\u00a0</p>\n<p>In patients with persistent hypotension due to blunt trauma, the pelvis should be <strong>wrapped in a sheet</strong> for <strong>stabilization</strong> until radiography can be done.\u00a0</p>\n<p>Evaluation of <strong>CVP</strong> or <strong>ultrasound of the IVC</strong> may further assist in <strong>distinguishing</strong> between cardiogenic and hypovolemic shock.</p>\n<p>It is mostly fatal if not controlled, and requires immediate management. Blood and plasma transfusions are provided in a ratio of <strong>2:1</strong>. Patients with persistent hypotension requiring surgical intervention include:</p>\n<ul>\n<li>Blunt trauma and massive hemothorax</li>\n<li>Penetrating trauma</li>\n<li>Hemoperitoneum</li>\n<li>Gunshot injuries to the chest or abdomen</li>\n<li>Penetrating weapon remaining in place.</li>\n</ul>\n<p>Other options:\u00a0</p>\n<p>Options C and D: CECT can be done only when the patient is hemodynamically stable.\u00a0</p>\n<p>Option B: Tube thoracostomy has no role in this patient's management since the X-ray shows clear lung fields.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man was brought to the emergency department after he fell into a manhole and injured his perineum. He gets an urge to micturate but is unable to urinate. On examination, blood was seen at the tip of the urethra, and swelling of the penis and scrotum was seen. What is the site of injury?",
    "choices": [
      {
        "id": 1,
        "text": "Membranous urethra rupture"
      },
      {
        "id": 2,
        "text": "Bulbar urethra injury"
      },
      {
        "id": 3,
        "text": "Prostatic urethra injury"
      },
      {
        "id": 4,
        "text": "Urinary bladder rupture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with a history of a <strong>blow to the perineum</strong>,<strong> blood at the tip of the meatus</strong>,&nbsp;<strong>swelling of the penis and scrotum</strong> is suggestive of an injury to the <strong>bulbar urethra.</strong></p>\n<p>Urethral injuries can be classified into:</p>\n<table style=\"height: 563px; width: 638px;\">\n<tbody>\n<tr style=\"height: 43px;\">\n<td style=\"width: 128.844px; height: 43px;\">&nbsp;Type</td>\n<td style=\"width: 251.156px; height: 43px;\"><strong>Proximal urethral injury</strong></td>\n<td style=\"width: 235px; height: 43px;\"><strong>Distal urethral injury</strong></td>\n</tr>\n<tr style=\"height: 82px;\">\n<td style=\"width: 128.844px; height: 82px;\">Site of injury</td>\n<td style=\"width: 251.156px; height: 82px;\">\n<ul>\n<li>Prostatic urethra</li>\n<li>Membranous urethra</li>\n</ul>\n</td>\n<td style=\"width: 235px; height: 82px;\">\n<ul>\n<li>Bulbar urethra</li>\n<li>Penile urethra</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 168px;\">\n<td style=\"width: 128.844px; height: 168px;\">Mechanism</td>\n<td style=\"width: 251.156px; height: 168px;\">Secondary to <strong>pelvic fracture</strong></td>\n<td style=\"width: 235px; height: 168px;\">\n<p>Occurs due to a blow to the perineum by:</p>\n<ul>\n<li><strong>Straddle injury</strong></li>\n<li><strong>Loose manhole covering</strong></li>\n<li>Gymnasium accidents</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 244px;\">\n<td style=\"width: 128.844px; height: 244px;\">Clinical features</td>\n<td style=\"width: 251.156px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>High-riding prostate on digital rectal examination (<strong>Vermooten sign</strong>)</li>\n<li>Deep perineal hematoma</li>\n</ul>\n</td>\n<td style=\"width: 235px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>Perineal hematoma (<strong>b</strong><strong>utterfly hematoma</strong>)</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p><br />Note: Urinary bladder rupture occurs due to an injury to the <strong>suprapubic</strong> region.&nbsp;<strong>Extraperitoneal</strong> bladder rupture is more common and associated with<strong> pelvic fracture</strong>. <strong>Intraperitoneal</strong> bladder rupture is caused by a blow or a fall on a <strong>distended bladder</strong>. It manifests as sudden severe <strong>pain in the hypogastrium</strong> and <strong>syncope</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '232 Surgery Neet 2020';
        let hierarchy = ["Marrow", "PYQs", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>