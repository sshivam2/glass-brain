<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 035 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The aortic hiatus transmits _______",
    "choices": [
      {
        "id": 1,
        "text": "Left gastric vein and thoracic duct"
      },
      {
        "id": 2,
        "text": "Right vagus nerve and thoracic duct"
      },
      {
        "id": 3,
        "text": "Azygous vein and thoracic duct"
      },
      {
        "id": 4,
        "text": "Left vagus nerve and thoracic duct"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The aortic hiatus transmits the azygous vein and the thoracic duct.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Efferent from cerebellar cortex is through which cell:",
    "choices": [
      {
        "id": 1,
        "text": "Purkinje"
      },
      {
        "id": 2,
        "text": "Bipolar"
      },
      {
        "id": 3,
        "text": "Granule"
      },
      {
        "id": 4,
        "text": "Golgi"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Purkinje cells</strong> are the <strong>only output neurons </strong>(efferent neurons) from the cerebellar cortex.</p>\n<p>The Purkinje cells are the largest neurons in the cerebellum.&nbsp;Their axons, which are the only output from the cerebellar cortex, <strong>project</strong> to the <strong>deep</strong> cerebellar <strong>nuclei</strong>, especially the dentate nucleus, where they form <strong>inhibitory synapses</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following forms complex I of the electron transport chain?",
    "choices": [
      {
        "id": 1,
        "text": "Q-cytochrome c oxidoreductase"
      },
      {
        "id": 2,
        "text": "Succinate-Q reductase"
      },
      {
        "id": 3,
        "text": "NADH-Q oxidoreductase"
      },
      {
        "id": 4,
        "text": "Cytochrome c oxidase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Complex I of the electron transport chain (ETC) is&nbsp;<strong>NADH-Q oxidoreductase.</strong></p>\n<p>The ETC constitutes 4 enzyme complexes:</p>\n<ul>\n<li><strong>Complex I: NADH-Q oxidoreductase</strong></li>\n<li>Complex II: Succinate-Q reductase</li>\n<li>Complex III: Q-cytochrome c oxidoreductase</li>\n<li>Complex IV: cytochrome c oxidase</li>\n</ul>\n<p>Components of complex I: <strong>FMN</strong> and <strong>Fe-S complex&nbsp;</strong></p>\n<p><strong>Mechanism:</strong> NADH-Q oxidoreductase catalyzes the transfer of electrons, from NADH to coenzyme Q, along with the transfer of <strong>four H+</strong> across the membrane.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a myeloid marker?",
    "choices": [
      {
        "id": 1,
        "text": "CD64"
      },
      {
        "id": 2,
        "text": "CD3"
      },
      {
        "id": 3,
        "text": "CD11b"
      },
      {
        "id": 4,
        "text": "CD117"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>CD3</strong> is not a myeloid marker. It is a <strong>T-cell lymphoid marker</strong>.</p>\n<p>Cell markers:</p>\n<ul>\n<li><strong>B-cell</strong>:&nbsp;CD10, CD19, CD20, CD22, CD23, CD24, CD79b, CD103, Pax-5, kappa, lambda, CD200, cytoplasmic kappa, cytoplasmic lambda</li>\n<li><strong>T- cell</strong>:&nbsp;CD1, CD2, CD3, CD4, CD5, CD6,CD7, CD8, TCR apha-beta, TCR gamma-delta, cytoplasmic CD3</li>\n<li><strong>Myeloid</strong>:&nbsp;CD11b, CD13, CD14, CD15, CD33, CD64, CD 117, myeloperoxidase</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old male presented with high-grade fever, and purpuric rash as shown in the image below. CSF sample showed gram-negative diplococci. Which of the following is the most likely aetiology?",
    "choices": [
      {
        "id": 1,
        "text": "Neisseria meningitidis"
      },
      {
        "id": 2,
        "text": "Pseudomonas aeruginosa"
      },
      {
        "id": 3,
        "text": "Streptococcus pneumoniae"
      },
      {
        "id": 4,
        "text": "E.coli"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows a <strong>purpuric rash</strong> seen in meningococcemia caused by <strong>Neisseria meningitidis,</strong> which are gram-negative diplococci.&nbsp;</p>\n<p>Pathogenesis &amp; clinical features:</p>\n<ul>\n<li>The organism enters the body through the nasopharynx. From nasopharynx, they enter the bloodstream producing bacteremia, and the symptoms may resemble upper respiratory tract infection.</li>\n<li>Fulminant meningococcemia is the severe form, where the patient presents with high-grade fever and <strong>hemorrhagic</strong>&nbsp;<strong>rash.</strong> There is thrombosis of several small blood vessels in various organs with perivascular infiltration and <strong>petechial haemorrhages.&nbsp;</strong></li>\n<li>Some patients with fulminant meningococcemia may also develop disseminated intravascular coagulation, and circulatory collapse,&nbsp;a condition known as&nbsp;Waterhouse&ndash;Friderichsen syndrome.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b663de1f7281442b8af85e31be7af046.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which among the following is a highly emetogenic anticancer drug?",
    "choices": [
      {
        "id": 1,
        "text": "Paclitaxel"
      },
      {
        "id": 2,
        "text": "Vincristine"
      },
      {
        "id": 3,
        "text": "Cisplatin"
      },
      {
        "id": 4,
        "text": "5-Fluorouracil"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cisplatin</strong> is a highly emetogenic anticancer drug.&nbsp;Cisplatin causes marked nausea and vomiting in almost all cases and is usually administered along with anti-emetic regimens.</p>\n<p>This can usually be controlled with 5HT3 receptor antagonists, neurokinin (NK1) receptor antagonists (e.g., aprepitant), and high-dose corticosteroids.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is a Molotov cocktail?",
    "choices": [
      {
        "id": 1,
        "text": "Alcoholic poison"
      },
      {
        "id": 2,
        "text": "Incendiary bomb"
      },
      {
        "id": 3,
        "text": "Acid bomb"
      },
      {
        "id": 4,
        "text": "Rifled firearm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Molotov cocktail is an <strong>incendiary</strong> bomb&nbsp;that is thrown by hand.</p>\n<p>In&nbsp;this crude type of bomb, a bottle is filled with gasoline and a rag to serve as a wick, the wick is lit and thrown at the target.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96602972deae46298171eb171302fdc7x376x205.PNG"
    ]
  },
  {
    "text": "A patient post-tonsillectomy in the recovery room starts bleeding from the operative site. On examination, blood clots are seen. What will be your immediate management?",
    "choices": [
      {
        "id": 1,
        "text": "Shift to OT, remove the clots, and cauterize/ligate the vessel"
      },
      {
        "id": 2,
        "text": "Shift to OT, start IV antibiotics, and pack the tonsillar fossa"
      },
      {
        "id": 3,
        "text": "Give anticoagulants, repeated gargling, and wait for 24 hours"
      },
      {
        "id": 4,
        "text": "Do blood transfusion and wait and watch"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical picture is suggestive of <strong>reactionary hemorrhage</strong> post-tonsillectomy and the immediate management is to<strong> shift the patient to OT, remove the clots</strong>, and <strong>cauterize/ligate the bleeding vessel.</strong></p>\n<p><strong>Hemorrhage </strong>is a<strong> common&nbsp;complication </strong>of tonsillectomy. It can be<strong> primary</strong>, <strong>reactionary</strong>, or&nbsp;<strong>secondary:</strong></p>\n<p><strong>Primary hemorrhage </strong>occurs at the time of operation. It can be controlled by pressure, ligation, or electrocoagulation of the bleeding vessels.</p>\n<p><strong>Reactionary hemorrhage</strong> occurs within&nbsp;<strong>24 hours.</strong> It may be due to&nbsp;<strong>dislodgement of the clot, slippage of ligature,</strong> or <strong>blood pressure returning to normal</strong>. It is managed by&nbsp;<strong>removal of clot and application of pressure or vasoconstrictor.</strong>&nbsp;<strong>Ligation</strong> or <strong>electrocoagulation</strong> of the bleeding vessels is done under anesthesia if the above measures fail.</p>\n<p><strong>Secondary hemorrhage </strong>is usually seen between the <strong>5<sup>th</sup></strong> to <strong>10<sup>th</sup></strong> <strong>postoperative day</strong>. It is due to sepsis and premature separation of the membrane. Removal of the clot, topical application of dilute adrenaline or hydrogen peroxide with pressure usually suffice. <strong>IV antibiotics</strong>&nbsp;are given and the bleeding vessel is&nbsp;electrocoagulated&nbsp;or&nbsp;ligated if bleeding continues.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A contact lens user presents with the following clinical picture. He had watering, redness, and foreign body sensation in the eye for the past 2 months. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute trachoma"
      },
      {
        "id": 2,
        "text": "Follicular conjunctivitis"
      },
      {
        "id": 3,
        "text": "Giant papillary conjunctivitis"
      },
      {
        "id": 4,
        "text": "Spring catarrh"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical history of watering, redness, foreign body sensation in a <strong>contact lens</strong> user, along with the image showing <strong>giant papillae</strong> in the conjunctiva suggests a probable diagnosis of <strong>giant papillary conjunctivitis.</strong></p>\n<p>Giant papillary conjunctivitis is a severe form of mechanically induced papillary conjunctivitis. It is most commonly associated with <strong>contact lens</strong> wear. It can also be associated with ocular prostheses, exposed sutures, and scleral buckles.</p>\n<p>The patients usually present with redness, foreign body sensation, increased mucus production, itching, blurring, and loss of contact lens tolerance. On examination, <strong>giant papillae</strong> are seen on the upper tarsal conjunctiva with hyperemia. Focal apical ulceration and whitish scarring may develop on larger papillae.</p>\n<p>Papillae are reddish, flat-topped raised areas that give a red and velvety appearance to the tarsal conjunctiva These are the hyperplasia of the normal vascular system with glomerulus-like bunches of capillaries growing into the epithelium.</p>\n<p>The image below shows papillae in the tarsal conjunctiva.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2c2c7500782c41e7ad179292b219a9da.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc03bbaf353e4eea9137213ca7b6d5d5x512x321.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d8aa2fb7c3264b74b65d85e59738f08ax504x348.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8dad642ec03b4eb2b7c5fe33ab765426x506x364.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6522a34c414c4722a5caff2c833d1e30x512x314.PNG"
    ]
  },
  {
    "text": "Lung malignancy is most commonly associated with?",
    "choices": [
      {
        "id": 1,
        "text": "Asbestosis"
      },
      {
        "id": 2,
        "text": "Silicosis"
      },
      {
        "id": 3,
        "text": "Baggassosis"
      },
      {
        "id": 4,
        "text": "Byssinossis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Asbestosis</strong> is most commonly associated with <strong>Mesotheliomas,&nbsp;</strong>&nbsp;pleural malignancy.&nbsp;</p>\n<p>Asbestos-related diseases include:</p>\n<ul>\n<li>Localized fibrous plaques or diffuse pleural fibrosis</li>\n<li>Pleural effusion</li>\n<li>Parenchymal interstitial fibrosis (asbestosis)</li>\n<li>Lung carcinoma</li>\n<li><strong>Mesotheliomas</strong></li>\n<li>Laryngeal, ovarian and colon carcinomas</li>\n</ul>\n<p><strong>Asbestosis:</strong></p>\n<ul>\n<li>Asbestosis is a type of pneumoconiosis that occurs after 5-10 years of exposure to asbestos. However, once established, it progresses even in the further removal of the worker from its contact. Asbestosis affects the&nbsp;<strong>basal part</strong>&nbsp;of the lung causing&nbsp;<strong>diffuse peribronchial fibrosis.</strong></li>\n<li>Asbestos is of 2 types i.e&nbsp;<strong>Serpentine/Chrysolite</strong>&nbsp;variety and&nbsp;<strong>Amphibole</strong>&nbsp;type</li>\n<li>Amphibole type has the following varieties:\n<ul>\n<li><strong>Crocidolite(blue)</strong></li>\n<li><strong>Amosite(brown)</strong></li>\n<li><strong>Anthrophyllite(white)</strong></li>\n</ul>\n</li>\n<li>Sputum shows&nbsp;<strong>asbestos body,</strong>&nbsp;which are asbestos fibres coated with fibrin.</li>\n<li>They present with cough and exertional dyspnoea and predominantly affects the lower lobes of the lung, in contrast to other forms of pneumoconiosis, which affect the upper lobes.</li>\n<li>Pulmonary function testing in asbestosis typically shows a&nbsp;<strong data-stringify-type=\"bold\">restrictive pattern</strong>&nbsp;with a decrease in both lung volumes and diffusing capacity.</li>\n<li>X-ray shows peripheral reticular opacities predominantly in the <strong>lower zones</strong>. HRCT shows subpleural fibrotic lines, irregular opacities, traction bronchiectasis and honeycombing.&nbsp;Lung parenchymal involvement occurs after years of exposure (at least 10 years).</li>\n<li>The complications that can occur are\n<ul>\n<li>Pulmonary fibrosis&nbsp;</li>\n<li>Carcinoma of the lung&nbsp;</li>\n<li>Malignancy of the Gastrointestinal tract</li>\n<li><strong>Mesothelioma&nbsp;</strong>of the pleura</li>\n</ul>\n</li>\n</ul>\n<p>Preventive measures:</p>\n<div class=\"page\" title=\"Page 876\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Using a safer type of Asbestos&nbsp;<strong>(chrysolite and amosite</strong>)</li>\n<li>Substituting other insulants like glass fibre, mineral wool, calcium silicate, plastic foams etc</li>\n<li>Dust control</li>\n<li>Periodic examination of workers</li>\n<li>Continuing research</li>\n</ul>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are part of a rural health camp organized under Project Axshya. Which of the following diseases does it aim to control?",
    "choices": [
      {
        "id": 1,
        "text": "Diabetes"
      },
      {
        "id": 2,
        "text": "Kala azar"
      },
      {
        "id": 3,
        "text": "Tuberculosis"
      },
      {
        "id": 4,
        "text": "Zika Virus disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Project <strong>Axshya</strong> was launched in 2010 to control <strong>TB</strong>. Axshya means<strong>&nbsp;free from TB</strong>&nbsp;which is the ultimate goal of the project and the National TB Elimination Programme.</p>\n<p>Project Axshya is being implemented by the International Union Against Tuberculosis and Lung Disease (known simply as The Union). The project works to improve access to quality TB care and control through a partnership between the government and civil society.</p>\n<p>The guiding principles of project Axshya are:</p>\n<ul>\n<li>Universal access to quality TB services</li>\n<li>Community participation in TB care and control</li>\n<li>Sustainable interventions and equitable distribution of project benefits with social and gender sensitivity</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following diseases are associated with rodents except:",
    "choices": [
      {
        "id": 1,
        "text": "Leptospirosis"
      },
      {
        "id": 2,
        "text": "Rat bite fever"
      },
      {
        "id": 3,
        "text": "Tularemia"
      },
      {
        "id": 4,
        "text": "Oriental sore"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Diseases related to rodents:\n<ul>\n<li><strong>Bacterial</strong>: Plague, tularemia, salmonellosis</li>\n<li><strong>Viral</strong>: Lassa fever, encephalitis, hemorrhagic fevers</li>\n<li><strong>Rickettsial</strong>: Scrub typhus, murine typhus, rickettsial pox</li>\n<li><strong>Parasitic</strong>: Hymenolepis diminuta, leishmaniasis, amoebiasis, trichinosis, Chagas disease</li>\n<li><strong>Others</strong>: Rat bite fever, leptospirosis, histoplasmosis, ring worm</li>\n</ul>\n</li>\n<li>Oriental sore- caused by Leishmania and transmitted by the phlebotomine sand fly.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old chronic alcoholic is brought to the hospital due to fever and abdominal pain. He was diagnosed to have a cirrhotic liver 2 years back. The ascitic fluid shows a neutrophil count of 360 cell/ microliter. Which of the following is the drug of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Cefotaxime"
      },
      {
        "id": 2,
        "text": "Metronidazole"
      },
      {
        "id": 3,
        "text": "Amoxicillin"
      },
      {
        "id": 4,
        "text": "Vancomycin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cefotaxime</strong> is the drug of choice in this patient.</p>\n<p>This patient&rsquo;s clinical features are suggestive of <strong>spontaneous bacterial peritonitis (SBP).</strong></p>\n<p>SBP is a common and severe complication of ascites characterized by spontaneous infection of the ascitic fluid without an intraabdominal source.</p>\n<p>The most common organisms are Escherichia coli and other gut bacteria.</p>\n<p>The diagnosis of SBP is made when the fluid sample has an absolute neutrophil count &gt;250/&mu;L.</p>\n<p>The first line of empiric treatment is with a third-generation cephalosporin because the majority of cases are caused by aerobic gram-negative microbes such as E. coli, with cefotaxime being the most commonly used antibiotic.</p>\n<p>In patients who have had an episode(s) of SBP and recovered, once-weekly administration of antibiotics is used as prophylaxis for recurrent SBP.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old patient presented with miosis, ptosis, and anhydrosis on the left side with difficulty in walking, dysphagia, and dysarthria. On examination, he was found to have a loss of pain and temperature sensation on the right side of the body and the left side of the face. What is the most probable diagnosis in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Right sided Wallenberg syndrome"
      },
      {
        "id": 2,
        "text": "Right sided Dejerine syndrome"
      },
      {
        "id": 3,
        "text": "Left sided Wallenberg\u2019s syndrome"
      },
      {
        "id": 4,
        "text": "Left sided Dejerine syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most probable diagnosis in this patient is left-sided Wallenberg&rsquo;s syndrome (lateral medullary syndrome).</p>\n<p>In the given case scenario, there is <strong>contralateral hemisensory loss of pain and temperature</strong>, with <strong>ipsilateral Horner&rsquo;s syndrome and sensory loss on face </strong>associated with <strong>dysphagia </strong>and <strong>dysarthria </strong>which are characteristic of this condition.</p>\n<p>Note:<strong>&nbsp;Lateral medullary (Wallenberg&rsquo;s) syndrome </strong>is due to<strong>&nbsp;</strong>occlusion of the vertebral, posterior inferior cerebellar, superior, middle, or inferior lateral medullary arteries.</p>\n<p>Structures affected on the <strong>ipsilateral</strong> side:</p>\n<ul>\n<li>Fifth nerve nucleus and descending tract: Pain, numbness, impaired sensation over the face</li>\n<li>Cerebellar fibers, spinocerebellar tract: Ataxia</li>\n<li>Vestibular nucleus: Nystagmus, diplopia, oscillopsia, vertigo, nausea, vomiting</li>\n<li>Descending sympathetic tract: Horner&rsquo;s syndrome (miosis, ptosis, decreased sweating)</li>\n<li>Ninth and Tenth nerve fibers: Dysphagia, hoarseness, paralysis of the palate, paralysis of vocal cord, diminished gag reflex.</li>\n</ul>\n<p>Structures affected on the <strong>contralateral</strong> side:</p>\n<ul>\n<li>Spinothalamic tract: Impaired pain and thermal sense over half the body, sometimes face</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old male patient presented with backache. Urine examination revealed nephrotic range proteinuria with Bence-Jones proteins. Laboratory reports showed hypercalcemia.  A renal biopsy specimen stained by congo red seen under polarised light shows the following appearance. Which of the major fibril protein is accumulated in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Amyloid\u00a0\u03b22\u00a0microglobulin"
      },
      {
        "id": 2,
        "text": "Amyloid associated protein"
      },
      {
        "id": 3,
        "text": "Amyloid light chain"
      },
      {
        "id": 4,
        "text": "Amyloid transthyretin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The patient is suffering from <strong>multiple myeloma</strong>. The major fibril protein accumulated in this patient is <strong>AL</strong> (amyloid light chain)<strong> protein.</strong></span></p>\n<p><span data-preserver-spaces=\"true\">The above clinical scenario of backache, proteinuria with Bence-Jones protein, hypercalcemia are suggestive of <strong>multiple myeloma</strong>. The image showing&nbsp;a congo-red stained&nbsp;biopsy specimen with <strong>apple-green birefringence</strong> under polarized microscopy is indicative of <strong>amyloid</strong> accumulation in the organ. In multiple myeloma, the amyloid is made from the <strong>light chain</strong> of immunoglobulins (chiefly &lambda; type).&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Amyloidosis refers to&nbsp;<strong>extracellular </strong>deposits of<strong> fibrillar proteins.&nbsp;</strong>The abnormal fibrils are obtained by the aggregation of misfolded proteins. The fibrillar deposits bind to&nbsp;proteoglycans&nbsp;and&nbsp;glycosaminoglycans, including heparan sulfate and dermatan sulfate, and plasma proteins, notably serum amyloid P component (SAP). Amyloid is an&nbsp;<strong>amorphous, eosinophilic, hyaline, extracellular substance.</strong></span></p>\n<p>Microscopy&nbsp;:</p>\n<p>All types of amyloid deposits are made up of continuous,&nbsp;<strong>nonbranching fibrils&nbsp;</strong>and are demonstrated on electron microscopy. A&nbsp;characteristic <strong>cross-&beta;-pleated sheet</strong> conformation is visualized on X-ray crystallography and infrared spectroscopy. The stain used for amyloid deposits is <strong>congo red staining</strong>. It imparts pink to red color to the amyloid under ordinary light. Under polarised microscopy, congo red-stained amyloid shows&nbsp;<strong>apple-green birefringence.</strong></p>\n<p>Other options:</p>\n<p>Option A-&nbsp;&nbsp;Amyloid&nbsp;&beta;<sub>2</sub><strong>&nbsp;</strong>microglobulin(<strong>A&beta;<sub>2</sub>M)&nbsp;</strong>fibrillar protein is seen in <strong>hemodialysis-associated amyloidosis</strong> in chronic renal failure.</p>\n<p>Option B- Amyloid-associated (<strong>AA</strong>) fibrillar protein is seen in <strong>secondary systemic amyloidosis</strong> and<strong> familial Mediterranean fever.</strong></p>\n<p>Option D- Amyloid transthyretin (<strong>ATTR)</strong>&nbsp;fibrillar protein is seen in the mutated form in <strong>familial amyloidotic polyneuropathies</strong> and in an unmutated form in <strong>systemic senile amyloidosis.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b78a05bd93b84494b23141a17b04b71b.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old male patient was referred to you with features of pituitary adenoma and testicular tumor. While going through his radiological reports, you saw the presence of parathyroid adenoma, and his chromosomal studies show a mutation in the CDKN1B gene. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Multiple endocrine neoplasia  type 4"
      },
      {
        "id": 2,
        "text": "Multiple endocrine neoplasia type 3"
      },
      {
        "id": 3,
        "text": "Multiple endocrine neoplasia type 2A"
      },
      {
        "id": 4,
        "text": "Multiple endocrine neoplasia type 1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical presentation of <strong>pituitary adenoma, parathyroid adenoma, testicular tumor,</strong> and a mutation in the<strong> CDKN1B</strong> gene is suggestive of <strong>multiple endocrine neoplasia\u00a0type 4\u00a0(MEN 4)</strong>.</p>\n<p>MEN 4 is an <strong>autosomal dominant</strong> endocrine tumor syndrome. It occurs due to the germline mutation in the <strong>CDKN1B</strong> gene in<strong> chromosome 12</strong>.</p>\n<p>MEN 4 often presents with parathyroid adenoma, pituitary adenoma, reproductive organ tumors like testicular cancer, or neuroendocrine cervical cancer with adrenal or renal tumors.\u00a0</p>\n<p>The clinical presentation in MEN 4 is almost<strong> similar to MEN1</strong>. The <strong>difference</strong> between MEN1 and MEN4 is in the<strong> germline mutation</strong>, where MEN 1 occurs due to the mutation of the MEN1 gene.</p>\n<p>Multiple endocrine neoplasia (MEN) is a group of autosomal dominant disorders characterized by tumors involving two or more endocrine glands. Depending on the chromosomal location of germline mutation they are divided into <strong>four major forms</strong> as <strong>MEN 1</strong>, MEN 2A, MEN 2B (MEN 3), and MEN 4. MEN 1 is the most common among the four types.\u00a0</p>\n<p>Other Options:</p>\n<p>Option B-\u00a0<strong>MEN 3</strong> is also known as<strong> MEN 2B</strong>. It occurs due to a mutation of the RET gene. It is associated with medullary thyroid carcinoma, pheochromocytoma, <strong>mucosal neuroma</strong>, <strong>marfanoid</strong> features. In contrast with MEN2A, parathyroid hyperplasia is not seen in MEN 2B.</p>\n<p>Option C- <strong>MEN 2A</strong>\u00a0is also known as <strong>Sipple's syndrome</strong>. It occurs due to a mutation of the RET gene. It is associated with medullary carcinoma thyroid, pheochromocytoma, and <strong>parathyroid adenoma</strong>.</p>\n<p>Option D- <strong>MEN 1</strong> is also known as <strong>Wermer's syndrome</strong>. It occurs due to a mutation in the MEN 1 gene. It is associated with\u00a0<strong>parathyroid adenoma, pancreatic tumors,</strong> and<strong> pituitary tumors.\u00a0</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following types of hepatic adenomas is associated with an increased risk of malignant transformation?",
    "choices": [
      {
        "id": 1,
        "text": "Sonic hedgehog activated adenoma"
      },
      {
        "id": 2,
        "text": "Inflammatory type hepatic adenoma"
      },
      {
        "id": 3,
        "text": "HNF1A mutated adenoma"
      },
      {
        "id": 4,
        "text": "Beta-catenin mutated adenoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>&beta;-catenin mutated subtype </strong>of hepatic adenoma is associated with<strong>&nbsp;</strong>an increased risk of <strong>malignant transformation</strong>.</p>\n<p>The 2017 <strong>Bordeaux</strong> molecular-pathologic<strong> classification</strong> of hepatocellular adenomas (HCA) includes six subtypes:</p>\n<ol>\n<li>HNF1A-inactivated HCA&nbsp;</li>\n<li>Inflammatory HCA&nbsp;</li>\n<li>&beta;-catenin exon 3 mutated HCA</li>\n<li>&beta;-catenin exon 7/8 mutated HCA&nbsp;</li>\n<li>Sonic hedgehog activated HCA&nbsp;</li>\n<li>Unclassified HCA</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man was brought to the emergency department after he fell into a manhole and injured his perineum. He gets an urge to micturate but is unable to urinate. On examination, blood was seen at the tip of the urethra, and swelling of the penis and scrotum was seen. What is the site of injury?",
    "choices": [
      {
        "id": 1,
        "text": "Membranous urethra rupture"
      },
      {
        "id": 2,
        "text": "Bulbar urethra injury"
      },
      {
        "id": 3,
        "text": "Prostatic urethra injury"
      },
      {
        "id": 4,
        "text": "Urinary bladder rupture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with a history of a <strong>blow to the perineum</strong>,<strong> blood at the tip of the meatus</strong>,&nbsp;<strong>swelling of the penis and scrotum</strong> is suggestive of an injury to the <strong>bulbar urethra.</strong></p>\n<p>Urethral injuries can be classified into:</p>\n<table style=\"height: 216px; width: 514.516px;\">\n<tbody>\n<tr style=\"height: 43px;\">\n<td style=\"width: 223px; height: 43px;\">&nbsp;Type</td>\n<td style=\"width: 223px; height: 43px;\"><strong>Proximal urethral injury</strong></td>\n<td style=\"width: 275.516px; height: 43px;\"><strong>Distal urethral injury</strong></td>\n</tr>\n<tr style=\"height: 82px;\">\n<td style=\"width: 223px; height: 82px;\">Site of injury</td>\n<td style=\"width: 223px; height: 82px;\">\n<ul>\n<li>Prostatic urethra</li>\n<li>Membranous urethra</li>\n</ul>\n</td>\n<td style=\"width: 275.516px; height: 82px;\">\n<ul>\n<li>Bulbar urethra</li>\n<li>Penile urethra</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 168px;\">\n<td style=\"width: 223px; height: 168px;\">Mechanism</td>\n<td style=\"width: 223px; height: 168px;\">Secondary to <strong>pelvic fracture</strong></td>\n<td style=\"width: 275.516px; height: 168px;\">\n<p>Occurs due to a blow to the perineum by:</p>\n<ul>\n<li><strong>Straddle injury</strong></li>\n<li><strong>Loose manhole covering</strong></li>\n<li>Gymnasium accidents</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 244px;\">\n<td style=\"width: 223px; height: 244px;\">Clinical features</td>\n<td style=\"width: 223px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>High-riding prostate on digital rectal examination (<strong>Vermooten sign</strong>)</li>\n<li>Deep perineal hematoma</li>\n</ul>\n</td>\n<td style=\"width: 275.516px; height: 244px;\">\n<ul>\n<li>Urinary retention</li>\n<li>Blood at the urethral meatus</li>\n<li>Perineal hematoma (<strong>Butterfly hematoma</strong>)</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p><br />Note: Urinary bladder rupture occurs due to an injury to the <strong>suprapubic</strong> region.&nbsp;<strong>Extraperitoneal</strong> bladder rupture is more common and associated with<strong> pelvic fracture</strong>. <strong>Intraperitoneal</strong> bladder rupture is caused by a blow or a fall on the <strong>distended bladder</strong>. It manifests as sudden severe <strong>pain in the hypogastrium</strong> and <strong>syncope</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old male sustains thoracic spinal cord injury in a road accident and develops neurogenic shock. \nIn this patient with neurogenic shock, hypotension will be associated with-",
    "choices": [
      {
        "id": 1,
        "text": "Tachycardia"
      },
      {
        "id": 2,
        "text": "Cold extremities"
      },
      {
        "id": 3,
        "text": "Increased peripheral vascular resistance"
      },
      {
        "id": 4,
        "text": "Bradycardia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Neurogenic shock is associated with <strong>bradycardia</strong> and not tachycardia.</p>\n<p>Features of Neurogenic shock:</p>\n<ul>\n<li>Neurogenic shock is usually secondary to spinal cord injuries due to vertebral body fractures of the cervical or high thoracic region that disrupts the sympathetic outflow.&nbsp;</li>\n<li><strong>Loss of vasoconstrictor </strong>impulses results in <strong>decreased peripheral resistance, decreased venous return</strong>&nbsp;and <strong>decreased cardiac output</strong>, resulting in shock.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6a9ff27aa7404e4b9caaa85970ed9acfx1280x1819.JPEG"
    ]
  },
  {
    "text": "In a case of retrocecal appendicitis, which movement aggravates pain?",
    "choices": [
      {
        "id": 1,
        "text": "Flexion"
      },
      {
        "id": 2,
        "text": "Hyperextension"
      },
      {
        "id": 3,
        "text": "Medial rotation"
      },
      {
        "id": 4,
        "text": "Lateral rotation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In case of retrocecal appendicitis<strong>, hyperextension of the hip joint can induce abdominal</strong> <strong>pain</strong> due to irritation of the psoas muscle by the inflammed appendix (<strong>psoas sign</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the most carcinogenic gene in ovarian cancer?",
    "choices": [
      {
        "id": 1,
        "text": "BRCA 1"
      },
      {
        "id": 2,
        "text": "BRCA 2"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>BRCA 1 is more carcinogenic than BRCA 2.</p>\n<ul>\n<li>5&ndash;10% of malignant ovarian tumors are genetic.</li>\n<li>BRCA 1 gene is&nbsp;on chromosome 17q.</li>\n<li>BRCA 2 gene is on chromosome 13q.</li>\n<li>BRCA 1 is associated with Hereditary Breast Ovarian Cancer syndrome.</li>\n</ul>\n<p>Note: Hereditary non-polyposis colorectal cancer (HNPCC) is associated with malignancy of colon, ovary, and endometrium.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following hysterosalpingogram indicates",
    "choices": [
      {
        "id": 1,
        "text": "Asherman syndrome"
      },
      {
        "id": 2,
        "text": "Bilateral hydrosalpinges"
      },
      {
        "id": 3,
        "text": "Submucous leiomyoma"
      },
      {
        "id": 4,
        "text": "Normal hysterosalpingogram"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image is of a hysterosalpingogram showing the contrast dye filling an irregulary shaped edometrial cavity often described as \"moth-eaten\" appearance. Hence, it is <strong>Asherman syndrome</strong>.</p>\n<p>The presence of intrauterine adhesions is called Asherman syndrome. Destruction of the basal endometrium prevents endometrial thickening, thus no tissue is produced. <strong>Endometrial damage may follow vigorous curettage in association with PPH, miscarriage, or elective abortion. </strong></p>\n<p>If intrauterine adhesions are suspected:</p>\n<ul>\n<li><strong>Radiological evaluation</strong> of the uterine cavity is performed.</li>\n<li><strong>Hysterosalpingography (HSG)</strong> offers information regarding both uterine cavity and fallopian tube patency.</li>\n<li><strong>Saline infusion sonography</strong> provides an excellent alternative to HSG.</li>\n<li>Definitive diagnosis requires <strong>hysteroscopy</strong> as polyps, leiomyomas, air bubbles and blood clots may masquerade as adhesions.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f2bac47496ff40beab52aae9e2639ed5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5321a787ac49418bae9910b19db29c96x800x308.JPEG"
    ]
  },
  {
    "text": "A patient with suspected tubal pregnancy underwent transvaginal ultrasound which was inconclusive. What is the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Laparotomy"
      },
      {
        "id": 2,
        "text": "Diagnostic laparoscopy"
      },
      {
        "id": 3,
        "text": "Serum \u03b2 hCG levels"
      },
      {
        "id": 4,
        "text": "Methotrexate therapy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario, the next step would be to confirm the tubal ectopic by measuring <strong>serum &beta; hCG</strong>. This can be used to differentiate&nbsp;<strong>tubal ectopic</strong> pregnancy from&nbsp;<strong>missed</strong> <strong>abortion</strong>&nbsp;and early <strong>intrauterine</strong> <strong>pregnancy</strong>.&nbsp;</p>\n<p>If the level is &ge;2000 IU/L, ectopic pregnancy is suspected. If the level is &lt;1500 IU/L, a repeat serum &beta; hCG is taken after 48 hours. If the levels are:</p>\n<ul>\n<li>Doubled - early intrauterine pregnancy</li>\n<li>Decreased - abortion</li>\n<li>Increased but less than doubled value - ectopic pregnancy</li>\n</ul>\n<p><strong>Investigations</strong> for <strong>ectopic</strong> pregnancy:</p>\n<ul>\n<li>Serum&nbsp;&beta; hCG&nbsp;- lower levels compared to normal pregnancy, prolonged doubling time</li>\n<li>Transvaginal ultrasound - empty uterine cavity, fluid in pouch of Douglas, adnexal mass</li>\n<li>Colour Doppler - ring of fire pattern</li>\n<li>Laparoscopy&nbsp;</li>\n<li>Dilatation and curettage - decidua identified without villi</li>\n<li>Serum progesterone&nbsp;</li>\n<li>Culdocentesis&nbsp;</li>\n</ul>\n<p><strong>Diagnostic laparoscopy</strong> may be done when the diagnosis is still uncertain after serial &beta;-hCG monitoring and repeat ultrasonography. In high-risk situations, such as a history of previous ectopic pregnancy, earlier diagnostic laparoscopy is considered.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e6c00cf3cc28489ea7ca07a67245a908x1280x2077.JPEG"
    ]
  },
  {
    "text": "The chromosomal abnormality associated in a neonate with prominent occiput, clenched fist with overlapping fingers, and rocker-bottom feet is most probably _________",
    "choices": [
      {
        "id": 1,
        "text": "Chromosome 8"
      },
      {
        "id": 2,
        "text": "Chromosome 13"
      },
      {
        "id": 3,
        "text": "Chromosome 18"
      },
      {
        "id": 4,
        "text": "Chromosome 21"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Prominent occiput, clenched fist with overlapping fingers, and rocker-bottom feet</strong> are all features of <strong>Edwards syndrome, i.e., Trisomy 18.</strong></p>\n<p><strong>Trisomy 18 - Edwards syndrome:</strong></p>\n<ul>\n<li>Low birth weight</li>\n<li>Closed fists with index finger overlapping the 3rd digit and the 5th digit overlapping the 4th</li>\n<li>Narrow hips with limited abduction</li>\n<li>Short sternum</li>\n<li>Rocker-bottom feet</li>\n<li>Microcephaly</li>\n<li>Prominent occiput</li>\n<li>Micrognathia</li>\n<li>Cardiac and renal malformations</li>\n<li>Intellectual disability</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ef7fa7377d60432ca52c7ab71e15b100x452x566.JPEG"
    ]
  },
  {
    "text": "A patient who had applied plaster to his right leg for a tibial shaft fracture ,now presents with severe pain in the leg. On examination, the distal pulses are absent, on passive stretching the pain increases, and on opening the plaster, the leg appears edematous and numerous blisters are seen. Considering the suspected diagnosis, what would be the most appropriate management in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Fasciotomy"
      },
      {
        "id": 2,
        "text": "Elevation of limb"
      },
      {
        "id": 3,
        "text": "Opening of the plaster is sufficient"
      },
      {
        "id": 4,
        "text": "Closed reduction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario suggests acute compartment syndrome, and it is treated immediately with fasciotomy.</p>\n<p class=\"p1\">The classic features of ischemia in acute compartment syndrome include the <strong>5 Ps</strong>:</p>\n<ul>\n<li class=\"p1\"><strong>Pain:</strong>&nbsp;Pain is the <strong>first symptom</strong> of acute compartment syndrome. Ischemic muscle is highly sensitive to touch. On the passive stretching of the muscles, severe pain can be elicited.&nbsp;</li>\n<li class=\"p1\"><strong>Paresthesia:&nbsp;</strong>Paresthesia and hypoesthesia may be noted due to compression of nerves traversing the affected compartment. They are the first signs of nerve ischemia.</li>\n<li class=\"p1\"><strong>Pallor: </strong>Pallor of the skin may not always be seen. The skin outside the compartment may be normally perfused, as only the intra-compartmental perfusion may be affected.</li>\n<li class=\"p1\"><strong>Paralysis:</strong>&nbsp;Paralysis of muscle groups affected in that compartment is a <strong>late sign</strong>.</li>\n<li class=\"p1\"><strong>Pulselessness:&nbsp;</strong>Usually, the peripheral pulses and&nbsp;capillary return are intact in the early stages, unless there is a major arterial injury. If pulses are absent, arteriography is indicated.&nbsp;</li>\n</ul>\n<p>The diagnosis can be confirmed by measuring the <strong>intra-compartmental pressure</strong>&nbsp;using a split catheter introduced into the compartment. The difference between diastolic pressure and compartment pressure is known as the&nbsp;differential pressure (&Delta;P). A&nbsp;<strong>differential pressure (&Delta;P)</strong> of <strong>less than&nbsp;30 mm Hg</strong> (4.00 kilopascals) is an <strong>indication</strong> for <strong>immediate compartment decompression</strong>.</p>\n<p><strong>Treatment</strong>: The threatened compartment must be promptly decompressed, merely splitting the plaster is utterly useless and the limb must be <strong>nursed flat</strong>, elevating the limb causes further decrease in end capillary pressure and aggravates the muscle ischemia. In the case of compartment syndrome in the leg, <strong>Fasciotomy</strong> means opening all four compartments. Wounds to be left open and<strong> inspected 2 days</strong> later, if tissues are healthy, the wounds can be sutured. If there is muscle necrosis, debridement to be carried out.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 37-year-old man with a history of chronic alcohol use stopped drinking. Three days later, he was brought to the emergency department with disorientation, tremors, hallucinations, and hypertension. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Alcoholic hallucinosis"
      },
      {
        "id": 2,
        "text": "Korsakoff's psychosis"
      },
      {
        "id": 3,
        "text": "Delirium tremens"
      },
      {
        "id": 4,
        "text": "Marchiafava-Bignami disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical features of a chronic alcoholic man brought in with complaints of disorientation, tremors, hallucinations, and hypertension is suggestive of <strong>delirium tremens.</strong></p>\n<p><strong>Delirium tremens</strong> occurs after <strong>2-4 days of abstinence</strong> in a heavy or chronic drinker. It is precipitated by conditions like hepatitis and pancreatitis. It usually resolves in one week. The characteristic <strong>clinical features</strong> include:</p>\n<ul>\n<li>Clouding of consciousness with <strong>disorientation</strong> in time and place</li>\n<li>Distractibility and lack of attention</li>\n<li>Visual, auditory, and/or tactile <strong>hallucinations</strong></li>\n<li><strong>Autonomic disturbance</strong> with tachycardia, fever, hypertension, sweating, and pupillary dilatation</li>\n<li>Psychomotor agitation and ataxia</li>\n<li>Insomnia</li>\n<li>Dehydration with electrolyte imbalance</li>\n</ul>\n<p>Delirium tremens is treated using <strong>benzodiazepines</strong> starting with a higher dosage which is gradually tapered as withdrawal symptoms disappear. In cases of chronic alcohol use, vitamin deficiency (especially thiamine) may be co-existing and hence bolus doses of <strong>thiamine</strong> are given to prevent/treat Wernicke encephalopathy.</p>\n<p>Other options:</p>\n<p><strong><strong>Option A- Alcoholic hallucinosis </strong></strong>is<strong><strong>\u00a0</strong></strong>characterized by the presence of <strong>hallucinations</strong> (usually auditory) during partial or complete abstinence. However, the other symptoms given in the clinical scenario are not seen.</p>\n<p><strong>Option B- Korsakoff\u2019s psychosis:</strong> It is seen n patients with chronic alcohol use usually followed by\u00a0Wernicke\u2019s encephalopathy, together referred to as Wernicke-Korsakoff syndrome. Patients with Korsakoff's psychosis present with memory disturbances, which is not seen in the given case.</p>\n<p><strong>Option C- Marchiafava-Bignami disease</strong> is a rare disorder seen in chronic alcoholics, associated with epilepsy, ataxia, dysarthria, hallucinations, spastic limb paralysis, and deterioration of personality and intellectual functioning.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What ratio of chest compressions to rescue breaths is given during CPR in an adult if 2 rescuers are present?",
    "choices": [
      {
        "id": 1,
        "text": "15:1"
      },
      {
        "id": 2,
        "text": "15:2"
      },
      {
        "id": 3,
        "text": "30:1"
      },
      {
        "id": 4,
        "text": "30:2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>During cardiopulmonary resuscitation of<strong> adults, </strong>the ratio of chest compression to rescue breaths is <strong>30:2 irrespective </strong>of the <strong>number of rescuers.</strong></p>\n<p>In <strong>infants and children</strong>, the ratio is <strong>30:2</strong> for a single rescuer and <strong>15:2</strong> if 2 or more rescuers are present.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions is associated with an increased nighttime itching and lesions that are more during the winter months?",
    "choices": [
      {
        "id": 1,
        "text": "Tinea corporis"
      },
      {
        "id": 2,
        "text": "Scabies"
      },
      {
        "id": 3,
        "text": "Psoriasis"
      },
      {
        "id": 4,
        "text": "Photodermatosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Skin lesions that increase during the winter months and that cause more itching during the nighttime are seen with <strong>scabies</strong>.</p>\n<p><strong>Scabies</strong> is an ectoparasitic skin infection that is transmitted through the means of close <strong>personal contact/fomites</strong>. It is caused by the mite<strong> Sarcoptes scabiei var hominis </strong>or human itch mite. It leads to severe <strong>pruritis, excoriating papules,</strong> and<strong> burrows. </strong>The pruritis typically shows <strong>nocturnal exacerbations.</strong> In adults, the face is often spared. Typical sites include the <strong>finger webs</strong>, the flexor surfaces of the wrists, elbows, axillae, buttocks, and genitalia. The typical lesions of scabies are<strong> burrows</strong>.</p>\n<p>The following techniques can be used to <strong>diagnose scabies</strong>:</p>\n<ul>\n<li><strong>Skin scraping and microscopy</strong> - The material is scraped off with a blunt scalpel and is placed in mineral oil on a microscope slide. The presence of mites, eggs, fragments of eggshells, or scybala (hardened masses of faeces) confirms the diagnosis.</li>\n<li><strong>Dermoscopy</strong> - Useful for detecting burrows and visualizing their contents.\n<ul>\n<li><strong>10x magnification</strong> - mini triangle sign, maturing eggs that show minute heads of maturing mites within the egg.</li>\n<li><strong>40x magnification</strong> - The mite in its burrow resembles a \u2018<strong>jet\u2010with\u2010contrail</strong>\u2019.</li>\n</ul>\n</li>\n<li><strong>Adhesive-tape test</strong> - After firmly applying the adhesive side of the tape onto an appropriate skin lesion of patient, the tape is pulled off and transferred directly onto a slide for microscopy to visualize the mites.</li>\n<li><strong>Skin biopsy.</strong></li>\n</ul>\n<p>Treatment:</p>\n<ul>\n<li>A single overnight application of<strong> 5% permethrin </strong>cream from neck to toe in adults and from head to toe in children is the drug of choice for the treatment of scabies in all ages including infants (at least 2 months old) and pregnant women.</li>\n<li><strong>Topical sulfur applications</strong> can be safely used in infants less than 2 months of age, as well as in breastfeeding and pregnant mothers.</li>\n<li><strong>Topical 1% Lindane cream</strong> is <strong>contraindicated</strong> in children, pregnant ladies, and seizure disorders as it is known to cause neurotoxicity.</li>\n<li>All family members, even if asymptomatic, need to be treated simultaneously for this condition to prevent reinfection.</li>\n<li>Clothing needs to be disinfected simultaneously.</li>\n<li><strong>Ivermectin </strong>and<strong> benzyl benzoate </strong>are <strong>contraindicated</strong> in pregnancy.</li>\n</ul>\n<p>The image below shows a photo of a scabies burrow. The large scaly patch at the left is due to scratching. At the upper right, the scabies mite can be seen at the end of the burrow.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5e191fa28649490bbd89bb50328ba948x1280x1091.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ecea1cbc3b384b039748928647098029x720x894.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3030fd52127b4a82ae22837c44415cddx512x475.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd6482f9395c4db39a4ea9f339be08e9x800x273.JPEG"
    ]
  },
  {
    "text": "Identify the investigation shown below which is the investigation of choice in distal bowel tumours.",
    "choices": [
      {
        "id": 1,
        "text": "Enteroclysis"
      },
      {
        "id": 2,
        "text": "Barium meal"
      },
      {
        "id": 3,
        "text": "Barium meal follow-through"
      },
      {
        "id": 4,
        "text": "Barium enema"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Enteroclysis, </strong>which&nbsp;is the <strong>investigation of choice</strong> in patients with <strong>small bowel tumors.</strong></p>\n<p>Enteroclysis is a <strong>barium study</strong>&nbsp;in which the <strong>contrast </strong>agent is put <strong>directly into the duodenum</strong> through a <strong>nasogastric tube.</strong></p>\n<p>Continued infusion of 500 to 1000 mL of thin barium sulfate and methylcellulose suspension is done and then viewed continuously with the use of either fluoroscopy or radiographs taken at frequent intervals. This technique is a <strong>double-contrast</strong> procedure that allows detailed imaging of the entire small intestine.</p>\n<p>Enteroclysis has a<strong> sensitivity </strong>of over <strong>90%</strong> in the detection of small bowel tumors and is the <strong>investigation of choice</strong>, particularly for<strong> tumors </strong>located in the <strong>distal small bowel.</strong></p>\n<p>Advantages of enteroclysis:</p>\n<ul>\n<li>The contrast is administered at a controlled rate directly in the small bowel, <strong>bypassing the regulatory action</strong> of the <strong>pylorus</strong>.</li>\n<li>The <strong>entire small bowel </strong>is demonstrated in a <strong>distended</strong> state, allowing <strong>better diagnosis</strong>. As a result of the dilatation, the following can be visualized:\n<ul>\n<li>Mild strictures</li>\n<li>Small sinus tracts and fistulas</li>\n<li>Minimal extrinsic compressions</li>\n<li>Skip lesions</li>\n<li>Proximal and distal extent of diffuse diseases.</li>\n</ul>\n</li>\n<li>The examination can be completed in <strong>15&ndash;30 minutes</strong>, thus reducing patient waiting time.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dec6089a80e24fd4929144518fe6c8af.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a natural source of radiation exposure?",
    "choices": [
      {
        "id": 1,
        "text": "Cosmic rays"
      },
      {
        "id": 2,
        "text": "K-40"
      },
      {
        "id": 3,
        "text": "C-14"
      },
      {
        "id": 4,
        "text": "X-rays"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>X-rays</strong>&nbsp;are not a natural source of radiation exposure. They are <strong>artificially produced</strong> by linear accelerators.</p>\n<p><strong>Sources of radiation exposure:</strong></p>\n<p>Natural:</p>\n<ul>\n<li><strong>Cosmic rays</strong></li>\n<li>Environmental - terrestrial and atmospheric</li>\n<li>Radioactive isotopes - of potassium <strong>(K-40)</strong> and carbon <strong>(C-14)</strong></li>\n</ul>\n<p>Man-made:</p>\n<ul>\n<li>Medical and dental - X-rays, radioisotopes</li>\n<li>Occupational exposure</li>\n<li>Nuclear - radioactive fallout</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 035';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>