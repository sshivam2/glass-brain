<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>120 Forensic Medicine Neet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Forensic Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">18</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "During the post mortem examination following finding is seen. What is this indicative of ____________",
    "choices": [
      {
        "id": 1,
        "text": "Choking"
      },
      {
        "id": 2,
        "text": "Throttling"
      },
      {
        "id": 3,
        "text": "Hanging"
      },
      {
        "id": 4,
        "text": "Smothering"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Abrasions around</strong> the <strong>mouth,</strong> cheeks, lips or lesions within the lips may reliably indicate <strong>smothering.</strong></p>\n<p>The non-specific signs of death due to asphyxia:</p>\n<ul>\n<li><strong>Petechial haemorrhages</strong>\u00a0in the face, eyebrows, eyelids, forehead, ears, conjunctiva, sclera - When they occur in the visceral pleura, they are called\u00a0<strong>Tardieu\u2019s spots</strong></li>\n<li>Emphysematous, congested lungs with serosanguinous fluid exudates in alveoli.</li>\n<li><strong>Cyanosis</strong> or dark-coloured blood due to accumulation of CO<sub>2.</sub></li>\n<li><strong>Congestion</strong> of the larynx with slight oozing\u00a0</li>\n</ul>\n<p><strong>Pressure marks</strong> on the face can occur as a part of normal postmortem changes. Circumoral and circumnasal pallor can be caused merely by passive pressure of the dependent head after death.</p>\n<p>Note: The coexistence of these findings, in themselves, does not prove that death resulted from mechanical asphyxia. All these phenomena are non-specific and are in no way peculiar to this mode of death. They are of <strong>no value</strong> <strong>in proving</strong> that death resulted from mechanical asphyxia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7b1e0f4a94214d29959b71fe0131f7e6.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old boy was brought by police, and accused of sexual assault, but the boy claims to be a minor (16 years old). Which radiographs will you order to solve this discrepancy?",
    "choices": [
      {
        "id": 1,
        "text": "Elbow and hip joint"
      },
      {
        "id": 2,
        "text": "Elbow and ankle joint"
      },
      {
        "id": 3,
        "text": "Shoulder and skull joint"
      },
      {
        "id": 4,
        "text": "Wrist and knee joint"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Wrist </strong>and <strong>knee joint</strong> radiographs will be ordered to solve this discrepancy as<strong> lower end of radius</strong> and<strong> upper end of tibia</strong> fuse at <strong>18-19 years.</strong> If these joints are fused, It is certain that the boy is more than 18 years and his claim is false.</p>\n<table style=\"width: 424px; height: 655px;\">\n<tbody>\n<tr style=\"height: 44.7969px;\">\n<td style=\"width: 239.938px; height: 44.7969px;\"><strong>Bone/ joint</strong></td>\n<td style=\"width: 155.469px; height: 44.7969px;\"><strong>Max age of fusion</strong></td>\n</tr>\n<tr style=\"height: 111.984px;\">\n<td style=\"width: 239.938px; height: 111.984px;\">Wrist joint centers (lower end of ulna and radius)\u00a0</td>\n<td style=\"width: 155.469px; height: 111.984px;\">\n<p>19 years\u00a0</p>\n</td>\n</tr>\n<tr style=\"height: 67.1875px;\">\n<td style=\"width: 239.938px; height: 67.1875px;\">\n<p>Knee joint centres\u00a0</p>\n<p>(lower end of femur, upper end of tibia and upper end of fibula)</p>\n</td>\n<td style=\"width: 155.469px; height: 67.1875px;\">20 years</td>\n</tr>\n<tr style=\"height: 111.984px;\">\n<td style=\"width: 239.938px; height: 111.984px;\">Shoulder joint (head of humerus, greater tuberosity and lesser tuberosity)</td>\n<td style=\"width: 155.469px; height: 111.984px;\">19 years</td>\n</tr>\n<tr style=\"height: 89.5938px;\">\n<td style=\"width: 239.938px; height: 89.5938px;\">Hip joint (head of femur, greater trochanter)</td>\n<td style=\"width: 155.469px; height: 89.5938px;\">17 years\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 239.938px;\">Elbow joint centers (lower end of humerus, upper end of radius, olecranon to ulna)</td>\n<td style=\"width: 155.469px;\"><br />17years\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 239.938px;\">Ankle joint\u00a0</td>\n<td style=\"width: 155.469px;\">17 years</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man sexually aroused when he wears his female partner's dress and heels. He denies getting attracted to male. What is this condition called?",
    "choices": [
      {
        "id": 1,
        "text": "Gay sexual preference"
      },
      {
        "id": 2,
        "text": "Transvestic fetishism"
      },
      {
        "id": 3,
        "text": "Gender dysphoria"
      },
      {
        "id": 4,
        "text": "Voyeurism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span style=\"font-size: 12pt;\">The given scenario is suggestive of<strong> transvestic fetishism.</strong></span></p>\n<p><span style=\"font-size: 12pt;\">It<strong>\u00a0</strong>is a\u00a0paraphilia characterized by recurrent sexually arousing fantasies, sexual urges, or behavior involving the wearing of clothes of the opposite sex and appearing as a member of the opposite sex. It is also called\u00a0<strong>transvestic fetishism. </strong>It is usually seen in males who obtain sexual pleasure by wearing female clothes.</span></p>\n<p><span style=\"font-size: 12pt;\">Fetishistic transvestism is a paraphilia whereas transvestism is a gender identity disorder.\u00a0There is no hormonal/genital abnormality in fetishistic transvestism.</span></p>\n<p><span style=\"font-size: 12pt;\">Option A : <strong>Gay sexual preference </strong>is due to attraction to people of<strong> </strong>one's own gender.</span></p>\n<p><span style=\"font-size: 12pt;\"><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Option C: </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Gender dysphoria</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> is a term that\u00a0describes a sense of unease that a person has due to\u00a0a </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">mismatch </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">between their</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> biological sex </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">and</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> their gender identity</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">. This sense of unease or dissatisfaction can lead to depression and anxiety and can have a harmful impact on daily life.</span></span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; font-size: 12pt;\">Option D : <strong>Voyeurism/Peeping Tom/Scotophilia</strong> is sexual gratification by secretly watching others getting undressed, taking a bath, performing sexual intercourse, etc.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman gave birth to a child 8 months after the death of her husband. The in-laws claim that the child is not their son, however, the DNA testing confirms the paternity. The child is known as ____________",
    "choices": [
      {
        "id": 1,
        "text": "Illegitimate child"
      },
      {
        "id": 2,
        "text": "Posthumous child"
      },
      {
        "id": 3,
        "text": "Surrogate child"
      },
      {
        "id": 4,
        "text": "Supposititious child"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The child delivered <strong>after the death of the biological father</strong>, or a child delivered <strong>after the death of the biological mother</strong>, usually when delivered by a cesarean section is a posthumous child.</p>\n<p>Legal issues involved with a posthumous child are legitimacy, inheritance of property, and the case of compensation for slander against the mother.\u00a0</p>\n<p>Other options :\u00a0</p>\n<p>Option A: <strong>Illegitimate child</strong> is a child born out of wedlock i.e. when the<strong> parents are unmarried.</strong></p>\n<p>Option C: <strong>A surrogate\u00a0child </strong>is born out of a pregnancy in which a woman gives birth to a baby for a person who is not able to have children.</p>\n<p>Option D: <strong>Supposititious child</strong> or fictitious child is when a woman pretends to go through pregnancy and delivery. Later, she produces a living child on her own to obtain money or claim the property.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The railway police has bought a person with suspected poisoning. On examination, he was confused with slurred speech, hot skin, dry mouth, dilated pupils. What is the probable poisoning ?",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "Datura"
      },
      {
        "id": 3,
        "text": "Cannabis"
      },
      {
        "id": 4,
        "text": "Alcohol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of\u00a0<strong><em>Datura</em> poisoning.</strong></p>\n<p class=\"p1\">The two species are jimson weed (<em>Datura stramonium</em>) and angel\u2019s trumpet (<em>Datura candida</em>).</p>\n<p class=\"p1\">Seeds or other parts of the plant can be ingested or smoked. Poisoning leads to\u00a0<strong>delirium, hallucinations,</strong> and<strong> seizures. </strong>Additionally, other classic<strong> anticholinergic effects,</strong> such as mydriasis, tachycardia, <strong>dry mouth</strong> and skin, blurred vision, urinary retention, and <strong>hyperthermia</strong> may present.</p>\n<p class=\"p1\"><strong>Gastric emptying</strong> is often <strong>delayed,</strong> and the small, plentiful seeds can become trapped among the gastrointestinal folds after ingestion. Thus<strong> gastric decontamination</strong> can be an <strong>important therapy.</strong></p>\n<p class=\"p1\"><strong>Physostigmine,</strong> a reversible acetylcholine esterase antagonist, is an <strong>effective treatment</strong> for severe anticholinergic poisoning.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A police officer brought a child to the hospital. There is redness and tenderness around perianal region. A rectal swab is taken and the image given below is the finding. What test is it indicative of?",
    "choices": [
      {
        "id": 1,
        "text": "Barberio test"
      },
      {
        "id": 2,
        "text": "Florence test"
      },
      {
        "id": 3,
        "text": "Teichmann test"
      },
      {
        "id": 4,
        "text": "Takayama test"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The test done in this scenario is the <strong>Barberio test</strong>.</p>\n<p>Barberio test is used to detect <strong>seminal fluid.\u00a0</strong>When a saturated aqueous or alcoholic\u00a0<span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\"><strong>picric</strong>\u00a0<strong>acid solution</strong></span>\u00a0is added to the spermatic fluid, <strong>yellow needle-shaped</strong> rhombic crystals of<strong> spermine picrate</strong> are produced.</p>\n<p>Other options:</p>\n<p>Option B: The <strong>Florence test</strong> detects <strong>semen</strong>. If semen is present, <strong>dark brown rhombic or needle-shaped crystals</strong> of choline iodide appear immediately.</p>\n<p>Option C: <strong>The Teichmann test </strong>(hemin crystal test) is used to detect bloodstains. If bloodstain is present, faint <strong>yellowish-red to brownish-black rhombic crystals</strong> of hemin or hematin chloride appear. When hydrogen peroxide is added, the hematin crystals give bubbles of gas.</p>\n<p>Option D: <strong>\u00a0Hemochromogen crystals</strong> are seen in the <strong>Takayama test.</strong> It is a microchemical test used to detect bloodstains. The stain used is Takayama reagent (Sodium hydroxide, pyridine, glucose). If bloodstain is present,<strong> pink feathery crystals of hemochromogen</strong> or reduced alkaline hematin appear in a few minutes. The test is negative if the crystals are not formed in 30 minutes. This test is more reliable and gives positive results with old stains also but not a definitive test to detect blood stains.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8488f8b218bb4450bb71e7764f98eaae.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fae3680b912a41b79c1e20006a226ac0x1200x2088.JPEG"
    ]
  },
  {
    "text": "Rigor mortis is well established in 12-24 hours after death. What is the order of appearance of rigor mortis?",
    "choices": [
      {
        "id": 1,
        "text": "Toe to head"
      },
      {
        "id": 2,
        "text": "Head to toe"
      },
      {
        "id": 3,
        "text": "Centre to periphery"
      },
      {
        "id": 4,
        "text": "All the body parts simultaneously"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The order of appearance of rigor mortis is from <strong>head to toe.</strong></p>\n<p>Rigor mortis (cadaveric rigidity or death stiffening) refers to the <strong>stiffening</strong> and <strong>shortening</strong> of <strong>muscles following death.</strong> The basic sequence of the rigor mortis begins from the head and continues downwards the body. It <strong>disappears</strong> in the <strong>same order of appearance</strong>.<strong> Nysten's rule</strong> describes the sequential onset of rigor mortis in the various muscle groups.</p>\n<p>The muscles are affected in the given order:</p>\n<ol>\n<li>Involuntary muscles - Heart (left chamber of the heart is affected first)</li>\n<li>Eyelids</li>\n<li>Neck and lower jaw</li>\n<li>Face</li>\n<li>Chest</li>\n<li>Upper extremities</li>\n<li>Abdomen</li>\n<li>Legs</li>\n<li>Fingers and toes</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old child has consumed overdose of iron syrup, around 60mg/kg. Which among the following is contraindicated?",
    "choices": [
      {
        "id": 1,
        "text": "BAL"
      },
      {
        "id": 2,
        "text": "Deferoxamine"
      },
      {
        "id": 3,
        "text": "Calcium EDETATE"
      },
      {
        "id": 4,
        "text": "DTPA"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to <strong>iron toxicity</strong>, which is managed with <strong>deferoxamine</strong> (also known as\u00a0<strong>desferrioxamine</strong>), <strong>calcium EDETATE</strong> and <strong>DTPA </strong>whereas Dimercaprol, also known as <strong>BAL</strong> (British anti-Lewisite), is used to treat <strong>arsenic, mercury poisoning, and Wilson's disease.</strong></p>\n<p>Large amounts of ferrous salts can be fatal in <strong>children</strong>. Initial symptoms include <strong>abdominal pain</strong>, diarrhea, vomiting, and <strong>gastrointestinal bleeding</strong>. In severe cases, <strong>cyanosis</strong> and hyperventilation due to <strong>acidosis</strong> can develop. This can sometimes be followed by an <strong>asymptomatic phase</strong>. Later, hypoglycemia and hepatic and renal failure can develop. <strong>Pyloric stenosis</strong> and gastric scarring can develop due to its corrosive nature. Ultimately, if left untreated, the child can die.</p>\n<p>The gastric contents can be used for an iron color test to estimate the iron concentration in plasma. As iron tablets are <strong>radiopaque</strong>, an X-ray can be used to assess the number of pills taken. <strong>Deferoxamine (Option B)</strong>\u00a0is selectively used as a chelating agent to manage cases of<strong> acute iron poisoning</strong>, hemochromatosis, and patients with iron overload from repetitive blood transfusions. Desferrioxamine can be administered intramuscularly, intravenously, or subcutaneously <strong>but not orally</strong>. Side effects include pruritus, wheals, rash, and anaphylaxis.\u00a0</p>\n<p><strong>Deferiprone</strong> and <strong>deferasirox</strong> are other <strong>oral</strong> iron chelators used to treat iron overload in<strong> thalassemia</strong> patients.\u00a0</p>\n<p>Other options:</p>\n<p>Option C : Ethylenediaminetetraacetic acid (<strong>EDTA</strong>) is used for <strong>acute lead poisoning.</strong> It is <strong>not suitable</strong> for the management of chronic lead poisoning. The calcium salt of EDTA can be used in the management of<strong> heavy metal poisonings</strong> where the metal in question has a higher affinity for EDTA than calcium in vivo. Because of their lower affinity to EDTA, mercury and arsenic cannot be effectively chelated.\u00a0</p>\n<p>Option D : Diethylenetriamene pentaacetate (<strong>DTPA</strong>) is a chelating agents which works by binding and holding on to <strong>radioactive materials </strong>(plutonium, americium, and curium) and poisons like iron. <strong>Calcium DTPA</strong> is well tolerated and effective as desferrioxamine in mobilising iron than<strong> Zinc DTPA.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A sexual assault survivor had to testify in court and an in-camera trial was conducted.  What is an \"in-camera\" trial?",
    "choices": [
      {
        "id": 1,
        "text": "Open court proceedings"
      },
      {
        "id": 2,
        "text": "Closed court proceedings"
      },
      {
        "id": 3,
        "text": "Proceedings recorded on camera"
      },
      {
        "id": 4,
        "text": "Proceeding held in a different location"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>'In-camera trial' is a <strong>closed court proceeding</strong> in which the case is heard in <strong>private</strong> i.e. in court where<strong> general public is excluded. </strong></p>\n<p>BNSS sections related to court proceeding are tabulated below:</p>\n<table style=\"width: 47.6154%; height: 1175px;\">\n<tbody>\n<tr style=\"height: 67.1953px;\">\n<td style=\"width: 21.59%; height: 67.1953px;\">\u00a0<br /><strong>BNSS</strong><br /><br /></td>\n<td style=\"width: 22.6695%; height: 67.1953px;\" width=\"319\"><strong>CrPC</strong></td>\n<td style=\"width: 55.7742%; height: 67.1953px;\" width=\"319\"><strong>Deals with</strong></td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 21.59%; height: 54.3984px;\">\n<p>63-71</p>\n</td>\n<td style=\"width: 22.6695%; height: 54.3984px;\" width=\"319\">\n<p>61-69</p>\n</td>\n<td style=\"width: 55.7742%; height: 54.3984px;\" width=\"319\">\n<p>Summons</p>\n</td>\n</tr>\n<tr style=\"height: 76.7969px;\">\n<td style=\"width: 21.59%; height: 76.7969px;\">\n<p>181</p>\n</td>\n<td style=\"width: 22.6695%; height: 76.7969px;\" width=\"319\">\n<p>162</p>\n</td>\n<td style=\"width: 55.7742%; height: 76.7969px;\" width=\"319\">\n<p>Oral statements made to the police and recorded by the police should not be signed</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 21.59%; height: 54.3984px;\">\n<p>195</p>\n</td>\n<td style=\"width: 22.6695%; height: 54.3984px;\" width=\"319\">\n<p>175</p>\n</td>\n<td style=\"width: 55.7742%; height: 54.3984px;\" width=\"319\">\n<p>Power to summon persons by a police officer</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 21.59%; height: 54.3984px;\">\n<p>196</p>\n</td>\n<td style=\"width: 22.6695%; height: 54.3984px;\" width=\"319\">\n<p>176</p>\n</td>\n<td style=\"width: 55.7742%; height: 54.3984px;\" width=\"319\">\n<p>Magistrate inquest</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 21.59%; height: 54.3984px;\">\n<p>350</p>\n</td>\n<td style=\"width: 22.6695%; height: 54.3984px;\" width=\"319\">\n<p>312</p>\n</td>\n<td style=\"width: 55.7742%; height: 54.3984px;\" width=\"319\">\n<p>Expenses of complaints and witnesses</p>\n</td>\n</tr>\n<tr style=\"height: 99.1953px;\">\n<td style=\"width: 21.59%; height: 99.1953px;\">\n<p><strong>366</strong><br /><strong>366(2)</strong></p>\n</td>\n<td style=\"width: 22.6695%; height: 99.1953px;\" width=\"319\">\n<p><strong>327</strong></p>\n</td>\n<td style=\"width: 55.7742%; height: 99.1953px;\" width=\"319\">\n<p><strong>Criminal court is generally deemed to be an open court.</strong><br /><strong>In-camera trial for rape</strong></p>\n</td>\n</tr>\n<tr style=\"height: 99.1953px;\">\n<td style=\"width: 21.59%; height: 99.1953px;\">\n<p>389</p>\n</td>\n<td style=\"width: 22.6695%; height: 99.1953px;\" width=\"319\">\n<p>350</p>\n</td>\n<td style=\"width: 55.7742%; height: 99.1953px;\" width=\"319\">\n<p>Summary procedure for punishment for non-attendance by a witness in obedience to the summons</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 21.59%; height: 54.3984px;\">\n<p>395</p>\n</td>\n<td style=\"width: 22.6695%; height: 54.3984px;\" width=\"319\">\n<p>357</p>\n</td>\n<td style=\"width: 55.7742%; height: 54.3984px;\" width=\"319\">\n<p>Order to pay compensation</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 36-year-old man died following a RTA. The doctor informed the police officer and shifted the body to the mortuary. Autopsy in this case will be conducted at the request of  _______",
    "choices": [
      {
        "id": 1,
        "text": "Forensic expert"
      },
      {
        "id": 2,
        "text": "Investigating police officer"
      },
      {
        "id": 3,
        "text": "Defense lawyer"
      },
      {
        "id": 4,
        "text": "Prosecution  lawyer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the case of the 36-year-old man who <strong>died</strong> following an<strong> RTA</strong>, the <strong>autopsy</strong> will be <strong>conducted</strong> at the request of the <strong>investigating police officer</strong>.</p>\n<p>According to <strong>BNSS Section 194</strong> (Section <strong>174 CrPC</strong>), a <strong>police inquest</strong> is the <strong>standard procedure</strong> for investigating <strong>unnatural deaths</strong> in India. This process is typically carried out by a <strong>police officer</strong>, <strong>not below </strong>the rank of <strong>Senior Head Constable</strong>, who is responsible for conducting a <strong>preliminary inquiry</strong> into the <strong>circumstances</strong> <strong>surrounding</strong> the <strong>death</strong>.</p>\n<p>During the police inquest, the investigating officer <strong>visits</strong> the <strong>scene</strong> of the <strong>incident, examines</strong> the body, and <strong>documents</strong> any <strong>visible injuries</strong> or signs of trauma. The officer\u2019s report will detail these findings and assess whether the death appears to be <strong>suicidal, homicidal, accidental</strong>, or <strong>suspicious</strong>. If the situation warrants, the body will be sent for a <strong>postmortem examination</strong> to be conducted by a <strong>qualified medical professional</strong> to determine the exact cause of death.</p>\n<p>In certain cases, a <strong>magistrate inquest</strong> [<strong>BNSS 196 </strong>(Section <strong>176 CrPC</strong>)] may be conducted <strong>instead of</strong>, or <strong>in addition </strong>to, a police inquest. This is particularly true in cases involving deaths under special circumstances, such as <strong>lock-up deaths</strong>, deaths while in <strong>police custody</strong>, <strong>custodial rape, death in a psychiatric hospital, dowry death </strong>or deaths resulting <strong>from police actions</strong>. The magistrate inquest is carried out by a <strong>District Magistrate, Subdivisional Magistrate</strong>, or another authorized magistrate, and involves a more <strong>formal judicial inquiry</strong> into the cause of death.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A person comes to emergency after consumption of a substance, the form and dose of which is not known to the relatives. The patient has tachypnea and hypotension. On metabolic assessment, high anion gap metabolic acidosis is noted with hypocalcemia. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Methyl alcohol"
      },
      {
        "id": 2,
        "text": "Ethylene glycol"
      },
      {
        "id": 3,
        "text": "Datura"
      },
      {
        "id": 4,
        "text": "Digoxin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient's presentation of <strong>tachypnea, hypotension, high anion gap metabolic acidosis</strong>, and <strong>hypocalcemia</strong>, is suggestive of <strong>ethylene glycol poisoning</strong>.</p>\n<p>Ethylene glycol is a clear, colourless, and odourless liquid commonly used as an <strong>antifreeze</strong>. It is known for its <strong>bitter-sweet taste</strong> and is absorbed mainly through<strong> ingestion</strong> rather than skin contact. Upon ingestion, ethylene glycol is <strong>metabolized</strong> in the <strong>liver</strong> to several toxic metabolites, including <strong>glycolic acid</strong> and <strong>oxalic acid</strong>, which contribute to its harmful effects.</p>\n<p><strong>Initially</strong>, ethylene glycol poisoning can cause symptoms such as <strong>vomiting, lethargy</strong>, and <strong>ataxia</strong>, progressing to severe effects including tachycardia, tachypnea, and <strong>circulatory collapse</strong> within <strong>12-24 hours</strong>. As the condition progresses, typically within one to three days, patients may experience hypocalcemia, <strong>oliguria, tubular necrosis</strong>, and <strong>acute kidney injury (AKI</strong>). A notable feature of ethylene glycol poisoning is the formation of <strong>calcium oxalate crystals</strong> in the<strong> urine</strong>, which can lead to <strong>renal failure</strong>.</p>\n<p>The <strong>postmortem findings</strong>\u00a0often include <strong>cerebral edema, chemical meningoencephalitis</strong>, and significant damage to the liver and kidneys. <strong>Oxalate crystals</strong> may be observed in the <strong>brain, spinal cord</strong>, and kidneys, further confirming the diagnosis.</p>\n<p>For treatment, immediate measures include <strong>gastric lavage, activated charcoal</strong>, and administration of ethanol or <strong>4-methyl pyrazole (fomepizole)</strong>, which inhibit the enzyme alcohol dehydrogenase to prevent further metabolism of ethylene glycol into toxic compounds. Additional treatments such as <strong>intravenous sodium bicarbonate</strong> and <strong>calcium gluconate</strong> are used to address metabolic acidosis and hypocalcemia, respectively, while <strong>hemodialysis</strong> is indicated in <strong>severe</strong> <strong>cases</strong> with significant renal impairment or high serum ethylene glycol concentrations.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Methyl alcohol (Methanol)</strong> and Ethylene glycol poisoning can present very similarly. However, the key distinguishing feature of methanol poisoning is the presence of <strong>eye symptoms</strong> (as opposed to kidney damage in ethylene glycol) - like <strong>blurring</strong> of vision/<strong>loss of vision</strong> due to <strong>retinal damage</strong> by formate metabolites.</p>\n<p>Methanol--Alcohol Dehydrogenase (ADH) \u21d2 <strong>Formaldehyde</strong> \u21d2 (<strong>Retinal damage</strong>)</p>\n<p>Ethylene glycol--Alcohol Dehydrogenase (ADH) \u21d2 <strong>Glyoxyaldehyde</strong> \u21d2 (<strong>Kidney damage</strong>)\u00a0</p>\n<p>Option C: <strong>Datura</strong> is used as a <strong>stupefying poison</strong> before robbery, kidnapping, and rape. The active ingredients include the <strong>anticholinergic alkaloids atropine, scopolamine</strong>, and <strong>hyoscyamine</strong>. The <strong>seeds </strong>or other parts of the plant can be ingested or smoked. <strong>Toxic manifestations</strong>\u00a0include dilatation of pupils along with <strong>loss of accommodation, diplopia, dryness</strong> of the mouth and throat, unquenchable thirst, dysphagia, dilatation of cutaneous blood vessels, <strong>dysarthria</strong>, drunken gait, delirium, drowsiness and death due to <strong>respiratory</strong> or <strong>cardiac failure.</strong></p>\n<p>Option D: <strong>Digoxin toxicity</strong> can occur in the elderly and patients with renal impairment and presents with <strong>nausea, vomiting, diarrhoea</strong>, confusion, blurred vision with a characteristic <strong>yellowing of vision</strong> (compared to the \u201cstarry night\u201d painting), and <strong>irregular heart rhythms</strong>. Overdose and resultant arrhythmias are managed with <strong>anti-digoxin Fab fragments (Digibind</strong> or <strong>Digifab</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented to the OPD with findings as shown below. Identify the type of poisoning in this patient.",
    "choices": [
      {
        "id": 1,
        "text": "Chronic malnutrition"
      },
      {
        "id": 2,
        "text": "Copper"
      },
      {
        "id": 3,
        "text": "Mercury"
      },
      {
        "id": 4,
        "text": "Arsenic"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Other options:</p>\n<p>Option A: <strong>Chronic malnutrition</strong> leads to distinct skin and nail changes depending on the specific condition. In <strong>kwashiorkor</strong>, there is <strong>flaky paint dermatosis</strong> with <strong>reddish-brown scaling</strong>, thin and sparse hair featuring a \"<strong>flag sign</strong>,\" and <strong>soft nails</strong>. In <strong>marasmus</strong>, patients exhibit <strong>dry, wrinkled skin</strong>, <strong>slow-growing brittle hair,</strong> and <strong>nails</strong>, often accompanied by growth retardation.</p>\n<p>Option B: <strong>Acute copper poisoning</strong> is due to inhalation of a large amount of copper dust or fumes, which leads to <strong>upper respiratory tract irritation</strong>, conjunctivitis, and sinus irritation. Contact with the skin may lead to irritant contact dermatitis and a<strong> greenish-blue discolouration</strong> of the skin.\u00a0</p>\n<p>In <strong>chronic poisoning</strong>, symptoms mostly resemble those of\u00a0<strong>Wilson's disease</strong>, mainly including <strong>gradual anaemia, peripheral neuritis</strong>, and <strong>muscle atrophy</strong>.</p>\n<p>Option C: <strong>Acute mercury poisoning</strong> presents with corrosive bronchitis with fever, chills, and dyspnea, which may progress to pulmonary edema and fibrosis. The symptom profile in children is similar to that of <strong>Kawasaki disease\u00a0</strong>(mucocutaneous lymph node syndrome). <strong>Chronic exposure</strong> to elemental mercury leads to a classic <strong>triad</strong> of <strong>gingivitis,</strong> <strong>tremors</strong>, and <strong>neuropsychiatric</strong> changes.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2e5daef6d7984d7b9d5abdae17f23edd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/09c931c4a8fe40b29a16f696d15edb50x1280x4900.JPEG"
    ]
  },
  {
    "text": "The following findings were noted during the autopsy of a patient with a gunshot injury. What is the likely range of the gunshot?",
    "choices": [
      {
        "id": 1,
        "text": "Cannot be opined"
      },
      {
        "id": 2,
        "text": "Distant range"
      },
      {
        "id": 3,
        "text": "Contact range"
      },
      {
        "id": 4,
        "text": "Close\u00a0 range"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Grease collar:\u00a0</strong>Mostly seen on the clothing and is seen as a <strong>black deposit</strong>, sharply outlined as if printed (better seen on light colour clothes and fair-skinned individuals). Its <strong>medicolegal importance </strong>is that it helps derive\u00a0information such as<strong> entry</strong> wound\u00a0and <strong>direction</strong> of firing.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/065ad3ca501943fd94d6350e45e6dc60.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A large number of people who consumed cheap alcohol presented to the emergency department with abdominal pain, confusion, and decreased vision. Methyl alcohol level in blood was detected to be around 20 mg %. On assessment which of the following metabolites will be found in blood?",
    "choices": [
      {
        "id": 1,
        "text": "Glycolic acid and Glyoxylic acid"
      },
      {
        "id": 2,
        "text": "Formic acid and lactic acid"
      },
      {
        "id": 3,
        "text": "Glycolic acid and lactic  acid"
      },
      {
        "id": 4,
        "text": "Oxalic acid and formic acid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given case scenario is suggestive of <strong>methanol poisoning</strong>. In these cases, <strong>formic acid</strong> and <strong>lactic acid</strong> are typically the metabolites found in the blood.</p>\n<p>Methyl alcohol, or <strong>methanol</strong>, is commonly present in cheap or <strong>illicit alcoholic beverages</strong> due to its <strong>lower cost</strong> compared to ethyl alcohol. These inexpensive alcohols may be improperly distilled or adulterated, leading to <strong>methanol contamination</strong>. When ingested, methanol is absorbed into the bloodstream and <strong>metabolized</strong> by the <strong>liver</strong>, where it is first converted into <strong>formaldehyde</strong>, a <strong>highly toxic</strong> intermediate. Formaldehyde is then further <strong>oxidized</strong> into <strong>formic acid</strong>, which is responsible for many of the severe symptoms associated with methanol poisoning.</p>\n<p>The accumulation of formic acid leads to significant <strong>metabolic acidosis</strong>, which manifests as confusion, abdominal pain, and visual disturbances. The visual symptoms can be particularly severe, including <strong>blurred vision</strong> or even <strong>blindness</strong>, due to the toxic effects of <strong>formic acid</strong> on the <strong>optic nerve</strong>. In addition to formic acid, methanol's<strong> disruption</strong> of <strong>normal oxidative enzyme activity</strong> results in the buildup of <strong>lactic acid</strong>, contributing further to acidosis. <strong>Brain edema</strong>, <strong>acute renal failure</strong>, and severe metabolic derangement are also seen.</p>\n<p>The principles of <strong>treatment</strong> for this condition predominantly involve using <strong>fomepizole</strong> or ethanol to inhibit the metabolic conversion of these relatively non-toxic alcohols to their toxic metabolites.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the case of drowning, following autopsy, an organism was isolated from the water present in the internal organs. Which of the following is true regarding the isolated organism?",
    "choices": [
      {
        "id": 1,
        "text": "Present only in the bone marrow"
      },
      {
        "id": 2,
        "text": "Dried outer wall contains silica and chlorophyll"
      },
      {
        "id": 3,
        "text": "It is a microscopic unicellular bacteria"
      },
      {
        "id": 4,
        "text": "It is not heat and acid resistant"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Diatoms</strong> enter <strong>pulmonary circulation</strong> on <strong>antemortem drowning</strong>. Diatoms are a class of <strong>microscopic unicellular algae </strong>(option C)<strong> </strong>found suspended in most natural waters. Their cell walls are impregnated with<strong> silica, chlorophyll</strong>, diatomic, and a brown pigment<strong>.</strong></p>\n<p>The drowning fluid and the particles in it, e.g., diatoms and plankton, pass from the ruptured alveolar wall into lymph channels and pulmonary veins and thus enter the left heart. Only a <strong>live body</strong> with circulation could transport diatoms from the lungs to the brain, bone marrow, liver and other viscera, and skeletal muscle. They are also found in bile and urine. <strong>Bone marrow</strong> is highly suitable and reliable.</p>\n<p>Isolation of diatoms involves <strong>acid digestion of tissue </strong>- bone marrow, lung, blood, and kidneys with subsequent centrifugation and the final residue is aspirated and examined for diatoms, which are birefringent, using dark ground illumination. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">A water sample is collected at the time of body retrieval in a clean container and the similarity of different species of diatom is compared. Diatoms are both heat and acid-resistant (option D).</span></p>\n<div class=\"page\" title=\"Page 206\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The presence of diatoms in the lung, brain, liver, kidneys, and <strong>bone marrow </strong>(option A) of the femur (best site for analysis) or humerus is suggestive proof of <strong>antemortem drowning</strong>.\u00a0</li>\n<li>Since diatoms resist putrefaction, the diatom test may have some value in the examination of decomposed bodies.</li>\n<li>The test is negative in postmortem submersion and in dry drowning.\u00a0</li>\n</ul>\n<div class=\"page\" title=\"Page 207\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Diatoms are ubiquitous in the environment and may enter circulation via the gastrointestinal tract (as contaminants of foods)or via the respiratory tract (which are present in the air). Still, t<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">he diatom test is considered the<strong> gold standard</strong> for the diagnosis of typical drowning.\u00a0</span></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cb0f1735faf040b094426d4cc0fd8f7a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A pregnant female comes to a gynaecologist, who sends her for USG. On USG, twin pregnancy was noted with about a one-month difference in the age of fetuses. Which of the following is true with regard to this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Superfecundation"
      },
      {
        "id": 2,
        "text": "Superfetation"
      },
      {
        "id": 3,
        "text": "Supposititious  child"
      },
      {
        "id": 4,
        "text": "Posthumous child"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above phenomenon is known as<strong>\u00a0superfetation</strong>.<strong> </strong>It<strong>\u00a0</strong>occurs when there is fertilization of <strong>2 different ova released </strong>in<strong> different menstrual cycles</strong>. The consequence is <strong>two children</strong> are <strong>born</strong> at the <strong>same time</strong> and one of them might be <strong>mature </strong>while another might be<strong> immature </strong>or <strong>two fully developed fetuses</strong> are born at intervals ranging from <strong>one </strong>to<strong> three months</strong> apart.</p>\n<p>Ovulation usually stops with the onset of pregnancy, but in a <strong>few individuals</strong>, <strong>ovulation</strong> may be <strong>possible</strong> till the<strong> first trimester</strong>, after which the decidual cavity is obliterated. The fertilization of the newly released ovum in a woman who is already pregnant may take place following coitus.\u00a0</p>\n<p>Other options:</p>\n<p>Option A: <strong>Superfecundation</strong> is the fertilization of\u00a0<strong>2 different ova</strong>\u00a0in the\u00a0<strong>same menstrual cycle</strong>\u00a0by separate acts of coitus. Heteropaternal superfecundation is used to refer to instances of two different males fathering fraternal twins. This leads to the possibility of twins also being half-siblings. This\u00a0may raise doubts regarding adultery and infidelity.\u00a0</p>\n<p>Option C: A <strong>supposititious child </strong>is also known as a <strong>fictitious child.</strong> In such cases, a woman <strong>pretends to be pregnant </strong>and substitutes a living child as her own, or may substitute a male child for her female child, or abortion. This is done to claim property. This can be identified by verifying the signs of pregnancy and delivery in the woman and by DNA fingerprinting.</p>\n<p>Option D: A <strong>posthumous child </strong>is a child born alive <strong>after</strong> the <strong>death</strong> of his or her <strong>father </strong>who was <strong>conceived before</strong> the <strong>death</strong> of the father.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old woman G3P2L2 came to you in active labor. The labour process was arrested at around cervical dilatation of  8 cm. She was counselled regarding the need for an emergency cesarean section. The baby was delivered by cesarean section and was doing well but the mother developed intractable postpartum hemorrhage. Conservative measures were tried initially but failed. Emergency hysterectomy was done as a life-saving procedure. What are the medicolegal implications of this situation?",
    "choices": [
      {
        "id": 1,
        "text": "Patient could sue the doctor for removing her uterus"
      },
      {
        "id": 2,
        "text": "Hysterectomy was done as a life saving procedure, so the doctor is legally protected"
      },
      {
        "id": 3,
        "text": "Consent can be taken from the patient on OT table"
      },
      {
        "id": 4,
        "text": "Counsellling of patient and attendants is not needed"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span style=\"box-sizing: border-box; margin: 0px; padding: 0px;\">According to\u00a0<strong>BNS Section 30\u00a0</strong>(<strong>IPC 92)</strong>, a doctor is permitted to\u00a0<strong>perform life-saving procedures</strong>\u00a0on a patient with\u00a0<strong>life-threatening injuries.</strong> For example, in this case where conservative measures have failed to control intractable postpartum haemorrhage, an emergency hysterectomy can be performed <strong>without obtaining consent in order to save the patient's life</strong>.</span></p>\n<p>The guiding principle is whether the delay in treatment in order to obtain consent would result in harm to the patient. This is the <strong>doctrine of anticipation</strong>. Under some circumstances like emergencies, informed consent may be neither possible nor necessary.</p>\n<p><strong>BNS Section 30 (IPC 92)</strong> states that <strong>nothing is an offence by reason of any harm</strong> which it may cause to a person for <strong>whose benefit it is done in</strong> <strong>good faith,</strong> even without that person\u2019s consent, if the circumstances are such that it is impossible for that person to signify consent, or if that person is incapable of giving consent, and has no guardian or other person in lawful charge of him from whom it is possible to obtain consent in time for the thing to be done with benefit.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old man who was found dead was brought in for autopsy. The doctor notices a greyish-white waxy layer over the body with preserved facial features. Which of the following statements is true concerning adipocere formation?",
    "choices": [
      {
        "id": 1,
        "text": "It occurs in hot and dry temperatures"
      },
      {
        "id": 2,
        "text": "It occurs in cold temperatures"
      },
      {
        "id": 3,
        "text": "It is a type of body preservation with saponification of fats"
      },
      {
        "id": 4,
        "text": "Occurs within few hours of death"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario indicates <strong>adipocere formation, </strong>which<strong> </strong>is a <strong>late postmortem change</strong> where <strong>body fats</strong> undergo <strong>saponification</strong> through <strong>anaerobic hydrolysis</strong> and <strong>hydrogenation</strong>, resulting in a <strong>waxy substance</strong>. Therefore, the correct answer is that it is a type of <strong>body preservation</strong> with <strong>saponification</strong> of <strong>fats</strong>.</p>\n<p><strong>Adipocere\u00a0formation </strong>or corpse wax, is a\u00a0<strong>late sign</strong> of death, that occurs days to <strong>months after death</strong>. A wax-like organic substance is formed by the<strong> anaerobic hydrolysis</strong> or <strong>hydrogenation</strong> of fat in tissues. It has a <strong>greyish-white appearance</strong> with a distinctive <strong>offensive</strong> or sweetish smell.\u00a0</p>\n<p>Adipocere formation varies widely, taking as little as <strong>three weeks</strong> in <strong>temperate regions</strong> during <strong>summer,</strong> but typically requires several months for significant changes. In rare cases, the entire body may be affected, with complete conversion of an <strong>adult limb</strong> taking <strong>three</strong> to <strong>six months</strong>.\u00a0</p>\n<p><strong>Medicolegal importance</strong> is as follows:</p>\n<ul>\n<li>It is the <strong>surest sign</strong> of death</li>\n<li>It gives a rough <strong>estimate</strong> of the<strong> time since death</strong></li>\n<li>The <strong>cause</strong> of death can be identified.</li>\n<li>In the <strong>face</strong>, the <strong>features </strong>are <strong>well preserved</strong> and therefore used in <strong>identification</strong>.\u00a0</li>\n</ul>\n<p>Postmortem changes are classified based on time:</p>\n<ul>\n<li><strong>Immediate signs</strong> of death (at the time of somatic or clinical death):\n<ul>\n<li>Insensibility and loss of voluntary power</li>\n<li>Cessation of respiration</li>\n<li>Cessation of circulation</li>\n</ul>\n</li>\n<li><strong>Early signs</strong> of death (cellular death that is observed in the first 12 to 24 hours of death):\n<ul>\n<li>Pallor and loss of elasticity of the skin</li>\n<li>Eye changes</li>\n<li>Primary flaccidity of muscles</li>\n<li><strong>Algor mortis</strong>/Postmortem cooling</li>\n<li>Postmortem lividity/<strong>Suggillation</strong></li>\n<li><strong>Rigor mortis</strong></li>\n</ul>\n</li>\n<li><strong>Late signs</strong> of death:\n<ul>\n<li>Putrefaction</li>\n<li><strong>Adipocere</strong></li>\n<li>Mummification</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '120 Forensic Medicine Neet 2024';
        let hierarchy = ["Marrow", "PYQs", "Forensic Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>