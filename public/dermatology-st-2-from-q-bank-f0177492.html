<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dermatology St 2 (From Q-Bank) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following layers of epidermis is known as 'prickle layer'?",
    "choices": [
      {
        "id": 1,
        "text": "Stratum basale"
      },
      {
        "id": 2,
        "text": "Stratum spinosum"
      },
      {
        "id": 3,
        "text": "Stratum granulosum"
      },
      {
        "id": 4,
        "text": "Stratum corneum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Stratum spinosum</strong> is also called the <strong>prickle cell layer&nbsp;</strong>as it&nbsp;consists of intercellular attachments called <strong>desmosomes&nbsp;</strong>that&nbsp;appear like <strong>spines</strong> on microscopy.</p>\n<p>It is due to the&nbsp;shrinking of the microfilaments between desmosomes that occurs when stained with H&amp;E.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A dermatology resident identified several flake-like lesions while examining a patient. Skin biopsy is shown below. What are these lesions?",
    "choices": [
      {
        "id": 1,
        "text": "Scar"
      },
      {
        "id": 2,
        "text": "Crust"
      },
      {
        "id": 3,
        "text": "Scale"
      },
      {
        "id": 4,
        "text": "Excoriation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given biopsy shows <strong>parakeratosis</strong>. It is associated with visible<strong>&nbsp;scales</strong> or <strong>visible exfoliation</strong> of the skin that consists of flakes of <strong>stratum corneum.&nbsp;</strong></p>\n<p>Parakeratosis refers to the presence of <strong>nucleated keratinocytes</strong> in the stratum corneum. It is indicative of a <strong>high turnover</strong> of keratinocytes.<strong>&nbsp;</strong>It is associated with thickening of the stratum corneum and visibly presents as scaling. The <strong>scales</strong> represent&nbsp;compacted <strong>desquamated</strong> layers of stratum corneum.</p>\n<p>The following image shows visible fragments of the stratum corneum as it is shed from the skin.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a0926aa00074ccab2aa2ff5f668cf34.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a512ef68649944bd96fb034d42e52ad6x1280x1499.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d06fe3458e542c9911dea709948c2b4x510x482.GIF"
    ]
  },
  {
    "text": "A 3-year-old girl is rushed to the casualty with sudden-onset breathing difficulty. History reveals that her father also suffers from similar episodes. Examination findings are as follows. Which of the following statements is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Type II of this condition is most common"
      },
      {
        "id": 2,
        "text": "The enzyme involved is C1 INH"
      },
      {
        "id": 3,
        "text": "There is loss of inhibition of Hageman factor"
      },
      {
        "id": 4,
        "text": "Associated with  C4 and C2 deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows <strong>subcutaneous</strong>&nbsp;and&nbsp;<strong>submucosal</strong>&nbsp;edema of the face and lips without wheals. Along with the history, a diagnosis of&nbsp;<strong>hereditary angioedema</strong> (HAE) is most likely.<strong> Type I </strong>HAE is the <strong>most common</strong> form (85%).</p>\n<p>There are three types of hereditary angioedema (HAE):</p>\n<ul>\n<li>Type 1 (85%):&nbsp;<strong>C1INH deficiency&nbsp;</strong></li>\n<li>Type 2 (15%):&nbsp;Dysfunction of C1-INH, but normal levels</li>\n<li>Type 3 (rare) :<strong>&nbsp;&nbsp;</strong>Normal C1-INH levels and function</li>\n</ul>\n<p><strong>HAE</strong> occurs due to a mutation in&nbsp;the<strong> SERPING1 </strong>gene, which codes for the C1 esterase inhibitor (C1INH). It is also called angioneurotic edema or <strong>Quincke's disease.</strong></p>\n<p><strong>C1INH</strong>&nbsp;enzyme normally inhibits the following:</p>\n<ul>\n<li><strong>Complement</strong> system</li>\n<li><strong>Kallikrein</strong> system</li>\n<li>Factor XII<strong>&nbsp;</strong>or<strong> Hageman factor</strong></li>\n</ul>\n<p>In HAE, loss of C1INH activity leads to loss of inhibition of these above processes. This leads to <strong>decreased C4</strong> and<strong> C2</strong> levels and&nbsp;<strong>bradykinin accumulation.</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b7656834d0a342daaedf53866c41ad2f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not responsible for the color of the human skin?",
    "choices": [
      {
        "id": 1,
        "text": "Amount of melanin inside melanocytes"
      },
      {
        "id": 2,
        "text": "Number of melanocytes"
      },
      {
        "id": 3,
        "text": "Number and size of melanosomes"
      },
      {
        "id": 4,
        "text": "Degree of transfer of melanin into keratinocytes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>color</strong> of the human skin <strong>does not depend</strong> on the&nbsp;<strong>number of melanocytes.</strong></p>\n<p>The <strong>color</strong> of the skin <strong>depends</strong> on the following:</p>\n<ul>\n<li><strong>Amount of melanin</strong> inside melanocytes</li>\n<li>Number and size of <strong>melanosomes</strong></li>\n<li><strong>Degree of transfer</strong> of <strong>melanin</strong> into keratinocytes</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with the following itchy cutaneous lesions to the OPD. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Lichen planus"
      },
      {
        "id": 2,
        "text": "Psoriasis"
      },
      {
        "id": 3,
        "text": "Pityriasis rubra pilaris"
      },
      {
        "id": 4,
        "text": "Pityriasis rosea"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The skin lesion in the above image shows characteristic purple, flat, polygonal papules seen in<strong>&nbsp;lichen planus</strong>.</p>\n<p>The lesions of lichen planus can be described as <strong>5Ps &mdash;&nbsp;purple, polygonal, pruritic, plane topped (flat), papules.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/565d6f11e42948179e07d4059d2b86bb.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Choose the incorrect statement regarding the condition shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "Serine proteases degrade keratin in the horny layer"
      },
      {
        "id": 2,
        "text": "Often associated with malodour and maceration"
      },
      {
        "id": 3,
        "text": "Mainly caused by corynebacterial infection"
      },
      {
        "id": 4,
        "text": "Usually associated with anhidrosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows numerous small, shallow, <strong>circular</strong> <strong>erosions</strong> with<strong> punched-out</strong> appearance over <strong>pressure bearing area</strong> of soles, characteristic of <strong>pitted keratolysis</strong>.</p>\n<p>It is usually associated with<strong> hyperhidrosis</strong> (not anhidrosis). Pitted keratolysis is caused most commonly due to infection by <strong>Corynebacterium</strong> and also by <em><strong>Kytococcus sedentarius</strong></em>. The pits are produced by <strong>serine proteases</strong> that can degrade keratin in the horny layer.</p>\n<p>Most patients are unaware of the condition due to <strong>minimal irritation</strong>. This condition is diagnosed by its clinical appearance. Cultures are not useful due to <strong>mixed infections</strong>.</p>\n<p>Treatment of hyperhidrosis slowly brings the condition under control including <strong>potassium permanganate soaks</strong>, aluminum chloride, and iontophoresis. Topical <strong>fucidin</strong> ointment may be used.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/089ae868ae1d4b2f974fae426f97cf9a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man with a chronic skin condition is noted to have areas of linear discontinuation over his skin. What is this finding called?",
    "choices": [
      {
        "id": 1,
        "text": "Ulcer"
      },
      {
        "id": 2,
        "text": "Excoriation"
      },
      {
        "id": 3,
        "text": "Erosion"
      },
      {
        "id": 4,
        "text": "Fissure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A&nbsp;<strong>linear</strong>&nbsp;<strong>crack </strong>or<strong>&nbsp;discontinuation</strong> of the skin surface is called a <strong>fissure</strong>.</p>\n<p>Option A: Ulcer refers to a loss of dermis and epidermis, often involving underlying tissue as well.</p>\n<p>Option B: Excoriation&nbsp;refers to loss of skin substance, specifically produced by&nbsp;scratching.</p>\n<p>Option C: Erosion refers to a&nbsp;loss of the epidermis, which heals without scarring.&nbsp;It commonly follows a blister.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa8ce19782724cc784f6a737b30907a3x1280x1142.JPEG"
    ]
  },
  {
    "text": "A 17-year-old girl presents with the following skin lesions. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acne vulgaris"
      },
      {
        "id": 2,
        "text": "Acne rosacea"
      },
      {
        "id": 3,
        "text": "Seborrheic dermatitis"
      },
      {
        "id": 4,
        "text": "Milia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows typical <strong>erythematous papules</strong> and<strong> nodules</strong> along with few <strong>whiteheads,</strong>\u00a0suggestive of<strong> acne vulgaris.</strong></p>\n<p><strong>Other options:</strong></p>\n<p>Option B: <strong>Acne rosacea</strong> is a disorder that appears mainly in people within <strong>30 to 50 years of age</strong>. The lesions are mainly present on the <strong>convexities</strong> <strong>of the face</strong> but don't lead to central crusting or scarring. It is followed by triggering factors such as sunlight exposure, emotional disturbances, spicy food, alcohol, etc.,</p>\n<p>Given below is an image showing acne rosacea:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/51ca4c1092d543b8bd38e802a62884b2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d50d73c22e64a3aae77eac573ef0b0dx720x524.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/681f37a3a3d946e897e6570766af0be7x1134x1324.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/142d9e6134a642e0a19f4e63259980cfx720x598.JPEG"
    ]
  },
  {
    "text": "A 40-year-old man develops thick yellowish discharge from his urethra 2 weeks after an unprotected sexual encounter. Which of the following is the recommended diagnostic test?",
    "choices": [
      {
        "id": 1,
        "text": "Culture and sensitivity"
      },
      {
        "id": 2,
        "text": "Nucleic acid amplification test"
      },
      {
        "id": 3,
        "text": "Enzyme Linked Immunosorbent Assay"
      },
      {
        "id": 4,
        "text": "Microscopy showing inclusion bodies"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Chlamydial urethritis</strong> is the likely diagnosis in this patient as it has an incubation period of <strong>1-3 weeks</strong>.<strong> Nucleic acid amplification test </strong>(NAAT) is the only diagnostic test recommended for detecting <em>Chlamydia</em>.</p>\n<p>The samples used are:</p>\n<ul>\n<li><strong>Men</strong> -&nbsp;first void urine&nbsp;</li>\n<li><strong>Women</strong> - vaginal or endocervical swabs</li>\n</ul>\n<p><strong>NAAT</strong> can only detect <em>Chlamydia</em> species, but <strong>cannot differentiate</strong> between <strong>LGV</strong> and <strong>non-LGV</strong> types. <strong>Genotyping</strong> of <em>Chlamydia</em>\u2010positive samples is needed to <strong>specifically</strong> diagnose LGV infection.</p>\n<p>Serology, cell culture, and microscopy have no role in routine screening or diagnosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are primary lesions of skin?",
    "choices": [
      {
        "id": 1,
        "text": "1,3,4"
      },
      {
        "id": 2,
        "text": "3,4,5"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "3,5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Purpura </strong>and<strong> vesicles </strong>are&nbsp;<strong>primary&nbsp;</strong>skin lesions.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What test is used to diagnose the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Gram\u2019s stain"
      },
      {
        "id": 2,
        "text": "KOH mount"
      },
      {
        "id": 3,
        "text": "Tissue smear"
      },
      {
        "id": 4,
        "text": "Wood\u2019s lamp"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image is suggestive of <strong>tinea</strong> <strong>faciei,&nbsp;</strong>a&nbsp;<strong>dermatophyte</strong> infection of the <strong>glabrous</strong> <strong>skin</strong> of the <strong>face</strong> (the mustache and beard areas of the adult male are excluded). It is diagnosed by <strong>KOH</strong> <strong>mount</strong>.&nbsp;</p>\n<p><em>Trichophyton mentagrophytes</em> and <em>T.rubrum</em> predominate, but <em>T.tonsurans, M. audouinii, </em>and<em> M. canis</em> are also common causes.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fa4771426bc648a79cf55e5a5e86a4c3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3b34ee62a4304d2095b8106d0b39aa70x1280x1151.8194640338504.JPEG"
    ]
  },
  {
    "text": "The ocular condition shown below is associated with:",
    "choices": [
      {
        "id": 1,
        "text": "Xeroderma pigmentosa"
      },
      {
        "id": 2,
        "text": "Incontinentia pigmenti"
      },
      {
        "id": 3,
        "text": "Neurofibromatosis"
      },
      {
        "id": 4,
        "text": "Louis-Bar syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows <strong>Lisch&rsquo;s nodules</strong>,&nbsp;the most common ocular manifestation of&nbsp;<strong>neurofibromatosis type 1.&nbsp; </strong></p>\n<p>These are&nbsp;<strong>melanocytic hamartomas</strong>, which are usually <strong>brown</strong> or<strong> yellow</strong> in color. They are found&nbsp;as round elevations on the surface of the<strong> iris,&nbsp;</strong>often visible to the naked eye. However, optimal evaluation is done by<strong>&nbsp;slit-lamp examination</strong>.&nbsp;</p>\n<p>They do not produce visual impairment.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4e36df327d5f43c8892815ae4e580666.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Scabietic burrows mainly involve which layer of the skin?",
    "choices": [
      {
        "id": 1,
        "text": "Stratum corneum"
      },
      {
        "id": 2,
        "text": "Stratum lucidum"
      },
      {
        "id": 3,
        "text": "Stratum granulosum"
      },
      {
        "id": 4,
        "text": "Stratum spinosum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Scabietic burrows are <strong>mainly</strong> seen in the&nbsp;<strong>stratum corneum.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A known case of leprosy presents with the following new-onset painful lesions. Which of the statements is false about this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is more common in tuberculoid type of leprosy"
      },
      {
        "id": 2,
        "text": "It may occur after completion of treatment"
      },
      {
        "id": 3,
        "text": "Keratitis, uveitis, dactylitis and orchitis may occur"
      },
      {
        "id": 4,
        "text": "It occurs due to immune complex deposition"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario of painful, erythematous nodules over the limbs in a patient with leprosy is suggestive of <strong>erythema nodosum leprosum</strong> or <strong>type 2 lepra </strong>reaction.</p>\n<p>It occurs in patients with <strong>multibacillary disease&nbsp;</strong>- lepromatous and borderline lepromatous leprosy.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/95cade4428954a9cb00e5de132a5ce4c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old woman in her 37th week of gestation develops the following intensely pruritic skin lesions. On examination, a few tense bullae are noted and mucous membranes are spared. Which of the following statement is incorrect regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "The initial site of involvement is the thigh"
      },
      {
        "id": 2,
        "text": "It resolves spontaneously in postpartum period"
      },
      {
        "id": 3,
        "text": "Associated with antibodies against BP180"
      },
      {
        "id": 4,
        "text": "Usually flares during delivery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario is suggestive of <strong>herpes gestationis </strong>or<strong> pemphigoid gestationis. </strong>The initial site of involvement is the <strong>periumbilical </strong>region.</p>\n<p>It is a variant of bullous pemphigoid in pregnancy and is associated with antibodies against <strong>BP180</strong>. It presents in the <strong>II&nbsp;</strong>or<strong> III trimesters</strong>&nbsp;with pruritic, grouped vesicles that later&nbsp;spread to the abdomen, trunk, thighs. It <strong>flares</strong> in the <strong>intrapartum</strong> period and tends to<strong>&nbsp;resolves spontaneously</strong> in the postpartum period. However, it can recur in subsequent pregnancies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4a5efef560534c42ae7c65a970f4346b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient who presented to the OPD with a papulosquamous lesion has the following nail finding. Histopathology of the skin lesion is unlikely to show which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Epidermal thickening"
      },
      {
        "id": 2,
        "text": "Suprapapillary thinning"
      },
      {
        "id": 3,
        "text": "Kogoj spongiform pustules"
      },
      {
        "id": 4,
        "text": "Pautrier's microabscess"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image showing<strong> nail pitting</strong> and <strong>salmon patches</strong> in fingernails are characteristic of psoriasis.<strong> Munro microabscess</strong> is seen in <strong>psoriasis</strong> whereas<strong> Pautrier's microabscess</strong> is seen in <strong>mycosis fungoides.</strong></p>\n<p>Histopathological features of psoriasis:</p>\n<ul>\n<li>Irregular epidermal thickening (<strong>acanthosis</strong>)</li>\n<li>Hyperkeratosis and parakeratosis</li>\n<li><strong>Suprapapillary thinning</strong></li>\n<li><strong>Clubbing</strong> of <strong>rete</strong> <strong>ridges</strong> at the base</li>\n<li><strong>Kogoj</strong> <strong>spongiform</strong> <strong>pustules&nbsp;</strong>(collection of neutrophils in Malpighian layer)</li>\n<li><strong>Munro</strong> <strong>microabscesses </strong>(collection of neutrophils in stratum corneum)</li>\n<li>Absence of stratum granulosum</li>\n<li>Dilated, tortuous blood vessels in the dermis</li>\n<li>Suprapapillary mononuclear leukocytic infiltrates</li>\n</ul>\n<p>Remember:&nbsp; <strong>M (Munro microabscess)</strong> is seen in <strong>P (Psoriasis)</strong> and <strong>P (Pautrier&rsquo;s microabscess)</strong> is seen in <strong>M (mycosis fungoides)</strong></p>\n<p>The image below shows histopathology of psoriasis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8b6f64576253458586f8bcf2434964c5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c2e0db71b1b14c5baaf5a5ca45c0ff1ax1280x1418.JPEG"
    ]
  },
  {
    "text": "Which of the following are causes of drug-induced pemphigus?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3, 5"
      },
      {
        "id": 2,
        "text": "1, 2, 5"
      },
      {
        "id": 3,
        "text": "2, 3, 4"
      },
      {
        "id": 4,
        "text": "2, 3, 5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Sodium valproate and isoniazid do not cause&nbsp;<strong>drug-induced pemphigus.</strong>&nbsp;The commonly implicated drugs include:</p>\n<ul>\n<li><strong>Penicillamine</strong> (most common)</li>\n<li><strong>ACE inhibitors&nbsp;</strong></li>\n<li>Antibiotics - <strong>penicillins</strong>, cephalosporins, rifampicin</li>\n<li>Piroxicam</li>\n<li>Glibenclamide</li>\n<li>Phenobarbital</li>\n<li>Aspirin</li>\n</ul>\n<p>Drug-induced pemphigus usually occurs after <strong>1 year</strong> of taking the drug. It is more common in individuals with other associated autoimmune conditions.</p>\n<p>Note: Common drugs (mnemonic - <strong>PCR</strong>) are&nbsp;<strong>p</strong>enicillamine, <strong>c</strong>aptopril, <strong>r</strong>ifampicin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a primary skin lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Crust"
      },
      {
        "id": 2,
        "text": "Atrophy"
      },
      {
        "id": 3,
        "text": "Purpura"
      },
      {
        "id": 4,
        "text": "Induration"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Purpura</strong> is a <strong>primary</strong> skin lesion. Crust, atrophy, and induration are secondary lesions.</p>\n<p>It is a condition with&nbsp;<strong>red</strong>&nbsp;or <strong>purple&nbsp;</strong>discolored <strong>spots</strong> on the skin that <strong>do not blanch</strong> on applying pressure. The spots are caused by <strong>bleeding underneath</strong> the <strong>skin.</strong> It is seen:</p>\n<ul>\n<li>Vasculitis</li>\n<li>Thrombocytopenia</li>\n<li>Vitamin C&nbsp;deficiency</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf24ed8054c444a18cdfa3b3a80e49b0x1280x1191.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c3a3d7bec719414489f0b278c515c461x1280x1381.JPEG"
    ]
  },
  {
    "text": "Which of the following statements about alopecia areata is true?",
    "choices": [
      {
        "id": 1,
        "text": "Spontaneous remission is seen in 20% of patients"
      },
      {
        "id": 2,
        "text": "Alopecia universalis denotes loss of all scalp hair"
      },
      {
        "id": 3,
        "text": "Ophiasis means loss of hair along the back of scalp"
      },
      {
        "id": 4,
        "text": "Alopecia totalis denotes loss of all body hair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hair loss over the back of the head is called <strong>ophiasis</strong> because it creeps like a <strong>snake</strong> towards both ears.</p>\n<p>Alopecia areata causes <strong>non-scarring</strong> hair loss in well-circumscribed patches. It peaks between 20-40 years but can occur at any age.</p>\n<p>In case of <strong>limited</strong> patchy hair loss present for &lt; 1 year, <strong>spontaneous remission</strong> is seen in <strong>80%</strong> of patients. Sometimes the patches can <strong>coalesce</strong> to cause complete loss of hair.</p>\n<p>Alopecia <strong>totalis</strong> means loss of all <strong>scalp</strong> hair and alopecia <strong>universalis</strong> means loss of all <strong>body</strong> hair.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Bindi Leukoderma is caused by which chemical?",
    "choices": [
      {
        "id": 1,
        "text": "Mono-benzyl ether of Hydroquinone (MBH)"
      },
      {
        "id": 2,
        "text": "Crocein Scarlet MOO and Solvent Yellow 3"
      },
      {
        "id": 3,
        "text": "p-phenylenediamine (PPD)"
      },
      {
        "id": 4,
        "text": "Para Tertiary butylphenol (PTBP)"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Bindi leukoderma is caused by <strong>para tertiary butylphenol (PTBP)</strong> present in adhesive sticker bindi.</p>\n<ul>\n<li>This is called as <strong>Contact Leukoderma</strong> or <strong>Chemical Leukoderma</strong> in which the chemical increases sensitivity and induces apoptosis of the melanocytes in the area of contact.&nbsp;</li>\n<li>There is also evidence that <strong>azo dyes</strong>, by virtue of structural similarity to tyrosine, can <strong>directly inhibit melanogenesis</strong> by competing with that amino acid for <strong>binding with tyrosinase enzyme.</strong></li>\n</ul>\n<p>Common chemicals in the Indian set up which cause Chemical leukoderma are:</p>\n<table style=\"height: 233px;\" width=\"336\">\n<tbody>\n<tr>\n<td style=\"width: 159.766px;\">Bindi Leukoderma</td>\n<td style=\"width: 163.516px;\"><strong>Para Tertiary butyl phenol (PTBP)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Synthetic leather, rubber slippers, Latex condoms, rubber gloves</td>\n<td style=\"width: 163.516px;\">\n<p><strong>Mono-benzyl ether of Hydroquinone (MBH)</strong></p>\n<p><strong>-</strong>Rubber Antioxidant</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Hair dye</td>\n<td style=\"width: 163.516px;\"><strong>p-phenylenediamine (PPD)</strong></td>\n</tr>\n<tr>\n<td style=\"width: 159.766px;\">Alta (red colour like henna)</td>\n<td style=\"width: 163.516px;\"><strong>Crocein Scarlet MOO and Solvent Yellow 3</strong> (azo dyes)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3f88529817824c63b0ee93a8eeec6fa2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/68a2d09f47c8453a86f8f293db25b2e2x512x401.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e98d079c9ccc4999aeb7779574039be4x512x370.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b510338bdedd4dec9b14c58befaeab11x512x371.PNG"
    ]
  },
  {
    "text": "A 20-year-old Nigerian tourist presents with the following painless lesion. He had noticed a hard nodule over the same area two weeks ago in his home country, prior to coming to India. As he had no pain, he did not pay attention to the progression of the ulcer. What is the causative agent?",
    "choices": [
      {
        "id": 1,
        "text": "M. avium-intracellulare"
      },
      {
        "id": 2,
        "text": "M. ulcerans"
      },
      {
        "id": 3,
        "text": "M. kansasi"
      },
      {
        "id": 4,
        "text": "M. tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is that of a <strong>Buruli ulcer, </strong>which is caused by<strong> <em>Mycobacterium ulcerans</em></strong>.</p>\n<p>It is the<strong> third most common</strong> mycobacterial skin infection in immunocompetent people. It is endemic to <strong>Africa</strong> and <strong>Australia</strong>, where it affects children and elderly people. It starts as a <strong>nodule</strong> or <strong>papule</strong> which progresses further to form an extensive, <strong>necrotic ulcer</strong>, exposing muscle and tendon. Most lesions occur on the<strong> lower extremities</strong>. Healing is slow.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bf88e25ca79b4b82a329b9c9d04597f4.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/935645a5d0794d08b75c9ca9bccafb28x1280x1103.9774330042312.JPEG"
    ]
  },
  {
    "text": "Which layer of the epidermis is primarily infected by dermatophytes?",
    "choices": [
      {
        "id": 1,
        "text": "Stratum corneum"
      },
      {
        "id": 2,
        "text": "Stratum granulosum"
      },
      {
        "id": 3,
        "text": "Stratum basale"
      },
      {
        "id": 4,
        "text": "Stratum spinosum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Dermatophytes </strong>infect and survive only in the <strong>dead keratin layers</strong> of skin (<strong>stratum corneum</strong>), hair and nails as they are <strong>keratinophillic</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 31-year-old male patient presents with fever and painful lesions with mucopurulent discharge for 10 days. Histochemical examination of the discharge with Gomori methenamine silver (GMS) stain was negative. Which is the most likely organism to be seen in the culture performed from the lesions?",
    "choices": [
      {
        "id": 1,
        "text": "Mycobacteria"
      },
      {
        "id": 2,
        "text": "Dermatophyte"
      },
      {
        "id": 3,
        "text": "Actinomycetes"
      },
      {
        "id": 4,
        "text": "Staphylococcus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image showing multiple <strong>skin</strong> <strong>abscesses</strong> with <strong>mucopurulent\u00a0</strong><strong>discharge</strong> through multiple <strong>sinuses</strong> which does not show filamentous organisms on staining with Gomori methenamine silver (GMS negative) is suggestive of <strong>botryomycosis</strong>. It is caused by <strong>staphylococci</strong>.</p>\n<p>Botryomycosis is a misnomer. It is a bacterial infection caused usually by staphylococcus. It is a <strong>chronic</strong> <strong>granulomatous</strong> reaction to bacterial infection, containing <strong>granules</strong> resembling the sulfur granules of actinomycosis.</p>\n<p><strong>Etiological agents</strong> include:</p>\n<ul>\n<li><em>Staphylococcus aureus\u00a0</em>(most common)</li>\n<li><em>Pseudomonas</em></li>\n<li><em> Escherichia coli</em></li>\n<li><em> Proteus</em></li>\n<li><em> Streptococcus</em>.</li>\n</ul>\n<p>Most lesions are on the <strong>limbs</strong>, but other sites including the perianal region and the face are affected.</p>\n<p>Treatment is with <strong>antibiotics</strong> against <em>S.aureus</em> - flucloxacillin or erythromycin.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/55f0e18b8c5140fabfcaa8197a939154.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old post-renal transplant patient on cyclosporine presented with the following lesion. You suspect it to be a cancerous growth. Which of the following statements regarding this condition is false?",
    "choices": [
      {
        "id": 1,
        "text": "It has a high grade malignant potential"
      },
      {
        "id": 2,
        "text": "The most common site is extremities"
      },
      {
        "id": 3,
        "text": "Lesions are usually multifocal"
      },
      {
        "id": 4,
        "text": "Lymph nodes may be involved"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image showing&nbsp;<strong>purple-colored plaques</strong> on the ala and tip of the nose in an <strong>immunocompromised</strong> patient is suggestive of <strong>Kaposi sarcoma</strong>. It&nbsp;is mostly seen in <strong>extremities</strong>,&nbsp;commonly on <strong>feet</strong> and occasionally on hands, ears, and <strong>nose</strong>, and has a&nbsp;<strong>low-grade</strong>&nbsp;malignant potential.</p>\n<p>Skin lesions are usually purple and <strong>multifocal</strong> which eventually evolve into plaques and tumors. <strong>Lymph nodes</strong>, mucosae, and viscera may be involved as the disease progresses, although this can occur without skin involvement.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/067ec00b9afe48ceb2800d83d2770286.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which skin condition is shown in the picture below?",
    "choices": [
      {
        "id": 1,
        "text": "Nummular dermatitis"
      },
      {
        "id": 2,
        "text": "Asteatotic eczema"
      },
      {
        "id": 3,
        "text": "Berloque dermatitis"
      },
      {
        "id": 4,
        "text": "Atopic eczema"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A <strong>typical coin lesion</strong> is shown which points to <strong>nummular dermatitis.</strong></p>\n<p>A <strong>solitary plaque</strong> with small <strong>vesicles</strong> can be seen.</p>\n<p>The diagnostic lesion of nummular dermatitis is a well-demarcated <strong>coin-shaped erythematous plaque</strong> with vesicles surrounding it.</p>\n<p style=\"text-align: left;\">Other options:</p>\n<p><strong>Asteatotic eczema:</strong> Develops in <strong>very dry skin</strong>, has a <strong>crazy paving pattern appearance</strong></p>\n<p><strong>Berloque dermatitis:</strong> Not necessarily discoid in shape. Present along the area of spraying and dripping of perfume.</p>\n<p><strong>Atopic Eczema:\u00a0</strong>Presents as an itchy rash. Not necessarily discoid in shape.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f8ab85cde3cf485bb1019fd0d3d1a0b0.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old professional mountain climber presents with the following lesions over his leg. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Scabies"
      },
      {
        "id": 2,
        "text": "Cutaneous larva migrans"
      },
      {
        "id": 3,
        "text": "Allergic contact dermatitis"
      },
      {
        "id": 4,
        "text": "Tinea corporis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows<strong> serpiginous </strong>or serpent-like skin lesions, which are characteristically seen in&nbsp;<strong>cutaneous larva migrans </strong>or ground itch.</p>\n<p>It is caused by the <strong>larvae</strong> of various&nbsp;hookworm or<strong> <em>Ancylostoma</em></strong>&nbsp;species. The parasite is acquired from <strong>direct skin contact</strong> with soil <strong>contaminated</strong> by dog or cat <strong>feces</strong>. It is<strong>&nbsp;</strong>common following travel to endemic or tropical areas and<strong>&nbsp;</strong>symptoms develop within the first<strong> 2 weeks.&nbsp;</strong></p>\n<p>The site of entry is marked by an inflamed papule, often located between the toes.&nbsp;Serpentine or linear single-track lines later appear as the larvae migrate through the epidermis. The lesions can enlarge as much as 1 to 2 cm per day.</p>\n<p>The first-line treatment is oral <strong>ivermectin</strong> at&nbsp;200 &mu;g/kg. Oral<strong> albendazole </strong>is an alternative treatment.</p>\n<p>Note: <strong>Larva currens&nbsp;</strong>is caused by the migrating larva of <strong><em>Strongyloides stercoralis</em></strong>. It also produces <strong>serpiginous</strong> lesions and can be differentiated by the<strong> faster rate</strong> of progression and haphazard distribution of lesions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cfc07505627f4c16b5ecbb9069da53b8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/79f065c8a3754f0787333ca4121c9a34x682x600.JPEG"
    ]
  },
  {
    "text": "On examining a patient with a history of a long-standing rash, you notice that one of her nails has the following appearance. What condition does this patient suffer from?",
    "choices": [
      {
        "id": 1,
        "text": "Lichen planus"
      },
      {
        "id": 2,
        "text": "Scleroderma"
      },
      {
        "id": 3,
        "text": "Psoriaisis"
      },
      {
        "id": 4,
        "text": "Systemic Lupus Erythematosus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>dorsal pterygium</strong>, which is a characteristic nail finding in <strong>lichen planus</strong>.</p>\n<p>It is a <strong>wing-shaped deformity</strong> of the dorsal nail due to a <strong>central fibrotic band</strong> that divides the nail into two parts in the proximal area.</p>\n<p><strong>Ventral pterygium</strong> or <strong>pterygium inversum unguis</strong> refers to the <strong>adherence</strong> of the distal portion of the <strong>nail bed</strong> to the ventral surface of the <strong>nail plate</strong>. It can be idiopathic or due to trauma, systemic sclerosis, Raynaud phenomenon. It makes the trimming of nails very painful.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b777befca41f410f8435d730cb972f88.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 19-year-old woman presented to the hospital with complaints of progressive shortness of breath, chest pain, and lower extremity edema over the past month. Her initial laboratory values are given below. A renal biopsy showed the following. Which of the following antibodies is considered to be most specific for this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "SS-A(Ro)"
      },
      {
        "id": 2,
        "text": "Anti-Sm"
      },
      {
        "id": 3,
        "text": "Anti ds-DNA"
      },
      {
        "id": 4,
        "text": "Antihistone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical details and histopathology are suggestive of <strong>systemic lupus erythematosus</strong> (SLE).<strong> Anti\u2010Smith</strong> (anti\u2010Sm)<strong> antibodies</strong> are present in only approximately 30% of patients with SLE, but are considered highly&nbsp;<strong>specific</strong> for the disease and are included in the ACR criteria.</p>\n<p>Most <strong>sensitive</strong>&nbsp;antibody:&nbsp;<strong>ANA</strong></p>\n<p>In the image below, the glomerulus is hypercellular (endocapillary proliferation). Glomerular capillary loops appear circumferentially thickened, forming a&nbsp;\"wire loop\" lesion, which is&nbsp;classically seen in class IV or diffuse proliferative lupus nephritis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/04e984b28c0c46ba9ad231e2118bdec8.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b7389cdbd5b64d4c905c256d19e1dfc1x1280x911.JPEG"
    ]
  },
  {
    "text": "An elderly Australian man presented with a slowly progressing lesion on his scalp for 3 years. Which of the following is considered as a high-risk susceptibility gene for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "CDKN1A"
      },
      {
        "id": 2,
        "text": "CDKN2A"
      },
      {
        "id": 3,
        "text": "CDKN3A"
      },
      {
        "id": 4,
        "text": "CDKN4A"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows a&nbsp;<strong>flat</strong>, <strong>brownish</strong>, irregularly shaped lesion suggestive of&nbsp;<strong>melanoma</strong>. The cyclin\u2010dependent kinase (CDK) inhibitor 2A gene (<strong>CDKN2A</strong>), located on chromosome <strong>9p21</strong>, is the <strong>best established high\u2010risk locus</strong> for melanoma susceptibility.</p>\n<p>CDKN2A mutations are found in approximately <strong>40%</strong> of individuals with familial melanoma.</p>\n<p>In melanoma, tumor suppressors that play a protective role against melanoma are mutated. CDKN2A encodes via <strong>alternative splicing</strong> for two proteins involved in cell cycle regulation: <strong>p16/Ink4a and&nbsp;p14/Arf</strong>, both act as <strong>tumor suppressors</strong> through the Rb and p53 cancer pathways, respectively.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/25560502f01d43039d477a52a915afcd.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A mother brought her daughter to the dermatologist with multiple spots on her face. The spots were increased after they came back from a vacation in Hawaii. Which of the following statements is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It has an autosomal dominant inheritance"
      },
      {
        "id": 2,
        "text": "Increased number of melanocytes are seen"
      },
      {
        "id": 3,
        "text": "It is associated with xeroderma pigmentosa"
      },
      {
        "id": 4,
        "text": "It is caused by increased melanin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient has <strong>dark brown macules</strong> on her face, that <strong>increase</strong> on<strong>&nbsp;sunlight exposure</strong>.<strong>&nbsp;</strong>This is suggestive of&nbsp;<strong>freckles</strong> or<strong> ephelis,</strong>&nbsp;which<strong>&nbsp;</strong>are produced due to <strong>increased melanin</strong> production by melanocytes on exposure to UV rays<strong>&nbsp;</strong>(with a normal number of melanocytes).</p>\n<p>It is transmitted in an <strong>autosomal dominant</strong> pattern.&nbsp;They are seen in a number of inherited and acquired disorders including <strong>xeroderma pigmentosum</strong>, neurofibromatosis, and progeria. Freckles are common in <strong>type 1</strong> and<strong> type 2 skin types</strong> of Fitzpatrick Classification.</p>\n<p>First-line treatment is the use of a <strong>high SPF sunscreen</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5388f52d8da749b1b56e73802de16cca.jpg"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ab9122ec7c2145fabe85f0ba597d4838x1199x1065.JPEG"
    ]
  },
  {
    "text": "Deficiency of which of the following nutrients will not cause the finding shown in the image given below?",
    "choices": [
      {
        "id": 1,
        "text": "Essential fatty acids"
      },
      {
        "id": 2,
        "text": "Vitamin A"
      },
      {
        "id": 3,
        "text": "Vitamin C"
      },
      {
        "id": 4,
        "text": "Vitamin D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>phrynoderma. </strong>It is <strong>not</strong> associated with<strong> vitamin D deficiency</strong>.</p>\n<p>Phrynoderma (<strong>toad skin</strong>) is common in children in the 5-15 year age group. Earlier thought to be purely due to vitamin A deficiency, phrynoderma has now been associated with other nutritional deficiencies, including those of&nbsp;<strong>B complex</strong>, <strong>ribofla&shy;vin, vitamin C, vitamin E, </strong>and<strong> essential fatty acids&nbsp;</strong>and<strong> malnutrition.</strong></p>\n<p>It is a non-specific finding that can be associated with various conditions:&nbsp;</p>\n<div class=\"page\" title=\"Page 2188\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>&bull; Liver cirrhosis<br /> &bull; Malabsorption syndromes<br /> &bull; Anorexia nervosa<br /> &bull; Alcohol abuse<br /> &bull; Nutritional deficiency following bariatric surgery</p>\n</div>\n</div>\n</div>\n</div>\n<p>It manifests as <strong>groups of papules</strong>, each one around 3-4 mm in diameter, with a <strong>central keratotic plug</strong>.&nbsp;The papules have a <strong>follicular distribution</strong> and give the skin a rough texture.&nbsp;The <strong>elbows</strong> and<strong> knees</strong> are the<strong> most commonly</strong> affected areas, but the buttocks and extensor surfaces of the limbs may also be affected.</p>\n<p>All patients with phrynoderma should have their vitamin A levels measured.&nbsp;</p>\n<p>Treatment involves the correction of poor diet and administration of&nbsp;<strong>multivitamin</strong> preparations.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c766318622f84b2c9588319ddfa74bda.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old girl with pustular acne comes to your clinic for follow-up saying that her acne has not reduced even after taking medications for 6 months. Which of the following drugs will you now prescribe?",
    "choices": [
      {
        "id": 1,
        "text": "Oral erythromycin"
      },
      {
        "id": 2,
        "text": "Topical steroids"
      },
      {
        "id": 3,
        "text": "Oral retinoids"
      },
      {
        "id": 4,
        "text": "Oral tetracyclines"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Oral isotretinoin,&nbsp;</strong>an oral retinoid&nbsp;is indicated for the treatment of <strong>recalcitrant acne.</strong></p>\n<p>Recalcitrant acne is&nbsp;<strong>poorly responsive</strong> acne,<strong> less than 50% improvement</strong> after<strong> 6 months</strong> of therapy with combined oral and topical <strong>antibiotics.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to the dermatology clinic complaining that a birthmark that was asymptomatic has now become pruritic with the following appearance. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic superficial scaly dermatitis"
      },
      {
        "id": 2,
        "text": "Nummular dermatitis"
      },
      {
        "id": 3,
        "text": "Melanoma"
      },
      {
        "id": 4,
        "text": "Halo dermatitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows an&nbsp;<strong>eczematous ring</strong>&nbsp;surrounding a <strong>melanocytic naevus</strong>&nbsp;(birthmark),&nbsp;suggestive of <strong>halo dermatitis</strong>.&nbsp;</p>\n<p>It is also known as <strong>Meyerson nevus</strong>. Histology shows a benign naevus surrounded by a dermal lymphocytic and eosinophilic infiltrate, with acanthosis, spongiosis, and parakeratosis.</p>\n<p>The condition usually <strong>resolves spontaneously</strong> within few months <strong>without</strong><strong>&nbsp;involution</strong> of the nevus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7081e820af1b4651a9a370c285223363.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A teenager presents to the dermatologist with the following finding. Which of the following is not a causative factor for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Androgen"
      },
      {
        "id": 2,
        "text": "Oily food"
      },
      {
        "id": 3,
        "text": "Bacterial proliferation"
      },
      {
        "id": 4,
        "text": "Hypercornification of duct"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A teenager presenting with papulopustular lesions on the face and the presence of comedones is most likely suffering from <strong>acne</strong>&nbsp;<strong>vulgaris</strong>.&nbsp;<strong>Oily skin</strong> due to excessive <strong>sebum</strong> production is one of the causative factors of acne, but&nbsp;<strong>oily food</strong>&nbsp;is <strong>not directly implicated</strong></p>\n<p>Acne results from the combination of:</p>\n<ul>\n<li><strong>Increased sebaceous gland activity</strong>&nbsp;under the influence of androgens - oily skin</li>\n<li>Abnormal follicular differentiation with increased keratinization- <strong>hypercornification </strong>of&nbsp;<strong>duct </strong>due to&nbsp;increased IL-1</li>\n<li><strong>Microbial hypercolonization</strong> of the follicular canal leading to its inflammation.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e7c4ab056b37424ea20222e43f5cecad.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following cells act as slow-adapting touch receptors?",
    "choices": [
      {
        "id": 1,
        "text": "Meissner corpuscle"
      },
      {
        "id": 2,
        "text": "Pacinian corpuscle"
      },
      {
        "id": 3,
        "text": "Langerhans cells"
      },
      {
        "id": 4,
        "text": "Merkel cells"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Merkel cells&nbsp;</strong>(Haascheiben cells, Merkel-Ranvier cells, or tactile epithelial cells)&nbsp;are oval-shaped <strong>mechanoreceptors</strong> essential for <strong>light touch sensation</strong> and found in the skin of vertebrates.</p>\n<p>They are seen among the <strong>b</strong><strong>asal keratinocytes</strong> and contain <strong>desmosomes</strong>. They are <strong>abundant</strong> in the highly sensitive areas of the skin like&nbsp;<strong>fingertips&nbsp;</strong>and synapse with somatosensory afferent nerve fibers.</p>\n<p>These cells may become malignant and form a <strong>Merkel</strong> <strong>cell</strong> <strong>carcinoma&nbsp;</strong>which is aggressive and difficult to treat.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/79a7e7e8d79640e79e6b463a48b10fa6x1280x1410.JPEG"
    ]
  },
  {
    "text": "An 11-month-old infant is brought with the given finding for the past 1 month. The mother is concerned that the lesions are itchy as the baby has been fussy and not sleeping well.  What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "X-linked ichthyosis"
      },
      {
        "id": 2,
        "text": "Seborrheic dermatitis"
      },
      {
        "id": 3,
        "text": "Atopic dermatitis"
      },
      {
        "id": 4,
        "text": "Ichthyosis vulgaris"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This image shows <strong>fish-like scales</strong> on the skin that is characteristic of&nbsp;<strong>ichthyosis</strong> <strong>vulgaris.</strong></p>\n<p>It&nbsp;is an <strong>autosomal dominant</strong> condition that is associated with <strong>filaggrin</strong> mutations. This leads to a reduction in the <strong>natural moisturizing factors</strong> (NMF) in the skin. It develops at<strong> 3-12 months</strong> of life and presents with generalized, itchy,&nbsp;<strong>small</strong>, <strong>light-grey</strong> scales and xerosis that are more marked over <strong>extensor</strong> surfaces and <strong>trunk</strong>. The groin and flexures are spared.&nbsp;</p>\n<p>X-linked recessive ichthyosis&nbsp;occurs only in males. It results in larger, dirty-brown scales.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2dfd2d61eb70493fba6361830223d545.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Systemic capillary leak syndrome is commonly known as _______.",
    "choices": [
      {
        "id": 1,
        "text": "Gleich syndrome"
      },
      {
        "id": 2,
        "text": "Clarkson syndrome"
      },
      {
        "id": 3,
        "text": "Gianotti\u2013Crosti syndrome"
      },
      {
        "id": 4,
        "text": "Leopard syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Systemic capillary leak syndrome</strong>, commonly known as <strong>Clarkson syndrome</strong> is a rare syndrome in which there are dramatic recurrent episodes of <strong>exudation of fluid</strong> into various organs and may involve the skin.</p>\n<ul>\n<li><strong>Angioedema</strong> is seen.</li>\n<li>A severe shock\u2010like state may ensue and the eventual mortality is high.</li>\n<li>There is an immunoglobulin G <strong>(IgG) paraproteinaemia</strong>.</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<ul>\n<li>\n<p>Gleich Syndrome is Episodic angio\u2010oedema with eosinophilia.</p>\n</li>\n<li>\n<p><span class=\"Apple-converted-space\">Gianotti\u2013Crosti syndrome:\u00a0</span>Papular acrodermatitis of childhood/infancy usually caused by a viral infection.</p>\n</li>\n<li>LEOPARD syndrome is a familial lentiginosis syndrome (Lentigines, ECG changes, Ocular hyperteleorism, Pulmonary stenosis, Abnormal genitalia, Retardation of growth, Deafness).</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most accurate diagnostic test for Pemphigus vulgaris?",
    "choices": [
      {
        "id": 1,
        "text": "Indirect immunofluorescence testing"
      },
      {
        "id": 2,
        "text": "Direct immunofluorescence testing"
      },
      {
        "id": 3,
        "text": "Histopathology"
      },
      {
        "id": 4,
        "text": "Enzyme Linked Immunosorbent Assay (ELISA)"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Direct immunofluorescence test</strong> is the most accurate test to diagnose <strong>Pemphigus Vulgaris.</strong></p>\n<p>Direct Immunofluorescence uses <strong>anti-IgG antibodies</strong> which detects the <strong>anti-desmoglein IgG antibodies</strong> deposited on the <strong>Desmosomes</strong>. These desmosomes are present at cell junctions; this leads to <strong>the fishnet pattern.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2dea83b13d534a539f8fd2364f482fbax1280x1302.JPEG"
    ]
  },
  {
    "text": "A 50-year-old man is referred to the dermatology OPD with the following painful and malodorous skin lesions over his trunk, face, and scalp. He also has longitudinal erythronychia and distal v-shaped nicks on his nails. Which of the following genes is mutated in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "ATP 2C2"
      },
      {
        "id": 2,
        "text": "ATP 2A2"
      },
      {
        "id": 3,
        "text": "ATP 3A2"
      },
      {
        "id": 4,
        "text": "ATP 2C1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image showing greasy <strong>hyperkeratotic papules</strong> and the <strong>nail changes</strong> described point to a diagnosis of <strong>Darier&rsquo;s</strong> <strong>disease</strong>. It occurs due to a mutation of the <strong>ATP2A2</strong> gene.</p>\n<p>Darier's disease is an <strong>autosomal dominant</strong> condition that occurs due to dysfunction of the&nbsp;<strong>SERCA2 </strong>calcium channel<strong>&nbsp;</strong>(encoded by ATP2A2 gene),&nbsp;which is essential for desmosomal function. It results in <strong>acantholysis</strong> and <strong>dyskeratosis</strong>.&nbsp;</p>\n<p>The papules begin over sun-exposed areas and gradually expand to form plaques over the seborrheic areas. The following nail changes, also shown in the image below, are characteristic of Darier's disease:</p>\n<ul>\n<li>Longitudinal erythronychia</li>\n<li>Longitudinal leukonychia</li>\n<li>Distal v-shaped nicks</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/37f8e734303f4fdeab007a89b61ff3fc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/970e4aa636f041af8a20a4147f323071x510x552.GIF"
    ]
  },
  {
    "text": "Which of the following statements is not true regarding dapsone?",
    "choices": [
      {
        "id": 1,
        "text": "It acts by inhibiting folic acid synthesis"
      },
      {
        "id": 2,
        "text": "Poor oral absorption"
      },
      {
        "id": 3,
        "text": "It can cause DDS syndrome"
      },
      {
        "id": 4,
        "text": "Can cause hemolysis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Dapsone has<strong> good oral absorption</strong> and it has a<strong> long half\u2010life, </strong>averaging 28 hours.</p>\n<p>Dapsone or<strong> DDS </strong>(4,4\u2010diamino-diphenyl sulphone) is <strong>weakly bactericidal</strong> due to the inhibition of dihydropteroate synthase, which <strong>inhibits folate synthesis.</strong> It is a part of the multidrug therapy for leprosy.</p>\n<p>Adverse effects include:</p>\n<ul>\n<li>Mild hemolysis and<strong>&nbsp;</strong>anemia</li>\n<li>Psychosis.</li>\n<li><strong>DDS syndrome</strong> or<strong>&nbsp;</strong>five-week dermatitis - occurs <strong>5-6 weeks </strong>after starting dapsone. It may be fatal. It presents with:&nbsp;\n<ul>\n<li>Exfoliative dermatitis</li>\n<li>Hepatosplenomegaly</li>\n<li>Lymphadenopathy</li>\n<li>Fever</li>\n<li>Hepatitis.&nbsp;</li>\n</ul>\n</li>\n</ul>\n<p><strong>Uses of dapsone:</strong>&nbsp;</p>\n<ul>\n<li><strong>Steroid sparing</strong> drug - long-term therapy for&nbsp;autoimmune blistering diseases</li>\n<li>Adjuvant therapy -&nbsp;bronchial asthma</li>\n<li>CNS-protective -&nbsp;seizure disorders, strokes, glioblastoma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements describes the pathophysiology of erythema induratum of Bazin?",
    "choices": [
      {
        "id": 1,
        "text": "Inoculation of M. tuberculosis through trauma"
      },
      {
        "id": 2,
        "text": "Hypersensitivity reaction to M. tuberculosis"
      },
      {
        "id": 3,
        "text": "Direct contiguous spread of infection"
      },
      {
        "id": 4,
        "text": "Hematogenous spread of M. tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Erythema induratum of Bazin</strong> is a <strong>hypersensitivity reaction</strong> due to tuberculosis.</p>\n<p>It is the <strong>most common</strong> form of <strong>tuberculid. </strong>It mostly affects middle-aged females.</p>\n<p>The pathology is granulomatous <strong>vasculitis</strong> and<strong>&nbsp;panniculitis</strong>.&nbsp;It classically presents as crops of small, tender, erythematous nodules or plaques on the calves, which may ulcerate.</p>\n<p>The following image shows plaques over the calf region:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e955cd3a816a4e649d99a944873da3c8x800x1136.JPEG"
    ]
  },
  {
    "text": "A man was seen for an asymptomatic spotty eruption, of approximately 2 weeks duration, that are localized predominantly to the anterior chest, abdomen, and neck regions. Physical examination revealed several scattered light blue-red, oval to round spots. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pediculosis corporis"
      },
      {
        "id": 2,
        "text": "Pediculosis capitis"
      },
      {
        "id": 3,
        "text": "Pediculosis pubis"
      },
      {
        "id": 4,
        "text": "Scabies"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Maculae cerulae </strong>are blue-red/grey-colored macules on the skin <strong>characteristically</strong> seen in <strong>pediculosis pubis</strong> which is caused due to the infestation by <strong>pubic</strong> <strong>louse</strong> (<strong><em>P</em><em>thirus pubis</em></strong>/crab louse). They mark the&nbsp;hemosiderin-stained purpuric spots where lice have fed.</p>\n<p>The image given below shows pediculosis pubis- countless white spots and lice in pubic hairs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a71d1bce7f42492dbcc1203772d781b3x508x190.PNG"
    ]
  },
  {
    "text": "Which of the following is responsible for the transmission of erysepeloid infection in humans?",
    "choices": [
      {
        "id": 1,
        "text": "Droplet"
      },
      {
        "id": 2,
        "text": "Parasite"
      },
      {
        "id": 3,
        "text": "Mosquito bite"
      },
      {
        "id": 4,
        "text": "Contact with animal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In<strong> erysepeloid,</strong>&nbsp; human infection is contracted by <strong>direct contact</strong> with<strong> animals</strong>.</p>\n<p>Erysipeloid is an acute infection with <em><strong>Erysipelothrix rusiopathiae</strong></em>, a Gram\u2010positive bacillus living mainly on dead animal matter. It causes diseases in many animals, especially in pigs. It usually affects&nbsp;<strong>butchers,</strong> <strong>cooks</strong>, <strong>fishermen, farmers,</strong> and <strong>veterinary</strong> surgeons.</p>\n<p>About 3 days after inoculation, hot violaceous and <strong>tender erythema</strong> develops around the inoculation site and spreads centrifugally.</p>\n<p>Without treatment, <strong>healing</strong> normally occurs <strong>spontaneously</strong> in 2 weeks without desquamation or suppuration.</p>\n<p>Antibiotic therapy: <strong>Penicillin</strong>, <strong>erythromycin,</strong> and <strong>ciprofloxacin</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96a986f1bc484197aa4225403aea92f4x469x740.PNG"
    ]
  },
  {
    "text": "A middle-aged man presents with a genital ulcer, as shown below. Microscopy of a sample from the lesion shows Donovan bodies. Which of the following is false about this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Primary ulcer heals without scarring"
      },
      {
        "id": 2,
        "text": "It has an incubation period of 8 to 80 days"
      },
      {
        "id": 3,
        "text": "It has the potential for malignant transformation"
      },
      {
        "id": 4,
        "text": "Caused by Calymmatobacterium granulomatis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Donovan bodies </strong>are characteristic of <strong>donovanosis</strong> or<strong> granuloma inguinale</strong>. The primary ulcer, if left untreated, heals spontaneously with <strong>scarring</strong> or persists and <strong>spreads</strong>.</p>\n<p>Granuloma inguinale is a sexually transmitted infection caused by <strong><em>Calymmatobacterium</em> <em>granulomatis</em></strong>&nbsp;/&nbsp;<em>Kl</em><em>e</em><em>bsiel</em><em>la</em><em> granulomatis.</em> The <strong>incubation</strong> period varies from<strong> 8-80 days</strong>, the average being<strong> 50 days</strong>.</p>\n<p>Four types of lesions have been described in this condition:</p>\n<ul>\n<li><strong>Ulcerogranulomatous -</strong>&nbsp;<strong>most common</strong> type with <strong>painless beefy red</strong> ulcers<strong>. </strong>They are also highly <strong>vascular&nbsp;</strong>and <strong>bleed</strong> on touch.</li>\n<li><strong>Hypertrophic -</strong>&nbsp;usually with a raised irregular edge</li>\n<li><strong>Necrotic -</strong>&nbsp;offensive smelling ulcer that causes tissue destruction</li>\n<li><strong>Sclerotic</strong> or <strong>cicatricial -</strong>&nbsp;with fibrous or scar tissue</li>\n</ul>\n<p>Primary lesions can occur on genital and extragenital sites. Untreated genital ulcers are followed by genital <strong>disfigurement </strong>and have the potential for <strong>malignant change.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/64ed62867da5410c90bd788071613bfd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a275b71510bf448b824dacd142b98b65x1280x1198.758815232722.JPEG"
    ]
  },
  {
    "text": "A woman presents with painful lesions, during the course of her treatment for leprosy, that resolve with medications, as seen below. Which of the following statements is incorrect regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is seen in the borderline spectrum of disease"
      },
      {
        "id": 2,
        "text": "Systemic symptoms are not a feature"
      },
      {
        "id": 3,
        "text": "It presents with new red, painful lesions"
      },
      {
        "id": 4,
        "text": "Neuritis and nerve abscesses may occur"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario of <strong>painful lesions</strong> in the context of <strong>leprosy treatment</strong> is suggestive of <strong>type 1 lepra reaction</strong>, which presents with <strong>inflammation</strong> of <strong>existing skin lesions</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/25be6f7b3218410ba0b55d7989dbf5c7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is diagnosed by the presence of multinucleated giant cells on a Tzanck smear?",
    "choices": [
      {
        "id": 1,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 2,
        "text": "Molluscum contagiosum"
      },
      {
        "id": 3,
        "text": "Varicella-zoster infection"
      },
      {
        "id": 4,
        "text": "Bullous pemphigoid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Multinucleated giant cells</strong> on a Tzanck smear&nbsp;are seen in&nbsp;<strong>varicella-zoster </strong>and<strong> herpes simplex </strong>infections.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old man is referred to the dermatology OPD with the following findings. Which of the following would not be useful in diagnosing this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Sensation testing"
      },
      {
        "id": 2,
        "text": "Skin smear"
      },
      {
        "id": 3,
        "text": "Lepromin test"
      },
      {
        "id": 4,
        "text": "Skin biopsy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given images showing a hypopigmented lesion along with tibial nerve thickening are is suggestive of <strong>leprosy.&nbsp;</strong>Lepromin test is a&nbsp;<strong>prognostic test&nbsp;</strong>used in the classification of Leprosy. It has&nbsp;<strong>no diagnostic</strong>&nbsp;purpose.</p>\n<p>It involves performing an&nbsp;<strong>intradermal injection</strong>&nbsp;of the lepromin antigen (synthesized from&nbsp;M. leprae) on the&nbsp;<strong>flexor surface</strong>&nbsp;of the forearm. It is a skin test for&nbsp;<strong>delayed hypersensitivity,</strong>&nbsp;is the only method for studying immunity in leprosy.&nbsp;</p>\n<ul>\n<li><strong>Positive</strong> test<strong> -&nbsp;</strong><strong>good&nbsp;</strong>cell-mediated immunity and points towards the&nbsp;<strong>tuberculoid</strong>&nbsp;side of the spectrum</li>\n<li><strong>Negative</strong> test<strong> -</strong><strong>&nbsp;poor</strong>&nbsp;cell-mediated immunity and POINTS towards<strong>&nbsp;</strong>the<strong>&nbsp;lepromatous</strong>&nbsp;side of the spectrum.</li>\n</ul>\n<p>The antigens used in lepromin test are:&nbsp;</p>\n<ul>\n<li>Lepromin A (from armadillo-derived lepra bacilli)</li>\n<li>Dharmendra antigen</li>\n</ul>\n<p>First is the&nbsp;<strong>early reaction of Fernandez</strong>, which consists of&nbsp;<strong>erythema</strong>&nbsp;and&nbsp;<strong>induration</strong>&nbsp;developing in 24-48 hours and usually remaining for 3-5 days; it is usually poorly defined and carries less significance.</p>\n<p>The second and more meaningful result is the&nbsp;<strong>late reaction of Mitsuda</strong>, starting at 1-2 weeks (7-10 days), reaching a peak in three or four weeks, and gradually subsiding over the&nbsp;next few weeks. At end of 21 days, if there is a <strong>nodule&nbsp;&gt;5mm</strong> in diameter, the reaction is said to be&nbsp;<strong>positive.&nbsp;</strong></p>\n<p>The <strong>test</strong> is <strong>used</strong> for the following purposes:&nbsp;</p>\n<ul>\n<li>To&nbsp;<strong>classify</strong> the lesions of leprosy patients.&nbsp;</li>\n<li>To&nbsp;assess the <strong>prognosis</strong> and <strong>response</strong> to treatment.</li>\n<li>To&nbsp;assess the <strong>resistance</strong> of individuals to leprosy.&nbsp;</li>\n<li>To&nbsp;<strong>verify</strong> the identity of candidate lepra <strong>bacilli.</strong></li>\n</ul>\n<p>Option A: Sensory testing is useful to detect hypoesthesia and nerve involvement of leprosy.</p>\n<p>Option B: Slit skin smear shows the presence of acid-fast bacilli.&nbsp;</p>\n<p>Option D: Biopsy would reveal few tuberculoid granulomas and plenty of foam cells, which are diagnostic of leprosy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6082473511c8440aaf13f1eb9af7d9b4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the vector of Chiclero ulcer?",
    "choices": [
      {
        "id": 1,
        "text": "Phlebotomus"
      },
      {
        "id": 2,
        "text": "Lutzomyia"
      },
      {
        "id": 3,
        "text": "Reduviid"
      },
      {
        "id": 4,
        "text": "Trombiculid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The vector for&nbsp;<strong>Chiclero</strong> <strong>ulcer</strong> or <strong>new</strong> <strong>world</strong> <strong>leishmaniasis&nbsp;</strong>is the <strong>lutzomyia sandfly</strong>.</p>\n<p>The vector bites humans, typically those working as <strong>chicle collectors,</strong> causing lesions on the side of the <strong>face</strong> or behind the ears. Lesions on the pinna of the ear may <strong>invade cartilage,</strong> take many years to heal, and destroy the pinna.&nbsp;</p>\n<p>The images below show the Chiclero ulcer and lutzomyia sandfly.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f45df25c317f460b9486c7af3ffcd6dbx1280x2012.0733427362482.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4eba9a5a44124147b32acd6115b34706x650x650.JPEG"
    ]
  },
  {
    "text": "A 20-year-old woman presented to the hospital with complaints of jamais vu and new-onset seizures. CT brain was normal. Her laboratory values are given below. Which of the following is not a dermatological manifestation of this disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Discoid lesions"
      },
      {
        "id": 2,
        "text": "Painless ulcers on hard palate"
      },
      {
        "id": 3,
        "text": "Photosensitivity"
      },
      {
        "id": 4,
        "text": "Salmon rash"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical details are suggestive of <strong>systemic lupus erythematosus</strong> (SLE).<strong>&nbsp;Salmon rash</strong>&nbsp;is seen in <strong>adult-onset</strong> of <strong>Still's disease.</strong> It is a rare systemic inflammatory disease&nbsp;characterized by the classic triad of:</p>\n<ol>\n<li>Persistent high spiking fever</li>\n<li>Joint pain</li>\n<li>Salmon rash</li>\n</ol>\n<p><strong>SLE&nbsp;</strong>is more common in <strong>females </strong>(7:1 to 15:1).<strong>&nbsp;</strong>It is associated with classical erythematous rash, typically sparing the nasolabial folds called<strong>&nbsp;malar/butterfly rash.&nbsp;<br /></strong></p>\n<p><strong>Discoid rashes</strong> resembling discoid lupus erythematosus may also be seen. Clinical <strong>photosensitivity</strong> in the form of polymorphous light reaction and pruritus is associated with more severe systemic disease.</p>\n<p>The image given below shows a malar rash.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a9fd4549688a483d8e3c6f4542a8a9e6x512x395.PNG"
    ]
  },
  {
    "text": "A 4-year-old boy has been brought to you by his parents with the following skin lesions. Which of the following is not true regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Autosomal recessive inheritance"
      },
      {
        "id": 2,
        "text": "Due to zinc deficiency and reverses with zinc supplement"
      },
      {
        "id": 3,
        "text": "Triad of dermatitis, dementia and diarrhoea"
      },
      {
        "id": 4,
        "text": "Mutation of SLC39A4 gene"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows<strong> acrodermatitis enteropathica.&nbsp;</strong>It is classically&nbsp;associated with:&nbsp;</p>\n<ol>\n<li>Diarrhea</li>\n<li>Alopecia</li>\n<li>Periorificial and acral cutaneous eruptions.</li>\n</ol>\n<p><strong>Zinc deficiency</strong> can be inherited (acrodermatitis enteropathica) or acquired.</p>\n<p>Acrodermatitis enteropathica is an <strong>autosomal</strong> <strong>recessive</strong> disorder caused by a mutation in the <strong>intestinal</strong> <strong>zinc</strong> <strong>transporter</strong> <strong>gene</strong>,&nbsp;<strong>SLC39A4</strong>,&nbsp;which leads to deficiency of zinc.&nbsp;</p>\n<p>Children commonly present with <strong>symmetrical, eczematous plaques</strong> that become vesicular, bullous, pustular or erosive with characteristic crusting at the edges.&nbsp;The perioral eruption usually spares the upper lip, giving it a &lsquo;U\u2010shaped&rsquo; or &lsquo;horseshoe\u2010shaped&rsquo; appearance.&nbsp;</p>\n<p><strong>Zinc supplementation</strong> rapidly improves the condition within 24 to 48 hours. If untreated, it maybe fatal.</p>\n<p><strong>Mnemonic</strong>: <strong>DEAL</strong> for acrodermatitis enteropathica:&nbsp;</p>\n<ul>\n<li><strong>D</strong>iarrhoea</li>\n<li><strong>E</strong>czematous dermatitis</li>\n<li><strong>A</strong>lopecia</li>\n<li><strong>L</strong>ethargy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9da1785bd29e4f6887ad71916633300a.PNG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Dermatology St 2 (From Q-Bank)';
        const quizFilename = 'dermatology-st-2-from-q-bank-f0177492.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>