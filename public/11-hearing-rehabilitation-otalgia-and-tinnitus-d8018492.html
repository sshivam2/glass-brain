<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>11 Hearing Rehabilitation, Otalgia, And Tinnitus - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / ENT
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">8</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 9 month old baby was brought by the parents as she doesn't respond to their calls and was evaluated and found to have hearing loss. Which of the following would be a contraindication for cochlear implant in this case?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Bilateral profound sensorineural hearing loss"
      },
      {
        "id": 2,
        "text": "Cochlear aplasia"
      },
      {
        "id": 3,
        "text": "Prelingual deafness"
      },
      {
        "id": 4,
        "text": "Age older than 6 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Cochlear aplasia</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Cochlear aplasia</strong> is a <span class=\"customMeta\" data-dictid=\"c9f33964851692777185b94f619862\">contraindication</span> of cochlear implantation.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Indications:</strong></p>\n\n<ul>\n\t<li><strong>B/L severe</strong> (70-90 dB) <strong>to profound </strong>(>90 dB)<strong> SNHL</strong><strong> (Option A)</strong></li>\n\t<li><strong>Prelingual deafness</strong>: A child who is born <span class=\"customMeta\" data-dictid=\"3c449eb43616927771856a7a3a7c7e\">deaf</span> and has not yet developed speech. <strong>(Option C)</strong></li>\n\t<li><strong>Post <span class=\"customMeta\" data-dictid=\"f7c3ba6f1c1692777191e58e8571b0\">lingual</span> deafness</strong>: Child/adult who has become <span class=\"customMeta\" data-dictid=\"3c449eb43616927771856a7a3a7c7e\">deaf</span> but has already developed speech.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Contraindications:</strong></p>\n\n<ul>\n\t<li>Cochlear <span class=\"customMeta\" data-dictid=\"5dff4943631692777181b8974b302b\">aplasia</span> <strong>(Option B)</strong></li>\n\t<li>8th nerve <span class=\"customMeta\" data-dictid=\"e7ed1a964716927771801ab913204a\">abnormality</span> (like <span class=\"customMeta\" data-dictid=\"5dff4943631692777181b8974b302b\">aplasia</span> or <span class=\"customMeta\" data-dictid=\"1c45b1dca81692777197ac9ff22f0e\">retrocochlear</span> pathology, <span class=\"customMeta\" data-dictid=\"63bda90e3516927771848cbb473f04\">conduction</span> via the <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> nerve is dysfunctional)</li>\n\t<li>Central <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> lesions</li>\n\t<li>Michel aplasia: Complete absence of the bony and membranous labyrinth, including the <span class=\"customMeta\" data-dictid=\"88225eeb1616927771954c1b0bc1e3\">petrous</span> apex, while the external and middle ears remain unaffected.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Prerequisites:</strong></p>\n\n<ul>\n\t<li>Age in <span class=\"customMeta\" data-dictid=\"d75f49468d16927771963c758d4faf\">prelingual</span> deafness: Minimum age as early as possible, maximum age 7 years <strong>(Option D)</strong></li>\n\t<li>There is no age limit for post-lingual deafness</li>\n\t<li>Failed trial of hearing aid</li>\n\t<li>Intact <span class=\"customMeta\" data-dictid=\"54d290087e1692777180c6cc682930\">acoustic</span> nerve and central hearing tract</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/8nwDVUlNkE0rWUwnAB8w1745003524.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/6jPnyna7TBMbfzcF9e4G1745003640.mp3"
  },
  {
    "text": "<p>In a cochlear implant, what is the primary role of the external speech processor?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "To amplify sound before it reaches the brain"
      },
      {
        "id": 2,
        "text": "To convert captured sound into digital signals"
      },
      {
        "id": 3,
        "text": "To stimulate the auditory nerve directly"
      },
      {
        "id": 4,
        "text": "To provide power to the internal components"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) To convert captured sound into digital signals</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>A <span class=\"customMeta\" data-dictid=\"62503775c01692777185896842710e\">cochlear implant</span> consists of<strong> external</strong> and <strong>internal</strong> components.</p>\n\n<p>External Component: Contains <strong>microphone, speech processor and a transmitter</strong>.</p>\n\n<ul>\n\t<li><strong>Microphone</strong> captures sound and the <strong>speech processor converts it into digital signals </strong><strong>(Option B) </strong></li>\n\t<li><strong>Transmitter</strong> sends digital signals to the internal implant across the skin.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"641\" src=\"https://image.prepladder.com/content/ITxIYTKIYNqTYXWAh0yl1739297578.png\" width=\"500\" /></p>\n\n<p><strong>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Fig: Components of Cochlear implant</strong></p>\n\n<p>Internal Component: Contains<strong> receiver/stimulator </strong>and an <strong>electrode array</strong>.</p>\n\n<ul>\n\t<li>Receiver/ <span class=\"customMeta\" data-dictid=\"209e26e2a61692777199d129f36248\">Stimulator</span> converts the digital signals into electrical impulses and transmits them to the <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> array situated inside the cochlea.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> array stimulates the <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> nerve<strong> (Option C)</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Amplification is the role of<strong> hearing aids</strong>. Cochlear implants focus on processing and transmitting sound information rather than amplifying it. <strong>(Option A) </strong><strong> </strong>The internal receiver/stimulator is powered by a battery housed in the external component but not supplied directly by the speech processor.<strong> </strong><strong>(Option D)</strong></p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"427\" src=\"https://image.prepladder.com/content/MHCXapf304TqlD9AiXiU1739297621.png\" width=\"500\" /></p>\n\n<p><strong>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Fig: Internal Receiver</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/ITxIYTKIYNqTYXWAh0yl1739297578.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/mV6rF8adCMHoiRycAPs41745003891.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/ODkpaW81aXYF1pxCITbg1745003790.mp3"
  },
  {
    "text": "<p>Where is the electrode array placed during cochlear implant surgery to ensure effective stimulation of the auditory nerves?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Round window membrane"
      },
      {
        "id": 2,
        "text": "Scala tympani"
      },
      {
        "id": 3,
        "text": "Eustachian tube"
      },
      {
        "id": 4,
        "text": "Outer ear canal"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"5f132abacf1692777198df171c92e2\">Scala</span> tympani</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> array is placed in the <span class=\"customMeta\" data-dictid=\"5f132abacf1692777198df171c92e2\">scala</span> tympani to ensure proximity to <span class=\"customMeta\" data-dictid=\"0b34a9891d16927771998a84595013\">spiral</span> <span class=\"customMeta\" data-dictid=\"bbd799518a169277718867e02de42f\">ganglion</span> cells for effective <span class=\"customMeta\" data-dictid=\"7f3792072b1692777199fd8e2c4f59\">stimulation</span> of <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> nerve fibers, facilitating sound perception.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Surgical Procedure:</strong></p>\n\n<ul>\n\t<li>A two-layered <span class=\"customMeta\" data-dictid=\"7eae099d8d1692777202469603e6ed\">flap</span> approach is typically used: the first layer consists of skin and <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> tissue, followed by a musculoperiosteal flap.</li>\n\t<li>A pocket is created beneath the second flap, and a <span class=\"customMeta\" data-dictid=\"e50e29a57b16927771978b2f6cff3e\">recess</span> is drilled into the bone for the receiver/stimulator.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Surgical Techniques:</strong></p>\n\n<p><strong>Facial <span class=\"customMeta\" data-dictid=\"e50e29a57b16927771978b2f6cff3e\">Recess</span> Approach:</strong></p>\n\n<ul>\n\t<li>Involves a <span class=\"customMeta\" data-dictid=\"721937292f1692777185048f04ce29\">cortical</span> <span class=\"customMeta\" data-dictid=\"12d9c7a4041692777191aa892d206f\">mastoidectomy</span> to identify the <span class=\"customMeta\" data-dictid=\"457c9fd53e1692777190857c3e636b\">incus</span> and semicircular canal, followed by a <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> tympanotomy.</li>\n\t<li>Cochleostomy is performed near the <strong>round window </strong>membrane, creating an opening of 1.0-1.6 mm for the electrode.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Pericanal Techniques:</strong></p>\n\n<ul>\n\t<li>Involves elevating a <span class=\"customMeta\" data-dictid=\"06b5205bd7169277720119ecc5ea59\">tympanomeatal</span> <span class=\"customMeta\" data-dictid=\"7eae099d8d1692777202469603e6ed\">flap</span> to perform a cochleostomy, either through an <span class=\"customMeta\" data-dictid=\"dc92e2350a1692777187f6148f1b4b\">endaural</span> or postaural approach.</li>\n\t<li>A bony tunnel is drilled from the external <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> to the middle ear.</li>\n\t<li>Examples include the Veria and <span class=\"customMeta\" data-dictid=\"f4d0290b9d169277719901b738ed47\">suprameatal</span> <span class=\"customMeta\" data-dictid=\"e50e29a57b16927771978b2f6cff3e\">recess</span> techniques.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Electrode <span class=\"customMeta\" data-dictid=\"c88a7c1a0116927771909b2463968d\">Insertion</span> and Testing:</strong></p>\n\n<ul>\n\t<li>The device is secured, and the <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> array is gradually inserted through the cochleostomy. The <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> entry site is sealed with <span class=\"customMeta\" data-dictid=\"65483c739e169277720294dce50377\">fascia</span> or <span class=\"customMeta\" data-dictid=\"ae97d0e84f169277719537f321c02b\">periosteum</span> to prevent <span class=\"customMeta\" data-dictid=\"7a6af637471692777195f6d6f14afd\">perilymph</span> leakage.</li>\n\t<li>Electrophysiological testing confirms proper <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> function.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Complications of <span class=\"customMeta\" data-dictid=\"62503775c01692777185896842710e\">cochlear implant</span> surgery:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:429px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Early Complications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Facial paralysis</li>\n\t\t\t\t<li>Wound infection</li>\n\t\t\t\t<li>Wound dehiscence</li>\n\t\t\t\t<li>Flap necrosis</li>\n\t\t\t\t<li>Electrode migration</li>\n\t\t\t\t<li>Device failure</li>\n\t\t\t\t<li>CSF leak</li>\n\t\t\t\t<li>Meningitis</li>\n\t\t\t\t<li>Post-operative dizziness/vertigo</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Late Complications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Exposure of device and extrusion</li>\n\t\t\t\t<li>Pain at the site of implant</li>\n\t\t\t\t<li>Migration and <span class=\"customMeta\" data-dictid=\"5a50cd774d1692777186c56ec68eac\">displacement</span> of device</li>\n\t\t\t\t<li>Late device failure</li>\n\t\t\t\t<li>Otitis media</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>Postoperative care involves <strong>activating the implant 3-4 weeks after surgery</strong> and regular programming for optimization.</li>\n\t<li>Rehabilitation emphasizes auditory-verbal therapy to develop listening and speaking skills, necessitating collaboration among the patient, family, and professionals.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Round Window Membrane</strong>: Acts as a barrier, not a placement area<strong>. </strong><strong>(Option A)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Eustachian Tube</strong>: Connects the <span class=\"customMeta\" data-dictid=\"d7879d301d169277719255fe8818dc\">middle ear</span> to the nasopharynx, unrelated to cochlear implantation. <strong>(Option C)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Outer Ear Canal</strong>: Part of the external ear, not involved in implantation. <strong>(Option D)</strong></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/9ojy3vTpaG4bEFKYcTDx1745003944.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/cbilHA1JJg9qi9D90pgt1745003994.mp3"
  },
  {
    "text": "<p>A 10-year-old child with microtia and chronic ear discharge is being evaluated for hearing rehabilitation. Which of the following is the most appropriate hearing device for this child?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Traditional behind-the-ear hearing aid"
      },
      {
        "id": 2,
        "text": "Air-conduction hearing aid"
      },
      {
        "id": 3,
        "text": "Bone-Anchored Hearing Aid (BAHA)"
      },
      {
        "id": 4,
        "text": "CROS hearing aid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"44e06c8645169277718321e8c51399\">Bone-Anchored Hearing Aid</span> (BAHA)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Bone-anchored <span class=\"customMeta\" data-dictid=\"1a6d0ff7891692777188ad0e931a82\">hearing aid</span> (BAHA)</strong> captures the sound and transmits vibrations to the skull, stimulating the <span class=\"customMeta\" data-dictid=\"6eb2dc23ea16927771848e85bcecb2\">cochlea</span> directly and bypassing the external <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> and middle ear. It is used<strong> when the <span class=\"customMeta\" data-dictid=\"c6b732e83416927771812e15b4586c\">air conduction</span> method of rehabilitation cannot be used.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Components</strong>:</p>\n\n<ul>\n\t<li><strong>Titanium Fixture</strong>: Surgically embedded in the skull. It bonds with the surrounding skin (osseointegration)</li>\n\t<li><strong>Titanium Abutment</strong>: Connects the sound processor.</li>\n\t<li><strong>Sound Processor</strong>: Attached after <span class=\"customMeta\" data-dictid=\"dc8971dde71692777194e9b65628ae\">osseointegration</span> (2 to 6 months after implantation).</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"4167\" src=\"https://image.prepladder.com/content/1gBY7nqtfEoemdibDDS41739297726.png\" width=\"4167\" /></p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"4167\" src=\"https://image.prepladder.com/content/c7j3IOwoCGucn8RnniH11739297746.png\" width=\"4167\" /></p>\n\n<p><strong>Indication:</strong></p>\n\n<ul>\n\t<li><strong>Chronic ear discharge</strong>.</li>\n\t<li>Single-sided hearing loss.</li>\n\t<li>Children with <strong>microtia</strong>, anotia, <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> atresia.</li>\n\t<li>Conductive or mixed <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> (e.g., otosclerosis, tympanosclerosis) with contraindications for surgery.</li>\n\t<li>Following MRM (large <span class=\"customMeta\" data-dictid=\"a59fda103116927771912d5d76d293\">mastoid</span> cavity).</li>\n\t<li>Excessive feedback or discomfort from AC hearing aids.</li>\n\t<li><strong>Age of implantation: >5yrs</strong></li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Surgical Procedure</strong>:</p>\n\n<ul>\n\t<li>Adults typically have a single-stage surgery with a 3-month <span class=\"customMeta\" data-dictid=\"dc8971dde71692777194e9b65628ae\">osseointegration</span> wait.</li>\n\t<li>Children usually undergo a two-stage procedure, with the fixture placed first and the <span class=\"customMeta\" data-dictid=\"c87d37c85d1692777180a372a43270\">abutment</span> connected after 6 months.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Traditional behind-the-ear <span class=\"customMeta\" data-dictid=\"1a6d0ff7891692777188ad0e931a82\">hearing aid</span> (Option A):</strong> Ineffective due to the absence of a functional ear <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> in microtia.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Air-conduction <span class=\"customMeta\" data-dictid=\"1a6d0ff7891692777188ad0e931a82\">hearing aid</span> (Option B):</strong> Unsuitable as it depends on sound travelling through a compromised ear canal.</p>\n\n<p>\u00a0</p>\n\n<p><strong>CROS <span class=\"customMeta\" data-dictid=\"1a6d0ff7891692777188ad0e931a82\">hearing aid</span> (Option D):</strong> The most appropriate hearing solution for a patient with conditions of <span class=\"customMeta\" data-dictid=\"250915d33e16927771922007db4935\">microtia</span> and chronic ear discharge, as in this patient, would be BAHA.</p>\n\n<p>CROS (Contralateral Routing of Signals) hearing aids are designed for patients with <span class=\"customMeta\" data-dictid=\"92b4dd0d9516927772013f2e4296b7\">unilateral</span> <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> who have an intact ear on the opposite side. In this case, the child's <span class=\"customMeta\" data-dictid=\"250915d33e16927771922007db4935\">microtia</span> indicates a structural issue on one side, and chronic <span class=\"customMeta\" data-dictid=\"9dd87431ba1692777186ecfb21d258\">discharge</span> may also compromise the use of a CROS system effectively.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/1gBY7nqtfEoemdibDDS41739297726.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/lYe3eqLcUT1sJZEArQJM1745004106.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/2D3K8P7ubUSmdQSXWaoy1745004204.mp3"
  },
  {
    "text": "<p>A 45-year-old patient with neurofibromatosis type 2 has undergone bilateral vestibular schwannoma resection and now experiences profound hearing loss. Which implant would be most suitable for this patient to restore some auditory function?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cochlear Implant"
      },
      {
        "id": 2,
        "text": "Auditory Brainstem Implant (ABI)"
      },
      {
        "id": 3,
        "text": "Bone-Anchored Hearing Aid"
      },
      {
        "id": 4,
        "text": "Middle Ear Implant"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">Auditory</span> <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">Brainstem</span> Implant (ABI)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation</strong>:</p>\n\n<p>Neurofibromatosis <span class=\"customMeta\" data-dictid=\"05e8c1df0d1692777201c9acee8b1f\">type 2</span> (NF2) often involves B/L <span class=\"customMeta\" data-dictid=\"e8b3c606051692777201faf2a1a357\">vestibular</span> schwannomas, which<strong> can damage the <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> nerve </strong>during resection. <strong>Auditory <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">Brainstem</span> Implant</strong> bypasses the need for an intact <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> nerve by directly stimulating the brainstem.</p>\n\n<p>ABI is appropriate for this patient, as it directly stimulates the <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">brainstem</span> despite the severed cochlear nerve.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Auditory <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">brainstem</span> implant </strong></p>\n\n<ul>\n\t<li>Used when the 8th nerve has a lesion.</li>\n\t<li>Electrode bypasses the <span class=\"customMeta\" data-dictid=\"6eb2dc23ea16927771848e85bcecb2\">cochlea</span> and 8th nerve; it directly stimulates the brain stem.</li>\n\t<li>The implant stimulates the cochlear <span class=\"customMeta\" data-dictid=\"ff628904401692777193c8a9f9159e\">nucleus</span> directly, and then impulses are carried to the <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> cortex.</li>\n\t<li>Position of the implant- <span class=\"customMeta\" data-dictid=\"fc380e21321692777191739bd99191\">lateral</span> <span class=\"customMeta\" data-dictid=\"e50e29a57b16927771978b2f6cff3e\">recess</span> of the 4th ventricle.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/FDJqZoHNEW6nolKK9tF31739297882.png\" width=\"500\" /></p>\n\n<p>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0<strong> \u00a0 Fig:\u00a0Auditory <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">brainstem</span> implant</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Indications:</strong></p>\n\n<ul>\n\t<li>B/L <span class=\"customMeta\" data-dictid=\"54d290087e1692777180c6cc682930\">acoustic</span> neuromas</li>\n\t<li>CP angle tumor</li>\n\t<li>B/L Cochlear aplasia</li>\n\t<li>B/L Cochlear nerve aplasia</li>\n</ul>\n\n<p><br />\n\u00a0</p>\n\n<p>Cochlear Implant Requires an intact cochlear nerve, which is severed in this patient. <strong>(Option A)</strong></p>\n\n<p>\u00a0</p>\n\n<p>BAHA is designed for <span class=\"customMeta\" data-dictid=\"672584d0ee16927771858886c9eb14\">conductive hearing loss</span> and relies on a functional cochlear nerve<strong>. </strong><strong>(Option C)</strong></p>\n\n<p>\u00a0</p>\n\n<p>Middle Ear Implant amplifies sound for conductive loss but also needs a <span class=\"customMeta\" data-dictid=\"bf1b7e7049169277720354c306d716\">functioning</span> cochlear nerve. <strong>(Option D)</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Middle ear implant:</strong></p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"344\" src=\"https://image.prepladder.com/content/jZG06Yz0w9C8UrZBQkWV1739297912.png\" width=\"500\" /></p>\n\n<p>Middle ear implants operate using a direct drive mechanism, delivering mechanical vibrations directly to the <span class=\"customMeta\" data-dictid=\"22d574e4221692777194933e257251\">ossicular chain</span> while keeping the ear <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> open. It has 2 types:</p>\n\n<ul>\n\t<li><strong>Piezoelectric Devices</strong>: These use an <span class=\"customMeta\" data-dictid=\"f41aa22f791692777187728e68c9e7\">electric current</span> through a piezoceramic crystal to produce vibrations that drive the ossicles. Examples are Envoy MET, Rion, and TICA.</li>\n\t<li><strong>Electromagnetic Devices</strong>: These generate a <span class=\"customMeta\" data-dictid=\"c731b7ca621692777191324e5d32e7\">magnetic field</span> via an <span class=\"customMeta\" data-dictid=\"f41aa22f791692777187728e68c9e7\">electric current</span> in a coil, which moves an attached <span class=\"customMeta\" data-dictid=\"883e21a28016927771915738a46f85\">magnet</span> to convey vibrations to the cochlea.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/FDJqZoHNEW6nolKK9tF31739297882.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/JSlZVsn1dvdyDQsegIgr1745170160.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/h83TbfuTMcWCaxW4egSV1745170242.mp3"
  },
  {
    "text": "<p>A 45-year-old patient with high-frequency sensorineural hearing loss is recommended for an In-the-Canal (ITC) hearing aid. What is a key characteristic of this type of hearing aid?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "It is worn entirely behind the ear."
      },
      {
        "id": 2,
        "text": "It is visible and large."
      },
      {
        "id": 3,
        "text": "It fits partially in the ear canal, making it less noticeable."
      },
      {
        "id": 4,
        "text": "It provides amplification for all frequency ranges equally"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) It fits partially in the ear canal, making it less noticeable.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Conventional Hearing Aids</strong><br />\nHearing aids<strong> amplify </strong>sounds for individuals with <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> and consist of three main parts:</p>\n\n<ol>\n\t<li><strong>Microphone</strong>: Captures sound and converts it into electrical signals.</li>\n\t<li><strong>Amplifier</strong>: Enhances these electrical signals.</li>\n\t<li><strong>Receiver</strong>: Transforms the amplified signals back into sound, transmitted through an earmold to the <span class=\"customMeta\" data-dictid=\"391176370016927772011d1b8315bc\">tympanic</span> membrane.</li>\n</ol>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/XyTwb59H4ETPncCsGkDR1739297987.png\" width=\"500\" /></p>\n\n<p><strong>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0Fig: Parts of a Hearing Aid</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Types of Hearing Aids</strong></p>\n\n<ul>\n\t<li><strong>Air-Conduction Hearing Aids</strong>: Deliver sound through the ear <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> to the <span class=\"customMeta\" data-dictid=\"391176370016927772011d1b8315bc\">tympanic</span> membrane.</li>\n\t<li><strong>Bone-Conduction Hearing Aids</strong>: Use a bone <span class=\"customMeta\" data-dictid=\"62f08a82b11692777202e92bbc709a\">vibrator</span> to directly stimulate the cochlea, ideal for those with draining ears or <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> atresia.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Common Air-Conduction Aids:</strong></p>\n\n<ul>\n\t<li><strong>Body-Worn Aids</strong>: Components worn at chest level, suitable for severe <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> with minimal feedback.</li>\n\t<li><strong>Behind-the-Ear (BTE) Aids</strong>: All components in a unit are worn behind the ear, which is effective for mild to moderate high-frequency loss. <strong>(Option A)</strong></li>\n\t<li><strong>Spectacle Aids</strong>: Integrated into eyeglass frames; less common now.</li>\n\t<li><strong>In-the-Ear (ITE) Aids</strong>: Housed in an earmold, good for mild to moderate loss, favored for aesthetics.<strong> </strong></li>\n\t<li><strong>Canal Aids (ITC and CIC)</strong>: Small aids fitting into the ear canal; ITC aids are partially visible <strong>(Option C)</strong>, while CIC aids are discreet and almost invisible. ITC amplify specific frequencies, which is especially beneficial for high-frequency <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> <strong>(Option D)</strong></li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/301VdrRZ5x3wUulrmQXu1739298583.png\" width=\"500\" /></p>\n\n<p><strong>Indications</strong><br />\nHearing aids are recommended for individuals with <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> that cannot be treated medically or surgically, including:</p>\n\n<ul>\n\t<li><strong>Sensorineural Hearing Loss:</strong> Impacts daily activities; some may experience sound distortion.</li>\n\t<li><strong>Deaf Children:</strong> Early fitting is critical for speech and learning; <span class=\"customMeta\" data-dictid=\"2aea1ed34a1692777183139e158f24\">binaural</span> aids are preferred for severe cases.</li>\n\t<li><strong>Conductive Deafness:</strong> Used when <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> options are not feasible.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Contralateral Routing of Signals (CROS)</strong></p>\n\n<ul>\n\t<li>This method uses a <span class=\"customMeta\" data-dictid=\"b329d5e14316927771921aadf70228\">microphone</span> on the <span class=\"customMeta\" data-dictid=\"3c449eb43616927771856a7a3a7c7e\">deaf</span> side to transmit sound to the better ear, aiding sound localization.</li>\n\t<li>Bone-Anchored Hearing Aids (BAHA) are increasingly favored for single-sided <span class=\"customMeta\" data-dictid=\"696dd98be71692777185b10993da3e\">deafness</span> over CROS aids.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"449\" src=\"https://image.prepladder.com/content/UOGJjDpCvoptBr5aNCv31739298119.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/XyTwb59H4ETPncCsGkDR1739297987.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/7lA9Uyfqib4cD700ANPs1745171480.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/HHH8Xwy1sLpAlBch1KFZ1745171584.mp3"
  },
  {
    "text": "<p>A 35-year-old male presents with a dental cavity that has been causing significant discomfort for the past few days. He now reports a new onset of ear pain on the same side as the toothache. Which of the following nerves is most likely involved in transmitting the pain from the dental cavity to the ear?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 2,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 3,
        "text": "Arnold's nerve"
      },
      {
        "id": 4,
        "text": "Maxillary nerve (V2)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"c2c10e783c1692777182a1d84457f9\">Auriculotemporal</span> nerve</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The <strong>auriculotemporal nerve</strong>, a branch of the mandibular nerve (V3) from the <span class=\"customMeta\" data-dictid=\"6d1eb38ecf1692777200bb65bbdefb\">trigeminal</span> nerve (cranial nerve V), supplies sensation to the skin of the temple and parts of the external ear. It also transmits <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> information from the lower <span class=\"customMeta\" data-dictid=\"17dfb015d2169277720023db8fe9e5\">teeth</span> and gums. When a patient experiences <span class=\"customMeta\" data-dictid=\"02cf7655661692777185e2bf5c3254\">dental</span> pain along with ear pain on the same side, it is often due to <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> pain.</p>\n\n<p><strong>Otalgia:</strong></p>\n\n<p>Otalgia refers to pain in the ear and can be classified based on its cause.</p>\n\n<p><strong>Primary Otalgia: </strong>Pain originates from the ear itself.</p>\n\n<p><strong>Examples of Causes:</strong></p>\n\n<ul>\n\t<li>Ear <span class=\"customMeta\" data-dictid=\"9eae373ada1692777202074bbc0222\">wax</span> in the external <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">auditory</span> <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">canal</span> (EAC)</li>\n\t<li>Acute <span class=\"customMeta\" data-dictid=\"a48a50d87216927771994f1cfe9b7d\">Suppurative</span> <span class=\"customMeta\" data-dictid=\"b913f965781692777194c867946afe\">Otitis</span> Media (ASOM)</li>\n\t<li>Otitis externa</li>\n\t<li>Foreign body in the ear</li>\n</ul>\n\n<p><strong>Referred Otalgia: </strong>Pain originates from another region of the body but is felt in the ear due to shared nerve pathways.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:645px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Nerve Supply of the Ear</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Pinna (External Ear)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>G</strong>reater <span class=\"customMeta\" data-dictid=\"e825a1e928169277718206e4709c41\">auricular</span> nerve (C2, C3)</li>\n\t\t\t\t<li>Lesser <strong>O</strong>ccipital nerve (C2, C3)</li>\n\t\t\t\t<li><strong>A</strong>uriculotemporal nerve (Branch of <span class=\"customMeta\" data-dictid=\"6d1eb38ecf1692777200bb65bbdefb\">Trigeminal</span> nerve - V3)</li>\n\t\t\t\t<li><strong>A</strong>rnold's nerve (Auricular branch of <span class=\"customMeta\" data-dictid=\"c8da04ed171692777201da65246acd\">Vagus</span> nerve - X)</li>\n\t\t\t\t<li><strong>F</strong>acial nerve (VII)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>External <span class=\"customMeta\" data-dictid=\"f17057f75016927771829e70074368\">Auditory</span> <span class=\"customMeta\" data-dictid=\"371930068716927771839cba840631\">Canal</span> (EAC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>A</strong>uriculotemporal nerve (Trigeminal nerve - V3)</li>\n\t\t\t\t<li><strong>A</strong>rnold's nerve (Vagus nerve - X)</li>\n\t\t\t\t<li><strong>F</strong>acial nerve (VII)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Tympanic membrane</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>A</strong>uriculotemporal nerve (Trigeminal nerve - V3)</li>\n\t\t\t\t<li><strong>A</strong>rnold's nerve (Auricular branch of <span class=\"customMeta\" data-dictid=\"c8da04ed171692777201da65246acd\">Vagus</span> nerve - X)</li>\n\t\t\t\t<li><strong>J</strong>acobson's nerve (Tympanic branch of the <span class=\"customMeta\" data-dictid=\"13b0890d441692777188afdcb41e75\">glossopharyngeal</span> nerve)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n<img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"385\" src=\"https://image.prepladder.com/content/T9RJ0BwZZVy7WHGB2YKT1739343968.png\" width=\"500\" /><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"355\" src=\"https://image.prepladder.com/content/dJLtbZoYJRZ8iBXQciCJ1739298316.png\" width=\"500\" /></p>\n\n<p><strong>Mechanisms and Causes of <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">Referred</span> Otalgia:</strong></p>\n\n<p>Referred <span class=\"customMeta\" data-dictid=\"d100d268a916927771948c871049ec\">otalgia</span> occurs when a <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> or <span class=\"customMeta\" data-dictid=\"54e0888a6616927771945a99208287\">pathology</span> in another part of the body irritates a nerve that also innervates the ear. Below are examples of <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> otalgia, associated nerves, and areas of involvement:</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"310\" src=\"https://image.prepladder.com/content/y2kP8J5V8sQE5hKfEgXT1739298331.png\" width=\"500\" /></p>\n\n<p style=\"text-align: center;\"><strong>Fig:\u00a0Mechanisms of <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">Referred</span> Otalgia</strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:623px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Lesion Location</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Associated Nerve</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Pathway for <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">Referred</span> Otalgia</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Oropharynx, <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">Posterior</span> 1/3 of tongue, Tonsils, <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">Posterior</span> Pharyngeal Wall</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Glossopharyngeal nerve (IX)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Jacobson's nerve mediates pain from pharyngeal structures to the ear.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Larynx, Hypopharynx, <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">Cervical</span> Esophagus</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Vagus nerve (X)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Arnold's nerve transmits pain from the <span class=\"customMeta\" data-dictid=\"80452d1746169277719165b097dc7a\">larynx</span> and <span class=\"customMeta\" data-dictid=\"6a729a105a169277718788389dbeab\">esophagus</span> to the ear.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Cervical Spine (Cervical Spondylosis, C2-C3)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lesser <span class=\"customMeta\" data-dictid=\"77dc7a0ab81692777194dba7ab78ab\">occipital</span> nerve, Greater <span class=\"customMeta\" data-dictid=\"e825a1e928169277718206e4709c41\">auricular</span> nerve (C2, C3)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>These nerves can cause ear pain in <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> spine conditions.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Temporo-mandibular Joint (TMJ)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Trigeminal nerve (V3), <span class=\"customMeta\" data-dictid=\"c2c10e783c1692777182a1d84457f9\">Auriculotemporal</span> nerve</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Pain from the <span class=\"customMeta\" data-dictid=\"0809704acb169277720067fa3e8981\">TMJ</span> can be <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> to the ear via the <span class=\"customMeta\" data-dictid=\"c2c10e783c1692777182a1d84457f9\">auriculotemporal</span> nerve.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Teeth, Parotid, <span class=\"customMeta\" data-dictid=\"1ba6a9cfe11692777181950edd7a6d\">Anterior</span> 2/3 of tongue</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Trigeminal nerve (V3)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Dental pain, <span class=\"customMeta\" data-dictid=\"42d0553c3916927771944110a6f15b\">parotid</span> pathologies, and tongue lesions may cause ear pain via the <span class=\"customMeta\" data-dictid=\"6d1eb38ecf1692777200bb65bbdefb\">trigeminal</span> nerve.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Nose and Sinuses</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Trigeminal nerve (V2, V3)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Sinus infections and <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> issues may refer pain to the ear.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Oesophagus, Hypopharynx, Larynx</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Vagus nerve (X)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Conditions like <span class=\"customMeta\" data-dictid=\"01e03927231692777188168edc7b35\">GERD</span> or laryngeal cancer can cause <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> ear pain.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/T9RJ0BwZZVy7WHGB2YKT1739343968.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/iGbRb8L4ihHd7jF9ehN41745172331.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/KUGTH9EDawBfZFxvQkUd1745172427.mp3"
  },
  {
    "text": "<p>A 50-year-old male presents to the ENT clinic with complaints of a persistent ringing sound in his left ear for the past few months, more noticeable at night when he is in quiet environments. He denies any hearing loss or ear discharge. Otoscopic examination is normal, and audiometry shows normal hearing. Which of the following is the most appropriate initial management?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Prescribe an antidepressant"
      },
      {
        "id": 2,
        "text": "Perform an MRI to rule out acoustic neuroma"
      },
      {
        "id": 3,
        "text": "Reassure the patient and consider tinnitus retraining therapy"
      },
      {
        "id": 4,
        "text": "Advise complete avoidance of noise exposure"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Reassure the patient and consider <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> retraining therapy</strong></p>\n\n<p>\u00a0</p>\n\n<h4><strong>Explanation:</strong></h4>\n\n<ul>\n\t<li>Tinnitus is often a symptom and not a disease. Since the patient\u2019s<strong> examination and <span class=\"customMeta\" data-dictid=\"e1cbb96ca4169277718232323c8a0b\">audiometry</span> are normal</strong>, the best initial approach is <strong>reassurance and educating</strong> the patient that this is a <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> condition.</li>\n\t<li><strong>Tinnitus retraining therapy (TRT)</strong>, which includes counseling and sound therapy, is an effective treatment that helps patients <strong>habituate to the sound of <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> and diminishes the emotional response</strong> to it. This therapy aims to uncouple the brain's emotional and <span class=\"customMeta\" data-dictid=\"6c2c85ae6b16927771950809419a59\">physiological</span> reactions to tinnitus, eventually leading to less awareness of the symptom.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Tinnitus:</strong></p>\n\n<p>Tinnitus is characterized by the perception of ringing sounds in the ear which are not external. It can be classified into two main types:</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:703px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\u00a0</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Subjective Tinnitus</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Objective Tinnitus</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Definition</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>The ringing sensation is only experienced by the patient and cannot be detected or measured by an examiner.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Tinnitus is associated with an identifiable organic cause that can be detected by both the patient and the examiner.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Causes</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Otologic:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Tympanic <span class=\"customMeta\" data-dictid=\"34cd707428169277719272942b7905\">membrane</span> perforation</li>\n\t\t\t\t<li>Ear <span class=\"customMeta\" data-dictid=\"9eae373ada1692777202074bbc0222\">wax</span> accumulation</li>\n\t\t\t\t<li>Fluid in the middle ear</li>\n\t\t\t\t<li>Chronic <span class=\"customMeta\" data-dictid=\"b913f965781692777194c867946afe\">otitis</span> media</li>\n\t\t\t\t<li>M\u00e9ni\u00e8re's disease</li>\n\t\t\t\t<li>Presbycusis (age-related hearing loss)</li>\n\t\t\t\t<li>Noise-induced hearing loss</li>\n\t\t\t\t<li>Acoustic neuroma</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Metabolic:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Hyperthyroidism</li>\n\t\t\t\t<li>Hyperdynamic circulation</li>\n\t\t\t\t<li>Obesity</li>\n\t\t\t\t<li>Hyperlipidemia</li>\n\t\t\t\t<li>Vitamin <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> (e.g., B12)</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Neurologic:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Brain stroke</li>\n\t\t\t\t<li>Brain infarction</li>\n\t\t\t\t<li>Head trauma</li>\n\t\t\t\t<li>Fractures</li>\n\t\t\t\t<li>Multiple sclerosis</li>\n\t\t\t\t<li>Postmeningitic hearing loss</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Cardiovascular:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Anemia</li>\n\t\t\t\t<li>Hypertension</li>\n\t\t\t\t<li>Hypotension</li>\n\t\t\t\t<li>Atherosclerosis</li>\n\t\t\t\t<li>Hyperdynamic circulation</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Pharmacologic</strong>:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Ototoxic drugs (e.g., certain antibiotics, diuretics)</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Psychogenic:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Tinnitus without identifiable physical findings; often associated with Anxiety, depression, stress</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Vascular (</strong>synchronized with pulse - <strong>Pulsatile tinnitus):</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>AV fistula</li>\n\t\t\t\t<li>Dehiscence of the <span class=\"customMeta\" data-dictid=\"8593e48e0416927771834eaedb0bfd\">carotid</span> artery</li>\n\t\t\t\t<li>Glomus tumor of middle ear</li>\n\t\t\t\t<li>Jugular bulb abnormalities</li>\n\t\t\t\t<li>Carotid aneurysm</li>\n\t\t\t\t<li>Carotid stenosis</li>\n\t\t\t\t<li>Vascular loop pressing on <span class=\"customMeta\" data-dictid=\"6b7b5460171692777185e6e2475f8c\">cranial</span> nerve VIII</li>\n\t\t\t\t<li>High-riding <span class=\"customMeta\" data-dictid=\"8593e48e0416927771834eaedb0bfd\">carotid</span> artery</li>\n\t\t\t\t<li>Persistent stapedial artery</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Patulous <span class=\"customMeta\" data-dictid=\"22053f7eef1692777187c1142bad20\">Eustachian</span> Tube: </strong>Tinnitus synchronized with respiration</p>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Other causes:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Palatal myoclonus</li>\n\t\t\t\t<li>TMJ disorders</li>\n\t\t\t\t<li>Idiopathic stapedial myoclonus</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Treatment of Tinnitus</strong></p>\n\n<p><strong>1. Unknown Cause</strong></p>\n\n<ul>\n\t<li><strong>Retraining Therapy:</strong> In cases where the cause is unknown, supportive care and monitoring are essential. This may include lifestyle modifications and hearing protection.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>2. <span class=\"customMeta\" data-dictid=\"d2a2319d681692777199792417b5e2\">Subjective</span> Tinnitus</strong></p>\n\n<p><strong>Patient Counseling:</strong></p>\n\n<ul>\n\t<li><strong>Education and Support:</strong> Providing information about <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> and its management.</li>\n\t<li><strong>Cognitive Behavioral Therapy (CBT): </strong>Helps patients manage the psychological impact of tinnitus.</li>\n\t<li><strong>Sound Therapy:</strong> Involves using background noise to help mask tinnitus, reducing the perception of the ringing sound. <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">Tinnitus</span> maskers are specialized devices that generate white noise or soothing sounds to cover up the tinnitus, offering relief.</li>\n\t<li><strong>Tinnitus Retraining Therapy (TRT)</strong> combines sound therapy with counseling to help the brain habituate to the <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> sound, aiming to make it less noticeable over time.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>3. Objective Tinnitus</strong></p>\n\n<p><strong>Treatment of Underlying Cause:</strong></p>\n\n<ul>\n\t<li><strong>Vascular Issues:</strong> <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">Surgical</span> or interventional procedures to address <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> abnormalities.</li>\n\t<li><strong>Patulous <span class=\"customMeta\" data-dictid=\"22053f7eef1692777187c1142bad20\">Eustachian</span> Tube:</strong> Management strategies may include <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> <span class=\"customMeta\" data-dictid=\"894da1dfe6169277719871d7210619\">saline</span> sprays or other treatments to stabilize the <span class=\"customMeta\" data-dictid=\"22053f7eef1692777187c1142bad20\">Eustachian</span> tube.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Prescribe an <span class=\"customMeta\" data-dictid=\"f4dc45846216927771816608bfe8cd\">antidepressant</span> (Option A): </strong>Antidepressants or medications may be considered in the management of <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> if the patient has accompanying depression or anxiety.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Perform an <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> to rule out <span class=\"customMeta\" data-dictid=\"54d290087e1692777180c6cc682930\">acoustic</span> <span class=\"customMeta\" data-dictid=\"11117a474a1692777193044082d47a\">neuroma</span> (Option B):</strong> While <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> may be necessary in cases where <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> is <span class=\"customMeta\" data-dictid=\"92b4dd0d9516927772013f2e4296b7\">unilateral</span> or associated with <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> to rule out an <span class=\"customMeta\" data-dictid=\"54d290087e1692777180c6cc682930\">acoustic</span> <span class=\"customMeta\" data-dictid=\"11117a474a1692777193044082d47a\">neuroma</span> (a <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> tumor of the <span class=\"customMeta\" data-dictid=\"b774537d0c1692777201dee32072fe\">vestibulocochlear</span> nerve), this patient lacks these findings.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Advise complete <span class=\"customMeta\" data-dictid=\"d61e782bf41692777182f829eef312\">avoidance</span> of noise exposure (Option D):</strong> Although noise-induced <span class=\"customMeta\" data-dictid=\"f3f80e5bee1692777188f6eb1c4005\">hearing loss</span> is a known cause of tinnitus, complete <span class=\"customMeta\" data-dictid=\"d61e782bf41692777182f829eef312\">avoidance</span> of noise is not recommended. Instead, controlled sound therapy, like using <span class=\"customMeta\" data-dictid=\"1e668dc8ba1692777200622a8a97f3\">tinnitus</span> maskers or background noise generators, is helpful in patients with tinnitus, especially at night.</p>\n\n<p><br />\n\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/WknuXuRhH9aBEsHQbk3p1745172610.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/ksBTYXj7IM0ZBqvua5tp1745172725.mp3"
  }
];
        let quizName = '11 Hearing Rehabilitation, Otalgia, And Tinnitus';
        const quizFilename = '11-hearing-rehabilitation-otalgia-and-tinnitus-d8018492.html';
        let hierarchy = ["PrepLadder", "qBank", "ENT"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>