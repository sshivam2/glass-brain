<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 016 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 34-year-old presents to the casualty with a history of blunt force trauma to the head. A small lesion was found on the dorsal aspect of the brainstem on imaging. Which of the following nerves could be injured at the site?",
    "choices": [
      {
        "id": 1,
        "text": "Hypoglossal nerve"
      },
      {
        "id": 2,
        "text": "Trigeminal nerve"
      },
      {
        "id": 3,
        "text": "Trochlear nerve"
      },
      {
        "id": 4,
        "text": "Facial nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>trochlear nerve</strong> is the only nerve that exits the<strong> brainstem</strong> on the<strong> dorsal</strong>&nbsp;surface<strong>&nbsp;</strong>and thus can be injured in this patient.&nbsp;</p>\n<p>All other cranial nerves exit the brainstem from the ventral surface.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A person who was in deep sleep with arms under his head after alcohol-intoxication now presents with Saturday night palsy. Which of the following sensations would remain relatively intact in him?",
    "choices": [
      {
        "id": 1,
        "text": "Touch"
      },
      {
        "id": 2,
        "text": "Pressure"
      },
      {
        "id": 3,
        "text": "Pain"
      },
      {
        "id": 4,
        "text": "Motor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pain</strong>&nbsp;sensations would remain <strong>relatively intact</strong> in persons with <strong>Saturday night palsy.</strong>&nbsp;</p>\n<p>Sleeping for a long period with the arms under the head puts pressure on a nerve, leading to the loss of conduction in large-diameter motor, touch, and pressure fibers, while pain sensation remains relatively intact.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What does the operon model attempt to explain?",
    "choices": [
      {
        "id": 1,
        "text": "The coordinated control of gene expression in bacteria"
      },
      {
        "id": 2,
        "text": "Bacterial resistance to antibiotics"
      },
      {
        "id": 3,
        "text": "How genes move between homologous regions of DNA"
      },
      {
        "id": 4,
        "text": "The mechanism of viral attachment to a host cell"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>operon model</strong> attempts to explain the<strong> coordinated control of gene expression </strong>in bacteria.</p>\n<p>In bacteria, the structural genes that code for proteins, involved in a particular metabolic pathway are often found sequentially <strong>grouped on the chromosome</strong> along with the cis-acting regulatory elements that determine the transcription of these genes.</p>\n<p>The transcription product is a single <strong>polycistronic messenger RNA (mRNA).</strong></p>\n<p>The genes are thus coordinately controlled, that is, turned on or off as a unit. This entire package is referred to as an <strong>operon</strong>.</p>\n<p>Note:&nbsp;<strong>Gene regulation in bacteria&nbsp;</strong>is important in order to:</p>\n<ul>\n<li>Enable&nbsp;<strong>response to environmental stimuli</strong></li>\n<li>Allow cells to&nbsp;<strong>adjust</strong>&nbsp;promptly to&nbsp;<strong>changes in the growth medium</strong></li>\n<li><strong>Alter biochemical capabilities</strong>&nbsp;appropriate&nbsp;<strong>for</strong>&nbsp;available&nbsp;<strong>substrate</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d340ad619eda46a2972a6d8db40b4330x719x599.PNG"
    ]
  },
  {
    "text": "Identify the false statement regarding primary myelofibrosis.",
    "choices": [
      {
        "id": 1,
        "text": "Common in individuals less than 30 years of age"
      },
      {
        "id": 2,
        "text": "White blood cell count is elevated in the initial phase"
      },
      {
        "id": 3,
        "text": "Advanced disease is characterised by diffuse fibrosis of bone marrow and splenomegaly"
      },
      {
        "id": 4,
        "text": "Peripheral smear shows the presence of leukoerythroblastosis and dacryocytes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The false statement regarding primary myelofibrosis is that it occurs in individuals <strong>less than 30 years</strong> of age.</p>\n<p>Myelofibrosis is characterized by abnormal production of red blood cells, white blood cells, and platelets, in association with marrow fibrosis (scarring) and extramedullary hematopoiesis. It can present de novo as primary myelofibrosis (PMF), a chronic progressive myeloproliferative disorder or due to an underlying disorder such as leukemia or hyperparathyroidism, in which case it is called secondary or reactive myelofibrosis.</p>\n<p>Primary myelofibrosis occurs in individuals<strong> over 60 years </strong>of age<strong>.&nbsp;</strong>JAK2, CALR, and MPL mutations are seen in the majority of the cases<strong>.</strong>&nbsp;Patients present with vague, constitutional symptoms such as weight loss, night sweats, low-grade fever, cachexia, fatigue, and pruritus. There might be a history of exposure to industrial <strong>solvents</strong> or <strong>radiation</strong>. Later in the disease, there may be a sensation of fullness in the upper left quadrant due to splenomegaly. Hyperuricemia and secondary gout may also occur.</p>\n<p>Peripheral smear shows the presence of normochromic normocytic anemia and <strong>leukoerythroblastosis. </strong>There is a release of nucleated erythroid and early granulocyte progenitors from the bone marrow and the presence of <strong>dacryocytes</strong>, which are <strong>tear-drop-shaped</strong> red cells.&nbsp;</p>\n<p><strong>Early</strong> in the disease, the <strong>WBC count is markedly elevated</strong> up to 100,000 cells/mm3 but later the count usually returns to normal or is reduced, even.</p>\n<p>The chief pathologic feature is the <strong>extensive deposition of collagen</strong> in the <strong>marrow</strong> by fibroblasts. The fibrosis of bone marrow is thought to be caused by the inappropriate release of <strong>platelet-derived growth factor&nbsp;</strong>and <strong>TGF-&beta;</strong>. Early in the disease, the marrow is hypercellular with an increase in the maturation of cells of all lineages but with <strong>disease progression</strong> and collagen deposition, the bone marrow becomes <strong>hypocellular</strong> and <strong>diffusely fibrotic. </strong>Eventually, the fibrotic marrow space is converted to bone, which is called <strong>osteosclerosis</strong>.</p>\n<p>Due to the obliteration of marrow space by fibrotic changes, there is extensive <strong>extramedullary hematopoiesis</strong> mainly in the spleen, giving rise to <strong>massive splenomegaly</strong>. Subcapsular infarcts are common and there may be moderate enlargement of the liver. There is no significant lymphadenopathy, though hematopoiesis may occur even in the lymph nodes.</p>\n<p>The complications include recurrent infections, thrombotic episodes, platelet anomalies leading to bleeding diathesis, and sometimes, transformation into <strong>acute myeloid leukemia</strong> (AML).</p>\n<p>Janus kinase inhibitors like <strong>ruxolitinib</strong> and <strong>fedratinib</strong> have been approved for management. Hematopoietic stem cell (HSC) transplantation may also be considered depending on factors like the patients' age and fitness for the procedure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A  26-year-old male patient presents with painful ulcers on his penis with the classical \"kissing ulcer\" appearance. He also has tender inguinal lymphadenopathy.  If the ulcer is swabbed, which of the following will be found on microscopy?",
    "choices": [
      {
        "id": 1,
        "text": "School of fish appearance"
      },
      {
        "id": 2,
        "text": "Spirochetes  on dark field microscopy"
      },
      {
        "id": 3,
        "text": "Donovan bodies"
      },
      {
        "id": 4,
        "text": "Multinucleated  giant cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient with tender genital ulcers with the \"kissing ulcer\" appearance and tender inguinal lymphadenopathy most likely has a <strong>diagnosis</strong> of <strong>chancroid.</strong>&nbsp;</p>\n<p>If the ulcer is swabbed, the classical \"<strong>school of fish\"/\"railroad track\"</strong> appearance will be seen on microscopy, as shown below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6e041d324e4342039604537845c568d0x720x705.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/866c8710896d4b0aaf0b5d4d82b2de97x800x600.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5fe86e3d50984d7fb2bcad097f4ca776x720x473.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39e5bdbc8c2b48ef923aa52b8cfabf6cx394x261.PNG"
    ]
  },
  {
    "text": "A child with impaired cognitive function was admitted for evaluation in the pediatrics ward. On examination, you find multiple types of seizures, an EEG showing slow (<3Hz) spike and wave discharges, and diagnosed with Lennox-Gastaut syndrome. Which among the following options is a first-line drug for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Zonisamide"
      },
      {
        "id": 2,
        "text": "Levetiracetam"
      },
      {
        "id": 3,
        "text": "Sodium valproate"
      },
      {
        "id": 4,
        "text": "Vigabatrin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sodium valproate </strong>is a first-line drug for the treatment of&nbsp;<strong>Lennox-Gastaut syndrome</strong>.</p>\n<p>Valproate is an<strong> broad spectrum</strong> antiseziure drug. It is used in:</p>\n<ul>\n<li>Partial seizures</li>\n<li>Generalised tonic-clonic seziures (GTCS)</li>\n<li>Absence seziures</li>\n<li>Myoclonic seziures&nbsp;</li>\n<li>Atonic seziures</li>\n</ul>\n<p>Valproate act via multiple mechanisms like:</p>\n<ul>\n<li>Prolonged sodium channel inactivation</li>\n<li>Attenuation of calcium-mediated 'T' current&nbsp;</li>\n<li>Enhanced release of&nbsp; inhibitory transmitter GABA due to inhibition of its degradation and increasing its synthesis from glutamic acid</li>\n<li>Inhibition of excitatory NMDA glutamate receptors</li>\n</ul>\n<p><strong>Lennox-Gastaut syndrome</strong> is a rare severe form of childhood epilepsy. It is characterized by a triad of:</p>\n<ul>\n<li>Multiple types of seizures including GTCS, atonic, myoclonic, atypical absence seizures</li>\n<li>&lt;3Hz spike and wave pattern in EEG</li>\n<li>Impaired cognitive function</li>\n</ul>\n<p>They are predominantly seen in early childhood between the age group of 1 to 7 years peaking at around 3 years of age. Intellectual impairment in the form of developmental delay starts usually after the occurrence of seizures.</p>\n<p>Other options:</p>\n<p>Option A-&nbsp;<strong>Zonisamide</strong> is an antiepileptic drug used as adjuvant therapy of focal seizures in adults. It can also be used as an add-on in Lennox-Gastaut syndrome.&nbsp;</p>\n<p>Option B: <strong>Levetiracetam</strong> is also effective in most of the seizures present in Lennox-Gastaut syndrome, but is not a first-line drug for this condition.</p>\n<p>Option D: <strong>Vigabatrin</strong> is also effective in Lennox-Gastaut syndrome, but is not a first-line drug for this condition.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following postmortem staining is seen in ____?",
    "choices": [
      {
        "id": 1,
        "text": "Opioid poisoning"
      },
      {
        "id": 2,
        "text": "CO poisoning"
      },
      {
        "id": 3,
        "text": "H2S poisoning"
      },
      {
        "id": 4,
        "text": "Phosphorous poisoning"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image above is characteristic of Cherry red postmortem lividity. It is seen in <strong>carbon monoxide poisoning</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/45ae292cfafa43f2a98d3ff2eda5932d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Sinus that continues to develop till early adulthood is the _________.",
    "choices": [
      {
        "id": 1,
        "text": "Ethmoid"
      },
      {
        "id": 2,
        "text": "Maxillary"
      },
      {
        "id": 3,
        "text": "Frontal"
      },
      {
        "id": 4,
        "text": "Sphenoid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The&nbsp;<strong>frontal sinus&nbsp;</strong>develops until <strong>early adulthood</strong>.</p>\n<p>The<strong>&nbsp;sphenoid sinus</strong> is the <strong>last sinus</strong> to develop.</p>\n<p>The <strong>maxillary sinus</strong> is <strong>the first sinus</strong> to start developing in our body.</p>\n<p class=\"p1\">The <strong>ethmoid sinuses</strong> are present at birth and will attain their adult size by the early teens.</p>\n<p class=\"p1\"><strong>NOTE:&nbsp;</strong>The frontal sinus develops well past the late teens into early adulthood. The sphenoid sinus completes its development by the third decade.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the refractive error in the image.",
    "choices": [
      {
        "id": 1,
        "text": "Simple myopia"
      },
      {
        "id": 2,
        "text": "Simple myopic astigmatism"
      },
      {
        "id": 3,
        "text": "Compound myopic astigmatism"
      },
      {
        "id": 4,
        "text": "Mixed astigmatism"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image represents the rays of light forming two focal points one before the retina and one on the retina. This type of astigmatism is called <strong>simple myopic astigmatism.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/da25f1d2cb9a4fbbad3e326239ea95ed.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5eeda42850204c6db4017b54b1ef673ax1280x3805.698166431594.JPEG"
    ]
  },
  {
    "text": "What is the range of body mass index (BMI) for class I obesity in global population?",
    "choices": [
      {
        "id": 1,
        "text": "25.00-29.99"
      },
      {
        "id": 2,
        "text": "30.00-34.99"
      },
      {
        "id": 3,
        "text": "35.00-39.99"
      },
      {
        "id": 4,
        "text": "40.00-44.99"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">The range of BMI for<strong> class I obesity</strong>\u00a0for the\u00a0<strong>global population</strong> is <strong>30.00-34.99</strong>.</p>\n<p class=\"p1\">People categorized as class I, class II, and class III obesity have moderate, severe, and very severe susceptibility to comorbidities respectively.</p>\n<p class=\"p1\"><strong>Body mass index (BMI)</strong> is a statistical index of <strong>weight-for-height</strong> that is commonly used to classify underweight, overweight, and obesity in adults. It is defined as the weight in kilograms divided by the square of the height in meters (<strong>kg/m2</strong>).</p>\n<table style=\"height: 98px; width: 311px;\">\n<tbody>\n<tr>\n<td style=\"width: 96px;\">Classification</td>\n<td style=\"width: 101px;\">Global population (kg/m<sup>2</sup>)\u00a0\u00a0</td>\n<td style=\"width: 86px;\">\n<p>Indian population</p>\n<p>(kg/m<sup>2</sup>)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Underweight</td>\n<td style=\"width: 101px;\">&lt;18.5</td>\n<td style=\"width: 86px;\">\n<p>&lt;18.5</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Normal\u00a0</td>\n<td style=\"width: 101px;\">18.5-24.99</td>\n<td style=\"width: 86px;\">18.5-22.99</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Overweight</td>\n<td style=\"width: 101px;\">25-29.99</td>\n<td style=\"width: 86px;\">23-24.99 (and at-risk)</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Obesity</td>\n<td style=\"width: 101px;\"><span style=\"text-decoration: underline;\">&gt;</span>30</td>\n<td style=\"width: 86px;\"><span style=\"text-decoration: underline;\">&gt;</span>25</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\"><strong>Class I obesity</strong></td>\n<td style=\"width: 101px;\"><strong>30.0-34.9</strong></td>\n<td style=\"width: 86px;\"><strong>\u00a025- 29.9</strong></td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Class II Obesity</td>\n<td style=\"width: 101px;\">35.0 to 39.9</td>\n<td style=\"width: 86px;\">\u00a0<span style=\"text-decoration: underline;\">&gt;</span>30</td>\n</tr>\n<tr>\n<td style=\"width: 96px;\">Class III Obesity (severe, extreme, massive)</td>\n<td style=\"width: 101px;\">\u226540</td>\n<td style=\"width: 86px;\">\u00a0</td>\n</tr>\n</tbody>\n</table>\n<p class=\"p1\">These BMI values are <strong>age-independent</strong> and the <strong>same for both sexes</strong>.</p>\n<p class=\"p1\">The risks that are associated with increasing BMI are continuous and graded. They begin at a BMI above 25.</p>\n<p class=\"p1\">BMI fails to distinguish between muscle weight and weight due to fat. The percentage of body fat mass increases in both genders till the age of 60-65 years. It is higher in women than in men of equivalent BMI.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Where is the headquarters of the following organization located?",
    "choices": [
      {
        "id": 1,
        "text": "Rome"
      },
      {
        "id": 2,
        "text": "New York"
      },
      {
        "id": 3,
        "text": "Geneva"
      },
      {
        "id": 4,
        "text": "Washington"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image is the logo of the<strong> World Health Organization, WHO</strong>&nbsp;that has its headquarters located in<strong> Geneva, Switzerland</strong>.</p>\n<p>WHO&nbsp;is a specialized, non-political health agency of the United Nations. It&nbsp;came into force on the&nbsp;<strong>7<sup>th</sup>&nbsp;of April 1948. </strong>Its&nbsp;prime&nbsp;objective is the attainment by all people of the highest level of health. The structure of the WHO comprises the World Health Assembly, the Executive Board, and the Secretariat.&nbsp;</p>\n<p>&nbsp;The <strong>responsibility</strong> of the<strong> WHO</strong> is in the following broad areas:</p>\n<ol>\n<li>Prevention and control of specific diseases</li>\n<li>Development of comprehensive health services</li>\n<li>Family health</li>\n<li>Environmental health</li>\n<li>Health statistics</li>\n<li>Biomedical research</li>\n<li>Health literature and information</li>\n<li>Co-operation with other international organizations</li>\n</ol>\n<p>The<strong> headquarters</strong> of<strong>&nbsp;regional offices of WHO</strong> are:</p>\n<ul>\n<li>The<strong> Southeast Asian regional office</strong> (SEARO) is in<strong> New Delhi, India</strong></li>\n<li>The African regional office&nbsp;is in Brazzaville, Republic of Congo.</li>\n<li>The <strong>American regional office</strong> is in <strong>Washington D. C., USA.</strong></li>\n<li>The European regional head office is in Copenhagen, Denmark.</li>\n<li>The Eastern Mediterranean regional office is in Alexandria, Egypt.</li>\n<li>The Western Pacific regional office is in Manila, Philippines.</li>\n</ul>\n<p>The<strong> headquarters</strong> of other<strong> important organizations</strong> are:</p>\n<ul>\n<li>The headquarters of&nbsp;<strong>UNICEF&nbsp;</strong>and&nbsp;<strong>UNDP&nbsp;</strong>is in&nbsp;<strong>New York, USA.</strong></li>\n<li>The headquarters of the<strong> Food and Agriculture Organization (FAO)</strong> is in&nbsp;<strong>Rome, Italy.</strong></li>\n</ul>\n<p>Note: Other organizations that have headquarters in Geneva are the&nbsp;International Labor Organization&nbsp;(ILO)&nbsp;and the&nbsp;International Red Cross Society.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6dec7527a87346cfba4d3602fc9f7b9d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "During your rural posting, you are asked to educate a small, uneducated village about the importance of routine antenatal care for pregnant mothers. You want to deliver some statistical data to emphasize its importance. Which of the following is the best way to do so?",
    "choices": [
      {
        "id": 1,
        "text": "Pictogram"
      },
      {
        "id": 2,
        "text": "Line diagram"
      },
      {
        "id": 3,
        "text": "Histogram"
      },
      {
        "id": 4,
        "text": "Frequency polygon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pictogram</strong>&nbsp;is the best method of presenting data&nbsp;among<strong> people, who cannot understand orthodox charts</strong>.&nbsp;</p>\n<p>In this method, small pictures or symbols are used to present the data.&nbsp;Fractions of the picture are used to represent numbers smaller than the value of a whole symbol. Basically, pictograms are&nbsp;a<strong> form </strong>of<strong> bar charts</strong>.</p>\n<p>Other options</p>\n<p>Option B- <strong>Line diagrams</strong> are mainly used to show the trend of events in a given period of time. For example trend of dengue cases in Asia during 2018-21.</p>\n<p>Option C- <strong>Histogram</strong> is a pictorial diagram of a frequency distribution that consists of a series of blocks. The frequencies are given along the vertical axis and class intervals on the horizontal axis. The area of each block obtained is proportional to frequency.&nbsp;</p>\n<p>Option D- <strong>Frequency polygon</strong> is the diagrammatical representation of frequency distribution obtained by joining the midpoints of the histogram blocks.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old male patient with type II diabetes mellitus and hypertension comes for a routine examination. He is on ramipril for hypertension and metformin for diabetes. On evaluation, he is found to have hyperkalemia and acidemia. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "RTA type I"
      },
      {
        "id": 2,
        "text": "RTA type II"
      },
      {
        "id": 3,
        "text": "RTA type III"
      },
      {
        "id": 4,
        "text": "RTA type IV"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most likely diagnosis in this patient is <strong>RTA type IV.</strong></p>\n<p>The above clinical features of diabetes, angiotensin-converting enzyme inhibitor (ramipril), hyperkalemia and acidemia are suggestive of type IV renal tubular acidosis.&nbsp;</p>\n<p><strong>Type IV renal tubular acidosis</strong> (hyporeninemic hypoaldosteronism) occurs in type 1 or 2 diabetes mellitus. It is more commonly seen in diabetic nephropathy induced destruction of juxtaglomerular apparatus, sickle cell disease, drugs like ACEI/ARBs, potassium-sparing diuretics, calcineurin inhibitors, NSAIDs, and heparin.</p>\n<p>The clinical features seen in Type IV RTA are:</p>\n<ul>\n<li><strong>Hyperkalemia</strong>: Hypoaldosteronism results in an increase in potassium concentration.&nbsp;</li>\n<li><strong>Metabolic acidosis</strong>: Hyperkalemia impairs ammonia production in the proximal tubule that reduces the buffering of hydrogen ions. This results in decreased hydrogen ion excretion.&nbsp;</li>\n<li><strong>Urinary pH&lt;5.5</strong>: Due to the decreased production of ammonia in the proximal tubule,&nbsp;it leads to excess protons being excreted in the renal tubules thus decreasing the urinary pH.</li>\n</ul>\n<p>Other options:</p>\n<p>Option A- <strong>RTA type I</strong> (distal RTA) is seen in autoimmune diseases like Sjogren's syndrome, systemic lupus erythematosus, systemic sclerosis, medullary sponge kidney disease, cirrhosis, drugs like amphotericin B, lithium etc., The patients develop <strong>hypokalemia</strong>, <strong>metabolic acidosis</strong> with an alkaline urine (urinary pH &gt;5.5).&nbsp;</p>\n<p>Option B- <strong>RTA type II</strong> (proximal RTA) is seen in Fanconi syndrome, plasma cell dyscrasia, cystinosis, Wilson's disease, drugs like ifofsamide, heavy metals etc., The patients develop <strong>hypokalemia</strong>, <strong>metabolic acidosis</strong> with an acidic urine (urinary pH &lt;5.5). There is also excretion of glucose, urate and amino acids.</p>\n<p>Option C- <strong>RTA type III</strong> (mixed RTA) is seen in inherited mutations of carbonic anhydrase II. A combined pathology of type I and type II RTA is seen in this type. It results in <strong>hypokalemia</strong> and <strong>metabolic acidosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old woman came with complaints of headache for the past 1-month. She also reported aching of the jaw during her meals. Over the last week, she has experienced episodes of painless visual loss which lasted for around 10 minutes. Which of the following is the best investigation for the diagnosis of her condition?",
    "choices": [
      {
        "id": 1,
        "text": "Temporal artery biopsy"
      },
      {
        "id": 2,
        "text": "Colour doppler of temporal artery"
      },
      {
        "id": 3,
        "text": "CT angiography"
      },
      {
        "id": 4,
        "text": "MR angiography"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of headache, jaw claudication, and painless visual loss is suggestive of <strong>giant cell arteritis.</strong> The best investigation for the diagnosis of giant cell arteritis is <strong>temporal artery biopsy</strong>.</p>\n<p>Histopathology shows panarteritis with the presence of mononuclear cells and giant cells. Due to the <strong>focal</strong> nature of giant cell arteritis, adequate biopsy requires <strong>at least</strong> a <strong>1 cm</strong> segment with serial sectioning of the specimen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the given acid-base nomogram diagram, areas marked A and D indicate which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic respiratory acidosis , acute metabolic alkalosis"
      },
      {
        "id": 2,
        "text": "Acute Metabolic alkalosis , acute respiratory acidosis"
      },
      {
        "id": 3,
        "text": "Acute respiratory acidosis, acute respiratory alkalosis"
      },
      {
        "id": 4,
        "text": "Acute respiratory acidosis, acute metabolic alkalosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given illustrated acid-base nomogram, the letters <strong>A</strong> and<strong> D</strong> indicate<strong> acute respiratory acidosis</strong> and <strong>acute respiratory alkalosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/03c1be681ab94103911a5b39a92f87d4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/98ed9dc899d14752941b1aaab960a6d2x1280x1452.JPEG"
    ]
  },
  {
    "text": "FDA has recently sanctioned emergency use authorization to the first oral antiviral drug combination for the treatment of COVID-19. This drug combination contains:",
    "choices": [
      {
        "id": 1,
        "text": "Nirmatrelvir and Ritonavir"
      },
      {
        "id": 2,
        "text": "Molnupiravir and Ritonavir"
      },
      {
        "id": 3,
        "text": "Nirmatrelvir and Indinavir"
      },
      {
        "id": 4,
        "text": "Molnupiravir and Indinavir"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>FDA recently sanctioned emergency use authorization to a combination of <strong>nirmatrelvir and ritonavir</strong> tablets (Paxlovid) for the treatment of mild-to-moderate COVID-19. It is the <strong>first oral antiviral</strong> for the treatment of <strong>COVID-19.</strong></p>\n<p><strong>Nirmatrelvir</strong> is a <strong>peptidomimetic</strong> inhibitor of the <strong>SARS-CoV-2 main protease</strong> (Mpro). Inhibition of this enzyme makes the virus incapable of processing polyprotein precursors and thus prevents viral replication.</p>\n<p><strong>Ritonavir</strong> is an HIV-1 <strong>protease inhibitor.</strong> It inhibits the CYP3A-mediated metabolism of nirmatrelvir which results in increased plasma concentrations of nirmatrelvir. It is <strong>not active</strong> against SARS-CoV-2 Mpro.</p>\n<p>Patients who tested positive with direct SARS-CoV-2 test can be administered this drug combination, provided they are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">12 years of age and older</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Weighing at least 40 kgs</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">At high risk for progression to severe COVID-19.</li>\n</ul>\n<p>Contraindications include hypersensitivity reactions to the active ingredients or any other components, co-administration with drugs highly dependent on CYP3A for clearance, co-administration with potent CYP3A inducers. Adverse reactions include dysgeusia, diarrhea, hypertension, and myalgia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old lady was incidentally found to have gallstones during the abdominal ultrasound. She is otherwise healthy and does not complain of any symptoms. In which of the following clinical scenarios you will not advise her for prophylactic cholecystectomy?",
    "choices": [
      {
        "id": 1,
        "text": "Choledocholithiasis"
      },
      {
        "id": 2,
        "text": "Diabetes Mellitus"
      },
      {
        "id": 3,
        "text": "Sickle cell disease"
      },
      {
        "id": 4,
        "text": "Presence of a 1.5 cm gallstone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Prophylactic cholecystectomy</strong> in asymptomatic cholelithiasis is indicated only when <strong>gallstones &gt;3 cm.</strong></p>\n<p>Indications for consideration of <strong>prophylactic cholecystectomy in asymptomatic</strong> patients:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Risk factors for carcinoma</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Diabetic Mellitus</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Choledochal cysts</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Gallbladder adenomas</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Porcelain (calcified) gallbladder</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Solitary gallbladder polyp larger than 1 cm</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Choledocholithiasis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Gallstones &gt;3 cm</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">The patient lives in a remote location from a health care facility</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sickle cell disease/spherocytosis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Transplant or immunosuppressant therapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Radical neck dissection spares which of the following structure?",
    "choices": [
      {
        "id": 1,
        "text": "Digastric muscle"
      },
      {
        "id": 2,
        "text": "Sternocleidomastoid muscle"
      },
      {
        "id": 3,
        "text": "Spinal accessory nerve"
      },
      {
        "id": 4,
        "text": "Ipsilateral cervical lymph nodes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Radical neck dissection spares the <strong>digastric muscle.\u00a0</strong></p>\n<p>Radical neck dissection involves the removal of the following structures:</p>\n<ul>\n<li>All ipsilateral cervical lymph node groups, extending from the inferior border of the mandible to the clavicle and from the lateral border of the sternohyoid muscle, hyoid bone, and contralateral anterior belly of the digastric muscle medially to the anterior border of the trapezius muscle laterally</li>\n<li>All lymph nodes from Levels I through to V</li>\n<li>Spinal accessory nerve</li>\n<li>Internal jugular vein</li>\n<li>Sternocleidomastoid muscle</li>\n<li>Tail of parotid</li>\n<li>Submandibular gland</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the condition based on the X-ray image shown below",
    "choices": [
      {
        "id": 1,
        "text": "Diverticulitis"
      },
      {
        "id": 2,
        "text": "Paralytic ileus"
      },
      {
        "id": 3,
        "text": "Crohn\u2019s disease"
      },
      {
        "id": 4,
        "text": "Sigmoid volvulus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above X-ray radiograph shows characteristic &lsquo;<strong>coffee bean appearance&rsquo; </strong>seen in <strong>sigmoid volvulus</strong>.</p>\n<ul>\n<li><strong>Sigmoid volvulus</strong> is a cause of large bowel obstruction and occurs when the sigmoid colon twists on the sigmoid mesocolon.</li>\n<li><strong>Symptoms</strong> include constipation, abdominal bloating, nausea and/or vomiting. Onset may be acute or chronic.</li>\n</ul>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li><strong>X-ray abdomen</strong> will show a large, dilated loop of the colon, often with a few air-fluid levels. Specific signs include:\n<ul>\n<li><strong>coffee bean sign</strong></li>\n<li>Frimann Dahl's sign - three dense lines converge towards site of obstruction</li>\n<li>absent rectal gas</li>\n</ul>\n</li>\n<li><strong>CT</strong> may reveal large gas-filled loop without haustral markings, forming a closed-loop obstruction\n<ul>\n<li>Whirl sign: twisting of the mesentery and mesenteric vessels</li>\n<li>Bird's beak sign: if rectal contrast has been administered</li>\n</ul>\n</li>\n<li><strong>Treatment &amp; Prognosis:</strong>\n<ul>\n<li>Rectal tube insertion is successful in treating 90% of cases</li>\n<li>The most serious complication is bowel ischaemia</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/045f0806869548a4bfb147e3475f7e94.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient who had undergone a retro-oesophagal goitre resection was found to have partial ptosis and loss of hemifacial sweating. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Transient hypocalcemia"
      },
      {
        "id": 2,
        "text": "Horner's syndrome"
      },
      {
        "id": 3,
        "text": "Recurrent laryngeal nerves injury"
      },
      {
        "id": 4,
        "text": "Post operative hematoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of&nbsp;<strong>Horner's syndrome</strong>.&nbsp;</p>\n<p>The <strong>cervical sympathetic trunk</strong> is at risk of <strong>injury</strong> in invasive thyroid cancers and retro-esophageal goitres and may result in Horner's syndrome.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common variety of cancer cervix is ______",
    "choices": [
      {
        "id": 1,
        "text": "Squamous cell carcinoma"
      },
      {
        "id": 2,
        "text": "Adenocarcinoma"
      },
      {
        "id": 3,
        "text": "Clear cell carcinoma"
      },
      {
        "id": 4,
        "text": "Lymphoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common variety of cancer cervix is <strong>squamous cell carcinoma.</strong></p>\n<p>The two most common histologic subtypes of cervical cancer are squamous cell and adenocarcinoma. Squamous cell tumours make up 70% and arise from the <strong>ectocervix</strong>.</p>\n<div class=\"page\" title=\"Page 722\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The <strong>clear cell</strong> type vaginal and cervical adenocarcinomas are&nbsp;most closely associated with DES- <strong>diethylstilbestrol</strong> exposure.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Arias-Stella reaction is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Normal pregnancy"
      },
      {
        "id": 2,
        "text": "Gestational Trophoblastic disease"
      },
      {
        "id": 3,
        "text": "Endometriosis"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Arias Stella reaction is seen with all the above conditions</p>\n<ul>\n<li>In some cases of uterine and ectopic pregnancies, the endometrium shows intense adenomatous and hyper secretive activity within the glandular epithelium.</li>\n<li><strong>The cells are enlarged; epithelial nuclei show mitosis, hyperchromatic, polyploidy and atypical cell types. The cells are hyper secretive without glycogen content. This condition is called Arias-Stella reaction. These changes are focal and often associated with decidual reaction in the stroma.</strong></li>\n<li>Besides pregnancy, this endometrial reaction is seen in endometriosis, reaction to estrogen and to gonadotropins, as well as in gestational trophoblastic disease (GTD).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old woman, pregnant with twins, is diagnosed to have twin-twin transfusion syndrome. Which of the following statements is true regarding the recipient twin in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Oliguria is seen"
      },
      {
        "id": 2,
        "text": "It is called the stuck twin"
      },
      {
        "id": 3,
        "text": "Pulmonary hypoplasia is seen"
      },
      {
        "id": 4,
        "text": "Congestive cardiac failure develops"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"page\" title=\"Page 923\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Congestive heart failure</strong> is seen in the recipient twin.</p>\n<p>Twin-twin transfusion syndrome is a deep&nbsp;<strong>arteriovenous</strong> <strong>anastomotic</strong> complication seen in&nbsp;<strong>monochorionic</strong> <strong>diamniotic</strong> twins. Deoxygenated <strong>blood from</strong> the <strong>donor</strong> enters through the anastomosis into a shared cotyledon for oxygen exchange. Oxygenated blood is<strong> taken</strong> up <strong>by</strong> the <strong>recipient</strong> twin causing <strong>imbalance in</strong> the<strong> blood volumes</strong>.</p>\n<table>\n<tbody>\n<tr>\n<td>Donor twin characteristics</td>\n<td>Recipient twin characteristics</td>\n</tr>\n<tr>\n<td>Oliguria</td>\n<td>Polyuria</td>\n</tr>\n<tr>\n<td>Oligohydramnios</td>\n<td>Polyhydramnios</td>\n</tr>\n<tr>\n<td>Hypotension</td>\n<td>Hypertension</td>\n</tr>\n<tr>\n<td>Anaemia</td>\n<td>Polycythemia</td>\n</tr>\n<tr>\n<td>Activation of renin-angiotensin-aldosterone system (RAAS)</td>\n<td>Activation of atrial natriuretic peptide (ANP)</td>\n</tr>\n<tr>\n<td>Renal failure, growth restriction, pulmonary hypoplasia, contractures</td>\n<td>Congestive cardiac failure, premature rupture of membranes</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;<strong>Diagnosis</strong> of TTTS depends on 2 USG criteria:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Monochorionic diamniotic gestation</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Hydramnios (DVP&gt;8cm) in one twin and oligohydramnios (DVP&lt;2cm) in the other twin</li>\n</ul>\n<p><strong>Treatment</strong> modalities for TTTS:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Serial amnioreduction</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Laser ablation of vascular placental anastomoses</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Selective fetal termination</li>\n</ul>\n<p>Note: <strong>Donor</strong> twin is called the <strong>stuck twin</strong> as the oligohydramnios limits fetal movement.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "At what age does a child attain half-height of the adult height?",
    "choices": [
      {
        "id": 1,
        "text": "12 - 18 months"
      },
      {
        "id": 2,
        "text": "20 - 24 months"
      },
      {
        "id": 3,
        "text": "32 - 36 months"
      },
      {
        "id": 4,
        "text": "40 - 48 months"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A child attains half of the adult height by <strong>20&nbsp;-24 months.</strong></p>\n<p class=\"p1\">Length <span class=\"s1\">is </span>recorded for children under <span class=\"s2\">2 </span>years of age with the help of an <strong>infantometer</strong> or&nbsp;<strong>rigid measuring table</strong>. One person holds the infant's head&nbsp;firmly against <span class=\"s1\">a </span>fixed upright headboard. Legs are straightened, keeping fe<span class=\"s2\">e</span>t <span class=\"s1\">at </span>right angles to legs, with toes pointing upward. The free footboard is brought into firm contact with the child<span class=\"s2\">'</span>s heels<span class=\"s3\">. The length</span>&nbsp;<span class=\"s5\">of </span>the baby is measured from <span class=\"s5\">a </span><span class=\"s1\">scale, </span>which is set in the measuring table<span class=\"s2\">. </span></p>\n<p class=\"p1\">Measurement of the length of a child lying on a mattress and/or using cloth tapes&nbsp;<span class=\"s1\">is&nbsp;</span>inaccurate and not recommended.&nbsp;</p>\n<p class=\"p1\">Height is recorded by asking the child to stand upright such that heels, buttocks, <span class=\"s1\">shoulder </span>blades, and back of the head <span class=\"s1\">are </span>brought in contact <span class=\"s1\">with </span>a vertical surface such as<span class=\"s3\">&nbsp;a&nbsp;</span>wall, a height measuring rod, or a <strong>stadiometer</strong>. The child should look directly forwards and the headpiece <span class=\"s2\">is </span>kept firmly over the head to compress the hair.</p>\n<p>Plotting the height and weight on a growth chart helps determine whether the child is in the normal range for their age and early identification of factors affecting growth. During infancy, growth charts can be plotted at vaccination visits, Later in childhood, it can be during visits for vaccination, minor illnesses, or during school health programs.&nbsp;</p>\n<p>The growth and development of a child between the age of&nbsp;<strong>18 -24 months</strong><strong>&nbsp;</strong>can be classified as,</p>\n<ul>\n<li class=\"p1\"><strong>Physical Development:&nbsp;</strong>Motor development during this period includes improvements in balance and the child develops the ability to run and climb the stairs. By 24 months, children attain half of the adult height. Head growth slows slightly, with 85% of adult head circumference achieved by the age of 2 years.</li>\n<li class=\"p1\"><strong>Cognitive Development:&nbsp;</strong>Object permanence is firmly established during this period and the toddlers demonstrate flexibility in problem-solving e.g., using a stick to obtain a toy that is out of reach, figuring out how to wind a mechanical toy.</li>\n<li class=\"p1\"><strong>Emotional Development:&nbsp;</strong>Toddlers looking in a mirror for the first time will reach for their own face rather than the mirror image if they notice something unusual on their nose. They begin to recognize when toys are broken and may hand them to their parents to fix.</li>\n<li class=\"p1\"><strong>Linguistic Development: </strong>A&nbsp;child's vocabulary grows from 10-15 words at 18 months to between 50 and 100 words by&nbsp;2 years. After acquiring a vocabulary of about 50 words, toddlers begin to combine them to make simple sentences. At this stage, toddlers <strong>understand 2-step commands</strong>, such as &ldquo;Give me the ball and then get your shoes\".</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In spine fusion surgery, the screws are fixed to which part of the vertebra?",
    "choices": [
      {
        "id": 1,
        "text": "Spinous process"
      },
      {
        "id": 2,
        "text": "Lamina"
      },
      {
        "id": 3,
        "text": "Pedicle"
      },
      {
        "id": 4,
        "text": "Facet joint"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In spine fusion surgeries, screws are placed in the <strong>pedicle</strong>&nbsp;of the vertebrae.</p>\n<p><strong>Pedicle screws</strong>&nbsp;are used in a&nbsp;<strong>spinal fusion</strong>&nbsp;to add extra support and strength to the&nbsp;<strong>fusion</strong>&nbsp;while it heals.&nbsp;<strong>Pedicle screws are placed</strong>&nbsp;above and below the&nbsp;<strong>vertebrae</strong>&nbsp;that were&nbsp;<strong>fused</strong>. Rods are used to connect the&nbsp;<strong>screws</strong>&nbsp;which prevent the movement and allows the&nbsp;<strong>bone</strong>&nbsp;to heal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13c114a41a0e4ca98a18c52b98a4dac5x450x600.PNG"
    ]
  },
  {
    "text": "All are true about transvaginal USG except ______",
    "choices": [
      {
        "id": 1,
        "text": "Bladder should be full"
      },
      {
        "id": 2,
        "text": "Bladder should be empty"
      },
      {
        "id": 3,
        "text": "Consent is mandatory"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Bladder should be empty for transvaginal USG Scan.<br />Bladder should be full for transabdominal scan as it creates a good echo window, whereas for transvaginal scans, empty bladder will allow visualisation of other structures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cingulotomy is used for:",
    "choices": [
      {
        "id": 1,
        "text": "Obsessive Compulsive Disorder"
      },
      {
        "id": 2,
        "text": "Mania"
      },
      {
        "id": 3,
        "text": "Suicidal behavior"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cingulotomy and subcaudate tractotomy (capsulotomy)</strong> are psychosurgeries that are used in the management of <strong>treatment-unresponsive OCD.</strong></p>\n<p>The established indications for psychosurgery are major depression and OCD.</p>\n<p>Other indications include:</p>\n<ul>\n<li>Chronic and incapacitating&nbsp;schizophrenia with severe depression&nbsp;not responding to all modes of treatment.</li>\n<li>Chronic and incapacitating&nbsp;anxiety disorder&nbsp;not responding to all modes of treatment.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The alternative drug for cardiac arrest if epinephrine is not effective is",
    "choices": [
      {
        "id": 1,
        "text": "Vasopressin"
      },
      {
        "id": 2,
        "text": "Atropine"
      },
      {
        "id": 3,
        "text": "Amiodarone"
      },
      {
        "id": 4,
        "text": "Adenosine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Epinephrine and amiodarone are the two main drugs approved by the AHA for resuscitation of a cardiac arrest patient.</strong></p>\n<ul>\n<li>The first dose of epinephrine,1 mg IV, is administered after the 2<sup>nd</sup>&nbsp;defibrillator shock is delivered and it is continued every 3-5 minutes.</li>\n<li>If this is not effective, 300 mg IV bolus dose of amiodarone can be given and another dose of 150 mg given if necessary</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn baby was brought to the dermatology department. His mother says blisters are formed at the site of handling as shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Epidermolysis bullosa simplex"
      },
      {
        "id": 2,
        "text": "Bullous pemphigoid"
      },
      {
        "id": 3,
        "text": "Pemphigus foliaceus"
      },
      {
        "id": 4,
        "text": "Cicatricial pemphigoid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis of the above condition is <strong>epidermolysis bullosa simplex</strong>.</p>\n<p>A <strong>newborn</strong>&nbsp;with<strong> trauma</strong>-related<strong> bullae</strong> and vesicles at the<strong> site</strong> of <strong>handling&nbsp;</strong>over <strong>knees</strong> and <strong>feet&nbsp;</strong>points towards the diagnosis of epidermolysis bullosa simplex.</p>\n<p>Epidermolysis bullosa simplex (EBS) is a type of blistering disease. It occurs due to the mutation in the <strong>Keratin</strong> gene (<strong>KRT5</strong> or <strong>KRT14</strong>) encoding for Keratin 5 or 14 expressed in the basal cell layer. This&nbsp;mutation causes the production of <strong>defective intermediate filaments</strong>. This makes epidermal basal cells fragile and subsequently causes blisters on physical pressure. The separation in EBS is within the epidermis (basal cell layer).&nbsp;</p>\n<p>The child is affected at<strong> birth</strong> and caregivers present the baby with <strong>blisters</strong> at the hands, elbows,&nbsp;<strong>feet,</strong> and <strong>ankle</strong>.&nbsp;More blisters will appear as the baby starts crawling.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B- <strong>Bullous pemphigoid</strong> is characterized by large, tense <strong>subepidermal bullae</strong> in the groin, axilla, and<strong> flexors of the forearm</strong>. Most frequently they occur in the&nbsp;<strong>elderly population</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b5725c5b601348b99ef425df0ee0a0b3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/db5f81235fdb48a9b4e018d3bcd7a581x720x503.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0e2ab21dd2994a3eb1dbbbbbdb7b758ex1280x1128.JPEG"
    ]
  },
  {
    "text": "Which of the following isotopes is commonly used for external beam radiotherapy in the treatment of cancer patients?",
    "choices": [
      {
        "id": 1,
        "text": "Cobalt-59"
      },
      {
        "id": 2,
        "text": "Cobalt -60"
      },
      {
        "id": 3,
        "text": "Radium-226"
      },
      {
        "id": 4,
        "text": "Strontium-89"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Cobalt-60</strong> isotope is used for <strong>EBRT (external beam radiotherapy)</strong>.</li>\n<li>Cobalt and <strong>LINAC (Linear Accelerator) machines</strong> are used for giving external beam radiotherapy.</li>\n<li>In Cobalt machine, Co 60 isotope is used. They emit radiation of energy 1.25 Mev. Gamma rays produced by cobalt machine is used for radiotherapy.</li>\n<li>LINAC (Linear Accelerator) machine&rsquo;s cancer therapy is based on X-ray generation and not based on the isotope. The continuous spectrum of different energy radiations is produced that is orthovoltage, supervoltage and megavoltage.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 016';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>