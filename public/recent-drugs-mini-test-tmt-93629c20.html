<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recent Drugs Mini Test - -Tmt - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2023-24
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Nivolumab and Relatlimab combination can be used in which of these tumours?",
    "choices": [
      {
        "id": 1,
        "text": "Malignant Melanoma"
      },
      {
        "id": 2,
        "text": "Endometrial Carcinoma"
      },
      {
        "id": 3,
        "text": "Non small cell lung cancer"
      },
      {
        "id": 4,
        "text": "Urothelial carcinoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nivolumab and Relatlimab combination</strong> can be used in patients with <strong>Malignant Melanoma.</strong></p>\n<p>Both <strong>Nivolumab</strong> and <strong>Relatlimab</strong> are <strong>Immune checkpoint inhibitors</strong>. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">A </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">combination </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">of <strong>N</strong></span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">ivolumab</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, a </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">PD-1 blocking antibody</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">(programmed death receptor-1), </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">and Relatlimab, a LAG-3 blocking antibody </strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">(lymphocyte activation gene-3) is indicated for the treatment of patients with </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">unresectable or metastatic melanoma.</strong></p>\n<p>Binding of the<strong> PD-1 ligands </strong>(PD-L1 and PD-L2) to the PD-1 receptor found on T cells, <strong>inhibits T-cell proliferation and cytokine production.</strong> Upregulation of PD-1 ligands occurs in Malignant melanoma which leads to inhibition of T-cell immune surveillance of tumours. Similarly, the<strong> LAG-3 pathway inhibits T-cell proliferation and cytokine secretion.</strong> The <strong>drugs which inhibit </strong>PD-1 or LAG-3 and other similar <strong>interactions\u00a0between the Tumour and Immune cells</strong> are termed <strong>Immune checkpoint inhibitors.</strong></p>\n<p>The <strong>synergistic</strong> <strong>combination</strong> of Nivolumab (anti-PD-1) and Relatlimab (anti-LAG-3) results in <strong>increased T-cell activation</strong> compared to the activity of either antibody alone, as LAG-3 blockade potentiates the anti-tumour activity of PD-1 blockage,<strong> inhibiting tumour growth </strong>and <strong>promoting tumour regression</strong>.</p>\n<p>The drug combination is given by <strong>intravenous</strong> route in adults as well as children more than 12 years of age. <strong>Adverse effects</strong> upon usage include <strong>anaemia, lymphocytopenia, increased AST, increased ALT, </strong>and<strong> Hyponatremia.</strong></p>\n<p>Many other immune checkpoint inhibitors have been approved for the treatment of various tumours. <strong>Pembrolizumab </strong>which acts by inhibiting <strong>PD-1, </strong>is approved for the treatment of <strong>carcinoma endometrium</strong>.</p>\n<p><strong>Atezolimumab</strong>\u00a0is also an immune checkpoint inhibitor, acts by inhibiting <strong>PDL-1,</strong>\u00a0used for the treatment of <strong>non-small cell lung cancer</strong>.</p>\n<p><strong>Durvalumab</strong> is also a <strong>PD-L1 inhibitor</strong> and is approved for use in <strong>metastatic urothelial</strong>\u00a0<strong>cancer.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Eflapegrastim belongs to which of the given drug class?",
    "choices": [
      {
        "id": 1,
        "text": "Recombinant human erythropoietin"
      },
      {
        "id": 2,
        "text": "Recombinant human thrombopoietin"
      },
      {
        "id": 3,
        "text": "Recombinant human granulocyte colony-stimulating factor"
      },
      {
        "id": 4,
        "text": "Recombinant human granulocyte-macrophage colony-stimulating factor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Eflapegrastim </strong>is a <strong>Recombinant human granulocyte colony-stimulating factor</strong> (G-CSF).</p>\n<p>FDA has recently approved <strong>Eflapegrastim</strong> to <strong>decrease the incidence of infection</strong>, in adult patients receiving myelosuppressive<strong> </strong>anti<strong>-</strong>cancer<strong> </strong>drugs<strong>.</strong> <strong>Anti-cancer drugs</strong> can frequently cause <strong>Myelosuppression</strong>, which manifests as febrile neutropenia and increase the risk of recurrent and severe infection in these patients. Thus, <strong>recombinant human granulocyte colony-stimulating factor</strong> (G-CSF) class of drugs are given to correct the neutropenia. Examples of G-CSF are <strong>eflapegrastim, pegfilgrastim and filgrastim</strong>.&nbsp;</p>\n<p><strong>Eflapegrastim </strong>binds to G-CSF receptors on <strong>myeloid progenitor cells and neutrophils,</strong> triggering signalling pathways that control cell differentiation, proliferation, migration and survival. <strong>Adverse effects </strong>include <strong>fatigue,</strong> <strong>nausea, diarrhoea, bone pain, headache, pyrexia, anaemia, rash, myalgia, arthralgia, </strong>and<strong> back pain</strong>.&nbsp;</p>\n<p>Other options: <strong>Recombinant human erythropoietin </strong>like <strong>Epoetin alfa</strong>&nbsp;and&nbsp;<strong>darbepoetin alfa</strong> are used in the treatment of <strong>anaemias</strong> associated with surgery, AIDS, cancer chemotherapy, and certain chronic inflammatory conditions. They increase erythropoiesis.</p>\n<p><strong>Recombinant human thrombopoietin </strong>like <strong>Oprelvekin</strong> is used in the treatment of <strong>chemotherapy-induced thrombocytopenia</strong>. It increases thrombopoiesis.</p>\n<p><strong>Recombinant human granulocyte-macrophage colony-stimulating factor</strong>(GM-CSF) like <strong>Sargramostim</strong> is used for <strong>Myeloid reconstitution </strong>after bone marrow transplant, <strong>Prophylaxis of neutropenia </strong>in myelosuppressive chemotherapy and <strong>Stem cell mobilization</strong> in donor for stem cell transplant.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old boy presents to you following the burn injury as shown in the below image. Your senior consultant advises you to prescribe a topical agent that can remove the eschar. Which of the following agents is best suited for this specific purpose?",
    "choices": [
      {
        "id": 1,
        "text": "Mafenide acetate"
      },
      {
        "id": 2,
        "text": "Silver nitrate"
      },
      {
        "id": 3,
        "text": "Anacaulase"
      },
      {
        "id": 4,
        "text": "Silver sulfadiazine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image shows <strong>burns with eschar</strong> and among the above-mentioned topical applications, <strong>Anacualase </strong>is used to <strong>remove eschar.</strong></p>\n<p><strong>Eschar</strong> is a form of <strong>tissue reaction</strong> that can form in patients with burns. It is composed of <strong>dead tissue </strong>and <strong>dried secretions</strong> from a skin wound following a burn or even an infectious disease of the skin. An eschar prevents topical medications to reach the patient's viable tissue and thus hinders the healing of the burn wounds.</p>\n<p><strong>Anacualase</strong> is a newly approved topical agent that<strong> contains proteolytic enzymes </strong>and is indicated for eschar removal in adults with deep partial thickness or full-thickness thermal burn. It acts by <strong>dissolving the burn wound eschar </strong>through proteolytic enzymes. The most commonly associated adverse reactions are<strong> pruritus</strong> and<strong> pyrexia.</strong> <strong>Pain</strong> during application can be managed by premedications before the burn dressing.</p>\n<p><strong>Mafenide acetate</strong> either in cream or solution form is an effective <strong>topical antimicrobial</strong>. It is effective even in the presence of eschar as it can&nbsp;<strong>penetrate burn eschar</strong> to reach the interface with the patient's viable tissue. But on its own Mafenide acetate <strong>does not dissolve and remove the eschar.</strong></p>\n<p><strong>Silver sulphadiazine </strong>and <strong>Silver nitrate </strong>are both topical antimicrobial agents used in patients with burns but they <strong>cannot penetrate eschar </strong>and thus cannot be used in these patients.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/027d37b1ca6342988e84f01056058492.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The image below shows the Sites of action of various antifungal drugs. Which is the site of action for Rezafungin?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Rezafungin</strong> belongs to the <strong>Echinocandin</strong> group of drugs. It <strong>inhibits</strong> the activity of the <strong>glucan synthase complex </strong>marked by <strong>site 4 </strong>in the image.</p>\n<p><strong>Rezafungin&nbsp;</strong>is a newly FDA-approved Echinocandin antifungal reserved as a second-line agent<strong> for treating candidemia and invasive candidiasis</strong>. 1,3-&beta;-D glucan is an essential component of the fungal cell wall which maintains cell integrity. Rezafungin similar to other Echinocandins&nbsp;acts by&nbsp;<strong>inhibiting the synthesis of&nbsp;1,3-&beta;-D-glucan</strong> and thereby weakens the fungal cell wall and increases the osmotic susceptibility of candida. It is administered <strong>intravenously</strong> in patients at least <strong>18 years old</strong>. The most common <strong>adverse reactions</strong> are <strong>hypokalemia, pyrexia, diarrhoea, anaemia, vomiting, abdominal pain </strong>and<strong> constipation.</strong></p>\n<p>Site of action of other Antifungal agents:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2fb8d3f7b63c4fedaa872bc20a06ce64.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/223d24b7e0d84721a94c23176114c9dax1280x2560.JPEG"
    ]
  },
  {
    "text": "Futibatinib, a newly approved drug is used in the treatment of metastasis of which of the following tumors?",
    "choices": [
      {
        "id": 1,
        "text": "Gastric Adenocarcinoma"
      },
      {
        "id": 2,
        "text": "Intra-hepatic Cholangio-carcinoma"
      },
      {
        "id": 3,
        "text": "Hepatocellular Carcinoma"
      },
      {
        "id": 4,
        "text": "Pancreatic Adenocarcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Futibatinib</strong> is a newly FDA-approved drug used to treat <strong>locally advanced or metastatic intrahepatic cholangiocarcinoma.</strong></p>\n<p><strong>Intrahepatic Cholangiocarcinoma(ICC) </strong>is one of the most aggressive tumours which originates from the intrahepatic bile duct. Histologically ICCs are <strong>adenocarcinomas</strong>. Only a minority of patients present with a resectable disease. Most patients present when the disease has already metastasized to the liver, stomach or colon.\u00a0</p>\n<p><strong>Futibatinib</strong> is a <strong>kinase inhibitor</strong> indicated for the treatment of adult patients with previously treated, unresectable, locally advanced or metastatic I<strong>ntrahepatic cholangiocarcinoma</strong> harbouring <strong>fibroblast growth factor receptor 2 (FGFR2) gene fusions</strong>. The drug is also active in patients with other genetic rearrangements/fusions but the response is best in patients with FGFR gene fusions.</p>\n<p><strong>Mechanism of action:</strong> Futibatinib <strong>inhibits FGFR phosphorylation</strong> and downstream signalling and <strong>decreases cell viability in cancer</strong> cell lines with FGFR alterations. It is <strong>metabolised by</strong> Cytochrome enzyme<strong>-CYP3A</strong>. Co-administration of CYP3A inducers and inhibitors should therefore be avoided. The most common <strong>adverse reactions</strong> are <strong>nail toxicity,</strong> <strong>musculoskeletal pain</strong>, constipation, diarrhoea, fatigue, <strong>dry mouth</strong>, and <strong>alopecia</strong>.</p>\n<p>Currently, <strong>Futibatinib is not</strong> approved to be used in <strong>Gastric Adenocarcinoma</strong>, <strong>Hepatocellular Carcinoma </strong>and<strong> Pancreatic Adenocarcinoma.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Tofersen is approved for the treatment of which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Parkinson's Disease"
      },
      {
        "id": 2,
        "text": "Alzheimer's Dementia"
      },
      {
        "id": 3,
        "text": "Lewy body dementia"
      },
      {
        "id": 4,
        "text": "Amyotrophic Lateral Sclerosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tofersen\u00a0</strong>is approved for the treatment of <strong>Amyotrophic lateral sclerosis (ALS)</strong>.</p>\n<p><strong>Tofersen </strong>is an <strong>antisense oligonucleotide </strong>indicated for treating <strong>Amyotrophic lateral sclerosis (ALS) </strong>in adults with\u00a0a mutation in the <strong>superoxide dismutase 1 (SOD1) gene. </strong>It acts by<strong>\u00a0</strong>causing <strong>degradation of SOD1 mRNA</strong> after binding to it, which results in a <strong>reduction of SOD1 protein synthesis.\u00a0</strong>The most common adverse effects associated with the use of Tofersen are <strong>pain, fatigue</strong>, arthralgia, <strong>increased WBC count in CSF</strong> and myalgia.\u00a0</p>\n<p><strong>ALS</strong> is a progressive motor neuron disease. It presents as upper motor neuron (<strong>UMN</strong>) palsy\u00a0(exaggerated reflexes, extensor plantar), lower motor neuron (<strong>LMN</strong>) palsy (muscle weakness, atrophy, fasciculations), and\u00a0<strong>pseudobulbar palsy</strong> (dysarthria, tongue spasticity), with normal bladder, bowel and sensory functions.</p>\n<p>Other options: <strong>Parkinson's disease</strong> is a neurodegenerative disease characterized by tremors at rest, rigidity, bradykinesia, gait dysfunction, postural instability, speech difficulty, swallowing impairment, and autonomic disturbances. <strong>Levodopa and carbidopa</strong> combination is used as the first line of treatment.</p>\n<p><strong>Alzheimer's disease</strong> is the\u00a0most common\u00a0cause of\u00a0dementia\u00a0in the\u00a0elderly.<strong> </strong>Treatment includes drugs like <strong>Donepezil, rivastigmine, Galantamine and Memantine.</strong></p>\n<p><strong>Lewy body dementia\u00a0</strong>is a progressive neurodegenerative associated with\u00a0dementia, psychosis,\u00a0and features of\u00a0parkinsonism. The mainstay of treatment is symptomatic management which includes <strong>cholinesterase inhibitors</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs delay the onset of Stage-3 in patients with Stage-2 of Type 1 Diabetes?",
    "choices": [
      {
        "id": 1,
        "text": "Omaveloxolone"
      },
      {
        "id": 2,
        "text": "Teplizumab"
      },
      {
        "id": 3,
        "text": "Insulin"
      },
      {
        "id": 4,
        "text": "Erenumab"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Teplizumab </strong>is a recently approved drug used to <strong>delay the onset of Stage-3</strong> in patients with Stage-2 of <strong>Type 1 Diabetes</strong> Mellitus(Type 1 DM).</p>\n<p><strong>Type 1 DM</strong> is caused due to<strong> immune-mediated destruction</strong> of the pancreatic <strong>beta cells</strong> and insulin deficiency. Patients usually present in adolescence or early adulthood with classical features of DM. Based on further evaluation, patients with Type 1 DM can be further categorised into three stages.</p>\n<p><strong>Stage 1 disease</strong> is characterized by the development of <strong>two or more islet cell autoantibodies</strong> but the maintenance of <strong>normoglycemia</strong>. <strong>Stage 2 disease i</strong>s defined by continued autoimmunity and the <strong>development of dysglycemia</strong>(due to progressive Beta cell destruction). <strong>Stage 3</strong> is defined by the development of <strong>hyperglycemia</strong> that exceeds the diagnostic criteria for the diagnosis of diabetes.</p>\n<p><strong>Teplizumab </strong>is a new drug which can delay the onset of Stage-3 of Type 1 DM in patients with Stage-2 of Type 1 DM. It acts by <strong>binding to CD-3 of T cells</strong> and possibly does <strong>partial agonistic signalling </strong>and <strong>deactivation of pancreatic beta cell autoreactive T lymphocytes.</strong> Thus the progressive destruction of Beta cells in the pancreas is delayed. The adverse effects of the drug include l<strong>ymphopenia</strong> and <strong>severe infections</strong>, <strong>rash</strong>, <strong>hypersensitivity</strong> reactions and <strong>headache</strong>.</p>\n<p>&nbsp;</p>\n<p>Other options: <strong>Omaveloxolone</strong> is an <strong>activato</strong>r of <strong>Nrf2</strong>, a newly FDA-approved drug for the treatment of <strong>Friedrich&rsquo;s ataxia.</strong></p>\n<p><strong> Insulin</strong> is the <strong>drug of choice</strong> in patients with <strong>Type 1 DM</strong>, but it does not affect the disease progression.</p>\n<p><strong>Erenumab </strong>is a <strong>CGRPreceptor antagonist&nbsp;</strong>used in the treatment of an<strong> acute attack of migraine</strong></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following Seizure types in Column A with the drugs used to treat them in Column B.",
    "choices": [
      {
        "id": 1,
        "text": "A-2, B-1, C-4, D-3"
      },
      {
        "id": 2,
        "text": "A-2,B-1, C-3, D-4"
      },
      {
        "id": 3,
        "text": "A-1, B-2, C-3, D-4"
      },
      {
        "id": 4,
        "text": "A-3, B-2, C-4, D-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct match is:</p>\n<table style=\"height: 208.945px; width: 434px;\" width=\"415\">\n<tbody>\n<tr style=\"height: 45.375px;\">\n<td style=\"width: 251.477px; height: 45.375px;\">A. West Syndrome</td>\n<td style=\"width: 153.93px; height: 45.375px;\">2. ACTH</td>\n</tr>\n<tr style=\"height: 78.7969px;\">\n<td style=\"width: 251.477px; text-align: left; height: 78.7969px;\">B. cyclin-dependent kinase-like 5 (CDKL5) deficiency disorder</td>\n<td style=\"width: 153.93px; height: 78.7969px;\">1. Ganaxolone</td>\n</tr>\n<tr style=\"height: 43.3828px;\">\n<td style=\"width: 251.477px; height: 43.3828px;\">C. Lennox Gestaut Syndrome</td>\n<td style=\"width: 153.93px; height: 43.3828px;\">3. Sodium Valproate</td>\n</tr>\n<tr style=\"height: 41.3906px;\">\n<td style=\"width: 251.477px; height: 41.3906px;\">D. Typical Absence Seizure</td>\n<td style=\"width: 153.93px; height: 41.3906px;\">4. Ethosuximide</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p><strong>West Syndrome</strong>&nbsp;is a rare type of epilepsy syndrome that begins in&nbsp;<strong>infancy</strong>. It is characterized by a triad of <strong>Infantile spasms</strong>,<strong>&nbsp;developmental regression</strong>, and<strong>&nbsp;hypsarrhythmia</strong> (on EEG). The drug of choice for West syndrome is&nbsp;<strong>ACTH</strong>(Adreno Corticotrophic Hormone) injections. The drug of choice for infantile spasms<strong>&nbsp;</strong>associated with <strong>tuberous</strong> <strong>sclerosis</strong> is&nbsp;<strong>vigabatrin</strong>.</p>\n<p><strong>Cyclin-dependent kinase-like 5 (CDKL5) deficiency</strong> causes <strong>developmental encephalopathy</strong> which presents with <strong>epilepsy, hypotonia, developmental disabilities </strong>and<strong> cortical visual impairment</strong>. <strong>Ganaxolone</strong> is a recently approved drug for the treatment of <strong>seizures</strong> associated with CDKL5 deficiency.</p>\n<p>The exact <strong>mechanism of action</strong> of Ganaxolone is unknown, but its <strong>anticonvulsant effects</strong> are thought to result from <strong>positive allosteric modulation of the GABA-A receptor</strong> in the CNS. It can be used in adults as well as children older than 2 years of age. The most common <strong>adverse reactions </strong>associated with the drug are<strong> somnolence, pyrexia, salivary hypersecretion </strong>and<strong> seasonal allergy.</strong>&nbsp;</p>\n<p><strong>Lennox-Gastaut syndrome usually</strong>&nbsp;starts between the age of 2 and 10 years. It consists of a&nbsp;<strong>triad</strong> of <strong>Developmental delay</strong>, <strong>Multiple seizure types </strong>(including atypical absences, myoclonic, astatic, and tonic seizures) and <strong>characteristic EEG findings</strong> (<strong>1&ndash;2 Hz spike&nbsp;and slow waves</strong>). The <strong>drug of choice f</strong>or Lennox-Gastaut Syndrome is <strong>Sodium Valproate</strong>. Other drugs used for treatment include lamotrigine, topiramate and clobazam.&nbsp;</p>\n<p><strong>Typical absence Seizures</strong> are characterized by&nbsp;sudden,&nbsp;<strong>brief lapses of consciousness</strong>&nbsp;with&nbsp;<strong>preserved postural control</strong>&nbsp;and&nbsp;<strong>no post-ictal confusion.&nbsp;</strong>Usually, the seizure occurs in children aged four to ten years and <strong>lasts only a few seconds.</strong> <strong>Ethosuximide</strong>&nbsp;and&nbsp;<strong>sodium valproate</strong>&nbsp;are used as first-line therapy for&nbsp;<strong>absence seizures.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true for Daridorexant?",
    "choices": [
      {
        "id": 1,
        "text": "Melatonin Analogue used for insomnia"
      },
      {
        "id": 2,
        "text": "Melatonin Antagonist used for Narcolepsy"
      },
      {
        "id": 3,
        "text": "Orexin Antagonist used for Insomnia"
      },
      {
        "id": 4,
        "text": "Orexin Agonist used for Narcolepsy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Daridorexant</strong> is an <strong>Orexin Antagonist</strong> used for the treatment of <strong>Insomnia</strong>.</p>\n<p><strong>Insomnia</strong> is defined as <strong>difficulty initiating or maintaining sleep. </strong>It may be transient or persistent. <strong>Daridorexant</strong> is an <strong>orexin receptor antagonist</strong> indicated for <strong>treating</strong> adult patients with <strong>insomnia</strong> characterized by difficulties with sleep onset or sleep maintenance. The orexin neuropeptide signalling system plays a role in wakefulness. Daridorexant <strong>blocks the binding of</strong> wake-promoting neuropeptides <strong>orexin A and orexin B to their receptors</strong> suppressing the wake drive. It is an <strong>oral</strong> preparation and the most common <strong>adverse effects</strong> are <strong>headache</strong> and <strong>somnolence</strong> or fatigue. <strong>Suvorexant</strong> is also an <strong>Orexin Receptor antagonist</strong> used for the treatment of insomnia.</p>\n<p>Other options:<strong>&nbsp;Melatonin analogue </strong><span class=\"fontstyle0\">approved for the treatment of&nbsp;<strong>insomnia is Ramelteon.</strong> It is used mainly in conditions with <strong>difficulties</strong>&nbsp;of<strong>&nbsp;sleep onset</strong>. <strong>Tasimelteon and Agomelatine</strong> are other drugs included in this drug class.</span></p>\n<p><span class=\"fontstyle0\">Hypocretin neurons activate wake-promoting pathways in the CNS. A <strong>deficiency of hypocretin</strong>, likely due to autoimmune destruction of hypocretin neurons, produces <strong>narcolepsy</strong>, a condition of hypersomnia, including excessive daytime sleepiness and sudden attacks of sleep. <strong>Melatonin antagonists and Orexin agonists are not used in humans </strong>to treat narcolepsy.&nbsp;</span></p>\n<p><span class=\"fontstyle0\">Rather <strong>CNS stimulants</strong>, which enhance transmission in monoamine pathways <strong>like modafinil and armodafinil</strong> are used in the <strong>treatment of Narcolepsy</strong>.</span></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common adverse effect associated with Bexagliflozin?",
    "choices": [
      {
        "id": 1,
        "text": "Ketoacidosis"
      },
      {
        "id": 2,
        "text": "Urinary tract infections"
      },
      {
        "id": 3,
        "text": "Lower limb amputaion"
      },
      {
        "id": 4,
        "text": "Hypoglycemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bexagliflozin </strong>is a recently approved drug used for glycemic control in patients with <strong>Type 2 DM</strong>. The most common adverse effect associated with the drug is <strong>Urinary tract infections</strong>.</p>\n<p><strong>Bexagliflozin</strong> is a newly approved drug by the FDA. It is a <strong>Sodium-glucose co-transporter 2 (SGLT2) inhibitor</strong> indicated as an adjunct to diet and exercise to improve glycemic control in adults with type 2 diabetes mellitus. Inhibiting SGLT2 reduces renal reabsorption of filtered glucose, thereby <strong>increasing</strong> <strong>urinary glucose excretion</strong>. This increased glucose load in the urine increases the risk of <strong>urinary and genital mycotic </strong>infections.</p>\n<p>Other <strong>adverse effects</strong> associated with the use of <strong>Bexagliflozin&nbsp;</strong>are <strong>Ketoacidosis</strong>( In patients with Type 1 DM), <strong>Lower</strong> <strong>Limb</strong> <strong>Amputation</strong>, <strong>Volume Depletion, Hypoglycemia </strong>(with Concomitant Use with Insulin) and <strong>Necrotizing Fasciitis of the Perineum (Fournier&rsquo;s Gangrene).</strong></p>\n<p>All the other options are also possible adverse effects that could develop after using Bexagliflozin but occur less frequently than Urinary tract infections. If used in patients with Type 1 DM <strong>Bexagliflozin </strong>can cause&nbsp;<strong>euglycemic diabetic ketoacidosis (DKA)</strong> because of the increased excretion of glucose in the urine which induces glucagon secretion which in turn increases the production of glucose and ketones in the liver leading to ketoacidosis.</p>\n<p>It also <strong>increases the risk of fractures</strong> and <strong>lower limb amputations </strong>due to the creation of an imbalance with the minerals and circulating parathormone and vitamin D.</p>\n<p>Concomitant use of <strong>Insulin</strong> and <strong>Bexagliflozin</strong> may lead to the development of <strong>Hypoglycemia</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 19-year-old male presents with a staggering gait and a history of frequent falls. On examination, deep tendon reflexes are depressed and nystagmus is seen. PCR reveals expansion of a GAA trinucleotide repeat. Which of the following drugs can be used for the treatment of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Trofinetide"
      },
      {
        "id": 2,
        "text": "Omaveloxolone"
      },
      {
        "id": 3,
        "text": "Zavegepant"
      },
      {
        "id": 4,
        "text": "Erenumab"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Features of <strong>frequent falling</strong>, <strong>staggering gait, depressed deep tendon reflex</strong> and <strong>nystagmus</strong>, and the <strong>expansion of GAA trinucleotide repeats</strong> in a 19-year-old male suggest<strong>\u00a0Friedrich's ataxia. </strong><strong>Omaveloxolone</strong> is a newly FDA-approved drug for the treatment of <strong>Friedrich\u2019s ataxia.</strong></p>\n<p><strong>Friedreich's ataxia\u00a0i</strong>s the most common form of\u00a0<strong>inherited </strong>ataxia. It is an <strong>autosomal recessive</strong> disorder generally occurring in individuals less than 25 years of age. It is caused by the expansion of a <strong>GAA</strong>\u00a0<strong>trinucleotide repeat </strong>in the first intron of a gene on\u00a0<strong>chromosome 9q13</strong>\u00a0that encodes\u00a0<strong>frataxin. </strong>Patients present with<strong>\u00a0</strong>clinical features of <strong>dysarthria,</strong>\u00a0progressive\u00a0<strong>staggering gait</strong>, frequent falls, <strong>nystagmus,</strong> and <strong>titubation</strong>(nodding head and body movements).</p>\n<p><strong>Omaveloxolone</strong> was recently approved by the FDA for treating Friedrich\u2019s ataxia in adults and adolescents aged 16 years and older. Alanine aminotransferase (ALT), aspartate aminotransferase (AST), bilirubin, B-type natriuretic peptide (BNP), and lipid profiles should be documented prior to initiating the <strong>oral drug</strong>.</p>\n<p>The exact <strong>mechanism of action</strong> of the drug is unknown, but it has been shown to <strong>activate the Nuclear factor (erythroid-derived 2)like 2 (Nrf2) pathway</strong> in vitro and in vivo in animals and humans. The Nrf2 pathway is involved in the <strong>cellular response to oxidative stress.\u00a0</strong></p>\n<p><strong>Adverse effects</strong> on administration are <strong>elevation of liver enzymes</strong> (AST/ALT), elevation of <strong>BNP</strong>(Brain Natriuretic Peptide), headache, nausea, abdominal pain, fatigue, diarrhea, and musculoskeletal pain. Omaveloxolone is <strong>metabolized by the CYP3A4 cytochrome enzyme</strong> and hence can interact with other CYP3A4 substrates like Midazolam.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p><strong>Trofinetide</strong>(option A)is a synthetic <strong>analogue of IGF-1</strong>(Insulin-like Growth Factor-1) recently approved for the treatment of <strong>Rett Syndrome</strong>.</p>\n<p><strong>Zavegepant</strong>(option C) is a calcitonin gene-related peptide (<strong>CGRP</strong>)\u00a0<strong>antagonist </strong>used to treat <strong>acute attacks of</strong> <strong>migraine.</strong></p>\n<p><strong>Erenumab</strong>(option D)is a <strong>monoclonal antibody</strong> against the <strong>CGRP receptor </strong>used in the <strong>prevention</strong> of<strong> migraine.</strong></p>\n<p>\u00a0</p>\n<p>\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Daprodustat, a newly approved drug is used in the treatment of which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Open Angle Glaucoma"
      },
      {
        "id": 2,
        "text": "Anemia in CKD patients"
      },
      {
        "id": 3,
        "text": "Post partum Hemorrhage"
      },
      {
        "id": 4,
        "text": "Gout"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Daprodustat </strong>is a newly approved drug by the FDA used for treating <strong>Anemia in CKD patients.</strong></p>\n<p>In patients with <strong>CKD</strong>(Chronic Kidney Disease), there is <strong>decreased erythropoietin </strong>production which in turn leads to the development of Anemia.</p>\n<p><strong>Daprodustat</strong> is a reversible <strong>inhibitor of HIF-PH</strong>(Hypoxia-inducible factor\u2013prolyl hydroxylase domain). This activity results in the stabilization and nuclear <strong>accumulation of HIF transcription factors</strong>, leading to increased <strong>transcription of the HIF-responsive genes,</strong> including <strong>erythropoietin</strong> and thereby correcting Anemia. However, an\u00a0optimal response to treatment with Daprodustat occurs only when <strong>iron stores</strong>\u00a0are\u00a0<strong>adequate</strong> to complement the increased erythropoietin levels for producing new RBCs.<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">It is reserved for Patients who have been receiving <strong>dialysis for at least four months.</strong></span></p>\n<p>Daprodustat is given as <strong>once-daily oral preparation.</strong> The most common <strong>adverse reactions </strong>are<strong> hypertension, thrombotic vascular events, </strong>and<strong> abdominal pain. </strong>It increases the risk of thrombotic vascular events, including major adverse cardiovascular events like <strong>myocardial infarction, stroke </strong>and<strong> venous thromboembolism.</strong></p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Rozanolixizumab is indicated for the treatment of which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Myasthenia gravis"
      },
      {
        "id": 2,
        "text": "Lambert-Eaton syndrome"
      },
      {
        "id": 3,
        "text": "Duchenne muscular dystrophy"
      },
      {
        "id": 4,
        "text": "Myotonic Dystrophy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Rozanolixizumab</strong> is a newly FDA-approved drug indicated for use in patients with <strong>generalised Myasthenia gravis.</strong></p>\n<p><strong>Myasthenia gravis</strong> is a Neuromuscular-junction(NMJ) disorder due to <strong>autoimmune </strong>damage to the <strong>postsynaptic acetylcholine receptors at the NMJ</strong>. It is characterized by <strong>weakness</strong>&nbsp;and&nbsp;<strong>muscle fatigue</strong>. Weakness increases with usage and muscle movement is difficult at the end of the day. It affects proximal<strong> </strong>muscles leading to<strong> weakness of the limbs</strong>. Ocular features like <strong>ptosis</strong>&nbsp;and&nbsp;<strong>diplopia</strong> can also be seen. <strong>Treatment </strong>includes <strong>Anticholinesterase</strong> drugs like <strong>Pyridostigmine</strong>, <strong>immunosuppression</strong> and even <strong>Thymectomy</strong> if the condition is associated with a Thymoma. Recently <strong>Rozanolixizumab</strong> has been approved for treating cases of generalised Myasthenia gravis.</p>\n<p><strong>Rozanolixizumab</strong> is a humanized IgG4 <strong>monoclonal antibody</strong> that binds to the<strong>&nbsp;Fc receptor</strong> (FcRn) of the <strong>circulating Autoantibodies </strong>against the Acetyl-choline receptors. This neutralisation of auto-antibodies provides clinical relief of symptoms. It is administered through a <strong>subcutaneous</strong> route. The most common <strong>adverse reactions</strong> noted with the use of Rozanolixizumab in patients with generalised Myasthenia Gravis are <strong>headache, infections, </strong>diarrhoea<strong>, </strong>fever<strong>, hypersensitivity reactions </strong>and<strong> </strong>nausea<strong>.</strong></p>\n<p><strong>Lambert-Eaton myasthenic syndrome&nbsp;(LEMS)</strong> is an autoimmune disorder affecting the&nbsp;<strong>presynaptic</strong> membrane at the NMJ. Patients present with&nbsp;proximal muscle <strong>weakness&nbsp;of the lower limbs</strong>, <strong>ptosis</strong>, and <strong>diplopia</strong>. However, symptoms might&nbsp;improve after brief exercise. <strong>Treatment</strong> involves <strong>plasmapheresis</strong>, <strong>immunotherapy</strong>, and drugs such as <strong>3,4-diaminopyridine </strong>(3,4-DAP) and <strong>pyridostigmine</strong>.</p>\n<p><strong>Duchenne muscular dystrophy</strong>&nbsp;(DMD) is X-linked muscular dystrophy due to mutations in the dystrophin gene. It most commonly affects&nbsp;boys&nbsp;in their&nbsp;childhood. Patients initially present with&nbsp;<strong>proximal muscle weakness</strong> predominantly in the lower limbs.&nbsp;<strong>Calf muscle hypertrophy</strong> is a cardinal feature. Other features include mental retardation, cardiac failure, and myoglobinuria. Treatment includes corticosteroids, <strong>Eteplirsen</strong>&nbsp;and&nbsp;<strong>Casimersen.</strong>&nbsp;</p>\n<p><strong>Myotonic dystrophy</strong>&nbsp;is an&nbsp;autosomal dominant&nbsp;disorder affecting multiple systems. It is associated with&nbsp;<strong>skeletal muscle weakness, cataracts, endocrinopathy, </strong>and<strong>&nbsp;cardiomyopathy</strong>. The <strong>treatment</strong> is mainly <strong>symptomatic</strong> however, <strong>mexiletine</strong> is indicated for reducing myotonia.</p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pegunigalsidase, a newly approved drug is used in the treatment of which of the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "Tay-Sachs disease"
      },
      {
        "id": 2,
        "text": "Fabry disease"
      },
      {
        "id": 3,
        "text": "Gaucher Disease"
      },
      {
        "id": 4,
        "text": "Niemann-Pick disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pegunigalsidase alfa</strong> or simply <strong>Pegunigalsidase </strong>is a newly approved drug by the FDA used for treating\u00a0<strong>adults</strong> with<strong> Fabry Disease.</strong></p>\n<p><strong>Fabry disease</strong> is caused due to <strong>alpha-galactosidase deficiency\u00a0</strong>leading to the accumulation of globotriaosyl-ceramide. It is an X-linked recessive disorder, hence full symptoms are only seen in males. They usually present as <strong>skin rashes </strong>and<strong> kidney failure</strong>. Treatment is with\u00a0<strong>enzyme replacement therapy</strong> (recombinant alpha-Gal A or migalastat). Recently The FDA approved <strong>Pegunigalsidase\u00a0</strong>for treating confirmed cases of Fabry Disease.</p>\n<p><strong>Pegunigalsidase</strong> is a modified <strong>recombinant human alpha-galactosidase A enzyme</strong>. In patients with Fabry disease, it acts as an exogenous source of alpha-galactosidase A. The most common adverse reactions are infusion-associated reactions( and hypersensitivity), nasopharyngitis, headache, diarrhea, fatigue, nausea, back pain, and sinusitis.</p>\n<p>Other options: Option A - <strong>Tay-Sachs</strong> disease is caused due to hexosaminidase A deficiency leading to the accumulation of Glucocerebroside. Clinical symptoms include mental retardation, blindness, and muscular weakness.\u00a0</p>\n<p>Option C- <strong>Gaucher Disease</strong> is a genetic disorder due to glucocerebrosidase (\u03b2-glucosidase) deficiency<strong>.</strong> Patients present with hepatosplenomegaly, pancytopenia, osteoporosis, and avascular necrosis of the femur. <strong>Imiglucerase\u00a0</strong>is used as enzyme replacement therapy.</p>\n<p>Option D - <strong>Niemann-Pick</strong> disease\u00a0is caused due to sphingomyelinase deficiency\u00a0leading to the accumulation of sphingomyelin. Clinical features include mental retardation and hepatosplenomegaly.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sutimlimab is used in the treatment of which of the given conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Warm antibody autoimmune hemolytic anaemia"
      },
      {
        "id": 2,
        "text": "Paroxysmal cold hemoglobinuria"
      },
      {
        "id": 3,
        "text": "Paroxysmal nocturnal hemoglobinuria"
      },
      {
        "id": 4,
        "text": "Cold Agglutinin disease"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Sutimlimab</strong> is used in the treatment of&nbsp;<strong>Cold Agglutinin disease.</strong></p>\n<p><strong>Cold Agglutinin disease&nbsp;</strong>is a type of immune hemolytic anaemia which is <strong>caused by IgM antibodies</strong> that bind to red cells avidly at <strong>low temperatures</strong> (0&deg;C to 4&deg;C) but not at 37&deg;C, resulting in vascular obstruction and <strong>extravascular hemolysis. </strong>Cold agglutinin antibodies sometimes appear transiently <strong>following certain infections</strong>, such as <strong><em>Mycoplasma pneumoniae,</em></strong> <em>Epstein-Barr virus </em>and<em> CMV.</em></p>\n<p><strong>Clinically</strong> it presents with<strong>&nbsp;pallor, cyanosis,&nbsp;</strong>and the<strong> Raynaud phenomenon of fingers, toes and ears </strong>when<strong> </strong>exposed to&nbsp;<strong>cold temperatures&nbsp;</strong>of<strong>&nbsp;</strong>0&deg; C to 4&deg;C.<strong>&nbsp;</strong>The disorder is usually self-limiting but <strong>Chronic cold agglutinin immune hemolytic anaemia </strong>which may occur in certain <strong>B-cell neoplasms</strong> requires treatment. <strong>Sutimlimab&nbsp;</strong>is one of the newly approved drugs which can be used to manage <strong>chronic and severe</strong> <strong>Cold Agglutinin disease.</strong></p>\n<p><strong>Sutimlimabis</strong> is a monoclonal antibody that <strong>inhibits the classical complement pathway</strong> by binding to <strong>complement protein C1s</strong> (s subcomponent of C1) thus preventing<strong>&nbsp;the deposition of </strong>complement <strong>opsonins on</strong> the surface of <strong>RBCs</strong>. This inhibits hemolysis in patients with <strong>Cold Agglutinin disease. </strong>The most common <strong>adverse reactions</strong> associated with Sutimlimab are <strong>Respiratory tract infection</strong>, <strong>diarrhoea</strong>,&nbsp;<strong>cough</strong>, <strong>arthralgia</strong> and <strong>peripheral oedema</strong>.&nbsp;</p>\n<p><strong>Warm antibody</strong><strong> immune hemolytic anaemia</strong>&nbsp;is caused by <strong>antibodies</strong> that bind to Rbcs <strong>at 37 degrees Celsius</strong>. It may be idiopathic, or secondarily caused by&nbsp;<strong>drugs</strong>&nbsp;such as&nbsp;<strong>alpha-methyldopa</strong>, other&nbsp;<strong>autoimmune diseases</strong>&nbsp;such as SLE, or lymphoid neoplasms.&nbsp;</p>\n<p><strong>&nbsp;Paroxysmal nocturnal hemoglobinuria(PNH)</strong> is a disease that results from <strong>acquired mutations</strong>&nbsp;in the&nbsp;<strong>phosphatidylinositol glycan complementation group A gene</strong> (PIGA). It is chronic <strong>hemolytic anaemia</strong> that is characterized by intravascular hemolysis causing hemoglobinuria. Apart from hemolysis, other features like <strong>pancytopenia</strong> and <strong>venous thrombosis</strong> are also seen.</p>\n<p><strong>Paroxysmal cold hemoglobinuria (PCH</strong>) is a <strong>cold hemolysin type&nbsp;</strong>of hemolysis caused by<strong>&nbsp;IgG</strong> autoantibodies which are produced often in response to a viral infection. This antibody is a&nbsp;<strong>biphasic hemolysin.&nbsp;</strong>i.e., the antibody <strong>binds to RBC at colder temperatures</strong> but <strong>hemolysis occurs at a core temperature of 37&deg;C </strong>leading to intravascular hemolysis and hemoglobinuria. Most cases are seen in&nbsp;<strong>children</strong><strong>&nbsp;</strong>and usually recover within 1 month.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Given below are a few Biological therapies used in the management of Psoriasis. Match the drugs to their target site of action.",
    "choices": [
      {
        "id": 1,
        "text": "A-3, B-4, C-2, D-1"
      },
      {
        "id": 2,
        "text": "A-3, B-4, C-1, D-2"
      },
      {
        "id": 3,
        "text": "A-2, B-4, C-1, D-3"
      },
      {
        "id": 4,
        "text": "A-4, B-3 C-2, D-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct match is:</p>\n<table style=\"height: 185px;\" width=\"357\">\n<tbody>\n<tr>\n<td style=\"width: 170.667px;\"><strong>Biological therapy</strong></td>\n<td style=\"width: 170.667px;\"><strong>Target Site</strong></td>\n</tr>\n<tr>\n<td style=\"width: 170.667px;\">A. Deucravacitinib</td>\n<td style=\"width: 170.667px;\">3. TYK-2&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 170.667px;\">B. Brodalumab</td>\n<td style=\"width: 170.667px;\">4. IL-17</td>\n</tr>\n<tr>\n<td style=\"width: 170.667px;\">C. Etanercept</td>\n<td style=\"width: 170.667px;\">1. TNF\u2010&alpha;</td>\n</tr>\n<tr>\n<td style=\"width: 170.667px;\">D. Ustekinumab&nbsp;</td>\n<td style=\"width: 170.667px;\">2. IL-12/23</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Psoriasis</strong> is a group of common <strong>chronic inflammatory and proliferative conditions</strong> of the skin, associated with systemic manifestations in many organ systems. The most characteristic lesions consist of<strong> red, scaly, sharply demarcated, indurated plaques, present particularly over the extensor surfaces and scalp.</strong></p>\n<p><strong>Biological treatments</strong> are part of <strong>Systemic therapy</strong> for Psoriasis. They are newer and well-established for managing moderate to severe psoriasis.</p>\n<p><strong>Deucravacitinib </strong>is a <strong>Tyrosine kinase 2 (TYK2) inhibitor</strong> indicated for the treatment of adults with moderate-to-severe plaque psoriasis who are candidates for systemic therapy or phototherapy. It has been recently approved by FDA. The most common adverse reactions associated with Deucravacitinib are <strong>upper respiratory infections, blood creatine phosphokinase increased, herpes simplex,</strong> mouth ulcers, folliculitis, and acne.&nbsp;</p>\n<p><strong>Ustekinumab</strong> is a fully human IgG1&nbsp; monoclonal antibody <strong>against the p40 subunit </strong>that is common to both <strong>IL\u201012 and IL\u201023.</strong> It is indicated in patients with moderate to severe psoriasis. <strong>Dizziness, sore throat </strong>and joint pain are the most common side effects associated with Ustekinumab.&nbsp;</p>\n<p><strong>Brodalumab</strong> is a fully <strong>human IL\u201017RA monoclonal antibody</strong> used in the management of moderate to severe psoriasis. It leads to <strong>black tarry stools, lethargy and</strong> joint pain as the most common adverse effects.</p>\n<p><strong>Etanercept</strong> is a fully human soluble TNF\u2010&alpha; receptor fusion protein that binds and neutralizes <strong>TNF\u2010&alpha;</strong>, in psoriasis. <strong>Hypersensitivity</strong> is the most notable and severe adverse effect seen with Etanercept.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man who presented with features of anemia was treated with Mitapivat after lab investigations. Which condition is he likely to be suffering from?",
    "choices": [
      {
        "id": 1,
        "text": "G6PD deficiency"
      },
      {
        "id": 2,
        "text": "Pyruvate Kinase deficiency"
      },
      {
        "id": 3,
        "text": "5' Nucleotidase deficiency"
      },
      {
        "id": 4,
        "text": "Aspartoacylase deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario of a man with <strong>hemolytic anaemia,</strong> treated with <strong>Mitapivat</strong> suggests the diagnosis of <strong>Pyruvate kinase deficiency.</strong></p>\n<p>The mature erythrocyte\u00a0lacks mitochondria and is completely\u00a0dependent on glycolysis to produce ATP. <strong>Pyruvate kinase</strong> is an enzyme required for the process of <strong>glycolysis</strong>. In cases of <strong>pyruvate kinase deficiency</strong>, the anaemia observed is a consequence of the <strong>reduced rate<span class=\"Apple-converted-space\">\u00a0o</span><span class=\"Apple-converted-space\">f</span><span class=\"Apple-converted-space\">\u00a0</span>glycolysis</strong>, leading to\u00a0<strong>decreased ATP </strong>production. This leads to <strong>alterations</strong>\u00a0in the red blood cell\u00a0<strong>membrane </strong>causing changes in the cell's shape and later phagocytosis by the cells of the reticuloendothelial system. This premature death and lysis of the red blood cell result in hemolytic anaemia. It occurs more frequently in i<strong>nfants and newborns</strong>, but cases can also present in <strong>adulthood</strong>.</p>\n<p><strong>Mitapivat</strong> is a recently approved oral drug which is a <strong>pyruvate kinase activator</strong> indicated for the treatment of <strong>hemolytic anaemia </strong>in adults with <strong>pyruvate kinase (PK) deficiency</strong>. It allosterically binds to the pyruvate kinase tetramer and increases pyruvate kinase (PK) activity. The most common <strong>adverse reactions</strong> are <strong>back pain, arthralgia, decreased estrone and estradiol </strong>(in males) and<strong> increased urate levels.</strong></p>\n<p>The <strong>severe form</strong> of the disease requires regular packed red cell\u00a0<strong>transfusion\u00a0</strong>with<strong>\u00a0iron\u00a0chelation\u00a0</strong>and<strong>\u00a0folic\u00a0acid\u00a0supplementation.</strong></p>\n<p>Other options: Option A - <strong>Glucose 6 Phosphatase Dehydrogenase(G6PD)</strong> is an enzyme of the Hexose monophosphate pathway. G6PD deficiency also causes <strong>Hemolytic anaemia</strong> but it is not treated with Mitapivat.</p>\n<p>Option C-<strong> 5' Nucleotidase deficiency</strong> also leads to <strong>hemolytic anaemia</strong>. The hallmark of this enzyme deficiency is the presence of pronounced\u00a0basophilic stippling\u00a0and\u00a0accumulation of pyrimidine nucleotides\u00a0(RNA\u00a0remnants) within erythrocytes. Mitapivat is not used for treatment.</p>\n<p>Option D - The deficiency of<strong> Aspartoacylase</strong> leads to\u00a0<strong>Canavan disease</strong>. It is an autosomal-recessive disorder, which leads to excessive excretion of N-acetyl aspartic acid in the urine. It is characterized by leukodystrophy and does not cause hemolysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Omidenepag has been recently approved for the treatment of Glaucoma. Which of the given drugs has a mechanism of action most similar to that of Omidenepag?",
    "choices": [
      {
        "id": 1,
        "text": "Brimonidine"
      },
      {
        "id": 2,
        "text": "Betaxolol"
      },
      {
        "id": 3,
        "text": "Dorzolamide"
      },
      {
        "id": 4,
        "text": "Latanoprost"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Omidenepag </strong>is a <strong>Prostaglandin-E receptor agonist</strong>. Amongst the given options, its mechanism of action is most similar to <strong>Latanoprost</strong>, a <strong>Prostaglandin-F receptor agonist</strong>.</p>\n<p><strong>Omidenepag</strong> is a relatively selective PG-E2(Prostaglandin E2) receptor agonist which decreases intraocular pressure (IOP) by <strong>increasing uveoscleral outflow </strong>from the anterior chamber of the eye. In this way, it acts similarly to <strong>Latanoprost</strong>, a selective PGF2-alpha receptor agonist that reduces IOP by<strong> increasing uveoscleral outflow</strong>. Both of these drugs are classified as <strong>Prostaglandin Receptor agonists</strong>(Prostaglandin analogues).</p>\n<p>Similar to latanoprost the <strong>adverse effects</strong> include <strong>iris pigmentation, eyelash changes, ocular Inflammation</strong> and <strong>macular edema</strong>. It may also lead to <strong>conjunctival hyperemia, photophobia and blurred vision.</strong></p>\n<p>Other options: <strong>Brimonidine </strong>is a <strong>selective alpha agonist </strong>used in glaucoma. It acts mainly by <strong>decreasing the aqueous production</strong> and thus lowering the IOP.</p>\n<p><strong>Betaxolol</strong> is a <strong>selective</strong> <strong>beta 1 blocker </strong>that is used in glaucoma and reduces IOP by <strong>decreasing the aqueous production.</strong></p>\n<p><strong>Dorzolamide</strong> is a Carbonic anhydrase inhibitor used in glaucoma, acting by <strong>reducing aqueous production.</strong></p>\n<p>&nbsp;</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Perfluorohexyloctane is used for:",
    "choices": [
      {
        "id": 1,
        "text": "As a MRI contrast agent"
      },
      {
        "id": 2,
        "text": "As a disinfectant in labs"
      },
      {
        "id": 3,
        "text": "As a chemotherapy agent"
      },
      {
        "id": 4,
        "text": "As a treatment for dry eye"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Perfluorohexyloctane</strong> is used for the treatment of <strong>dry eye.&nbsp;</strong></p>\n<p><strong>Dry eye disease</strong> occurs due to inadequate tear volume and function, resulting In <strong>unstable tear film</strong> and ocular surface disease. Many conditions can lead to dry eye including <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Sjo\u0308gren syndrome, </span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Vitamin A deficiency, </span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Follicular conjunctivitis, Wearing contact lenses and Trachoma. <strong>Tear film tests</strong> (<strong>Schrimer's test, Tear film break up test </strong>and<strong> Rose Bengal staining)</strong> are <strong>used to diagnose</strong> Dry eye disease.</span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>Treatment&nbsp;</strong>for dry eye includes <strong>medical&nbsp;</strong>treatment (lubricating eyedrops, most commonly&nbsp;<strong>methylcellulose</strong>&nbsp;derivatives) or&nbsp;<strong>surgical</strong>&nbsp;treatment (lacrimal punctum occlusion using&nbsp;<strong>silicone</strong> plugs). </span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Recently the FDA approved <strong>Perfluorohexyloctane </strong>as an ophthalmic solution for treating dry eye. It is used as <strong>eyedrops</strong> to be instilled <strong>four times a day</strong>. It forms<strong>&nbsp;a monolayer</strong> at the <strong>tear film's air-liquid interface,</strong> which is expected <strong>to reduce evaporation</strong>. The most common <strong>adverse effect</strong> associated with the use of Perflurohexyloctane is <strong>blurred vision.</strong>&nbsp; Rarely it can lead to <strong>conjunctival redness</strong>.</span></p>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is approved for prophylaxis against respiratory syncytial virus (RSV) infection?",
    "choices": [
      {
        "id": 1,
        "text": "Ribavirin"
      },
      {
        "id": 2,
        "text": "Omalizumab"
      },
      {
        "id": 3,
        "text": "Nirsevimab"
      },
      {
        "id": 4,
        "text": "Oseltamivir"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Nirsevimab</strong> is a monoclonal antibody recently approved by the FDA to be used as a <strong>prophylaxis</strong>\u00a0against respiratory syncytial virus (RSV) infection.</p>\n<p><strong>RSV</strong>\u00a0is responsible for more than half of the cases of\u00a0<strong>bronchiolitis</strong>\u00a0in\u00a0<strong>infants</strong>\u00a0<strong>less than 1 year</strong> of age. It generally presents as a fever with cough and wheezing. It has a very high infectivity and transmission is by close contact and droplet transmission. Nasopharyngeal swabs and nasal washings are collected as samples. They are inoculated in cell culture (HeLa or Hep-2) immediately after collection. In cultured cells, RSV shows characteristic <strong>giant cells</strong>\u00a0and<strong> syncytial formation.</strong></p>\n<p>The image given below shows <strong>giant cells</strong> and\u00a0<strong>syncytial formation</strong>\u00a0seen in <strong>RSV infection:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/06fa65cfa6304e6e8d0d2f9867d1bbadx1280x960.JPEG"
    ]
  }
];
        let quizName = 'Recent Drugs Mini Test - -Tmt';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2023-24"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>