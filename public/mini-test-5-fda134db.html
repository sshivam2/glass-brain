<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test 5 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2021-22
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Arterial blood gas analysis of a patient reveals the following values: pH of 7.1 and HCO3- of 6 mEq/L. Assuming this is a case of metabolic acidosis with compensatory respiratory alkalosis, what is the expected pCO2?",
    "choices": [
      {
        "id": 1,
        "text": "17 mm Hg"
      },
      {
        "id": 2,
        "text": "27 mm Hg"
      },
      {
        "id": 3,
        "text": "7 mm Hg"
      },
      {
        "id": 4,
        "text": "37 mm Hg"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The expected pCO2 value will be 17 mm Hg.</p>\n<p>The underlying acid-base disorder in this patient is metabolic acidosis with compensatory respiratory alkalosis:\u00a0A pH of<strong> 7.1</strong>\u00a0signifies <strong>acidosis, </strong>plasma HCO<sub>3</sub><sup>-</sup>\u00a0is <strong>6 mEq/L -</strong>\u00a0signifies <strong>metabolic acidosis</strong>.\u00a0</p>\n<p>The expected compensatory decrease in pCO<sub>2</sub> can be calculated using <strong>Winter's\u00a0formula:\u00a0Expected PCO<sub>2</sub>= {[1.5 x HCO<sub>3</sub><sup>-</sup>] +8}\u00a0\u00b1 2.</strong><br /><br />Expected PCO<sub>2</sub> = {[1.5 x 6] +8}\u00a0\u00b1 2 = <strong>15 to 19.\u00a0</strong></p>\n<p>Alternatively,</p>\n<p>The other method to calculate the expected compensation is a\u00a0<strong>1.25 mm Hg decrease in p<span class=\"smallcaps\" data-mmanualobjecttype=\"smallcaps\">CO</span><sub>2</sub>\u00a0for every 1 mmol/L decrease in bicarbonate</strong>.</p>\n<p>The decrease in bicarbonate is 24 - 6 = 18 mEq/L</p>\n<p>Decrease in pCO<sub>2</sub> is 18 x 1.25 = 22.5</p>\n<p>Expected pCO<sub>2</sub> = 40 - 22.5 = 17.5 mmHg (roughly ~ 17 mmHg since the standard values are approximations)</p>\n<p>This method is also used to assess compensation. However, Winter's formula is more accurate.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old male patient presents with a sudden onset stabbing pain followed by diffuse abdominal pain and distension. He has a history of burning epigastric pain that is relieved by eating, and nocturnal pain for the past 5 months. His abdominal X-ray is as shown below. Which among the following is not associated with the pathology depicted in the X-ray?",
    "choices": [
      {
        "id": 1,
        "text": "Rigler\u2019s sign"
      },
      {
        "id": 2,
        "text": "Telltale sign"
      },
      {
        "id": 3,
        "text": "Spinnaker\u2019s sign"
      },
      {
        "id": 4,
        "text": "Falciform sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario with abdominal pain and distension and erect x-ray showing air under the diaphragm is suggestive of <strong>pneumoperitoneum</strong> due to duodenal perforation. <strong>Spinnaker sail sign</strong> is not seen in <strong>pneumoperitoneum</strong>.</p>\n<p>The<strong> spinnaker sign</strong> (also known as the <strong>angel wing sign</strong>) is a sign of <strong>pneumomediastinum</strong> seen on neonatal chest radiographs. It refers to the<strong> thymus being outlined by air</strong> with each<strong> lobe displaced laterally</strong> and appearing like spinnaker sails.</p>\n<p>The other signs mentioned above are seen in the pneumoperitoneum caused due to hollow viscus perforation.</p>\n<p>Duodenal perforation characterized by a sudden, sharp, stabbing pain is a known complication of peptic ulcer disease suggested by this patient&rsquo;s history. The erect X-ray in pneumoperitoneum shows <strong>gas under the diaphragm. </strong>Other signs can be further divided into anatomical compartments in relation to the pneumoperitoneum:</p>\n<p>Bowel related signs-</p>\n<ul>\n<li>Double-wall sign (also known as <strong>Rigler's sign</strong> or bas-relief sign) -&nbsp;50% of the cases have gas in the right upper quadrant adjacent to the liver, lying mainly in the subhepatic space and the hepatorenal fossa (Morrison&rsquo;s pouch). When both the outer and inner walls of a bowel loop are visualized, it is known as Rigler&rsquo;s sign.</li>\n<li><strong>Telltale triangle sign </strong>(also known as triangle sign) - The formation of a radiolucent triangle of gas around three bowel loops or two bowel loops and the abdominal wall.&nbsp;</li>\n</ul>\n<p>Peritoneal ligament related signs-</p>\n<ul>\n<li><strong>Football sign</strong></li>\n<li><strong>Falciform ligament sign</strong></li>\n<li>Lateral umbilical ligament sign (also known as <strong>inverted \"V\" sign</strong>) - It is visualized in the pelvis as a result of the&nbsp;free gas outlining the lateral umbilical ligaments.</li>\n</ul>\n<p>Right upper quadrant sign-</p>\n<ul>\n<li>Morison's pouch sign (doge cap sign) - Air in the Morison pouch, bound by the 11th rib in the right upper quadrant, presents as either a triangular-shaped, crescentic or semicircular lucency.</li>\n<li><strong>Cupola</strong> sign</li>\n</ul>\n<p>The radiograph below shows a supine abdominal X-ray of a neonate with a large pneumoperitoneum. An oval lucency divided by the falciform ligament resulting in the so-called <strong>football sign&nbsp;</strong>is seen on supine film.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/324d0d6757344261ab034ff3c082a956.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff7c754c405f4e7087bc8cba7a6486a8x468x468.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8baf18dc8f294185a57418044cd76b3bx765x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2e9a427eba414c19b73a700c10b59aaex313x420.JPEG"
    ]
  },
  {
    "text": "A 28-year-old female patient presents with an itchy rash along the extensor surface of her elbows, knees, and scalp. Examination reveals pink plaques with overlying silvery scales. She also has new lesions as shown in the image. The phenomenon that causes new lesions over scratched areas is known as?",
    "choices": [
      {
        "id": 1,
        "text": "Isomorphic phenomenon"
      },
      {
        "id": 2,
        "text": "Pseudo-Koebner's phenomenon"
      },
      {
        "id": 3,
        "text": "Reverse-Koebner's phenomenon"
      },
      {
        "id": 4,
        "text": "Iso-topic phenomenon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette and image describe&nbsp;<strong>plaque psoriasis</strong> on the dorsum of the hand and <strong>isomorphic</strong> or <strong>Koebner</strong> phenomenon that causes <strong>new lesions over scratched areas.</strong></p>\n<p><strong>Koebner </strong>or<strong> isomorphic phenomenon</strong>&nbsp;is the development of new lesions&nbsp;<strong>along the line of trauma</strong>&nbsp;in previously normal skin. The new lesions have 'iso' (same) and 'morphic' (morphology) as the existing lesions. The trauma may include mechanical trauma, thermal trauma, allergic or irritant reactants, or any treatment procedures.&nbsp;<span data-preserver-spaces=\"true\">It is commonly associated with&nbsp;</span><strong><span data-preserver-spaces=\"true\">psoriasis, lichen planus,&nbsp;lichen sclerosus, pityriasis rubra pilaris, and vitiligo.</span></strong></p>\n<p>Other option:</p>\n<p>Option B - Development of lesions&nbsp;<span data-preserver-spaces=\"true\">seen as a result of the spread of an</span><strong><span data-preserver-spaces=\"true\">&nbsp;infective agent</span></strong><span data-preserver-spaces=\"true\">&nbsp;(like <strong>Molluscum contagiosum, viral warts</strong>), is called&nbsp;</span><strong><span data-preserver-spaces=\"true\">pseudo-Koebner&rsquo;s phenomenon.</span></strong></p>\n<p><span data-preserver-spaces=\"true\">Option C -&nbsp;If a lesion disappears at the&nbsp;site of injury/trauma, then it is termed as the \"<strong>reverse Koebner phenomenon</strong>\". It has been documented in cases of psoriasis and vitiligo.</span></p>\n<p>Option D - The <strong>isotopic phenomenon</strong> is the occurrence of a new skin disorder at the site of another healed skin condition. For example, the appearance of psoriasis at contact dermatitis or the appearance of granuloma annulare at the site of herpes zoster.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/835b622959234debb5bc04e07fa96255.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-month-old child was diagnosed with severe acute malnutrition and was started on treatment. When can the child's treatment be considered complete?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3 and 5"
      },
      {
        "id": 2,
        "text": "2, 3 and 4"
      },
      {
        "id": 3,
        "text": "2, 3 and 5"
      },
      {
        "id": 4,
        "text": "1, 3 and 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The correct answer is <strong>1, 3 and 4.</strong></p>\n<p>A child with SAM may be considered to have <strong>completed treatment</strong> when:</p>\n<ul>\n<li>There is no edema for <strong>at least 2 weeks</strong> +</li>\n<li>Weight-for-height (or length) reaches <strong>-2 SD</strong> or higher<span style=\"font-size: 12pt;\"><strong> or</strong></span> mid-upper-arm circumference is <strong>more than 12.5 cm.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c8e1d7e0138c4f5b8b96873822e0396fx1280x2560.JPEG"
    ]
  },
  {
    "text": "A 50-year-old female complains of lower backache. Her bone mineral density is measured and her T-score is found to be -1.8. What does her T-score signify?",
    "choices": [
      {
        "id": 1,
        "text": "Osteopenia"
      },
      {
        "id": 2,
        "text": "Osteoporosis"
      },
      {
        "id": 3,
        "text": "Osteomalacia"
      },
      {
        "id": 4,
        "text": "Normal bone density"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>A T-score of -1.8 signifies<strong> osteopenia. </strong>(T-score in osteopenia: -1 to -2.5).</p>\n<p>Osteopenia refers to<strong> low bone mass </strong>with a T score of <strong>-1 to -2.5.</strong></p>\n<p><strong>T-score</strong> is the comparison of the <strong>bone mineral density</strong> of a patient to that of a <strong>30-year-old healthy individual</strong>.</p>\n<p><strong>Osteoporosis</strong> is caused due to the reduction in the strength of the bone that leads to an increased risk of fractures. WHO defines osteoporosis as a T-score&nbsp;<strong>less than -2.5</strong>.&nbsp;</p>\n<p>A T-score of<strong> -1 or higher</strong> is considered <strong>normal.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a reverse transcriptase-polymerase chain reaction test (RT-PCR), the target RNA strand that will undergo the process is 5' - AUGCUGCAGUCAAAAAA - 3'. Outputs obtained from the process are shown below. Choose the correct statement.",
    "choices": [
      {
        "id": 1,
        "text": "2 and 4 are correct"
      },
      {
        "id": 2,
        "text": "Only 2 is correct"
      },
      {
        "id": 3,
        "text": "Only 1 is correct"
      },
      {
        "id": 4,
        "text": "1 and 3 are correct"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>For the given RNA strand,&nbsp;5' - AUGCUGCAGUCAAAAAA - 3', the obtained complementary DNA strand will be as shown in <strong>image</strong> <strong>\"C\"</strong> following the rules of <strong>complementary base pairing</strong> (adenine binds with thymine/uracil and cytosine binds with guanine). The <strong>DNA strand</strong> obtained by replication of the cDNA strand will contain only thymine and not uracil and is therefore represented by<strong> \"A\"</strong> in the image above.</p>\n<p><strong>RT-PCR</strong> is a method that is used for the analysis of mRNA expression and its amplification.</p>\n<p>Reverse transcriptase-polymerase chain reaction (RT-PCR) is a variant of PCR and includes 2 steps:</p>\n<ul>\n<li>Generation of <strong>complementary DNA</strong> (cDNA copies) from mRNA using reverse transcriptase - used to qualitatively detect gene expression</li>\n<li><strong>Amplification</strong> of newly synthesized cDNA by traditional PCR - This can be quantitatively measured by using fluorescent dyes (qRT-PCR).</li>\n</ul>\n<p><strong>Uses</strong>:&nbsp;</p>\n<ul>\n<li>Determination of viral load</li>\n<li>Screening of genetic diseases and cancers</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/07999dff09b448a9a6550ca1b7c203e8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/33a13042b6fd4728823907ff940fdcddx335x424.JPEG"
    ]
  },
  {
    "text": "Which of the following suture techniques is employed for the best cosmetic appearance after wound healing?",
    "choices": [
      {
        "id": 1,
        "text": "Continuous sutures"
      },
      {
        "id": 2,
        "text": "Mattress sutures"
      },
      {
        "id": 3,
        "text": "Interrupted sutures"
      },
      {
        "id": 4,
        "text": "Subcuticular sutures"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The suture technique employed for the best cosmetic appearance after wound healing is the&nbsp;<strong>subcuticular suturing technique.</strong></p>\n<p><strong>Subcuticular sutures:</strong>&nbsp;</p>\n<p>It is used for a <strong>better cosmetic appearance</strong>. It is also employed in situations where the edges of the wound are <strong>easily approximated</strong>. In this technique, small bites of the subcuticular tissues are taken on alternate sites of the wound and then they are gently pulled together. This wound cause approximation of the wound edges without the risk of the cross-hatched markings of interrupted sutures.</p>\n<p>Both <strong>absorbable</strong> and non-absorbable suture materials can be used in this technique. A <strong>buried knot is secured at the ends</strong> of absorbable sutures when they are used. When non-absorbable sutures are used, a collar and bead are used to secure the ends of the suture.</p>\n<p>The following image is a pictorial representation of the subcuticular suture technique-</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2f467d264cc34c10b04ddf20a3018238x1200x1196.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b94a68f08d746ba84a6a6797d990e7dx1280x1143.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c64dc6b67f0448feb8760ebdd82f185ex1280x1238.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/317460039b4e4de3a162f6ae85845d20x720x631.JPEG"
    ]
  },
  {
    "text": "Which of the following sensory receptors help to signal the degree of joint rotation?",
    "choices": [
      {
        "id": 1,
        "text": "Merkel disc"
      },
      {
        "id": 2,
        "text": "Meissner\u2019s corpuscle"
      },
      {
        "id": 3,
        "text": "Krause corpuscle"
      },
      {
        "id": 4,
        "text": "Ruffini's end organ"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><span data-preserver-spaces=\"true\">The sensory receptor found in joint capsules and helps signal the\u00a0</span>degree of joint rotation<span data-preserver-spaces=\"true\">\u00a0are\u00a0</span><strong><span data-preserver-spaces=\"true\">Ruffini's endings/Ruffini's end organ</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\">Ruffini's end organs are a type of slow-adapting receptor. They are located in the deep layers of skin and other internal tissues. They play a crucial role in signaling states where tissue deformation is continuous. These include </span><strong><span data-preserver-spaces=\"true\">deep touch</span></strong><span data-preserver-spaces=\"true\">\u00a0which is prolonged and\u00a0</span><strong><span data-preserver-spaces=\"true\">pressure</span></strong><span data-preserver-spaces=\"true\"> signals.\u00a0</span><span data-preserver-spaces=\"true\">They are present in joint capsules as well and help in signaling the<strong> degree of joint rotation.</strong></span></p>\n<p><span data-preserver-spaces=\"true\">Other options:</span></p>\n<p>Option A: <strong><span data-preserver-spaces=\"true\">Merkel discs </span></strong><span data-preserver-spaces=\"true\">are a type of </span><strong><span data-preserver-spaces=\"true\">expanded tip tactile receptors</span></strong><span data-preserver-spaces=\"true\">\u00a0that cause the epithelium of the skin to bulge out creating a dome and are highly sensitive. They are hence grouped with\u00a0</span><strong><span data-preserver-spaces=\"true\">touch domes</span></strong><span data-preserver-spaces=\"true\">. They play an important role in </span><strong><span data-preserver-spaces=\"true\">point discrimination, point localization,\u00a0</span></strong><span data-preserver-spaces=\"true\">and</span><strong><span data-preserver-spaces=\"true\">\u00a0determination of texture</span></strong><span data-preserver-spaces=\"true\">\u00a0along with Meissner's corpuscles.</span></p>\n<p>Option B: <strong><span data-preserver-spaces=\"true\">Meissner\u2019s Corpuscles:\u00a0</span></strong><span data-preserver-spaces=\"true\">They are\u00a0</span>encapsulated receptors<strong><span data-preserver-spaces=\"true\">\u00a0</span></strong><span data-preserver-spaces=\"true\">found in the dermis of the non-hairy skin, most commonly on the fingertips, lips, and other locations where\u00a0</span><strong><span data-preserver-spaces=\"true\">tactile discrimination</span></strong> is very good<span data-preserver-spaces=\"true\">. Their field of reception is very small and hence used for two-point discrimination. These are rapidly adapting receptors that encode </span><strong>Point discrimination</strong>, <strong>Precise location</strong>, Tapping, and Flutter.</p>\n<p>Option C: <strong>Krause corpuscles</strong> are specialized sensory structures found within the genitalia and other mucocutaneous tissues and have been known to aid in <strong>thermal sensation</strong>. Recently, they have been shown to play a role in<strong> sexual behaviors</strong> in mice.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 58-year-old male patient comes to the medical outpatient department with increased frequency and burning micturition. He has a mechanical heart valve and is undergoing warfarin therapy for his transient ischaemic attacks. Urine is sent for culture and sensitivity and he is started on antibiotics. The next day he comes with complaints of excessive bleeding after a trivial injury. Which of the following antibiotics was most probably prescribed?",
    "choices": [
      {
        "id": 1,
        "text": "Tetracycline"
      },
      {
        "id": 2,
        "text": "Cotrimoxazole"
      },
      {
        "id": 3,
        "text": "Clindamycin"
      },
      {
        "id": 4,
        "text": "Cephalexin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The clinical vignette showing a man with a mechanical valve who is undergoing\u00a0</span><strong><span data-preserver-spaces=\"true\">warfarin therapy</span></strong><span data-preserver-spaces=\"true\">\u00a0presenting with\u00a0</span><strong><span data-preserver-spaces=\"true\">excessive bleeding</span></strong><span data-preserver-spaces=\"true\">\u00a0is most likely due to the administration of the antibiotic\u00a0</span><strong><span data-preserver-spaces=\"true\">cotrimoxazole.</span></strong></p>\n<p><strong><span data-preserver-spaces=\"true\">Warfarin</span></strong><span data-preserver-spaces=\"true\">\u00a0is mainly\u00a0</span><strong><span data-preserver-spaces=\"true\">metabolized\u00a0</span></strong><span data-preserver-spaces=\"true\">by the</span><strong><span data-preserver-spaces=\"true\">\u00a0CYP2C9</span></strong><span data-preserver-spaces=\"true\">\u00a0enzyme. Drugs that inhibit the CYP2C9 enzyme, like cotrimoxazole, reduce the metabolism of warfarin and thus, enhance the anticoagulant effect of warfarin and increase the risk of bleeding.</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Warfarin interactions</span></strong><span data-preserver-spaces=\"true\">:</span></p>\n<p><span data-preserver-spaces=\"true\">Interactions with warfarin can be caused due to alteration in the absorption and metabolism of the drug, the circulating levels of clotting factors, and the state of epithelial surface.</span></p>\n<p><span data-preserver-spaces=\"true\">Reduced efficacy:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Decreased absorption - COnjugation with cholestyramine</span></li>\n<li><span data-preserver-spaces=\"true\">Increased clearance - CYP2C9 activation by drugs (barbiturates, carbamazepine, rifampin)</span></li>\n<li><span data-preserver-spaces=\"true\">Reduced circulating volume - Nephrotic syndrome</span></li>\n<li><span data-preserver-spaces=\"true\">Resistance - High Vitamin K consumption, High circulating clotting factor levels in pregnancy</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Increased efficacy:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Drugs causing CYP2C9 inhibition:</span></li>\n<ul>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Amiodarone</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Azole antifungals</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Cimetidine</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Clopidogrel</span></li>\n<li class=\"ql-indent-1\"><strong><span data-preserver-spaces=\"true\">Cotrimoxazole</span></strong></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Disulfiram</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Isoniazid</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Metronidazole</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Fluoxetine</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Sulfinpyrazone</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Zafirlukast</span></li>\n</ul>\n</ul>\n<p><span data-preserver-spaces=\"true\">Other options:</span></p>\n<p><span data-preserver-spaces=\"true\">Options A and D - <strong>Tetracycline</strong> and <strong>Cephalexin</strong> (belonging to cephalosporins) are almost completely metabolized and excreted by the kidneys and hence do not interact with Warfarin.</span></p>\n<p><span data-preserver-spaces=\"true\">Option C - <strong>Clindamycin</strong> is metabolized to N-demethylclindamycin and clindamycin sulfoxide, which are then excreted in the urine and bile. It does not cause CYP2C9 inhibition.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following visual field defects with the site of the lesion",
    "choices": [
      {
        "id": 1,
        "text": "1-B, 2-C, 3-A, 4-D"
      },
      {
        "id": 2,
        "text": "1-B, 2-A, 3-C, 4-D"
      },
      {
        "id": 3,
        "text": "1-D, 2-C, 3-A, 4-B"
      },
      {
        "id": 4,
        "text": "1-D, 2-A, 3-C, 4-B"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The correctly matched lesions and their visual field defects are as follows:</p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Image 1 - B. Central chiasma<br />Image 2 - C. Optic radiations in the temporal lobe<br />Image 3 - A. Optic radiations in the parietal lobe<br />Image 4 - D. Lateral chiasma</span></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/65ee77228a4e470a9a8df69e881062ad.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a6d5974c669f4da0b6bbd38869931454x1280x1487.JPEG"
    ]
  },
  {
    "text": "Arrange the following patterns of obsessions seen in obsessive-compulsive disorder (OCD) in order from the most common to the least common:",
    "choices": [
      {
        "id": 1,
        "text": "2, 1, 4, 3"
      },
      {
        "id": 2,
        "text": "1, 4, 3, 2"
      },
      {
        "id": 3,
        "text": "4, 1, 3, 2"
      },
      {
        "id": 4,
        "text": "3, 4, 2, 1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">In\u00a0<strong>obsessive-compulsive disorder (OCD)</strong></span><span data-preserver-spaces=\"true\">, the most common symptom patterns of obsessions seen in OCD are in the order\u00a0</span><strong><span data-preserver-spaces=\"true\">Contamination &gt; Pathological doubt &gt; Intrusive thoughts &gt; Symmetry</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\"><strong>Obsessive-compulsive disorder</strong> (OCD) comprises symptoms that include intrusive thoughts, ritu\u00adals, preoccupations, and compulsions, which cause severe distress to the patient.</span></p>\n<p><span data-preserver-spaces=\"true\">The recurrent and intrusive thoughts, feelings, ideas, and sensations are referred to as\u00a0</span><strong><span data-preserver-spaces=\"true\">obsessions</span></strong><span data-preserver-spaces=\"true\">. C</span><span data-preserver-spaces=\"true\">onscious, standardized, recurrent behaviours are called\u00a0<strong>compulsions,</strong>\u00a0like counting, checking, and are done to reduce the anxiety associated with the obsession.\u00a0The patient might have an obsession, a compulsion, or both.</span></p>\n<p><span data-preserver-spaces=\"true\">Symptom patterns:</span></p>\n<ul>\n<li><strong><span data-preserver-spaces=\"true\">Contamination</span></strong><span data-preserver-spaces=\"true\">\u00a0- This is the most common symptom pattern of OCD where <strong>objects</strong> are perceived to be <strong>contaminated</strong> followed by either washing or a severe compulsion to avoid touching objects which are thought to be contaminated. In extreme cases, patients may rub the skin off their hands due to excessive hand washing or refuse to leave the house for fear of germs.</span></li>\n<li><strong><span data-preserver-spaces=\"true\">Pathological doubt\u2014</span></strong>This is the second most common symptom pattern. The patient presents with an <strong>obsession with doubt </strong>and a compulsion to check. This obsession arises due to possible danger or violence (e.g., forgetting to turn off the stove or not locking a door) and is followed by multiple trips to check, for example, whether<span data-preserver-spaces=\"true\">\u00a0the stove is turned off.</span></li>\n<li><strong><span data-preserver-spaces=\"true\">Intrusive thoughts</span></strong><span data-preserver-spaces=\"true\">\u00a0- These patients have <strong>intrusive obsessional thoughts</strong> without compulsion and this is the<strong> </strong>third most common symptom pattern. These thoughts could be sexual or an aggressive act that the patient disagrees with, which might lead to the patient reporting themselves to the police/confessing to a spiritual leader.</span></li>\n<li><strong><span data-preserver-spaces=\"true\">Symmetry\u2014</span></strong>This is the fourth most common pattern, and it can lead to a compulsion to be <strong>slow</strong>. Patients can take hours to eat a meal or shave their faces.</li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Diagnosis of OCD is by the presence of:</span></p>\n<ol>\n<li>Obsessions, compulsions or both</li>\n<li>Time-consuming symptoms</li>\n<li>Symptoms not related to substance abuse</li>\n<li>Symptoms not better explained by other mental disorders</li>\n</ol>\n<p><span data-preserver-spaces=\"true\">Treatment of OCD includes:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Pharmacotherapy: <strong>SSRI</strong> or<strong> clomipramine</strong></span></li>\n<li><span data-preserver-spaces=\"true\"><strong>Behavioural therapy:</strong>\u00a0</span></li>\n<ul>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Exposure and response prevention</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Desensitization</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Thought stopping</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Flooding</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Implosion therapy</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Aversive conditioning</span></li>\n</ul>\n</ul>\n<p><span data-preserver-spaces=\"true\">A <strong>combination</strong> of behavioral and pharmacotherapy is found to be the most effective.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with a sudden high-grade fever associated with chills and a productive cough for the past 3 days. A chest x-ray is taken which is shown below. The sputum is sent for culture and sensitivity.  Arrange the following histopathological changes in the sequence of appearance during the course of this condition.",
    "choices": [
      {
        "id": 1,
        "text": "3, 1, 4, 2"
      },
      {
        "id": 2,
        "text": "1, 2, 4, 3"
      },
      {
        "id": 3,
        "text": "2, 4, 1, 3"
      },
      {
        "id": 4,
        "text": "3, 1, 2, 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical vignette of this patient showing high-grade fever, productive cough, and consolidation of the middle lobe of the right lung on chest x-ray is highly suggestive of <strong>lobar pneumonia.&nbsp;</strong>The correct sequence of histopathological changes observed during the course of this condition is <strong>3, 1, 2, 4.</strong></p>\n<p>Bacterial pneumonia is classified morphologically into lobular pneumonia and lobar pneumonia. Patchy consolidation of the lung is called&nbsp;lobular pneumonia (<strong>bronchopneumonia</strong>), while consolidation of an entire lobe defines <strong>lobar pneumonia.</strong></p>\n<p><strong>Stages of lobar pneumonia:&nbsp;</strong></p>\n<table style=\"height: 384px; width: 699px;\">\n<tbody>\n<tr>\n<td style=\"width: 225px; text-align: center;\"><strong>Stages</strong></td>\n<td style=\"width: 157.75px; text-align: center;\"><strong>Duration</strong></td>\n<td style=\"width: 292.25px; text-align: center;\"><strong>Morphology</strong></td>\n</tr>\n<tr>\n<td style=\"width: 225px;\"><strong>Stage I - Congestion</strong></td>\n<td style=\"width: 157.75px;\">1-2 days</td>\n<td style=\"width: 292.25px;\">\n<p><strong>Gross</strong>: Heavy, boggy, and red</p>\n<p><strong>Histopathology</strong>:&nbsp;intra-alveolar edema fluid containing few neutrophils, and numerous bacteria.</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 225px;\"><strong>Stage II - Red hepatization</strong></td>\n<td style=\"width: 157.75px;\">2-4 days</td>\n<td style=\"width: 292.25px;\">\n<p><strong>Gross</strong>: Red, firm, and airless</p>\n<p><strong>Histopathology</strong>: Massive intra-alveolar exudate containing neutrophils, RBCs and fibrin</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 225px;\"><strong>Stage III - Gray hepatization</strong></td>\n<td style=\"width: 157.75px;\">4-8 days</td>\n<td style=\"width: 292.25px;\">\n<p><strong>Gross</strong>: Grayish-brown</p>\n<p><strong>Histopathology</strong>: Disintegration of RBCs and persistence of fibrinosuppurative exudate</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 225px;\"><strong>Stage IV - Resolution</strong></td>\n<td style=\"width: 157.75px;\">9-10 days</td>\n<td style=\"width: 292.25px;\"><strong>Histopathology:</strong> Enzymatic digestion of exudate producing granular, semifluid debris which is broken down by macrophages or organized by fibroblasts growing into it.</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Complications</strong>:</p>\n<ul>\n<li><strong>Lung abscess</strong> (common in&nbsp;pneumococcal or Klebsiella infections)</li>\n<li>Spread to pleural cavity causing <strong>empyema&nbsp;</strong>or pleural fibrinous reaction to the underlying inflammation causing <strong>pleuritis</strong>.</li>\n<li>Bacteremic dissemination to other sites of the body causes abscesses, endocarditis, meningitis, or suppurative arthritis.</li>\n</ul>\n<p><strong>Treatment</strong>:</p>\n<p>Solely depends on the identification of the causative organism and administration of appropriate antibiotic therapy.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4164531be6444cfbbb69610588b8b6ed.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man drowns while on an arctic cruise by accidentally falling overboard with a horizontal entry into the sea. Which of the following is the most likely cause of death for this individual?",
    "choices": [
      {
        "id": 1,
        "text": "Cerebral edema"
      },
      {
        "id": 2,
        "text": "Pulmonary edema and heart failure"
      },
      {
        "id": 3,
        "text": "Vasovagal inhibition"
      },
      {
        "id": 4,
        "text": "Laryngeal spasm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span data-preserver-spaces=\"true\">The given clinical scenario is suggestive of\u00a0</span><strong><span data-preserver-spaces=\"true\">immersion syndrome/ hydrocution/ submersion inhibition.</span></strong><span data-preserver-spaces=\"true\">\u00a0Death results from cardiac arrest due to\u00a0</span><strong><span data-preserver-spaces=\"true\">vasovagal inhibition\u00a0</span></strong><span data-preserver-spaces=\"true\">followed by cardiac arrest.</span></p>\n<p><span data-preserver-spaces=\"true\">Vagal stimulation occurs due to:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Stimulation of nerve endings of the surface of the body by cold water</span></li>\n<li><span data-preserver-spaces=\"true\">Falling or diving into the water in a manner so that it suddenly strikes the abdomen, especially the epigastric region.</span></li>\n<li><span data-preserver-spaces=\"true\">Stimulation of the nerve endings of the mucosa by the entry of cold water into the eardrums, nasal passages, the pharynx, and the larynx.</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">The mechanism involved in immersion syndrome:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Diving/falling into the water, feet-first</span></li>\n<li><span data-preserver-spaces=\"true\">Inexperienced \"duck-diving\"</span></li>\n<li><strong><span data-preserver-spaces=\"true\">Diving/falling </span></strong>into the water <strong><span data-preserver-spaces=\"true\">with </span></strong>a<strong><span data-preserver-spaces=\"true\"> horizontal entry</span></strong></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">People under the influence of alcohol are more likely affected due to the general vasodilation of skin vessels, consequently amplifying the effects of vasovagal inhibition. These effects are increased in people who are attempting suicide/anxious as they have a more active reflex arc.</span></p>\n<p><span data-preserver-spaces=\"true\">Option A:\u00a0</span><strong><span data-preserver-spaces=\"true\">Cerebral edema\u00a0</span></strong><span data-preserver-spaces=\"true\">is seen in cases of</span><strong><span data-preserver-spaces=\"true\">\u00a0near-drowning.\u00a0</span></strong><span data-preserver-spaces=\"true\">It is a type of atypical drowning and is also known as post-immersion syndrome or secondary drowning. This type is necessitated by the survival of the drowning victim\u00a0</span><strong><span data-preserver-spaces=\"true\">beyond 24 hours</span></strong><span data-preserver-spaces=\"true\">\u00a0of a submersion episode. Death is due to respiratory decompensation suffered despite responding well to initial resuscitation measures. Mechanisms of death involve hypoxemia which results in</span><strong><span data-preserver-spaces=\"true\">\u00a0</span></strong><span data-preserver-spaces=\"true\">sepsis, electrolyte imbalances, pulmonary edema, and\u00a0</span><strong><span data-preserver-spaces=\"true\">cerebral edema</span></strong><span data-preserver-spaces=\"true\">.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">Option B:\u00a0</span><strong><span data-preserver-spaces=\"true\">Pulmonary edema and cardiac arrest</span></strong><span data-preserver-spaces=\"true\">\u00a0are the cause of death in</span><strong><span data-preserver-spaces=\"true\">\u00a0typical drowning/primary drowning\u00a0</span></strong><span data-preserver-spaces=\"true\">due to inhalation of water into the lungs. There are varying mechanisms for freshwater and saltwater drowning leading to either ventricular fibrillation or cardiac arrest respectively. Both types of typical drowning have terminal</span>\u00a0pulmonary edema and heart failure<span data-preserver-spaces=\"true\">\u00a0as mechanisms of death.\u00a0</span></p>\n<p><span data-preserver-spaces=\"true\">Option D: In\u00a0</span><strong><span data-preserver-spaces=\"true\">dry drowning</span></strong><span data-preserver-spaces=\"true\">\u00a0death is due to the development of\u00a0</span><strong><span data-preserver-spaces=\"true\">laryngeal spasm</span></strong><span data-preserver-spaces=\"true\">\u00a0and subsequent airway closure. Thick mucus, foam, and froth may develop, producing a plug.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old woman presents with painful menses and pain during intercourse. She has not conceived despite having unprotected intercourse for the past 2 years. Per vaginal examination reveals tenderness in the lateral fornices. On bimanual examination, a normal-sized nulligravid uterus is felt. A speculum examination reveals bluish-puckered spots in the posterior fornix. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic pelvic inflammatory disease"
      },
      {
        "id": 2,
        "text": "Rectocele"
      },
      {
        "id": 3,
        "text": "Adenomyosis"
      },
      {
        "id": 4,
        "text": "Endometriosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patient\u2019s <strong>painful menses</strong> (dysmenorrhea), <strong>pain during intercourse</strong> (dyspareunia), <strong>lateral fornicial tenderness</strong>, <strong>bluish spots</strong> in the posterior fornix, and <strong>infertility </strong>suggest endometriosis.</p>\n<p>Endometriosis is the presence of endometrial tissue at a site outside the uterine cavity. It is found in <strong>ectopic</strong> sites such as the ovary, pouch of Douglas, uterosacral ligaments, appendix, pelvic lymph nodes, lower segment cesarean section (LSCS) scar endometriosis, umbilicus, and lung.</p>\n<p>Endometriosis can present as blue or red powdered burned lesions on the cervix or posterior vaginal fornix, scarring around the tissue (<strong>puckered look</strong>). Other features include <strong>chocolate cysts</strong> causing left/right lower quadrant pain, pain during defecation, chronic pelvic pain and infertility, right lower quadrant pain, and cyclical hemoptysis.</p>\n<p><strong>Laparoscopy</strong> is the gold standard modality for the diagnosis and treatment of endometriosis. 'Powder-burn' - puckered black spots, red vascular, bluish, blackish cysts, chocolate cysts, and dense adhesions in the pelvis, as well as yellow-brown peritoneal fluid, can be seen on laparoscopy.</p>\n<p>For <strong>minimal disease\u00a0</strong>medical management with\u00a0<strong>NSAIDs and oral contraceptive pills</strong> are given if associated menstrual complaints are present. OCPs inhibit gonadotropin release and decrease the menstrual flow.\u00a0For <strong>moderate</strong> to <strong>severe</strong> diseases oral <strong>progestogens,\u00a0</strong><strong>GnRH agonists or danazol\u00a0</strong>that\u00a0antagonize estrogenic effects on the endometrium causing endometrial atrophy are used.</p>\n<p><span data-preserver-spaces=\"true\"><strong>Surgery</strong>\u00a0is preferred in\u00a0<strong>infertile women</strong>\u00a0because hormonal treatment would delay pregnancy.\u00a0</span><span data-preserver-spaces=\"true\">Endometrial deposits are destroyed by electrocautery/laser and resection of endometrioma can be done.\u00a0</span><span data-preserver-spaces=\"true\">Laparoscopic uterosacral nerve ablation (LUNA) to control pain .T</span><span data-preserver-spaces=\"true\">otal hysterectomy with bilateral oophorectomy is a\u00a0definitive and most effective therapy for women with endometriosis who do not wish to retain fertility.<br /></span></p>\n<p>Option A-\u00a0<strong>Chronic pelvic inflammatory disease</strong> (PID) closely mimics endometriosis in its symptoms and signs. Both conditions produce pelvic pain, congestive dysmenorrhea, menorrhagia, and sterility. The uterus is retroverted and fixed. But in chronic PID, thickened and slightly tender fornices or a tubo-ovarian mass is noted and speculum finding as seen in the patient described above is not seen in chronic PID.</p>\n<p>Option B - <strong>Rectocele</strong> is a form of genital prolapse seen frequently in menopausal women, especially those with a history of pelvic floor injury or multiparity. Patients present with varying degrees of prolapsed mass per rectum that needs splinting for a satisfactory bowel movement.\u00a0</p>\n<p>\u00a0Option C - <strong>Adenomyosis</strong>, a condition seen frequently in elderly women (Aged&gt; 40 years), is characterized by endometrial islands in the wall of the uterus, leading to a symmetrically enlarged uterus (not more than 14 weeks size). Usual presenting features include menorrhagia and progressively increasing dysmenorrhea. Per vaginal exam findings are normal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following marked blood vessels is the main arterial supply of palatine tonsils?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "1"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>main arterial supply</strong> of tonsil is by the <strong>tonsillar branch</strong> of the&nbsp;<strong>facial artery&nbsp;</strong>which is represented by the marked blood vessel \"<strong>3</strong>\" in the given image.</p>\n<p>Other blood vessels marked in the image are&nbsp;</p>\n<p>1 - Descending palatine branch of the maxillary artery</p>\n<p>2 - Tonsillar branch of the ascending pharyngeal&nbsp;artery</p>\n<p>4 -&nbsp;Dorsal lingual branches of the&nbsp;lingual artery</p>\n<p>Five arteries supply the tonsil:</p>\n<ol>\n<li><strong>Tonsillar branch</strong> of the&nbsp;<strong>facial artery</strong> (the main artery)</li>\n<li><strong>Ascending palatine</strong> branch of the&nbsp;<strong>facial artery</strong></li>\n<li><strong>Ascending pharyngeal</strong> branch of the&nbsp;<strong>external carotid artery</strong></li>\n<li><strong>Dorsal lingual</strong> branches of the&nbsp;<strong>lingual artery</strong></li>\n<li><strong>Descending palatine</strong> branches of the&nbsp;<strong>maxillary artery</strong></li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d779f195b72141bb9f3c59fe7f4358ee.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c49ef6ae1e5c4014978739947e30ced8x1280x1669.JPEG"
    ]
  },
  {
    "text": "You are appointed as a new member in National AIDS Control Organisation (NACO) and have been assigned a district under your care. On checking the records for the number of HIV cases, you learn that the mean incidence over the last 8 years is about 46 cases per 1000 population. What is the prevalence of HIV in your jurisdiction?",
    "choices": [
      {
        "id": 1,
        "text": "368 cases per 1000 population"
      },
      {
        "id": 2,
        "text": "192 cases per 1000 population"
      },
      {
        "id": 3,
        "text": "96 cases per 1000 population"
      },
      {
        "id": 4,
        "text": "288 cases per 1000 population"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In this scenario, the mean incidence (considering there are 46 cases per year) is given for 8 years which gives a prevalence of&nbsp;<strong>368 cases per 1000 population</strong>.</p>\n<p>Prevalence depends upon 2 factors, the incidence, and duration of illness. Given the assumption that the population is stable, and incidence and duration are unchanging, the relationship between incidence and prevalence can be expressed as :</p>\n<p><strong>P = I x D</strong></p>\n<p>where,</p>\n<ul>\n<li>P is the prevalence</li>\n<li>I is the incidence</li>\n<li>and D is the mean duration of the disease</li>\n</ul>\n<p>In this case, I = 46 cases per 1000 population and D = 8 years. Therefore,&nbsp;<strong>P</strong> = 46 X 8 = <strong>368 cases per 1000 population.&nbsp;</strong></p>\n<p>The term <strong>incidence </strong>is&nbsp;defined as \"the number of <strong>new cases</strong> occurring in a defined population during a specified period of time\". It is represented by the following formula :</p>\n<p><strong>(Number of new cases of specific disease during a given time period / Population at-risk during that period) x 1000</strong></p>\n<p>The term \"disease <strong>prevalence</strong>\" refers specifically to all cases (<strong>old and new</strong>) existing at a given point in time, or over a period of time in a given population. It is represented by the formula :</p>\n<p><strong>(Number of existing cases of a specified disease during a given period of time interval /&nbsp;Estimated mid-interval population at-risk) x 100</strong></p>\n<p>The relationship between prevalence and incidence is represented by the formula used in the question.&nbsp;It&nbsp;shows that the longer the duration of the disease, the greater its prevalence</p>\n<p>Tuberculosis is an example of a disease that has a <strong>high prevalence rate relative to incidence</strong>. This is because new cases of tuberculosis keep cropping up throughout the year, while the old ones may persist for months or years.</p>\n<p>Similarly, if the disease is acute and of short duration either because of rapid recovery or death, the prevalence rate will be relatively <strong>low compared with the incidence rate</strong></p>\n<p>Prevalence rates are hence used to :</p>\n<ul>\n<li>Estimate the magnitude of health/disease problems in the community, and identify potential high-risk populations</li>\n<li>Prevalence rates are especially useful for administrative and planning purposes, e.g. hospital beds, manpower needs, rehabilitation facilities, etc</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman who had recently been to the desert in the southwestern US presents with fever, cough, severe fatigue, symmetrical joint pain, and pleuritic chest pain.  On examination, erythema nodosum is noted. Tissue culture findings are as shown below. What is the most likely causative agent in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Coccidioides immitis"
      },
      {
        "id": 2,
        "text": "Paracoccidioides brasiliensis"
      },
      {
        "id": 3,
        "text": "Blastomyces dermatitidis"
      },
      {
        "id": 4,
        "text": "Histoplasma capsulatum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">The clinical picture of a flu-like illness, erythema nodosum, symmetrical joint pain, and pleuritic chest pain with a history of travel to south western USA and tissue culture showing <strong>spherules</strong> points toward the diagnosis of <strong>c</strong></span><strong><span data-preserver-spaces=\"true\"><strong>occidioidomycosis </strong></span></strong><span data-preserver-spaces=\"true\">and t</span><span data-preserver-spaces=\"true\">he causative agent is <em><strong>Coccidioides immitis</strong>.</em></span></p>\n<p><span data-preserver-spaces=\"true\"><em>Coccidioides immitis</em>&nbsp;is a&nbsp;</span><strong><span data-preserver-spaces=\"true\">thermally dimorphic</span></strong><span data-preserver-spaces=\"true\">&nbsp;fungus. It occurs as a <strong>spherule</strong> in tissues and culture at <strong>37&deg;C</strong> and as the <strong>mycelial form</strong> in soil and culture at <strong>room temperature.</strong></span><span data-preserver-spaces=\"true\">&nbsp;They are endemic to the arid desert regions of the southwestern USA and California. Infection is acquired by inhaling dust containing arthrospores of the fungus.</span></p>\n<p><span data-preserver-spaces=\"true\">The infection can be asymptomatic, or patients may present with symptoms like <strong>fever, cough, </strong>and<strong> pleuritic chest pain</strong>. It is also referred to as <strong>Valley fever</strong>. Some clinical features occur</span>&nbsp;due to an immunologic response. These include toxic erythema, <strong>erythema nodosum</strong>, and erythema multiforme. <strong>Symmetrical arthralgias</strong> called <strong>desert rheumatism</strong> may also be seen. Clinical dissemination of infection outside the thoracic cavity occurs in immunocompromised patients.&nbsp;</p>\n<p>Diagnosis:- Sputum, bronchoalveolar lavage, and biopsy specimens are the samples used for diagnosis. Microscopy shows<strong> spherule with endospores</strong>. Culture on brain heart infusion agar with 5% blood shows white-coloured colonies and is the most specific for diagnosis. Serology using ELISA, Immunodiffusion assays, and complement fixation assays are also used to <strong>detect IgM and IgG antibodies</strong>. Delayed hypersensitivity can be demonstrated by a positive skin test with 'coccidiodin' (analogous to the tuberculin test).</p>\n<p><span data-preserver-spaces=\"true\">Azole drugs such as <strong>fluconazole</strong>&nbsp;and&nbsp;<strong>itraconazole</strong>&nbsp;are the mainstay of treatment. Severe cases are managed with intravenous&nbsp;<strong>amphotericin B.</strong>&nbsp;</span></p>\n<p>Other options:</p>\n<p><span data-preserver-spaces=\"true\">Option B:&nbsp;</span><em><strong>Paracoccidioidis brasiliensis</strong></em><span data-preserver-spaces=\"true\">&nbsp;causes <strong>p</strong></span><strong>aracoccidioidomycosis. </strong>It is a chronic ulcerative granulomatous disease of the skin and mucosa.</p>\n<p>Option C:&nbsp;<em><strong>Blastomyces dermatitidis</strong></em><span data-preserver-spaces=\"true\">&nbsp;causes&nbsp;</span><strong><span data-preserver-spaces=\"true\">blastomycosis</span></strong><span data-preserver-spaces=\"true\">, a systemic pyogranulomatous infection involving primarily the lungs. Infection may resemble tuberculosis, or get disseminated to various parts forming multiple abscesses. A cutaneous form of the disease would present as a papule, with secondary nodules that coalesce and form ulcerative lesions.</span></p>\n<p>Option D: <em><strong>Histoplasma capsulatum&nbsp;</strong></em>causes <strong>histoplasmosis</strong>. It is an intracellular infection of the reticuloendothelial system that is acquired by inhalation. It causes a pulmonary disease similar to tuberculosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3c54740451584c91ba909094bfbf2545.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old patient with traumatic perforation of the tympanic membrane is scheduled to undergo a tympanic membrane grafting. Which of the following inhalational agents would you avoid in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Desflurane"
      },
      {
        "id": 2,
        "text": "Halothane"
      },
      {
        "id": 3,
        "text": "Sevoflurane"
      },
      {
        "id": 4,
        "text": "Nitrous oxide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The inhalational agent to be <strong>avoided</strong> in a patient undergoing tympanic membrane grafting&nbsp;is<strong>&nbsp;nitrous oxide</strong>.</p>\n<p>Nitrous oxide has the potential to expand air containing cavities as it can diffuse into and accumulate in them. Hence, it should be avoided in patients undergoing&nbsp;tympanic membrane grafting.</p>\n<p>Other conditions in which nitrous oxide might be hazardous include:</p>\n<ul>\n<li>venous or arterial air embolism</li>\n<li>pneumothorax</li>\n<li>acute intestinal obstruction with bowel distention</li>\n<li>intracranial air (pneumocephalus following dural closure or pneumoencephalography)</li>\n<li>pulmonary air cysts</li>\n<li>intraocular air bubbles</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the largest branch of the artery marked in the image as 'X'?",
    "choices": [
      {
        "id": 1,
        "text": "Anterior inferior cerebellar artery"
      },
      {
        "id": 2,
        "text": "Posterior cerebral artery"
      },
      {
        "id": 3,
        "text": "Posterior inferior cerebellar artery"
      },
      {
        "id": 4,
        "text": "Superior cerebellar artery"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The marked vessel is the vertebral<strong>&nbsp;artery. </strong>The posterior&nbsp;inferior cerebellar artery<strong> (PICA)</strong> is its&nbsp;<strong>largest branch.</strong></p>\n<p>The&nbsp;<strong>vertebral artery</strong>&nbsp;is a branch of the&nbsp;<strong>first part </strong>of the <strong>subclavian artery</strong>. It enters the skull through the foramen magnum and terminates by joining the vertebral artery on the opposite side forming the basilar artery. The branches of the cranial portion of the vertebral artery are:</p>\n<ul>\n<li>Meningeal branches - supplying dura of posterior cranial fossa</li>\n<li>Posterior spinal arteries - supply&nbsp;<strong>posterior one-third&nbsp;</strong>of the spinal cord</li>\n<li>Anterior spinal arteries - supply the&nbsp;<strong>anterior two-thirds</strong>&nbsp;of the spinal cord</li>\n<li>Posterior inferior cerebellar artery (PICA) - the&nbsp;<strong>largest branch</strong>. It supplies the lateral part of the medulla, the cerebellar hemisphere, and choroid plexus of the fourth ventricle.</li>\n<li>Medullary branches - supplying the medulla</li>\n</ul>\n<p>Clinical importance - A disruption in blood supply in the PICA leads to&nbsp;<strong>lateral medullary syndrome</strong>&nbsp;(Wallenberg syndrome).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/577ab8ee218b465380c206cb6ed36895.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "According to the Kidney Disease Improving Global Outcome (KDIGO) classification of chronic kidney disease (CKD), end-stage renal disease is defined when the glomerular filtration rate (GFR) falls into which of the following categories?",
    "choices": [
      {
        "id": 1,
        "text": "Less than 15mL/min"
      },
      {
        "id": 2,
        "text": "Less than 5mL/min"
      },
      {
        "id": 3,
        "text": "Less than 10mL/min"
      },
      {
        "id": 4,
        "text": "Less than 20mL/min"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>When GFR is less than&nbsp;<strong>15 mL/min</strong>, it is classified as<strong> end stage renal disease.</strong></p>\n<p>End stage renal disease represents stage 5 of chronic kidney disease. It is characterized by accumulation of toxins and electrolytes which is normally excreted in the urine. GFR and urine output is severely compromised in this stage and patient is usually dependent on dialysis to improve renal functioning.&nbsp;</p>\n<table style=\"height: 22px;\" width=\"397\">\n<tbody>\n<tr>\n<td style=\"width: 387px; text-align: center;\"><strong>Stages of Chronic Kidney Disease</strong></td>\n</tr>\n</tbody>\n</table>\n<table style=\"height: 180px; width: 395px;\">\n<tbody>\n<tr>\n<td style=\"width: 125px;\"><strong>Stage</strong></td>\n<td style=\"width: 121px;\"><strong>GFR(ml/min/1.73sq.mt)</strong></td>\n<td style=\"width: 129px;\"><strong>Description</strong></td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G1</td>\n<td style=\"width: 121px; text-align: center;\"><span class=\"ILfuVd yZ8quc\">&ge;90</span></td>\n<td style=\"width: 129px;\">Normal or increased GFR with laboratory evidence of kidney damage. Patient is asymptomatic</td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G2</td>\n<td style=\"width: 121px; text-align: center;\">60-89</td>\n<td style=\"width: 129px;\">Slight decrease in GFR, with laboratory evidence of kidney damage.&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G3A</td>\n<td style=\"width: 121px; text-align: center;\">45-59</td>\n<td style=\"width: 129px;\" rowspan=\"2\">Moderate decrease in GFR with clinical and laboratory evidence of kidney damage. Onset of anaemia</td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G3B</td>\n<td style=\"width: 121px; text-align: center;\">30-44</td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G4</td>\n<td style=\"width: 121px; text-align: center;\">15-29</td>\n<td style=\"width: 129px;\">Severe decrease in GFR, with or without other evidence of kidney damage. Prominent anaemia</td>\n</tr>\n<tr>\n<td style=\"width: 125px; text-align: center;\">G5</td>\n<td style=\"width: 121px; text-align: center;\">&lt;15</td>\n<td style=\"width: 129px;\">Established renal failure, along with uremic syndrome.&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test 5';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2021-22"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>