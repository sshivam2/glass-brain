<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>06 Physiology Of Nerve - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Physiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">34</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which among the following is embryologically and physiologically unrelated to other neural cells?",
    "choices": [
      {
        "id": 1,
        "text": "Astrocytes"
      },
      {
        "id": 2,
        "text": "Schwann Cells"
      },
      {
        "id": 3,
        "text": "Oligodendrocyte"
      },
      {
        "id": 4,
        "text": "Microglia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Microglia</strong>\u00a0are physiologically and embryologically unrelated to other neural cell types. They arise from<strong> macrophages</strong> outside the nervous system.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d832170f82f84c0f86083538bda533bdx1280x1191.JPEG"
    ]
  },
  {
    "text": "In which of the following areas is a pseudo-unipolar type of neuron present?",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal root ganglia"
      },
      {
        "id": 2,
        "text": "Sympathetic ganglia"
      },
      {
        "id": 3,
        "text": "Parasympathetic ganglia"
      },
      {
        "id": 4,
        "text": "Cranial nerve nuclei"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>dorsal root ganglion</strong> is a classic example of a <strong>pseudo-unipolar neuron.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Where does the initiation of nerve impulse occur in a spinal motor neuron?",
    "choices": [
      {
        "id": 1,
        "text": "Initial node of Ranvier"
      },
      {
        "id": 2,
        "text": "Axon hillock+ initial segment"
      },
      {
        "id": 3,
        "text": "Cell body"
      },
      {
        "id": 4,
        "text": "Dendritic tree"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In a spinal motor neuron, <strong>initiation</strong> of <strong>nerve impulse</strong> occurs in the <strong>axon hillock</strong> and<strong> initial segment </strong>of the axon because it has a very high density of voltage-gated Na<sup>+ </sup>and K<sup>+</sup> channels. Hence, this region is also known as the trigger zone for the action potential.</p>\n<p>Parts of a Neuron:</p>\n<ul>\n<li><strong>Cell body</strong>/perikaryon: contains many Nissl bodies.</li>\n<li><strong>Dendritic zone</strong>&nbsp;where multiple local potential changes generated by synaptic connections are integrated.</li>\n<li><strong>Axon hillock</strong>: part of the cell body from which the axon arises.</li>\n<li><strong>Initial segment</strong>: the first part of the axon where propagated action potentials are generated.</li>\n<li><strong>An axonal process</strong> that transmits propagated impulses to the nerve endings. The unmyelinated regions of a myelinated axon are termed as nodes of Ranvier.</li>\n<li><strong>Synaptic knobs/</strong>nerve endings&nbsp;where action potentials cause the release of synaptic transmitters.</li>\n</ul>\n<p>Note: Action potentials are generated at the<strong>&nbsp;</strong>initial segment in spinal motor neurons and the initial node of Ranvier in cutaneous sensory neurons.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/14da8a25ecfe4c9ca9adf55119c84ebex1279x999.JPEG"
    ]
  },
  {
    "text": "Which part of the neuron contains a maximum number of Na+ channels per square micrometer?",
    "choices": [
      {
        "id": 1,
        "text": "Cell body"
      },
      {
        "id": 2,
        "text": "Axon terminal"
      },
      {
        "id": 3,
        "text": "Surface of myelin"
      },
      {
        "id": 4,
        "text": "Node of Ranvier"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>maximum</strong> number of <strong>Na<sup>+</sup> channels</strong>&nbsp;per square micrometer in myelinated neurons is present at the&nbsp;<strong>nodes of Ranvier.&nbsp;</strong>It contains&nbsp;2000-12,000&nbsp;channels&nbsp;per square micrometer.</p>\n<p>Voltage-gated Na<sup>+</sup> channels are highly concentrated in the nodes of Ranvier and the initial segment in myelinated neurons.</p>\n<p>The spatial distribution of ion channels along the axon plays a key role in the initiation and regulation of action potential.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a cutaneous sensory neuron, at which of the following places is the propagated action potential generated?",
    "choices": [
      {
        "id": 1,
        "text": "First node of Ranvier"
      },
      {
        "id": 2,
        "text": "Initial segment"
      },
      {
        "id": 3,
        "text": "Dendrite"
      },
      {
        "id": 4,
        "text": "Nerve ending"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 100\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>In&nbsp;cutaneous sensory neurons, <strong>propagated action potentials</strong> are generated in the<strong> initial node of Ranvier</strong>.</p>\n<p>From a functional point of view, neurons generally have four important zones :</p>\n<ol>\n<li>A receptor, or <strong>dendritic zone</strong>, where multiple local potential changes generated by synaptic connections are integrated</li>\n<li>A site where propagated action potentials are generated (the <strong>initial segment</strong> in <strong>spinal motor neurons</strong>, the <strong>initial node of Ranvier </strong>in<strong> cutaneous sensory neurons</strong>)</li>\n<li>An <strong>axonal process</strong> that transmits propagated impulses to the nerve endings</li>\n<li>The <strong>nerve endings</strong>, where action potentials cause the release of synaptic transmitters</li>\n</ol>\n<p>The cell body is often located at the dendritic zone end of the axon, but it can be within the axon (eg, auditory neurons)</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the relationship between diameter of the nerve and conduction velocity?",
    "choices": [
      {
        "id": 1,
        "text": "Linear"
      },
      {
        "id": 2,
        "text": "Parabolic"
      },
      {
        "id": 3,
        "text": "Hyperbolic"
      },
      {
        "id": 4,
        "text": "No relation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> conduction velocity</strong> of a myelinated axon <strong>increases linearly</strong> with <strong>diameter.</strong></p>\n<p><strong>Conduction velocity</strong> is<strong> increased by:</strong></p>\n<ul>\n<li>\n<p>Increasing the fiber size:&nbsp;<strong>Increasing the diameter of a nerve fiber</strong>&nbsp;results in decreased internal resistance; thus, conduction velocity down the nerve is faster.</p>\n</li>\n<li>\n<p><strong>Myelination</strong>: Myelin acts as an insulator around nerve axons and increases conduction velocity. Myelinated nerves exhibit&nbsp;<strong>saltatory conduction.&nbsp;</strong>It is a rapid process that allows myelinated axons to conduct up to 50 times faster than the fastest unmyelinated fibers.</p>\n</li>\n<li>\n<p>Activity of the Na<sup>+</sup>&ndash;K<sup>+</sup>&nbsp;pump does not directly affect the formation or conduction of action potentials.&nbsp;</p>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What process is responsible for the change in membrane potential that occurs between point 1 and point 3?",
    "choices": [
      {
        "id": 1,
        "text": "Movement of Na+ into the cell"
      },
      {
        "id": 2,
        "text": "Movement of Na+ out of the cell"
      },
      {
        "id": 3,
        "text": "Movement of K+ into the cell"
      },
      {
        "id": 4,
        "text": "Movement of K+ out of the cell"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>The process responsible for <strong>repolarization</strong> is the <strong>opening</strong> of <strong>K</strong><sup><strong>+</strong>.&nbsp;</sup>The K<sup>+</sup>&nbsp;permeability becomes very high and drives the membrane potential toward the K<sup>+</sup>equilibrium potential by the flow of K<sup>+</sup>&nbsp;<strong>out of</strong> the <strong>cell.</strong></p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0beecdf7ef1042168c98d2de65efe365.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/78eff207705c4b7fa378118e72109496x1280x1085.JPEG"
    ]
  },
  {
    "text": "The membrane conductance for potassium is maximum at which of the following points in a nerve action potential?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>During the early portion of the action potential, the sodium conductance is 1000 times greater than potassium conductance. Therefore, far more sodium ions flow to the interior of the fiber than do potassium ions to the exterior. This causes the membrane potential to become positive at the action potential onset.</p>\n<p>When the membrane potential rises from \u221290 millivolts toward zero, this voltage change causes a conformational change in the K+ channels which allows increased potassium efflux. Then, the sodium channels begin to close and the potassium channels begin to open, and\u00a0potassium conductance begins to increase (and sodium conductance decreases).</p>\n<p>The increased flow of K<sup>+</sup> out of the cell causes membrane repolarization.\u00a0The slow return of the K+ channels to the closed state explains the after-hyperpolarization followed by a return to the resting membrane potential.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/efdaa499068548cab1ea9f63b1b95a3f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2ee0041e324d46ef92fec66fda05413cx1280x1683.JPEG"
    ]
  },
  {
    "text": "Which of the following is true regarding the upstroke of a nerve action potential?",
    "choices": [
      {
        "id": 1,
        "text": "There is net outward current and the cell interior becomes more negative"
      },
      {
        "id": 2,
        "text": "There is net outward current and the cell interior becomes less negative"
      },
      {
        "id": 3,
        "text": "There is net inward current and the cell interior becomes more negative"
      },
      {
        "id": 4,
        "text": "There is net inward current and the cell interior becomes less negative"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Regarding the <strong>upstroke</strong> of a nerve action potential, there is a&nbsp;<strong>net inward current</strong> and the cell<strong> interior becomes less negative</strong>. The direction of the current is either</p>\n<ol>\n<li><strong>same</strong> as the direction of <strong>positive</strong> charge ( eg, Na+ )</li>\n<li><strong>opposite</strong> to the direction of <strong>negative</strong> charge (eg, Cl- )</li>\n<li><strong>opposite</strong>&nbsp;to the direction of electrons</li>\n</ol>\n<p>Since Na+ moves in, there is a&nbsp;<strong>net inward current.</strong></p>\n<p>Since the RMP increases, the&nbsp;<strong>cell interior becomes less&nbsp;negative.&nbsp;</strong>&nbsp;</p>\n<p>In response to a depolarizing stimulus, some of the voltage-gated Na+ channels open and Na+ enters the cell and the membrane is brought to its threshold potential.&nbsp;The entry of Na+ causes the opening of more voltage-gated Na+ channels and further depolarization, setting up a <strong>positive feedback loop</strong>. The rapid upstroke in the membrane potential ensues. So, there is a net influx of Na+, and the interior of the cell becomes positive during the upstroke of the action potential.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/086669f196844046a00a66e8bd64c571x360x600.PNG"
    ]
  },
  {
    "text": "Which of the following is correctly matched?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>slow return</strong> of the <strong>K<sup>+</sup> channels</strong> to the closed state also explains the <strong>after-hyperpolarization. </strong></p>\n<p>In response to a depolarizing stimulus, some of the <strong>voltage-gated Na+ channels open</strong> and Na<sup>+</sup> enters the cell. The entry of Na<sup>+</sup> causes the opening of more voltage-gated Na<sup>+</sup> channels and further depolarization, setting up a positive feedback loop. The <strong>rapid upstroke</strong> in the membrane potential ensues.</p>\n<p>The membrane potential moves toward the equilibrium potential for Na<sup>+</sup> (+60 mV) but does not reach it during the action potential, primarily because the increase in Na+ conductance is short-lived. The Na<sup>+</sup> channels rapidly enter a closed state called the inactivated state and remain in this state for a few milliseconds.</p>\n<p>In addition, the direction of the electrical gradient for Na<sup>+</sup> is reversed during the overshoot because the membrane potential is reversed, and this limits Na<sup>+</sup> influx; also the voltage-gated K<sup>+</sup> channels open. These factors contribute to <strong>repolarization</strong>. The opening of voltage-gated K<sup>+</sup> channels is slower and more prolonged than the opening of the Na<sup>+</sup> channels. The net movement of positive charge out of the cell due to K<sup>+</sup> efflux at this time helps complete the process of repolarization.</p>\n<p>The slow return of the K<sup>+</sup> channels to the closed state also explains the <strong>after-hyperpolarization</strong>, followed by a return to the resting membrane potential.</p>\n<p>Thus, voltage-gated K<sup>+</sup> channels bring the action potential to an end and cause closure of their gates through a negative feedback process.\u00a0</p>\n<p>Note: Na<sup>+</sup> channels: Positive feedback loop; K<sup>+</sup> channels: Negative feedback loop.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/75b9853facd64dc8aad1f6be4077c2fbx1280x1683.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b57b85e1d8348c59714eff3d4cdc503x1280x1085.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cec707b525d64ff0a22f8b04d832752cx1280x1398.JPEG"
    ]
  },
  {
    "text": "What is known as the time period in which a second stronger impulse can elicit action potential after the application of one stimulus?",
    "choices": [
      {
        "id": 1,
        "text": "Absolute refractory period"
      },
      {
        "id": 2,
        "text": "Relative refractory period"
      },
      {
        "id": 3,
        "text": "Latent refractory period"
      },
      {
        "id": 4,
        "text": "Local response"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>refractory period</strong> is the time period in which a second stronger impulse can elicit action potential after the application of one stimulus. It can be absolute or relative.&nbsp;</p>\n<p>During the rising and much of the falling phases of the spike potential, the neuron is refractory to stimulation. This refractory period is divided into an</p>\n<ul>\n<li><strong>Absolute refractory period</strong>, corresponding to the period from the time the firing level is reached until repolarization is about one-third complete</li>\n<li><strong>Relative refractory period</strong>, lasting from this point to the start of after-depolarization</li>\n</ul>\n<p>During the absolute refractory period, no stimulus, no matter how strong, will not excite the nerve. However, during the relative refractory period, stimuli that are stronger than normal can cause excitation.</p>\n<div class=\"page\" title=\"Page 80\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The absolute refractory period for large myelinated nerve fibers is about <strong>1/2500</strong> second.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "From where does the relative refractory period start?",
    "choices": [
      {
        "id": 1,
        "text": "Half of repolarization"
      },
      {
        "id": 2,
        "text": "One third of repolarization"
      },
      {
        "id": 3,
        "text": "Quarter of repolarization"
      },
      {
        "id": 4,
        "text": "Two thirds of repolarization"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>relative refractory period</strong>&nbsp;<strong>starts</strong> from&nbsp;<strong>one-third</strong> of <strong>repolarization</strong> till the start of after-depolarization.</p>\n<p>The refractory period is a period during which another normal action potential cannot be elicited in an excitable cell.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Rheobase is an indicator of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Specificity of impulse transmission"
      },
      {
        "id": 2,
        "text": "Magnitude of current"
      },
      {
        "id": 3,
        "text": "Rate of discharge"
      },
      {
        "id": 4,
        "text": "Velocity of nerve conduction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Strength-duration curve</strong> gives the idea of the excitability of a tissue.</p>\n<p>Strength-duration relationship arises because the same minimum electrical charge necessary to excite an action potential can come from a current that is either brief but large or prolonged but small. It is the product of strength and duration that determines excitability, and thus these two parameters are inversely related in their effectiveness.</p>\n<p>Note: Chronaxie is a better index than rheobase and utilization time for comparing the excitability of a tissue.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10150e96123844fc804595d06ede18e1x1280x1057.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9bb9ad8155504f69bb91e156000543bfx1280x1338.JPEG"
    ]
  },
  {
    "text": "A slowly rising stimulus fails to fire a nerve because of a process known as __________.",
    "choices": [
      {
        "id": 1,
        "text": "Adaptation"
      },
      {
        "id": 2,
        "text": "Accomodation"
      },
      {
        "id": 3,
        "text": "Refractoriness"
      },
      {
        "id": 4,
        "text": "Electrotonus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 105\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Slowly rising <strong>subthreshold</strong> currents fail to fire the nerve due to a process called <strong>accommodation,</strong> which is a type of adaptation.</p>\n<p>Accommodation is due to <strong>inactivation of voltage-gated Na+ channels</strong>. Due to the slow rise of stimulus, only a few voltage-gated Na+ channels are activated at a time. These few channels are inactivated by the time more channels are activated. So, at no moment, are a sufficient number of channels activated to give an action potential.&nbsp;</p>\n<p>When a membrane is depolarized rapidly, a large number of Na+ channels open at once, and an action potential is produced.&nbsp;</p>\n<p>In contrast, decreased response to a long-lasting and sustained <strong>suprathreshold</strong> stimulus, in general, is called&nbsp;<strong>adaptation.&nbsp;</strong></p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true?",
    "choices": [
      {
        "id": 1,
        "text": "Type A\u03b1 fibre carry information related to pressure"
      },
      {
        "id": 2,
        "text": "Type A\u03b2 fibre has the largest diameter"
      },
      {
        "id": 3,
        "text": "Type A\u03a5  fibre is unmyelinated"
      },
      {
        "id": 4,
        "text": "Type C fibre has the slowest conduction velocity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Type C fibers</strong> are the small <strong>unmyelinated</strong> nerve fibers that conduct impulses at <strong>low velocities.</strong></p>\n<p>Greater the diameter of a given nerve fiber, the greater its speed of conduction.</p>\n<p>The nerve fibers are divided into types A (myelinated), B (myelinated), and C(Unmyelinated). The type A fibers are further subdivided into \u03b1, \u03b2, \u03b3, and \u03b4 fibers.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are performing a CNS examination on a patient with a stroke. With his eyes closed, you move his big toe up or down while holding his toe joint. You ask him to state the position of the digit. Which of the following fibers are responsible for the transmission of the sensation tested here?",
    "choices": [
      {
        "id": 1,
        "text": "A\u03b1"
      },
      {
        "id": 2,
        "text": "A\u03b3"
      },
      {
        "id": 3,
        "text": "A\u03b2"
      },
      {
        "id": 4,
        "text": "A\u03b4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The test performed here is used to check the <strong>proprioception.</strong> The large axons like <strong>A\u03b1 nerve fibers</strong> (12-20\u03bcm) carry information regarding\u00a0<strong>proprioceptive sensation </strong>and\u00a0somatic motor function.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the Erlanger and Gasser classification of peripheral nerve fibers, which type of signal is transmitted by the type B nerve fibers?",
    "choices": [
      {
        "id": 1,
        "text": "Proprioception"
      },
      {
        "id": 2,
        "text": "Preganglionic autonomic"
      },
      {
        "id": 3,
        "text": "Motor to muscle spindle"
      },
      {
        "id": 4,
        "text": "Crude touch"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>type B</strong> fibers <strong>transmit</strong> the <strong>preganglionic autonomic fibers</strong> of both the sympathetic and parasympathetic nervous systems.</p>\n<p><strong>Erlanger and Gasser</strong>\u00a0classified the fibers into types A, B, and C, and the type A fibers are further subdivided into \u03b1, \u03b2, \u03b3, and \u03b4 fibers.</p>\n<ul>\n<li>Type A fibers are the typical large- and medium-\u00adsized myelinated fibers of spinal nerves.</li>\n<li>Type B fibers are smaller fibers with minimal myelination. They transmit impulses of the ANS including the bladder. (B for\u00a0<strong>B</strong>ladder)</li>\n<li>Type C fibers are the small unmyelinated nerve fibers that conduct impulses at low velocities. They constitute more than one-half of the sensory fibers in most peripheral nerves, as well as all the postganglionic autonomic fibers.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man falls into a deep sleep with one arm under his head. He finds he is not able to move this arm when he awakens. However, it tingles and pain sensation in the arm is still intact. What is the reason for the loss of motor function without loss of pain sensation is that in the nerves to his arm?",
    "choices": [
      {
        "id": 1,
        "text": "B  fibers are more susceptible to pressure than A fibers"
      },
      {
        "id": 2,
        "text": "A fibers are more sensitive to pressure than C fibers"
      },
      {
        "id": 3,
        "text": "C fibers are more sensitive to pressure than A fibers"
      },
      {
        "id": 4,
        "text": "Motor nerves are more affected by sleep than sensory nerves"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The reason for the loss of motor function without loss of pain sensation is that in the nerves to his arm, <strong>A-fibers</strong> are <strong>more sensitive</strong> to <strong>pressure</strong> than C fibers.</p>\n<p>Sleeping for a long period with the arms under the head puts pressure on a nerve. It leads to the loss of conduction in large-diameter motor, touch, and pressure fibers, while pain sensation remains relatively intact. A-fibers (includes the motor fibers) are affected.</p>\n<p>The susceptibility of the nerve fibers to pressure is<strong>&nbsp;A&gt;B&gt;C.</strong></p>\n<p>This is responsible for Saturday night or Sunday morning paralysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Spike duration is maximum in which of the following nerve fiber?",
    "choices": [
      {
        "id": 1,
        "text": "A\u03b1"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "A\u03b2"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Spike duration is maximum is C fibers.</p>\n<p>The spike duration in decreasing order: C &gt; B &gt; A</p>\n<p>Absolute refractory period follows the same order: C &gt; B &gt; A</p>\n<table>\n<tbody>\n<tr>\n<td>\n<p><strong>Fibers</strong></p>\n</td>\n<td>\n<p><strong>Spike Duration (ms)</strong></p>\n</td>\n<td>\n<p><strong>Absolute Refractory Period (ms)</strong></p>\n</td>\n</tr>\n<tr>\n<td>\n<p>A</p>\n</td>\n<td>\n<p>0.4-0.5</p>\n</td>\n<td>\n<p>0.4-1</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>B</p>\n</td>\n<td>\n<p>1.2</p>\n</td>\n<td>\n<p>1.2</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>C</p>\n</td>\n<td>\n<p>2</p>\n</td>\n<td>\n<p>2</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Golgi tendon organ, being sensory is classified under which subtype of sensory nerve fibres?",
    "choices": [
      {
        "id": 1,
        "text": "Ia"
      },
      {
        "id": 2,
        "text": "Ib"
      },
      {
        "id": 3,
        "text": "II"
      },
      {
        "id": 4,
        "text": "III"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Golgi tendon organ,</strong> which contains the receptor for <strong>inverse stretch reflex,</strong> belongs to <strong>Class Ib</strong> sensory nerve fibres.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which sensory fibers are least susceptible to hypoxia?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Susceptibility of nerve fibers to hypoxia is <strong>B &gt;A&gt;C,&nbsp;</strong>and in the general classification, type IV sensory nerves are Type C fibers.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are true regarding a biphasic action potential except __________.",
    "choices": [
      {
        "id": 1,
        "text": "All or none phenomenon"
      },
      {
        "id": 2,
        "text": "2 or more positive waves"
      },
      {
        "id": 3,
        "text": "Refractory period is seen"
      },
      {
        "id": 4,
        "text": "Recorded on the surface"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Compound Action Potential</strong></p>\n<ul>\n<li>It is a property of mixed nerves.</li>\n<li>The record shows multiple peaks in action potential because a mixed nerve is made up of families of fibres with various speeds of conduction. Therefore, when all the fibres are stimulated, the activity in the fast-conducting fibres arrives at the recording electrode sooner than the activity in slower fibers.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a7a300aa9809474bb6454ac1b21d0228x600x1046.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/730652cec8ac4ae4b3a4537f1b955202x1280x1109.JPEG"
    ]
  },
  {
    "text": "End plate potential follows all of the following except?",
    "choices": [
      {
        "id": 1,
        "text": "All or none law"
      },
      {
        "id": 2,
        "text": "Depolarization"
      },
      {
        "id": 3,
        "text": "Hyperpolarization"
      },
      {
        "id": 4,
        "text": "Summation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>End plate potential is a graded potential with the following characteristics:</p>\n<ul>\n<li>Magnitude is related to the magnitude of the initiating event</li>\n<li>Amplitude decreases over distance</li>\n<li>Can be summated</li>\n</ul>\n<table width=\"558\">\n<tbody>\n<tr>\n<td style=\"width: 257px;\">\n<p><strong>Graded Potential</strong></p>\n</td>\n<td style=\"width: 285px;\">\n<p><strong>Action Potential</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Amplitude proportionate to strength of stimulus. It is graded.</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Independent of stimulus intensity &ndash; all or none response</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Can be depolarising or hyperpolarizing</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Depolarizing</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Is conducted decrementally - amplitude decreases with distance</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Self-propagated unchanged in amplitude</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Generated spontaneously or in response to stimuli- physical, chemical</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Generated only in response to Membrane Depolarization</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Can be summated</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Cannot be summated</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Has no threshold and refractory period</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Has a threshold about 15 mv depolarized relative to the resting potential.</p>\n<p>Has a refractory period</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 257px;\">\n<p>Not always followed by some action</p>\n</td>\n<td style=\"width: 285px;\">\n<p>Always followed by some action</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following can be used to measure a synaptic potential?",
    "choices": [
      {
        "id": 1,
        "text": "Patch clamp"
      },
      {
        "id": 2,
        "text": "Microelectrode"
      },
      {
        "id": 3,
        "text": "Voltage clamp"
      },
      {
        "id": 4,
        "text": "ECG"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Instruments required for recording membrane potential/synaptic potential</strong></p>\n<ul>\n<li><strong>Stimulating electrodes: </strong>Cathode and anode</li>\n<li><strong>Recording electrodes: </strong>Glass microelectrode (tip diameter &lt;0.5&mu;)</li>\n<li><strong>Display: </strong>Cathode ray oscilloscope (CRO)</li>\n<li><strong>Squid giant axon: </strong>It is a large diameter neuron (up to 0.5 mm) from where the recording of potential is easier.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man who is fond of exotic cuisine develops perioral numbness after eating the Pufferfish. The given poisoning is due to which of the following toxins?",
    "choices": [
      {
        "id": 1,
        "text": "Saxitoxin"
      },
      {
        "id": 2,
        "text": "Tetrodotoxin"
      },
      {
        "id": 3,
        "text": "Curare"
      },
      {
        "id": 4,
        "text": "Ciguatoxin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Pufferfish poisoning</strong> is caused by the toxin <strong>tetrodotoxin</strong>. The <strong>sodium channels</strong> can be blocked by this toxin when it is applied to the outside of the cell membrane where the sodium activation gates are located.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/743d824ea1ee4685b28cda4262147191x1280x1421.JPEG"
    ]
  },
  {
    "text": "Conduction in the chemical synapses in CNS is",
    "choices": [
      {
        "id": 1,
        "text": "Both antidromic and orthodromic"
      },
      {
        "id": 2,
        "text": "Always antidromic"
      },
      {
        "id": 3,
        "text": "Always orthodromic"
      },
      {
        "id": 4,
        "text": "Antidromic under lab conditions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Conduction in the <strong>chemical synapses</strong> in CNS is <strong>always</strong> <strong>orthodromic.</strong></p>\n<p>When an action potential is set up in an axon, two impulses travelling in the opposite direction is set up by depolarization on either side of the initial current.\u00a0</p>\n<p>In the natural situation, impulses pass in one direction only- from synaptic junctions to axon terminals. Such conduction is called <strong>orthodromic. </strong>Conduction in the opposite direction is called <strong>antidromic.</strong> Under natural conditions, impulse conduction is normally only orthodromic. Antidromic conduction is usually only seen when a nerve fibre is stimulated under artificial conditions.\u00a0</p>\n<p>In a chemical synapse, conduction is always orthodromic. As the transmission in a chemical synapse is due to the release of neurotransmitters from the presynaptic membrane which activate receptors on the postsynaptic membrane, antidromic conduction (i.e. from the postsynaptic membrane to presynaptic membrane) is not possible. Any impulse travelling in such direction would die as it encounters the first synapse.\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e8cb76a81b214de7ab6b6105f411ebf7x648x600.JPEG"
    ]
  },
  {
    "text": "Fast axonal transport is by all except______",
    "choices": [
      {
        "id": 1,
        "text": "Dynein"
      },
      {
        "id": 2,
        "text": "Kinesin"
      },
      {
        "id": 3,
        "text": "Neurofilaments"
      },
      {
        "id": 4,
        "text": "Microtubules"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Fast axonal transport is by all <strong>except</strong> neurofilaments.</p>\n<p>Neurofilaments play no role in axonal transport.&nbsp;Fast axonal transport takes place along <strong>microtubules</strong> which are tubular polymers of protein&nbsp;<strong>tubulin.&nbsp;</strong></p>\n<p><strong>AXONAL TRANSPORT</strong></p>\n<ul>\n<li>Protein synthesis occurs in the cell body of neuron and proteins and polypeptides are transported to axonal endings by the axoplasmic flow.</li>\n<li>Axonal transport can be orthograde or retrograde.</li>\n<li><strong>Orthograde transport</strong>&nbsp;\n<ul>\n<li>Can be either fast or slow axonal transport and it occurs along microtubules that run along the length of the axon away from the cell body.</li>\n<li>Fast axonal transport occurs at about&nbsp;<strong>400 mm/day</strong>, and slow axonal transport occurs at&nbsp;<strong>0.5 to 10 mm/day</strong>.</li>\n<li>Molecular motor involved in orthograde transport is <strong>Kinesin.</strong></li>\n</ul>\n</li>\n<li><strong>Retrograde transport</strong>,\n<ul>\n<li>In the opposite direction (from the nerve ending to the cell body), occurs along microtubules at about&nbsp;<strong>200 mm/day.&nbsp;</strong>Synaptic vesicles, nerve growth factor (NGF) and some viruses are transported back to the cell body.&nbsp;</li>\n<li>Molecular motor involed in retrograde transport is <strong>Dyenin.</strong></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3d012707744a491dae4ba95023d6713ex1280x1239.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ea913fec7c184faea2f344984e8cba88x500x596.PNG"
    ]
  },
  {
    "text": "Which of the following is incorrect regarding axonal transport?",
    "choices": [
      {
        "id": 1,
        "text": "Axonal transport occurs along microtubules"
      },
      {
        "id": 2,
        "text": "Slow orthograde axonal transport occurs at 100 mm/day"
      },
      {
        "id": 3,
        "text": "Kinesins are required for orthograde axonal transport"
      },
      {
        "id": 4,
        "text": "Viruses exploit retrograde transport for invasion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"ng-binding\">Slow orthograde transport occurs at a speed of&nbsp;<strong>0.5 to 10 mm/day</strong>.</p>\n<div class=\"page\" title=\"Page 102\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>AXONAL TRANSPORT</strong></p>\n<ul>\n<li>Protein synthesis occurs in the cell body of neuron and proteins and polypeptides are transported to axonal endings by the axoplasmic flow.</li>\n<li>Axonal transport can be Orthograde or Retrograde.</li>\n<li><strong>Orthograde transport</strong>&nbsp;\n<ul>\n<li>Can be either fast or slow axonal transport and it occurs along microtubules that run along the length of the axon away from the cell body.</li>\n<li>Fast axonal transport occurs at about&nbsp;<strong>400 mm/day</strong>, and slow axonal transport occurs at&nbsp;<strong>0.5 to 10 mm/day</strong>.</li>\n<li>Molecular motor involved in <strong>orthograde</strong> transport is <strong>kinesin.</strong></li>\n</ul>\n</li>\n<li><strong>Retrograde transport</strong>,\n<ul>\n<li>In the opposite direction (from the nerve ending to the cell body), occurs along microtubules at about&nbsp;<strong>200 mm/day.&nbsp;</strong>Synaptic vesicles, nerve growth factor (NGF) and some viruses&nbsp;<strong>(Eg: herpes simplex, rabies, and polio)&nbsp;</strong>are transported back to the cell body.&nbsp;</li>\n<li>Molecular motor involed in <strong>retrograde</strong> transport is <strong>dyenin.</strong></li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "When a nerve is cut, which of the following takes place first?",
    "choices": [
      {
        "id": 1,
        "text": "Mylein degeneration"
      },
      {
        "id": 2,
        "text": "Regenerative Sprouting"
      },
      {
        "id": 3,
        "text": "Denervation supersensitivity"
      },
      {
        "id": 4,
        "text": "Schwann cell proliferation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Among the given options, <strong>myelin degeneration</strong> would be the best answer.</p>\n<p>However, the earliest change in Wallerian degeneration after nerve injury is the <strong>degeneration of the axon distal to the site of injury&nbsp;</strong>(axonal degeneration) where there is a disruption of the retrograde and anterograde flow of signals within the axon.</p>\n<p><strong>Wallerian degeneration</strong></p>\n<ul>\n<li>If the axon is cut, the part distal to the cut degenerates; this process is called as <strong>Wallerian degeneration.&nbsp;</strong></li>\n<li>Orthograde degeneration (Wallerian degeneration) occurs from the point of injury to the nerve terminal, interrupting neural transmission.&nbsp;</li>\n<li>After the injury, the membrane breaks down and the myelin sheath degenerates. The cell body of the injured neuron swells, the nucleus moves to an eccentric position, and the rough endoplasmic reticulum becomes fragmented <strong>(chromatolytic reaction)</strong>.</li>\n<li>The nerve then starts to regrow, with multiple small branches projecting along the path the axon previously followed<strong> (regenerative sprouting).</strong></li>\n<li>When the motor nerve to skeletal muscle is cut and allowed to degenerate, the muscle gradually becomes extremely sensitive to acetylcholine. This is called <strong>denervation hypersensitivity </strong>or<strong> supersensitivity</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/734b756152c34c34a99c0193053b63cax1280x2017.JPEG"
    ]
  },
  {
    "text": "Which of the following is true regarding the resting membrane potential (RMP) in a nerve fibre?",
    "choices": [
      {
        "id": 1,
        "text": "It is equal to the RMP of inner hair cells of cochlea"
      },
      {
        "id": 2,
        "text": "It can be measured by surface electrodes"
      },
      {
        "id": 3,
        "text": "It becomes more positive as extracellular K+ increases"
      },
      {
        "id": 4,
        "text": "It depends on the equilibrium potential of Na+"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The resting membrane potential is close to the equilibrium potential for <strong>K+.&nbsp;</strong>So,&nbsp;changes in the external concentration of this ion can have major effects on the resting membrane potential.</p>\n<ul>\n<li>If the extracellular level of <strong>K+ is increased (hyperkalemia)</strong>, the resting potential moves closer to the threshold for eliciting an action potential, thus the neuron becomes more excitable.</li>\n<li>If the extracellular level of <strong>K+ is decreased (hypokalemia)</strong>, the membrane potential is reduced and the neuron is hyperpolarized.</li>\n</ul>\n<p><strong>Option a</strong>:&nbsp;The RMP of a nerve fiber is -70 mV, while the RMP of inner hair cells is between -45 and -60 mV relative to the fluid that bathes the basal end of the cell.</p>\n<p><strong>Option b</strong>: The membrane potential can be measured only when one electrode is inserted into the <strong>interior of the cell</strong>.</p>\n<p><strong>Option d</strong>: It depends on the equilibrium potential of K+.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following about sensory nerve fibers is not true?",
    "choices": [
      {
        "id": 1,
        "text": "Ia - A alpha"
      },
      {
        "id": 2,
        "text": "II - A beta"
      },
      {
        "id": 3,
        "text": "III - A gamma"
      },
      {
        "id": 4,
        "text": "IV - C"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 575\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 575\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Group III fibers carrying temperature, crude touch, and pricking pain sensations are <strong>\u03b4-type A</strong> fibers, not A-gamma type .</p>\n<p>Alternative Classification Used in Sensory Nerves</p>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Group Ia.</strong> Fibers from the annulospiral endings of muscle spindles are<strong> \u03b1-type A </strong>fibers in the general classification.</li>\n<li><strong>Group Ib.</strong> Fibers from the Golgi tendon organs are also <strong>\u03b1-type</strong> A fibers.</li>\n<li><strong>Group II.</strong> Fibers from most discrete cutaneous tactile receptors and from the flower-spray endings of the muscle spindles are <strong>\u03b2- and \u03b3-type A</strong> fibers in the general classification.</li>\n<li><strong>Group III.</strong> Fibers carrying temperature, crude touch, and pricking pain sensations are <strong>\u03b4-type A</strong> fibers in the general classification.</li>\n<li><strong>Group IV.</strong> Unmyelinated fibers carrying pain, itch, temperature, and crude touch sensations are <strong>type C</strong> fibers in the general classification</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Absolute refractory period is due to:",
    "choices": [
      {
        "id": 1,
        "text": "Opening of calcium channels"
      },
      {
        "id": 2,
        "text": "Closure of potassium channels"
      },
      {
        "id": 3,
        "text": "Closure of active gates of sodium channel"
      },
      {
        "id": 4,
        "text": "Closure of inactive gates of sodium channel"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Absolute refractory period is due to <strong>closure of inactive gates</strong> of sodium channel.</p>\n<p>Voltage-gated sodium channels have <strong>3 states</strong> that you can find them in. They can either be <strong>closed, open, or inactive</strong>.</p>\n<p>When the stimulus causes activation of the open gates, sodium rushes into the cell causing the membrane potential to become more positive. After 0.5 to 1 millisecond, the inactive gate automatically closes and no stimulus, no matter how strong, can excite the nerve. This is called the absolute refractory period.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8cd4e8949ca142d1a64c212c3b9a54cbx1280x1683.JPEG"
    ]
  },
  {
    "text": "Identify the ions A and B based on conductance graph of a neuron shown below:",
    "choices": [
      {
        "id": 1,
        "text": "Na, K"
      },
      {
        "id": 2,
        "text": "K, Na"
      },
      {
        "id": 3,
        "text": "Na, Ca"
      },
      {
        "id": 4,
        "text": "Ca, Na"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>The sequence of events during the action potential</strong>\u00a0occur in 7 steps as described below.</p>\n<p>1.\u00a0Resting state - <strong>Both channels are closed</strong></p>\n<p>2.\u00a0<strong>Na+ channels open</strong> in response to depolarizing stimulus. Sodium enters into the cell. The membrane reaches <strong>threshold potential.</strong></p>\n<p>3. The sodium influx causes <strong>opening of more sodium channels</strong> through <strong>positive feedback</strong> mechanism. <strong>Rapid depolarization</strong> occurs.</p>\n<p>4. Sodium conductance decreases.</p>\n<p>5. Na+ channels close and <strong>K+ channels open</strong>. <strong>Repolarization</strong> occurs.</p>\n<p>6. <strong>Sodium</strong> channels are <strong>reset</strong>, and are ready to respond to another depolarizing stimulus (<strong>relative refractory period</strong>). During this phase, the\u00a0<strong>potassium</strong> channels remain open and <strong>slowly return to closed</strong> state causing <strong>after-hyperpolarization</strong>.</p>\n<p>7. Both channels are closed. The membrane returns to <strong>RMP</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b5d9cc3563304205868bddaedf9c0fe4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b57c05afdd7644c5883be4b9e9750236x1280x1028.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/35286d684fa14639af2eafe0b9fc4e08x1280x1683.JPEG"
    ]
  },
  {
    "text": "The image below shows simple muscle twitch along with the time trace, recorded in a frog gastrocnemius muscle. Calculate the minimum tetanizing frequency. (The time tracer was made with a 100Hz tuning fork).",
    "choices": [
      {
        "id": 1,
        "text": "25 per second"
      },
      {
        "id": 2,
        "text": "15 per second"
      },
      {
        "id": 3,
        "text": "17 per second"
      },
      {
        "id": 4,
        "text": "20 per second"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\"><strong>Tetanization</strong>:</p>\n<p class=\"p1\">The features of muscle contraction can be demonstrated by eliciting single muscle twitches. The adding together of individual twitch contractions to increase the intensity of overall muscle contraction is <strong>Summation.\u00a0</strong>Summation occurs in two ways:</p>\n<ul class=\"ul1\">\n<li class=\"li1\">by increasing the number of motor units contracting simultaneously, which is <strong>multiple \ufb01ber summations.</strong></li>\n<li class=\"li1\">by increasing the frequency of contraction, which is called frequency<strong>\u00a0summation and can lead to tetanization.</strong></li>\n</ul>\n<p class=\"p1\">When the frequency of a contraction reaches a critical level, the successive contractions eventually fuse together, and the whole muscle contraction appears to be completely smooth and continuous, this is called<strong> tetanization.\u00a0</strong>Beyond this point, a further increase in the frequency, will not result in increased force of contraction.</p>\n<p class=\"p1\"><strong>Tetanization </strong>occurs in two ways:</p>\n<ul class=\"ul1\">\n<li class=\"li1\"><strong>Complete tetanus </strong>occurs when no relaxation occurs between stimuli.</li>\n<li class=\"li1\"><strong>Incomplete tetanus </strong>when periods of incomplete relaxation take place between the summated stimuli.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/34ef06d3894942c9a681f6211dc63967.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/037de34e007545d79a483088b1b50c03x1280x2823.JPEG"
    ]
  }
];
        let quizName = '06 Physiology Of Nerve';
        let hierarchy = ["Marrow", "qBank", "Physiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>