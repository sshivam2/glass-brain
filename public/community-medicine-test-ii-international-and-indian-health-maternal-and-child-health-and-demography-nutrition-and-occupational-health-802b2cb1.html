<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Community Medicine Test Ii (International And Indian Health, Maternal And Child Health, And Demography, Nutrition And Occupational Health) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A pregnant woman has come for her first antenatal visit at 10 weeks of gestation. How many more antenatal visits does she require to fulfill the minimum requirements as per the Maternal and Child Health program?",
    "choices": [
      {
        "id": 1,
        "text": "7"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "8"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient requires <strong>3 more antenatal visits</strong> in order to fulfill the minimum requirements according to the Maternal and Child Health Program (<strong>MCH</strong>).</p>\n<p>The <strong>minimum </strong>number of<strong> antenatal visits</strong> according to <strong>MCH</strong> is <strong>4</strong>.</p>\n<ul>\n<li><strong>1st visit&nbsp;</strong>&ndash; within 12 weeks, preferably as soon as the pregnancy is suspected.</li>\n<li><strong>2nd visit&nbsp;</strong>&ndash; between 14 and 26 weeks</li>\n<li><strong>3rd visit&nbsp;</strong>&ndash; between 28 and 34 weeks</li>\n<li><strong>4th visit&nbsp;</strong>&ndash; between 36 weeks and term</li>\n</ul>\n<p>The minimum number of antenatal visits according to the <strong>WHO</strong>&nbsp;is <strong>8</strong>.&nbsp;Ideally, pregnant women should attend&nbsp;antenatal visits according to the following schedule:</p>\n<ul>\n<li><strong>Once a month</strong> during the<strong> first 7 months</strong></li>\n<li><strong>Twice a month</strong> during the <strong>8th&nbsp;month </strong></li>\n<li><strong>Once a week</strong>, thereafter if everything is normal.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As part of the national maternity benefit scheme, you have been tasked with conducting a study in a community of 5000 people.  What is the expected number of pregnant women in this community if the crude birth rate is 30 per 1000 people?",
    "choices": [
      {
        "id": 1,
        "text": "175"
      },
      {
        "id": 2,
        "text": "150"
      },
      {
        "id": 3,
        "text": "165"
      },
      {
        "id": 4,
        "text": "145"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The expected number of pregnant females in the given community would be\u00a0<strong>165.</strong></p>\n<p><strong>Step 1</strong>: In the given question, the <strong>crude birth rate</strong> is <strong>30</strong> per 1000 people i.e 30 children are born from pregnant mothers for every 1000 people. Therefore there are 30 pregnant females per 1000 population.</p>\n<p><strong>Step 2</strong>: Since the<strong> total population</strong> is <strong>5000</strong>, the total no of pregnant females = 5000 x 30/1000 = 150\u00a0</p>\n<p><strong>Step 3</strong>: Since some pregnancies may not result in live births (abortions and stillbirths), a <strong>correction factor</strong> of <strong>10%</strong> should be added to avoid the underestimation of the number of pregnancies. <strong>Pregnancy wastage</strong>\u00a0(i.e 10% of total live births) =10 x 150/100=15.</p>\n<p><strong>Step 4</strong>: <strong>Total pregnant females</strong> = total live births + pregnancy wastage\u00a0= 150+15=<strong>165.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Demographic gap starts contracting in the _________ phase.",
    "choices": [
      {
        "id": 1,
        "text": "Low stationary"
      },
      {
        "id": 2,
        "text": "Early expanding"
      },
      {
        "id": 3,
        "text": "Late expanding"
      },
      {
        "id": 4,
        "text": "Declining"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> demographic gap </strong>starts <strong>contracting</strong> in the <strong>late expanding</strong> phase&nbsp;(stage 3).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is also known as the Billings method of contraception?",
    "choices": [
      {
        "id": 1,
        "text": "Rhythm method"
      },
      {
        "id": 2,
        "text": "Cervical mucus method"
      },
      {
        "id": 3,
        "text": "Symptothermic method"
      },
      {
        "id": 4,
        "text": "Calendar method"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Billings method</strong>&nbsp;of contraception is also known as the&nbsp;<strong>cervical mucus method</strong> (or ovulation method).&nbsp;</p>\n<p>It is a <strong>natural method</strong> of contraception.&nbsp;It is based on the <strong>observation</strong> of <strong>changes </strong>in the <strong>cervical mucus</strong>.&nbsp;At <strong>ovulation</strong>, the <strong>mucus</strong> is watery <strong>clear</strong>, smooth,&nbsp;<strong>slippery</strong> and <strong>profuse</strong>.&nbsp;<strong>After ovulation</strong>, it becomes <strong>thicker</strong> and <strong>scarce.</strong></p>\n<p>The pattern of cervical mucus secretion during a menstrual cycle is given below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b4868fabaf8b4d11ac448ac70af8062cx1279x1451.JPEG"
    ]
  },
  {
    "text": "You are a doctor at a child health clinic. You will consider all of the following children as at-risk infants except:",
    "choices": [
      {
        "id": 1,
        "text": "A 2-month-old baby with 3 older siblings"
      },
      {
        "id": 2,
        "text": "A 15-day-old baby with birth weight of 2.4 kgs"
      },
      {
        "id": 3,
        "text": "An 1-year-old girl with protein-energy malnutrition"
      },
      {
        "id": 4,
        "text": "An 8-month-old baby being raised by a working mother"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The 2-month-old baby with 3 older siblings has a birth order of 4. Infants with <strong>birth order</strong> of <strong>5 or more</strong> are considered <strong>at-risk infants</strong>.</p>\n<p>The following are considered at-risk infants:</p>\n<ul>\n<li>Birth weight <strong>&lt; 2.5 kgs</strong></li>\n<li>Twins\u00a0</li>\n<li>Birth order of 5 or more</li>\n<li>Artificial feeding</li>\n<li>Weight below 70% of the expected weight</li>\n<li>Failure to gain weight during 3 successive months</li>\n<li>Children with\u00a0protein-energy malnutrition<strong>\u00a0</strong>(<strong>PEM</strong>), diarrhea</li>\n<li><strong>Working mother</strong> or single parent</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most effective natural method of contraception?",
    "choices": [
      {
        "id": 1,
        "text": "Basal body temperature method"
      },
      {
        "id": 2,
        "text": "Cervical mucus method"
      },
      {
        "id": 3,
        "text": "Symptothermic method"
      },
      {
        "id": 4,
        "text": "Calendar method"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The&nbsp;<strong>most effective natural</strong> <strong>method </strong>of contraception is the&nbsp;<strong>symptothermic method.</strong></p>\n<p>It <strong>combines</strong>:</p>\n<ul>\n<li>Calendar method</li>\n<li>Cervical mucus method</li>\n<li>Basal body method.</li>\n</ul>\n<p>In this method, if a woman is not able to identify one sign, she can double-check with her interpretation of the other signs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following was the world\u2019s first international health agency?",
    "choices": [
      {
        "id": 1,
        "text": "Pan American Sanitary Bureau"
      },
      {
        "id": 2,
        "text": "World Health Organization"
      },
      {
        "id": 3,
        "text": "Health Organization of the League of Nations"
      },
      {
        "id": 4,
        "text": "United States Agency for International Development"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The first international health agency to be established was the<strong> Pan American Sanitary Bureau&nbsp;</strong>(PASB) in <strong>1902</strong>.&nbsp;</p>\n<p>This was followed by the establishment of the Health Organization of the League of Nations in 1923.</p>\n<p>The <strong>World Health Organisation </strong>(WHO) was established on<strong> 7<sup>th</sup> April 1948</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the false statement about the following tool:",
    "choices": [
      {
        "id": 1,
        "text": "Malnutrition can be detected even before signs and symptoms appear"
      },
      {
        "id": 2,
        "text": "It provides an objective basis for policy making on child healthcare"
      },
      {
        "id": 3,
        "text": "It can be used to teach the importance of adequate feeding"
      },
      {
        "id": 4,
        "text": "It can be used to indicate proof of government aid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows a&nbsp;<strong>growth chart.</strong>&nbsp;It is not used as proof of government aid.</p>\n<p>The uses of growth charts are as follows:</p>\n<ul>\n<li>Growth monitoring and diagnosis - can detect malnutrition before clinical features appear</li>\n<li>Educational tool - to teach parents about the importance of adequate feeding.</li>\n<li>Objective basis for planning and&nbsp;<strong>policy-making&nbsp;</strong>on child healthcares</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4224c7ff52b9496bae1061976ff9235b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which organisation gives the highest funding for reproductive health?",
    "choices": [
      {
        "id": 1,
        "text": "UNESCO"
      },
      {
        "id": 2,
        "text": "UNFPA"
      },
      {
        "id": 3,
        "text": "WHO"
      },
      {
        "id": 4,
        "text": "UNIDO"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>United Nations Fund for Population Activities (<strong>UNFPA</strong>) gives the highest funding for <strong>reproductive health</strong>. It works in the area of health and family welfare.&nbsp;</p>\n<p>It mainly works by:</p>\n<ul>\n<li>Developing the national capability in <strong>manufacturing</strong> <strong>contraceptives</strong>,</li>\n<li>Promoting <strong>population</strong> <strong>education</strong> programmes</li>\n<li>Introducing innovative approaches to <strong>family planning and MCH care</strong>.</li>\n</ul>\n<p><strong>Sexual and Reproductive Health Awareness Day</strong> is organized on <strong>February 12th</strong> every year to raise awareness about sexual and reproductive health. &nbsp;</p>\n<p>The logo of the UNFPA is given below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed092c6e223a44b48b6c41049e3a0d3ex1280x559.PNG"
    ]
  },
  {
    "text": "How many goals does the Sustainable Development Goals (SDG) comprise of?",
    "choices": [
      {
        "id": 1,
        "text": "17"
      },
      {
        "id": 2,
        "text": "28"
      },
      {
        "id": 3,
        "text": "8"
      },
      {
        "id": 4,
        "text": "14"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>Sustainable Development Goals </strong>(SDG) are comprised of <strong>17 goals</strong>.</p>\n<p>These were set&nbsp;as part of the official Sustainable Development Goals of the <strong>Agenda 2030</strong>.<strong>&nbsp;</strong> These goals consist of a total of&nbsp;<strong>169 targets</strong>.<strong>&nbsp;</strong>SDGs replaced the&nbsp;Millennium Development Goals on&nbsp;1st January 2016.&nbsp;</p>\n<p>The 2030 agenda consists of <strong>five P's</strong>:&nbsp;</p>\n<ul>\n<li>People</li>\n<li>Planet</li>\n<li>Prosperity</li>\n<li>Peace</li>\n<li>Partnership &nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/99a118c8654241939d5ed5c38c8e0daex1280x904.JPEG"
    ]
  },
  {
    "text": "What is the average weight gain during pregnancy in Indian women with inadequate calorie intake?",
    "choices": [
      {
        "id": 1,
        "text": "7 - 8 kg"
      },
      {
        "id": 2,
        "text": "9 \u2013 11 kg"
      },
      {
        "id": 3,
        "text": "8 - 9  kg"
      },
      {
        "id": 4,
        "text": "5 - 6 kg"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Weight gain</strong> during pregnancy in women with&nbsp;<strong>inadequate calorie</strong> intake is around <strong>5 - 6 kgs</strong>.</p>\n<p><strong>Normally</strong>, a woman is expected to gain around <strong>9-11 kgs</strong> of weight during pregnancy. An inadequate dietary intake can be suspected if the woman gains &lt; 2 kg/ month.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a vital statistic?",
    "choices": [
      {
        "id": 1,
        "text": "Natural growth rate"
      },
      {
        "id": 2,
        "text": "Fertility rate"
      },
      {
        "id": 3,
        "text": "Sex ratio"
      },
      {
        "id": 4,
        "text": "Life expectancy at birth"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Sex ratio</strong> is not a vital statistic, it is a <strong>population statistic.</strong></p>\n<p>Demographic indicators&nbsp;have been divided into 2 parts:</p>\n<ul>\n<li><strong>Population statistics&nbsp;</strong>include -\n<ul>\n<li>Population size</li>\n<li>Sex ratio</li>\n<li>Density</li>\n<li>Dependency ratio</li>\n</ul>\n</li>\n<li><strong>Vital statistics</strong>&nbsp;include -\n<ul>\n<li>Birth rate</li>\n<li>Death rate</li>\n<li><strong>Natural growth rate</strong></li>\n<li><strong>Life expectancy at birth</strong></li>\n<li>Mortality rate</li>\n<li><strong>Fertility rate</strong></li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Scope of modern concept of family planning services include all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Screening for cervical cancer"
      },
      {
        "id": 2,
        "text": "Providing services for unmarried mothers"
      },
      {
        "id": 3,
        "text": "Screening for HIV infection"
      },
      {
        "id": 4,
        "text": "Providing adoption services"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Screening for HIV infection does not come under the purview of family planning.</p>\n<p><strong>The modern concepts of family planning services include:</strong></p>\n<ul>\n<li>Proper spacing and limitation of birth</li>\n<li>Advice on sterility</li>\n<li>Education for parenthood</li>\n<li>Sex education</li>\n<li><strong>Screening </strong>for pathological conditions related to the reproductive system (e.g. <strong>cervical cancer</strong>)</li>\n<li>Genetic counseling</li>\n<li>Premarital consultation and examination</li>\n<li>Pregnancy tests</li>\n<li>Marriage counseling</li>\n<li>Preparation of couples for the first child</li>\n<li><strong>Providing services to unmarried mothers</strong></li>\n<li>Teaching home economics and nutrition</li>\n<li><strong>Providing adoption services</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In patients with which of the following conditions can OCPs be safely prescribed?",
    "choices": [
      {
        "id": 1,
        "text": "Breast cancer"
      },
      {
        "id": 2,
        "text": "Cardiac abnormalities"
      },
      {
        "id": 3,
        "text": "PID"
      },
      {
        "id": 4,
        "text": "Liver disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pelvic Inflammatory Disease (PID) is not a contraindication for prescribing OCPs.</p>\n<p><strong>Absolute contraindications</strong> of OCPs: (<strong>CULT</strong>)</p>\n<ul>\n<li><strong>C</strong>ancers - breast and genital</li>\n<li><strong>C</strong>ardiac abnormalities</li>\n<li><strong>C</strong>ongenital hyperlipidemia</li>\n<li><strong>U</strong>ndiagnosed AUB</li>\n<li><strong>L</strong>iver disease</li>\n<li><strong>T</strong>hromboembolism - past or present history.</li>\n</ul>\n<p><strong>Medical surveillance</strong>&nbsp;is required while prescribing OCPs if the patient is/or has:</p>\n<ul>\n<li>Age more than 40 years</li>\n<li>Chronic smoker and&nbsp;age over 35 years</li>\n<li>Amenorrhea</li>\n<li>Chronic renal disease</li>\n<li>Diabetes mellitus</li>\n<li>Epilepsy</li>\n<li>In the first 6 months of nursing</li>\n<li>Gall bladder disease</li>\n<li>History of infrequent bleeding</li>\n<li>Mild hypertension</li>\n<li>Migraine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the best indicator of obstetric and neonatal care given before and around the time of birth?",
    "choices": [
      {
        "id": 1,
        "text": "Infant mortality rate"
      },
      {
        "id": 2,
        "text": "Perinatal mortality rate"
      },
      {
        "id": 3,
        "text": "Under 5 mortality rate"
      },
      {
        "id": 4,
        "text": "Early neonatal mortality rate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> perinatal mortality rate </strong>is the best indicator to evaluate obstetric and neonatal care given <strong>before</strong> and <strong>around</strong> the time of <strong>birth</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As part of the National family planning program, you are conducting a study in a village to gather data on the efficacy of a new contraceptive. 20 out of 100 women became pregnant in the village despite using this contraceptive for a period of 2 years continuously. What is the pearl index of this contraceptive?",
    "choices": [
      {
        "id": 1,
        "text": "0.1 per HWY"
      },
      {
        "id": 2,
        "text": "5 per HWY"
      },
      {
        "id": 3,
        "text": "10 per HWY"
      },
      {
        "id": 4,
        "text": "1000 per HWY"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given scenario,<strong>\u00a0</strong>the <strong>pearl index</strong> is <strong>10 per HWY</strong>.</p>\n<p>Here, the total number of <strong>accidental pregnancies</strong> is <strong>20</strong>.\u00a0The total <strong>months of exposure</strong> are <strong>24</strong> months for <strong>each woman</strong>.</p>\n<p>Hence, the <strong>total months of exposure</strong> for <strong>100 women</strong> are 24 x 100 = <strong>2400</strong>.</p>\n<p><strong>Pearl index </strong>= Total accidental pregnancies x 1200/ Total months of exposure\u00a0</p>\n<p>Hence, pearl index= 20 x 1200/2400 = <strong>10 per HWY</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not one of the duties of the WHO?",
    "choices": [
      {
        "id": 1,
        "text": "Family health"
      },
      {
        "id": 2,
        "text": "Health literature and information"
      },
      {
        "id": 3,
        "text": "Biomedical research"
      },
      {
        "id": 4,
        "text": "State health"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>State health</strong> is not one of the duties of the WHO. It is the<strong> responsibility of</strong> the <strong>government</strong>.</p>\n<p><strong>Work </strong>and<strong> duties </strong>of the<strong> WHO</strong>:</p>\n<ul>\n<li>Prevention and control of specific diseases</li>\n<li>Development of comprehensive health services</li>\n<li><strong>Family health</strong></li>\n<li>Environmental health</li>\n<li>Health statistics</li>\n<li><strong>Biomedical research</strong></li>\n<li><strong>Health literature</strong> and information</li>\n<li>Cooperation with other organizations</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is potential support ratio?",
    "choices": [
      {
        "id": 1,
        "text": "Number of persons aged 15 to 64 per child below 15 years or less"
      },
      {
        "id": 2,
        "text": "Number of persons aged 15 to 64 per older person aged 65 or more"
      },
      {
        "id": 3,
        "text": "Number of persons aged 15 to 64 per each older person aged >65 and younger person aged < 15"
      },
      {
        "id": 4,
        "text": "Number of persons aged 15 to 64 per each older person aged > 60 and younger person aged <15"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>potential support ratio</strong> is the number of <strong>persons aged 15 to 64</strong> <strong>per</strong> one older <strong>person</strong> aged <strong>65 or more</strong>. It is the inverse of the old-age dependency ratio.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which agency of the UN gives funds for technical assistance and has the following as part of its logo?",
    "choices": [
      {
        "id": 1,
        "text": "UNESCO"
      },
      {
        "id": 2,
        "text": "UNDP"
      },
      {
        "id": 3,
        "text": "UNEP"
      },
      {
        "id": 4,
        "text": "UNHCR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>United Nations Development Programme</strong> (UNDP) is an agency of the UN that gives <strong>funds for technical assistance</strong>.&nbsp;It has the following logo. &nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7ab30052aa0d4713b1b3f3fdd467f852.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aabcf00da9a34a179498f8fa02b016b3x897x1821.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5f23ab5b420e45608887019a5030815cx1280x1058.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d33cdb90fa554639b39cf7a4e8a0ef0ex1280x1306.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4743f09eae46463c811a23da132ce2a7x1280x1434.JPEG"
    ]
  },
  {
    "text": "Millennium Development Goals were based on which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "WHO health records"
      },
      {
        "id": 2,
        "text": "UNICEF health criteria"
      },
      {
        "id": 3,
        "text": "United Nations Millennium Declaration"
      },
      {
        "id": 4,
        "text": "SEARO Millennium Declaration"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Millennium Development Goals were based on the\u00a0<strong>United Nations Millennium Declaration</strong>.\u00a0</p>\n<p>The Millennium Development Goals were eight development goals to be <strong>achieved by 2015</strong> and were established at the turn of the millennium in 2000 by the <strong>UN</strong>.</p>\n<p>It\u00a0came to an end in <strong>December 2015</strong> and was replaced by the <strong>17\u00a0</strong><strong>Sustainable Development Goals (SDGs)</strong>.</p>\n<p>On 1st January 2016, the Sustainable Development Goals of the <strong>2030 agenda\u00a0</strong>officially came into force.</p>\n<p>The <strong>five P's</strong> of the new agenda are:\u00a0</p>\n<ul>\n<li><strong>P</strong>eople</li>\n<li><strong>P</strong>lanet</li>\n<li><strong>P</strong>rosperity</li>\n<li><strong>P</strong>eace</li>\n<li><strong>P</strong>artnership</li>\n</ul>\n<p>The eight\u00a0Millennium Development Goals are:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2de40e746c634bd8b6a5ea9e1be341f8x1280x564.PNG"
    ]
  },
  {
    "text": "Which of the following is incorrect about congenital syphilis?",
    "choices": [
      {
        "id": 1,
        "text": "It can be prevented by procaine penicillin administration"
      },
      {
        "id": 2,
        "text": "Infection of fetus most commonly occurs in the 1st trimester"
      },
      {
        "id": 3,
        "text": "Neurological damage with mental retardation is a serious complication"
      },
      {
        "id": 4,
        "text": "Chances of transmission are lower if mother has late syphilis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The chances of transmission of syphilis during pregnancy is highest<strong>\u00a0after 6th\u00a0month\u00a0</strong>of gestation. It does not occur before the 4<sup>th</sup> month.</p>\n<p>It is routine to test the mother for syphilis in antenatal clinics during her first visit.\u00a0The <strong>chance of infection</strong> of the fetus is\u00a0<strong>higher</strong> when the mother is suffering from <strong>early</strong><strong>\u00a0</strong>(primary or secondary)<strong> syphilis</strong>\u00a0and are lower in case of\u00a0late syphilis. <strong>Neurological damage</strong> with mental retardation is a serious complication of congenital syphilis.\u00a0It can be prevented by<strong> procaine penicillin</strong> administration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding the criteria for an urban Indian city?",
    "choices": [
      {
        "id": 1,
        "text": "Having  5000 or more inhabitants"
      },
      {
        "id": 2,
        "text": "Having a density of 390 persons per square km"
      },
      {
        "id": 3,
        "text": "At least half of the adult male population employed in occupations other than agriculture"
      },
      {
        "id": 4,
        "text": "Having pronounced urban characteristics"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In an urban area, at least <strong>three-fourths</strong> of the<strong> adult male</strong> population are <strong>employed</strong> in <strong>occupations other than agriculture</strong>.</p>\n<p>In the Indian context, the urban&nbsp;areas are places:</p>\n<ul>\n<li>having 5,000 or more inhabitants</li>\n<li>having a density of not less than&nbsp;1,000 persons per square mile or 390 per square kilometer</li>\n<li>having pronounced urban characteristics</li>\n<li>having at least three-fourths of the adult male population employed in pursuits other than agriculture</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A sexually active woman has been using Today sponge as a contraceptive. What does this contain?",
    "choices": [
      {
        "id": 1,
        "text": "Prostaglandin F2"
      },
      {
        "id": 2,
        "text": "Norethisterone"
      },
      {
        "id": 3,
        "text": "9 \u2013 Nonoxynol"
      },
      {
        "id": 4,
        "text": "Levonorgestrel"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Today</strong> is a type of <strong>vaginal sponge</strong> that contains\u00a0<strong>9 \u2013 nonoxynol.</strong></p>\n<p>Today is a barrier contraceptive inserted<strong> vaginally.</strong>\u00a0It has to be left in place for<strong> 6 hours</strong> <strong>after coitus</strong>.\u00a0It can\u00a0lead to <strong>toxic shock\u00a0syndrome</strong><strong>\u00a0</strong>if left in place for <strong>more than 24 hours\u00a0</strong>(rarely).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e1fc89be3e514f2aa831feb65de8a837x1280x1232.JPEG"
    ]
  },
  {
    "text": "All of the following are non-contraceptive benefits of oral contraceptive pills except?",
    "choices": [
      {
        "id": 1,
        "text": "Protection against fibroadenoma"
      },
      {
        "id": 2,
        "text": "Protection against pelvic inflammatory disease"
      },
      {
        "id": 3,
        "text": "Protection against ectopic pregnancy"
      },
      {
        "id": 4,
        "text": "Protection against thyroid dysfunction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Oral contraceptive pills (OCPs) do not confer protection against thyroid dysfunction.</p>\n<p><strong>OCP usage</strong> <strong>can confer protection against:</strong></p>\n<ul>\n<li>Benign breast diseases like <strong>fibroadenoma</strong> and fibrocystic disease</li>\n<li>Ovarian cysts</li>\n<li>Iron-deficiency anemia</li>\n<li><strong>Pelvic inflammatory disease</strong></li>\n<li><strong>Ectopic pregnancy</strong></li>\n<li>Ovarian cancer</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A juvenile delinquent was sentenced by the court to be placed in a center under the care of a doctor and psychiatrist. Which of the following fulfills this requirement?",
    "choices": [
      {
        "id": 1,
        "text": "Borstal"
      },
      {
        "id": 2,
        "text": "Foster home"
      },
      {
        "id": 3,
        "text": "Remand home"
      },
      {
        "id": 4,
        "text": "Shelter home"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>remand home</strong> is an establishment where children are placed under the care of a <strong>doctor</strong>, <strong>psychiatrist</strong>&nbsp;and other trained personnel.</p>\n<p>An <strong>orphanage</strong>&nbsp;or <strong>shelter home</strong> is an institution where children who have <strong>no home or parents</strong> or for some reason can&rsquo;t be cared for are placed.</p>\n<p><strong>Foster homes</strong> are arrangements where a <strong>family</strong> or a <strong>couple</strong> takes care of a child on a <strong>temporary basis</strong>.</p>\n<p><strong>Borstal</strong> is a place that falls between a certified institution and a prison. It is where boys <strong>&gt; 16 years</strong> who have <strong>misbehaved</strong> or are too difficult to handle are sent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which agency of the United Nations has the following logo?",
    "choices": [
      {
        "id": 1,
        "text": "International Labor Organization"
      },
      {
        "id": 2,
        "text": "World Food Programme"
      },
      {
        "id": 3,
        "text": "United States Agency for International Development"
      },
      {
        "id": 4,
        "text": "World Bank"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given logo is of the <strong>World Bank</strong>.</p>\n<p>It helps<strong> less developed countries</strong> raise their living standards with <strong>economic support</strong>. The allocation of funds is decided by its Board of Governors.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a7b1bda86d934112b34f825037ff0d27.GIF"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the denominator used in the formula for calculating the general fertility rate?",
    "choices": [
      {
        "id": 1,
        "text": "Total number of women in the population"
      },
      {
        "id": 2,
        "text": "Mid-year population"
      },
      {
        "id": 3,
        "text": "Mid-year population of women in the reproductive age group"
      },
      {
        "id": 4,
        "text": "Total number of married women in the age group 15 \u2013 45"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The denominator used to calculate the general fertility rate is <strong>mid-year population </strong>of <strong>women</strong> in the<strong> reproductive age</strong> group.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the International Health Regulations, on diagnosing a patient with which of the following diseases is notification not mandatory in all countries?",
    "choices": [
      {
        "id": 1,
        "text": "Cholera"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Yellow fever"
      },
      {
        "id": 4,
        "text": "Smallpox"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>According to the<strong> International Health Regulations</strong>(IHR), notification is not mandatory&nbsp;if a patient is diagnosed with <strong>tuberculosis</strong> in all countries.</p>\n<p>It needs to be<strong> notified</strong> <strong>only</strong> by the <strong>countries</strong> where the <strong>public health impact</strong> is <strong>serious</strong> and there is a risk of international spread.</p>\n<p>The government of <strong>India</strong>&nbsp;made the <strong>reporting</strong> of new cases of <strong>TB mandatory</strong> for all medical practitioners from 2012.&nbsp;An online web-based application named Nikshay is available for this purpose. Treatment providers are given a nominal cash incentive of Rs.1000/- per TB patient reported.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What does the branch of medicine known as nosology deal with?",
    "choices": [
      {
        "id": 1,
        "text": "Cosmetic surgery"
      },
      {
        "id": 2,
        "text": "Religious practices in medicine"
      },
      {
        "id": 3,
        "text": "Prion diseases"
      },
      {
        "id": 4,
        "text": "Classification of diseases"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Nosology </strong>is the branch of medicine that deals with the <strong>classification of diseases.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What was the 2017 target for the cure rate for multibacillary leprosy under the Programme Implementation Plan of NLEP?",
    "choices": [
      {
        "id": 1,
        "text": "> 85%"
      },
      {
        "id": 2,
        "text": "> 80 %"
      },
      {
        "id": 3,
        "text": "> 90%"
      },
      {
        "id": 4,
        "text": "> 95%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The 2017<strong> target for cure rate</strong> for multibacillary leprosy was <strong>&gt;95%.</strong></p>\n<p>The 2016 &ndash; 2017 targets under the<strong> Programme Implementation Plan</strong> of NLEP:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The insect shown below is a vector for a disease that is targetted under the National Vector Borne Disease Control Programme. Identify the disease.",
    "choices": [
      {
        "id": 1,
        "text": "Chikungunya"
      },
      {
        "id": 2,
        "text": "Visceral leishmaniasis"
      },
      {
        "id": 3,
        "text": "Malayan filariasis"
      },
      {
        "id": 4,
        "text": "Japanese encephalitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shown is of the <strong>Culex</strong> species of mosquitoes, which is a <strong>vector</strong> for <strong>Japanese encephalitis</strong> and <strong>Bancroftian filariasis.&nbsp;</strong></p>\n<p><strong>Mansonia</strong> species is the vector for <strong>Malayan filariasis.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/92121144bc174a1aa35b39629c503b64.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is carried out by the Drug Distribution Centres under the National Vector Borne Disease Control Programme for Malaria?",
    "choices": [
      {
        "id": 1,
        "text": "2 and 4"
      },
      {
        "id": 2,
        "text": "2 only"
      },
      {
        "id": 3,
        "text": "1, 2, and 3"
      },
      {
        "id": 4,
        "text": "1, 2, and 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The Drug Distribution Centres are <strong>only for dispensing anti-malarial drugs</strong>, under the National Vector Borne Disease Control Programme (NVBDCP) for Malaria.&nbsp;</p>\n<p>The<strong> organizational structure </strong>for the<strong>&nbsp;</strong>Anti-Malaria Programme is as follows:</p>\n<ul>\n<li><strong>Central</strong> Government: supplies <strong>DDT</strong> and <strong>larvicides</strong>.</li>\n<li><strong>State</strong> government: <strong>procures</strong> the Indoor Residual Sprays (<strong>IRS</strong>) for the districts.</li>\n<li><strong>District Malaria Office</strong>: is the&nbsp;<strong>key unit</strong> for the implementation of the programme.</li>\n<li><strong>District Malaria Officer</strong>: has the direct responsibility of <strong>IRS spraying</strong> operations and is assisted by one Assistant Malaria Officer and Malaria Inspectors.&nbsp;</li>\n<li>Medical officer of the PHC: has the overall responsibility for the surveillance and laboratory services.</li>\n<li>Multi-Purpose Workers and ASHAs: carry out case-based surveillance and case detection in the community.</li>\n<li>Drug Distribution Centres: only for dispensing the antimalarial drugs.</li>\n<li>Fever Treatment Depots: collect blood slides in addition to the distribution of antimalarial drugs.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As the medical officer in a Japanese encephalitis endemic area, which of the following measures would you not advocate for controlling its transmission?",
    "choices": [
      {
        "id": 1,
        "text": "The use of Indoor Residual Sprays"
      },
      {
        "id": 2,
        "text": "The use of larvivorous fishes"
      },
      {
        "id": 3,
        "text": "Keeping pigs away from human dwellings"
      },
      {
        "id": 4,
        "text": "The use of malathion for outdoor fogging"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Indoor Residual Sprays (IRS) are not used in the vector control measures for Japanese Encephalitis (JE) as its vectors (<strong>Culex</strong>) are <strong>outdoor</strong> <strong>resters</strong>.&nbsp;</p>\n<p>Prevention and control of JE include:</p>\n<ul>\n<li><strong>Vaccination</strong></li>\n<li><strong>Keeping pigs away</strong> from human dwellings from dusk to dawn (biting time of the vectors). Pigs act as important <strong>amplifiers</strong> of the virus.</li>\n<li>Use of <strong>bed nets</strong> for personal protection.</li>\n<li>Use of <strong>larvivorous fishes</strong>.</li>\n<li>Using <strong>malathion</strong> for outdoor fogging to control an outbreak.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following measures for controlling malaria is the Urban Malaria Scheme mainly based on?",
    "choices": [
      {
        "id": 1,
        "text": "Measurement of Annual Parasite Index"
      },
      {
        "id": 2,
        "text": "Anti-adult measures"
      },
      {
        "id": 3,
        "text": "Anti-larval measures"
      },
      {
        "id": 4,
        "text": "Active surveillance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>Urban Malaria Scheme</strong> is mainly based on <strong>anti-larval measures</strong> for controlling malaria.&nbsp;In Urban Malaria Scheme, urban areas with a population of <strong>&gt;50,000 </strong>and a <strong>slide positivity rate of &ge;5%</strong>&nbsp;are included.&nbsp;</p>\n<p>The vector in urban areas breeds in <strong>man-made containers</strong>.&nbsp;Therefore, anti-larval measures such as <strong>larvivorous fish and larvicides </strong>are used&nbsp;to control breeding<strong>&nbsp;</strong>as the primary method of vector control.</p>\n<p>In <strong>rural</strong> areas,&nbsp;anti-adult measures, such as Indoor Residual Spray (<strong>IRS</strong>)&nbsp;is the primary method of vector control.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the revised strategy for the eradication of kala-azar, which of the following drugs would you use across all age groups in order to reduce the human reservoir of infection?",
    "choices": [
      {
        "id": 1,
        "text": "Miltefosine"
      },
      {
        "id": 2,
        "text": "Sodium stibogluconate"
      },
      {
        "id": 3,
        "text": "Liposomal amphotericin B"
      },
      {
        "id": 4,
        "text": "Ivermectin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>single</strong> <strong>dose</strong> of intravenous treatment with <strong>liposomal amphotericin B</strong>&nbsp;is used across all age groups in order to&nbsp;reduce the human reservoir of infection. WHO will supply this drug free of cost.&nbsp;</p>\n<p><strong>Drugs for Kala Azar:</strong></p>\n<ul>\n<li>Single-dose intravenous liposomal amphotericin B for all age groups and for pregnant and HIV co-infected patients.</li>\n<li><strong>Miltefosine-&nbsp;</strong>an&nbsp;oral drug, once daily&nbsp;for 28 days. Contraindicated during pregnancy, lactation, and in women who refuse contraception.</li>\n<li>Combination of <strong>miltefosine</strong> capsules with <strong>paromomycin</strong> i.m, for 10 days. Contraindications are the same as miltefosine.</li>\n<li>The&nbsp;drug of choice for Post Kala-Azar Dermal Leishmaniasis (<strong>PKDL</strong>) is&nbsp;<strong>miltefosine&nbsp;</strong>100mg orally per day for 12 weeks.</li>\n</ul>\n<p><strong>Ivermectin</strong> is used for lymphatic <strong>filariasis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Select the correct option regarding Intergrated Vector Management:",
    "choices": [
      {
        "id": 1,
        "text": "Malathion is the insecticide of choice used for vector management"
      },
      {
        "id": 2,
        "text": "Larvivorous fish and larvicides are the main methods of vector control in rural areas"
      },
      {
        "id": 3,
        "text": "Long Lasting Insecticide Nets are provided in areas with API\u00a0\u22655"
      },
      {
        "id": 4,
        "text": "Insecticide treated bed nets are supplied in areas with API\u00a0\u22653"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Under the Integrated Vector Management initiative, Long Lasting Insecticide Nets (<strong>LLIN</strong>) are provided in areas with Annual Parasite Index (<strong>API</strong>) <strong>\u22655</strong>.</p>\n<p><strong>Integrated Vector Management</strong> <strong>(IVM):</strong></p>\n<ul>\n<li><strong>For adult mosquitoes:</strong>\n<ul>\n<li>Indoor Residual Sprays (<strong>IRS</strong>) are used as the main method of vector control in <strong>rural</strong> areas. The<strong> insecticide of choice</strong> will be the insecticide to which the local vector is susceptible as per the best available information.\u00a0</li>\n<li>Two rounds of spraying are done with DDT, and in DDT resistant areas, three rounds of spraying are done with malathion.</li>\n</ul>\n</li>\n<li><strong>For larvae:\u00a0</strong>\n<ul>\n<li>Larvivorous fish and larvicides are used.\u00a0This is the main method of vector control in <strong>urban</strong> areas.</li>\n</ul>\n</li>\n<li><strong>For personal protection:</strong>\u00a0\n<ul>\n<li>Insecticide-treated bed nets are supplied in areas with Annual Parasite Index (<strong>API</strong>)\u00a0<strong>\u22652</strong>.</li>\n<li>Long-Lasting Insecticide Nets (LLIN) are provided in areas with API\u00a0\u22655.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are working as a medical officer in a PHC where you diagnose a patient with TB. Within how many days do you have to report it to the District Health Officer?",
    "choices": [
      {
        "id": 1,
        "text": "7 days"
      },
      {
        "id": 2,
        "text": "15 days"
      },
      {
        "id": 3,
        "text": "30 days"
      },
      {
        "id": 4,
        "text": "21 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The guidelines for TB notification under the RNTCP is within <strong>30 days</strong> (a month) of receiving a new case. The notification must be done to the <strong>District Health Officer</strong> or the Chief Medical Officer of a District Hospital by the&nbsp;practitioner who diagnosed it.</p>\n<p>Note: RNTCP has now been renamed to National Tuberculosis Elimination Program (<strong>NTEP</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A rural medical officer implements Integrated Vector Management in his village. Which of the following measures of vector control would you prefer in a rural area?",
    "choices": [
      {
        "id": 1,
        "text": "Source reduction"
      },
      {
        "id": 2,
        "text": "Indoor residual spray (IRS)"
      },
      {
        "id": 3,
        "text": "Biological control using gambusia affinis"
      },
      {
        "id": 4,
        "text": "Chemical control using mineral oils"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The measure of vector control preferred for <strong>rural areas</strong> is\u00a0<strong>indoor residual spray</strong> (IRS).</p>\n<p>Under integrated vector management (IVM), the\u00a0preferred measures of vector control for</p>\n<ul>\n<li><strong>Rural</strong> areas include:\u00a0<strong>Anti-adult </strong>measures, using <strong>indoor residual spray</strong> (IRS)</li>\n<li><strong>Urban</strong> areas include:\u00a0<strong>Anti-larval </strong>measures, like\u00a0<strong>environmental control</strong>\u00a0by\u00a0<strong>source reduction</strong>, chemical control (<strong>mineral oils</strong>, Paris<strong>\u00a0</strong>green, synthetic insecticides, etc.), and\u00a0<strong>biological control </strong>(fish species\u00a0<strong>Gambusia affinis</strong>\u00a0and\u00a0<strong>Lebistes reticulatus</strong>\u00a0which feed on mosquito larvae).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with leprosy, who has completed a course of multi-drug therapy, presents with complaints of developing painful, tender, and raised lesions on his forehead recently as shown in the image below. What is the first-line treatment for him?",
    "choices": [
      {
        "id": 1,
        "text": "Restart multi drug therapy and start thalidomide"
      },
      {
        "id": 2,
        "text": "Restart multi drug therapy and start prednisolone"
      },
      {
        "id": 3,
        "text": "Start on clofazimine only"
      },
      {
        "id": 4,
        "text": "Start on prednisolone only"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The presence of <strong>new</strong> <strong>erythematous</strong> and <strong>tender</strong> subcutaneous <strong>nodules</strong> in a patient with leprosy indicates that he has developed <strong>type II lepra reaction.\u00a0</strong>It is also known as <strong>Erythema Nodosum Leprosum (ENL)\u00a0</strong>and the first line of treatment is <strong>prednisolone</strong>.</p>\n<p>Multi-drug therapy <strong>(MDT) should not be restarted</strong> in patients who develop lepra reactions after the completion of treatment.</p>\n<p>Prednisolone is started at a dose of 40 mg per day and gradually tapered by 5 mg every 2 weeks. 'Prednisolone card' is given when treatment is started.\u00a0If the patient becomes <strong>steroid-dependent</strong>, then\u00a0<strong>clofazimine</strong> is added.</p>\n<p>The\u00a0<strong> key targets</strong> of the Global Leprosy Strategy <strong>2021-2023</strong> announced by WHO (Accelerating towards a leprosy-free world) are:</p>\n<ul>\n<li>120 countries reporting zero new autochthonous cases.</li>\n<li>70% reduction in the annual number of new cases detected.</li>\n<li>90% reduction in rate per million population of new cases with Grade 2 disability.</li>\n<li>90% reduction in rate per million children of new child cases with leprosy.</li>\n</ul>\n<p>The current goal is the elimination of leprosy. </p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/72150c3fc1eb478f82fd07f89f059d6f.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient on HAART presents with complaints of fever and expectorant cough for two weeks. What is the investigation to be ordered first?",
    "choices": [
      {
        "id": 1,
        "text": "Sputum microscopy"
      },
      {
        "id": 2,
        "text": "Interferon Gamma Release Assay"
      },
      {
        "id": 3,
        "text": "CB- NAAT"
      },
      {
        "id": 4,
        "text": "Sputum microscopy and Chest X-ray"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>An <strong>HIV</strong> patient <strong>suspected</strong> to have <strong>TB</strong> is directly investigated by <strong>CB-NAAT</strong> (Cartridge Based Nucleic Acid Amplification Test).</p>\n<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;This is recent update in PSM. TB is a very serious infection in the immunocompromised and can lead to its most severe form as Miliary TB and lead to death of the patient. Since TB in HIV doesn't have its typical presentation, early suspicion and advanced diagnosis is the key to prevent mortality.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:[null,0],&quot;11&quot;:4,&quot;12&quot;:0}\">TB is a very serious infection in the immunocompromised and can lead to its most severe form as <strong>miliary TB</strong> and cause death. Since TB in HIV does not have its typical presentation, early suspicion and advanced diagnosis is the key to preventing mortality.</span></p>\n<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;This is recent update in PSM. TB is a very serious infection in the immunocompromised and can lead to its most severe form as Miliary TB and lead to death of the patient. Since TB in HIV doesn't have its typical presentation, early suspicion and advanced diagnosis is the key to prevent mortality.&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:769,&quot;3&quot;:[null,0],&quot;11&quot;:4,&quot;12&quot;:0}\">Diagnostic algorithm for TB:</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ca905a544a0e457bb001e3ece1387935x1280x2207.JPEG"
    ]
  },
  {
    "text": "Which of the following is correct about the classification of malaria endemic states under the National Strategic Plan for Malaria?",
    "choices": [
      {
        "id": 1,
        "text": "The states classified under Category 0  are in the elimination phase"
      },
      {
        "id": 2,
        "text": "The states with API <1 and all their districts reporting API <1 are in the elimination phase"
      },
      {
        "id": 3,
        "text": "The states with districts reporting API in between 1-2 per 1000 population are in the elimination phase"
      },
      {
        "id": 4,
        "text": "The states classified under category 2 are in the phase of intensified control"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The National Strategic Plan for Malaria classifies the states under <strong>Category 1</strong> of the NVBDCP to be in the <strong>elimination</strong> <strong>phase</strong>.&nbsp;</p>\n<p>Category 1 states are all states/UTs with<strong> API &lt;1</strong> and all their districts reporting API &lt;1.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Choose the false statement regarding the initiatives and strategies for tuberculosis.",
    "choices": [
      {
        "id": 1,
        "text": "The Stop TB strategy was announced by the World Health Organisation"
      },
      {
        "id": 2,
        "text": "The STOP TB strategy has a target of ending TB by achieving an  incidence rate of <10 people per 10,000 population per year"
      },
      {
        "id": 3,
        "text": "The \"Practical approach to lung health\" was launched by the WHO for syndromic managment of patients with respiratory symptoms"
      },
      {
        "id": 4,
        "text": "The End TB strategy is a 20 year programme"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Stop TB</strong> strategy was announced by World Health Organisation to <strong>reduce</strong> the global burden of TB by 2015 (and not ending TB).&nbsp;</p>\n<p>The<strong>&nbsp;End TB</strong>&nbsp;strategy is a <strong>20-year</strong> programme with&nbsp;tagline &ldquo;A world free of TB - Zero TB deaths, Zero TB disease, and Zero TB suffering&rdquo;. It aims to:</p>\n<ul>\n<li>end TB by achieving an incidence rate of <strong>&lt;10 people/1 lakh population per year&nbsp;by 2035.&nbsp;</strong></li>\n<li>reduce TB <strong>deaths by 95%</strong> and cut <strong>new cases by 90%</strong> by 2035.</li>\n</ul>\n<p>&nbsp;The \"<strong>Practical approach to lung health initiative</strong>\" was launched by the <strong>WHO</strong> as a <strong>syndromic approach</strong> to the management of patients who attend primary health care services for respiratory symptoms.</p>\n<p>Ending the TB epidemic is also one of the targets of the Sustainable Development Goals (SDG) specifically under Goal 3 (to &ldquo;ensure healthy lives and promote well-being for all at all ages&rdquo;).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following group of individuals would you not target under the programme represented by the logo shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Sex workers"
      },
      {
        "id": 2,
        "text": "Migrants"
      },
      {
        "id": 3,
        "text": "Transgenders"
      },
      {
        "id": 4,
        "text": "Industrial workers"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>red ribbon&nbsp;</strong>shown is a part of the logo of the&nbsp;<strong>National AIDS Control Organization (NACO) programme.&nbsp;</strong>Industrial workers are not included in the target population under NACO.</p>\n<p><strong>Target interventions</strong>&nbsp;for the control of AIDS transmission are done for:</p>\n<ul>\n<li>High-risk groups like <strong>sex workers</strong></li>\n<li><strong>Men who have sex with men</strong></li>\n<li><strong>Transgender</strong></li>\n<li>Injecting drug users</li>\n<li><strong>Bridge population</strong> like migrants and long-distance truckers</li>\n</ul>\n<p>The services offered through targeted interventions include <strong>detection</strong> and <strong>treatment</strong> for sexually transmitted diseases and condom distribution.</p>\n<p>The <strong>logo</strong> of NACO:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5d95baebd5bd4af69a3fa855a1012849.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d584cf3d81344b64a0fcb59696537670x537x245.PNG"
    ]
  },
  {
    "text": "Which of the following statements is false regarding the target interventions under National AIDS Control Organisation?",
    "choices": [
      {
        "id": 1,
        "text": "Lubricants are given to  homosexual men"
      },
      {
        "id": 2,
        "text": "Clean needles and syringes are given to injecting drug users"
      },
      {
        "id": 3,
        "text": "Condoms are not given to bridge population"
      },
      {
        "id": 4,
        "text": "Opioid substitution therapy is given to Injecting Drug Users"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Bridge populations <strong>are supplied with condoms</strong> under the NACO target interventions.\u00a0</p>\n<p><strong>Target interventions:\u00a0</strong></p>\n<p>General:</p>\n<ul>\n<li>Detection and treatment for sexually transmitted diseases</li>\n<li>Condom distribution</li>\n</ul>\n<p><strong>For injecting drug users:</strong></p>\n<ul>\n<li><strong>Distribution of clean needles and syringes.</strong></li>\n<li>Abscess prevention and management.</li>\n<li>Opioid substitution therapy.</li>\n<li>Linkage with detoxification and rehabilitation services.</li>\n</ul>\n<p><strong>For homosexual men and transgenders:</strong></p>\n<ul>\n<li>Provision of lubricants.</li>\n<li>Provision of project-based clinics for sexually transmitted infections.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most peripheral centre under the Revised National Tuberculosis Control Programme organization structure?",
    "choices": [
      {
        "id": 1,
        "text": "District TB centre"
      },
      {
        "id": 2,
        "text": "Intermediate Reference Laboratory"
      },
      {
        "id": 3,
        "text": "Tuberculosis Unit"
      },
      {
        "id": 4,
        "text": "Designated Microscopy Centre"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the options given, <strong>Designated Microscopy Centre</strong>\u00a0is the most peripheral centre.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cc45443a1d044860a9be5b4cb6edf627x783x885.JPEG"
    ]
  },
  {
    "text": "A physician follows the two test protocol for the diagnosis of HIV in a patient. It consists of:",
    "choices": [
      {
        "id": 1,
        "text": "Western blot as the first test"
      },
      {
        "id": 2,
        "text": "Line immunoassay as the second test"
      },
      {
        "id": 3,
        "text": "HIV ELISA as the second test"
      },
      {
        "id": 4,
        "text": "Western blot  as the second test"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>two test protocol</strong> for the diagnosis of HIV consists of <strong>ELISA as the second test</strong>. If the initial ELISA is positive, a second ELISA is carried out. If the <strong>second ELISA</strong> is also <strong>positive</strong>, only then the <strong>case</strong> is reported to be <strong>positive</strong>.</p>\n<p>Investigations involved in HIV testing strategies:</p>\n<ol>\n<li>ELISA/ rapid tests.</li>\n<li>Confirmatory tests with high specificity like <strong>western blot</strong>\u00a0and <strong>line immunoassays</strong> are used in problem cases eg: indeterminate/ discordant cases of rapid tests.</li>\n</ol>\n<p>In\u00a0India,\u00a0NACO\u00a0provides\u00a0<strong>western blot\u00a0</strong>(WB) confirmatory\u00a0testing\u00a0<strong>only to resolve indeterminate results</strong>\u00a0on previous serological testing. It is\u00a0<strong>not </strong>used <strong>for routine confirmation</strong>\u00a0after a positive result on\u00a0screening\u00a0tests. Drawbacks of WB include\u00a0low rates of detection during<strong> acute HIV</strong>\u00a0infection and\u00a0<strong>misclassification of HIV-2 </strong>infection.</p>\n<p><strong>Note</strong>: The western blot is used as a confirmatory test after 2 indeterminate primary tests (ELISA). It is essentially the third test used and does not fit into the two test protocol.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As a medical officer involved in the sentinel surveillance for HIV under the National AIDS Control Programme, your duties include all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Estimation of total infection in the community"
      },
      {
        "id": 2,
        "text": "Estimation of total cases in hospitals"
      },
      {
        "id": 3,
        "text": "Estimation of trend of disease"
      },
      {
        "id": 4,
        "text": "Classification of districts"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>As a medical officer involved in the sentinel surveillance, the <strong>estimation of total cases</strong> in hospitals is <strong>not included</strong> in the sentinel surveillance for HIV under National AIDS Control Programme (NACO).</p>\n<p>The aims of the <strong>HIV sentinel surveillance</strong> include:</p>\n<ul>\n<li>Determine the level of HIV infection in the community.</li>\n<li>Understand the trends of HIV epidemic.</li>\n<li>Understand the geographical spread of HIV infection and classify districts according to epidemiological and vulnerability criteria.</li>\n</ul>\n<p>These objectives are achieved by conducting <strong>annual cross-sectional surveys</strong> of the risk group in the same geographical place.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with leprosy comes to the PHC following a pinprick to his foot. He noticed it only after seeing bloodstains on the floor and complains of loss of sensation in his foot. After addressing the issue, the patient is referred to another centre. Where has he been referred to and why?",
    "choices": [
      {
        "id": 1,
        "text": "For secondary prevention to a district hospital."
      },
      {
        "id": 2,
        "text": "For tertiary prevention to a district hospital."
      },
      {
        "id": 3,
        "text": "For secondary prevention to a district nucleus."
      },
      {
        "id": 4,
        "text": "For tertiary prevention to a district nucleus."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario of a patient with leprosy having <strong>neuropathy</strong> needs <strong>Micro Cellular Rubber (MCR) footwear</strong>, which is a form of <strong>tertiary</strong> <strong>prevention</strong>. He is to be referred to a <strong>district</strong>&nbsp;<strong>nucleus</strong> which supplies MCR footwear to patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e295da1bf594a7e9d1e226e9d6a8c0cx1280x2560.JPEG"
    ]
  },
  {
    "text": "Before initiating treatment for a sputum-positive TB patient, the physician orders for Cartridge Based Nucleic Acid Amplification Test in order to test for drug resistance. Which anti-tubercular drug resistance is he checking for?",
    "choices": [
      {
        "id": 1,
        "text": "Isoniazid"
      },
      {
        "id": 2,
        "text": "Rifampicin"
      },
      {
        "id": 3,
        "text": "Pyrazinamide"
      },
      {
        "id": 4,
        "text": "Ethambutol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The Cartridge Based-Nucleic Acid Amplification Test (<strong>CBNAAT</strong>) is a molecular test for tuberculosis that detects the&nbsp;DNA of tubercle bacilli <strong>within 2 hours</strong> and mutations in the <strong>rpoB</strong> <strong>gene</strong> responsible for&nbsp;<strong>rifampicin resistance.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following two diagnostic techniques (A) and (B) were performed in a medical camp conducted for diagnosing malaria. Which is a true statement regarding these techniques?",
    "choices": [
      {
        "id": 1,
        "text": "Image (A) - It is used for identifying the species of the malarial parasite"
      },
      {
        "id": 2,
        "text": "Image (A) - It is not the established method of choice for diagnosing malaria in urban areas"
      },
      {
        "id": 3,
        "text": "Image (B) - Antibody detection by this test is the method of choice for diagnosing malaria in inaccessible and tribal areas"
      },
      {
        "id": 4,
        "text": "Image (B) - Bivalent type of this test was used for detecting Plasmodium falciparum and Plasmodium vivax"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Image (<strong>A</strong>) is a <strong>thick</strong> <strong>blood</strong> <strong>smear</strong> and Image (<strong>B</strong>) is the Rapid Diagnostic Test (<strong>RDT</strong>). Bivalent RDTs detect <em>P. falciparum </em>and<em> P. vivax</em>.</p>\n<p><strong>Thin</strong> blood smear is used to identify the particular infecting <strong>species</strong>. <strong>Thick</strong> blood smear is used to <strong>detect</strong>\u00a0<strong>infection</strong> and estimate <strong>parasite</strong> <strong>concentration</strong>.</p>\n<p><strong>Antibody detecting </strong>Rapid Diagnostic Tests<strong>\u00a0</strong>(<strong>RDTs</strong>)\u00a0are <strong>not </strong>the method of choice anymore in diagnosing malaria in inaccessible and tribal areas.\u00a0The<strong> Antigen detecting RDTs </strong>and<strong> blood smear </strong>examination are the\u00a0<strong>recommended\u00a0</strong>methods<strong>\u00a0</strong>for diagnosis of malaria.</p>\n<p><strong>Note</strong>: According to the announcement by Union Health Ministry in April 2018, <strong>antibody</strong> <strong>detecting</strong> Rapid Diagnostic Tests (<strong>RDTs</strong>) for malaria is banned due\u00a0to the<strong> high false-positive rates</strong>\u00a0in endemic areas.</p>\n<p>Malaria Antigen detecting Rapid Diagnostic Test kit:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e6b81a89dff48599955f9fcc8915db5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c66b1ac9f4984d14974e769ef7234840x500x500.JPEG"
    ]
  }
];
        let quizName = 'Community Medicine Test Ii (International And Indian Health, Maternal And Child Health, And Demography, Nutrition And Occupational Health)';
        const quizFilename = 'community-medicine-test-ii-international-and-indian-health-maternal-and-child-health-and-demography-nutrition-and-occupational-health-802b2cb1.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>