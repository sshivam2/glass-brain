<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obg St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Modified BPS consists of ?",
    "choices": [
      {
        "id": 1,
        "text": "NST with AFI"
      },
      {
        "id": 2,
        "text": "NST with fetal breathing"
      },
      {
        "id": 3,
        "text": "NST with fetal movement"
      },
      {
        "id": 4,
        "text": "NST with fetal tone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Modified Biophysical Score:</strong></p>\n<p>Only 2 parameters are included in biophysical score that are <strong>NST and AFI.</strong>&nbsp;</p>\n<p><strong>Biophysical score(BPS)/ Manning score:</strong></p>\n<ul>\n<li>It consists of <strong>5 variables</strong>.</li>\n<li>Parameters are observed for a period of&nbsp; <strong>30 mins</strong>.</li>\n<li>Each parameter has a <strong>maximum score of 2</strong> and <strong>minimum score of 0.</strong></li>\n<li>So the total maximum score will be 10.</li>\n</ul>\n<table style=\"width: 362.6px;\">\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 132px;\"><strong>Parameter</strong></td>\n<td style=\"height: 13px; width: 225.6px;\"><strong>Normal criteria of score 2</strong></td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 132px;\">Non stress test</td>\n<td style=\"height: 13px; width: 225.6px;\">Reactive pattern</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 132px;\">Fetal breathing movements</td>\n<td style=\"height: 13px; width: 225.6px;\">&ge;1 episode lasting&nbsp; &gt; 30 second</td>\n</tr>\n<tr style=\"height: 13.6px;\">\n<td style=\"height: 13.6px; width: 132px;\">Gross body movements</td>\n<td style=\"height: 13.6px; width: 225.6px;\">&ge;3 discrete body/limb movements</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 132px;\">Fetal muscle tone</td>\n<td style=\"height: 13px; width: 225.6px;\">&ge;1 episode of active extension (limb or trunk) with return of flexion; opening and closing of hand, considered normal</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px; width: 132px;\">Amniotic fluid</td>\n<td style=\"height: 13px; width: 225.6px;\">&ge;1 pocket measuring 2 cm in two perpendicular planes (2 &times; 2 cm pocket)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Blood flow in the inter-villous space at term is?",
    "choices": [
      {
        "id": 1,
        "text": "150- 250 ml/min"
      },
      {
        "id": 2,
        "text": "200 \u2013 300 ml/min"
      },
      {
        "id": 3,
        "text": "350- 450 ml/min"
      },
      {
        "id": 4,
        "text": "500-600 ml/min"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Blood flow in the inter-villous space at term is 500-600ml/min.</strong></p>\n<p></p>\n<table>\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Blood flow in inter villous space at term</td>\n<td style=\"height: 13px;\">500-600 mL/min</td>\n</tr>\n<tr style=\"height: 13.2px;\">\n<td style=\"height: 13.2px;\">Nonpregnant uterine blood flow</td>\n<td style=\"height: 13.2px;\">50 mL/min</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Volume of blood in mature placenta</td>\n<td style=\"height: 13px;\">500 mL</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Volume of blood in inter villous space</td>\n<td style=\"height: 13px;\">150 mL</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Peak level of plasma progesterone  in the luteal phase",
    "choices": [
      {
        "id": 1,
        "text": "5ng/ml"
      },
      {
        "id": 2,
        "text": "10ng/ml"
      },
      {
        "id": 3,
        "text": "15ng/ml"
      },
      {
        "id": 4,
        "text": "20ng/ml"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Serum value of progesterone is less than 1 ng/ mL in follicular phase and <strong>5&ndash;15 ng/mL in midluteal phase.</strong></p>\n<p>So peak level of &nbsp;plasma progesterone in luteal phase is 15 ng/ml.</p>\n<table>\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Hormone</td>\n<td style=\"height: 13px;\">Folllicular phase</td>\n<td style=\"height: 13px;\">At ovulation</td>\n<td style=\"height: 13px;\">Luteal phase</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Estradiol (pg/mL)</td>\n<td style=\"height: 13px;\">50</td>\n<td style=\"height: 13px;\">300-600</td>\n<td style=\"height: 13px;\">150-200</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">Progesterone (ng/mL)</td>\n<td style=\"height: 13px;\">&lt;1</td>\n<td style=\"height: 13px;\">&nbsp;</td>\n<td style=\"height: 13px;\">5-15</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">FSH (mIU/mL)</td>\n<td style=\"height: 13px;\">10</td>\n<td style=\"height: 13px;\">15-20</td>\n<td style=\"height: 13px;\">10</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"height: 13px;\">LH (mIU/mL)</td>\n<td style=\"height: 13px;\">5</td>\n<td style=\"height: 13px;\">60</td>\n<td style=\"height: 13px;\">5</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "On doing P/V examination of a women about to deliver, anterior fontanelle and supra orbital ridge are palpable. Which among the following will be the engaging diameter of this presentation?",
    "choices": [
      {
        "id": 1,
        "text": "B"
      },
      {
        "id": 2,
        "text": "D"
      },
      {
        "id": 3,
        "text": "A"
      },
      {
        "id": 4,
        "text": "C"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>In the given question the palpable part in P/V&nbsp; of a multiparous woman are supraorbital ridge and anterior fontanelle, then it represents <strong>Brow presentation</strong>.</li>\n<li>The engaging diameter in brow presentation is <strong>Mento vertical, </strong>which is about <strong>13.5-14 cm.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ff8f897bc6d641adac83522fef2f8a04.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ca75a78fd2474787b824bffc8a622889x269x220.PNG"
    ]
  },
  {
    "text": "HSG findings in tubercular salpingitis are all except?",
    "choices": [
      {
        "id": 1,
        "text": "Tobacco pouch appearanc"
      },
      {
        "id": 2,
        "text": "Beaded appearance"
      },
      {
        "id": 3,
        "text": "Lead pipe appearance"
      },
      {
        "id": 4,
        "text": "Powder burn appearance"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Powder</strong> <strong>burn appearance is seen in endometriosis</strong>, not in tuberculosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The sign seen in the USG image given is seen in ?",
    "choices": [
      {
        "id": 1,
        "text": "Intra uterine death"
      },
      {
        "id": 2,
        "text": "Premature"
      },
      {
        "id": 3,
        "text": "Post dated"
      },
      {
        "id": 4,
        "text": "Live born"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image represents <strong>Spalding sign</strong> which is seen in <strong>Intra uterine death</strong></p>\n<p><strong>Spalding sign :</strong></p>\n<p>The irregular <strong>overlapping&nbsp; of the cranial bones on one another</strong> is due to&nbsp; liquefaction of the brain matter and softening of the ligamentous structures supporting the vault. <strong>It usually appears 7 days after death.</strong></p>\n<p>Other signs seen in IUD:</p>\n<ul>\n<li><strong>Robert&rsquo;s sign</strong>- Gas in great vessels of fetus- After 12 hours of death</li>\n<li><strong>Ball sign</strong>- Hyperflexion / hyperextension of spine- After 3-4 weeks of death</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/239fa0f5247d47eeaf239c139fcc5e70.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "True about Stein\u2013Leventhal syndrome are all except:",
    "choices": [
      {
        "id": 1,
        "text": "Oligomenorrhoea and amenorrhea"
      },
      {
        "id": 2,
        "text": "Innumerate cysts in ovary"
      },
      {
        "id": 3,
        "text": "BRCA1 associated"
      },
      {
        "id": 4,
        "text": "Theca cell hypertrophy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Stein-Leventhal syndrome </strong>is<strong> not associated</strong> with<strong> BRCA1.</strong></p>\n<p><strong>Polycystic Ovarian Disease:</strong></p>\n<ul>\n<li>Also called <strong>Stein-Leventhal syndrome</strong>.</li>\n<li>It is seen in young females of the age group <strong>15-25 years mainly.</strong></li>\n<li><strong>Enlarged ovary</strong> with <strong>thickened tunica albuginea </strong>and associated with <strong>theca cell hypertrophy </strong>and <strong>multiple follicular cysts </strong>on the ovarian surface<strong>.</strong></li>\n</ul>\n<p><strong>Endocrinological changes </strong>are as follows:</p>\n<ul>\n<li><strong>E2/E1 is reduced</strong>.</li>\n<li>FSH/LH ratio falls. (LH level is raised over 10 IU/mL).</li>\n<li>SHBG level falls due to hyperandrogenism.</li>\n<li><strong>Fasting blood glucose/fasting insulin, 4.5 </strong>suggests insulin resistance.</li>\n<li>Raised Triglyceride level.</li>\n<li>Thyroid function tests may be abnormal (hypothyroidism).</li>\n</ul>\n<p>Two of the following three criteria are required:</p>\n<ul>\n<li>Oligo/amenorrhoea, anovulation</li>\n<li>Hyperandrogenism</li>\n<ul>\n<li>clinical (hirsutism or less commonly male pattern alopecia) or</li>\n<li>biochemical (raised FAI or free testosterone)</li>\n</ul>\n<li>Polycystic ovaries on ultrasound</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The maneuver given in the image below is ?",
    "choices": [
      {
        "id": 1,
        "text": "Ritgen maneuver"
      },
      {
        "id": 2,
        "text": "Prague maneuver"
      },
      {
        "id": 3,
        "text": "Bracht maneuver"
      },
      {
        "id": 4,
        "text": "Lovset\u2019s maneuver"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image represents Ritgen&rsquo;s maneuver.</p>\n<p><strong>Ritgen&rsquo;s maneuver:</strong></p>\n<ul>\n<li>Delivery&nbsp;of&nbsp;a&nbsp;child's&nbsp;head&nbsp;by&nbsp;pressure&nbsp;on&nbsp;the&nbsp;perineum&nbsp;while&nbsp;controlling&nbsp;the&nbsp;speed of delivery&nbsp;by&nbsp;pressure&nbsp;with&nbsp;the other&nbsp;hand&nbsp;on&nbsp;the&nbsp;head.</li>\n<li>Gloved hand is used to exert pressure on the chin of the fetus through the perineum just in front of the coccyx allows controlled delivery of fetal head and favours extension of the fetal head.</li>\n<li>This is done in cases of normal vaginal delivery.</li>\n</ul>\n<p><strong>Modified Ritgen maneuver:</strong></p>\n<p>Moderate upward pressure is applied to the fetal chin by the posterior hand covered with a sterile towel, while the suboccipital region of the fetal head is held against the symphysis.</p>\n<p>Prague , Bracht and loveset&rsquo;s maneuver are used in breech delivery.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8077145a4ea640fc8d0bbbc550973c32.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "In testicular feminization syndrome:",
    "choices": [
      {
        "id": 1,
        "text": "Menstruation is scanty and infrequent"
      },
      {
        "id": 2,
        "text": "Buccal smear is chromatin positive"
      },
      {
        "id": 3,
        "text": "Normal breast size is observed"
      },
      {
        "id": 4,
        "text": "Streak gonads are seen"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Testicular feminization syndrome is associated with <strong>normal breast development.</strong></p>\n<p><strong>Testicular feminization syndrome:</strong></p>\n<ul>\n<li>The condition is inherited as a <strong>X-linked recessive</strong> gene.</li>\n<li>The underlying pathology is the inability of the end organs to respond to androgens.</li>\n<li>Usually presents with <strong>primary amenorrhea</strong> and or infertility.</li>\n<li>They are phenotypically and psychologically female.</li>\n<li><strong>Breast development is adequate</strong>.</li>\n<li>There is <strong>eunuchoidal</strong> tendency (long arms, big hands and feet).</li>\n<li><strong>Absent or sparse axillary and pubic hair.</strong></li>\n<li><strong>External genitalia looks female.</strong></li>\n<li><strong>Vagina is short and blind</strong> .The upper two-thirds of vagina, uterus and tubes are absent due to the effect of AMH. <strong>The gonads (Sertoli cells) secrete AMH (Anti-M&uuml;llerian hormone).</strong></li>\n<li><strong>Gonads (testes)</strong> are either placed in the labia, or inguinal canal or intra-abdominal</li>\n<li><strong>Investigation:</strong>\n<ul>\n<li><strong>Sex chromatin is negative.</strong></li>\n<li><strong>Karyotype is 46, <strong>XY</strong>.</strong></li>\n<li>Confirmation of diagnosis is by <strong>gonadal biopsy&nbsp;</strong><strong>-</strong>\n<ul>\n<li>Seminiferous tubules are small, hyalinized.</li>\n<li>Spermatogenesis is absent.</li>\n<li>Leydig cells and Sertoli cells are normal.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true regarding the image given below?",
    "choices": [
      {
        "id": 1,
        "text": "Associated with obliteration of small muscular arteries in placental tertiary villi"
      },
      {
        "id": 2,
        "text": "Continue pregnancy till term"
      },
      {
        "id": 3,
        "text": "Terminate immediately"
      },
      {
        "id": 4,
        "text": "Indicates reversal of end diastolic blood flow"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The image indicates <strong>reversal of end diastolic flow in Doppler of uterine artery.</strong></li>\n<li><strong>Pregnancy should be terminated in that case</strong> not to be continued till term.</li>\n<li>Reversal of end-diastolic flow has been associated with greater than 70-percent obliteration of the small muscular arteries in placental tertiary stem villi.</li>\n<li>It is an <strong>indication for termination of pregnancy irrespective of gestation age.</strong></li>\n</ul>\n<p>Ratios measured by Doppler include:</p>\n<ul>\n<li>Systolic/ Diastolic index</li>\n<li>Pulsatality index</li>\n<li>Resistance index</li>\n</ul>\n<p>Abnormal flow patterns in Doppler:</p>\n<ul>\n<li>Reversed end diastolic flow</li>\n<li>Reduced end diastolic flow</li>\n<li>Absent end diastolic flow</li>\n</ul>\n<p>&nbsp;</p>\n<p>The image given below shows doppler recordings from umbilical artery(UA), middle cerebral artery (MCA) and aortic isthmus (AoI) and the three intrauterine growth restricted(IUGR) fetuses with present end diastolic flow(PEDF), absent end diastolic flow(AEDF), reverse end diastolic flow(REDF).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e36d54d98eb417e95f0348a29587bab.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/79fda97f4ffd4b97b27da2f968f05c71x512x331.PNG"
    ]
  },
  {
    "text": "Head to body delivery time in shoulder dystocia is",
    "choices": [
      {
        "id": 1,
        "text": ">30s"
      },
      {
        "id": 2,
        "text": ">55s"
      },
      {
        "id": 3,
        "text": ">49s"
      },
      {
        "id": 4,
        "text": ">60s"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Head to body delivery time in <strong>shoulder dystocia- &gt;60s</strong></p>\n<p><strong>Head to body delivery time:</strong></p>\n<ul>\n<li>The mean head-to-body delivery time in <strong>normal births -24 seconds</strong></li>\n<li>It was proposed that <strong>a head-to-body delivery time </strong><strong>&gt; 60 seconds be used to define shoulder dystocia.</strong></li>\n<li>Currently, however, the diagnosis continues to rely on the clinical perception that the normal downward traction needed for fetal shoulder delivery is ineffective.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the approximate weight of the fetus , if the height of the uterus above pubic symphysis is about 35cm and station of head -2?",
    "choices": [
      {
        "id": 1,
        "text": "2.5 kg"
      },
      {
        "id": 2,
        "text": "3 kg"
      },
      {
        "id": 3,
        "text": "3.5 kg"
      },
      {
        "id": 4,
        "text": "4 kg"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Estimation of fetal weight using <strong>Johnsons formula:</strong></p>\n<p><strong>If station of fetal head is below the ischial spine</strong></p>\n<ul>\n<li>Fetal weight = (Ht of uterus above pubic symphysis [in cms] &ndash; 11) \u2a2f155</li>\n</ul>\n<p><strong>If station of fetal head is at or above ischial spine</strong></p>\n<ul>\n<li>Fetal weight = (Ht of uterus above pubic symphysis [in cms] &ndash; 12) \u2a2f155</li>\n</ul>\n<p>In the given question, the station of head= -2 ,&nbsp; is Above the ischial spine,</p>\n<p>Height of uterus above pubic&nbsp; symphysis = 35 cm</p>\n<p>hence,</p>\n<p>Fetal weight = (35-12) \u2a2f155&nbsp;&nbsp;&nbsp; = 23\u2a2f155&nbsp;&nbsp;&nbsp; = 3,565 gm</p>\n<p><strong>Approximate weight = 3.5 kg.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The pain in endometriosis mainly correlates with:",
    "choices": [
      {
        "id": 1,
        "text": "Depth"
      },
      {
        "id": 2,
        "text": "Multiple sites"
      },
      {
        "id": 3,
        "text": "CA 125 levels"
      },
      {
        "id": 4,
        "text": "Stage of the disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>The Depth of penetration</strong> is more related to symptoms rather than the spread. Lesions penetrating more than 5mm are responsible for pain, dysmenorrhea, and dyspareunia<strong>. </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Deep transverse arrest is seen in all except ____________",
    "choices": [
      {
        "id": 1,
        "text": "Android pelvis"
      },
      {
        "id": 2,
        "text": "Epidural analgesia"
      },
      {
        "id": 3,
        "text": "Transverse lie"
      },
      {
        "id": 4,
        "text": "Uterine inertia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Transverse lie indicates presenting part is shoulder hence there will be no case of deep transverse arrest of head.</p>\n<p><strong>Deep transverse arrest:</strong></p>\n<p>The head is deep into the cavity; the sagittal suture is placed in the transverse bispinous diameter and there is no progress in descent of the head even after &frac12;&ndash;1 hour following full dilatation of the cervix.</p>\n<p><strong>Causes:</strong></p>\n<ul>\n<li>Faulty pelvic architecture such as prominent ischial spines, flat sacrum and convergent side walls - android pelvis</li>\n<li>Deflexion of the head</li>\n<li>Weak uterine contraction- uterine inertia</li>\n<li>Laxity of the pelvic floor muscles- Epidural analgesia (prolonged 2<sup>nd</sup> stage of labour)</li>\n</ul>\n<p><strong>Diagnosis: </strong></p>\n<ul>\n<li>The head is engaged</li>\n<li>The sagittal suture lies in the transverse bispinous diameter</li>\n<li>Anterior fontanel is palpable</li>\n<li>Faulty pelvic architecture may be detected.</li>\n</ul>\n<p><strong>Management: </strong></p>\n<ul>\n<li><strong>Vaginal delivery is found not safe</strong> (big baby and or inadequate pelvis): Cesarean section.</li>\n<li><strong>Vaginal delivery is found safe</strong> (any of the methods may be employed)\n<ul>\n<li><strong>Ventouse</strong>&mdash;Excessive traction force should not be used</li>\n<li><strong>Manual rotation and application of forceps</strong></li>\n<li><strong>Forceps rotation and delivery with Kielland </strong>in the hands of an expert.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Vaginal epithelium is derived from",
    "choices": [
      {
        "id": 1,
        "text": "Endoderm of genital ridge"
      },
      {
        "id": 2,
        "text": "Endoderm of  urogenital sinus"
      },
      {
        "id": 3,
        "text": "Mesoderm of  urogenital sinus"
      },
      {
        "id": 4,
        "text": "Mesoderm of genital ridge"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Vaginal epithelium is derived from <strong>Endoderm</strong> <strong>of&nbsp; urogenital sinus</strong></p>\n<p><strong>Development of vagina:</strong></p>\n<p>Vagina is derived from mullerian duct and urogenital sinus.</p>\n<ul>\n<li><strong>Upper 3/5<sup>th</sup></strong> is derived from <strong>mullerian duct</strong> while <strong>lower part</strong> is derived from <strong>Urogenital sinus.</strong></li>\n<li><strong>Junction of mullerian duct and urogenital sinus forms the Hymen.</strong></li>\n<li><strong>Urogenital sinus endoderm forms the epithelium of vagina and portio vaginalis part of cervix.</strong></li>\n<li>Ectoderm of genital folds form the vaginal introitus.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the etiology of endometriosis, Sampson\u2019s theory is:",
    "choices": [
      {
        "id": 1,
        "text": "Retrograde menstruation"
      },
      {
        "id": 2,
        "text": "Coelomic metaplasia theory"
      },
      {
        "id": 3,
        "text": "Metastatic theory"
      },
      {
        "id": 4,
        "text": "Histogenesis by induction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Sampson&rsquo;s retrograde menstruation/implantation theory:</strong></p>\n<ul>\n<li>It attributes endome&shy;triosis to reflux of menstrual endometrium through the fallopian tubes and its subsequent implantation and growth on the pelvic peritoneum and the surrounding structures.</li>\n</ul>\n<ul>\n<li>It is associated with hypotonia of Utero tubal junction.</li>\n</ul>\n<ul>\n<li>The <strong>occurrence of scar endometriosis following classical caesarean section, hysterotomy, myomectomy and episiotomy </strong>and the occurrence of endometriosis in young girls with cryptomenorrhoea, and retrograde collection of menstrual fluid further supports this view.</li>\n</ul>\n<p><strong>Meyer and Ivanoff&rsquo;s Coelomic metaplasia theory:</strong></p>\n<ul>\n<li>Mullerian tissue remnants trapped within the peritoneum undergo metaplasia and get transformed to endometrial tissue.</li>\n</ul>\n<p><strong>Halban&rsquo;s metastatic theory:</strong></p>\n<ul>\n<li>Embolisation of menstrual frag&shy;ments through vascular or lymphatic channels occur, and this leads to the launching of endometriosis at distal sites like umbi&shy;licus, pelvic lymph nodes, ureter, rectovaginal septum, bowel wall, and remote sites like the lung, pleura, endo&shy;cardium and the extremities.</li>\n</ul>\n<p><strong>Hormonal theory:</strong></p>\n<ul>\n<li>It is an estrogen-dependent condition. Cyclical hormones stimulate its growth, but continuous hormone secretion or therapy suppresses it.</li>\n</ul>\n<ul>\n<li>It is rare before menarche and after menopause.</li>\n</ul>\n<ul>\n<li>Pregnancy causes atrophy of endometriosis chiefly through high progesterone levels. Regression also follows oophorectomy and irradiation.</li>\n</ul>\n<ul>\n<li>Hormones with anti-estrogenic activity also suppress endometriosis and are used therapeutically.</li>\n</ul>\n<ul>\n<li>Smoking reduces estrogen level and thereby the incidence of endo&shy;metriosis proliferation.</li>\n</ul>\n<p><strong>Immunological Factor:</strong></p>\n<ul>\n<li>Impaired T cell and NK cell activity and altered immunology in a woman may increase the susceptibility to proliferation and growth.</li>\n</ul>\n<p><strong>Genetic basis</strong>:</p>\n<ul>\n<li>It accounts for 10% of endometriosis; inci&shy;dence in the first-degree relative is sevenfold.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of these is diagnostic of menopause?",
    "choices": [
      {
        "id": 1,
        "text": "Serum FSH > 40 mIU/mL"
      },
      {
        "id": 2,
        "text": "Serum estradiol <30 pg/mL"
      },
      {
        "id": 3,
        "text": "Serum FSH <40 mIU/mL"
      },
      {
        "id": 4,
        "text": "Serum LH >20 mIU/mL"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Serum FSH&gt;40 mIU/mL&nbsp; is diagnostic feature of Menopause.</strong></p>\n<p>Diagnostic criteria for menopause based on hormone&nbsp; levels include:</p>\n<table>\n<tbody>\n<tr>\n<td>Estrogen(E2)</td>\n<td>5-25 pg/mL</td>\n</tr>\n<tr>\n<td>Estrone(E1)</td>\n<td>20-70 pg/mL</td>\n</tr>\n<tr>\n<td>E2/E1 ratio</td>\n<td>&lt;1</td>\n</tr>\n<tr>\n<td>FSH</td>\n<td>&gt;40 mIU/mL</td>\n</tr>\n<tr>\n<td>LH</td>\n<td>50-100 mIU/mL</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gartner\u2019s cyst can be differentiated from cystocoele by A/E:",
    "choices": [
      {
        "id": 1,
        "text": "Not reducible"
      },
      {
        "id": 2,
        "text": "No cough impulse"
      },
      {
        "id": 3,
        "text": "Well defined margins"
      },
      {
        "id": 4,
        "text": "Presence of rugosities of overlying vaginal mucosa"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Rugosities of the overlying vaginal mucosa are lost in a case of Gartner&rsquo;s cyst.</p>\n<p><strong>Gartner&rsquo;s cyst:</strong></p>\n<p><strong>Gartner&rsquo;s cyst is the retention cyst in remnants of Wolffian duct.</strong></p>\n<p>&nbsp;</p>\n<p><strong>Features of Gartner&rsquo;s cyst are:</strong></p>\n<ul>\n<li><strong>Situated anteriorly or anterolaterally</strong> and of variable sizes.</li>\n<li><strong>Rugosities of the overlying vaginal mucosa are lost.</strong></li>\n<li>Vaginal mucosa over it becomes tense and shiny.</li>\n<li><strong>Margins are well-defined.</strong></li>\n<li><strong>It is not reducible.</strong></li>\n<li><strong>There is no impulse on <strong>coughing</strong>.</strong></li>\n<li>The metal catheter tip introduced per urethra fails to come underneath the vaginal mucosa</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6acbb8557a68426e82495020892da39bx346x394.PNG"
    ]
  },
  {
    "text": "What is the most symptomatic type of fibroid?",
    "choices": [
      {
        "id": 1,
        "text": "Interstitial"
      },
      {
        "id": 2,
        "text": "Subserous"
      },
      {
        "id": 3,
        "text": "Submucous"
      },
      {
        "id": 4,
        "text": "Cervical"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The submucous fibroid is the least common type but produces maximum symptoms.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Uterine anomaly shown in the image given below falls under which category of the AFS  Classification of Mullerian duct anomalies?",
    "choices": [
      {
        "id": 1,
        "text": "II"
      },
      {
        "id": 2,
        "text": "III"
      },
      {
        "id": 3,
        "text": "V"
      },
      {
        "id": 4,
        "text": "VI"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image given is that of <strong>Arcuate uterus</strong> which falls under <strong>Type VI of AFS classification of mullerian duct anomalies.</strong></p>\n<p><strong>Arcuate uterus &ndash; Flat topped with lack of fundal bulge.</strong></p>\n<p></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Class </strong></td>\n<td><strong>Anomaly</strong></td>\n</tr>\n<tr>\n<td>I</td>\n<td>Mullerian agenesis (MRKH syndrome)/ hypoplasia</td>\n</tr>\n<tr>\n<td>II</td>\n<td>Unicornuate uterus</td>\n</tr>\n<tr>\n<td>III</td>\n<td>Didelphys uterus</td>\n</tr>\n<tr>\n<td>IV</td>\n<td>Bicornuate uterus</td>\n</tr>\n<tr>\n<td>V</td>\n<td>Septate uterus</td>\n</tr>\n<tr>\n<td><strong>VI</strong></td>\n<td><strong>Arcuate uterus</strong></td>\n</tr>\n<tr>\n<td><strong>VII</strong></td>\n<td><strong>DES related abnormalities</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4ae41333268f43d9820ac1326d7c9965.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Indications of myomectomy are all except:",
    "choices": [
      {
        "id": 1,
        "text": "Recurrent pregnancy loss"
      },
      {
        "id": 2,
        "text": "Associated infertility"
      },
      {
        "id": 3,
        "text": "Red degeneration"
      },
      {
        "id": 4,
        "text": "Pressure symptoms"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Indications of myomectomy are</p>\n<ul>\n<li>Persistent uterine bleeding despite medical therapy</li>\n</ul>\n<ul>\n<li>Excessive pain or pressure symptoms</li>\n</ul>\n<ul>\n<li>Size &gt;12weeks, woman desirous to have a baby</li>\n</ul>\n<ul>\n<li>Unexplained infertility with distortion of uterine cavity due to fibroid</li>\n</ul>\n<ul>\n<li>Recurrent pregnancy wastage due to fibroid</li>\n</ul>\n<ul>\n<li>Rapidly growing myoma during follow-up</li>\n</ul>\n<ul>\n<li>Subserous pedunculated fibroid.</li>\n</ul>\n<p>Red degeneration is most common during the second trimester of pregnancy and usually managed conservatively with bed rest and analgesics.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Halban\u2019s disease is due to ?",
    "choices": [
      {
        "id": 1,
        "text": "Persistent trophoblast"
      },
      {
        "id": 2,
        "text": "Persistent  corpus luteum"
      },
      {
        "id": 3,
        "text": "Deficient corpus luteum"
      },
      {
        "id": 4,
        "text": "Deficient trophoblast"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Halban&rsquo;s Disease</strong>&nbsp; is due to per&shy;sistent corpus luteum.</p>\n<p><strong>Halban&rsquo;s Disease:</strong></p>\n<ul>\n<li><strong>Represents Irregular Shedding </strong></li>\n<li>It is rare and self-limited.&nbsp;</li>\n<li>Irregular shedding is due to <strong>per&shy;sistent corpus luteum</strong> due to Incomplete withdrawal of LH even on 26<sup>th</sup> day of cycle.</li>\n<li>The <strong>menstruation comes on time</strong>, is <strong>prolonged</strong> but not heavy.</li>\n<li>Progestogen can suppress the bleeding, but needs to be taken on tapering dose for 20 days to complete the cycle.</li>\n<li><strong>Treatment: Spontaneous cure / NSAIDs for 6 months</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "While evaluating a patient with secondary amenorrhoea, you administer her estrogen and progesterone. However, withdrawal bleeding is not seen. What is the likely site of lesion here?",
    "choices": [
      {
        "id": 1,
        "text": "Pituitary"
      },
      {
        "id": 2,
        "text": "Endometrium"
      },
      {
        "id": 3,
        "text": "Ovary"
      },
      {
        "id": 4,
        "text": "Hypothalamus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>absence</strong> of <strong>withdrawal bleeding</strong> after the estrogen-progesterone challenge test points towards a <strong>local endometrial lesion.</strong></p>\n<p><strong>Estrogen&ndash;progesterone challenge test</strong>&nbsp;is indicated as an investigation in case of secondary amenorrhea. It depends on estrogen-primed endometrium being present in the uterus.&nbsp;</p>\n<p>Procedure:</p>\n<ul>\n<li>Ethinyl <strong>estradiol</strong> 0.02 mg or conjugated equine estrogen 1.25 mg is to be taken <strong>daily</strong> for<strong> 25 days.</strong></li>\n<li><strong>Medroxyprogesterone acetate</strong> 10 mg daily is added from<strong> day 15&ndash;25.</strong></li>\n<li>Alternately, one course of oral contraceptive pill is given and to observe whether withdrawal bleeding occurs or not.</li>\n</ul>\n<p>Results:</p>\n<ul>\n<li>If there is <strong>no bleeding,</strong>&nbsp;a&nbsp;<strong>local endometrial lesion&nbsp;</strong>is present such as uterine synechiae. This is to be confirmed by HSG or hysteroscopy.</li>\n<li>If <strong>withdrawal bleeding</strong> <strong>occurs</strong>, the endometrium is responsive but the endogenous estrogen production is inadequate. Hence, the <strong>defect</strong> lies in the <strong>ovary, hypothalamus, </strong>or<strong> pituitary.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman with fibroid uterus develops acute pain in abdomen with low-grade fever and leucocytosis at 28 weeks. Most likely diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Red degeneration of fibroid"
      },
      {
        "id": 2,
        "text": "Torsion of fibroid"
      },
      {
        "id": 3,
        "text": "Infection of fibroid"
      },
      {
        "id": 4,
        "text": "Preterm labour"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>Option A:</strong> Red degeneration of fibroid is most common during the second trimester of pregnancy. It presents with acute pain abdomen, vomiting. Leucocytosis and raised ESR will be evident.&nbsp;</li>\n</ul>\n<ul>\n<li><strong>Option B:</strong> Torsion of subserous pedunculated fibroid presents with severe pain abdomen but fever and leucocytosis are absent.</li>\n</ul>\n<ul>\n<li><strong>Option C:</strong> Infection is more common in Puerperium and presents with blood stained discharge.</li>\n</ul>\n<ul>\n<li><strong>Option D:</strong> Preterm labor &ndash; there is no mention of uterine contractions or cervical findings.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Infibulation comes under which type of WHO Classification of Female Genital Mutilation?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Infibulation comes under&nbsp; <strong>type&nbsp; III</strong>&nbsp;of WHO Classification of Female Genital Mutilation.</p>\n<p><strong>Female Genital Mutilation:</strong></p>\n<p>Inaccurately called<strong> female circumcision, mutilation refers to medically unnecessary vulvar and perineal modification.</strong></p>\n<p>The World Health Organization &nbsp;classifies genital mutilations into <strong>four types.</strong></p>\n<p>&nbsp;</p>\n<table>\n<tbody>\n<tr>\n<td>Type</td>\n<td>Feature</td>\n</tr>\n<tr>\n<td>I</td>\n<td>Prepuce excision with or without clitoral excision</td>\n</tr>\n<tr>\n<td>II</td>\n<td>Clitoral excision with or without partial or total labia minora excision</td>\n</tr>\n<tr>\n<td><strong>III</strong></td>\n<td><strong>Partial or complete labial minora and/or majora excision with or without clitoridectomy and then fusion of the wound, termed infibulation. </strong></td>\n</tr>\n<tr>\n<td>IV</td>\n<td>Unclassified and includes pricking, piercing, incision, stretching, and introduction of&nbsp; corrosive substances into the vagina</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Diagnostic criteria for primary abdominal pregnancy is",
    "choices": [
      {
        "id": 1,
        "text": "Spiegelberg criteria"
      },
      {
        "id": 2,
        "text": "Rubin's criteria"
      },
      {
        "id": 3,
        "text": "Studdiford criteria"
      },
      {
        "id": 4,
        "text": "Wrigly criteria"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The criteria laid down by Studdiford is used to diagnose primary abdominal pregnancy.</p>\n<table style=\"width: 404.8px;\">\n<tbody>\n<tr>\n<td style=\"width: 110px;\"><strong>Site of pregnancy </strong></td>\n<td style=\"width: 170px;\"><strong>Criteria </strong></td>\n<td style=\"width: 117.8px;\"><strong>Management </strong></td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Primary abdominal pregnancy</td>\n<td style=\"width: 170px;\">\n<p><strong>Studdiford's criteria</strong></p>\n<ul>\n<li>Both the tubes and ovaries should be normal</li>\n<li>Absence of uteroperitoneal fistula</li>\n<li>Pregnancy must be exclusively related to the peritoneal surface&nbsp;</li>\n</ul>\n</td>\n<td style=\"width: 117.8px;\">Surgical management</td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Ovarian pregnancy</td>\n<td style=\"width: 170px;\">\n<p><strong>Spiegelberg's criteria</strong></p>\n<ul>\n<li>The tube on the affected side must be intact</li>\n<li>Gestational sac must occupy the position of the ovary</li>\n<li>Gestational sac connected to the uterus by ovarian ligament</li>\n<li>Definite ovarian tissue must be found in the sac wall</li>\n</ul>\n</td>\n<td style=\"width: 117.8px;\">Surgical management</td>\n</tr>\n<tr>\n<td style=\"width: 110px;\">Cervical pregnancy</td>\n<td style=\"width: 170px;\">\n<p><strong>Rubin's criteria (Palmatic's criteria)</strong></p>\n<ul>\n<li>The uterus is smaller than surrounding distended cervix</li>\n<li>Internal os is not dilated</li>\n<li>Curettage of the endometrial cavity is nonproductive of placental tissue</li>\n<li>External os opens earlier than in spontaneous abortion</li>\n</ul>\n</td>\n<td style=\"width: 117.8px;\">\n<ul>\n<li>Medical management if vitals are stable</li>\n<li>Surgical management if vitals are unstable</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True statement regarding pelvic tuberculosis is",
    "choices": [
      {
        "id": 1,
        "text": "Almost always secondary to primary infection elsewhere in the body"
      },
      {
        "id": 2,
        "text": "Hematogenous spread is the most common route of spread"
      },
      {
        "id": 3,
        "text": "Fallopian tubes are most commonly affected"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Genital tuberculosis is almost always secondary </strong>to primary infection elsewhere.</li>\n<li><strong>Most common primary focus in genital TB is lungs</strong>.</li>\n<li><strong>Most common mode of spread is haematogenous</strong>.</li>\n<li><strong>Most common organ to be affected and first organ to be affected is fallopian tubes.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The USG given below is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Ectopic pregnancy"
      },
      {
        "id": 2,
        "text": "Ovarian pregnancy"
      },
      {
        "id": 3,
        "text": "Anencephaly"
      },
      {
        "id": 4,
        "text": "Hydatidiform mole"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image shows the characteristic snow storm appearance seen in hydatidiform mole.</p>\n<p>Hydatidiform Mole is principally a <strong>disease of the chorion.</strong> <strong>Death of the ovum or failure of the embryo to grow is essential to develop complete (classic) hydatidiform mole</strong>. The secretion from the hyperplastic cells and transferred substances from the maternal blood accumulate in the stroma of the villi which results in distension of the villi to form small vesicles.</p>\n<p>Classical clinical feature of a complete mole:</p>\n<ul>\n<li>Abnormal vaginal bleeding</li>\n<li>Lower abdominal pain</li>\n<li>Hyperemesis gravidarum</li>\n<li>Features of early onset preeclampsia &lt; 20 weeks</li>\n<li>Uterus &gt; dates (50%)</li>\n<li>Absent fetal parts and FHS</li>\n<li>Expulsion of vesicular tissues</li>\n<li>Theca lutein cyst of ovaries (25%) &gt; 6 cm</li>\n<li>Hyperthyroidism (rare)</li>\n<li>Serum hCG &gt; 100,000 mIU/mL</li>\n<li><strong>USG: snowstorm appearance</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/139d523df5634075878f4c67c1261ecf.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the abnormality in the given picture.",
    "choices": [
      {
        "id": 1,
        "text": "Spina bifida"
      },
      {
        "id": 2,
        "text": "Caudal regression"
      },
      {
        "id": 3,
        "text": "Meningomyelocele"
      },
      {
        "id": 4,
        "text": "Diastematomyelia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image depicts <strong>caudal regression syndrome.</strong></p>\n<p>The caudal regression syndrome is a rare malformation but is frequently associated with <strong>maternal diabetes</strong>.&nbsp;It consists of a spectrum of <strong>structural defects</strong> of the caudal region, including incomplete development of the <strong>sacrum</strong> and the <strong>lumbar vertebrae.</strong></p>\n<p>It occurs approximately <strong>200 times</strong> <strong>more </strong>frequently in<strong> infants </strong>of <strong>diabetic mothers</strong> than in other infants.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d4aedc61bded41f2b3cdcbc65368bbcd.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The following primary tumors are common in the vulva except",
    "choices": [
      {
        "id": 1,
        "text": "Adenocarcinoma"
      },
      {
        "id": 2,
        "text": "Basal cell carcinoma"
      },
      {
        "id": 3,
        "text": "Choriocarcinoma"
      },
      {
        "id": 4,
        "text": "Squamous cell carcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The primary tumor not common in vulva is choriocarcinoma</p>\n<p>Histological types of vulval cancers are:</p>\n<ul>\n<li>Squamous cell carcinoma&ndash;90%</li>\n<li>Melanoma 5%</li>\n<li>Adenocarcinoma (bartholin&rsquo;s gland)</li>\n<li>basal cell carcinoma</li>\n<li>Sarcoma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Childbirth trauma leading to urine incontinence is seen least in females with",
    "choices": [
      {
        "id": 1,
        "text": "Anthropoid pelvis"
      },
      {
        "id": 2,
        "text": "Android pelvis"
      },
      {
        "id": 3,
        "text": "Gyncoid pelvis"
      },
      {
        "id": 4,
        "text": "Platypelloid pelvis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Childbirth trauma injury is more common in gynecoid and least in android pelvis.</p>\n<p>The android pelvis has a narrow pubic arch and this is protective against childbirth trauma injury and pelvic organ prolapse compared to the gynecoid pelvis.</p>\n<p>Childbirth trauma causes damage of the pelvic floor and pubocervical fascia and leads to denervation of the smooth and striated components of the sphincter.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Absolute proof of monozygosity is determined by",
    "choices": [
      {
        "id": 1,
        "text": "DNA finger printing"
      },
      {
        "id": 2,
        "text": "Intervening membrane layers"
      },
      {
        "id": 3,
        "text": "Sex of the babies"
      },
      {
        "id": 4,
        "text": "Reciprocal skin grafting"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most definite proof of<strong> monozygosity</strong> is<strong> DNA finger printing</strong> by DNA microprobe technique</p>\n<p>The difference between monozygotic and dizygotic twins are:</p>\n<table style=\"width: 370.6px;\">\n<tbody>\n<tr>\n<td style=\"width: 154px;\"><strong>Variables </strong></td>\n<td style=\"width: 109px;\"><strong>Monozygotic </strong></td>\n<td style=\"width: 94.6px;\"><strong>Dizygotic </strong></td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Placenta</td>\n<td style=\"width: 109px;\">One</td>\n<td style=\"width: 94.6px;\">Two (most often fused)</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Communicating vessels</td>\n<td style=\"width: 109px;\">Present</td>\n<td style=\"width: 94.6px;\">Absent</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Intervening membrane</td>\n<td style=\"width: 109px;\">2 (amnios)</td>\n<td style=\"width: 94.6px;\">4 (2 amnios 2 chorios)</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Sex</td>\n<td style=\"width: 109px;\">Always identical</td>\n<td style=\"width: 94.6px;\">May differ</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Genetic features (dominant blood group) DNA finger printing</td>\n<td style=\"width: 109px;\">Same</td>\n<td style=\"width: 94.6px;\">Differ</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Skin grafting (reciprocal)</td>\n<td style=\"width: 109px;\">Acceptance</td>\n<td style=\"width: 94.6px;\">Rejection</td>\n</tr>\n<tr>\n<td style=\"width: 154px;\">Follow-up</td>\n<td style=\"width: 109px;\">Usually identical</td>\n<td style=\"width: 94.6px;\">Not identical</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Dose of anti-D for antenatal prophylaxis in Rh negative nonimmunized females",
    "choices": [
      {
        "id": 1,
        "text": "Single dose of 1000 IU at 28 weeks"
      },
      {
        "id": 2,
        "text": "Single dose of 1500 IU at 28 weeks"
      },
      {
        "id": 3,
        "text": "Single dose of 500 IU at 28 weeks"
      },
      {
        "id": 4,
        "text": "Single dose of 1500 IU at 32 weeks"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above question refers to<strong> antenatal prophylaxis </strong>which is a single dose of 1500IU (or 300mcg) at 28 weeks.</p>\n<p>To prevent active immunization of Rh-negative yet unimmunized,<strong> Rh anti-D immunoglobulin (IgG)</strong> is administered intramuscularly to the mother following childbirth, in spite of which the failure rate is about 1\u20132%. This is due to antepartum feto-maternal hemorrhage and sensitization (1\u20132%).</p>\n<p><strong>If the woman is Rh-negative and has no antibody, she should have one dose of 300 \u00b5g Rh immune globulin as prophylaxis at around 28 weeks (ACOG\u20131999) and again after birth (within 72 hours).</strong></p>\n<p>To minimize or prevent the feto-maternal bleed:</p>\n<ul>\n<li>Precaution during C section</li>\n<li>Prophylactic ergometrine should preferably be withheld, as it may facilitate more fetoplacental bleed</li>\n<li>Amniocentesis should be done after sonographic localization of the placenta to prevent its injury</li>\n<li>Amniocentesis should be done after sonographic localization of the placenta to prevent its injury</li>\n<li>Manual removal of placenta should be done gently</li>\n<li>To refrain from abdominal palpation as far as possible in abruptio placentae.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Indications of rectal examination in gynecology are all except",
    "choices": [
      {
        "id": 1,
        "text": "In cases with mullerian agenesis"
      },
      {
        "id": 2,
        "text": "In virgin females"
      },
      {
        "id": 3,
        "text": "To differentiate rectocele from enterocele"
      },
      {
        "id": 4,
        "text": "For staging of ovarian malignancy"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Rectal examination is not indicated in the staging of ovarian malignancy</strong></p>\n<p>Rectal examination can be done in isolation or as an adjunct to vaginal examination.</p>\n<p>Indications of Rectal Examination:</p>\n<ul>\n<li>Children or in adult virgins</li>\n<li>Painful vaginal examination</li>\n<li>Carcinoma cervix&mdash;to note the parametrial involvement (base of the broad ligament and the uterosacral ligament can only be felt rectally) or involvement of the rectum</li>\n<li>To corroborate the findings felt in the pouch of Douglas by bimanual vaginal examination</li>\n<li>Atresia (agenesis) of vagina</li>\n<li>Patients having rectal symptoms</li>\n<li>To diagnose rectocele and differentiate it from enterocele.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are performing capillary blood glucose charting for newborns in the post-natal ward. Below what level is it considered hypoglycemia?",
    "choices": [
      {
        "id": 1,
        "text": "<40"
      },
      {
        "id": 2,
        "text": "<45"
      },
      {
        "id": 3,
        "text": "<50"
      },
      {
        "id": 4,
        "text": "<55"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Neonatal hypoglycemia is defined as <strong>blood glucose levels &lt;45 mg/dL.</strong></p>\n<p><strong>Maternal hyperglycemia </strong>stimulates the<strong> fetal pancreas</strong> to secrete <strong>excess insulin</strong>, which causes increased neonatal fat deposition, abdominal girth, and macrosomia (Pederson's hypothesis). It also leads to a\u00a0rapid drop in plasma glucose concentration after delivery.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following heart diseases maternal mortality is found to be highest?",
    "choices": [
      {
        "id": 1,
        "text": "Eisenmenger's complex"
      },
      {
        "id": 2,
        "text": "Coarctation of aorta"
      },
      {
        "id": 3,
        "text": "Mitral stenosis"
      },
      {
        "id": 4,
        "text": "Aortic stenosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Maternal mortality is about 50% and so also the perinatal loss (50%) in Eisenmenger's syndrome.</strong></p>\n<p>Eisenmenger's syndrome is the presence of secondary pulmonary hypertension that develops from a cardiac lesion.&nbsp;</p>\n<p>The syndrome develops when,</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/076537a8132f44ddaefa32ff2806064dx456x474.PNG"
    ]
  },
  {
    "text": "The following statements are related to Krukenberg tumor except",
    "choices": [
      {
        "id": 1,
        "text": "It is always secondary"
      },
      {
        "id": 2,
        "text": "The most common primary site is pylorus of the stomach"
      },
      {
        "id": 3,
        "text": "The tumor is bilateral"
      },
      {
        "id": 4,
        "text": "\"signet ring\" looking cells are characteristic"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>The Krukenberg tumor is a metastatic tumor to the ovary but it may be a primary tumor.</strong></p>\n<p>It is an atypical tumor in which the histological picture differs from that of the primary one</p>\n<p>The common primary sites from where metastases to the ovaries occur are:</p>\n<ul>\n<li>gastrointestinal tract (pylorus, colon and rarely small intestine),</li>\n<li>gallbladder,</li>\n<li>pancreas,</li>\n<li>breast</li>\n<li>endometrial carcinoma</li>\n</ul>\n<p>The tumor is usually bilateral, solid with smooth surfaces and usually maintaining the shape of the ovary. They are bosselated and may attain a big size. There is no tendency of adhesion.</p>\n<p>Histologically, the stroma is highly cellular. The mucin within epithelial cells compresses the nuclei to one pole, producing<strong> &lsquo;signet ring&rsquo; appearance </strong>which is characteristic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/50b2168055834ef1955fbeb5f47a1e16x310x481.PNG"
    ]
  },
  {
    "text": "Cryosurgery is effective in all except",
    "choices": [
      {
        "id": 1,
        "text": "Cervical ectopy"
      },
      {
        "id": 2,
        "text": "Carcinoma cervix"
      },
      {
        "id": 3,
        "text": "Condyloma accuminata"
      },
      {
        "id": 4,
        "text": "Cases with severe dysplasia or CIS lesions"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Cryosurgery is not effective in cases with severe dysplasia or CIS lesions.</p>\n<p>Cryosurgery is a procedure whereby destruction of the tissue is effective by freezing.</p>\n<p>Indications:</p>\n<ul>\n<li><strong>Cervical ectopy</strong></li>\n<li>Benign cervical lesions&mdash;such as CIN, condyloma accuminata, leukoplakia, etc.</li>\n<li><strong>Condyloma accuminata </strong>of vulva and VIN diagnosed colposcopically and not more than 2 cm in size.</li>\n<li>VAIN, condyloma accuminata or vault granulation tissue following hysterectomy.</li>\n<li>As a palliative measure to <strong>arrest bleeding in carcinoma cervix </strong>or large fungating recurrent vulval carcinoma.</li>\n</ul>\n<p>The priciple of cryosurgery is that<strong> freezing produces cellular dehydration</strong> by crystallization of intracellular water and ultimately death of cells.</p>\n<p>Advantages of cryosurgery over thermal cautery:</p>\n<ul>\n<li>Anesthesia is not required.</li>\n<li>Precise destruction of tissue.</li>\n<li>There is no secondary hemorrhage.</li>\n<li>Cervical stenosis is rare.</li>\n</ul>\n<p>The drawback is excessive discharge for about 2&ndash;3 weeks.</p>\n<p>Healing is complete in 6-10 weeks.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which type of eclampsia has the worst prognosis?",
    "choices": [
      {
        "id": 1,
        "text": "Postpartum"
      },
      {
        "id": 2,
        "text": "Intrapartum"
      },
      {
        "id": 3,
        "text": "Imminent"
      },
      {
        "id": 4,
        "text": "Antepartum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Maternal complications are higher in antepartum eclampsia. </strong></p>\n<p>Eclampsia associated with the following features has bad prognosis:</p>\n<ul>\n<li>Long interval between the onset of fit and commencement of treatment (late referral).</li>\n</ul>\n<p><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Antepartum eclampsia especially with long delivery interval</strong></p>\n<ul>\n<li>Number of fits more than ten</li>\n<li>Coma in between fits.</li>\n<li>Temperature over 102&deg;F with pulse rate above 120/minute.</li>\n<li>Blood pressure over 200 mm Hg systolic.</li>\n<li>Oliguria (&lt; 400 mL/24 hours) with proteinuria &gt; 5 g/24 hours.</li>\n<li>Nonresponse to treatment.</li>\n<li>Jaundice.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Congenital infection in fetus with minimal teratogenic risk is",
    "choices": [
      {
        "id": 1,
        "text": "Varicella"
      },
      {
        "id": 2,
        "text": "Rubella"
      },
      {
        "id": 3,
        "text": "CMV"
      },
      {
        "id": 4,
        "text": "HIV"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Teratogenic effects have not been documented with HIV infection.</strong> In Highly Active Antiretroviral therapy(HAART) , Efavirenz is avoided in the first trimester due to its teratogenic risk.</p>\n<p>Effects of HIV</p>\n<ul>\n<li>On mother:</li>\n</ul>\n<p>-The course of HIV in mother remians unaltered as a result of pregnancy</p>\n<p>-Maternal mortality or morbidity are not increased by HIV</p>\n<p>-Main problems associated with HIV infection during pregnancy are related to preterm delivery and IUGR</p>\n<ul>\n<li>On fetus:</li>\n</ul>\n<p>-No teratogenic effects have been reported</p>\n<p>-Preterm delivery, IUGR</p>\n<p>No teratogenic effect</p>\n<ul>\n<li>HIV</li>\n<li>Measles</li>\n<li>Influenza</li>\n<li>Mumps</li>\n</ul>\n<p>Infections causing congenital malformations (teratogenic effects)</p>\n<ul>\n<li>Rubella</li>\n<li>Varicella</li>\n<li>CMV</li>\n<li>Toxoplasmosis</li>\n<li>Parvovirus</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A pregnant woman presented to the clinic with complaints of dizziness. On examination, pallor was present. She will be considered severely anemic if her hemoglobin is less than _____.",
    "choices": [
      {
        "id": 1,
        "text": "4 g/dl"
      },
      {
        "id": 2,
        "text": "5 g/dl"
      },
      {
        "id": 3,
        "text": "7 g/dl"
      },
      {
        "id": 4,
        "text": "7.9 g/dl"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Severe anemia</strong> is defined as <strong>Hb &lt; 7 g/dL.<u></u></strong></p>\n<p><strong>Anemia in pregnancy</strong>&nbsp;is said to occur when&nbsp;<strong>Hb level</strong>&nbsp;is<strong>&nbsp;&lt;11 g/dL.&nbsp;</strong>It is classified as shown below:</p>\n<table style=\"width: 490px; height: 218px;\">\n<tbody>\n<tr>\n<td style=\"width: 108.266px;\">Hemoglobin values (g/dL)&nbsp;</td>\n<td style=\"width: 186.531px;\">WHO classification of anemia in pregnancy</td>\n<td style=\"width: 173.203px;\">ICMR classification&nbsp;of anemia in pregnancy</td>\n</tr>\n<tr>\n<td style=\"width: 108.266px;\">&ge;11</td>\n<td style=\"width: 186.531px;\">\n<p>Normal</p>\n<p>In the&nbsp;<strong>second trimester, Hb&nbsp;</strong><strong>&ge;10.5&nbsp;</strong>g/dL is considered normal</p>\n</td>\n<td style=\"width: 173.203px;\">Normal</td>\n</tr>\n<tr>\n<td style=\"width: 108.266px;\">10-10.9</td>\n<td style=\"width: 186.531px;\">Mild&nbsp;</td>\n<td style=\"width: 173.203px;\">Mild</td>\n</tr>\n<tr>\n<td style=\"width: 108.266px;\">7-9.9&nbsp;</td>\n<td style=\"width: 186.531px;\">Moderate</td>\n<td style=\"width: 173.203px;\">Moderate</td>\n</tr>\n<tr>\n<td style=\"width: 108.266px;\">&lt;7&nbsp;</td>\n<td style=\"width: 186.531px;\">Severe</td>\n<td style=\"width: 173.203px;\">Severe</td>\n</tr>\n<tr>\n<td style=\"width: 108.266px;\">&lt;4&nbsp;</td>\n<td style=\"width: 186.531px;\">&nbsp;-</td>\n<td style=\"width: 173.203px;\"><strong>Very severe</strong></td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hypokalemic paralysis is a side effect of",
    "choices": [
      {
        "id": 1,
        "text": "Gossypol"
      },
      {
        "id": 2,
        "text": "DMPA"
      },
      {
        "id": 3,
        "text": "Testosterone enthanate"
      },
      {
        "id": 4,
        "text": "Cyproterone acetate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hypokalemic paralysis is a side effect of Gossypol.</strong></p>\n<ul>\n<li><strong>Gossypol is a male contraceptive pill</strong>&nbsp; discovered in China from an extract of cotton seed.</li>\n<li>Mechanism of action : it inhibits spermatogenesis and decreases epididymal sperm motility.</li>\n<li>Side effect: hypokalemic paralysis, cardiac arrhythmias, fatigue, decreased libido and delayed recovery of sperm count.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following OCP's have the least amount of estrogen?",
    "choices": [
      {
        "id": 1,
        "text": "Mala N"
      },
      {
        "id": 2,
        "text": "Mala D"
      },
      {
        "id": 3,
        "text": "Loette"
      },
      {
        "id": 4,
        "text": "Yasmin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Loette is the OCP with the least amount of Estrogen.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Commercial name </strong></td>\n<td><strong>Composition of Progestins (mg)</strong></td>\n<td><strong>Composition of Estrogen (mcg) </strong></td>\n<td><strong>Number of tablets</strong></td>\n</tr>\n<tr>\n<td>Mala N</td>\n<td>Levonorgestrel (0.15)</td>\n<td>Ethinyl estradiol (30)</td>\n<td>21 + 7 iron tablets</td>\n</tr>\n<tr>\n<td>Mala D</td>\n<td>Levonorgestrel (0.15)</td>\n<td>Ethinyl estradiol (30)</td>\n<td>21 + 7 iron tablets</td>\n</tr>\n<tr>\n<td>Loette</td>\n<td>Desogestrel (0.15)</td>\n<td>Ethinyl estradiol (20)</td>\n<td>21</td>\n</tr>\n<tr>\n<td>Yasmin</td>\n<td>Drospirenone 3 mg</td>\n<td>Ethinyl estradiol (30)</td>\n<td>21</td>\n</tr>\n</tbody>\n</table>\n<p>Depending on the amount of ethinyl estradiol (E) and the types of progestin (P) used, pills are defined as:</p>\n<ul>\n<li>1st generation &mdash; with E 50 &micro;g or more</li>\n<li>2nd generation &mdash; with E 20&ndash;35 &micro;g and P as levonorgestrel or norgestimate</li>\n<li>3rd generation &mdash; with E 20&ndash;30 &micro;g and P as desogestrel or gestodene</li>\n<li>4th generation &mdash; E as third generation, with P as drospirenone, dienogest or nomegestrol.</li>\n</ul>\n<p>Low dose pills have E less than 50 &micro;g.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The meantime for onset of first menstruation following delivery is",
    "choices": [
      {
        "id": 1,
        "text": "2-5 weeks"
      },
      {
        "id": 2,
        "text": "5-7 weeks"
      },
      {
        "id": 3,
        "text": "7-9 weeks"
      },
      {
        "id": 4,
        "text": "9-11 weeks"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The onset of the first menstrual period following delivery depends on lactation. If woman does not breastfeed her baby, menstruation returns by 12th in 80% of cases.</p>\n<p><strong>The meantime for onset of first menstruation is&nbsp; 7 &ndash; 9 weeks.</strong></p>\n<p>In nonlactating mothers, ovulation may occur as early as 4 weeks and in lactating mothers about&nbsp; 10 weeks after delivery.</p>\n<p>The rule of 3's:</p>\n<ul>\n<li>In the presence of full breast feeding, a contraceptive method should begin in the 3<sup>rd</sup> postpartum month.</li>\n<li>With partial breast feeding or no breast feeding, a contraceptive method should begin during the 3<sup>rd</sup> postpartum week</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A G2P1L1 woman at 30 weeks of gestation was rushed to the casualty with complaints of painless vaginal bleeding. She had woken up to find herself in a pool of blood. On examination, her vitals were unstable. Active bleeding per vaginum was present. Which of the following complications would not be anticipated in her?",
    "choices": [
      {
        "id": 1,
        "text": "Birth asphyxia"
      },
      {
        "id": 2,
        "text": "Preterm labour"
      },
      {
        "id": 3,
        "text": "Precipitate labour"
      },
      {
        "id": 4,
        "text": "Postpartum haemorrhage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Then given clinical scenario is suggestive of <strong>placenta previa</strong> and precipitate labour is not a complication. <strong>Precipitate</strong> <strong>labour</strong> is seen in <strong>abruptio</strong> <strong>placenta</strong> and uterine tachysystole.</p>\n<p>Vaginal <strong>bleeding</strong> in placenta previa is <strong>sudden</strong> in onset, recurrent, <strong>painless</strong>, unrelated to activity, and often occurs <strong>during sleep</strong>.</p>\n<p>Complications of placenta previa:\u00a0</p>\n<p><strong>Maternal</strong> complications:</p>\n<table style=\"height: 197px; width: 375px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 136px; height: 18px;\">Period</td>\n<td style=\"width: 225px; height: 18px;\">Complication</td>\n</tr>\n<tr style=\"height: 110px;\">\n<td style=\"width: 136px; height: 110px;\">Antepartum</td>\n<td style=\"width: 225px; height: 110px;\">\n<p>Antepartum haemorrhage</p>\n<p>Malpresentation</p>\n<p>Preterm labour</p>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 136px; height: 78px;\">Intrapartum</td>\n<td style=\"width: 225px; height: 78px;\">\n<p>Early rupture of membranes</p>\n<p>Slow dilatation of cervix</p>\n</td>\n</tr>\n<tr style=\"height: 42px;\">\n<td style=\"width: 136px; height: 42px;\">Postpartum</td>\n<td style=\"width: 225px; height: 42px;\">Postpartum haemorrhage</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 136px; height: 78px;\">Puerperium</td>\n<td style=\"width: 225px; height: 78px;\">\n<p>Sepsis</p>\n<p>Subinvolution</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Fetal</strong> complications:</p>\n<ul>\n<li>Low birth weight</li>\n<li>Asphyxia</li>\n<li>Intrauterine death</li>\n<li>Birth injuries</li>\n<li>Congenital malformations.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are an intern posted in the labor room assisting the delivery of a primigravida in labor. The obstetrician planned for a ventouse delivery because of maternal exhaustion. She asked you to help place the ventouse cup. Where would you place it?",
    "choices": [
      {
        "id": 1,
        "text": "On the sagittal suture 3 cm in front of posterior fontanelle"
      },
      {
        "id": 2,
        "text": "On the sagittal suture 3 cm behind of anterior  fontanelle"
      },
      {
        "id": 3,
        "text": "On the posterior fontanelle"
      },
      {
        "id": 4,
        "text": "On the coronal suture 6 cm away from anterior fontanelle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An important step in vacuum extraction is proper cup placement over the<strong> flexion point</strong>. It&nbsp;is a point on the&nbsp;<strong>sagittal suture</strong> that lies <strong>3 cm </strong>in<strong> front of </strong>the<strong> posterior fontanelle.</strong></p>\n<p><strong>Advantages</strong> <strong>of correct positioning</strong> of cup in vacuum extraction:</p>\n<ul>\n<li>Maximum traction</li>\n<li>Minimum cup detachment</li>\n<li>Twisting of fetal head is avoided</li>\n<li>Smallest head diameter is delivered through the pelvic outlet</li>\n<li>Success rate is improved</li>\n<li>Fetal scalp injury rates are lowered</li>\n<li>Perineal trauma is reduced because the smallest fetal head diameter distends the vulva</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/18b0e661f33d46d6aa4242007e3fd9bcx1280x1319.JPEG"
    ]
  },
  {
    "text": "Reliable diagnosis of endometrial carcinoma can be made from all except",
    "choices": [
      {
        "id": 1,
        "text": "Papanicolaou smear"
      },
      {
        "id": 2,
        "text": "Fractional curettage"
      },
      {
        "id": 3,
        "text": "Aspiration cytology from uterine"
      },
      {
        "id": 4,
        "text": "Hysteroscopy and biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Papanicolaou smear is not a reliable diagnostic test for endometrial carcinoma.</strong> It is positive only in 30 percent of cases of endometrial cancer.</p>\n<p>Diagnosis of endometrial carcinoma:</p>\n<ul>\n<li><strong>Endometrial biopsy:</strong>&nbsp;using a <strong>Sharman curette </strong>or a soft, flexible, plastic suction cannula (pipelle) has been done with reliability (90%). <strong>Histology is the definitive diagnosis</strong>.</li>\n<li><strong>Ultrasound and color Doppler (TVS)</strong>:</li>\n</ul>\n<p>-Endometrial thickness &gt; 4 mm.</p>\n<p>-Hyperechoic endometrium with irregular outline.</p>\n<p>-Increased vascularity with low vascular resistance.</p>\n<p>-Intrauterine fluid.</p>\n<ul>\n<li><strong>Hysteroscopy:&nbsp;</strong>It helps in the direct visualization of the endometrium and to take target biopsy.</li>\n<li><strong>Fractional curettage:&nbsp;</strong>It is the definitive method of diagnosis and can also detect the extent of growth.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a cervix, low grade squamous intraepithelial lesion (LSIL)in Bethseda system includes:",
    "choices": [
      {
        "id": 1,
        "text": "CIN 1"
      },
      {
        "id": 2,
        "text": "CIN 2"
      },
      {
        "id": 3,
        "text": "CIN 3"
      },
      {
        "id": 4,
        "text": "Squamous metaplasia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In Bethesda system</p>\n<p>LSIL = CIN 1</p>\n<p>HSIL = CIN 2, CIN 3/Ca in situ</p>\n<p>&nbsp;</p>\n<p><strong>Cervical Intraepithelial Neoplasia (CIN) </strong>is classified under the<strong> Bethesda system (1988)</strong> into 3 categories based on the cytological abnormalities of the premalignant lesions.</p>\n<ul>\n<li>Atypical squamous cells (ASC)</li>\n<li>Low grade squamous intraepithelial lesions (LSIL)</li>\n<li>High grade squamous intraepithelial lesion (HSIL)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Ureterovaginal fistula should best be treated by",
    "choices": [
      {
        "id": 1,
        "text": "Ureteroileoneocystotomy"
      },
      {
        "id": 2,
        "text": "End-to-end anastomosis through an ureteric catheter"
      },
      {
        "id": 3,
        "text": "Inplantation into colon"
      },
      {
        "id": 4,
        "text": "Ileal conduit"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Surgeries for ureteric fistula:</p>\n<ul>\n<li>Bladder flap procedure (modified Boari-Ocker-Blad)</li>\n<li>Ureteroileoneocystotomy</li>\n<li>Implantation into bladder</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the 2010 WHO criteria what are the characteristics of normal semen analysis",
    "choices": [
      {
        "id": 1,
        "text": "Volume 1ml, count 10 million/ml, morphology more than 14%, progressive motility more than 32%"
      },
      {
        "id": 2,
        "text": "Volume 2ml, count 20 million/ml, morphology more than 14%, progressive motility more than 32%"
      },
      {
        "id": 3,
        "text": "Volume 1ml, count 20 million/ml, morphology more than 14%, progressive motility more than 32%"
      },
      {
        "id": 4,
        "text": "Volume 2ml, count 10 million/ml, morphology more than 14%, progressive motility more than 32%"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Volume 2ml, sperm count 20 million/ml, morphology more than 14% normal form, progressive motility more than 32% are the characteristics of a normal semen analysis,</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Obg St 1';
        const quizFilename = 'obg-st-1-6ecf3997.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>