<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>28 Previous Year Questions - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Dermatology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Annular lesions are seen in all of the following conditions except?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Tinea Corporis"
      },
      {
        "id": 2,
        "text": "Urticaria Pigmentosa"
      },
      {
        "id": 3,
        "text": "Pityriasis Rosea"
      },
      {
        "id": 4,
        "text": "Porokeratosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - <span class=\"customMeta\" data-dictid=\"7e814d15c31692777201fe0d9c1a61\">Urticaria</span> Pigmentosa:</strong></p>\n\n<ul>\n\t<li>Urticaria pigmentosa is a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"5ae49b65a91692777191a8a526ce03\">mastocytosis</span> that primarily affects the skin.</li>\n\t<li>It presents with urticarial lesions that heal with hyperpigmentation.</li>\n\t<li>Any minute trauma or stroking of lesions leads to the development of\u00a0 urticarial lesions.\u00a0However, these lesions are not annular.</li>\n</ul>\n\n<p><img src=\"https://image.prepladder.com/content/h9yuPYuuNPhppDBtahHz1718184138.png\" style=\"height:168px; width:300px\" /></p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Options A, C, and D:</strong> <span class=\"customMeta\" data-dictid=\"96f5104d6816927771816ac8dfceeb\">Annular</span> lesions are seen in <span class=\"customMeta\" data-dictid=\"dbb566df9216927772009e22e9d078\">Tinea</span> corporis, <span class=\"customMeta\" data-dictid=\"2918c7cf5716927771956553e7f2f3\">Pityriasis</span> Rosea, and Porokeratosis.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/h9yuPYuuNPhppDBtahHz1718184138.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The involvement of which of the following results in the given condition below?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Dr. Steven A. Williams,\" data-hash=\"\" data-license=\"CC BY 2.5\" data-source=\"https://commons.wikimedia.org/wiki/File:Elephantiasis.png\" data-tags=\"\" height=\"593\" src=\"https://image.prepladder.com/content/hqi8Tt9FGoKuqb9TwgQW1746181755.png\" width=\"472\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Arteries"
      },
      {
        "id": 2,
        "text": "Vein"
      },
      {
        "id": 3,
        "text": "Lymphatics"
      },
      {
        "id": 4,
        "text": "DVT"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer C - Lymphatics</strong></p>\n\n<ul>\n\t<li>\n\t<p>The image shows <strong>massive <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> of the <span class=\"customMeta\" data-dictid=\"cbc1f41317169277719185421a8e5a\">lower limb</span> with skin thickening and folds</strong>, characteristic of <strong>elephantiasis</strong>.</p>\n\t</li>\n\t<li>\n\t<p><strong>Elephantiasis</strong> results from <strong>lymphatic obstruction</strong>, leading to <strong>chronic <span class=\"customMeta\" data-dictid=\"e03e1c0c3016927771916c29e57df1\">lymphedema</span> and fibrosis</strong>.</p>\n\t</li>\n\t<li>\n\t<p>The most common cause is <strong>lymphatic filariasis</strong> due to <em>Wuchereria bancrofti</em> infection.</p>\n\t</li>\n\t<li>\n\t<p><strong>Non-infectious causes</strong> include <strong>congenital lymphedema, malignancy, and post-surgical <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> damage</strong>.</p>\n\t</li>\n</ul>\n\n<p><strong>Lymphedema and Elephantiasis</strong></p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Feature</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Lymphedema (Elephantiasis)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Cause</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Lymphatic <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> (Filariasis, malignancy, surgery, <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> defects)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Appearance</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Massive swelling, skin thickening, warty texture</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Stages</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>1. <span class=\"customMeta\" data-dictid=\"a8c53e6875169277719588cd709854\">Pitting</span> <span class=\"customMeta\" data-dictid=\"18b452e75916927771864c9ad533e1\">edema</span> (early) 2. Non-pitting <span class=\"customMeta\" data-dictid=\"18b452e75916927771864c9ad533e1\">edema</span> (late) 3. <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">Fibrosis</span> & skin changes (severe)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Complications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Skin infections, ulceration, restricted mobility</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Diagnosis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Clinical examination, ultrasound, lymphoscintigraphy</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p>Limb elevation, <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> therapy, antibiotics for infections, diethylcarbamazine (for filariasis)</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Arteries (Option A):</strong> Incorrect because <strong>arterial disease causes ischemia, pain, and ulceration, not massive swelling</strong>.</p>\n\n<p><strong>Vein (Option B):</strong> Incorrect because <strong>venous <span class=\"customMeta\" data-dictid=\"80feaae4b31692777190ea1ba3fc25\">insufficiency</span> leads to <span class=\"customMeta\" data-dictid=\"58bf762051169277720114fd8971a9\">varicose</span> veins and <span class=\"customMeta\" data-dictid=\"ea73ce564216927771989ea1aa2c3d\">stasis</span> ulcers, not elephantiasis</strong>.</p>\n\n<p><strong>DVT (Option D):</strong> Incorrect because <strong>deep <span class=\"customMeta\" data-dictid=\"75ddd4cc7016927772012e0acd424d\">vein</span> <span class=\"customMeta\" data-dictid=\"3e745919391692777200fae21b7251\">thrombosis</span> (DVT) presents with <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"92b4dd0d9516927772013f2e4296b7\">unilateral</span> swelling, pain, and erythema, not chronic massive lymphedema</strong>.</p>",
    "question_images": [
      "https://image.prepladder.com/content/hqi8Tt9FGoKuqb9TwgQW1746181755.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A school-going child who had applied henna comes to dermatology OPD with the following lesions. Her mother also complains that she has a habit of scratching her hand whenever she is studying. What is the diagnosis for this child?</p>\n\n<p><img alt=\" Dermatitis artefacta\" data-author=\"Gzzz\" data-hash=\"12304\" data-license=\"CC BY 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Dermititis_black_henna.JPG\" data-tags=\"May2025\" src=\"https://image.prepladder.com/notes/24eJ42kV8runDU3Wb4We1746598645.png\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Contact dermatitis due to henna"
      },
      {
        "id": 2,
        "text": "Dermatitis artefacta"
      },
      {
        "id": 3,
        "text": "Polymorphous light eruption"
      },
      {
        "id": 4,
        "text": "Vitiligo"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer B - <span class=\"customMeta\" data-dictid=\"fedc53b3161692777186553c8f8d7d\">Dermatitis</span> artefacta</strong></p>\n\n<ul>\n\t<li>Dermatitis artefacta is a condition characterized by self-inflicted skin lesions, consciously or unconsciously caused by the individual. It is considered a psychiatric disorder rather than a primary skin disease.</li>\n\t<li>The lesions in <span class=\"customMeta\" data-dictid=\"fedc53b3161692777186553c8f8d7d\">dermatitis</span> artefacta often have unusual or bizarre patterns and may not follow the typical distribution or characteristics of known <span class=\"customMeta\" data-dictid=\"193e0fc1471692777186c661338b8e\">dermatological</span> conditions.</li>\n\t<li>These lesions may appear in unusual shapes, patterns, or locations that are not consistent with typical henna reactions or allergic contact dermatitis.</li>\n\t<li>Treatment involves a multidisciplinary approach involving dermatologists, psychologists, and psychiatrists to address the underlying psychological issues and provide appropriate care and support to the individual.</li>\n\t<li>In the case of henna application, if the child deliberately <span class=\"customMeta\" data-dictid=\"5ca3a9c7051692777198d5bd67dd6c\">scratches</span> or traumatizes the skin in the area where henna was applied, it can result in skin lesions that resemble a <span class=\"customMeta\" data-dictid=\"fedc53b3161692777186553c8f8d7d\">dermatitis</span> reaction. The child may create patterns or designs by scratching the skin, leading to the appearance of lesions.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Contact <span class=\"customMeta\" data-dictid=\"fedc53b3161692777186553c8f8d7d\">dermatitis</span> due to henna (Option A)</strong>: Could be a possible <span class=\"customMeta\" data-dictid=\"6bd54dfc48169277718674cd08e586\">differential</span> diagnosis, as henna can sometimes cause an allergic reaction in certain individuals. However, in this case, the option \"dermatitis artefacta\" suggests that the lesions are self-induced rather than a true allergic contact dermatitis.</p>\n\n<p><strong>Polymorphous light <span class=\"customMeta\" data-dictid=\"e8c6da34eb169277718752e1060128\">eruption</span> (Option C)</strong>: (PMLE) is a type of <span class=\"customMeta\" data-dictid=\"33f1fa2acf1692777195d8327786a8\">photodermatitis</span> that occurs in response to exposure to sunlight or artificial <span class=\"customMeta\" data-dictid=\"84608ab7f91692777201521a0fdc0b\">ultraviolet</span> (UV) light. However, the given information about henna application does not align with the characteristic triggers of PMLE.</p>\n\n<p><strong>Vitiligo (Option D)</strong>: Vitiligo is an <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> disorder and does not involve the intentional or self-inflicted creation of skin lesions.</p>",
    "question_images": [
      "https://image.prepladder.com/notes/24eJ42kV8runDU3Wb4We1746598645.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the probable diagnosis of the condition affecting the hair, resulting in the following appearance?</p>\n\n<p><img alt=\"Trichothiodystrophy\" data-author=\"Joseph M. Lam, Li-Chuen Wong\" data-hash=\"12303\" data-license=\"NA\" data-source=\"https://clinicalgate.com/hair-disorders/\" data-tags=\"May2025\" src=\"https://image.prepladder.com/notes/3PFEas3EY42WMl3iuqSr1746597691.png\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Trichorrhexis nodosa"
      },
      {
        "id": 2,
        "text": "Trichorexis invaginate"
      },
      {
        "id": 3,
        "text": "Trichothiodystrophy"
      },
      {
        "id": 4,
        "text": "Monilethrix"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer C - Trichothiodystrophy</strong></p>\n\n<p>Trichothiodystrophy is a rare genetic disorder that affects the structure of the hair.</p>\n\n<p>One of the characteristic features of Trichothiodystrophy is the presence of \"tiger tail banding\" when the hair is examined under <span class=\"customMeta\" data-dictid=\"3f317a251d16927771958bb1e1a01b\">polarized light</span> microscopy. This term refers to <span class=\"customMeta\" data-dictid=\"1b5a7ceea716927771815e7283e571\">alternating</span> light and dark bands along the hair shaft, resembling the pattern of a tiger's tail.</p>\n\n<ul>\n\t<li>Trichothiodystrophy is primarily characterized by <span class=\"customMeta\" data-dictid=\"e30073048816927771830d431eabfe\">brittle</span> hair that is <span class=\"customMeta\" data-dictid=\"607476ab371692777196d0cb2f13bc\">prone</span> to breakage and has a characteristic appearance under the microscope.</li>\n\t<li>Some key features of Trichothiodystrophy include:\n\t<ul>\n\t\t<li>Brittle Hair</li>\n\t\t<li>Tiger Tail Banding</li>\n\t\t<li>Variable Hair Color</li>\n\t\t<li>Intellectual and Developmental Disabilities</li>\n\t\t<li>Additional features may include dry and <span class=\"customMeta\" data-dictid=\"a37fd1603c1692777198f87a4a51dc\">scaly</span> skin, <span class=\"customMeta\" data-dictid=\"e30073048816927771830d431eabfe\">brittle</span> nails, <span class=\"customMeta\" data-dictid=\"6a81fc52651692777195e768541803\">photosensitivity</span> (sensitivity to sunlight), and <span class=\"customMeta\" data-dictid=\"7b1f175723169277719459db16938e\">ocular</span> abnormalities.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Trichorhexis nodosa</strong> <strong>(Option A)</strong>: Trichorhexis nodosa is a <span class=\"customMeta\" data-dictid=\"f690d96c3716927771887df0ac0f58\">hair shaft</span> disorder characterized by nodules or nodes along the hair shaft. It does not typically show the specific \"tiger tail banding\" pattern seen in Trichothiodystrophy.</p>\n\n<p><strong>Trichorexis invaginata (Option B)</strong>: Trichorexis invaginata, also known as \"bamboo hair,\" is a condition in which the <span class=\"customMeta\" data-dictid=\"f690d96c3716927771887df0ac0f58\">hair shaft</span> is characterized by multiple invaginations or nodules. It does not present with the specific <span class=\"customMeta\" data-dictid=\"14a6f814ea1692777182619ddd636c\">banding</span> pattern seen in Trichothiodystrophy.</p>\n\n<p><strong>Monilethrix</strong> <strong>(Option D)</strong>: Monilethrix is a <span class=\"customMeta\" data-dictid=\"ee5175c06116927771880846d1cbe0\">hereditary</span> hair disorder characterized by <span class=\"customMeta\" data-dictid=\"db8c3d4b9e1692777182a03a530a28\">beaded</span> hair shafts that resemble a necklace. It does not show the specific \"tiger tail banding\" pattern seen in Trichothiodystrophy.</p>",
    "question_images": [
      "https://image.prepladder.com/notes/3PFEas3EY42WMl3iuqSr1746597691.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is the most probable diagnosis for a child born with membranes around the body, ectropion, and eclabium, presenting with lesions on the face, trunk, and extremities, and brought to the OPD, what is the diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Belide Shruthi,1,* B.R. Nilgar,1 Anita Dalal,1 and Nehaben Limbani1\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://en.wikipedia.org/wiki/Harlequin-type_ichthyosis\" data-tags=\"\" height=\"506\" src=\"https://image.prepladder.com/content/cymSQgwAKhXEOKQ2cXSN1745226718.png\" width=\"309\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Harlequin ichthyosis"
      },
      {
        "id": 2,
        "text": "Lamellar ichthyosis"
      },
      {
        "id": 3,
        "text": "Bathing suit ichthyosis"
      },
      {
        "id": 4,
        "text": "Ichthyosis vulgaris"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Answer: A. <span class=\"customMeta\" data-dictid=\"b94ff22ffd1692777188f1a126c399\">Harlequin</span> ichthyosis</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Harlequin <span class=\"customMeta\" data-dictid=\"a82fef21131692777189b6cfd6aff1\">ichthyosis</span> is likely a diagnosis based on the image shown.</li>\n</ul>\n\n<p><strong>Harlequin Ichthyosis</strong></p>\n\n<p><strong>Introduction</strong></p>\n\n<ul>\n\t<li>Harlequin <span class=\"customMeta\" data-dictid=\"a82fef21131692777189b6cfd6aff1\">ichthyosis</span> is a rare, severe genetic skin disorder characterized by thick, armor-like scales covering the body at birth. It is an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> condition caused by mutations in the <strong>ABCA12</strong> gene, affecting <span class=\"customMeta\" data-dictid=\"a99114a6c216927771916f45ffc66c\">lipid</span> transport in the epidermis.</li>\n</ul>\n\n<p><strong>Pathophysiology</strong></p>\n\n<ul>\n\t<li><strong>ABCA12 gene mutation</strong> leads to <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"a99114a6c216927771916f45ffc66c\">lipid</span> transport, disrupting the skin barrier.</li>\n\t<li>This results in <strong>thickened, hyperkeratotic plates</strong> with deep fissures, severe dehydration, and increased infection risk.</li>\n</ul>\n\n<p><strong>Features</strong></p>\n\n<ul>\n\t<li>Thick, <strong>diamond-shaped scales</strong> covering the body</li>\n\t<li><strong>Ectropion</strong> (everted eyelids) and <strong>eclabium</strong> (everted lips)</li>\n\t<li><strong>Contracted digits</strong> (hypoplastic fingers and toes)</li>\n\t<li>Risk of <strong>severe dehydration, infections, and <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> distress</strong></li>\n\t<li><strong>Delayed skin shedding</strong>, improving with time but requiring lifelong care</li>\n</ul>\n\n<p><strong>Investigations & Diagnosis</strong></p>\n\n<ul>\n\t<li><strong>Clinical examination</strong> based on characteristic features at birth</li>\n\t<li><strong>Genetic testing</strong> to confirm <strong>ABCA12</strong> mutation</li>\n\t<li><strong>Skin biopsy</strong> (rarely needed) shows <strong>massive hyperkeratosis</strong></li>\n</ul>\n\n<p><strong>Treatment</strong></p>\n\n<ul>\n\t<li><strong>Neonatal <span class=\"customMeta\" data-dictid=\"901bf573f216927771905f0abedca2\">intensive</span> care</strong> (hydration, temperature regulation)</li>\n\t<li><strong>Emollients and keratolytics</strong> (e.g., petrolatum, urea, <span class=\"customMeta\" data-dictid=\"b82539c9ae1692777191a3f7ddd7bb\">lactic</span> acid) to soften scales</li>\n\t<li><strong>Oral retinoids</strong> (e.g., <strong>acitretin, isotretinoin</strong>) to reduce hyperkeratosis</li>\n\t<li><strong>Antibiotics</strong> for secondary infections</li>\n\t<li><strong>Lifelong skin care</strong> with moisturization and gentle exfoliation</li>\n</ul>\n\n<p><strong>Autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> ichthyosis:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Subtype</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Clinical Features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Genetic Defect</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Harlequin ichthyosis</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Thick, plate-like scales covering the entire body</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>ABCA12 gene mutations</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lamellar <span class=\"customMeta\" data-dictid=\"a82fef21131692777189b6cfd6aff1\">ichthyosis</span> <strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Large thick scales, often present at birth</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>TGM1, ALOX12B, ALOXE3, or NIPAL4 gene mutations</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Congenital <span class=\"customMeta\" data-dictid=\"b2ae46fdc1169277718976f2230722\">ichthyosiform</span> <span class=\"customMeta\" data-dictid=\"b6563739731692777187bd27cb8d61\">erythroderma</span> (CIE)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Generalized redness, fine white scales</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>TGM1, ALOX12B, ALOXE3, or NIPAL4 gene mutations</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Self-healing <span class=\"customMeta\" data-dictid=\"f8503ae5301692777184fa9be44510\">collodion</span> baby</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Membrane-like encasement at birth, followed by shedding</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>TGM1, ALOX12B, ALOXE3, or NIPAL4 gene mutations</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Harlequin ichthyosis-like phenotypes</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Variations resembling <span class=\"customMeta\" data-dictid=\"b94ff22ffd1692777188f1a126c399\">harlequin</span> ichthyosis</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Different genetic mutations, including PNPLA1, CYPF22, CASP14, CERS3, etc.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Bathing suit <span class=\"customMeta\" data-dictid=\"a82fef21131692777189b6cfd6aff1\">ichthyosis</span> (Option C)</strong>: A rare <span class=\"customMeta\" data-dictid=\"0efdcdc9e01692777201003c81c85a\">variant</span> of <span class=\"customMeta\" data-dictid=\"95dc7047f41692777191f225afb261\">lamellar</span> <span class=\"customMeta\" data-dictid=\"a82fef21131692777189b6cfd6aff1\">ichthyosis</span> where <span class=\"customMeta\" data-dictid=\"3eae9d3a481692777198158ddc37bc\">scaling</span> predominantly affects the <strong>trunk and <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> limbs</strong>, sparing other areas, resembling a \"bathing suit\" pattern.</p>\n\n<p><strong>Ichthyosis <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> (Option D)</strong>:<strong> </strong>A common inherited skin disorder characterized by fine, dry, <span class=\"customMeta\" data-dictid=\"a37fd1603c1692777198f87a4a51dc\">scaly</span> skin, especially on the <span class=\"customMeta\" data-dictid=\"45f9bc42ac16927771871c9dc2970a\">extensor</span> surfaces, due to <span class=\"customMeta\" data-dictid=\"5c04813b4b16927772021bcff5e5f1\">filaggrin</span> gene mutations leading to impaired skin barrier function.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/cymSQgwAKhXEOKQ2cXSN1745226718.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A child accidentally took a bottle full of iron tablets. Which of the drugs is used as an antidote for iron poisoning?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Luspatercept"
      },
      {
        "id": 2,
        "text": "Deferoxamine"
      },
      {
        "id": 3,
        "text": "Deferiprone"
      },
      {
        "id": 4,
        "text": "DMSA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B \u2013</strong><strong> Deferoxamine:<br />\nExplanation: </strong></p>\n\n<ul>\n\t<li>Acute iron <span class=\"customMeta\" data-dictid=\"072b8af16e1692777196f21b086f92\">poisoning</span> can occur when a person ingests a toxic amount of iron tablets or other iron-containing substances.</li>\n\t<li>Deferoxamine is a <span class=\"customMeta\" data-dictid=\"f4305306cd16927771847a63caf4c7\">chelating agent</span> that is used as the <span class=\"customMeta\" data-dictid=\"5e612ce1381692777181adc76f11e6\">antidote</span> for <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">Acute</span> iron poisoning.</li>\n\t<li><strong>Mechanism:</strong> Binds iron in the body and forms a stable complex that can be excreted through <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> and faeces.</li>\n\t<li>Deferoxamine helps to remove <span class=\"customMeta\" data-dictid=\"7a1ae24f701692777187a7f60bbd9f\">excess</span> iron from the body and prevent its toxic effects.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Luspatercept (Option B) </strong>is a medication used for the treatment of <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> in certain blood disorders and is not indicated for the treatment of iron poisoning.</p>\n\n<p><strong>Deferiprone (Option C) </strong>is an oral <span class=\"customMeta\" data-dictid=\"f4305306cd16927771847a63caf4c7\">chelating agent</span> used to treat <span class=\"customMeta\" data-dictid=\"64bbd63a0c1692777190f0c8e06e91\">iron overload</span> in disorders like thalassemia. However, <span class=\"customMeta\" data-dictid=\"423bba3d10169277718536aa18aea0\">deferoxamine</span> is the preferred <span class=\"customMeta\" data-dictid=\"5e612ce1381692777181adc76f11e6\">antidote</span> for <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> iron poisoning.</p>\n\n<p><strong>DMSA (Dimercaptosuccinic acid) (Option D) </strong>is another <span class=\"customMeta\" data-dictid=\"f4305306cd16927771847a63caf4c7\">chelating agent</span> used for <span class=\"customMeta\" data-dictid=\"6e8ada09fa1692777189bfbace851a\">heavy metal</span> poisoning, but it is not the preferred <span class=\"customMeta\" data-dictid=\"5e612ce1381692777181adc76f11e6\">antidote</span> for iron poisoning. It is more commonly used for lead or <span class=\"customMeta\" data-dictid=\"b59bbde2f816927771924bb2b17b64\">mercury</span> poisoning.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient presents to the dermatology clinic reporting recurrent skin lesions as seen on the image. He describes that these lesions emerge within hours each time he takes NSAIDs. What is the most likely diagnosis?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"456\" src=\"https://image.prepladder.com/content/LMbClC5CUAg1rZKxRCAh1755860380.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Fixed drug eruptions"
      },
      {
        "id": 2,
        "text": "Erythema multiforme"
      },
      {
        "id": 3,
        "text": "Drug Induced Pigmentation"
      },
      {
        "id": 4,
        "text": "Herpes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Option A -</strong><strong> Fixed drug eruptions</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Fixed <span class=\"customMeta\" data-dictid=\"4cbbddb4e216927771865577c1460f\">drug eruption</span> features:</p>\n\n<ul>\n\t<li>Recurrent lesions that appear within hours of taking NSAIDs</li>\n\t<li>well-demarcated, erythematous patch</li>\n\t<li>They recur at the same site upon re-exposure to the offending drug</li>\n\t<li>Common triggers: NSAIDs, <span class=\"customMeta\" data-dictid=\"e6a50302661692777199484845ac1d\">sulfa</span> drugs, antibiotics</li>\n\t<li>They heal with hyperpigmentation</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Erythema multiforme (Option B):</strong> Shows \"target\" or \"iris\" lesions with three zones of color, typically <span class=\"customMeta\" data-dictid=\"3978e9614f1692777200abbe4cfa34\">triggered</span> by infections or drugs. But it does not typically recur on the same site after drug exposure and resolves differently .</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"480\" src=\"https://image.prepladder.com/content/AJeUClMGkN7tXiIpoYbI1755777471.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Drug Induced <span class=\"customMeta\" data-dictid=\"b5f46d7e431692777195efd6b43e9f\">Pigmentation</span> (Option C): </strong>They present as persistent <span class=\"customMeta\" data-dictid=\"05e2e2617c16927771952bcbeea08b\">pigment</span> changes (blue-grey, brown), not the acute, <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> red plaques described here.</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"278\" src=\"https://image.prepladder.com/content/L3K7shA201usZj9cApus1755860410.png\" width=\"500\" /></p>\n\n<p><strong>Herpes (Option D):</strong> Herpes produces blistering grouped lesions, often painful, and is unrelated to NSAID <span class=\"customMeta\" data-dictid=\"6cdcd39cf2169277719068e247e38d\">intake</span> or this typical <span class=\"customMeta\" data-dictid=\"1d849ebc9b1692777197d4af1fa8d2\">recurrence</span> pattern.</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"363\" src=\"https://image.prepladder.com/content/z7bzYw7IzaeqqKWxa5y61755860419.png\" width=\"500\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/LMbClC5CUAg1rZKxRCAh1755860380.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/AJeUClMGkN7tXiIpoYbI1755777471.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 26-year-old male presented with a skin lesion as shown below. Biopsy shows the presence of hyperkeratosis . What is the most likely diagnosis?</p>\n\n<p><img src=\"https://image.prepladder.com/content/BqFFGJqaMYrdmRqMo1ir1714026946.PNG\" style=\"height:150px; width:500px\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Atopic dermatitis"
      },
      {
        "id": 2,
        "text": "Psoriasis"
      },
      {
        "id": 3,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 4,
        "text": "Pemphigus foliaceus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n\t<li>Option b. <span class=\"customMeta\" data-dictid=\"8b9f55244b1692777196b5ddb9a6bf\">Psoriasis</span> is a persistent immune system skin jumble that is portrayed by the fast development and shedding of skin cells. As a result, thick, <span class=\"customMeta\" data-dictid=\"a37fd1603c1692777198f87a4a51dc\">scaly</span> skin patches are often reddish or pink in color and covered in silvery-white scales. <span class=\"customMeta\" data-dictid=\"8b9f55244b1692777196b5ddb9a6bf\">Psoriasis</span> can affect any part of the body, but the scalp, elbows, knees, lower back, and <span class=\"customMeta\" data-dictid=\"1588e9cd72169277718891982853b4\">genitals</span> are the most common locations</li>\n</ul>\n\n<p>Incorrect choices:</p>\n\n<p>Option a -Atopic dermatitis</p>\n\n<ul>\n\t<li>A group of conditions known as <span class=\"customMeta\" data-dictid=\"041f0e547a1692777193350b3f7d39\">neutrophilic</span> dermatoses (NDs) are characterized by skin lesions for which a <span class=\"customMeta\" data-dictid=\"1e9c8202241692777189dbac6cc062\">histological</span> examination reveals a significant <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> infiltrate, primarily composed of neutrophils, without evidence of infection.Red, crusty, itchy, and flaky patches, resembling <span class=\"customMeta\" data-dictid=\"74793d564816927771943ae4ba74b3\">oval</span> or <span class=\"customMeta\" data-dictid=\"0919f0017e1692777184ac3748841f\">circular</span> patches on the skin, are typical manifestations of <span class=\"customMeta\" data-dictid=\"afad60190f1692777182663499dc42\">atopic</span> dermatitis.</li>\n\t<li>Option c. <span class=\"customMeta\" data-dictid=\"73d23b64831692777195fed10389ac\">Pemphigus</span> <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> is an uncommon immune system problem that influences the skin and <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> layers. Painful blisters and sores <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> on the skin as well as inside the mouth, nose, and <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> area, indicating this condition.</li>\n\t<li>Option d. <span class=\"customMeta\" data-dictid=\"73d23b64831692777195fed10389ac\">Pemphigus</span> foliaceus is a skin and <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> membrane-affecting <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> disease. The development of crusty, <span class=\"customMeta\" data-dictid=\"a37fd1603c1692777198f87a4a51dc\">scaly</span> lesions or blisters on the skin, particularly on the face, scalp, and chest, is a sign of this condition. An <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> reaction in which the immune system makes antibodies that attack the proteins that hold skin cells(desmoglein-1) together is what causes <span class=\"customMeta\" data-dictid=\"73d23b64831692777195fed10389ac\">pemphigus</span> foliaceus.\u00a0<br />\n\t\u00a0</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/BqFFGJqaMYrdmRqMo1ir1714026946.PNG"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The <span class=\"marker\">shown instrument i</span>s:</p>\n\n<p><img src=\"https://image.prepladder.com/content/2MZGNp29FtA9ypW6uSt01710480746.png\" style=\"height:400px; width:400px\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Single cutting razor"
      },
      {
        "id": 2,
        "text": "Double cutting razor"
      },
      {
        "id": 3,
        "text": "Humby\u2019s knife"
      },
      {
        "id": 4,
        "text": "Finochietto knife"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct option :</strong>\u00a0C</p>\n\n<ul>\n\t<li>Humby's knife: This is the correct option. Humby's knife is a <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> instrument commonly used in <span class=\"customMeta\" data-dictid=\"bd8c7a20801692777195ae82c4501c\">plastic surgery</span> <strong>used for harvesting Skin Graft</strong></li>\n</ul>\n\n<p><strong>Incorrect options:</strong></p>\n\n<p><strong>Option A</strong>\u00a0Single cutting razor: This is an incorrect option. A single cutting razor typically refers to a handheld razor used for shaving or hair removal. It is not the instrument shown in the image.</p>\n\n<p><strong>Option B.</strong>\u00a0Double cutting razor: This is an incorrect option. A double cutting razor is not a specific <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> instrument, but it can refer to a type of razor blade that has cutting edges on both sides. It is not the instrument shown in the image.</p>\n\n<p><strong>Option D.</strong>\u00a0Finochietto knife: This is an incorrect option. Finochietto knife is not a commonly used <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> instrument, and it is not the instrument shown in the image.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/2MZGNp29FtA9ypW6uSt01710480746.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the most suitable approach to minimize the likelihood of keloid recurrence?</p>  <p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Intralesional steroids"
      },
      {
        "id": 2,
        "text": "Surgery"
      },
      {
        "id": 3,
        "text": "Cryotherapy"
      },
      {
        "id": 4,
        "text": "Electrocoagulation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Option : A</strong></p>\n\n<ul>\n\t<li>\u00a0Intralesional steroids: This is the correct option. <span class=\"customMeta\" data-dictid=\"e572b487a11692777190b9f3b05fd3\">Intralesional</span> <span class=\"customMeta\" data-dictid=\"a48ce797cd1692777199efc43b3e4c\">steroid</span> injections are commonly used in the management of keloids. Steroids, such as <span class=\"customMeta\" data-dictid=\"0959d6e38316927772007a46369f22\">triamcinolone</span> acetonide, are <span class=\"customMeta\" data-dictid=\"6a367ebd0c169277719091155a5b0f\">injected</span> directly into the <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> to help reduce inflammation, shrink the <span class=\"customMeta\" data-dictid=\"561a199cce1692777198225706434c\">scar</span> tissue, and <span class=\"customMeta\" data-dictid=\"6b3de87b7c16927771901326efbcd2\">inhibit</span> the overproduction of collagen. This can help prevent <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> <span class=\"customMeta\" data-dictid=\"1d849ebc9b1692777197d4af1fa8d2\">recurrence</span> after treatment.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option B:\u00a0</strong> Surgery: This is an incorrect option. <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">Surgical</span> removal of a <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> can be performed, but it carries a risk of <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> recurrence, as the <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> <span class=\"customMeta\" data-dictid=\"2afbd932801692777190be690704b3\">incision</span> itself can trigger the formation of new <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> tissue. Surgery alone is not usually sufficient to prevent <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> recurrence, and it is often combined with other treatments like <span class=\"customMeta\" data-dictid=\"a48ce797cd1692777199efc43b3e4c\">steroid</span> injections or radiation therapy.</p>\n\n<p><strong>Option C:</strong> Cryotherapy: This is an incorrect option. <span class=\"customMeta\" data-dictid=\"7a2baeba7416927771858fcddc798f\">Cryotherapy</span> involves freezing the <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> with liquid <span class=\"customMeta\" data-dictid=\"391d32291016927771932bab695579\">nitrogen</span> to destroy the <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> tissue. While <span class=\"customMeta\" data-dictid=\"7a2baeba7416927771858fcddc798f\">cryotherapy</span> can be effective in reducing the size of the keloid, it may not address the underlying cause and is not considered the most reliable method for preventing <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> recurrence.</p>\n\n<p><strong>Option D:</strong> Electrocoagulation: This is an incorrect option. <span class=\"customMeta\" data-dictid=\"418070340b16927771875ee13ba78c\">Electrocoagulation</span> involves using an <span class=\"customMeta\" data-dictid=\"f41aa22f791692777187728e68c9e7\">electric current</span> to destroy the <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> tissue. While it can be used as a treatment for keloids, it is not considered the primary method for preventing <span class=\"customMeta\" data-dictid=\"76020bd1501692777190627edf191b\">keloid</span> recurrence.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Identify the penile lesion shown in the image:</p>\n\n<p><img src=\"https://image.prepladder.com/content/0Kb6hT1WMPHd7HIXso1u1714027644.PNG\" style=\"height:299px; width:400px\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Genital wart"
      },
      {
        "id": 2,
        "text": "Pearly penile papule"
      },
      {
        "id": 3,
        "text": "Balanitis"
      },
      {
        "id": 4,
        "text": "Sebaceous gland prominence"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option: B</strong></p>\n\n<ul>\n\t<li>Pearly penile papule: <span class=\"customMeta\" data-dictid=\"6ce60ed27916927771950851569533\">Pearly penile papules</span> are small, dome-shaped bumps that appear around the <span class=\"customMeta\" data-dictid=\"f2f39af5b7169277718598133664e4\">corona</span> of the penis.\n\t<ul>\n\t\t<li>They are considered a normal <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> <span class=\"customMeta\" data-dictid=\"0efdcdc9e01692777201003c81c85a\">variant</span> and are not associated with any infection or disease.</li>\n\t\t<li>The <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> shown in the image closely resembles the appearance of pearly penile papules.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Incorrect Options\u00a0</strong></p>\n\n<p><strong>Option A</strong>. <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">Genital</span> wart: <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">Genital</span> warts are caused by the <span class=\"customMeta\" data-dictid=\"772d623b06169277718976e9488c37\">human papillomavirus</span> (HPV) and typically appear as small, raised, cauliflower-like growths on the <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> area. They can vary in size and may be pink, flesh-colored, or grayish in appearance. The <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> shown in the image does not resemble the typical appearance of <span class=\"customMeta\" data-dictid=\"0e919a208b16927771885d9c1f6662\">genital</span> warts.</p>\n\n<p><strong>Option C</strong>. Balanitis: <span class=\"customMeta\" data-dictid=\"67c78611fc1692777182807da0ac67\">Balanitis</span> refers to <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> of the <span class=\"customMeta\" data-dictid=\"e62ab50e7a16927771882c6a886b18\">glans</span> penis, typically caused by an infection or irritation. It can result in redness, swelling, and discomfort of the penis. The <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> shown in the image does not exhibit signs of <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> commonly seen in balanitis.</p>\n\n<p><strong>Option D</strong>. <span class=\"customMeta\" data-dictid=\"359edf0778169277719886070af9db\">Sebaceous</span> <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> prominence: <span class=\"customMeta\" data-dictid=\"359edf0778169277719886070af9db\">Sebaceous</span> <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> prominence, also known as Fordyce spots, refers to the visible <span class=\"customMeta\" data-dictid=\"359edf0778169277719886070af9db\">sebaceous</span> glands on the skin. They appear as small, yellowish or white bumps and are commonly found on the <span class=\"customMeta\" data-dictid=\"1588e9cd72169277718891982853b4\">genitals</span> and other areas of the body. The <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> shown in the image does not resemble the typical appearance of <span class=\"customMeta\" data-dictid=\"359edf0778169277719886070af9db\">sebaceous</span> <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> prominence.</p>",
    "question_images": [
      "https://image.prepladder.com/content/0Kb6hT1WMPHd7HIXso1u1714027644.PNG"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Tzancksmear as shown in the image shows:</p>\n\n<p><img src=\"https://image.prepladder.com/content/YK66HkkqTbMOappTF1i91714027698.PNG\" style=\"height:216px; width:500px\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Acanthosis"
      },
      {
        "id": 2,
        "text": "Acantholytic cells"
      },
      {
        "id": 3,
        "text": "Smudge cells"
      },
      {
        "id": 4,
        "text": "Anaplasia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct option B</strong></p>\n\n<ul>\n\t<li>A Tzanck <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> is a <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> test in <span class=\"customMeta\" data-dictid=\"66a39a9c7016927771862d3e161394\">dermatology</span> that involves scraping the base of a skin <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> and examining the cells under a microscope. It helps in the diagnosis of various blistering disorders and <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> infections. The given image shows Acantholytic cells, which are characterized by the loss of cell-to-cell adhesion, are typically seen in conditions such as <span class=\"customMeta\" data-dictid=\"73d23b64831692777195fed10389ac\">pemphigus</span> vulgaris, a blistering <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> disorder.</li>\n</ul>\n\n<p><strong>Incorrect options:</strong></p>\n\n<p><strong>Option A:</strong> <span class=\"customMeta\" data-dictid=\"e4cbd4af34169277718043cb22ccb5\">Acanthosis</span> refers to the thickening of the epidermis, which can be seen in conditions such as <span class=\"customMeta\" data-dictid=\"8b9f55244b1692777196b5ddb9a6bf\">psoriasis</span> or <span class=\"customMeta\" data-dictid=\"e4cbd4af34169277718043cb22ccb5\">acanthosis</span> nigricans.</p>\n\n<p><strong>Option C:</strong> Smudge cells are <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> lymphocytes seen in chronic lymphocytic leukemia.</p>\n\n<p><strong>Option D:</strong> <span class=\"customMeta\" data-dictid=\"a902c8504e1692777181225c0a5de1\">Anaplasia</span> refers to the loss of <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> <span class=\"customMeta\" data-dictid=\"55a682d72e16927771865bb4855ba3\">differentiation</span> and organization, typically seen in <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> tumors.</p>",
    "question_images": [
      "https://image.prepladder.com/content/YK66HkkqTbMOappTF1i91714027698.PNG"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient with fever and joint pain developed pigmentation on the nose after a few days of taking NSAIDs as shown below. What is the diagnosis ?</p>\n\n<p><img src=\"https://image.prepladder.com/content/xHQfZHYe3QI3S1GLBM9n1714027747.PNG\" style=\"height:671px; width:500px\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Melasma"
      },
      {
        "id": 2,
        "text": "Fixed drug eruption"
      },
      {
        "id": 3,
        "text": "Lichen planus"
      },
      {
        "id": 4,
        "text": "Chikungunya"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Option:</strong></p>\n\n<p><strong>Option\u00a0</strong>D. Chikungunya: <span class=\"customMeta\" data-dictid=\"32233fc0cb16927771847dd6e4b4b4\">Chikungunya</span> is a <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> infection transmitted by mosquitoes. It is characterized by symptoms such as high fever, joint pain, muscle pain, headache, and rash. The development of <span class=\"customMeta\" data-dictid=\"b5f46d7e431692777195efd6b43e9f\">pigmentation</span> on the nose after taking NSAIDs is not a typical feature of chikungunya. Other symptoms, such as joint pain and fever, are more indicative of this diagnosis.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Incorrect option:</strong></p>\n\n<p><strong>Option\u00a0</strong>A. Melasma: <span class=\"customMeta\" data-dictid=\"925677d28d1692777192ab31b9e6e4\">Melasma</span> is a common skin condition characterized by brown or gray patches on the face, particularly on the cheeks, forehead, and upper lip. It is not associated with fever or joint pain, so it is not the correct diagnosis in this case.</p>\n\n<p><strong>Option\u00a0</strong>B. Fixed drug eruption: Fixed <span class=\"customMeta\" data-dictid=\"4cbbddb4e216927771865577c1460f\">drug eruption</span> is a type of drug-induced skin reaction characterized by the development of well-defined, round or oval-shaped patches that recur in the same location each time the drug is taken. It typically presents as red or purplish lesions, but <span class=\"customMeta\" data-dictid=\"b5f46d7e431692777195efd6b43e9f\">pigmentation</span> on the nose is not a typical feature of fixed drug eruption.</p>\n\n<p><strong>Option</strong>C. <span class=\"customMeta\" data-dictid=\"d176adf87f1692777191722064a021\">Lichen</span> planus: <span class=\"customMeta\" data-dictid=\"d176adf87f1692777191722064a021\">Lichen</span> planus is a chronic <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> condition that can affect the skin, <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> membranes, hair, and nails. It presents as itchy, flat-topped, purplish bumps that may have white streaks or lines on them. <span class=\"customMeta\" data-dictid=\"b5f46d7e431692777195efd6b43e9f\">Pigmentation</span> on the nose is not a characteristic feature of <span class=\"customMeta\" data-dictid=\"d176adf87f1692777191722064a021\">lichen</span> planus.</p>",
    "question_images": [
      "https://image.prepladder.com/content/xHQfZHYe3QI3S1GLBM9n1714027747.PNG"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the usual cause of a condition characterized by blistering and peeling of more than 30% of the body's surface area?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Viral infection"
      },
      {
        "id": 2,
        "text": "Drugs"
      },
      {
        "id": 3,
        "text": "Fungal infection"
      },
      {
        "id": 4,
        "text": "Auto \u2013 immunity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option: B</strong></p>\n\n<ul>\n\t<li>A disease associated with the occurrence of blistering and peeling of over >30% of the body surface area is usually caused by drugs. This condition is known as <span class=\"customMeta\" data-dictid=\"ed682ddaee16927771995530b7101b\">Stevens-Johnson syndrome</span> (SJS) or toxic <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> <span class=\"customMeta\" data-dictid=\"254d4c2ea21692777193838ccf204d\">necrolysis</span> (TEN). SJS and TEN are severe skin reactions that can be life-threatening.</li>\n\t<li>Both SJS and TEN are typically <span class=\"customMeta\" data-dictid=\"3978e9614f1692777200abbe4cfa34\">triggered</span> by certain medications, most commonly antibiotics, anticonvulsants, and nonsteroidal anti-inflammatory drugs (NSAIDs). When a person has an adverse reaction to these medications, it can lead to widespread blistering and peeling of the skin, affecting more than 30% of the body surface area.</li>\n</ul>\n\n<p><strong>Incorrect Options</strong>:</p>\n\n<p><strong>Option\u00a0A</strong> <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">Viral</span> infection: While certain <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> infections can cause skin rashes and blistering, they are not typically associated with the extensive blistering and peeling of over >30% of the body surface area as seen in SJS or TEN. <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">Viral</span> infections that can cause skin rashes include <span class=\"customMeta\" data-dictid=\"e502fd2a6816927771880ae17fc163\">herpes</span> simplex virus, varicella-zoster virus (chickenpox and shingles), and measles, among others.</p>\n\n<p><strong>Option\u00a0C</strong> Fungal infection: Fungal infections generally do not cause the extensive blistering and peeling seen in SJS or TEN. Fungal infections of the skin, such as <span class=\"customMeta\" data-dictid=\"dbb566df9216927772009e22e9d078\">tinea</span> infections (ringworm), typically present as red, scaly, and itchy patches on the skin, rather than blistering and peeling.</p>\n\n<p><strong>Option\u00a0D</strong> Autoimmunity: <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">Autoimmune</span> conditions can result in various skin manifestations, but they are not specifically associated with the extensive blistering and peeling seen in SJS or TEN. <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">Autoimmune</span> blistering disorders, such as <span class=\"customMeta\" data-dictid=\"73d23b64831692777195fed10389ac\">pemphigus</span> and bullous pemphigoid, may cause blistering, but they do not typically lead to the widespread involvement of over >30% of the body surface area.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '28 Previous Year Questions';
        const quizFilename = '28-previous-year-questions-9f8643ac.html';
        let hierarchy = ["PrepLadder", "qBank", "Dermatology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>