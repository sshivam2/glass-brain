<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pathology Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is not an anti-apoptotic protein?",
    "choices": [
      {
        "id": 1,
        "text": "BCL-XL"
      },
      {
        "id": 2,
        "text": "BAX"
      },
      {
        "id": 3,
        "text": "BCL- 2"
      },
      {
        "id": 4,
        "text": "MCL-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>BAX</strong>&nbsp;and&nbsp;<strong>BAK</strong>&nbsp;are <strong>pro-apoptotic </strong>proteins.</p>\n<p>They get inserted into the mitochondrial membrane and result in the formation of channels. This allows proteins from the inner mitochondrial membrane to leak out into the cytoplasm.</p>\n<p>On the other hand,&nbsp;<strong>antiapoptotic</strong> proteins&nbsp;of the BCL2 family, like&nbsp;<strong>BCL-2</strong>&nbsp;and <strong>BCL</strong>-<strong>XL</strong>&nbsp;limit the escape of proapoptotic mitochondrial proteins.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which colour is imparted to Sudan IV when it is used to stain intracellular lipids?",
    "choices": [
      {
        "id": 1,
        "text": "Orange"
      },
      {
        "id": 2,
        "text": "Black"
      },
      {
        "id": 3,
        "text": "Pink"
      },
      {
        "id": 4,
        "text": "Blue"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Sudan IV </strong>imparts a orange-red colour to the contained lipids.</p>\n<p>Common special stains for lipids are:</p>\n<ul>\n<li>Sudan dyes (Sudan Black B, Sudan III, Sudan IV)</li>\n<li>Oil red O</li>\n<li>Osmium tetroxide</li>\n</ul>\n<p><strong>Sudan Black B stains the lipids blue-black</strong></p>\n<p><strong>Oil Red-O</strong> also imparts an orange-red color to the contained lipids.</p>\n<p><strong>Osmium tetroxide</strong> imparts brown black color to the lipids.(Electron microscopy)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which amongst the following molecules play an important role in transmigration of leucocytes.",
    "choices": [
      {
        "id": 1,
        "text": "P-selectin"
      },
      {
        "id": 2,
        "text": "ICAM-1"
      },
      {
        "id": 3,
        "text": "E-selectin"
      },
      {
        "id": 4,
        "text": "CD31"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>CD31</strong> (PECAM-1) helps in the <strong>transmigration of leucocytes</strong> across the wall of blood vessels.</p>\n<p>Selectins (Both P&amp;E) help in rolling; chemokines in activating the neutrophils to increase avidity of integrins; integrins help in firm adhesion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/741122911d994be9bafa38adb56a0b9cx1280x2060.JPEG"
    ]
  },
  {
    "text": "Neural Crest cells are present in?",
    "choices": [
      {
        "id": 1,
        "text": "Dentate gyrus of the hippocampus"
      },
      {
        "id": 2,
        "text": "Scattered all over different areas of the brain"
      },
      {
        "id": 3,
        "text": "Periaqueductal gray matter"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Neural Crest cells have been identified in two areas of adult brains, the <strong>dentate gyrus of the hippocampus </strong>and the<strong> subventricular zone (SVZ).</strong></p>\n<p>The long-established dogma that no new neurons are generated in the brain of normal adult mammals is now known to be incorrect. Neural precursor cells are capable of generating neurons, astrocytes, and oligodendrocytes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following types of Ehlers-Danlos Syndrome is Autosomal Recessive?",
    "choices": [
      {
        "id": 1,
        "text": "Classical"
      },
      {
        "id": 2,
        "text": "Vascular"
      },
      {
        "id": 3,
        "text": "Arthrochalasia"
      },
      {
        "id": 4,
        "text": "Kyphoscoliosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Kyphoscoliosis type(Type VI) is the most common autosomal recessive type </strong>and presents with Hypotonia, joint laxity, congenital scoliosis, ocular fragility.</p>\n<p>Dermatosparaxsis type of the Ehlers-Danlos Syndrome is also autosomal recessive. All the other forms are Autosomal dominant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following statements are true about the CDKN2A gene except?",
    "choices": [
      {
        "id": 1,
        "text": "It is located on chromosome 9"
      },
      {
        "id": 2,
        "text": "Decreased levels of the gene cause increased production of melanocytes"
      },
      {
        "id": 3,
        "text": "UVB irradiation inactivates the expression of the gene"
      },
      {
        "id": 4,
        "text": "It is a tumour suppressor gene"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>UVB irradiation <strong>activates the expression of the CDKN2A gene</strong>. This causes a transient growth arrest that may allow repair of UVB-induced DNA damage before cell division.</p>\n<p>The CDKN2A gene encodes for p16 and is a well known tumour suppressor gene, located on chromosome 9.</p>\n<p>Hereditary or acquired defects in CDK4A &nbsp;give rise to functional insufficiency of p16(INK4a) that permit the premature propagation of melanocytes harbouring potentially carcinogenic DNA damage.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A slide shows a neuron with a large amount of vacuoles, each representing a markedly distended lysosome filled with gangliosides, which stained positive for Sudan black B and a whorled configuration under an electron microscope.\nIdentify the condition?",
    "choices": [
      {
        "id": 1,
        "text": "Tay-Sachs disease"
      },
      {
        "id": 2,
        "text": "Niemann-Pick disease"
      },
      {
        "id": 3,
        "text": "Gaucher disease"
      },
      {
        "id": 4,
        "text": "Mucopolysacchridoses"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This slide is typical of<strong> Tay-sachs disease. The neurons are ballooned with cytoplasmic vacuoles, each representing a markedly distended lysosome filled with gangliosides.</strong></p>\n<p>With the electron microscope, several types of cytoplasmic inclusions can be visualized, the most prominent being whorled configurations within lysosomes composed of onion-skin layers of membranes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following statements are true about Che\u0301diak-Higashi syndrome except?",
    "choices": [
      {
        "id": 1,
        "text": "It affects melanocytes causing hyperpigmentation"
      },
      {
        "id": 2,
        "text": "It is a disorder of phagolysosomes"
      },
      {
        "id": 3,
        "text": "Abnormalities of platelets are seen"
      },
      {
        "id": 4,
        "text": "The gene associated with this disorder encodes a protein called LYST"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Che\u0301diak-Higashi syndrome affects melanocytes causing albinism.</p>\n<p>It is an autosomal recessive condition characterized by defective fusion of phagosomes and lysosomes in phagocytes and abnormalities in melanocytes, cells of the nervous system and platelets.</p>\n<p>The gene associated with this disorder encodes a large cytosolic protein called LYST, which regulates lysosomal trafficking.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "TP53 mutants can be discovered in the serum in all the following cancers except?",
    "choices": [
      {
        "id": 1,
        "text": "Colon Cancer"
      },
      {
        "id": 2,
        "text": "Lung Cancer"
      },
      {
        "id": 3,
        "text": "Pancreatic Cancer"
      },
      {
        "id": 4,
        "text": "Bladder Cancer"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In <strong>Bladder Cancer, </strong>TP53\u00a0mutants are found in<strong> Urine, </strong>and not in serum.</p>\n<p>Meanwhile, <strong>Cell-Free DNA markers</strong> such as <strong>TP53 mutants</strong> are found in the serum in Colon, Lung and Pancreatic cancers.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following cells seen in the lymph node are indicative of",
    "choices": [
      {
        "id": 1,
        "text": "Infectious Mononucleosis"
      },
      {
        "id": 2,
        "text": "Measles"
      },
      {
        "id": 3,
        "text": "CMV infection"
      },
      {
        "id": 4,
        "text": "Influenza"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given slide is pathognomonic for <strong>measles</strong>. This is a slide of a lymph node biopsy showing a <strong>Warthin&ndash;Finkeldey giant cell</strong> with large grapelike clusters of inclusion bodies.</p>\n<p>The lymphoid organs typically have marked follicular hyperplasia, large germinal centers, and randomly distributed multinucleate giant cells (Warthin-Finkeldey cells) which have eosinophilic nuclear and cytoplasmic inclusion bodies.</p>\n<p>These are <strong>pathognomonic of measles</strong> and are also found in the lung and sputum.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/28904c939b9b48519889bb1cff79f685.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A gross specimen of the brain shows  yellow discoloration of the brain parenchyma due to bilirubin accumulation, which is most prominent in the basal ganglia deep to the ventricle. The condition that is most likely is?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrops Fetalis"
      },
      {
        "id": 2,
        "text": "Coagulative necrosis"
      },
      {
        "id": 3,
        "text": "Stroke"
      },
      {
        "id": 4,
        "text": "Amyloidosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The gross section of the brain, is suggestive of <strong>Hydrops Fetalis, </strong>since its showing yellow discoloration of the brain parenchyma due to bilirubin accumulation, which is most prominent in the basal ganglia deep to the ventricle.</p>\n<p>CNS damage due to Kernicterus is the most serious threat in fetal hydrops.</p>\n<p>The affected brain is has a bright yellow color, particularly in <strong>the basal ganglia, thalamus, cerebellum, cerebral gray matter, and spinal cord.</strong></p>\n<p>Neural damage requires a blood bilirubin level <strong>greater than 20 mg/dL</strong> in term infants; in premature infants this threshold may be considerably lower.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false?",
    "choices": [
      {
        "id": 1,
        "text": "Herpes virus has been detected in atherosclerotic plaques"
      },
      {
        "id": 2,
        "text": "Early atherosclerotic lesions begin at sites of morphologically intact endothelium"
      },
      {
        "id": 3,
        "text": "Atherosclerotic ruptures are most common between 6PM and 12AM"
      },
      {
        "id": 4,
        "text": "Fatty streaks are the earliest lesions in atherosclerosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Atherosclerotic ruptures and consequent Infarctions<strong> are most common between 6AM and 12PM.</strong></p>\n<p>Adrenergic stimulation associated with waking and rising can increase systemic blood pressure, increasing the physical stresses on a given plaque. And is responsible for the circadian of acute myocardial infarction.</p>\n<p>Early lesions begin at sites of <strong>morphologically intact</strong> but <strong>dysfunctional endothelium</strong> These show increased permeability, enhanced leukocyte adhesion, and altered gene expression.</p>\n<p><strong>Herpesvirus, cytomegalovirus, and Chlamydia</strong> pneumoniae have all been detected in atherosclerotic plaques but not in normal arteries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the following can be associated with \u2018blueberry muffin baby\u2019 except?",
    "choices": [
      {
        "id": 1,
        "text": "Rubella"
      },
      {
        "id": 2,
        "text": "Neuroblastomas"
      },
      {
        "id": 3,
        "text": "Toxoplasmosis"
      },
      {
        "id": 4,
        "text": "Measles"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Measles is </strong>not associated with blueberry muffin baby<strong>.</strong></p>\n<p><strong>Disseminated neuroblastomas, Rubella, Toxoplasmosis </strong>and other<strong> TORCH syndrome </strong>may present with multiple <strong>cutaneous metastases </strong>that cause deep blue discoloration of the skin called blueberry muffin baby.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following about Tetralogy of Fallot is false except:",
    "choices": [
      {
        "id": 1,
        "text": "Clinical consequences depend on  the Ventricular Septal Defect"
      },
      {
        "id": 2,
        "text": "As the child grows the pulmonic orifice expands proportionally"
      },
      {
        "id": 3,
        "text": "Subpulmonary stenosis protects the pulmonary vasculature from pressure overload"
      },
      {
        "id": 4,
        "text": "Complete surgical repair is possible for TOF with pulmonary atresia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The subpulmonary stenosis, <strong>protects the pulmonary vasculature</strong> from pressure overload, and right ventricular failure is rare.</p>\n<p>The clinical consequences depend on the severity of the <strong>subpulmonary stenosis</strong>, as this determines the direction of blood flow and <strong>cyanosis</strong>. In infants with mild degrees of right ventricular obstruction often cyanosis is not present at birth. In infants with severe degrees of right ventricular obstruction neonatal cyanosis is noted immediately.</p>\n<p>As the child grows and the heart increases in size, the <strong>pulmonic orifice</strong> does not expand proportionally, making the obstruction progressively worse.</p>\n<p><strong>Complete surgical repair</strong> is possible for <strong>classic TOF</strong> but is more complicated for persons with pulmonary atresia and dilated bronchial arteries and may require multiple surgeries as the age progresses.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The morphologic hallmark of nonrheumatic, calcific aortic stenosis is?",
    "choices": [
      {
        "id": 1,
        "text": "Commissural fusion is usually seen"
      },
      {
        "id": 2,
        "text": "Heaped-up calcified masses within the aortic cusps"
      },
      {
        "id": 3,
        "text": "Involvement of the free edges of the cusps preventing opening"
      },
      {
        "id": 4,
        "text": "Functional valve area is increased by large nodular calcific deposits"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The morphologic hallmark of <strong>nonrheumatic, calcific</strong> aortic stenosis is <strong>heaped-up calcified masses within the aortic cusps</strong> that ultimately protrude through the outflow surfaces into the sinuses of Valsalva, preventing the opening of the cusps.</p>\n<p>The free edges of the cusps are usually not involved. Functional valve area is <strong>decreased</strong> by large nodular calcific deposits, causing obstruction to outflow.</p>\n<p>In contrast to rheumatic and congenital aortic stenosis, commissural fusion is not usually seen.</p>\n<p>Note:&nbsp;</p>\n<p><strong>Calcific Aortic Stenosis</strong> is the <strong>most common of all valvular abnormalities</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The structure marked by the arrow shows which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Pappenheimer bodies"
      },
      {
        "id": 2,
        "text": "Russel Bodies"
      },
      {
        "id": 3,
        "text": "Heinz bodies"
      },
      {
        "id": 4,
        "text": "Dohle bodies"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>D&ouml;hle bodies</strong> are <strong>patches of dilated endoplasmic reticulum</strong> see in neutrophils that <strong>appear as sky-blue cytoplasmic &ldquo;puddles.&rdquo;</strong></p>\n<p>In sepsis or severe inflammatory disorders (Ex: Kawasaki disease), leukocytosis is often accompanied by morphologic changes in the neutrophils, such as toxic granulations, D&ouml;hle bodies, and cytoplasmic vacuoles.</p>\n<p><strong>Russell bodies</strong> are eosinophilic, homogeneous immunoglobulin-containing cytoplasmic inclusions found in a plasma cell with an excessive synthesis of immunoglobulin.</p>\n<p><strong>Pappenheimer </strong>bodies are abnormal basophilic granules of iron found inside red blood cells composed of ferritin aggregates, or mitochondria containing aggregated ferritin.</p>\n<p><strong>Heinz bodies</strong> are inclusion bodies in red blood cells composed of denatured haemoglobin.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/71ac692189cf472485a81f51eb7c91b3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "CD 45 is present on which of the following WBCs?",
    "choices": [
      {
        "id": 1,
        "text": "All leucocytes"
      },
      {
        "id": 2,
        "text": "Mature T-cells"
      },
      {
        "id": 3,
        "text": "Mature B-cells"
      },
      {
        "id": 4,
        "text": "NK cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>CD45 </strong>is present <strong>on all leucocytes</strong> and is known as<strong> leukocyte common antigen (LCA).</strong></p>\n<p><strong>Mature T-Cells </strong>have CD3 and CD5.</p>\n<p><strong>Mature B-Cells </strong>have CD19, CD21 and CD23.</p>\n<p><strong>NK cells </strong>have CD16 and CD56.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about Polycythemia Vera (PCV)?\n1. Serum erythropoietin levels are low\n2. In about 2% of patients, PCV transforms into ALL",
    "choices": [
      {
        "id": 1,
        "text": "Only 1 is correct"
      },
      {
        "id": 2,
        "text": "Only 2 is correct"
      },
      {
        "id": 3,
        "text": "Both 1 and 2 are correct"
      },
      {
        "id": 4,
        "text": "Both 1 and 2 are wrong"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Since Polycythemia Vera is a form of <strong>primary Polycythemia,</strong> the <strong>erythropoietin levels are very low </strong>whereas secondary forms of polycythemia have high erythropoietin levels. The progenitor cells have markedly <strong>decreased requirements</strong> <strong>for erythropoietin</strong> and other hematopoietic growth factors due to constitutive <strong>JAK2 signaling.</strong></p>\n<p>In about <strong>2%</strong> of patients, PCV transforms to <strong>AML</strong> whereas transformation to ALL is rarely observed. In fact, the interesting point is, this <strong>AML</strong> clone often<strong> lacks JAK2 mutations</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about Kaposi Sarcoma (KS)?",
    "choices": [
      {
        "id": 1,
        "text": "KS has red-purple macules typically on the proximal lower extremities"
      },
      {
        "id": 2,
        "text": "HHV-8 acts as a cofactor in the progression of KS in HIV patients"
      },
      {
        "id": 3,
        "text": "Human Herpesvirus 8 is a necessary for development of KS"
      },
      {
        "id": 4,
        "text": "In African KS, numerous skin lesions are present"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Human Herpesvirus 8 is a necessary for development of KS</strong>.</p>\n<p>HIV acts as a cofactor for tumor progression, but identity of cofactor in non-HIV KS is controversial.</p>\n<p>Patches are red to purple macules seen on distal lower extremities which progress to raised plaques and the ultimately to nodules.</p>\n<p>In african KS also called lymphadenopathic KS, skin lesions are sparse and patients instead present with lymphadenopathy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false about Immunohemolytic anemia?",
    "choices": [
      {
        "id": 1,
        "text": "Warm Antibody Type is the most common form of immunohemolytic anemia"
      },
      {
        "id": 2,
        "text": "Cold Hemolysin Type has IgM Antibodies active below 37\u00b0C"
      },
      {
        "id": 3,
        "text": "Artificial mechanical cardiac valves cause more trauma than the porcine valves"
      },
      {
        "id": 4,
        "text": "Cold agglutinin antibodies appear transiently after infection with M. pneumoniae"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cold Hemolysin Type</strong> has<strong> IgG</strong>(Not IgM)<strong> Antibodies </strong>active below 37&deg;C.</p>\n<ul>\n<li><strong>Warm</strong> antibody type is the <strong>most common</strong> form of immune hemolytic anemia. 50% are idiopathic (primary); the others have a predisposing condition like SLE, lymphoid neoplasms or exposure to a drug.</li>\n<li>Significant hemolysis caused by trauma to red cells is with <strong>cardiac valve prostheses</strong> and <strong>microangiopathic disorders</strong>. Artificial mechanical cardiac valves cause more trauma than bioprosthetic porcine valves.</li>\n<li>Cold agglutinin antibodies(IgM) sometimes appear transiently <strong>following certain infections</strong>, such as with Mycoplasma pneumoniae, EBV, CMV, influenza virus, and HIV.</li>\n</ul>\n<p>Immuno Hemolytic Anemias are of 3 types:</p>\n<ol>\n<li><strong>Warm antibody </strong>type- <strong>IgG</strong> antibodies&nbsp;against Rh blood group antigens on the RBC surface&nbsp;at 37&deg;C</li>\n<li><strong>Cold agglutinin </strong>type- <strong>IgM</strong> antibodies bind to red cells below 37&deg;C</li>\n<li><strong>Cold hemolysin </strong>type- <strong>IgG</strong> antibodies bind to P blood group antigen on RBC surface below&nbsp;37&deg;C</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is true regarding pernicious anemia?",
    "choices": [
      {
        "id": 1,
        "text": "Elevated levels of homocysteine and decreased methylmalonic acid in the serum"
      },
      {
        "id": 2,
        "text": "Four types of antibodies can be present in the serum"
      },
      {
        "id": 3,
        "text": "Tapeworms can exacerbate a B12 deficiency state"
      },
      {
        "id": 4,
        "text": "Folate therapy should be initiated first"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tapeworms compete </strong>with the host<strong> for B12 and can induce a deficiency state.</strong></p>\n<p>Vit B12 is involved in 2 biochemical reactions:</p>\n<ol>\n<li>As a cofactor in the conversion of homocysteine to methionine (for DNA synthesis)</li>\n<li>Isomerization of methylmalonyl coenzyme A to succinyl coenzyme A (for normal myelination of neurons)</li>\n</ol>\n<div class=\"page\" title=\"Page 655\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Folic acid is involved only in 1st reaction, not 2nd one.</p>\n<p>In <strong>B12 deficiency</strong> \u2013 Both<strong> Homocysteine and Methylmalonic acid are elevated.</strong></p>\n<p>In<strong> Folate deficiency \u2013 </strong>Only<strong> Homocysteine </strong>is<strong>\u00a0elevated</strong>, no neurological deficits.</p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Three types of autoantibodies are present </strong>in Pernicious anemia</p>\n<ul>\n<li>Type I antibody - \u00a0blocks the binding of vitamin B12 to intrinsic factor.\u00a0</li>\n<li>Type II antibodies - prevent binding of the intrinsic factor \u2013 vitamin B12 complex to its ileal receptor.</li>\n<li>Type III antibodies - recognize and bind to the \u03b1 and \u03b2 subunits of the gastric proton pump.</li>\n</ul>\n<p><strong>B12 deficiency should be excluded first before initiating folate therapy in megaloblastic anemia. </strong>Because Hematologic symptoms of vitamin B12 deficiency anemia also respond to folate therapy. However, folate does not prevent (and may even exacerbate) the neurologic deficits.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common form of plasma cell dyscrasia?",
    "choices": [
      {
        "id": 1,
        "text": "Plasmacytoma"
      },
      {
        "id": 2,
        "text": "Monoclonal Gammopathy of Uncertain Significance (MGUS)"
      },
      {
        "id": 3,
        "text": "POEMS syndrome"
      },
      {
        "id": 4,
        "text": "Multiple myeloma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Monoclonal Gammopathy of Uncertain Significance (MGUS)</strong> is the most common plasma-cell dyscrasia. It&nbsp;&nbsp;occurring in about 3% of persons older than 50 years of age and in about 5% of individuals older than 70 years of age.</p>\n<p><strong>POEMS</strong> (polyneuropathy, organomegaly, endocrinopathy, monoclonal gammopathy, and skin changes) syndrome is a rare paraneoplastic condition associated with a plasma-cell dyscrasia.</p>\n<table style=\"width: 392px;\">\n<tbody>\n<tr>\n<td style=\"width: 94px;\">MGUS</td>\n<td style=\"width: 144px;\">Smouldering Myeloma</td>\n<td style=\"width: 148px;\">Multiple Myeloma</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Asymptomatic</td>\n<td style=\"width: 144px;\">Asymptomatic</td>\n<td style=\"width: 148px;\">Symptomatic</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">M protein in serum&nbsp;&lt;3g/dL</td>\n<td style=\"width: 144px;\">\n<p>M-protein in serum:</p>\n<ul>\n<li>IgG &ge;3 g/dL,</li>\n<li>IgA &gt;1 g/dL</li>\n</ul>\n</td>\n<td style=\"width: 148px;\">M protein in serum and urine</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Bone Marrow (BM) plasma cells &lt;10%</td>\n<td style=\"width: 144px;\">BM plasma cells 10-60%</td>\n<td style=\"width: 148px;\">BM plasma cells &gt;10%</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">No other organ or tissue impairment</td>\n<td style=\"width: 144px;\">No other organ or tissue impairment</td>\n<td style=\"width: 148px;\">Related impairment is seen.<br />(CRAB)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Reid Index is:",
    "choices": [
      {
        "id": 1,
        "text": "Ratio of the thickness of the mucous gland layer to the thickness of the bronchial wall"
      },
      {
        "id": 2,
        "text": "Normal value is 0.5"
      },
      {
        "id": 3,
        "text": "Ratio of the thickness of the mucous gland layer to the thickness of the cartilage"
      },
      {
        "id": 4,
        "text": "Normal value is 0.6"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Reid Index</strong> is the ratio of the <strong>thickness of the mucous gland layer to the thickness of the bronchial wall </strong>(between the epithelium and the cartilage).</p>\n<p>It is <strong>normally 0.4</strong> and is <strong>increased in chronic bronchitis</strong>, usually in proportion to the severity and duration of the disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df730d1aa65d4ea396d703b225685534x1280x1391.JPEG"
    ]
  },
  {
    "text": "A pathologist is examining the following histopathological specimen from a patient with watery diarrhea and abdominal pain. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Whipple\u2019s disease"
      },
      {
        "id": 2,
        "text": "Clostridium difficile colitis"
      },
      {
        "id": 3,
        "text": "Acute exacerbation of Crohn's disease"
      },
      {
        "id": 4,
        "text": "Celiac sprue"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given histopathological image&nbsp;shows <strong>superficially damaged crypts</strong> with a typical pattern of mucopurulent exudates (neutrophils) emanating from a crypt that resembles a <strong>volcanic eruption</strong>. This is pathognomonic of <strong><em>Clostridium difficile</em> colitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/03ffbbda47934195b763cae18fc108df.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b37eda41601d410d8470d76ad64d6238x1280x1229.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/64e289da93484f5ebc38a4e6bbd3d352x1280x1230.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is incorrect about Peliosis hepatis?",
    "choices": [
      {
        "id": 1,
        "text": "It is a primary sinusoidal dilatation of liver"
      },
      {
        "id": 2,
        "text": "It is associated with Tuberculosis, AIDS and cancers"
      },
      {
        "id": 3,
        "text": "Clinical signs are absent even in advanced peliosis"
      },
      {
        "id": 4,
        "text": "Brucella species have been seen in the sinusoidal endothelial cells in AIDS-associated peliosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Peliosis hepatis: Peliosis hepatis is a <strong>distinct form of</strong> <strong>sinusoidal dilation.</strong></p>\n<p><strong>Primary sinusoidal dilatation</strong> of liver is due to&nbsp;conditions which impede efflux of hepatic blood in liver results in blood-filled sinusoids/ cystic spaces in the liver&nbsp;</p>\n<div class=\"page\" title=\"Page 869\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Peliosis is also found in patients with<strong>&nbsp;Tuberculosis, AIDS, </strong>&nbsp;<strong>posttransplantation immunodeficiency and Sex hormone administration (anabolic steroids, OCPs, Danazol)&nbsp;</strong></p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 882\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Bartonella species have been seen in the sinusoidal endothelial cells in AIDS-associated peliosis.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Clinical signs are often absent even in advanced stages, but potentially fatal intra-abdominal hemorrhage or hepatic failure may occur.</p>\n<p>Peliotic lesions usually <strong>disappear after correction of the underlying causes.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 31-year-old man presented with a history of recurrent UTIs and hematuria. Urine culture showed growth of E. coli. Flexible cystoscopy revealed yellow-brown soft plaques with a central umbilication. Microscopy of the plaque showed Michaelis-Gutmann bodies. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Xanthogranulomatous cystitis"
      },
      {
        "id": 2,
        "text": "Malakoplakia"
      },
      {
        "id": 3,
        "text": "Follicular cystitis"
      },
      {
        "id": 4,
        "text": "Polypoid cystitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical<strong>&nbsp;</strong>scenario with the presence of Michaelis-Gutmann bodies&nbsp;is suggestive of <strong>malakoplakia.</strong></p>\n<p>Malakoplakia is a chronic inflammatory reaction resulting from acquired <strong>defects </strong>in<strong> phagocyte function</strong>, commonly affecting the urinary bladder. It can also be seen in other organ&nbsp;systems like the&nbsp;gastrointestinal tract, female genital tract, and central nervous system.</p>\n<p>It is seen in chronic bacterial infection, mostly by <em><strong>Escherichia&nbsp;coli</strong></em> or occasionally <em><strong>Proteus</strong></em> species.&nbsp;&nbsp;</p>\n<p>Grossly, it presents as soft, <strong>yellow-brown</strong>, slightly raised <strong>mucosal plaques</strong>. Microscopically, the following findings are seen:</p>\n<ul>\n<li>Large,<strong> foamy macrophages </strong>containing -\n<ul>\n<li>Abundant granular cytoplasm due to undigested bacterial products</li>\n<li><strong>Michaelis-Gutmann</strong>&nbsp;bodies - <strong>PAS</strong>-<strong>positive</strong> basophilic concretions due to iron and calcium deposits in lysosomes</li>\n</ul>\n</li>\n<li>Occasional multinucleated giant cells and lymphocytes</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1838c3ab42cb4c83bdd564fd72f0a7dbx1280x1079.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is incorrect regarding neutrophil extracellular traps (NETs)?",
    "choices": [
      {
        "id": 1,
        "text": "They prevent the spread of the microbes by trapping them in the fibrils"
      },
      {
        "id": 2,
        "text": "Nuclear chromatin in the NETs are the source of nuclear antigens in SLE"
      },
      {
        "id": 3,
        "text": "In sepsis, platelet activation is involved in NET formation"
      },
      {
        "id": 4,
        "text": "NETs play a major role in phagocytosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p class=\"p1\">Neutrophil extracellular traps (<strong>NETs</strong>) are <strong>not involved</strong> in <strong>phagocytosis</strong>. This is because the nuclei of the neutrophils are lost during NET&nbsp;formation, leading to their death. Hence, they cannot phagocytose pathogens.</p>\n<p>NETs&nbsp;are <strong>networks </strong>of <strong>extracellular fibers</strong>&nbsp;that consist of a viscous meshwork of nuclear chromatin. They&nbsp;<strong>trap microbes</strong> at sites of infection, preventing their further spread. They also&nbsp;contain a high concentration of <strong>antimicrobial proteins</strong> like neutrophil elastase, cathepsin G, and histones that have a high affinity for DNA.</p>\n<p>They are <strong>produced by neutrophils</strong> in response to the following triggers:</p>\n<ul>\n<li>Pathogens<strong>&nbsp;</strong>- Mainly bacteria and fungi</li>\n<li>Inflammatory mediators<strong> -</strong>\n<ul>\n<li>Chemokines</li>\n<li>Cytokines (mainly interferons)</li>\n<li>Complement proteins</li>\n<li>Reactive oxygen species</li>\n</ul>\n</li>\n</ul>\n<p>NETs have also been detected in the blood during <strong>sepsis.</strong> In this condition,<strong> platelet activation</strong> is involved in NET formation</p>\n<p>The <strong>nuclear chromatin</strong> in the <strong>NETs</strong> is a <strong>source</strong> of <strong>nuclear antigens</strong>&nbsp;(histones and associated DNA) in systemic autoimmune diseases, particularly systemic lupus erythematosus (<strong>SLE</strong>). This triggers autoantibody production and further clinical manifestations.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following traits are examples of co-dominance inheritance?",
    "choices": [
      {
        "id": 1,
        "text": "2, 3 and 4 only"
      },
      {
        "id": 2,
        "text": "1, 2 and 4 only"
      },
      {
        "id": 3,
        "text": "1 and 5 only"
      },
      {
        "id": 4,
        "text": "3, 4 and 5 only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>ABO </strong>blood group and<strong> HLA </strong>are both examples of<strong> codominant inheritance.</strong></p>\n<p>In a\u00a0<strong>codominant phenotype</strong>, alleles of a gene pair in a heterozygote are fully expressed. Thereby resulting in an offspring with a phenotype that is neither dominant nor recessive and both the alleles of a gene pair contributes to the phenotype.</p>\n<p><strong>Mendelian traits</strong>\u00a0are usually described as dominant or recessive:</p>\n<ul>\n<li>A dominant allele produces a <strong>dominant phenotype</strong> in individuals who have <strong>one copy</strong> of the allele, which can come from just one parent.</li>\n<li>A recessive allele produces a <strong>recessive phenotype</strong>, in individuals who have <strong>two copies</strong> of the allele, one from each parent.</li>\n</ul>\n<p>The illustration below shows the codominant inheritance pattern of the blood group.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b95007bb15134c709129143503f01a65x939x933.PNG"
    ]
  },
  {
    "text": "Which of the following occurs due to gain-of-function mutations in NOD-Like receptors?",
    "choices": [
      {
        "id": 1,
        "text": "Granulomatous diseases"
      },
      {
        "id": 2,
        "text": "Autoinflammatory syndromes"
      },
      {
        "id": 3,
        "text": "Autoimmune conditions"
      },
      {
        "id": 4,
        "text": "Malignancy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> gain of function</strong> mutations in<strong> NOD-Like receptors</strong> (NLRs) result in&nbsp;periodic fever syndromes called&nbsp;<strong>autoinflammatory syndromes</strong>.</p>\n<p>They are a group of clinical conditions characterised by <strong>recurrent inflammatory</strong> episodes. This disorder is marked by abnormally increased inflammation, mediated predominantly by cells and molecules of the<strong> innate immune</strong> system, with a significant host predisposition.&nbsp;</p>\n<p>NOD-like receptors<strong>&nbsp;</strong>are<strong> cytosolic receptors</strong> that&nbsp;signal via a cytosolic multiprotein complex called the <strong>inflammasome</strong>. This activates<strong>&nbsp;caspase-1</strong>&nbsp;that generates biologically active form of<strong>&nbsp;interleukin-1</strong> (IL-1).&nbsp;IL-1 is a mediator of inflammation that recruits leukocytes and induces fever.&nbsp;The autoinflammatory syndromes <strong>respond</strong> very well to treatment with<strong> IL-1 antagonists</strong>.</p>\n<p>Note: Autoimmune diseases&nbsp;result from T&nbsp;and B-lymphocyte reactions against self-antigens.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a feature of lobular breast carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Often bilateral"
      },
      {
        "id": 2,
        "text": "Multicentricity within the same breast"
      },
      {
        "id": 3,
        "text": "Loss of E-cadherin"
      },
      {
        "id": 4,
        "text": "Extensive desmoplasia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>There is <strong>no or very slight desmoplastic response </strong>seen<strong>\u00a0</strong>in\u00a0<strong>lobular carcinomas</strong>.\u00a0</p>\n<p>Desmoplasia refers to <strong>collagenous stromal proliferation</strong> induced by tumor cells which is essential for tumor growth and spread. It results in hard and stony tumors. However, this is not seen in lobular carcinoma. This is likely due to the <strong>loss</strong> <strong>of expression of CDH1</strong>, the gene that encodes<strong>\u00a0e-cadherin\u00a0</strong>(normally maintains intercellular adhesiveness). This also results in\u00a0<strong>disaggregation</strong> of cells.</p>\n<p>Lobular carcinomas are often <strong>bilateral</strong>\u00a0and <strong>multicentric</strong>. It shows characteristic <strong>metastatic spread</strong>, often involving:</p>\n<ul>\n<li>Peritoneum and retro\u00ad peritoneum</li>\n<li>Leptomeninges (carcinomatous meningitis)</li>\n<li>Gastrointestinal tract</li>\n<li>Ovaries</li>\n<li>Uterus</li>\n</ul>\n<p>Histopathological image of invasive lobular carcinoma of breast showing <strong>discohesive cells</strong> with few <strong>signet ring cells</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81c745e29c1a433b85c60766411f425ex1280x1398.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/48cd7ae153ed4a4caaa68be83a1e2eb3x1280x1399.JPEG"
    ]
  },
  {
    "text": "Which tumor is a part of the paraneoplastic syndrome called Leser-Tr\u00e9lat sign?",
    "choices": [
      {
        "id": 1,
        "text": "Seborrheic keratoses"
      },
      {
        "id": 2,
        "text": "Eccrine poroma"
      },
      {
        "id": 3,
        "text": "Cylindroma"
      },
      {
        "id": 4,
        "text": "Dysplastic nevus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Seborrheic keratoses</strong> may suddenly appear in large numbers as part of a paraneoplastic syndrome known as <strong>Leser&ndash;Tr&eacute;lat sign.</strong></p>\n<p>It is&nbsp;possibly due to the stimulation of keratinocytes by transforming growth factor-&alpha; (TGF-&alpha;), which is produced by tumor cells, most commonly from&nbsp;<strong>carcinomas of the gastrointestinal tract</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f23bfdca90424850814ac43f78ebd501x841x704.JPEG"
    ]
  },
  {
    "text": "Which of these are the earliest morphologic markers of neuronal cell death?",
    "choices": [
      {
        "id": 1,
        "text": "White neurons"
      },
      {
        "id": 2,
        "text": "Red neurons"
      },
      {
        "id": 3,
        "text": "Gliosis"
      },
      {
        "id": 4,
        "text": "Axonal reaction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Red neurons</strong> are the earliest morphologic markers of neuronal cell death.</p>\n<p>Acute neuronal injury\u00a0refers to a spectrum of changes that accompany acute CNS hypoxia / ischemia or other acute insults and reflect the<strong> earliest</strong> morphologic markers of neuronal cell death. They are evident by<strong> about 12 to 24 hours</strong> after an irreversible insult.</p>\n<p>Morphologic features consist of:</p>\n<ul>\n<li>Shrinkage of the cell body</li>\n<li><strong>Pyknosis</strong> of the nucleus</li>\n<li>Disappearance of the nucleolus</li>\n<li>Loss of Nissl substance</li>\n<li>Intense eosinophilia of the cytoplasm.</li>\n</ul>\n<p>Stages of neuronal injury and their pathological features are given below:</p>\n<table style=\"height: 135px; width: 402px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 91px; text-align: center;\"><strong>Stages</strong></td>\n<td style=\"width: 88px; text-align: center;\"><strong>Time</strong></td>\n<td style=\"width: 215px; text-align: center;\"><strong>Features\u00a0</strong></td>\n</tr>\n<tr>\n<td style=\"width: 91px; text-align: center;\">Early change</td>\n<td style=\"width: 88px; text-align: center;\">12\u201324 hr</td>\n<td style=\"width: 215px; text-align: center;\"><strong>Red neuron</strong></td>\n</tr>\n<tr>\n<td style=\"width: 91px; text-align: center;\">Subacute change</td>\n<td style=\"width: 88px; text-align: center;\">24 hr\u20132 weeks</td>\n<td style=\"width: 215px; text-align: center;\">Necrosis, macrophages, vascular proliferation, gliosis</td>\n</tr>\n<tr>\n<td style=\"width: 91px; text-align: center;\">Repair</td>\n<td style=\"width: 88px; text-align: center;\">2 weeks +</td>\n<td style=\"width: 215px; text-align: center;\">Removal of necrosis, gliosis completed, loss of CNS architecture</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following histological image depicts a pathology in which of the following sites?",
    "choices": [
      {
        "id": 1,
        "text": "Vagina"
      },
      {
        "id": 2,
        "text": "Cervix"
      },
      {
        "id": 3,
        "text": "Fallopian tube"
      },
      {
        "id": 4,
        "text": "Vulva"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given histopathological image shows<strong>\u00a0benign papillary projections</strong> covered with columnar secretory epithelium and underlying <strong>myoepithelial cells</strong>. These\u00a0are commonly seen in <strong>papillary hidradenoma </strong>of the<strong> vulva.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/358b0dc5697d4fafbf9b398807e2c0f4.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d5364b03bc9d4b07bba49c1309388e27x1280x1453.JPEG"
    ]
  },
  {
    "text": "What percentage of platelets does the spleen normally sequester?",
    "choices": [
      {
        "id": 1,
        "text": "5%"
      },
      {
        "id": 2,
        "text": "15%"
      },
      {
        "id": 3,
        "text": "25%"
      },
      {
        "id": 4,
        "text": "35%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>spleen</strong> normally sequesters<strong> 30% to 35%</strong> of <strong>platelets</strong>. This can rise to 80% to 90% when the spleen is enlarged, producing moderate degrees of thrombocytopenia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cells secretes VIP in pancreas?",
    "choices": [
      {
        "id": 1,
        "text": "Delta cell"
      },
      {
        "id": 2,
        "text": "PP cell"
      },
      {
        "id": 3,
        "text": "F cell"
      },
      {
        "id": 4,
        "text": "D1 cell"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Vasoactive intestinal peptide (VIP) is secreted by <strong>D1 cells</strong> in the endocrine pancreas.</p>\n<p>Endocrine pancreas consists of islets of Langerhans, which contain four major and two minor cell types.</p>\n<ul>\n<li>Four main types are &beta;, &alpha;, &delta;, and PP (pancreatic polypeptide) cells:\n<ul>\n<li><strong>&alpha; cells secrete glucagon</strong>, which stimulates glycogenolysis in the liver and thus increases blood sugar.</li>\n<li><strong>&beta; cells produce insulin</strong>, which regulates glucose utilization in tissues and reduces blood glucose levels.</li>\n<li><strong>&delta; cells secrete somatostatin</strong>, which suppresses both insulin and glucagon release.</li>\n<li><strong>PP cells secrete pancreatic polypeptide</strong>, which exerts several gastrointestinal effects, such as stimulation of secretion of gastric and intestinal enzymes and inhibition of intestinal motility. These cells not only are present in islets but are also scattered in the exocrine pancreas.</li>\n</ul>\n</li>\n<li>Minor cell types:\n<ul>\n<li><strong>D1 cells secrete VIP</strong>, a hormone that induces glycogenolysis and hyperglycemia; it also stimulates gastrointestinal fluid secretion and causes secretory diarrhea.</li>\n<li><strong>Enterochromaffin cells synthesize serotonin</strong> and are the source of pancreatic tumors that cause the carcinoid syndrome.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old woman comes with complaints of double vision that gets worse after she reads a book or watches television. She also has drooping of the eyelids that gets better after a nap. Serology is positive for anti-acetylcholine receptor antibodies. Which of the following is more commonly associated with this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Thymoma"
      },
      {
        "id": 2,
        "text": "Thymic hyperplasia"
      },
      {
        "id": 3,
        "text": "Medullary carcinoma of thyroid"
      },
      {
        "id": 4,
        "text": "Small cell lung carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>myasthenia gravis</strong>. It is most commonly associated with&nbsp;<strong>thymic hyperplasia&nbsp;</strong>(65% of cases).</p>\n<p><strong>Thymoma&nbsp;</strong>is seen in around&nbsp;10% of patients with myasthenia gravis.</p>\n<p>Myasthenia&nbsp;gravis&nbsp;is a neuromuscular disorder that is characterized by&nbsp;<strong>weakness</strong>&nbsp;and the&nbsp;<strong>fatigability</strong>&nbsp;of skeletal muscles. It is due to the <strong>autoantibody</strong>-mediated destruction of the&nbsp;<strong>acetylcholine receptors</strong>&nbsp;(AChRs) at the neuromuscular junction.&nbsp;This consequentially leads to a&nbsp;decreased transmission&nbsp;at the&nbsp;neuromuscular&nbsp;(myoneural)&nbsp;junction.&nbsp;</p>\n<p>There is a characteristic pattern of muscle involvement. <strong>Lid</strong> and <strong>extraocular muscles</strong> (diplopia and ptosis) are <strong>involved early</strong> in the disease course. The facial muscles weakness can produce a snarling expression, weakness in chewing, and nasal timbre to the voice.&nbsp;<strong>Weakness</strong> increases with repeated use of the muscles and <strong>improves</strong> with <strong>rest</strong>.&nbsp;The<strong> r</strong><strong>eflexes</strong> are<strong> normal</strong>&nbsp;in this condition.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 17-year-old girl who was evaluated for short height was found to have an enlarged pituitary gland. Her T4 was low and TSH was increased. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "TSH-secreting pituitary tumor"
      },
      {
        "id": 2,
        "text": "Thyroid target receptor insensitivity"
      },
      {
        "id": 3,
        "text": "Toxic adenoma"
      },
      {
        "id": 4,
        "text": "Primary hypothyroidism"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The child has low T4 and high thyroid-stimulating hormone (TSH). The most likely diagnosis is primary hypothyroidism because primary hypothyroidism is associated with <strong>high TSH with low T4. </strong>It&nbsp;is due to defects in the thyroid gland itself.</p>\n<p>Other options:</p>\n<ul>\n<li>In cases of TSH-secreting pituitary tumor, increased TSH with increased T3 and T4 would be seen.</li>\n<li>In thyroid hormone resistance,&nbsp;<strong>increased T4 as well as T3 </strong>with <strong>unsuppressed TSH&nbsp;</strong>will be seen.</li>\n<li>In toxic adenoma, T4 is high and TSH is low.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d09a076189ec4a32bfa2609700359cd6x723x517.GIF"
    ]
  },
  {
    "text": "Mesangial deposits are seen in which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 5"
      },
      {
        "id": 2,
        "text": "3, 4, 5"
      },
      {
        "id": 3,
        "text": "2, 3, 4"
      },
      {
        "id": 4,
        "text": "1, 2, 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Mesangial deposits</strong> are seen in the following conditions:</p>\n<ul>\n<li>IgA nephropathy <strong>(Berger disease)</strong></li>\n<li><strong>Henoch&ndash;Schonlein purpura</strong></li>\n<li><strong>Rapidly progressive&nbsp;glomerulonephritis</strong></li>\n<li>Lupus nephritis classes I and II</li>\n<li>Resolving postinfectious&nbsp; glomerulonephritis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which condition is Alzheimer type II astrocyte seen?",
    "choices": [
      {
        "id": 1,
        "text": "Alzheimer's disease"
      },
      {
        "id": 2,
        "text": "Hepatic encephalopathy"
      },
      {
        "id": 3,
        "text": "Astrocytoma"
      },
      {
        "id": 4,
        "text": "Gliosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Alzheimer type II astrocyte</strong> is seen in <strong>hepatic encephelopathy</strong>.</p>\n<p>Alzheimer type II astrocyte (unrelated to Alzheimer disease but first described by the same individual):</p>\n<ul>\n<li>It is a grey-matter cell with a large nucleus, pale-&shy;staining central chromatin, an intranuclear glycogen droplet, and a prominent nuclear membrane and nucleolus.</li>\n<li>It is mainly seen in individuals with <strong>long-&shy;standing hyperammonemia due to chronic liver disease, Wilson disease, or hereditary metabolic disorders of the urea cycle.</strong></li>\n<li>In gliosis, astrocytes are called <strong>gemistocytic astrocytes</strong>.</li>\n<li>In hepatic encephalopathy, astrocytes with enlarged nuclei and minimal reactive cytoplasm (known as Alzheimer type II cells) appear in the cerebral cortex, basal ganglia,&nbsp;and other subcortical gray-matter regions.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are collecting a blood sample to send for prothrombin time in a patient in the ward. Which of the following is true about this investigation?",
    "choices": [
      {
        "id": 1,
        "text": "Sample must be immediately refrigerated"
      },
      {
        "id": 2,
        "text": "Sample must contain platelet-rich plasma"
      },
      {
        "id": 3,
        "text": "Test must be done within 2 hours of sample collection"
      },
      {
        "id": 4,
        "text": "Sample is activated with kaolin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The test for <strong>prothrombin time</strong> is done <strong>within</strong> <strong>2 hours</strong>.</p>\n<p>The differences between PT and aPTT are:</p>\n<table style=\"height: 139px;\" width=\"410\">\n<tbody>\n<tr>\n<td style=\"width: 129.328px;\"><strong>Feature</strong></td>\n<td style=\"width: 129.328px;\"><strong>PT</strong></td>\n<td style=\"width: 129.344px;\"><strong>aPTT</strong></td>\n</tr>\n<tr>\n<td style=\"width: 129.328px;\">Coagulation pathway tested</td>\n<td style=\"width: 129.328px;\">Extrinsic and common</td>\n<td style=\"width: 129.344px;\">Intrinsic and common</td>\n</tr>\n<tr>\n<td style=\"width: 129.328px;\">Normal value</td>\n<td style=\"width: 129.328px;\">11-13 seconds</td>\n<td style=\"width: 129.344px;\">25-35 seconds</td>\n</tr>\n<tr>\n<td style=\"width: 129.328px;\">Sample</td>\n<td style=\"width: 129.328px;\">Platelet-poor plasma</td>\n<td style=\"width: 129.344px;\">Platelet-poor plasma</td>\n</tr>\n<tr>\n<td style=\"width: 129.328px;\">Activating agent</td>\n<td style=\"width: 129.328px;\">Thomboplastin</td>\n<td style=\"width: 129.344px;\">\n<p>Kaolin</p>\n<p>Silica</p>\n<p>Ellagic acid</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 8-month-old child presents with mental retardation, blindness, and muscle weakness. On evaluation, deficiency of hexosaminidase \u03b1-subunit is found. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Tay\u2013Sachs disease"
      },
      {
        "id": 2,
        "text": "Sandhoff disease"
      },
      {
        "id": 3,
        "text": "Krabbe disease"
      },
      {
        "id": 4,
        "text": "Gaucher disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario and <strong>hexosaminidase &alpha;-subunit</strong> deficiency are seen in <strong>Tay&ndash;Sachs disease</strong>.</p>\n<p><span style=\"font-size: 10pt;\"><strong>Sphingolipidoses</strong> with their deficient enzyme:</span></p>\n<ol>\n<li><strong>G<sub>M1&nbsp;</sub>Gangliosidoses -&nbsp;</strong>G<sub>M1&nbsp;</sub>Ganglioside&nbsp;&beta;- galactosidase deficiency\n<ul>\n<li>Type 1- infantile, generalizsed</li>\n<li>Type 2- juvenile</li>\n</ul>\n</li>\n<li><strong>G<sub>M2&nbsp;</sub>Gangliosidosis:</strong>\n<ul>\n<li>Tay<strong>&ndash;</strong>Sachs disease - Hexosaminidase &alpha;-subunit</li>\n<li>Sandhoff disease - Hexosaminidase &beta;-subunit</li>\n<li>G<sub>M2&nbsp;</sub>Gangliosidosis variant AB - Ganglioside activator protein</li>\n</ul>\n</li>\n</ol>\n<p>Note:&nbsp;Tay&ndash;Sachs disease&nbsp;is<strong>&nbsp;</strong>the most common form of GM2 gangliosidosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding mucinous tumors of the ovary?",
    "choices": [
      {
        "id": 1,
        "text": "Vast majority  are malignant tumors"
      },
      {
        "id": 2,
        "text": "It is rarely bilateral."
      },
      {
        "id": 3,
        "text": "It occurs principally in middle adult life"
      },
      {
        "id": 4,
        "text": "Mutation of the KRAS proto-oncogene is seen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The vast<strong> majority</strong> of <strong>mucinous tumors</strong> of the\u00a0ovary are<strong> benign </strong>or<strong> borderline</strong> tumors (not malignant).</p>\n<p>It occurs principally in <strong>middle adult life</strong> and is rare before puberty and after menopause. The surface of the ovary is rarely involved, they are <strong>rarely</strong>\u00a0<strong>bilateral.\u00a0</strong>It is associated with the <strong>mutation</strong> of\u00a0<strong>KRAS </strong>proto-oncogene.\u00a0</p>\n<p>Grossly it is <strong>multiloculated</strong> and filled with sticky, <strong>gelatinous fluid</strong>\u00a0(rich in glycoproteins).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What type of chemokine is MCP-1?",
    "choices": [
      {
        "id": 1,
        "text": "C"
      },
      {
        "id": 2,
        "text": "CX3C"
      },
      {
        "id": 3,
        "text": "CXC"
      },
      {
        "id": 4,
        "text": "CC"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>MCP-1</strong> belongs to the <strong>CC type </strong>of chemokine. Here, the first two conserved cysteine residues remain adjacent to each other.</p>\n<p>The<strong> C&shy;C chemokines</strong> include:</p>\n<ol>\n<li>Monocyte chemoattractant protein (MCP&shy;1)</li>\n<li>Eotaxin</li>\n<li>Macrophage inflammatory protein&shy;1&alpha; (MIP&shy;1&alpha;)</li>\n<li>Regulated and normal T-&shy;cell expressed and secreted (RANTES)</li>\n</ol>\n<p>The image below shows the structure of C-C chemokine:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f44bd6810dae4e5eab4d55b3d1cde139x317x285.JPEG"
    ]
  },
  {
    "text": "A patient presented to the emergency department with high fever, photophobia and neck stiffness.  A lumbar puncture was performed and findings are given below. Which of the following is the most common cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Enterovirus"
      },
      {
        "id": 2,
        "text": "Herpes simplex 1 virus"
      },
      {
        "id": 3,
        "text": "Herpes simplex 2 virus"
      },
      {
        "id": 4,
        "text": "West nile virus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario is suggestive of\u00a0<strong>aseptic meningitis</strong>. <strong>Enterovirus </strong>is the most common cause, accounting for<strong> </strong>around 90% of the cases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Histopathological examination of a biopsy taken from a rough, scaly macular lesion from a patient's forearm showed neoplastic dyskeratosis. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Darier\u2019s disease"
      },
      {
        "id": 2,
        "text": "Warty dyskeratoma"
      },
      {
        "id": 3,
        "text": "Familial benign pemphigus"
      },
      {
        "id": 4,
        "text": "Actinic keratosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Neoplastic</strong> dyskeratosis is seen in <strong>actinic keratosis.</strong></p>\n<p>Dyskeratosis&nbsp;is <strong>premature keratinization</strong> of individual keratinocytes. These cells usually have pink or reddish cytoplasm. It can be benign or malignant:</p>\n<ul>\n<li>Benign dyskeratosis - seen in Darier&rsquo;s disease, warty dyskeratoma, and familial benign pemphigus</li>\n<li>Neoplastic dyskeratosis - seen in Bowen&rsquo;s disease, squamous cell carcinoma, and actinic keratosis</li>\n</ul>\n<div class=\"page\" title=\"Page 1156\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Actinic keratoses usually occur in sun-damaged skin and are considered <strong>precursor</strong> lesions of <strong>squamous cell carcinoma.</strong> Some lesions produce so much keratin that a cutaneous horn develops.</p>\n<p>The image below shows the histology of actinic keratosis. It shows atypical basal cells, dyskeratotic cells, and parakeratosis in the stratum corneum (cells with a retained nucleus).</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/083d3a13555348f29aeb4c2fe2e71736x400x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c4ed157a15e04501a8ee470d5dd99610x1200x1022.JPEG"
    ]
  },
  {
    "text": "Which of the following genetic changes is not associated with bladder carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Gain-of-function mutations in FGFR3"
      },
      {
        "id": 2,
        "text": "Activating mutations in the NRAS"
      },
      {
        "id": 3,
        "text": "Loss-of-function mutations in the TP53"
      },
      {
        "id": 4,
        "text": "9p chromosome deletions"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Activating mutation</strong> in <strong>HRAS</strong> (not NRAS) is responsible for <strong>bladder carcinoma.</strong></p>\n<p>Genetic changes associated with carcinoma bladder:</p>\n<ul>\n<li>Noninvasive low-grade papillary urothelial carcinoma is associated with:\n<ul>\n<li>Gain-of-function mutations of&nbsp;<strong>FGFR3</strong> and <strong>HRAS&nbsp;</strong>genes</li>\n<li>Chromosome<strong> 9p</strong> and <strong>9q</strong> <strong>deletions</strong></li>\n</ul>\n</li>\n<li>High-grade invasive urothelial carcinoma (either papillary or flat) is associated with:\n<ul>\n<li>Loss-of-function mutations of&nbsp;<strong>TP53</strong> and <strong>RB</strong>&nbsp;genes</li>\n</ul>\n</li>\n</ul>\n<p>Note: Erdafitinib (kinase inhibitor) is the first targeted drug therapy approved by the FDA for the treatment of metastatic urothelial carcinoma especially in patients with mutations of FGFR3 or FGFR2.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which thyroid carcinoma is associated with amyloid deposition?",
    "choices": [
      {
        "id": 1,
        "text": "Papillary carcinoma"
      },
      {
        "id": 2,
        "text": "Follicular carcinoma"
      },
      {
        "id": 3,
        "text": "Anaplastic carcinoma"
      },
      {
        "id": 4,
        "text": "Medullary carcinoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Medullary carcinoma</strong> of the thyroid is associated with <strong>amyloid deposition.\u00a0</strong>It is an essential diagnostic feature of this carcinoma.</p>\n<p>Microscopic deposits of localized amyloid may be found in certain conditions such as:</p>\n<ul>\n<li><strong>Medullary carcinoma</strong> of the thyroid gland</li>\n<li>Islet tumors of the pancreas</li>\n<li><strong>Pheochromocytomas</strong></li>\n<li>Undifferentiated <strong>carcinomas</strong> of the <strong>stomach</strong></li>\n<li>Islets of Langerhans in individuals with <strong>type 2 diabetes mellitus</strong></li>\n</ul>\n<div class=\"page\" title=\"Page 268\">\u00a0</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The organ least likely to be involved in acute graft-versus-host disease reaction is ________",
    "choices": [
      {
        "id": 1,
        "text": "Liver"
      },
      {
        "id": 2,
        "text": "Adrenal glands"
      },
      {
        "id": 3,
        "text": "Gut"
      },
      {
        "id": 4,
        "text": "Skin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Graft-versus-host disease </strong>(GVHD) affects the <strong>liver</strong>, <strong>skin</strong> and <strong>gut</strong> and is least likely to affect the adrenal glands amongst the given options.</p>\n<p><strong>GVHD</strong> occurs when immunologically competent cells or their precursors are transplanted into&nbsp;<strong>immunologically compromised</strong>&nbsp;recipients. The transferred cells recognize the alloantigens in the host and attack host tissues. It is seen&nbsp;<strong>most commonly</strong>&nbsp;during&nbsp;<strong>hematopoietic stem cell transplantation</strong>&nbsp;but may also occur following the transplantation of solid organs.&nbsp;</p>\n<p>GVHD may be of two types: acute and chronic.</p>\n<p><strong>Acute GVHD&nbsp;</strong>occurs within days to weeks after allogeneic hematopoietic stem cell transplantation. It mainly involves the&nbsp;<strong>immune system&nbsp;</strong>and the&nbsp;<strong>epithelia</strong> of the skin, <strong>liver</strong>, and&nbsp;<strong>intestines</strong>. But the affected tissues are not heavily infiltrated by lymphocytes. It may present as:</p>\n<ul>\n<li>Generalized rash over the skin that may lead to <strong>desquamation</strong></li>\n<li>Destruction of small bile ducts in the liver giving rise to <strong>jaundice</strong></li>\n<li>Mucosal ulceration of the gut resulting in <strong>bloody diarrhea</strong></li>\n</ul>\n<p><strong>Chronic GVHD</strong> may follow acute GVHD or may occur insidiously. Some patients even develop <strong>autoimmunity</strong>, owing to the grafted CD4<sup>+</sup> helper T cells reacting with host B cells and stimulating them, which may result in autoantibody production. It may present as:</p>\n<ul>\n<li>Destruction of skin appendages and fibrosis of the dermis resembling&nbsp;<strong>systemic sclerosis</strong></li>\n<li>Chronic liver disease manifested by <strong>cholestatic jaundice</strong></li>\n<li>Damage to the gastrointestinal tract may cause <strong>esophageal strictures</strong></li>\n<li>Involution of the thymus and depletion of lymphocytes in the lymph nodes with recurrent bouts of <strong>life-threatening infections</strong>.</li>\n</ul>\n<p>Depletion of donor T cells by irradiation before transfusion can eliminate the occurrence of GVHD. But irradiation also has its adverse effects such as tumor recurrence in leukemic patients, increased incidence of graft failures, and EBV-related B-cell lymphoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 1-month-old infant diagnosed with primary adrenal insufficiency presented with failure to thrive, recurrent emesis, and hepatosplenomegaly. Bilateral adrenal calcification was noted radiologically. Which of the following enzyme is deficient in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Sphingomyelinase"
      },
      {
        "id": 2,
        "text": "Lysosomal acid phosphatase"
      },
      {
        "id": 3,
        "text": "Lysosomal glucosidase"
      },
      {
        "id": 4,
        "text": "Lysosomal acid lipase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario is suggestive of <strong>Wolman disease.</strong> It is due to a deficiency of the lysosomal&nbsp;<strong>acid lipase </strong>enzyme<strong>.</strong>&nbsp;It is an&nbsp;<strong>autosomal recessive </strong>disease<strong>.</strong></p>\n<p>It leads to the&nbsp;accumulation of cholesterol esters and triglycerides. It presents in the&nbsp;first few weeks of life with:</p>\n<ul>\n<li><strong>Failure to thrive</strong></li>\n<li><strong>Vomiting</strong></li>\n<li>Abdominal distention</li>\n<li>Steatorrhea</li>\n<li><strong>Hepatosplenomegaly</strong></li>\n<li>Hyperlipidemia</li>\n<li>Extensive bilateral calcifications of the adrenal glands</li>\n</ul>\n<p>No specific therapy is available and death usually occurs within 6 months of life.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cholemic nephrosis is associated with which of the following casts?",
    "choices": [
      {
        "id": 1,
        "text": "Bile"
      },
      {
        "id": 2,
        "text": "Cholesterol"
      },
      {
        "id": 3,
        "text": "Lipids"
      },
      {
        "id": 4,
        "text": "Hyaline"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cholemic nephrosis</strong> is associated with casts of <strong>bile.</strong></p>\n<p>In patients with acute or chronic liver disease with advanced <strong>liver failure,&nbsp;</strong>renal function may be impaired. This is called <strong>hepatorenal syndrome.</strong>&nbsp;This can be associated with highly <strong>elevated</strong> <strong>bilirubin</strong> levels with <strong>bile cast</strong> formation (also known as cholemic nephrosis) in distal nephron segments.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Pathology Test I';
        const quizFilename = 'pathology-test-i-89d595b7.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>