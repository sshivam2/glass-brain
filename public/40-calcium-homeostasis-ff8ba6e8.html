<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>40 Calcium Homeostasis - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Physiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">25</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following vitamins have a hormonal action?",
    "choices": [
      {
        "id": 1,
        "text": "Niacin"
      },
      {
        "id": 2,
        "text": "Pyridoxine"
      },
      {
        "id": 3,
        "text": "Vitamin D"
      },
      {
        "id": 4,
        "text": "Riboflavin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Vitamin D has hormonal action. In conjunction with parathyroid hormone, it is a major regulatory hormone for Ca<sup>2+</sup> and phosphate metabolism.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The active form of vitamin D is______",
    "choices": [
      {
        "id": 1,
        "text": "Cholecalciferol"
      },
      {
        "id": 2,
        "text": "24,25(OH) Vitamin D"
      },
      {
        "id": 3,
        "text": "1,25 (OH)2 Vitamin D"
      },
      {
        "id": 4,
        "text": "25 (OH) Vitamin D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>active</strong> form of Vit D is <strong>1,25-dihydroxycholecalciferol</strong>.&nbsp;</p>\n<p><strong>Cholecalciferol</strong> is formed in the<strong> skin</strong> and converted to <strong>25 hydroxycholecalciferol</strong> in the <strong>liver</strong>. This is hydroxylated in the <strong>kidney</strong> to form <strong>1,25-dihyroxycholecalciferol. &nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding actions of vitamin D?",
    "choices": [
      {
        "id": 1,
        "text": "Vit D receptor-retinoid\u00ad X recep\u00adtor complex binds to DNA and activates tran\u00adscription"
      },
      {
        "id": 2,
        "text": "Vit D increases absorption of calcium from the intestine by increasing calbindin"
      },
      {
        "id": 3,
        "text": "Phosphate  flux through the gastrointestinal epithe\u00adlium is enhanced by vitamin D"
      },
      {
        "id": 4,
        "text": "Vit D decreases phos\u00adphate reabsorption by the renal tubules"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"page\" title=\"Page 963\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Vit D does <strong>not</strong> decrease phos\u00adphate reabsorption by the renal tubules. It\u00a0<strong>increases</strong> <strong>calcium </strong>and<strong> phos\u00adphate</strong> <strong>reabsorption</strong> by the renal tubules, leading to a decrease in excretion of these substances in the urine.\u00a0</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de0ed528d7cd471e90d4df30067c51fax1280x1720.JPEG"
    ]
  },
  {
    "text": "A 6-year-old boy was brought to the OPD with craniotabes, rachitic rosary and bowed legs. Diagnosis of rickets was made. To investigate the cause of rickets and to find the status of vitamin D in the body, which of the following should be measured?",
    "choices": [
      {
        "id": 1,
        "text": "Cholecalciferol"
      },
      {
        "id": 2,
        "text": "25 hydroxyvitamin D"
      },
      {
        "id": 3,
        "text": "1, 25 dihydroxyvitamin D"
      },
      {
        "id": 4,
        "text": "24, 25 dihydroxyvitamin D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Measurement of <strong>25 hydroxyvitamin D </strong>(calcidiol) provides more <strong>accurate</strong> information about <strong>vitamin D levels</strong>.&nbsp;</p>\n<div class=\"page\" title=\"Page 2966\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>PTH</strong> is <strong>increased</strong> in vitamin D deficiency. PTH is a major stimulus for the <strong>1&alpha;-hydroxylase</strong>, so there is increased synthesis of the active hormone, <strong>1,25-dihydroxyvitamin D</strong>. Paradoxically, levels of this hormone are often <strong>normal</strong> in severe vitamin D deficiency. Therefore, measurements of <strong>1,25- dihydroxyvitamin D</strong> are <strong>not accurate</strong> reflections of vitamin D stores and should not be used to diagnose vitamin D deficiency in patients with normal renal function.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following decreases the conversion of 25-hydroxycholecalciferol to 1,25 dihydroxycholecalciferol?",
    "choices": [
      {
        "id": 1,
        "text": "Diet low in Ca2+"
      },
      {
        "id": 2,
        "text": "Hypocalcemia"
      },
      {
        "id": 3,
        "text": "Hyperparathyroidism"
      },
      {
        "id": 4,
        "text": "Chronic renal failure"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The conversion of 25-hydroxycholecalciferol to 1,25 dihydroxycholecalciferol is done by enzyme <strong>1\u03b1-hydroxylase</strong> which is <strong>present in the kidney</strong>. In chronic renal failure (<strong>CRF)</strong>, there is a <strong>deficiency</strong> of this enzyme and formation of the active form of vitamin D does not take place.</p>\n<p>Factors which <strong>increase</strong> activity of <strong>1\u03b1-hydroxylase</strong> are:</p>\n<ul>\n<li>Ca<sup>2+</sup> deficiency</li>\n<li>Increased parathyroid hormone (PTH)<strong>\u00a0</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which organ is not involved in calcium homeostasis?",
    "choices": [
      {
        "id": 1,
        "text": "Kidneys"
      },
      {
        "id": 2,
        "text": "Skin"
      },
      {
        "id": 3,
        "text": "Intestine"
      },
      {
        "id": 4,
        "text": "Lung"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>lung</strong> is <strong>not</strong> involved in calcium homeostasis.</p>\n<p>There are two sources of cholecalciferol in the body:</p>\n<ul>\n<li>Diet</li>\n<li>Synthesized in the<strong> skin </strong>from 7-dehydrocholesterol in the presence of ultraviolet light.</li>\n</ul>\n<p>Cholecalciferol is&nbsp;hydroxylated in the liver to form 25-hydroxycholecalciferol<strong>, </strong>which is further hydroxylated in the&nbsp;kidney<strong>&nbsp;</strong>to forn 1,25-dihydroxycholecalciferol. At higher calcium concentrations, when PTH is sup&shy;pressed, the 25-&shy;hydroxycholecalciferol is converted to a different compound&mdash;24,25&shy;dihydroxycholecalciferol&mdash; that has almost no vitamin D effect.</p>\n<p><strong>Note:</strong> This is a controversial question because new evidence suggests an association between calcium homeostasis and pulmonary fibroblasts. Therefore:</p>\n<ul>\n<li>If Lung is given in the options and <strong>spleen</strong> is provided as one of the choices instead of Kidneys, Skin, Liver or Intestine, then the best answer would be the spleen.</li>\n<li>If other options are Kidneys, Skin, Liver, or Intestine, then the best answer would be Lung as the role of these organs in calcium metabolism is beyond doubt.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/61b81ea5be7a4a35a782dfeeb7b8850fx1280x2560.JPEG"
    ]
  },
  {
    "text": "Increased calcium levels lead to______",
    "choices": [
      {
        "id": 1,
        "text": "\u2191 1,25 dihydroxycholecalciferol"
      },
      {
        "id": 2,
        "text": "\u2191 24,25 dihydroxycholecalciferol"
      },
      {
        "id": 3,
        "text": "\u2193 calcitonin"
      },
      {
        "id": 4,
        "text": "\u2191 parathormone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Increased calcium levels lead to an<strong> increase in&nbsp;24,25 dihydroxycholecalciferol.&nbsp;</strong></p>\n<p>The levels of calcium control formation of 1,25-dihydroxyxholecalciferol. When calcium is low, PTH (parathyroid hormone) promotes the conversion of 25&shy;hydroxycholecalcif&shy;erol to 1,25&shy;dihydroxycholecalciferol in the kidneys. At <strong>higher calcium</strong> concentrations, when <strong>PTH is sup&shy;pressed</strong>, the 25&shy;hydroxycholecalciferol is <strong>converted</strong> to a different compound&mdash;<strong>24,25&shy;dihydroxycholecalciferol</strong>&mdash; that has almost no vitamin D effect.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/06063b42ba9449569fc16967e13127e0x1280x1461.JPEG"
    ]
  },
  {
    "text": "What would be seen in a patient whose diet is deficient in calcium?",
    "choices": [
      {
        "id": 1,
        "text": "\u2191 phosphate"
      },
      {
        "id": 2,
        "text": "\u2191 calcium"
      },
      {
        "id": 3,
        "text": "\u2191 parathormone"
      },
      {
        "id": 4,
        "text": "Activation of 24,25 dihydorcholecalciferol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Low Ca<sup>2+</sup></strong> diet leads to <strong>hypocalcemia</strong>, which <strong>stimulates PTH release.&nbsp;</strong>Hence, this patient will have high PTH levels.&nbsp;</p>\n<p>Increased PTH causes</p>\n<ul>\n<li><strong>Hypophosphatemia&nbsp;</strong>due to <strong>increased excretion</strong> of phosphate via the kidneys.</li>\n<li>PTH acts on the kidneys to <strong>increase</strong> the <strong>absorption</strong> of <strong>calcium</strong>.</li>\n<li>PTH also <strong>increases</strong> the level of the enzyme <strong>1-&alpha; hydroxylase</strong> which leads to more production of the active form of Vitamin D- 1,25 dihydrocholecalciferol.</li>\n</ul>\n<p>In the presence of hypocalcemia, serum calcitonin levels decrease and active form of vitamin D increases.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fb89d6b54b9c478dbba40ec619af7524x1280x1909.JPEG"
    ]
  },
  {
    "text": "In an experiment, a rat is infused with a small volume of a calcium chloride solution. Compared to the control condition, which of the following would result from the calcium load?",
    "choices": [
      {
        "id": 1,
        "text": "Bone demineralization"
      },
      {
        "id": 2,
        "text": "Decreased secretion of calcitonin"
      },
      {
        "id": 3,
        "text": "Decreased blood coagulability"
      },
      {
        "id": 4,
        "text": "Increased formation of 24,25-dihydroxycholecalciferol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given scenario, <strong>increased</strong> formation of <strong>24,25-dihydroxycholecalciferol</strong> will take place.</p>\n<p>Infusion of calcium chloride solution will lead to <strong>raised</strong> <strong>calcium</strong> concentration in blood.&nbsp;At higher calcium concentrations, <strong>PTH</strong> is also <strong>sup&shy;pressed</strong>. So the 25-&shy;hydroxycholecalciferol is converted to a different compound : <strong>24,25&shy;dihydroxycholecalciferol</strong>&mdash; that has almost no vitamin D effect.</p>\n<p>When plasma calcium concentration is high, formation of <strong>1,25&shy; dihydroxycholecalciferol</strong> is also greatly <strong>depressed.</strong> Lack of 1,25 dihydroxycholecalciferol, in turn, decreases the absorption of calcium from the intestines, bones, and renal tubules, thus causing the calcium ion concentration to fall back toward its normal level.</p>\n<p>Option A:<strong>&nbsp;</strong>Since PTH levels are supressed bone demineralisation does not take place.</p>\n<p>Option B:<strong>&nbsp;</strong>Calcitonin is a calcium regulatory hormone whose level increases when the calcium concentration in plasma is high.</p>\n<p>Option C: Calcium ions are a part of the coagulation cascade and the blood coaguability either increases or remains the same with high plasma Ca+2 levels.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Calcium absorption takes place mainly from which of the following sites?",
    "choices": [
      {
        "id": 1,
        "text": "Proximal small intestine"
      },
      {
        "id": 2,
        "text": "Middle small intestine"
      },
      {
        "id": 3,
        "text": "Distal ileum"
      },
      {
        "id": 4,
        "text": "Ascending colon"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Calcium absorption is mainly from the <strong>proximal small intestine&nbsp;</strong>(<strong>duodenum</strong>).&nbsp;</p>\n<p>Vit D and PTH are important factors that control calcium absorption.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an enhancer of calcium absorption from the intestine?",
    "choices": [
      {
        "id": 1,
        "text": "Protein"
      },
      {
        "id": 2,
        "text": "Oxalates"
      },
      {
        "id": 3,
        "text": "Phytic acid"
      },
      {
        "id": 4,
        "text": "Phosphates"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Ca <sup>2+</sup> absorption is <strong>enhanced </strong>by<strong> proteins.</strong></p>\n<p>It is <strong>inhibited </strong>by <strong>phosphates, phytic acid, </strong>and<strong> oxalates</strong> because these anions form <strong>insoluble salts</strong> with Ca <sup>2+ </sup>in the intestine.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the active form of calcium?",
    "choices": [
      {
        "id": 1,
        "text": "Ionized"
      },
      {
        "id": 2,
        "text": "Albumin bound"
      },
      {
        "id": 3,
        "text": "Phosphate"
      },
      {
        "id": 4,
        "text": "Protein bound"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ionic</strong> <strong>calcium</strong> is the <strong>active</strong> form that is important for most functions of calcium in the body, including the effect of calcium on the heart, the nervous system, and bone formation.&nbsp;</p>\n<p>Most of the calcium (99%) is stored in the bones. Only about 0.1 percent of the total body calcium is in the extracellular fluid and 1 percent is in the cells and its organelles.</p>\n<p>From the 0.1% Ca+2 in the plasma, the distribution of calcium is as follows: &nbsp;</p>\n<ul>\n<li>About 41 % is combined with the plasma proteins (non-diffusible through the capillary membrane)</li>\n<li>About 9 % is combined with anionic substances of the plasma and interstitial fluids like citrate and phosphate in such a manner that it is not ionized (diffusible through the capillary membrane); and</li>\n<li>The remaining 50 % of the calcium in the plasma is both diffusible through the capillary membrane and ionized.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cells play a key role in bone resorption?",
    "choices": [
      {
        "id": 1,
        "text": "Osteoblasts"
      },
      {
        "id": 2,
        "text": "Osteoclasts"
      },
      {
        "id": 3,
        "text": "Stem cells"
      },
      {
        "id": 4,
        "text": "Cytotoxic cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Osteoclasts</strong>&nbsp;play a key role in<strong>&nbsp;</strong>bone resorption.<strong>&nbsp;</strong></p>\n<p>The cells responsible for <strong>bone formation</strong> are <strong>osteoblasts</strong> and the cells responsible for bone <strong>resorption</strong> are <strong>osteoclasts</strong>.</p>\n<p>Osteoblasts are modified fibroblasts.<strong>&nbsp;</strong>Osteoclasts are the members of the monocyte family</p>\n<p>Osteoclasts erode and absorb the previously formed bone</p>\n<ul>\n<li>They become attached to the bone via <strong>integrins</strong> forming a <strong>sealing zone</strong> where the bone resorption takes place</li>\n<li>Proton pumps (H+ -ATPases) then move from the <strong>endosomes</strong> of the osteoclasts into the cell membrane as opposed to the sealing zone and <strong>acidify</strong> the area to pH 4.0.</li>\n<li>The acidic pH dissolves <strong>hydroxyapatite</strong>, and the acid proteases secreted by the cell break down collagen.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/68881352e9d8423d826fd19963c0d88ex486x347.JPEG"
    ]
  },
  {
    "text": "On infusing parathyroid hormone in experimental mice, there is increased resorption of bone due to stimulation of the osteoclastic activity. Which of the following is true regarding the cellular mechanism of osteoclastic activation?",
    "choices": [
      {
        "id": 1,
        "text": "The bone-resorbing osteoclast cells do not have PTH receptors"
      },
      {
        "id": 2,
        "text": "Osteoclasts produce osteoprotegerin (OPG) a cytokine that increases bone resorption"
      },
      {
        "id": 3,
        "text": "RANK ligand and M-CSF are necessary for formation of mature osteoblasts"
      },
      {
        "id": 4,
        "text": "Glucocorticoids promote osteoblast activity and inhibit bone resorption"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 960\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Osteoclast</strong> cells do<strong> not </strong>have<strong> PTH receptors.</strong> PTH stimulates <strong>osteoclast</strong> <strong>activity</strong> and <strong>bone</strong> <strong>resorption&nbsp;</strong>by&nbsp;an <strong>indirect</strong> <strong>mechanism</strong>.</p>\n<p>PTH has <strong>receptors</strong> on the <strong>osteoblasts</strong> in the bone. When PTH binds to these receptors, osteoblasts release cytokines like <strong>RANK-ligand</strong> and <strong>M-CSF</strong>. These cytokines allow the <strong>differentiation</strong> of<strong> macrophages</strong> to <strong>osteoclasts</strong>.&nbsp;</p>\n<p>Osteoclasts, in turn, <strong>cut</strong> the <strong>collagen</strong> in the bone, which is bound to calcium. This causes the <strong>release</strong> of <strong>calcium</strong>, <strong>phosphorus</strong>, and collagen breakdown products in the blood.&nbsp;</p>\n<p><strong style=\"font-size: 14px;\">Osteoblasts</strong><span style=\"font-size: 14px;\">&nbsp;produce </span><strong style=\"font-size: 14px;\">osteoprotegerin</strong><span style=\"font-size: 14px;\"> (OPG), or osteoclastogenesis inhibitory factor, a cytokine that </span><strong style=\"font-size: 14px;\">inhibits</strong><span style=\"font-size: 14px;\"> bone resorption by </span><strong style=\"font-size: 14px;\">preventing</strong> <strong style=\"font-size: 14px;\">interaction</strong><span style=\"font-size: 14px;\"> of </span><strong style=\"font-size: 14px;\">RANKL</strong><span style=\"font-size: 14px;\"> with its </span><strong style=\"font-size: 14px;\">receptor</strong><span style=\"font-size: 14px;\">. PTH decreases the production of osteoprotegerin (OPG).</span></p>\n<div class=\"page\" title=\"Page 959\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Glucocorticoids <strong>promote osteoclast activity</strong> and increase bone resorption by <strong>increasing RANKL</strong> production and decreasing the formation of OPG. On the other hand, the hormone <strong>estrogen stimulates OPG</strong> production.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A mouse is engineered to lack a transcription factor necessary for the normal development of osteoclasts. Compared to normal littermate mice, which of the following would be reduced in the knocked-out mouse?",
    "choices": [
      {
        "id": 1,
        "text": "Phosphate deposition in trabecular bone"
      },
      {
        "id": 2,
        "text": "Hydroxyapatite levels in bone"
      },
      {
        "id": 3,
        "text": "Osteoblast proliferation"
      },
      {
        "id": 4,
        "text": "Secretion of acid proteases"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"page\" title=\"Page 398\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Secretion </strong>of <strong>acid proteases</strong>&nbsp;would be <strong>decreased</strong> in the knocked-out mouse.&nbsp;Osteoclasts produce proteolytic enzymes and several acids necessary for bone resorption. The enzymes digest or dissolve the organic matrix of the bone, and the acids cause dissolution of the bone salts.</p>\n<p>A <strong>knocked-out mouse</strong> is a genetically modified mouse in which an existing gene is inactivated or 'knocked out' by replacing it with an artificial one. The control mice used in the above case are <strong>littermate mice</strong> i.e mice with genetically modified embryonic stem (ES) cell strains used to test whether specific genes control a disease or immunological phenomena (eg: normal osteoclastic development)</p>\n<p>Option B: The <strong>acidic pH</strong> caused by the osteoclasts dissolves hydroxyapatite. In the knocked-out mouse, <strong>hydroxyapatite</strong> levels would therefore <strong>increase</strong>.&nbsp;</p>\n<p>Option A and C: Since the lineage of osteoclasts and osteoblasts is different, there is no decrease in the proliferation of osteoblasts. As the osteoblast levels are normal, phosphate deposition in bone also remains normal.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding calcium homeostasis?",
    "choices": [
      {
        "id": 1,
        "text": "90% of calcium is filtered from the glomerulus"
      },
      {
        "id": 2,
        "text": "Calcium is reabsorbed mainly from the late distal convoluted tubule (DCT)"
      },
      {
        "id": 3,
        "text": "Parathyroid hormone (PTH) promotes calcium reabsorption from the renal tubules"
      },
      {
        "id": 4,
        "text": "Calcitonin promotes action of parathyroid hormone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>PTH </strong>promotes<strong>&nbsp;</strong>the <strong>reabsorption</strong> of <strong>calcium</strong> from the <strong>renal</strong> tubules.&nbsp;</p>\n<p><span style=\"font-size: 14px;\">Option A: </span><span style=\"font-size: 14px;\">About <strong>41 percent</strong> of the plasma calcium is <strong>bound</strong> to <strong>plasma proteins</strong> and is therefore not filtered by the glomerular capillaries. The rest of the calcium is filtered through the glomeruli into the renal tubules.&nbsp;</span></p>\n<p>Option B: Of the filtered calcium, approximately <strong>90&nbsp;percent</strong> is <strong>reabsorbed</strong> in the <strong>proximal tubules</strong>, loops of Henle, and early distal tubules. However, when calcium levels are low and PTH levels rise, PTH promotes calcium reabsorption from the later DCT.&nbsp;</p>\n<div class=\"page\" title=\"Page 957\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 966\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option D: Calcitonin tends to <strong>decrease</strong> plasma calcium concentration and, in general, has effects <strong>opposite</strong> to those of PTH.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not an effect of parathormone?",
    "choices": [
      {
        "id": 1,
        "text": "\u2191 bone resorption"
      },
      {
        "id": 2,
        "text": "\u2191 calcium reabsorption in kidney"
      },
      {
        "id": 3,
        "text": "\u2191 phosphate reabsorption in kidney"
      },
      {
        "id": 4,
        "text": "\u2191 calcitriol (vitamin D3) synthesis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>PTH</strong>&nbsp;does not increase phosphate reabsorption in kidney, rather it causes <strong>decreased</strong> <strong>phosphate reabsorption</strong> in the kidney.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following will be most likely seen in a patient with parathyroid deficiency after inadvertent damage to the parathyroid glands during thyroid surgery?",
    "choices": [
      {
        "id": 1,
        "text": "High plasma phosphate, low Ca2+ levels and tetanus"
      },
      {
        "id": 2,
        "text": "Low plasma Ca2+ level, increased muscular excitability, and Trousseau sign"
      },
      {
        "id": 3,
        "text": "High plasma phosphate and Ca2+ levels and bone demineralization"
      },
      {
        "id": 4,
        "text": "Increased muscular excitability, a high plasma Ca2+ level, and bone demineralization"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Following signs can be elicited in hypoparathyroidism due to hypocalcemia (tetany):&nbsp;</p>\n<ul>\n<li><strong>Chvostek sign</strong>: Contraction facial muscles on tapping over facial nerve in front of the tragus of the ear</li>\n<li><strong>Trousseau sign</strong>:&nbsp;accoucheur&rsquo;s hand position and painful carpopedal spasm by applying a sphygmomanometer cuff to the arm and keeping the pressure above systolic blood pressure for 5 minutes</li>\n</ul>\n<p>Note - In option A, <strong>tetanus</strong> is different from <strong>tetany</strong>. Tetanus is caused by infection with the bacteria <em>Clostridium tetani</em></p>\n<p>The image below is showing Trousseau sign.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f895f85a48af411fb79337ec24c1bae2x1280x1909.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c85b65d46b7b424c900dd46e2be2b900x518x390.JPEG"
    ]
  },
  {
    "text": "Which of these cause hypocalcemia?",
    "choices": [
      {
        "id": 1,
        "text": "Thyroxine"
      },
      {
        "id": 2,
        "text": "Calcitonin"
      },
      {
        "id": 3,
        "text": "Parathyroid hormone"
      },
      {
        "id": 4,
        "text": "Cholecalciferol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Calcitonin</strong> has calcium-lowering effects and may cause <strong>hypocalcemia</strong>. It does so by inhibiting bone resorption (direct effect)</p>\n<p>Calcitonin is <strong>synthesized</strong> and <strong>secreted</strong> by <strong>parafollicular</strong> (clear) cells of the thyroid. Actions of calcitonin are as follows:</p>\n<ul>\n<li>Inhibits osteoclasts, thereby decreasing bone resorption (<strong>direct effect</strong>)</li>\n<li>Increases renal calcium excretion</li>\n<li>Decreases calcium absorption by the kidneys and intestines</li>\n</ul>\n<p><span style=\"font-size: 14px;\">Under normal physiological conditions, calcitonin is more<strong> important</strong> in <strong>young individuals</strong> (compared to adults), and it may play a role in <strong>skeletal development</strong>.</span></p>\n<p>In addition, it may <strong>protect</strong> the bones of the mother from <strong>excess calcium loss</strong> during <strong>pregnancy</strong>.&nbsp;Bone formation in the infant and lactation are major drains on Ca <sup>2+</sup> stores. They would cause bone loss in the mother if bone resorption were not simultaneously inhibited by an <strong>increase</strong> in the plasma <strong>calcitonin</strong> level.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66b21f9daf4e44899e54389e1b005c97x1280x850.JPEG"
    ]
  },
  {
    "text": "A 57-year-old lady with metastatic breast cancer develops nausea, vomiting and confusion. Further evaluation reveals severe hypercalcemia. IV hydration is initiated and calcitonin is added to her treatment plan. Which of the following best represents the role of calcitonin in lowering serum calcium level?",
    "choices": [
      {
        "id": 1,
        "text": "\u2193 Excretion of calcium by kidney"
      },
      {
        "id": 2,
        "text": "\u2193 Intestinal absorption of calcium"
      },
      {
        "id": 3,
        "text": "\u2193 Bone resorption"
      },
      {
        "id": 4,
        "text": "\u2191 Renal absorption of calcium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical vignette is suggestive of <strong>hypercalcemia of malignancy</strong>, most probably due to metastatic breast cancer. Calcitonin exerts its <strong>calcium-lowering</strong> effect mainly by<strong> inhibiting bone resorption&nbsp;</strong>and helps in the management of hypercalcemia.</p>\n<p>This calcium lowering action of calcitonin is <strong>direct</strong>, by <strong>inhibiting</strong> the activity of <strong>osteoclasts</strong>. However, calcitonin also increases renal calcium excretion and decreases calcium absorption by the kidneys and intestines.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f36da3ee3f1d4bbfb0b4db20ad704a9cx1280x850.JPEG"
    ]
  },
  {
    "text": "A 30-year-old lady undergoes thyroidectomy due to suspected malignancy. A week after the surgery she develops a spasm of facial muscles on tapping over the facial nerve in front of the tragus. Which of the following is the reason behind her muscle hyperexcitability?",
    "choices": [
      {
        "id": 1,
        "text": "\u2191Ca2+"
      },
      {
        "id": 2,
        "text": "Prevent K+ release"
      },
      {
        "id": 3,
        "text": "Prevent Na+ and K+ release"
      },
      {
        "id": 4,
        "text": "\u2191permeability of Na + ions"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical vignette is suggestive of <strong>chvostek sign, </strong>seen in&nbsp;hypocalcemia due to accidental <strong>parathyroid injury</strong> during thyroid surgery. The muscle hyperexcitability seen in hypocalcemia is due to <strong>increased permeability</strong> of <strong>cells&nbsp;</strong>to<strong>&nbsp;Na<sup>+</sup></strong>.&nbsp;</p>\n<p>During thyroid surgery, <strong>parathyroid</strong> gland is prone to accidental injury due to <strong>proximity</strong> with the <strong>thyroid</strong> gland. Damage to the parathyroid gland will lead to a low PTH level and low Ca<sup>2+ </sup>level. When the ECF concentration of <strong>Ca<sup>2+</sup> falls</strong> below normal, the <strong>nervous system</strong> becomes progressively more <strong>excitable</strong>. Because there is <strong>increased</strong>&nbsp;membrane <strong>permeability</strong> to <strong><strong style=\"font-size: 14px;\">Na<sup>+</sup></strong></strong>. This leads to easy initiation of the <strong>action potentials</strong>.&nbsp;</p>\n<p>The peripheral nerve fibres become so excitable that they begin to <strong>discharge spontaneously</strong>, initiating impulses that pass to the skeletal muscles to elicit tetanic muscle contraction.&nbsp;<strong>Tetany</strong> occurs usually when calcium concentration falls to&nbsp;<strong>6 mg/dL.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding confounders affecting serum calcium level?",
    "choices": [
      {
        "id": 1,
        "text": "Total calcium concentration is altered by variations in the serum albumin concentration."
      },
      {
        "id": 2,
        "text": "Forearm exercise can lead to falsely elevated ionized calcium levels"
      },
      {
        "id": 3,
        "text": "Hemoconcentration due to tourniquet results in a rise of serum calcium"
      },
      {
        "id": 4,
        "text": "Acidosis causes a decrease in the ionized calcium levels"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Acidosis does not cause a decrease in the ionized calcium levels.&nbsp;Rather, <strong>alkalosis</strong> causes a <strong>decrease</strong> in the <strong>ionized calcium levels</strong>.</p>\n<p><strong>Plasma proteins</strong> are more<strong> ionized</strong> when the <strong>pH</strong> is <strong>high</strong> (alkalosis), providing more protein anions to bind with and sequester free Ca2+. This causes a <strong>decrease</strong> in <strong>ionized calcium</strong> and may trigger symptoms of hypocalcemia.</p>\n<p>Option A: Total calcium concentration is altered by variations in the serum albumin concentration as&nbsp;41% of <strong>calcium</strong> is <strong>bound</strong> to plasma proteins like albumin, hence changes in albumin concentration affects the serum calcium levels. The corrected calcium levels can be calculated as: </p>\n<p>Corrected calcium (mg/dL) = measured total Ca (mg/dL) + 0.8 (4.0 - serum albumin [g/dL]), where 4.0 represents the average albumin level.</p>\n<div class=\"page\" title=\"Page 822\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option B: <strong>Fist-clenching</strong> or <strong>forearm exercise</strong> can lead to falsely <strong>elevated ionized (free) calcium</strong> levels.</p>\n<p>Option C: A <strong>tourniquet</strong> is usually avoided while drawing blood for calcium measurements since <strong>hemoconcentration</strong> also leads to an <strong>increase</strong> in serum <strong>calcium</strong> levels.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cells is involved in the initiation and control of osteoclastic activity?",
    "choices": [
      {
        "id": 1,
        "text": "Osteocytes"
      },
      {
        "id": 2,
        "text": "Osteoblasts"
      },
      {
        "id": 3,
        "text": "Mononuclear cells"
      },
      {
        "id": 4,
        "text": "Phagocytes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Osteoblasts </strong>are involved in the <strong>initiation </strong>and <strong>control </strong>of<strong> osteoclastic </strong>activity.&nbsp;</p>\n<div class=\"page\" title=\"Page 960\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Osteoblasts</strong> produce receptor <strong>activator</strong> for nuclear factor &kappa;&shy;B ligand (<strong>RANKL</strong>) and macrophage colony&shy; stimulating factor (<strong>M-CSF</strong>), which are necessary for formation of <strong>mature osteoclasts</strong> and hence osteoclastic activity.&nbsp;</p>\n<p>Specific receptors for <strong>parathormone</strong> are present only on the <strong>osteoblasts</strong> and not on osteoclasts.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of these is not a marker of bone resorption?",
    "choices": [
      {
        "id": 1,
        "text": "Urine hydroxyproline"
      },
      {
        "id": 2,
        "text": "Serum cross-linked c telopeptide"
      },
      {
        "id": 3,
        "text": "Urine total free deoxypyridinoline"
      },
      {
        "id": 4,
        "text": "Serum bone specific alkaline phosphatase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Serum <strong>bone specific alkaline phosphatase</strong> is a marker for bone <strong>formation</strong>.</p>\n<p>Other markers of<strong>&nbsp;bone formation</strong> are:</p>\n<ul>\n<li>\n<div class=\"topbullet\">\n<p>Serum osteocalcin</p>\n</div>\n</li>\n</ul>\n<div class=\"topbullet\">\n<ul>\n<li>Serum type 1 procollagen (C-terminal/N-terminal)</li>\n</ul>\n<p>Markers for <strong>bone resorption</strong> are:</p>\n<ul>\n<li>\n<div class=\"topbullet\">\n<p>Urinary hydroxyproline</p>\n</div>\n</li>\n<li>\n<div class=\"topbullet\">\n<p>Urinary total pyridinoline (PYD)</p>\n</div>\n</li>\n<li>\n<div class=\"topbullet\">\n<p>Urinary free deoxypyridinoline (DPD)</p>\n</div>\n</li>\n<li>\n<div class=\"topbullet\">\n<p>Urinary collagen type 1 cross-linked N-Telopeptide(NTX)</p>\n</div>\n</li>\n<li>\n<div class=\"topbullet\">\n<p>Urinary or serum collagen type 1 cross-linked C-Telopeptide (CTX)</p>\n</div>\n</li>\n<li>\n<div class=\"topbullet\">\n<p>Tartrate-resistant acid phosphatase 5b</p>\n</div>\n</li>\n</ul>\n<p>International Osteoporosis Foundation has proposed serum CTX and serum PINP (Procollagen 1 N-terminal peptide) to be used as reference markers of bone resorption and formation, respectively, for the assessment of fracture risk and monitoring therapy in clinical settings.&nbsp;</p>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a cause of secondary hyperparathyroidism?",
    "choices": [
      {
        "id": 1,
        "text": "Parathyroid adenoma"
      },
      {
        "id": 2,
        "text": "Lithium intake"
      },
      {
        "id": 3,
        "text": "Vitamin D deficiency"
      },
      {
        "id": 4,
        "text": "Chronic kidney disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Parathyroid adenoma</strong> is a benign tumor of the parathyroid gland, which causes <strong>primary hyperparathyroidism </strong>(not secondary).</p>\n<p><strong>Secondary hyperparathyroidism&nbsp;</strong>is characterized by <strong>high</strong> levels of <strong>parathyroid hormone</strong>, to compensate for the <strong>low</strong> levels of serum <strong>calcium</strong>, due to some other underlying condition.</p>\n<p>Causes of secondary hyperparathyroidism, include:</p>\n<ul>\n<li><strong>Chronic kidney disease:&nbsp;</strong>The damaged kidneys are unable to produce sufficient amounts of the active form of vitamin D, 1,25-dihydroxycholecalciferol. This further causes hypocalcemia and triggers PTH secretion.</li>\n<li><strong>Vitamin D deficiency</strong>: Causes hypocalcemia, which triggers the increased secretion of PTH.</li>\n<li><strong>Lithium</strong>: May cause an increased set-point of calcium for parathyroid<strong>&nbsp;</strong>hormone suppression, which leads to <strong>parathyroid hyperplasia.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '40 Calcium Homeostasis';
        let hierarchy = ["Marrow", "qBank", "Physiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>