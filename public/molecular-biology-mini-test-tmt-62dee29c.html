<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Molecular Biology Mini Test - -Tmt - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2023-24
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A group of scientists is studying a protein. They electrophorese the protein and transfer it to a membrane. The proteins are visualized by tagging them to specific antibodies. This procedure is called:",
    "choices": [
      {
        "id": 1,
        "text": "Southern blot"
      },
      {
        "id": 2,
        "text": "Eastern blot"
      },
      {
        "id": 3,
        "text": "Northern blot"
      },
      {
        "id": 4,
        "text": "Western blot"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above procedure depicts <strong>Western blot technique. </strong>This technique is used to study <strong>protein molecules.&nbsp;</strong>The proteins undergo electrophoresis and then are transferred to a membrane. These proteins are then tagged with the specific antibodies and visualized.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bfa9b12230034df2b67394965b46cd00x800x431.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24d3d5c2c06c40fcb70dd551aeb62033x800x494.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is false about the proteasomal degradation of proteins?",
    "choices": [
      {
        "id": 1,
        "text": "Misfolded proteins are degraded in this process."
      },
      {
        "id": 2,
        "text": "Ubiquitin is the key molecule involved."
      },
      {
        "id": 3,
        "text": "Carfilzomib inhibits this process."
      },
      {
        "id": 4,
        "text": "It is an ATP-independent process."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Option D</strong> is the false statement. Proteasomal degradation of proteins is an <strong>ATP-dependent process.</strong></p>\n<div class=\"page\" title=\"Page 281\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The <strong>proteasome</strong> consists of a macromolecular, cylindrical complex of proteins. It consists of four rings with a hollow core containing the protease active sites, and one or two caps or regulatory particles. The regulatory particles recognize the polyubiquitinated substrates and initiate the degradation of the protein.</p>\n<p><strong>Ubiquitin</strong> is the key molecule in protein degradation. Degradation of regulatory proteins with short half-lives and of <strong>abnormal </strong>or <strong>misfolded proteins</strong> occurs in the cytosol, and this process requires both&nbsp;<strong>ATP</strong> and <strong>ubiquitin.</strong></p>\n<p>Bortezomib,<strong> carfilzomib</strong>, and ixazomib are proteasome inhibitors. They inhibit proteolytic degradation of multiple cellular proteins and are used in the treatment of multiple myeloma.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e8e53972bb3e4d14ba9996b6ce9ea53dx335x360.JPEG"
    ]
  },
  {
    "text": "In a reverse transcriptase-polymerase chain reaction test (RT-PCR), the target RNA strand that will undergo the process is 5' - AUGCUGCAGUCAAAAAA - 3'. Outputs obtained from the process are shown below. Choose the correct statement.",
    "choices": [
      {
        "id": 1,
        "text": "2 and 4 are correct"
      },
      {
        "id": 2,
        "text": "Only 2 is correct"
      },
      {
        "id": 3,
        "text": "Only 1 is correct"
      },
      {
        "id": 4,
        "text": "1 and 3 are correct"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>For the given RNA strand,&nbsp;5' - AUGCUGCAGUCAAAAAA - 3', the obtained complementary DNA strand will be as shown in <strong>image</strong> <strong>\"C\"</strong> following the rules of <strong>complementary base pairing</strong> (adenine binds with thymine/uracil and cytosine binds with guanine). The <strong>DNA strand</strong> obtained by replication of the cDNA strand will contain only thymine and not uracil and is therefore represented by<strong> \"A\"</strong> in the image above.</p>\n<p><strong>RT-PCR</strong> is a method that is used for the analysis of mRNA expression and its amplification.</p>\n<p>Reverse transcriptase-polymerase chain reaction (RT-PCR) is a variant of PCR and includes 2 steps:</p>\n<ul>\n<li>Generation of <strong>complementary DNA</strong> (cDNA copies) from mRNA using reverse transcriptase - used to qualitatively detect gene expression</li>\n<li><strong>Amplification</strong> of newly synthesized cDNA by traditional PCR - This can be quantitatively measured by using fluorescent dyes (qRT-PCR).</li>\n</ul>\n<p><strong>Uses</strong>:&nbsp;</p>\n<ul>\n<li>Determination of viral load</li>\n<li>Screening of genetic diseases and cancers</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/07999dff09b448a9a6550ca1b7c203e8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/33a13042b6fd4728823907ff940fdcddx335x424.JPEG"
    ]
  },
  {
    "text": "Which of the following enzymes is used in polymerase chain reaction (PCR) and is heat stable and obtained from bacteria?",
    "choices": [
      {
        "id": 1,
        "text": "DNA polymerase III"
      },
      {
        "id": 2,
        "text": "Endonuclease"
      },
      {
        "id": 3,
        "text": "Taq polymerase"
      },
      {
        "id": 4,
        "text": "DNA gyrase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Taq polymerase</strong> is used in <strong>PCR</strong>. It is <strong>heat stable</strong> and is obtained from the bacteria <em><strong>Thermophilus aquaticus</strong></em>. It lacks a proofreading activity.</p>\n<p>DNA synthesis in PCR is catalyzed by a heat-stable DNA polymerase. It is purified from thermophilic bacteria <em><strong>Thermophilus aquaticus</strong></em>, organisms that grow at 70 to 80\u00b0C. Thermostable DNA polymerases withstand short incubations at over 90\u00b0, temperatures required to completely denature DNA.</p>\n<p><strong>The technique of PCR:</strong></p>\n<p><strong>Denaturation-</strong>\u00a0sample DNA strands are separated by heating at 95\u2103 for 15 seconds to 2 minutes.</p>\n<p><strong>Annealing-</strong>\u00a0the primers, added in vast excess, are allowed to anneal to the DNA (typically 50\u201375\u00b0C). The primers hybridize with their complementary single-stranded DNA.</p>\n<p><strong>Extension-</strong>\u00a0each strand is copied by a <strong>Taq polymerase,</strong> starting at the primer sites in the presence of all four nucleotides (dNTPs) at 72\u2103.</p>\n<p>The image given below shows the steps involved in PCR.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1aa0542444f04fd08a9de7ee39d7a919x1280x667.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c9fbd094c5814be99fa9116aafb29638x720x1439.JPEG"
    ]
  },
  {
    "text": "Which of the following blot transfer techniques is used to detect protein-DNA interaction?",
    "choices": [
      {
        "id": 1,
        "text": "Southern blot"
      },
      {
        "id": 2,
        "text": "Western blot"
      },
      {
        "id": 3,
        "text": "Northern blot"
      },
      {
        "id": 4,
        "text": "Southwestern blot"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>South-western blot</strong> is used to detect protein-DNA interaction.&nbsp;</p>\n<p><strong>South-western blot</strong> or <strong>overlay blot</strong> is used to examine protein-protein or protein-nucleic acid interactions respectively.</p>\n<p>Other options:</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">Option A:&nbsp;<strong>Southern</strong> <strong>blotting</strong> is used for the detection of DNA.</p>\n<p>Option B:<strong> Western</strong> <strong>blotting</strong> is used for the detection of protein.</p>\n<p>Option C: <strong>Northern</strong> <strong>blotting</strong> is used for the detection of RNA.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a biochemist working on various cytogenetic abnormality. You use the following cytogenetic technique to study the abnormality from a tissue specimen. Which of the following cytogenetic abnormality cannot be picked up by this technique?",
    "choices": [
      {
        "id": 1,
        "text": "Mutation in cancers"
      },
      {
        "id": 2,
        "text": "Subtelomeric deletion"
      },
      {
        "id": 3,
        "text": "Balanced translocation"
      },
      {
        "id": 4,
        "text": "Aneuploidy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows an\u00a0<strong>array - comparative genomic hybridization (CGH).\u00a0</strong>This cytogenetic technique\u00a0cannot detect balanced translocation.</p>\n<p><strong>Array-based Comparative Genomic Hybridization:</strong></p>\n<p>In array CGH, two genomes are compared. The test DNA and the reference DNA are labeled with two different fluorescent dyes <strong>(red and green respectively)</strong> and are added to a DNA chip spotted with the entire human genome.</p>\n<ul>\n<li>If the contribution of both samples is equal for a given chromosomal region, then all spots on the array will <strong>fluoresce yellow</strong>.</li>\n<li>If the test sample has <strong>amplification</strong>, that spot will <strong>fluoresce red</strong>\n<ul>\n<li>If the test sample has a\u00a0<strong>deletion</strong>, that spot will <strong>fluoresce green</strong></li>\n</ul>\n</li>\n</ul>\n<p><strong>Uses of Array CGH:</strong></p>\n<ul>\n<li>To detect gene amplification</li>\n<li>To detect gene deletion\u00a0</li>\n<li>To detect copy number variations</li>\n</ul>\n<p><strong>Limitations:</strong></p>\n<p>Cannot detect balanced translocations. Reason being as follows:</p>\n<p>If there is less DNA in the patient than the control for a particular probe, the a-CGH will show a deletion of material from the patient for that particular locus; if there is more DNA in the patient than the control for a particular probe, the a-CGH will show a gain of material from the patient for that locus. In a balanced translocation, there is <strong>no gain or loss of material</strong>, so the probes will show that the patient and the control have equal amounts of DNA in those translocated regions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/27c483f04c7c49d9bb4023d4c9bfed39.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the technique shown in the image below.",
    "choices": [
      {
        "id": 1,
        "text": "G banding"
      },
      {
        "id": 2,
        "text": "Spectral karyotyping"
      },
      {
        "id": 3,
        "text": "Southern blotting"
      },
      {
        "id": 4,
        "text": "DNA sequencing"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows each chromosome pair with a unique color, indicative of&nbsp;<strong>multicolor FISH</strong>.&nbsp;</p>\n<p><strong class=\"ng-binding\">Fluorescent In Situ Hybridisation </strong>(FISH)<strong class=\"ng-binding\">&nbsp;</strong>is a simple technique for the detection of specific genetic information on morphologically intact tissue using fluorescent probes.</p>\n<p>Other options:</p>\n<p>Option A:<strong> G banding</strong> is used for chromosomal identification using dark and light bands.</p>\n<p>Option C:<strong> Southern blotting</strong> is a technique used to&nbsp;detect insertions and deletions in a DNA sequence.</p>\n<p>Option D: <strong>DNA sequencing</strong> is&nbsp;used to detect Mendelian disorders,<strong>&nbsp;</strong>cancers, acute myeloid leukemia, etc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7dc0d27ea3b74bfc9c461040d84453f4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The basis of which of the following processes is depicted in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Transposition"
      },
      {
        "id": 2,
        "text": "RNA editing"
      },
      {
        "id": 3,
        "text": "DNA rearrangement"
      },
      {
        "id": 4,
        "text": "Alternate splicing of mRNA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">The process in the given image is <strong>RNA editing</strong>.&nbsp;</span></p>\n<p>RNA editing<span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is the process by which the&nbsp;<strong>coding sequence of the mRNA</strong>&nbsp;<strong>is changed</strong>&nbsp;before translation by post-transcriptional modification. &nbsp;</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">As a result, the mRNA template differs from the DNA from which it was transcribed. This leads to the formation of a different protein.&nbsp;</span>This occurs by the&nbsp;<strong>insertion of additional uracils at the 3&rsquo; end</strong>&nbsp;of the mRNA and<span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">&nbsp;proceeds in the&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">3&rsquo; to 5&rsquo; direction.</span></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">The process of <strong>apolipoprotein B48 synthesis</strong> involves<strong>&nbsp;RNA editing.</strong></span></p>\n<div><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">RNA editing in apoB synthesis:</span></div>\n<ul class=\"listtype-bullet listindent1 list-bullet1\">\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">In the&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">liver</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">, the apoB gene is transcribed to mRNA, which is then translated to&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">apoB-100</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">.</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">In the intestine, the same apoB gene is transcribed to the same mRNA. But now, the mRNA undergoes editing by an enzyme&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">cytidine deaminase,&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">which converts the&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">CAA&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">codon&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">in the mRNA to&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">UAA&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">at a single specific site.</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">&nbsp;This edited mRNA translates to&nbsp;</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">apoB-48.</span></li>\n</ul>\n<p>The production of apolipoprotein (apo) B-48 in the intestine and apoB-100 in the liver is the result of RNA editing in the intestine. Here, a sense codon is changed to a nonsense codon by&nbsp;<strong>posttranscriptional deamination of cytosine to uracil.</strong></p>\n<p>DNA rearrangement, transposition, and alternate splicing also alter the gene expression but are not the basis of apoB-48 tissue-specific production.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0ae5460e5e8d4b9c8684ad4e019b0f9a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Pseudouridine and ribothymidine are present as nucleotides in _____.",
    "choices": [
      {
        "id": 1,
        "text": "tRNA"
      },
      {
        "id": 2,
        "text": "rRNA"
      },
      {
        "id": 3,
        "text": "hnRNA"
      },
      {
        "id": 4,
        "text": "snRNP"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pseudouridine</strong> and <strong>ribothymidine</strong> are present as nucleotides in transfer RNAs (<strong>tRNAs</strong>)<strong>.</strong></p>\n<p>Transfer RNA is a type of RNA that helps to <strong>transport amino acids</strong> from the cell <strong>cytoplasm</strong> <strong>to</strong> the<strong> ribosome,</strong> where <strong>protein synthesis</strong> is taking place. Since they are soluble in nature, they are also known as <strong>soluble RNA (sRNA)</strong>. They undergo internal base-pairing (represented by the black dotted lines in the image below) to form the secondary <strong>cloverleaf</strong> structure.</p>\n<p>Each part of the cloverleaf structure serves a different purpose. The parts of the cloverleaf include:</p>\n<ul>\n<li>Anticodon loop</li>\n<li>Acceptor arm</li>\n<li>D loop</li>\n<li><strong>The ribothymidine pseudouridine cytidine (T&Psi;C) </strong>loop</li>\n<li>Variable loop</li>\n</ul>\n<p>The image given below shows the cloverleaf structure of tRNA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d0c9f3a5882e4c5080232c9afe323c07x600x711.JPEG"
    ]
  },
  {
    "text": "Which of the following methods uses specialized RT-PCR  to amplify the ends of mRNA transcripts?",
    "choices": [
      {
        "id": 1,
        "text": "RACE-PCR"
      },
      {
        "id": 2,
        "text": "Multiplex PCR"
      },
      {
        "id": 3,
        "text": "Nested PCR"
      },
      {
        "id": 4,
        "text": "Droplet digital PCR"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Rapid Amplification of cDNA Ends PCR</strong>, or\u00a0<strong>RACE-PCR</strong>, is used to amplify the ends of messenger RNA (mRNA) transcripts using a specialized reverse transcription-polymerase chain reaction.</p>\n<p><strong>Polymerase chain reaction (PCR): </strong>PCR<strong>\u00a0</strong>is a rapid automated method for the amplification of specific DNA sequences (or genes).\u00a0</p>\n<p><strong>Reverse transcriptase PCR:\u00a0</strong>The enzyme reverse transcriptase (RT) is used to synthesize a complimentary copy of DNA (cDNA) from\u00a0RNA, and this cDNA is then used as a template for PCR.</p>\n<p>Using the known information from the center of the transcript, RACE-PCR allows the amplification of an unknown end portion of the transcript via a specialized reverse transcription-polymerase chain reaction (RT-PCR). RACE-PCR is also referred to as <strong>one-sided PCR</strong> or <strong>anchored PCR.</strong></p>\n<p><strong>Other special PCR types:</strong></p>\n<p><strong>Nested PCR:</strong>\u00a0It involves the sequential use of\u00a0<strong>two primer sets</strong>. The first primer set is used for amplification and the target sequence for the second primer is present only on the amplicon with the target sequence. Nested PCR is\u00a0intended to reduce non-specific binding due to the amplification of unexpected primer binding sites.</p>\n<p>\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24a6c67a71c147d48c2461e68e660e4ex1120x1354.PNG"
    ]
  },
  {
    "text": "A research fellow in biochemistry is studying the lac operon concept of gene regulation. He cultures E. coli. in a glucose-deficient and lactose-containing medium. Which of the following genes expressed in this condition helps convert lactose to galactose and glucose?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The gene marked as 2 is the <strong>lac Z gene</strong>, which codes for <strong>&beta;-galactosidase.&nbsp;</strong>This enzyme converts <strong>lactose to&nbsp;galactose and glucose.</strong></p>\n<p><strong>Lac operon concept</strong></p>\n<p>Jacob and Monod<span class=\"Apple-converted-space\">&nbsp;studied the Lac operon model, which is the&nbsp;</span>regulation of lactose metabolism by the intestinal bacterium <em>Escherichia coli</em>.<span class=\"Apple-converted-space\">&nbsp;It is switched on when the bacteria have to utilize lactose for utilization. Otherwise, it is switched off. It contains the following genes:</span></p>\n<ul>\n<li><span class=\"Apple-converted-space\"><strong>lac I</strong>- it codes for the repressor protein</span></li>\n<li><span class=\"Apple-converted-space\">cAMP response element (<strong>CRE</strong>)- It is activated by binding the&nbsp;</span>cyclic AMP activator protein (CAP). When activated, it increases the binding of&nbsp;RNA polymerase<span class=\"Apple-converted-space\">&nbsp;and increases gene expression.</span></li>\n<li><span class=\"Apple-converted-space\"><strong>Promoter site</strong>- It is the site where RNA polymerase binds the gene for transcription.&nbsp;</span></li>\n<li><span class=\"Apple-converted-space\"><strong>Operator site</strong>- It is the site where repressor protein binds.</span></li>\n<li><span class=\"Apple-converted-space\"><strong>lac Z gene</strong>- It codes for&nbsp;</span><strong>&beta;-Galactosidase</strong> that hydrolyzes lactose to galactose and glucose.<span class=\"Apple-converted-space\">&nbsp;</span></li>\n<li><span class=\"Apple-converted-space\"><strong>lac Y</strong>- It encodes for <strong>lactose permease</strong>, which increases the permeability of lactose into the cells.</span></li>\n<li><span class=\"Apple-converted-space\"><strong>lac A</strong>- It encodes for&nbsp;</span><strong>thiogalactoside transacetylase</strong>.<strong><span class=\"Apple-converted-space\">&nbsp;</span></strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0dc6b32e2315408faa502cd1bdc8bf47.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/16246ae4498f4884b204646c1cc079d4x1280x746.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/722459effdb747beb9146605b547ac05x512x384.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5fd6e348858c4028a52c16ec95ec7736x637x326.JPEG"
    ]
  },
  {
    "text": "Which of the following acts as an RNA-directed nuclease?",
    "choices": [
      {
        "id": 1,
        "text": "CRISPR-Cas9"
      },
      {
        "id": 2,
        "text": "S1 nuclease"
      },
      {
        "id": 3,
        "text": "Exonuclease III"
      },
      {
        "id": 4,
        "text": "Phosphatase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>CRISPR-Cas9</strong>&nbsp;acts as an<strong> RNA-directed nuclease.</strong></p>\n<p>Clustered regularly interspaced short palindromic repeats-associated gene 9, or <strong>CRISPR</strong>-<strong>Cas9</strong>, is a&nbsp;DNA editing/gene regulatory system. It involves two essential components:&nbsp;<strong>Cas9</strong>, an endonuclease that causes a double-stranded DNA break, allowing modifications to the genomic DNA to be made; and a synthetic single-guide RNA, or <strong>sgRNA</strong>, responsible for guiding Cas9 to its target.</p>\n<p>Once the sgRNA has directed the Cas9 to the section of the genomic DNA to be edited, the 3&rsquo; end of the sgRNA comes to lie across a specific sequence of DNA adjacent to the editing side called the <strong>protospacer adjacent motif</strong> or <strong>PAM</strong>. The Cas9 now causes a double-stranded break in the DNA at the PAM site, which is then repaired by a <strong>non-homologous end-joining</strong>.</p>\n<p>The following image shows&nbsp;CRISPR-Cas9 system:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/55d34c1a7d75486a8ef76803f4b55946x1280x857.PNG"
    ]
  },
  {
    "text": "Which of the following methods are used for the detection of RNA?",
    "choices": [
      {
        "id": 1,
        "text": "1, 3"
      },
      {
        "id": 2,
        "text": "2, 4"
      },
      {
        "id": 3,
        "text": "3, 5"
      },
      {
        "id": 4,
        "text": "3, 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The methods that can be used for the<strong> detection </strong>of<strong> RNA </strong>are<strong> northern blotting </strong>and <strong>RT-PCR </strong>(option D - 3, 4).</p>\n<p><strong>PCR</strong> (polymerase chain reaction) is a technique used to amplify a selected DNA sequence. It can be used to synthesize millions of copies of the selected DNA sequence in a few hours, enabling the detection of even trace amounts of DNA in a sample. Therefore, PCR is used for:</p>\n<ul>\n<li>Detecting <strong>mutant DNA&nbsp;</strong></li>\n<li><strong>DNA fingerprinting</strong> for forensic analysis- Detection of DNA from small amounts of samples from the crime scene</li>\n<li>Detection of <strong>latent viral infections</strong></li>\n<li><strong>Carrier detection</strong> of cystic fibrosis</li>\n</ul>\n<p><strong>Real-time PCR</strong> <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">is used for quantitation of the number of viruses present in a sample e.g. viral load in HIV or HBV. So, the treatment modalities can be planned and the response to treatment can be assessed.</span></p>\n<p><strong>RT-PCR</strong> or reverse transcriptase PCR is used for the detection of&nbsp;<strong>RNA.&nbsp;</strong>It can be used to <strong>quantitate mRNA levels</strong>&nbsp;by generating complementary DNA <strong>(cDNA) copies</strong> of the mRNA using the <strong>reverse transcriptase</strong> enzyme.&nbsp;</p>\n<p><strong>The northern blot </strong>technique can also be used to detect <strong>RNAs.</strong>&nbsp;Here, the mixture of <strong>mRNA</strong> molecules is separated by electrophoresis and then transferred to a nitrocellulose membrane and hybridized with radiolabeled probes.<strong><br /></strong></p>\n<p><strong>Western blot,&nbsp;</strong>also called<strong> immunoblots,&nbsp;</strong>is a&nbsp;technique used to study <strong>protein </strong>molecules<strong>.&nbsp;</strong>The proteins undergo electrophoresis and then are transferred to a membrane. These proteins are then tagged with the specific antibodies and visualized.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A biochemist wanted to study the difference in gene expression between a cancer cell and a normal cell. He used the following method shown in the image. Identify the method.",
    "choices": [
      {
        "id": 1,
        "text": "Microarray technique"
      },
      {
        "id": 2,
        "text": "Northern blot"
      },
      {
        "id": 3,
        "text": "Southern blot"
      },
      {
        "id": 4,
        "text": "Western blot"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The method shown in the image is called\u00a0<strong>microarray</strong> analysis.\u00a0</p>\n<p>It can be used to study<strong> mutations</strong> in DNA and <strong>variations in gene expression</strong>.</p>\n<p>It consists of a slide with tiny spots of DNA called a\u00a0<strong>DNA</strong> (or gene) <strong>chip</strong>. For studying gene expression, mRNA is taken from the sample and then its complementary DNA (cDNA) is made. This cDNA from the normal cell is labeled with green fluorescence, and the cDNA from the cancer cell is labeled with red fluorescence. Then, both are allowed to hybridize with the DNA on the chip.</p>\n<p>Interpretation:</p>\n<ul>\n<li>Black spots represent no expression by both normal and cancer cells.</li>\n<li>Red spots represent more expression by the cancer cells.</li>\n<li>Green spots represent more expression by normal cells.</li>\n<li>Yellow spots represent equal expression by both cells.</li>\n</ul>\n<p>Using the microarray technique, the differing patterns of gene expression between two types of cells can be analyzed.</p>\n<p>Option B -\u00a0A <strong>northern blot</strong> only measures mRNA production from one gene at a time.<br />Option C -\u00a0<strong>Southern blot</strong> can only analyze DNA not the products of DNA expression.<br />Option d - <strong>Western blot</strong> measures protein production.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/355da0b0212546cd9c71a2c730335e0f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following modifications occur posttranscriptionally to produce a mature eukaryotic mRNA?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 4"
      },
      {
        "id": 2,
        "text": "1, 2, 5"
      },
      {
        "id": 3,
        "text": "3, 4, 6"
      },
      {
        "id": 4,
        "text": "3, 5, 6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Capping</strong>,&nbsp;<strong>polyadenylation</strong>, and&nbsp;<strong>splicing&nbsp;</strong>are the modifications that occur <strong>posttranscriptionally</strong> to produce a mature eukaryotic mRNA.&nbsp;<strong>Phosphorylation</strong>,&nbsp;<strong>hydroxylation</strong>, and&nbsp;<strong>trimming&nbsp;</strong>are modifications that occur&nbsp;<strong>posttranslationally</strong>.</p>\n<p>A mature eukaryotic mRNA is formed after the pre-mRNA components of the heterogenous nuclear RNA (hnRNA) undergo the following posttranscriptional modifications in the nucleus:</p>\n<ol>\n<li><strong>Addition of a 5&prime; cap</strong>: A 7-methylguanosine is attached to the 5&prime; terminal end of the mRNA via a 5&prime;-to-5&prime; triphosphate linkage. This stabilizes the mRNA and allows initiation of translation.</li>\n<li><strong>Addition of a 3&prime;-poly-A tail</strong>: The poly-A tail is added by the nuclear enzyme, polyadenylate polymerase, after clevage of the polyadenylation signal sequence (AAUAAA) found near the 3&prime; end of the mRNA. This terminates eukaryotic transcription. Furthermore, it stabilizes the mRNA, allows it to exit from the nucleus, and helps in translation.</li>\n<li><strong>Splicing</strong>: This is the process of removing introns (intervening sequences that do not code for proteins) and joining exons (the coding or expressed sequences), carried out by the spliceosome. Alternative splicing occurs in different tissues to produce varied number of proteins from a limited set of genes.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Best method for detection of mutations with low allele frequency is",
    "choices": [
      {
        "id": 1,
        "text": "Droplet digital PCR"
      },
      {
        "id": 2,
        "text": "FISH"
      },
      {
        "id": 3,
        "text": "Nested PCR"
      },
      {
        "id": 4,
        "text": "Sanger Sequencing"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Best method for detection of mutation with low allele frequency is\u00a0<strong>Droplet digital PCR</strong> (ddPCR)</p>\n<p>It is an advanced and\u00a0<strong>more precise</strong> type of <strong>quantitative PCR </strong>which gives more consistent and reproducible results.<strong>\u00a0</strong>It\u00a0can <strong>accurately quantify</strong> the target nucleic acid sequence within a sample. It is useful for determining somatic mutation\u00a0with low allele frequency. Mutant alleles of frequency as low as 0.25% can also be detected using this technique.\u00a0</p>\n<p><strong>Polymerase chain reaction (PCR)\u00a0</strong>is a rapid automated method for the amplification of specific DNA sequences (or genes).\u00a0<strong>Reverse transcriptase PCR-\u00a0</strong>The enzyme reverse transcriptase (RT) is used to synthesize a complimentary copy of DNA (cDNA) from\u00a0RNA\u00a0and this cDNA is then used as a template for PCR.</p>\n<p><strong>Other special PCR types:</strong></p>\n<p><strong>Nested PCR-</strong>\u00a0It involves the sequential use of\u00a0<strong>two primer sets</strong>. The first primer set is used for amplification and the target sequence for the second primer is present only on the amplicon with the target sequence. Nested PCR is\u00a0intended to reduce non-specific binding due to the amplification of unexpected primer binding sites.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24a6c67a71c147d48c2461e68e660e4ex1120x1354.PNG"
    ]
  },
  {
    "text": "Which of the following technique is used to sequence proteins without prior purification?",
    "choices": [
      {
        "id": 1,
        "text": "Ion exchange chromatography"
      },
      {
        "id": 2,
        "text": "Tandem mass spectrometry"
      },
      {
        "id": 3,
        "text": "Polyacrylamide gel electrophoresis"
      },
      {
        "id": 4,
        "text": "Isoelectric focusing"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tandem mass spectrometry</strong> can be used to sequence proteins <strong>without prior purification.</strong></p>\n<p><strong>Tandem mass spectrometry</strong> involves two mass spectrometers linked in series. Individual peptides are separated by the first spectrometer based on the differences in mass of each peptide.</p>\n<p>A single peptide is directed to the second mass&nbsp;spectrometer by adjusting the field strength of the first magnet. Here, it gets fragmented and the mass is determined.</p>\n<p>It is used to <strong>screen</strong> the blood samples of newborns for <strong>genetic disorders</strong> such as phenylketonuria, ethylmalonic encephalopathy, and glutamic acidemia.</p>\n<p>Other options:</p>\n<p><strong>Ion exchange chromatography,</strong> <strong>polyacrylamide gel electrophoresis</strong>, and <strong>isoelectric focusing</strong> are the methods of purifying/separating proteins.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Wobble hypothesis explains which of the following concepts of the genetic code?",
    "choices": [
      {
        "id": 1,
        "text": "Universal"
      },
      {
        "id": 2,
        "text": "Unambiguous"
      },
      {
        "id": 3,
        "text": "Degeneracy"
      },
      {
        "id": 4,
        "text": "Non-punctuated"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The wobble hypothesis explains the <strong>degeneracy</strong> of the genetic code.</p>\n<p>The <strong>wobble hypothesis</strong> states that codon-anticodon pairing follows the traditional<strong> Watson\u2013Crick </strong>rules (G pairs with C and A pairs with U) for the <strong>first two bases</strong> of the codon but can be less stringent for the third/last base. It has been observed that a tRNA can recognize more than one codon for a specific amino acid, especially in the last nucleotide of the codon triplet. This is referred to as degeneracy and its mechanism can be explained by the wobble hypothesis.</p>\n<p>The first base of the anticodon moves to permit\u00a0<strong>nontraditional pairing </strong>with the last base of the codon. This movement is called <strong>wobble</strong> and is possible because the first base of the anticodon is not as spatially defined as the other two bases. Due to the wobbling, 61 tRNA species are not required to read the 61 codons.</p>\n<p>For example, three codons for glycine\u2014GGU, GGC, and GGA\u2014can form a base pair from one anticodon, 3\u2032 CCI 5\u2032 ie, I, inosine, can base pair with U, C, and A, as shown in the diagram below.</p>\n<p>Other options:</p>\n<p>Option A: The genetic code is <strong>universal</strong> because it is the same for all living organisms.</p>\n<p>Option B: The genetic code is <strong>unambiguous</strong> because each codon is specific for only one amino acid. Example: GGA only codes for Glycine.</p>\n<p>Option D: The genetic code is <strong>non-punctuated. </strong>This means that once the reading commences at a specific start codon, it is continuous and is read continuously as triplets until a stop codon is reached without stopping.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e2ad80f76c940efad91da49b943c477x562x1198.PNG"
    ]
  },
  {
    "text": "Restriction fragment length polymorphism (RFLP) is used in order to identify the five different species of staphylococci in a surgical ICU. Which of the following site does the restriction enzyme act on?",
    "choices": [
      {
        "id": 1,
        "text": "5'-ATGGAC-3'"
      },
      {
        "id": 2,
        "text": "5'-GATATC-3'"
      },
      {
        "id": 3,
        "text": "5'-TAGATA-3'"
      },
      {
        "id": 4,
        "text": "5'-AATATA-3'"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> restriction enzyme</strong> is likely to <strong>act</strong> on <strong>5'-GATATC-3' </strong>(Option B).</p>\n<p><strong>Restriction endonuclease(RE)</strong> enzymes usually act at specific <strong>palindromic sequences</strong> which create DNA fragments of different lengths. A palindromic sequence is one that reads the same in opposite directions. By analyzing the fragments produced after cutting the DNA by RE, specific species of bacteria can be identified. Option B, when expanded after writing the complementary sequence, appears the same while reading both DNA strands in the 5' to 3' direction and is hence a palindrome.</p>\n<p>5' --GATATC-- 3'<br />3' --CTATAG-- 5'&nbsp;</p>\n<p>Restriction <strong>endonucleases</strong>&nbsp;are enzymes that&nbsp;<strong>recognize and cleave a specific double-stranded DNA sequence</strong>. These DNA cuts result in&nbsp;<strong>sticky ends</strong> or <strong>blunt ends.</strong>&nbsp;Sticky ends are then used to build hybrid DNA.&nbsp;</p>\n<p>A <strong>Restriction fragment length poly&shy;morphism (RFLP)</strong> is a genetic variant that can be studied by cleaving the DNA into fragments known as restriction fragments. This is done <strong>using a restriction enzyme</strong>. The length of the restriction fragments changes if the genetic variant alters the DNA and creates or abolishes the site of restriction endonuclease cleavage. RFLPs can thus be used to find the variation in different staphylococci species.</p>\n<p>The sequences given in<strong> Options A, C and D are not palindromes,</strong> as they do not read the same forwards and backwards after expanding. So they <strong>cannot be recognized by Restriction endonuclease</strong> enzymes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following RNA is involved in mRNA splicing?",
    "choices": [
      {
        "id": 1,
        "text": "miRNA"
      },
      {
        "id": 2,
        "text": "rRNA"
      },
      {
        "id": 3,
        "text": "siRNA"
      },
      {
        "id": 4,
        "text": "snRNA"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>snRNA</strong> or small nuclear RNA plays a role in <strong>mRNA splicing</strong>. They take part in the formation of spliceosomes.</p>\n<p>Other options:</p>\n<p>Option A: <strong>miRNA</strong> (micro RNA) is derived from large primary transcripts through specific nucleolytic processing. It modulates gene expression by <strong>altering mRNA function</strong>. They bind to matching pieces of mRNA, turn it into a double strand and arrest the translation.&nbsp;</p>\n<p>Option B:&nbsp;&nbsp;<strong>rRNAs </strong>are&nbsp;involved in <strong>protein synthesis.</strong>&nbsp;They facilitate the interaction of mRNA, tRNA, and amino acids to interact with each other for the translation process.&nbsp;</p>\n<p>Option C: <strong>siRNA</strong> or interfering RNA is mainly involved in RNA interference. They <strong>degrade</strong> the <strong>mRNA</strong> through specific cytoplasmic organelles called P bodies.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Molecular Biology Mini Test - -Tmt';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2023-24"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>