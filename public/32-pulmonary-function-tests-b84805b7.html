<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>32 Pulmonary Function Tests - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Physiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Which of the following parameters belong to static lung volumes and capacities?</p>\n\n<ol>\n\t<li>Maximum Voluntary Ventilation</li>\n\t<li>Functional Residual Capacity (FRC)</li>\n\t<li>Dead space</li>\n\t<li>Residual Volume (RV)</li>\n\t<li>Forced Expiratory Volume in 1 second (FEV1)</li>\n</ol>",
    "choices": [
      {
        "id": 1,
        "text": "1, 3, and 4"
      },
      {
        "id": 2,
        "text": "2, 3, and 4"
      },
      {
        "id": 3,
        "text": "1, 2, and 5"
      },
      {
        "id": 4,
        "text": "2, 4, and 5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) 2, 3, and 4 are correct</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:657px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Aspect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Static Lung Volumes & Capacities</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Dynamic Lung Volumes & Capacities</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Measurement Focus</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lung volume without the recording of time</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lung volume to time</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Units of Measurement</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Measured in millilitres (ml) or litres</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Measured in millilitres per second (ml/second)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Examples</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Volume:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Tidal Volume (TV)</li>\n\t\t\t\t<li>Inspiratory Reserve Volume (IRV)</li>\n\t\t\t\t<li>Expiratory Reserve Volume (ERV)</li>\n\t\t\t\t<li>Residual Volume (RV)</li>\n\t\t\t\t<li>Anatomical Dead Space</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p><strong>Capacity:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Total Lung Capacity (TLC)</li>\n\t\t\t\t<li>Vital Capacity (VC)</li>\n\t\t\t\t<li>Inspiratory Capacity (IC)</li>\n\t\t\t\t<li>Functional <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> Capacity (FRC)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Forced <span class=\"customMeta\" data-dictid=\"187bb6b3f61692777201956c59ce72\">Vital Capacity</span> (FVC)</li>\n\t\t\t\t<li>Forced <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Volume in 1 second (FEV1)</li>\n\t\t\t\t<li>FEV1/FVC Ratio</li>\n\t\t\t\t<li>Peak <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Flow Rate (PEFR)</li>\n\t\t\t\t<li>Inspiratory Flow Rate</li>\n\t\t\t\t<li>Expiratory Flow Rate</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Clinical Significance</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Assess the maximum air volume the lungs can hold and the different capacities during various breathing phases.</li>\n\t\t\t\t<li>Diagnosis of restrictive lung diseases such as <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">fibrosis</span> and sarcoidosis</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Assess the rate of <span class=\"customMeta\" data-dictid=\"99caf903791692777180bc28743310\">airflow</span> and lung function over time.</li>\n\t\t\t\t<li>Diagnosis of obstructive lung diseases such as <span class=\"customMeta\" data-dictid=\"76891bb6e91692777182cda16e1db6\">asthma</span> and COPD</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/bJ6jxUhDo76dyrpTwHyB1744802524.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/cmv4ZxlhfArI2KB5pKbA1744802602.mp3"
  },
  {
    "text": "<p>Which of the following parameters cannot be measured by spirometry?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Vital capacity"
      },
      {
        "id": 2,
        "text": "Residual volume"
      },
      {
        "id": 3,
        "text": "Inspiratory reserve volume"
      },
      {
        "id": 4,
        "text": "Tidal volume"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> volume</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Respiratory parameters that cannot be measured by spirometry:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:633px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Parameter</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Method for Measurement</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Residual Volume (RV)</strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Body <span class=\"customMeta\" data-dictid=\"5e7bc7da6d16927771950fcdea984a\">Plethysmography</span> (Best).</li>\n\t\t\t\t<li>Gas <span class=\"customMeta\" data-dictid=\"409e887c94169277718652d5db3c32\">Dilution</span> (Helium <span class=\"customMeta\" data-dictid=\"409e887c94169277718652d5db3c32\">dilution</span> Method).</li>\n\t\t\t\t<li>Nitrogen Washout</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Functional <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> Capacity (FRC)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Total Lung Capacity (TLC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Body Plethysmography.</li>\n\t\t\t\t<li>Gas <span class=\"customMeta\" data-dictid=\"409e887c94169277718652d5db3c32\">Dilution</span> (Helium <span class=\"customMeta\" data-dictid=\"409e887c94169277718652d5db3c32\">Dilution</span> Method)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Alveolar Dead Space</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Single-Breath Tests.</li>\n\t\t\t\t<li>Imaging Studies.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Diffusing Capacity (DLCO)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>DLCO Test (Carbon <span class=\"customMeta\" data-dictid=\"03077f6c8716927771923763487a9e\">Monoxide</span> <span class=\"customMeta\" data-dictid=\"9c760dcb641692777186f4cda5dc95\">Diffusion</span> Test)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/ghQUd1CSziIyYyB5RG031744802688.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/76di5Cz1tY3VuwGEiOYI1744802752.mp3"
  },
  {
    "text": "<p>Which of the following formulas correctly represents the Vital Capacity (VC) of the lungs?</p>",
    "choices": [
      {
        "id": 1,
        "text": "TV + IRV + ERV + RV"
      },
      {
        "id": 2,
        "text": "TV + IRV + ERV"
      },
      {
        "id": 3,
        "text": "TV + IRV"
      },
      {
        "id": 4,
        "text": "ERV + RV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) TV + <span class=\"customMeta\" data-dictid=\"9cea17d64b16927771905278e8ea88\">IRV</span> + ERV</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Vital Capacity (VC) is the maximum amount of air that can be exhaled after a maximum <span class=\"customMeta\" data-dictid=\"0b1500fcd816927771900b59d16bde\">inhalation</span> and is calculated by summing <span class=\"customMeta\" data-dictid=\"9de1765e531692777200d737a38c98\">Tidal</span> Volume (TV), <span class=\"customMeta\" data-dictid=\"6db3ce90491692777190e77e003a90\">Inspiratory Reserve Volume</span> (IRV), and <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Reserve Volume (ERV).</p>\n\n<p>VC = TV + <span class=\"customMeta\" data-dictid=\"9cea17d64b16927771905278e8ea88\">IRV</span> + ERV</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:644px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Lung Volume/Capacity</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Description</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Typical Volume (mL)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Formula</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Tidal Volume (TV)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Amount of air inhaled or exhaled during normal breath</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>500</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>-</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Inspiratory Reserve Volume (IRV)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Additional air that can be inhaled after a normal inhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>3000</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>-</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Expiratory Reserve Volume (ERV)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Additional air that can be exhaled after a normal exhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1200</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>-</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Residual Volume (RV)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Air remaining in the lungs after a <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> exhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1200</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>-</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Anatomical Dead Space</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Volume of air in conducting airways where no gas exchange occurs</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>150</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>-</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Total Lung Capacity (TLC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Maximum amount of air the lungs can hold</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>6000</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>TLC = TV + <span class=\"customMeta\" data-dictid=\"9cea17d64b16927771905278e8ea88\">IRV</span> + <span class=\"customMeta\" data-dictid=\"5a6905fdca16927771879daba1b8d2\">ERV</span> + RV</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Vital Capacity (VC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Maximum air exhaled after a <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> inhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>4800</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>VC = TV + <span class=\"customMeta\" data-dictid=\"9cea17d64b16927771905278e8ea88\">IRV</span> + ERV</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Inspiratory Capacity (IC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Maximum air inhaled after a normal exhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>3500</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>IC = TV + IRV</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Functional <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> Capacity (FRC)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Air remaining in the lungs after a normal exhalation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>2400</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>FRC = <span class=\"customMeta\" data-dictid=\"5a6905fdca16927771879daba1b8d2\">ERV</span> + RV</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/9miruZ5PTxoBw20tQnmi1744802829.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Fpx82M1srbWfQpCSmEs91744802895.mp3"
  },
  {
    "text": "<p>What is the true statement regarding Closing Volume (CV)?</p>",
    "choices": [
      {
        "id": 1,
        "text": "CV is the lung volume at which large airways begin to close during inspiration."
      },
      {
        "id": 2,
        "text": "CV measurement is typically performed using a Multi-Breath Helium Dilution Test."
      },
      {
        "id": 3,
        "text": "Increased CV is seen in conditions such as ageing, obstructive lung diseases, obesity, and smoking."
      },
      {
        "id": 4,
        "text": "A normal CV indicates small airway dysfunction and abnormal lung mechanics."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Increased CV is seen in conditions such as ageing, obstructive lung diseases, obesity, and smoking.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Closing Volume (CV)</strong></p>\n\n<p><strong>Definition:</strong></p>\n\n<ul>\n\t<li>Closing Volume (CV) is the lung volume at which small airways begin to close during expiration, particularly in the dependent parts of the lungs.<strong>(Option A ruled out)</strong></li>\n\t<li>CV = <span class=\"customMeta\" data-dictid=\"8882f12ea2169277718421edfcacab\">Closing capacity</span> - <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> volume.</li>\n</ul>\n\n<p><strong>Mechanism:</strong></p>\n\n<ul>\n\t<li>During expiration, as lung volume decreases, <span class=\"customMeta\" data-dictid=\"cfee4428321692777195b8d83946fe\">pleural pressure</span> becomes less negative.</li>\n\t<li>At the closing volume, <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> pressure drops below pleural pressure, causing small airways to close.</li>\n</ul>\n\n<p><strong>Measurement:</strong></p>\n\n<ul>\n\t<li>Single-Breath <span class=\"customMeta\" data-dictid=\"391d32291016927771932bab695579\">Nitrogen</span> <span class=\"customMeta\" data-dictid=\"67d67b341916927772029cd0d951df\">Washout</span> Test: This test measures CV by observing the <span class=\"customMeta\" data-dictid=\"67d67b341916927772029cd0d951df\">washout</span> of <span class=\"customMeta\" data-dictid=\"391d32291016927771932bab695579\">nitrogen</span> from the lungs during a single breath.</li>\n</ul>\n\n<p><strong>Clinical Implications:</strong></p>\n\n<p>Increased CV: Indicates small <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> and can be seen in:<strong>(Option D ruled out)</strong></p>\n\n<ul>\n\t<li>Ageing: Decreased <span class=\"customMeta\" data-dictid=\"2dba7c03f61692777187254f866bcc\">elastic</span> <span class=\"customMeta\" data-dictid=\"b45dda9ea71692777197cbb7b1cab1\">recoil</span> and increased lung compliance.</li>\n\t<li>Obstructive Lung Diseases: <span class=\"customMeta\" data-dictid=\"6a75d857ea1692777185f9245b02b8\">COPD</span> and asthma.</li>\n\t<li>Obesity and Pregnancy: <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">Reduced</span> lung volumes and <span class=\"customMeta\" data-dictid=\"06ff18f51216927771867fe1461a04\">diaphragmatic</span> changes.</li>\n\t<li>Smoking: Indicates early small <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> dysfunction.</li>\n</ul>\n\n<p><strong>Closing Capacity (CC):</strong></p>\n\n<p><img alt=\"Closing Capacity\" data-author=\"na\" data-hash=\"537\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" src=\"https://image.prepladder.com/notes/V1BeiComScjiXPzLpRqc1735959515.png\" /></p>\n\n<p><strong>Definition: </strong></p>\n\n<ul>\n\t<li>Closing Capacity (CC) is the lung volume at which the <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> <span class=\"customMeta\" data-dictid=\"0dd428c12116927771819285c8849c\">alveoli</span> begin to close off during expiration.</li>\n\t<li>It is the sum of the closing and <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volumes (CC = CV + RV).</li>\n</ul>\n\n<p><strong>Mechanism:</strong></p>\n\n<ul>\n\t<li>During forceful expiration, the volume at which only the <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> <span class=\"customMeta\" data-dictid=\"0dd428c12116927771819285c8849c\">alveoli</span> are closed off is known as closing capacity.</li>\n\t<li>Further <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> will eventually lead to all <span class=\"customMeta\" data-dictid=\"0dd428c12116927771819285c8849c\">alveoli</span> being closed off, reaching the <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume.</li>\n</ul>\n\n<p><strong>Clinical Implications:</strong></p>\n\n<ul>\n\t<li>Ageing: <span class=\"customMeta\" data-dictid=\"cf96102d3d16927772021df54a646d\">Functional <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> capacity</span> (FRC) is greater than CC in a normal adult. By around 66 years of age, <span class=\"customMeta\" data-dictid=\"c3a55399e71692777203bdd271b5a9\">FRC</span> is nearly equal to CC, indicating that CC increases gradually with age.</li>\n\t<li>Pathological Implications: If CC significantly exceeds FRC, it indicates highly collapsible lung diseases, such as <span class=\"customMeta\" data-dictid=\"a2ce88e8a0169277718988f5bc31b8\">hyaline</span> <span class=\"customMeta\" data-dictid=\"34cd707428169277719272942b7905\">membrane</span> disease.</li>\n</ul>\n\n<p><strong>Measurement</strong>:</p>\n\n<p><strong>Single-Breath <span class=\"customMeta\" data-dictid=\"391d32291016927771932bab695579\">Nitrogen</span> <span class=\"customMeta\" data-dictid=\"67d67b341916927772029cd0d951df\">Washout</span> Method (Fowler's) </strong>measures CC and <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> dead space by observing <span class=\"customMeta\" data-dictid=\"391d32291016927771932bab695579\">nitrogen</span> <span class=\"customMeta\" data-dictid=\"67d67b341916927772029cd0d951df\">washout</span> during a single breath.<strong>(Option B ruled out)</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/V1BeiComScjiXPzLpRqc1735959515.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/aVSIQPC9VPyAR1tRz7X51744803113.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/UvOxWOGMWFwIQdkOu1Ej1744803247.mp3"
  },
  {
    "text": "<p>A 60-year-old man with a history of smoking presents with shortness of breath. During spirometry, dynamic compression of the airways is observed during forceful expiration. Which of the following statements best describes the point at which dynamic compression occurs?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Early expiration, high lung volume."
      },
      {
        "id": 2,
        "text": "Mid expiration, FRC reached."
      },
      {
        "id": 3,
        "text": "Late expiration, pleural pressure > airway pressure."
      },
      {
        "id": 4,
        "text": "End expiration, near RV."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Dynamic <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> of the airways occurs primarily during the late phase of forceful <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> when <span class=\"customMeta\" data-dictid=\"09d1aa62351692777190c98d0dbb12\">intrathoracic</span> pressure (pleural pressure) exceeds <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> pressure.</p>\n\n<p>This leads to <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> narrowing or collapse, particularly in <span class=\"customMeta\" data-dictid=\"cc2003e35d1692777184a26dae1a68\">chronic obstructive <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> disease</span> (COPD), with increased resistance and decreased <span class=\"customMeta\" data-dictid=\"2dba7c03f61692777187254f866bcc\">elastic</span> recoil.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Mechanism:</strong></p>\n\n<ul>\n\t<li>During forceful expiration, <span class=\"customMeta\" data-dictid=\"2dba7c03f61692777187254f866bcc\">elastic</span> tissues in the <span class=\"customMeta\" data-dictid=\"0dd428c12116927771819285c8849c\">alveoli</span> help in <span class=\"customMeta\" data-dictid=\"c72d29ec4116927771942153c0d252\">passive</span> <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> by recoiling inward. As air moves through the <span class=\"customMeta\" data-dictid=\"4a371bd76e16927771835d6c738d1d\">bronchi</span> and bronchioles, <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> resistance causes the pressure to drop.</li>\n\t<li>An external force from the <span class=\"customMeta\" data-dictid=\"06e0403a9c16927771846fde1c53f8\">chest wall</span> also acts on the <span class=\"customMeta\" data-dictid=\"4a371bd76e16927771835d6c738d1d\">bronchi</span> and bronchioles. At the end of expiration, the pressure inside the bronchioles equals the external pressure, known as the equal pressure point.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Dynamic <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> does not occur during the early <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> phase when the lung volume is still relatively high; the surrounding lung tissue generally supports the airways well. <strong>(Option A)</strong></p>\n\n<p>Dynamic <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> is not associated with <span class=\"customMeta\" data-dictid=\"cf96102d3d16927772021df54a646d\">functional <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> capacity</span> (FRC) but occurs later when <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> and pleural pressures interact. <strong>(Option B)</strong></p>\n\n<p>When reaching the <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume (RV) by the end of expiration, dynamic <span class=\"customMeta\" data-dictid=\"56af81fad316927771843d2b4b1e4f\">compression</span> is less of a concern, as the <span class=\"customMeta\" data-dictid=\"99caf903791692777180bc28743310\">airflow</span> has largely ceased. <strong>(Option D)</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/OPKQQCOQCH0GjjNqWh9h1744803611.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/u2MFMGovOy3E45ZuP4Ss1744803729.mp3"
  },
  {
    "text": "<p>A healthy 35-year-old male undergoes pulmonary function tests as part of a routine health check-up. Which of the following findings is most likely to be observed?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Tidal volume 400 ml"
      },
      {
        "id": 2,
        "text": "FEV1/FVC 0.65"
      },
      {
        "id": 3,
        "text": "Residual volume 1200 ml"
      },
      {
        "id": 4,
        "text": "Vital capacity 3500 ml"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> volume 1200 ml</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0</p>\n\n<p>A <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume of 1200 ml is normal for a healthy 35-year-old male.</p>\n\n<p>\u00a0</p>\n\n<p>Residual volume remains stable unless there is a <span class=\"customMeta\" data-dictid=\"c0c247b89916927771948bc5e6d39c\">pathological</span> condition affecting lung function, and it helps <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> between obstructive and restrictive lung diseases:</p>\n\n<ul>\n\t<li>Obstructive lung diseases (e.g., COPD) increase <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume due to air trapping.</li>\n\t<li>Restrictive lung diseases (e.g., <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> fibrosis) decrease <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume due to <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> lung compliance.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Additionally, <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume can <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> between types of restrictive lung diseases:</p>\n\n<ul>\n\t<li>Parenchymal restrictive lung disease (e.g., <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> fibrosis) shows highly <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume due to stiff and scarred lung tissue.</li>\n\t<li>Extra-parenchymal restrictive lung disease (e.g., <span class=\"customMeta\" data-dictid=\"8b19cd5e161692777193ad958e52e0\">neuromuscular</span> diseases, <span class=\"customMeta\" data-dictid=\"06e0403a9c16927771846fde1c53f8\">chest wall</span> deformities) may show normal or slightly <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume, as the issue is outside the lung tissue, affecting breathing <span class=\"customMeta\" data-dictid=\"00c0f6c5371692777192d9df3f64b2\">mechanics</span> rather than the lung parenchyma.</li>\n</ul>\n\n<p><strong>Key parameters of <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> function tests:</strong></p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Spirometry</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Forced <span class=\"customMeta\" data-dictid=\"187bb6b3f61692777201956c59ce72\">Vital Capacity</span> (FVC)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Total air exhaled forcefully after deep breath.</li>\n\t\t\t\t<li>Approximately 4-6 liters (depending on age, sex, height, and weight)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Forced <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Volume in 1 Second (FEV<sub>1</sub>)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Air exhaled in the first second of the <span class=\"customMeta\" data-dictid=\"321620bde416927772037669a00aa5\">FVC</span> manoeuvre.</li>\n\t\t\t\t<li>Approximately 80% of FVC</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>FEV<sub>1</sub>/FVC Ratio</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Percentage of <span class=\"customMeta\" data-dictid=\"321620bde416927772037669a00aa5\">FVC</span> exhaled in the first second.</li>\n\t\t\t\t<li>Approximately 70-80%</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Peak <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Flow (PEF)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Maximum speed of expiration.</li>\n\t\t\t\t<li>Varies by age, sex, and height (e.g., 400-600 L/min for adults)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Lung Volumes</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Total Lung Capacity (TLC)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>The total volume of air in the lungs after <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> inhalation</li>\n\t\t\t\t<li>Approximately 6-8 liters</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Residual Volume (RV)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Air remaining in the lungs after <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> exhalation</li>\n\t\t\t\t<li>Approximately 1.2-1.5 litres</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Vital Capacity (VC)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Air that can be exhaled after <span class=\"customMeta\" data-dictid=\"c678bddb1d1692777192d2ee1ebd92\">maximal</span> <span class=\"customMeta\" data-dictid=\"0b1500fcd816927771900b59d16bde\">inhalation</span> (FVC minus RV)</li>\n\t\t\t\t<li>Approximately 4-5 liters</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Inspiratory Reserve Volume (IRV)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Additional air inhaled after normal inhalation</li>\n\t\t\t\t<li>Approximately 2-3 liters</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Expiratory Reserve Volume (ERV)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Additional air exhaled after normal exhalation</li>\n\t\t\t\t<li>Approximately 1-1.5 liters</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Diffusing Capacity (DLCO)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Lung\u2019s ability to transfer gases (e.g., CO)</li>\n\t\t\t\t<li>Approximately 20-30 mL/min/mmHg</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p>The other options (A, B, and D) are also within normal ranges for healthy adults but are less specific to routine findings in <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> function tests compared to <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> volume.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/4rUaQzmTPD1V13NungVY1744803902.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/cUCrA58IXAHdgDgPJud31744804017.mp3"
  },
  {
    "text": "<p>A 65-year-old male, lifelong smoker, presents with chronic shortness of breath and a persistent cough. Imaging studies confirm hyperinflation and destruction of alveolar walls. He was diagnosed with emphysema. What are the expected results of his Pulmonary Function Test?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Increased Residual Volume"
      },
      {
        "id": 2,
        "text": "Increased Total Lung Capacity"
      },
      {
        "id": 3,
        "text": "Increased FEV/FVC"
      },
      {
        "id": 4,
        "text": "Both A and B"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Both A and B </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0</p>\n\n<p>Emphysema is an obstructive lung disease. Increased <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">Residual</span> Volume and <span class=\"customMeta\" data-dictid=\"b0e95f9af21692777200e8a9faabe7\">Total Lung Capacity</span> are the findings in obstructive lung disease.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Features of Obstructive Diseases:</strong></p>\n\n<ol>\n\t<li>Total Lung Capacity is normal or increased (Option B)</li>\n\t<li>Residual Volume is elevated due to trapping of air during <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> (Option A)</li>\n\t<li>The ratio of RV/TLC is increased</li>\n\t<li>Vital Capacity frequently decreases (not due to decreased lung volumes but increased RV).</li>\n\t<li>FEV is less than 80% of TLC</li>\n\t<li>FEV/FVC decreases (Option C)</li>\n\t<li>MMFR (Maximum Mid-Expiratory Flow Rate) decreases</li>\n</ol>\n\n<p>\u00a0</p>\n\n<p><strong>Emphysema:</strong></p>\n\n<p><img alt=\"Emphysema pathophysiology\" data-author=\"na\" data-hash=\"538\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" src=\"https://image.prepladder.com/notes/Ca0iQc9ZcxPJseOUg5NU1735959821.png\" /></p>\n\n<p><strong>Examples of obstructive lung disease:</strong></p>\n\n<ul>\n\t<li>Asthma</li>\n\t<li>COPD (Chronic <span class=\"customMeta\" data-dictid=\"ce5a7a84ff16927771830347fbbbff\">bronchitis</span> and emphysema)</li>\n\t<li>Bronchiectasis</li>\n\t<li>Bronchiolitis</li>\n\t<li>Cystic fibrosis</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/Ca0iQc9ZcxPJseOUg5NU1735959821.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/gea1GTCQj0IDCNuq2KOq1744804105.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/dK01fwkZwswMDA2LEXT51744804203.mp3"
  },
  {
    "text": "<p>Which of the following is false on the findings of restrictive lung disease?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Decreased TLC"
      },
      {
        "id": 2,
        "text": "Decreased VC"
      },
      {
        "id": 3,
        "text": "Preservation of Forced Expiratory Flow Rates"
      },
      {
        "id": 4,
        "text": "All are true"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) All are true </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Definition</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lung disorders are characterised by a <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> <span class=\"customMeta\" data-dictid=\"381ab780231692777186a9011d8a74\">distensibility</span> of the lungs, compromising lung expansion, and, in turn, <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> lung volumes</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t\t<li>Decreased <span class=\"customMeta\" data-dictid=\"15d4ce5bf21692777200543fdf4d2f\">TLC</span> (Total Lung Capacity)</li>\n\t\t\t\t<li>Decreased VC (Vital Capacity)</li>\n\t\t\t\t<li>Decreased RV (Residual Volume)</li>\n\t\t\t\t<li>Preservation of Forced <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Flow Rates.</li>\n\t\t\t</ol>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Pathology</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1. <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">Intrinsic</span> Conditions:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Destruction of <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">Distal</span> Lung Parenchyma</li>\n\t\t\t\t<li>Inflammatory Changes in the Alveolar Interstitium</li>\n\t\t\t\t<li>Interstitial Lung Diseases</li>\n\t\t\t\t<li>Alterations from Within the Alveolus(oedema or haemorrhage)</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p>2. <span class=\"customMeta\" data-dictid=\"810de80cac1692777187a436b4315b\">Extrinsic</span> Conditions:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Limitations in <span class=\"customMeta\" data-dictid=\"8b19cd5e161692777193ad958e52e0\">Neuromuscular</span> Function</li>\n\t\t\t\t<li>Chest Wall Movement Impairments</li>\n\t\t\t</ul>\n\n\t\t\t<p>(pleural disorders, obesity, <span class=\"customMeta\" data-dictid=\"dca72e4c3d1692777185113e3e3101\">costosternal</span> or <span class=\"customMeta\" data-dictid=\"ecbf7f7a131692777185dd34ae6309\">costovertebral</span> fusion, <span class=\"customMeta\" data-dictid=\"3c6021096816927772007954fcc158\">thoracic</span> vertebral <span class=\"customMeta\" data-dictid=\"a7dfeb385e1692777203302bcf142d\">fusion</span> or deviation)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Parenchymal Restrictive Dysfunction</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Pulmonary fibrosis</li>\n\t\t\t\t<li>Pneumoconiosis</li>\n\t\t\t\t<li>Radiation-induced <span class=\"customMeta\" data-dictid=\"f46ba26d111692777190def3b1d80a\">interstitial</span> lung disease</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Extra-parenchymal Restrictive Dysfunction</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>1. <span class=\"customMeta\" data-dictid=\"8b19cd5e161692777193ad958e52e0\">Neuromuscular</span> Diseases:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Myasthenia gravis</li>\n\t\t\t\t<li>Paralysis of diaphragm</li>\n\t\t\t\t<li>Muscular dystrophy</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p>2. <span class=\"customMeta\" data-dictid=\"06e0403a9c16927771846fde1c53f8\">Chest Wall</span> Diseases</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Kyphoscoliosis</li>\n\t\t\t\t<li>Obesity</li>\n\t\t\t\t<li>Ankylosing spondylitis</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/NFELLhLPAafaIKVyXHXI1744804285.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/33DIr6ZDHG5sAAbM3q9k1744804362.mp3"
  },
  {
    "text": "<p>Which of the following is false about Peak Expiratory Flow Rate (PEFR)?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Maximum velocity of flow in litres per minute with air being forced out of the lungs"
      },
      {
        "id": 2,
        "text": "Recorded by using the peak-flow meter"
      },
      {
        "id": 3,
        "text": "The normal value is 400 to 600 L/min"
      },
      {
        "id": 4,
        "text": "All are true"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) </strong><strong>All are true </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Peak <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">expiratory</span> flow rate (PEFR) is the maximum flow <span class=\"customMeta\" data-dictid=\"12c4510e191692777201c23ec126a3\">velocity</span> in litres per minute with air being forced out of the lungs.(Option A)</li>\n\t<li>PEFR is recorded by using the peak-flow meter.(Option B)</li>\n\t<li>The normal value of <span class=\"customMeta\" data-dictid=\"dbd35bcbc2169277719501b6be152f\">PEFR</span> is 400 to 600 L/min or 6 to 10 L/s.(Option C)</li>\n\t<li>PEFR is an index of <span class=\"customMeta\" data-dictid=\"8c660f0c321692777194046901e354\">patency</span> of airways.</li>\n</ul>\n\n<ol>\n</ol>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/ld5iXthLA9jdjowsXhg21744804723.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Kgg5FYIrt2roBNIgjEq11744804846.mp3"
  },
  {
    "text": "<p>Which of the following is the most sensitive indicator of small airway diseases?</p>",
    "choices": [
      {
        "id": 1,
        "text": "PEFR"
      },
      {
        "id": 2,
        "text": "FEV1"
      },
      {
        "id": 3,
        "text": "FEV1/FVC"
      },
      {
        "id": 4,
        "text": "MMEFR"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) MMEFR</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Maximum Mid-expiratory Flow Rate (MMEFR):</strong></p>\n\n<ul>\n\t<li>Maximum flow achieved during the middle third of the total expired volume.</li>\n\t<li>Forced <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">expiratory</span> flow at 25% to 75% of the lung volume.</li>\n\t<li>Indicates the <span class=\"customMeta\" data-dictid=\"8c660f0c321692777194046901e354\">patency</span> of small airways.</li>\n\t<li>More sensitive marker of <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> disease (particularly for the <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> of smaller-sized airways) than traditional parameters like FEV1, FEV1/FVC ratio, or PEFR.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>PEFR (Option A)</strong> \u2013 Less sensitive as it reflects <strong>large <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> function</strong> and can remain normal in early small <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> disease.</p>\n\n<p><strong>FEV1 (Option B)</strong> \u2013 Commonly used but detects <strong>moderate-to-severe <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstruction</strong>, making it less sensitive for early disease.</p>\n\n<p><strong>FEV1/FVC Ratio\u00a0(Option C)</strong> \u2013 Helps diagnose <strong>obstructive lung diseases</strong>, but <strong>may not detect early small <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> dysfunction</strong> as well as MMEFR.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/Df5ppzqdBxTnpVIhMjL81744805081.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MlyYk4WCtcmITZ4P8hne1744805152.mp3"
  },
  {
    "text": "<p>In the image given below what does the yellow curve represent?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"349\" src=\"https://image.prepladder.com/content/MgK3y06CIl1UjlIs93Gv1736321104.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Normal lung function"
      },
      {
        "id": 2,
        "text": "Obstructive lung disease"
      },
      {
        "id": 3,
        "text": "Restrictive lung disease"
      },
      {
        "id": 4,
        "text": "Respiratory failure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Obstructive lung disease</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>This is a Peak <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Air Flow-Lung Volume Curve.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"342\" src=\"https://image.prepladder.com/content/GWrv1je0uI3CoDa9VrJB1736321164.png\" width=\"500\" /></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:635px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Condition</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Curve Characteristics</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Restrictive diseases</p>\n\n\t\t\t<p>(Constricted lung)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Curve is smaller and shifted to the right <strong>(Option C ruled out)</strong></li>\n\t\t\t\t<li>Peak flow is lower, and the volume is less due to <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> <span class=\"customMeta\" data-dictid=\"15d4ce5bf21692777200543fdf4d2f\">TLC</span> and RV</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Obstructive diseases</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Curve is smaller and shifted to the left</li>\n\t\t\t\t<li>Lower peak flow</li>\n\t\t\t\t<li>Scooped-out appearance during expiration</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0\n<p><strong>Normal lung function (Option A)</strong>\u00a0\u2013 <span class=\"customMeta\" data-dictid=\"0dab303f701692777193d4cc3d096a\">Normal curve</span> would have a <strong>smooth, <span class=\"customMeta\" data-dictid=\"d963da62eb16927771993737a99c7c\">symmetrical</span> peak and descent</strong> without a scooped-out appearance or shift in volume.</p>\n</p>\n\n<p>\u00a0</p>\n\n<p><strong>Respiratory failure</strong> <strong>(Option D)</strong>\u2013 <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">Respiratory</span> failure is a <strong>clinical condition</strong> rather than a distinct <span class=\"customMeta\" data-dictid=\"393aadb3d816927771993b966a2fef\">spirometric</span> pattern, and it can involve <strong>both obstructive and restrictive features</strong> depending on the cause</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/MgK3y06CIl1UjlIs93Gv1736321104.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/GWrv1je0uI3CoDa9VrJB1736321164.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/UAaVhfRRRVsxhgNvx9fS1744821485.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/SfSMRZAIoUjXNoHo2u7M1744821576.mp3"
  },
  {
    "text": "<p>A patient underwent pulmonary function testing, and the flow-volume loop is shown below. What does it show?</p>\n\n<p style=\"text-align:center\"><img alt=\"fixed upper airway obstruction\" data-author=\"na\" data-hash=\"540\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" height=\"300\" src=\"https://image.prepladder.com/notes/qxatx17vpcMOVBIegyAP1735960314.png\" width=\"443\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Fixed upper airway obstruction"
      },
      {
        "id": 2,
        "text": "Variable intra-thoracic obstruction"
      },
      {
        "id": 3,
        "text": "Normal lung functioning"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Given is a flow-volume loop of a fixed upper <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstruction.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Fixed upper <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstruction:</strong></p>\n\n<ul>\n\t<li>Both inspiration and <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> affected.</li>\n\t<li>Examples:\n\t<ul>\n\t\t<li>Foreign body</li>\n\t\t<li>Scarring</li>\n\t\t<li>Enlarged <span class=\"customMeta\" data-dictid=\"799202e6fe16927772009a1501b0a8\">thyroid</span> gland</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>The flow-volume loops in variable extrathoracic, variable intrathoracic, and fixed upper <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstruction:</p>\n\n<p style=\"text-align:center\"><img alt=\"Flow volume loops\" data-author=\"na\" data-hash=\"541\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" height=\"500\" src=\"https://image.prepladder.com/notes/uLxszcPdNDu7Kugv7va11735960363.png\" width=\"576\" /></p>",
    "question_images": [
      "https://image.prepladder.com/notes/qxatx17vpcMOVBIegyAP1735960314.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/uLxszcPdNDu7Kugv7va11735960363.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/uA12ai2WljBfoxR6nRe51744821660.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/VNOQmHzDeba6XCiGrpRd1744821722.mp3"
  },
  {
    "text": "<p>Analyse the following flow volume loop diagram. Which of the following statements is NOT true regarding this flow volume loop?</p>\n\n<p><img alt=\"Flow volume loop\" data-author=\"na\" data-hash=\"542\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" src=\"https://image.prepladder.com/notes/jwhfru7OmJgSInfZSM9T1735960454.png\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "The loop demonstrates flatness in the expiratory portion"
      },
      {
        "id": 2,
        "text": "This loop occurs in variable intrathoracic obstruction"
      },
      {
        "id": 3,
        "text": "The \"box pattern\" indicates fixed upper airway obstruction."
      },
      {
        "id": 4,
        "text": "The loop shows a reduction in peak expiratory flow (PEF) due to the obstruction."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C) The \"box pattern\" indicates fixed <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstruction.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>A \"box pattern\" on the flow volume loop, characterised by <span class=\"customMeta\" data-dictid=\"13d0edf82916927772021bfc7f9aeb\">flattening</span> both inspiratory and <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">expiratory</span> portions, can occur in both fixed and variable <span class=\"customMeta\" data-dictid=\"09d1aa62351692777190c98d0dbb12\">intrathoracic</span> obstructions and is not specific to one.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:651px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p><strong>Feature</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p><strong>Variable <span class=\"customMeta\" data-dictid=\"09d1aa62351692777190c98d0dbb12\">Intrathoracic</span> Obstruction</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #000000; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p><strong>Variable <span class=\"customMeta\" data-dictid=\"46208b1eba1692777187c85196194d\">Extrathoracic</span> Obstruction</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Location</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Within the <span class=\"customMeta\" data-dictid=\"3c6021096816927772007954fcc158\">thoracic</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> (trachea, bronchi)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #000000; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Outside the <span class=\"customMeta\" data-dictid=\"3c6021096816927772007954fcc158\">thoracic</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> (larynx, pharynx)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Causes</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Tracheobronchomalacia, mainstem bronchial obstruction, lower <span class=\"customMeta\" data-dictid=\"3b9dd3166f1692777180b697887ccb\">airway</span> obstructions</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #000000; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Laryngeal oedema, vocal cord dysfunction, tumours in the upper airway</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Flow-Volume Loop Characteristics</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #cccccc; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Flattened <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">expiratory</span> portion<strong>(Option A\u00a0ruled out)</strong>; <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> peak <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">expiratory</span> flow (PEF)<strong>(Option D ruled out)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #cccccc; border-left:1px solid #cccccc; border-right:1px solid #000000; border-top:1px solid #cccccc; vertical-align:top\">\n\t\t\t<p>Flattened inspiratory portion; <span class=\"customMeta\" data-dictid=\"2cbabc42d21692777187c451566867\">expiration</span> may remain relatively unaffected</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><img alt=\"\" data-author=\"na\" data-hash=\"\" data-license=\"na\" data-source=\"na\" data-tags=\"\" height=\"708\" src=\"https://image.prepladder.com/content/miRnhdLYfshFbzXsLejj1735960666.png\" width=\"1999\" /></p>",
    "question_images": [
      "https://image.prepladder.com/notes/jwhfru7OmJgSInfZSM9T1735960454.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/miRnhdLYfshFbzXsLejj1735960666.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/fqjiJ2ByeUSOtIA7vEbl1744821867.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/hAHA7B03xyrphQXTMqsI1744822055.mp3"
  },
  {
    "text": "<p>The volume of gas expired by a normal adult man during a forced expiration, demonstrating the FEV1 and the FVC. Calculate the FEV1/FVC of this person.</p>\n\n<p><img alt=\"FEV1-FVC Ratio\" data-author=\"na\" data-hash=\"543\" data-license=\"na\" data-source=\"na\" data-tags=\"January2025\" src=\"https://image.prepladder.com/notes/8N8XShXkgzMI1tUZYAi61735960840.png\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "60%"
      },
      {
        "id": 2,
        "text": "70%"
      },
      {
        "id": 3,
        "text": "80%"
      },
      {
        "id": 4,
        "text": "90%"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C) 80%</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>FEV1/FVC of this person is 80%</p>\n\n<p>\u00a0</p>\n\n<p><strong>FEV1 (Forced <span class=\"customMeta\" data-dictid=\"632c0c215816927771878b6e818a11\">Expiratory</span> Volume in 1 second): </strong>Volume of air that can be forcibly exhaled in the first second of expiration.</p>\n\n<p><strong>FVC (Forced Vital Capacity): </strong>Total volume of air that can be forcibly exhaled after taking a deep inhalation.</p>\n\n<p>\u00a0</p>\n\n<p>Here,</p>\n\n<ul>\n\t<li><strong>FEV1 </strong>= 4L</li>\n\t<li><strong>FVC </strong>= 5L</li>\n</ul>\n\n<p>FEV1/FVC ratio = (FEV1/FVC\u200b) \u00d7 100</p>\n\n<p>= \u2158 x 100 = 80%</p>\n\n<p><strong>Interpretation of Values:</strong></p>\n\n<ul>\n\t<li>\n\t<p><strong>Normal Ratio</strong> (70%-80% or higher): Indicates normal lung function.</p>\n\t</li>\n\t<li>\n\t<p><strong>Low Ratio</strong> (<70%): Suggests obstructive lung disease.</p>\n\t</li>\n\t<li><strong>Normal or High Ratio with <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">Reduced</span> Volumes</strong>: Suggests restrictive lung disease.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/notes/8N8XShXkgzMI1tUZYAi61735960840.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/fxVObT4quoOuEII69kUQ1744822232.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/iWCYVpytj6UDll31G4H31744822352.mp3"
  }
];
        let quizName = '32 Pulmonary Function Tests';
        let hierarchy = ["PrepLadder", "qBank", "Physiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>