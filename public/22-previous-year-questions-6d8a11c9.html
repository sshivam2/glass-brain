<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>22 Previous Year Questions - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Psychiatry
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">8</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 30-year-old male presents as calm and charming in front of a psychiatrist. However, he engages in aggressive behavior towards friends, frequently skips classes, disregards traffic rules and has been involved in a police interrogation. What is the most likely diagnosis?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Antisocial Personality Disorder"
      },
      {
        "id": 2,
        "text": "Narcissistic Personality Disorder"
      },
      {
        "id": 3,
        "text": "Schizotypal Personality Disorder"
      },
      {
        "id": 4,
        "text": "Paranoid Personality Disorder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Options A - <span class=\"customMeta\" data-dictid=\"6133b1827c16927771813719d533eb\">Antisocial</span> Personality Disorder:</strong></p>\n\n<ul>\n\t<li>Antisocial Personality Disorder (ASPD) is characterized by a pervasive pattern of disregard for and violation of the rights of others. Individuals with ASPD often engage in unlawful activities, are deceitful, and show impulsivity.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option B - Narcissistic Personality Disorder (NPD): </strong></p>\n\n<ul>\n\t<li>It is characterized by a <span class=\"customMeta\" data-dictid=\"2bf49be62516927771886ca6913e3e\">grandiose</span> sense of self-importance, a need for excessive admiration, and a lack of <span class=\"customMeta\" data-dictid=\"9537058b751692777187cf06bd1d82\">empathy</span> for others.</li>\n</ul>\n\n<p><strong>Option C - <span class=\"customMeta\" data-dictid=\"95f94d877416927771988cec99085b\">Schizotypal</span> Personality Disorder: </strong></p>\n\n<ul>\n\t<li>It involves social difficulties and <span class=\"customMeta\" data-dictid=\"897ef2d27c16927771861eb7f4726c\">eccentric</span> behavior. The patient may exhibit odd beliefs and magical thinking.</li>\n</ul>\n\n<p><strong>Option D - <span class=\"customMeta\" data-dictid=\"39a55021ff16927771946d220fe0db\">Paranoid</span> Personality Disorder:</strong></p>\n\n<ul>\n\t<li>It is characterized by a pervasive distrust and suspicion of others.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A young male who is shy and prefers social isolation appears to be emotionally cold and resides alone. There is no history of hallucinations or delusions. The most likely diagnosis is?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Paranoid personality disorder"
      },
      {
        "id": 2,
        "text": "Schizoid personality disorder"
      },
      {
        "id": 3,
        "text": "Antisocial personality disorder"
      },
      {
        "id": 4,
        "text": "Emotionally unstable personality"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"5638d8858f1692777198a97a561a88\">Schizoid</span> personality disorder </strong></p>\n\n<p><br />\n<strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The patient likely has <strong>Schizoid personality disorder</strong>, characterised by social <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> and emotional coldness.</li>\n\t<li>Individuals with this disorder have little interest in social relationships, prefer <span class=\"customMeta\" data-dictid=\"9729ba172a1692777198c816c4ad9c\">solitary</span> activities, and appear emotionally distant.</li>\n\t<li>They tend to avoid close interactions and lack a desire for social engagement.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:718px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Cluster A Personality Disorders </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Characterised by <strong>odd</strong> and <strong>aloof</strong> behaviour, <span class=\"customMeta\" data-dictid=\"607476ab371692777196d0cb2f13bc\">prone</span> to develop psychosis.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Disorder</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Key Features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Diagnosis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Paranoid Personality Disorder </strong><strong>(Option A)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Pervasive distrust and suspiciousness of others</li>\n\t\t\t\t<li>Hostility, irritability, anger</li>\n\t\t\t\t<li>Difficulty with trust and intimacy</li>\n\t\t\t\t<li>Cynical view of the world</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>No fixed delusions (vs. delusional disorder)</li>\n\t\t\t\t<li>No hallucinations or formal thought disorder (vs. schizophrenia)</li>\n\t\t\t\t<li>No tumultuous relationships (vs. <span class=\"customMeta\" data-dictid=\"2d896c605a1692777183d769916056\">borderline</span> personality disorder)</li>\n\t\t\t\t<li>No history of <span class=\"customMeta\" data-dictid=\"6133b1827c16927771813719d533eb\">antisocial</span> behaviour (vs. <span class=\"customMeta\" data-dictid=\"6133b1827c16927771813719d533eb\">antisocial</span> personality disorder)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Psychotherapy</strong>: Straightforward and honest therapist, avoid warmth or deep interpretation</li>\n\t\t\t\t<li><strong>Group therapy</strong>: Helpful for some, but poorly tolerated</li>\n\t\t\t\t<li><strong>Behavior therapy</strong>: Social skills training may feel intrusive</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Schizoid Personality Disorder </strong></p>\n\n\t\t\t<p><strong>(Option B)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Lifelong social withdrawal</li>\n\t\t\t\t<li>Eccentric, isolated, and lonely</li>\n\t\t\t\t<li>Introverted with a <span class=\"customMeta\" data-dictid=\"862b9b46641692777183ea602de834\">bland</span> affect</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>No <span class=\"customMeta\" data-dictid=\"23702653681692777196e5c0fc63cd\">psychotic</span> symptoms (vs. schizophrenia, delusional disorder)</li>\n\t\t\t\t<li>More withdrawn and aloof (vs. <span class=\"customMeta\" data-dictid=\"39a55021ff16927771946d220fe0db\">paranoid</span> personality disorder)</li>\n\t\t\t\t<li>No dysphoric loneliness</li>\n\t\t\t\t<li>Fewer past relationships, possible <span class=\"customMeta\" data-dictid=\"23691f29951692777182c8a175f8da\">autistic</span> reverie</li>\n\t\t\t\t<li><strong>No desire for social interaction (vs. <span class=\"customMeta\" data-dictid=\"240194a57e1692777182d93c2587cd\">avoidant</span> personality disorder)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Psychotherapy</strong>: Build trust, encourage expression</li>\n\t\t\t\t<li><strong>Group therapy</strong>: May benefit, initial silence likely</li>\n\t\t\t\t<li><strong>Pharmacotherapy</strong>: Limited evidence, medications for specific symptoms (e.g., emotional detachment)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Schizotypal Personality Disorder </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Social difficulties</li>\n\t\t\t\t<li>Eccentric behaviour and thinking (\u201cmagical thinking\u201d)</li>\n\t\t\t\t<li>Peculiar speech, superstitious beliefs, perceptual illusions</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Odd behaviour, thinking, and perception (vs. <span class=\"customMeta\" data-dictid=\"5638d8858f1692777198a97a561a88\">schizoid</span> and <span class=\"customMeta\" data-dictid=\"240194a57e1692777182d93c2587cd\">avoidant</span> personality disorders)</li>\n\t\t\t\t<li>Differentiated from <span class=\"customMeta\" data-dictid=\"59f989084e16927771822f692979f5\">autism</span> by the severity of language disorder</li>\n\t\t\t\t<li>Lacks psychosis, or it's brief (vs. schizophrenia)</li>\n\t\t\t\t<li>No odd behaviour (vs. <span class=\"customMeta\" data-dictid=\"39a55021ff16927771946d220fe0db\">paranoid</span> personality disorder)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Psychotherapy</strong>: Sensitive approach to avoid ridicule</li>\n\t\t\t\t<li><strong>Antipsychotics</strong>: Manage illusions and odd ideas</li>\n\t\t\t\t<li><strong>Antidepressants</strong>: Used for depressive symptoms</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Antisocial personality disorder </strong><strong>(Option C)</strong> is characterised by a disregard for the rights of others and a lack of empathy. Individuals with this disorder often engage in impulsive and irresponsible behaviour, have difficulties conforming to social norms, and may exhibit a pattern of deceit and manipulation.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Emotionally unstable personality disorder </strong><strong>(Option D,)</strong> also known as <span class=\"customMeta\" data-dictid=\"2d896c605a1692777183d769916056\">borderline</span> personality disorder, is characterised by a pervasive pattern of <span class=\"customMeta\" data-dictid=\"acb259200b16927771908888d1377c\">instability</span> in mood, self-image, and interpersonal relationships. Individuals with this disorder often experience intense and rapidly shifting emotions, engage in impulsive behaviour, and have difficulties maintaining stable relationships.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Among the following, what is the most common symptom of adult obsessive-compulsive disorder?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Aggressive symptoms"
      },
      {
        "id": 2,
        "text": "Need for symmetry"
      },
      {
        "id": 3,
        "text": "Pathological doubt"
      },
      {
        "id": 4,
        "text": "Sexual symptom"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"c0c247b89916927771948bc5e6d39c\">Pathological</span> doubt</strong><br />\n<br />\n<strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The most common symptom of adult <span class=\"customMeta\" data-dictid=\"eb72e1abf016927771943ccc05db73\">obsessive-compulsive</span> disorder is <strong>pathological doubt. </strong></li>\n\t<li>Individuals with <span class=\"customMeta\" data-dictid=\"b41de46aea1692777194f7c77b6704\">OCD</span> experience persistent, irrational doubts, leading to repetitive checking behaviours or seeking reassurance to alleviate anxiety.</li>\n\t<li>This symptom is a core feature of <span class=\"customMeta\" data-dictid=\"b41de46aea1692777194f7c77b6704\">OCD</span> and contributes to ritualistic behaviours.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:600px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Clinical presentation of OCD</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Contamination</strong> is the most common presentation.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>An <span class=\"customMeta\" data-dictid=\"e8ab6dd080169277719419a4297012\">obsession</span> with <span class=\"customMeta\" data-dictid=\"22b9188ade169277718581ce9dc589\">contamination</span> followed by <span class=\"customMeta\" data-dictid=\"c846a3af9016927772026af6f9b6db\">washing</span> and avoiding the presumably contaminated object.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Pathological doubt </strong>is the second most common presentation</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Obsession of doubt, usually followed by <span class=\"customMeta\" data-dictid=\"29a783930a169277718475cc22d945\">compulsion</span> of checking.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Intrusive/forbidden thoughts </strong>are the third most common presentation.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Obsessed with intrusive thoughts of aggressive or sexual acts without a compulsion.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Symmetry/ordering </strong>is the fourth most common presentation.</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>The patient needs symmetry/precision, which results in the <span class=\"customMeta\" data-dictid=\"29a783930a169277718475cc22d945\">compulsion</span> of slowness.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Aggressive symptoms </strong><strong>(Option A)</strong> can occur in some cases of <span class=\"customMeta\" data-dictid=\"eb72e1abf016927771943ccc05db73\">obsessive-compulsive</span> disorder (OCD), but they are not the most common. Intrusive thoughts or images of harm or violence, along with compulsions to reduce these thoughts, may be present in certain individuals, but they are less prevalent than other symptoms.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Need for <span class=\"customMeta\" data-dictid=\"73e8d27894169277719960f922b4b5\">symmetry</span> </strong><strong>(Option B),</strong> is a common symptom of OCD, where individuals feel compelled to arrange objects symmetrically, follow strict routines, or repeatedly check for order. However, it is not the most prevalent symptom in adult OCD.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Sexual symptoms </strong><strong>(Option D)</strong><strong> </strong>are not the most common in OCD. Sexual obsessions may cause distress, prompting individuals to engage in repetitive behaviours or mental rituals to suppress or neutralise these thoughts.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the most appropriate treatment for a patient who frequently experiences a sense of contamination in their hands and compulsively washes them, leading to distress and impaired performance?</p>",
    "choices": [
      {
        "id": 1,
        "text": "DBT"
      },
      {
        "id": 2,
        "text": "Exposure and response prevention"
      },
      {
        "id": 3,
        "text": "Systematic desensitization"
      },
      {
        "id": 4,
        "text": "CBT"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Exposure and response prevention</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The patient's symptoms suggest<strong> <span class=\"customMeta\" data-dictid=\"eb72e1abf016927771943ccc05db73\">Obsessive-Compulsive</span> Disorder (OCD), c</strong>haracterized by intrusive thoughts (obsessions) like <span class=\"customMeta\" data-dictid=\"22b9188ade169277718581ce9dc589\">contamination</span> and repetitive behaviours (compulsions) like excessive handwashing.<strong> </strong></li>\n\t<li>The most effective treatment for <span class=\"customMeta\" data-dictid=\"b41de46aea1692777194f7c77b6704\">OCD</span> is <strong>Exposure and Response Prevention (ERP)</strong>, a specialized <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of<strong> Cognitive Behavioral Therapy (CBT).</strong></li>\n\t<li>ERP works by exposing the patient to anxiety-provoking situations (e.g., touching a surface perceived as contaminated) and preventing the <span class=\"customMeta\" data-dictid=\"8e09a4a39b1692777184e5e57a8435\">compulsive</span> response (e.g., <span class=\"customMeta\" data-dictid=\"c846a3af9016927772026af6f9b6db\">washing</span> hands), helping the patient habituate to the anxiety and reducing the compulsions over time.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Obsessive-compulsive disorder (OCD)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Obsessions</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Compulsions</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Intrusive and unwanted repetitive thoughts, urges, or impulses.</li>\n\t\t\t\t<li>Most common: Contamination</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Repetitive actions or thoughts carried out in a strict, regulation-bound manner or reaction to obsessions</li>\n\t\t\t\t<li>Performed to relieve anxiety or fear.</li>\n\t\t\t\t<li>Most common: Checking</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Clinical Presentation of OCD:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>Contamination and Cleansing (Most Common):</strong>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Obsession with <span class=\"customMeta\" data-dictid=\"22b9188ade169277718581ce9dc589\">contamination</span> followed by <span class=\"customMeta\" data-dictid=\"8e09a4a39b1692777184e5e57a8435\">compulsive</span> <span class=\"customMeta\" data-dictid=\"c846a3af9016927772026af6f9b6db\">washing</span> and <span class=\"customMeta\" data-dictid=\"d61e782bf41692777182f829eef312\">avoidance</span> of presumed contaminants.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Pathological Doubt and Checking (Second Most Common):</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Persistent doubt leading to repeated checking.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Intrusive or Forbidden Thoughts (Third Most Common):</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>\u200b\u200b\u200b\u200b\u200b\u200b\u200b</strong>Obsessive thoughts of aggressive or sexual acts, typically without accompanying compulsions.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Symmetry and Ordering (Fourth Most Common):</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>\u200b\u200b\u200b\u200b\u200b\u200b\u200b</strong>Preoccupation with <span class=\"customMeta\" data-dictid=\"73e8d27894169277719960f922b4b5\">symmetry</span> or precision, resulting in compulsions like slow and deliberate actions.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Other Symptoms:</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>\u200b\u200b\u200b\u200b\u200b\u200b\u200b</strong>Includes religious obsessions and <span class=\"customMeta\" data-dictid=\"8e09a4a39b1692777184e5e57a8435\">compulsive</span> hoarding.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Management of OCD:</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>Pharmacotherapy:</strong>\n\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>First-line Treatment:</strong> SSRIs and Clomipramine, continued for 1\u20132 years.</li>\n\t\t\t\t\t<li><strong>Augmentation Options:</strong>\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Antipsychotics: Risperidone, Aripiprazole.</li>\n\t\t\t\t\t\t<li>Others: Memantine, Riluzole, Ketamine, Lamotrigine, N-acetylcysteine (NAC).</li>\n\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Psychotherapy:</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li><strong>Exposure and Response Prevention (ERP):</strong> Patients face feared situations while refraining from <span class=\"customMeta\" data-dictid=\"8e09a4a39b1692777184e5e57a8435\">compulsive</span> responses.</li>\n\t\t\t\t\t<li>Additional Therapies: Desensitization, thought-stopping, flooding, <span class=\"customMeta\" data-dictid=\"5dd5f335f01692777182e69ef6557f\">aversive</span> conditioning, psychodynamic psychotherapy, and family therapy.</li>\n\t\t\t\t\t<li><strong>Severe Symptoms or <span class=\"customMeta\" data-dictid=\"843b8ecd5416927771842bc110b4e3\">Comorbid</span> Depression:</strong> Begin with pharmacotherapy.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li><strong>Somatic Therapies:</strong>\n\t\t\t\t<ul>\n\t\t\t\t\t<li>Anterior <span class=\"customMeta\" data-dictid=\"8ed7427d6e169277718448f7516f40\">cingulotomy</span> or capsulotomy.</li>\n\t\t\t\t\t<li>Deep brain <span class=\"customMeta\" data-dictid=\"7f3792072b1692777199fd8e2c4f59\">stimulation</span> with <span class=\"customMeta\" data-dictid=\"91ff119f8e169277718738daf09e12\">electrode</span> implantation.</li>\n\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n<strong>Incorrect Options:</strong></p>\n\n<p><strong>DBT </strong><strong>(Option A) </strong><strong>Dialectical behavioural therapy</strong> is not considered the first management line in OCD. It is commonly used for individuals diagnosed with <span class=\"customMeta\" data-dictid=\"2d896c605a1692777183d769916056\">borderline</span> personality disorder or mood disorders.</p>\n\n<p><strong>Systematic <span class=\"customMeta\" data-dictid=\"205afd2b271692777186a3d23ad364\">desensitization</span> </strong><strong>(Option C)</strong>, thought-stopping, flooding, and <span class=\"customMeta\" data-dictid=\"5dd5f335f01692777182e69ef6557f\">aversive</span> <span class=\"customMeta\" data-dictid=\"e7e8b232581692777184eaae773f67\">conditioning</span> are also used to treat OCD. However, exposure and response prevention is the best way of managing this condition.</p>\n\n<p><strong>CBT</strong> <strong>(Option D)</strong> Exposure and response prevention is a kind of CBT that helps reduce anxiety and <span class=\"customMeta\" data-dictid=\"afafb9026e1692777186e3dd168fa8\">distress</span> associated with repeated exposure to thoughts or objects triggering the condition.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the probable diagnosis for a 16-year-old girl who exhibits symptoms such as excessive familiarity, rapid flow of thoughts, heightened mood, heightened sexual desire, and experiencing pseudohallucinations?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Mania"
      },
      {
        "id": 2,
        "text": "Hypomania"
      },
      {
        "id": 3,
        "text": "Cyclothymia"
      },
      {
        "id": 4,
        "text": "Schizomania"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Mania</strong>\u200b\u200b\u200b\u200b\u200b\u200b\u200b<br />\n<strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The described symptoms \u2014 excessive familiarity, rapid flow of thoughts, heightened mood, increased sexual desire, and pseudohallucinations \u2014 are characteristic of mania, a condition often seen in <strong>bipolar disorder. </strong></li>\n\t<li>Mania involves elevated or <span class=\"customMeta\" data-dictid=\"31383b73d01692777190c6880a580b\">irritable</span> mood, increased energy, impulsivity, and <span class=\"customMeta\" data-dictid=\"23702653681692777196e5c0fc63cd\">psychotic</span> features such as pseudohallucinations in severe cases.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:726px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Mania</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td colspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Mania </strong>is a mood disorder characterised by a distinct period of abnormally elevated, expansive, or <span class=\"customMeta\" data-dictid=\"31383b73d01692777190c6880a580b\">irritable</span> mood and increased energy or activity levels.</li>\n\t\t\t\t<li>Mania is a <strong>period of at least 1 week</strong> where a person's behaviour drastically changes and affects their functioning.</li>\n\t\t\t\t<li>Individuals experiencing <span class=\"customMeta\" data-dictid=\"51c142d5d116927771912526695796\">mania</span> engage in heightened goal-directed activity and may show <span class=\"customMeta\" data-dictid=\"67a8159af716927771964aa6043ac2\">psychomotor</span> agitation.</li>\n\t\t\t\t<li>Mania is a characteristic of <strong>Bipolar I disorder</strong>.</li>\n\t\t\t\t<li><strong>Symptoms (My <span class=\"customMeta\" data-dictid=\"ed36b5c18b1692777182d73ea85338\">Asia</span> FAST GDP</strong>)</li>\n\t\t\t</ul>\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>M </strong>- Mood elevation</li>\n\t\t\t\t<li><strong>A</strong> - Activity levels Increased</li>\n\t\t\t\t<li><strong>F</strong> - Flight of ideas</li>\n\t\t\t\t<li><strong>A</strong> - Abnormally increased levels of activity/energy</li>\n\t\t\t\t<li><strong>S </strong>- Sleep decreased (Need for sleep is also reduced)</li>\n\t\t\t\t<li><strong>T</strong> - Talkativeness (Overtalkativeness)</li>\n\t\t\t\t<li><strong>G</strong> - <span class=\"customMeta\" data-dictid=\"2bf49be62516927771886ca6913e3e\">Grandiose</span> ideas and increased self-esteem</li>\n\t\t\t\t<li><strong>D </strong>- Distractibility</li>\n\t\t\t\t<li><strong>P</strong> - Painful consequences (Involvement in such activities</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Diagnostic criteria </strong></p>\n\t\t\t</td>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>M</strong>ood Changes: Elation/ irritability</li>\n\t\t\t\t<li>Persistently increased <strong>E</strong>nergy</li>\n\t\t\t</ul>\n\n\t\t\t<p>+ \u22653 of the following symptoms (4 if <span class=\"customMeta\" data-dictid=\"31383b73d01692777190c6880a580b\">irritable</span> mood) for at least <strong>1 week</strong>:</p>\n\t\t\t\u00a0\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>D</strong>istractibility.</li>\n\t\t\t\t<li><strong>I</strong>mpulsivity/ high-risk activities</li>\n\t\t\t</ul>\n\n\t\t\t<ul>\n\t\t\t\t<li><strong>G</strong>randiosity/ Inflated Self-Esteem</li>\n\t\t\t\t<li><strong>F</strong>light of Ideas (Racing and expansive thoughts)</li>\n\t\t\t\t<li><strong>A</strong>ctivity increased (Hyperactivity)</li>\n\t\t\t\t<li><strong>S</strong>leep deficit (decreased need for sleep)</li>\n\t\t\t\t<li><strong>T</strong>alkativeness/ Pressured speech</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"6\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Management </strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\"><br />\n\t\t\t<br />\n\t\t\t<br />\n\t\t\t\u00a0\n\t\t\t<p><strong>First line</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Monotherapy</strong>: <strong>Lithium</strong>, divalproex, and <strong>atypical antipsychotics</strong> such as olanzapine, risperidone, quetiapine, aripiprazole, cariprazine, asenapine, paliperidone, iloperidone, ziprasidone.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Adjunctive therapy</strong> with <span class=\"customMeta\" data-dictid=\"42659effea16927771919c6224e529\">lithium</span> or divalproex:</p>\n\n\t\t\t<p>Risperidone, quetiapine, olanzapine, aripiprazole, asenapine</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\u00a0\n\t\t\t<p><strong>Second line</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Monotherapy:</strong> <strong>Carbamazepine</strong>, <span class=\"customMeta\" data-dictid=\"bd9883da60169277718724f1610a52\">electroconvulsive</span> therapy (ECT), haloperidol.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Combination therapy: <span class=\"customMeta\" data-dictid=\"42659effea16927771919c6224e529\">Lithium</span> + Divalproex</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\u00a0\n\t\t\t<p><strong>Third line</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Monotherapy</strong>: <strong>Chlorpromazine</strong>, Clozapine, Tamoxifen</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Combination therapy:</strong> <span class=\"customMeta\" data-dictid=\"42659effea16927771919c6224e529\">lithium</span> or divalproex + haloperidol, <span class=\"customMeta\" data-dictid=\"42659effea16927771919c6224e529\">lithium</span> + carbamazepine, adjunctive tamoxifen</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Hypomania </strong><strong>(Option B) </strong>has symptoms similar to <span class=\"customMeta\" data-dictid=\"51c142d5d116927771912526695796\">mania</span> but less severe.</p>\n\n<ul>\n\t<li><strong>No Marked impairment</strong> in <span class=\"customMeta\" data-dictid=\"bf1b7e7049169277720354c306d716\">functioning</span> and<strong> No hospitalisation</strong> necessitated</li>\n\t<li>No <span class=\"customMeta\" data-dictid=\"23702653681692777196e5c0fc63cd\">psychotic</span> symptoms</li>\n\t<li>Flight of ideas usually not seen</li>\n\t<li>The duration of <span class=\"customMeta\" data-dictid=\"7288a7315016927771896c7f4385e8\">hypomania</span> is<strong> \u22654 days</strong>.</li>\n</ul>\n\n<p><strong>Cyclothymia </strong><strong>(Option C) </strong>is characterised by chronic mood fluctuations</p>\n\n<ul>\n\t<li>Over at least 2 years, including periods of hypomanic and depressive symptoms.</li>\n\t<li>The patient\u2019s symptoms have lasted only 5 days</li>\n\t<li>Do not include depressive episodes.</li>\n</ul>\n\n<p><strong>Schizomania</strong> <strong>(Option D) </strong>is a mood disorder with <span class=\"customMeta\" data-dictid=\"ff42ad0e5716927771914cad2ccde9\">manic</span> and mixed episodes in the <span class=\"customMeta\" data-dictid=\"df4ae006fe1692777183604169e9b2\">bipolar</span> type of <span class=\"customMeta\" data-dictid=\"3964a2fbcc16927771982a765fc98c\">schizoaffective</span> disorder.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>In the psychiatry OPD, a male patient aged 40 presents with a concern regarding persistent thoughts. Specifically, he experiences a constant belief that his hands are dirty despite them being clean. Consequently, he feels uneasy and is compelled to repeatedly wash his hands. The condition can be classified as a disorder involving thought processes known as ______.</p>",
    "choices": [
      {
        "id": 1,
        "text": "Flow"
      },
      {
        "id": 2,
        "text": "Form"
      },
      {
        "id": 3,
        "text": "Possession"
      },
      {
        "id": 4,
        "text": "Content"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer C - Possession</strong></p>\n\n<ul>\n\t<li>The patient\u2019s persistent, distressing belief that his hands are dirty, despite them being clean, is suggestive of <strong>obsessive-compulsive disorder (OCD). </strong></li>\n\t<li>In OCD, <strong>thought possession</strong> means that the individual is aware that their obsessive thoughts are irrational or excessive, but they cannot stop them.</li>\n\t<li>The patient experiences the thoughts as intrusive and unwanted, yet they still recognise them as coming from within their own mind.</li>\n</ul>\n\n<p><strong>Flow</strong> <strong>(Option A)</strong> refers to the overall <strong>continuity</strong> or <strong>rhythm</strong> of thought, which can be disrupted in various ways. In a disorder of flow, there may be issues such as <strong>racing thoughts</strong> or <strong>thought blocks. </strong>In the patient's case, there's no mention of the speed or rhythm of thoughts being disturbed.</p>\n\n<p><strong>Form</strong> <strong>(Option B)</strong> of thought refers to the <strong>structure</strong> or <strong>organisation</strong> of thoughts. It involves whether the thoughts are logically connected or disjointed. Here, the problem isn't with the logical structure of his thoughts but with the content of his thoughts</p>\n\n<p><strong>Content</strong> <strong>(Option D)</strong> refers to the actual <strong>subject of the thought,</strong> but it doesn't address the <span class=\"customMeta\" data-dictid=\"afafb9026e1692777186e3dd168fa8\">distress</span> and lack of control experienced by the patient.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A young male who is shy and prefers social isolation appears to be emotionally cold and resides alone. There is no history of hallucinations or delusions. The most likely diagnosis is?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Paranoid personality disorder"
      },
      {
        "id": 2,
        "text": "Schizoid personality disorder"
      },
      {
        "id": 3,
        "text": "Antisocial personality disorder"
      },
      {
        "id": 4,
        "text": "Emotionally unstable personality disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"5638d8858f1692777198a97a561a88\">Schizoid</span> personality disorder</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The patient's symptoms of social isolation, emotional coldness, and preference for living alone align with the features of <strong>schizoid personality disorder.</strong></li>\n\t<li><strong>Schizoid personality disorder</strong> is characterised by a persistent pattern of social withdrawal, emotional detachment, and a lack of interest in forming close relationships. Individuals with this condition often prefer solitude and exhibit emotional coldness.</li>\n\t<li>The absence of hallucinations or delusions helps <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> it from <span class=\"customMeta\" data-dictid=\"23702653681692777196e5c0fc63cd\">psychotic</span> disorders such as schizophrenia.<br />\n\t\u00a0</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Schizoid Personality Disorder</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Lifelong social withdrawal</li>\n\t\t\t\t<li>Eccentric, isolated, and lonely</li>\n\t\t\t\t<li>Introverted with a <span class=\"customMeta\" data-dictid=\"862b9b46641692777183ea602de834\">bland</span> affect</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Diagnosis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>No <span class=\"customMeta\" data-dictid=\"23702653681692777196e5c0fc63cd\">psychotic</span> symptoms (vs. schizophrenia, delusional disorder)</li>\n\t\t\t\t<li>More withdrawn and aloof (vs. <span class=\"customMeta\" data-dictid=\"39a55021ff16927771946d220fe0db\">paranoid</span> personality disorder)</li>\n\t\t\t\t<li>No dysphoric loneliness</li>\n\t\t\t\t<li>Fewer past relationships, possible <span class=\"customMeta\" data-dictid=\"23691f29951692777182c8a175f8da\">autistic</span> reverie</li>\n\t\t\t\t<li><strong>No desire for social interaction (vs. <span class=\"customMeta\" data-dictid=\"240194a57e1692777182d93c2587cd\">avoidant</span> personality disorder)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Psychotherapy</strong>: Build trust, encourage expression</li>\n\t\t\t\t<li><strong>Group therapy</strong></li>\n\t\t\t\t<li><strong>Pharmacotherapy</strong>: Limited evidence, medications for specific symptoms (e.g., emotional detachment)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Paranoid personality disorder</strong> <strong>(Option A)</strong> involves pervasive distrust and suspiciousness of others, hostility, irritability, anger, difficulty with trust and intimacy, and a cynical view of the world, which is not the case here.<br />\n<br />\n<strong>Antisocial personality disorder</strong> <strong>(Option C)</strong> is defined as <strong>disregard for the rights of others since age 15,</strong> which includes <strong>disregard of legal and social rules, </strong>history of lying, manipulation, lack of remorse, criminality, impulsivity,<strong> irritable/ aggressive, </strong>charming demeanour and h/o substance use. This does not align with the patient's social isolation and emotional coldness given in the question. <strong> </strong></p>\n\n<p><strong>Emotionally unstable personality disorder </strong><strong>(Option D), </strong>also called <span class=\"customMeta\" data-dictid=\"2d896c605a1692777183d769916056\">Borderline</span> personality disorder, presents with<strong> </strong>Tumultuous relationships, identity diffusion, mood swings, impulsivity, fear of abandonment,<strong> Feeling empty inside</strong> and h/o suicidal attempts, which is more common in females, none of which are present here.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A man is extremely particular about being on time and consistently shows a strong need for order, control, and perfectionism. Which personality disorder does this behavior most likely suggest?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Obsessive-Compulsive Personality Disorder"
      },
      {
        "id": 2,
        "text": "Paranoid Personality Disorder"
      },
      {
        "id": 3,
        "text": "Narcissistic Personality Disorder"
      },
      {
        "id": 4,
        "text": "Schizoid Personality Disorder"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Obsessive-Compulsive Personality Disorder</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Obsessive-Compulsive Personality Disorder (OCPD)</strong>:</p>\n\n<ul>\n\t<li><strong>Cluster C</strong> personality disorder (anxious/fearful).</li>\n\t<li>Characterized by <strong>perfectionism</strong>, preoccupation with <strong>orderliness</strong> and <strong>rules</strong>, and excessive devotion to work at the expense of leisure and relationships.</li>\n\t<li>Unlike OCD, behaviors are <strong>ego-syntonic</strong> (perceived as appropriate and desirable by the patient).</li>\n\t<li>Often rigid and stubborn, with difficulty delegating tasks.</li>\n\t<li>Tendency to focus on <strong>punctuality</strong> and <strong>control</strong> over situations.</li>\n</ul>\n\n<p><strong>Paranoid Personality Disorder (Option B):</strong> Involves pervasive distrust and suspiciousness of others, interpreting motives as malevolent, not orderliness and perfectionism.</p>\n\n<p><strong>Narcissistic Personality Disorder (Option C):</strong> Marked by grandiosity, need for admiration, and lack of empathy, not <span class=\"customMeta\" data-dictid=\"9ab07bba3016927771976de44bf865\">rigidity</span> about punctuality or control.</p>\n\n<p><strong>Schizoid Personality Disorder (Option D):</strong> Characterized by <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> from social relationships and restricted emotional expression, not <span class=\"customMeta\" data-dictid=\"9d552bc0b6169277719520cebd3523\">perfectionism</span> or preoccupation with order.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '22 Previous Year Questions';
        let hierarchy = ["PrepLadder", "qBank", "Psychiatry"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>