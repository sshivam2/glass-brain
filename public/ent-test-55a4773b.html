<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ent Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 28-year-old pregnant woman complains of progressive hearing loss, which aggravated during pregnancy. Pure tone audiometry reveals a Carhart's notch and she is diagnosed with otosclerosis. Identify the procedure done for this patient's condition.",
    "choices": [
      {
        "id": 1,
        "text": "Stapedotomy"
      },
      {
        "id": 2,
        "text": "Stapes mobilisation"
      },
      {
        "id": 3,
        "text": "Lempert\u2019s fenestration operation"
      },
      {
        "id": 4,
        "text": "Stapedectomy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows a <strong>stapedotomy</strong> procedure performed in the middle ear.</p>\n<p>It can be identified as a<strong> stapedotomy procedure </strong>by the following features in the image given:</p>\n<ul>\n<li>The footplate of the stapes is not removed</li>\n<li>The prosthesis is placed by creating a hole in the footplate of the stapes</li>\n</ul>\n<p><strong>Stapedotomy</strong>&nbsp;is the&nbsp;<strong>excision of the superstructure of stapes</strong>&nbsp;and drilling a hole in the footplate &amp; placing a piston in the hole.&nbsp;It is done&nbsp;to bypass the immobile stapes&nbsp;using a piston which will take over the function of conducting sound.</p>\n<p><strong>Contraindications</strong>&nbsp;for Stapedotomy:</p>\n<ul>\n<li><strong>Only hearing ear</strong></li>\n<li><strong>Positive Schwartze sign</strong></li>\n<li>Otitis externa</li>\n<li><strong>Meniere&rsquo;s disease</strong>: can damage the inner ear while drilling a hole in the footplate</li>\n<li>Young children</li>\n<li>Professional athletes,<strong>&nbsp;pilots,</strong>&nbsp;construction workers, divers: Sudden change in pressure can displace the piston and cause vertigo.</li>\n<li><strong>Those who work in noisy surroundings</strong>: Surgery makes them more vulnerable to noise-induced hearing loss.</li>\n</ul>\n<p><strong>Otosclerosis</strong> is a primary disease of the bony labyrinth where foci of irregularly placed spongy bone replace part of the normally dense enchondral layer of the bony otic capsule. It is more commonly seen in&nbsp;<strong><span data-preserver-spaces=\"true\">females&nbsp;</span></strong>between<strong><span data-preserver-spaces=\"true\">&nbsp;20-30 years&nbsp;</span></strong>of age and the hearing loss is aggravated during&nbsp;<strong><span data-preserver-spaces=\"true\">pregnancy</span></strong> and<strong><span data-preserver-spaces=\"true\"> menopause</span></strong>.</p>\n<p>Clinically, patients present with painless&nbsp;<strong>progressive bilateral conductive</strong>&nbsp;hearing loss and&nbsp;<strong>paracusis willisii </strong>(patient&nbsp;<strong>hears better in noisy surroundings</strong>&nbsp;as other people raise their voice to be heard).&nbsp;</p>\n<p>Tuning fork tests and <strong>audiometry</strong> will reveal the presence of<strong> conductive hearing loss</strong>. The bone conduction curve may show a <strong>dip</strong>, which is maximum at<strong>&nbsp;2000Hz</strong>,&nbsp;known as&nbsp;<strong>Carhart&rsquo;s notch</strong>.</p>\n<p>The image shown below shows Carhart's notch.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f5e87e1c4fb3416b890bf84bebd06689.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39516fa7d6664c88a57c5eb70c7644dex1280x1161.JPEG"
    ]
  },
  {
    "text": "A 30-year-old patient comes to the ENT outpatient department with complaints of difficulty in hearing in the left ear. Rinne\u2019s test shows bone conduction is better than air conduction. Weber test shows lateralization towards the left ear. The absolute bone conduction test is normal. What will be the inference of Schwabach's test in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Lengthened as compared to the examiner"
      },
      {
        "id": 2,
        "text": "Shortened as compared to the examiner"
      },
      {
        "id": 3,
        "text": "Same as compared to the examiner"
      },
      {
        "id": 4,
        "text": "Difficult to interpret with the given data"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given inferences of various tests are suggestive of <strong>conductive deafness </strong>and Schwabach&rsquo;s test is <strong>lengthened</strong> in conductive deafness.<br /><br /><strong>TUNING FORK TESTS:</strong><br />I) Rinne&rsquo;s test:</p>\n<p>A vibrating tuning fork is placed on the patient&rsquo;s mastoid and when he stops hearing, it is brought beside the meatus. If he still hears, air conduction is better than bone conduction.</p>\n<ul>\n<li><strong>Positive -</strong>&nbsp;when the <strong>air</strong> conduction (AC) is<strong>&nbsp;longer</strong> or louder&nbsp;than <strong>bone</strong> conduction (BC). Seen in normal persons and persons with sensory-neural deafness.</li>\n<li>Negative - when the bone conduction is better than air conduction. Seen in patients with conductive deafness.</li>\n</ul>\n<p>II) Weber test:</p>\n<p>A vibrating tuning fork is placed in the middle of the forehead or the vertex and the patient is asked in which ear the sound is heard.</p>\n<ul>\n<li>Normal - heard equally in both ears</li>\n<li>Conductive deafness - <strong>lateralized to the worse ear</strong></li>\n<li>Sensorineural deafness - lateralized to the better ear.</li>\n</ul>\n<p>III) Absolute Bone Conduction test:</p>\n<p>Here, the patient&rsquo;s bone conduction is compared with that of the examiner. The <strong>external&nbsp;auditory meatus</strong> of both the patient and the examiner <strong>should be occluded</strong> ( by pressing the tragus inwards) to prevent the ambient noise from entering through the AC route.</p>\n<ul>\n<li><strong>Normal - same as the examiner</strong>.</li>\n<li>Conductive deafness - same as the examiner.</li>\n<li>Sensorineural deafness - reduced than that of the examiner.</li>\n</ul>\n<p>IV) Schwabach test:</p>\n<p>Here, again the bone conduction of the patient is <strong>compared with</strong> that of the <strong>normal hearing person</strong>(examiner) but the meatus is <strong>not occluded</strong>.&nbsp;</p>\n<ul>\n<li>Normal - same as the examiner</li>\n<li><strong>Conductive deafness - lengthened as compared to the examiner</strong></li>\n<li>Sensorineural deafness - shortened as compared to the examiner</li>\n</ul>\n<p>&nbsp; &nbsp; &nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are the objective tests for the hearing?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, and 4"
      },
      {
        "id": 2,
        "text": "1, 2, and 3"
      },
      {
        "id": 3,
        "text": "2, 3, and 4"
      },
      {
        "id": 4,
        "text": "1, 2, 3, and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Brainstem-evoked response audiometry</strong> (BERA), <strong>otoacoustic emissions</strong>\u00a0(OAE), and <strong>tympanometry</strong>\u00a0are\u00a0<strong>objective</strong> <strong>tests</strong> for hearing.\u00a0</p>\n<p>The<strong>\u00a0objective tests</strong> of hearing are:</p>\n<div class=\"page\" title=\"Page 148\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Evoked response audiometry\n<ul>\n<li>Electrocochleography</li>\n<li>Auditory brainstem response</li>\n</ul>\n</li>\n<li>Otoacoustic emissions</li>\n<li>Impedance audiometry\n<ul>\n<li>Tympanometry</li>\n<li>Acoustic reflex measurements</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n<p><strong>Objective </strong>tests in ENT are diagnostic procedures that provide<strong> measurable, examiner-independent results.\u00a0</strong></p>\n<p><strong>Brainstem-evoked response audiometry (BERA)</strong>\u00a0or <strong>Auditory brainstem response</strong> (ABR) is an<strong>\u00a0objective test\u00a0</strong>that<strong>\u00a0r</strong><strong>ecords electrical activity\u00a0</strong>occurring in the auditory pathway. It elicits <strong>brainstem responses</strong> to auditory stimulation. Click stimuli or tone bursts lead to the generation of electrical potentials which are picked up from <strong>surface electrodes</strong> on the <strong>vertex</strong>.</p>\n<div class=\"page\" title=\"Page 44\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Otoacoustic emissions</strong> (OAEs) refer to an\u00a0<strong>objective test</strong>\u00a0that records the low-intensity\u00a0sounds produced by<strong>\u00a0</strong>the<strong> outer hair cells </strong>of a <strong>normal cochlea.\u00a0</strong>It can be\u00a0elicited by a microphone in the external auditory canal and is then analyzed by a computer. They test the <strong>function of the cochlea</strong>.\u00a0They are used to test hearing in neonates, and sedated/unconscious patients, and to differentiate cochlear from retro-cochlear hearing loss.\u00a0</p>\n</div>\n</div>\n</div>\n<p><strong>Tympanometry</strong> is a component of impedance audiometry. It is an\u00a0<strong>objective test\u00a0</strong>of the<strong> middle ear and eustachian tube functions</strong>\u00a0(conductive compartment of hearing). Here, the compliance of the tympanic membrane, i.e., how much it moves to the pressure differentials applied from the external ear is measured. This is plotted on a graph, to obtain a tympanogram.\u00a0</p>\n<p>Note-<strong> Pure</strong> <strong>tone audiometry</strong> is a <strong>subjective test</strong> for hearing as it <strong>relies on the patient's</strong> responses to\u00a0<strong>pure tone</strong>\u00a0stimuli. Other examples of subjective tests include:</p>\n<ul>\n<li>Tuning fork tests</li>\n<li>Speech audiometry</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 69-year-old  diabetic patient has come to you with excruciating right ear pain and right-sided facial palsy. Otoscopic examination of the ear shows granulations on the floor of the external auditory canal.  Choose the correct statements regarding this condition.",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4 and 5"
      },
      {
        "id": 2,
        "text": "1, 3, and 5"
      },
      {
        "id": 3,
        "text": "2, 4 and 5"
      },
      {
        "id": 4,
        "text": "2, 3 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical picture of an elderly diabetic patient with excruciating ear pain, facial palsy, and granulations on the floor of the external auditory canal points toward the diagnosis of <strong>malignant otitis externa. </strong>The correct statements are <strong>2, 4 and 5. </strong></p>\n<p>Malignant otitis externa is an infective condition\u00a0<strong>(not malignant).\u00a0</strong>Technetium 99 scan is not used to monitor the disease.\u00a0</p>\n<p>It is an <strong>inflammatory\u00a0</strong>condition caused by\u00a0<em>Pseudomonas aeruginosa\u00a0</em>in\u00a0<strong>elderly</strong> <strong>diabetics</strong>\u00a0and immunocompromised patients. It is characterised by excruciating ear pain, profuse discharge and\u00a0<strong>granulations</strong> on the <strong>floor of the external ear canal.</strong></p>\n<p>Necrosis of bone aids in the spread of infection.\u00a0Infection may spread to the skull base and jugular foramen causing <strong>multiple cranial nerve palsies</strong>.\u00a0<strong>Facial paralysis</strong> is the most common nerve palsy seen.</p>\n<p><strong>Gallium-67</strong>\u00a0scan is useful in the\u00a0<strong>diagnosis</strong> and <strong>follow-up</strong> of the patient. It can be repeated every <strong>3 weeks</strong> to <strong>monitor</strong> the disease and response to treatment. <strong>Technetium 99</strong> bone scan reveals bone infection, but the test remains positive for a year or so and <strong>cannot be used to monitor the disease.</strong></p>\n<p>Treatment includes:</p>\n<ul>\n<li>Control of diabetes.</li>\n<li>Toilet of the ear canal. Remove discharge, debris and granulations or at dead tissue or bone.</li>\n<li><strong>Antibiotic treatment</strong> against <em>P. aeruginosa</em> for <strong>6-8 weeks </strong>or more.\u00a0If the patient is not responsive, treatment should be based on culture and sensitivity of ear discharge.</li>\n</ul>\n<p>Antibiotics which are usually effective against pseudomonas aeroginosa are:</p>\n<ul>\n<li><strong>Gentamicin</strong> combined with<strong> ticarcillin</strong> (<strong>IV</strong>)</li>\n<li><strong>Third-generation cephalosporin</strong>s (IV) e.g. ceftriaxone, ceftazidime along with an aminoglycoside</li>\n<li><strong>Fluoroquinolones</strong> (ciprofloxacin, ofloxacin and levofloxacin) combined with rifampin (Oral)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following signs and the diseases in which they occur.",
    "choices": [
      {
        "id": 1,
        "text": "1-d, 2-c, 3-b, 4-a"
      },
      {
        "id": 2,
        "text": "1-b, 2-c, 3-d, 4-a"
      },
      {
        "id": 3,
        "text": "1-c, 2-b, 3-d, 4-a"
      },
      {
        "id": 4,
        "text": "1-b, 2-c, 3-a, 4-d"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched pair is <strong>1-b, 2-c, 3-d, 4-a.</strong></p>\n<p>1 - Hennebert's sign in congenital syphilis</p>\n<p><strong>Hennebert's sign </strong>is a <strong>positive fistula sign</strong> (nystagmus occurring on applying positive and negative pressure in the external auditory canal) in the absence of a fistula seen in <strong>congenital syphilis</strong> due to the formation of adhesions between stapes footplate and saccule. It is also seen in a few cases of <strong>Meniere's disease.</strong></p>\n<p>This&nbsp;is not to be confused with <strong>Hennebert's phenomenon </strong>which is disequilibrium following nose blowing or lifting a heavy object. It is seen in the&nbsp;<strong>perilymph fistula.</strong></p>\n<p>2 -&nbsp;Schwartz sign in otosclerosis</p>\n<p>A <strong>pink or reddish hue</strong> seen on the <strong>promontory</strong> through the tympanic membrane is called the&nbsp;<strong>Schwartz sign</strong>. It is seen in <strong>active otosclerosis.</strong></p>\n<p>The image below shows the&nbsp;<strong>Schwartz sign.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/115ceea6c22b46e88334b435e997b15fx720x407.JPEG"
    ]
  },
  {
    "text": "A patient with middle ear fluid accumulation is tested using tympanometry. What is the expected tympanogram finding seen in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Compliance is high at or near ambient air pressure"
      },
      {
        "id": 2,
        "text": "A flat or dome-shaped graph"
      },
      {
        "id": 3,
        "text": "Compliance is lower at or near ambient air pressure"
      },
      {
        "id": 4,
        "text": "Maximum compliance occurs with negative pressure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">In the given clinical scenario of <strong>middle ear fluid accumulation</strong>, the expected tympanogram finding would be a&nbsp;<strong>flat or dome-shaped graph</strong>.</p>\n<p class=\"p1\"><strong>Tympanometry:&nbsp;</strong>It is used in evaluating the <strong>status of the middle ear</strong> and the&nbsp;<strong>functioning of the eustachian tube</strong>.</p>\n<p class=\"p1\"><strong> Principle</strong>: When a sound wave strikes the tympanic membrane, some of the sound energy is absorbed while the rest is reflected. A stiffer tympanic membrane would reflect more sound energy than a compliant one.</p>\n<p class=\"p1\">By changing the pressures in a sealed external auditory canal and then measuring the reflected sound energy, it is possible to find the <strong>compliance</strong> or <strong>stiffness</strong> of the tympano-ossicular system and thus find the healthy or diseased status of the middle ear.</p>\n<p class=\"p1\">Tympanometry is also used in evaluating the <strong>patency of the grommet</strong> inserted in the tympanic membrane for treating serous otitis media.</p>\n<p class=\"p1\">By charting the compliance of the tympano-ossicular system against various pressure changes, different types of graphs called <strong>tympanograms</strong> are obtained. They are as follows:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b0ee955ecd78437ea4212f93c7082a5fx1280x2078.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/719f601b7d4440468dad6e106db99b8bx720x358.JPEG"
    ]
  },
  {
    "text": "A patient is planned to undergo tympanoplasty. In which type of tympanoplasty is the graft placed in contact with the structure marked in the given image, according to Wullstein's classification?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The structure marked in the given image is the&nbsp;<strong>incus. Type II tympanoplasty&nbsp;</strong>is performed when the malleus is eroded due to middle ear disease and the graft is placed on the<strong> incus</strong>.</p>\n<p>The incus is one of the three ossicles of the middle ear. It&nbsp;has a body and a short process, both of which lie in the attic and can be identified by the long process that hangs vertically and attaches to the head of the stapes.</p>\n<p><strong>Tympanoplasty</strong> is the surgical reconstruction to correct damage in the middle ear and restore the integrity of the tympanic membrane. It involves&nbsp;<strong>ossiculoplasty</strong>&nbsp;(reconstruction of the ossicular chain) with or without&nbsp;<strong>myringoplasty.</strong></p>\n<p>The main objective of the procedure is the eradication of middle ear disease with the reconstruction of the tympanic membrane and ossicles.</p>\n<p><strong>Myringoplasty</strong> is the term given for the closure of perforation of pars tensa of tympanic membrane done to check repeated infections from the external ear.<br /><br /></p>\n<table style=\"width: 314.183px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"text-align: center; width: 56px; height: 18px;\"><strong>Type</strong></td>\n<td style=\"text-align: center; width: 238.183px; height: 18px;\"><strong>Defect and repair</strong></td>\n</tr>\n<tr style=\"height: 84px;\">\n<td style=\"width: 56px; height: 84px;\">Type I</td>\n<td style=\"width: 238.183px; height: 84px;\">Perforation of tympanic membrane which is repaired with a graft (<strong>myringoplasty</strong>)</td>\n</tr>\n<tr style=\"height: 123px;\">\n<td style=\"width: 56px; height: 123px;\">Type II</td>\n<td style=\"width: 238.183px; height: 123px;\">Perforation of tympanic membrane with erosion of malleus. The graft is placed on the incus or remnant of the malleus.</td>\n</tr>\n<tr style=\"height: 103px;\">\n<td style=\"width: 56px; height: 103px;\">Type III</td>\n<td style=\"width: 238.183px; height: 103px;\">Malleus and incus are absent. The graft is placed directly on the stapes head&nbsp;(<strong>myringostapediopexy</strong>)</td>\n</tr>\n<tr style=\"height: 103px;\">\n<td style=\"width: 56px; height: 103px;\">Type IV</td>\n<td style=\"width: 238.183px; height: 103px;\">Only the footplate of stapes is present. The graft is placed between the oval and round windows on the stapes footplate</td>\n</tr>\n<tr style=\"height: 165.2px;\">\n<td style=\"width: 56px; height: 165.2px;\">Type V</td>\n<td style=\"width: 238.183px; height: 165.2px;\">The stapes footplate is fixed but the round window is functioning. The graft is placed in contact with a new window created on the fenestra in the horizontal semicircular canal</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/55aa924f5f2349dd95ae11e6698deb54.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d1fac33b35584d5f9299f9abebbb3677x1280x1023.JPEG"
    ]
  },
  {
    "text": "A 12-year-old boy who was treated for acute otitis media 2 weeks back presents with fever,  and pain behind his right ear. On examination, tenderness is present over the mastoid and the pinna is pushed anteriorly suggesting acute mastoiditis. A fluctuant swelling is present between the tip of the mastoid and the angle of the jaw. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Zygomatic abscess"
      },
      {
        "id": 2,
        "text": "Bezold's abscess"
      },
      {
        "id": 3,
        "text": "Luc abscess"
      },
      {
        "id": 4,
        "text": "Citelli\u2019s abscess"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario along is most likely suggestive of the diagnosis of <strong>Bezold's abscess.</strong></p>\n<p>Bezold abscess\u00a0is defined as a <strong>complication</strong> of <strong>acute coalescent mastoiditis</strong> and is formed when\u00a0pus breaks inferiorly, through the thin medial aspect of the tip of the mastoid and collects in the <strong>upper part </strong>of the<strong> neck</strong>, most commonly into the sheath of the<strong> sternocleidomastoid muscle</strong>. The abscess can also take any of the following locations:\u00a0</p>\n<ul>\n<li>Deep to the sternocleidomastoid</li>\n<li>Along the posterior belly of the digastric presenting as a swelling in the tip of the mastoid or the angle of the jaw</li>\n<li>The upper part of the posterior triangle</li>\n<li>Parapharyngeal space</li>\n<li>Along with the carotid vessels.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/290c91bd050d49ab971c6ecc19babe1dx1280x1597.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dc93d1bf4b8844039a4a07c4a6ee50ffx1280x2559.JPEG"
    ]
  },
  {
    "text": "A patient comes with a complaint of vertigo in a certain head position. She denies any ear fullness or hearing loss. A Dix-Hallpike maneuver confirms the diagnosis and an Epley's maneuver is performed to treat her condition. The symptoms are relieved due to the repositioning of otoconial debris from?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior semicircular canal to utricle"
      },
      {
        "id": 2,
        "text": "Utricle to saccule"
      },
      {
        "id": 3,
        "text": "Utricle to posterior semicircular canal"
      },
      {
        "id": 4,
        "text": "Saccule to utricle"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario of a patient with vertigo and a positive Dix-Hallpike test is suggestive of <strong>benign positional paroxysmal vertigo</strong> (BPPV). The otoconial debris are repositioned from the<strong>\u00a0posterior semicircular canal to the utricle</strong>\u00a0to relieve the symptoms of BPPV.</p>\n<p>BPPV is one of the common causes of\u00a0<strong>recurrent vertigo</strong>, and the episodes are brief (&lt;1min) and are always\u00a0<strong>provoked</strong>\u00a0by\u00a0<strong>changes</strong>\u00a0in\u00a0<strong>head position.</strong>\u00a0The attacks are caused by free-floating calcium carbonate crystals usually dislodged from the posterior canal.\u00a0</p>\n<p>A positive Dix-Hallpike maneuver confirms the diagnosis of BPPV. It is due to otoconial debris getting into the posterior semicircular canal from the utricle. The patient complains of vertigo on moving or tilting the head to the affected side. In up to 90 percent of the patients, it can be relieved by administering a therapeutic Epley's maneuver on the affected side.</p>\n<p>The Epley's maneuver consists of five positions:</p>\n<table style=\"width: 327px; height: 417px;\">\n<tbody>\n<tr>\n<td style=\"width: 65px;\">\u00a0</td>\n<td style=\"width: 129px;\"><strong>Head and neck</strong></td>\n<td style=\"width: 111px;\"><strong>Body position</strong></td>\n</tr>\n<tr>\n<td style=\"width: 65px;\"><strong>Position 1</strong></td>\n<td style=\"width: 129px;\">Head turned 45\u00b0</td>\n<td style=\"width: 111px;\">\u00a0to lie down in a head-hanging position</td>\n</tr>\n<tr>\n<td style=\"width: 65px;\"><strong>Position 2</strong></td>\n<td style=\"width: 129px;\">Head turned with<br />affected ear up</td>\n<td style=\"width: 111px;\">-</td>\n</tr>\n<tr>\n<td style=\"width: 65px;\"><strong>Position 3</strong></td>\n<td style=\"width: 129px;\">The whole body and head rotated away from the affected ear in a face-down position</td>\n<td style=\"width: 111px;\">\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 65px;\"><strong>Position 4</strong></td>\n<td style=\"width: 129px;\">Head still turned to unaffected side by\u00a045\u00b0</td>\n<td style=\"width: 111px;\">Brought to sitting position</td>\n</tr>\n<tr>\n<td style=\"width: 65px;\"><strong>Position 5</strong></td>\n<td style=\"width: 129px;\">Head turned forward with chin brought down 20\u00b0</td>\n<td style=\"width: 111px;\">-</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/700a367421f14d5a8c4152444ddda54fx1280x2095.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f2f376f96384bb9acee0223ef3e846cx1280x2359.JPEG"
    ]
  },
  {
    "text": "A patient with impacted wax develops a severe cough while performing the following procedure on him. This is due to stimulation of which of the following nerve?",
    "choices": [
      {
        "id": 1,
        "text": "Auriculotemporal nerve"
      },
      {
        "id": 2,
        "text": "Auricular branch of vagus nerve"
      },
      {
        "id": 3,
        "text": "Greater auricular nerve"
      },
      {
        "id": 4,
        "text": "Facial nerve"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The procedure shown in the image is <strong>syringing</strong>, usually done for the removal of <strong>impacted wax</strong>. Reflex cough due to stimulation of the <strong>auricular branch of vagus</strong> can occur during this procedure.</p>\n<p>Wax is made up of sebaceous and ceruminous gland secretions, hair, desquamated epithelial debris, keratin, and dirt. Factors contributing to the accumulation and impaction of excess wax may be a narrow, tortuous external canal, stiff ear, or obstructive lesions in the canal.</p>\n<p>Patients with impacted wax may present with <strong>impaired hearing, tinnitus</strong> or <strong>giddiness</strong>. Long-standing impacted wax may ulcerate meatal skin and result in the formation of a wax granuloma.</p>\n<p>Wax removal is achieved through <strong>syringing</strong> or other <strong>instrumental manipulation</strong>. Hard impacted mass may require prior softening with wax solvents in some cases.</p>\n<p>The patient is seated, with the ear to be syringed facing the examiner. The patient wears a kidney tray over his or her shoulder and to collect the return fluid, the patient's head is tilted over the tray. A stream of water from the syringe is directed along the <strong>posterosuperior wall of the meatus</strong> as the <strong>pinna</strong> is pulled <strong>upwards</strong> and <strong>backward</strong>.\u00a0The ear canal and tympanic membrane must be inspected and dried with a pledget of cotton at the end of the procedure.</p>\n<p>Complications of syringing:</p>\n<ul>\n<li><strong>Vertigo</strong>\u2013 caloric stimulation of <strong>lateral semicircular canal</strong> if water is too hot or too cold</li>\n<li><strong>Rupture</strong> of the tympanic membrane</li>\n<li>Reactivation of quiescent otitis media, if there is pre-existing perforation</li>\n</ul>\n<p>Contraindications for syringing:</p>\n<ul>\n<li>Presence of ear infection, tympanic membrane perforation</li>\n<li>Presence of grommet or history of ear surgery.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6756ef0812154704abd45d1675329009.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A male patient is brought into the emergency after a road traffic accident in which he has sustained injuries on the face. You note excessive mobility of the maxilla but no mobility of the nose. A CT scan reveals a fracture line passing through the lower part of the nasal septum, maxillary antrum, and pterygoid plates. Which among the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Le Fort-I fracture"
      },
      {
        "id": 2,
        "text": "Le-Fort-II fracture"
      },
      {
        "id": 3,
        "text": "Le-Fort-III fracture"
      },
      {
        "id": 4,
        "text": "Le-Fort-IV fracture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of<strong>\u00a0Le-Fort I</strong>\u00a0fracture of the maxilla.\u00a0</p>\n<p><strong>Le Fort Type 1 fractures</strong>\u00a0generally occur on the horizontal plane at the level of the nose base. It is caused due to <strong>downward directed force</strong> onto the lower part of the maxillary rim.</p>\n<p>It involves the <strong>three walls of the maxillary sinus</strong> as well as the <strong>pterygoid processes</strong>, extending around the maxillary antrum, nasal septum, and pterygoid plate. This leads to the <strong>separation of the palate and face</strong>. There is no involvement of the glabella or zygoma in this case.\u00a0</p>\n<p>Clinically, patients present with swollen upper lip, anterior open bite malocclusion, maxillary buccal vestibule, palate ecchymosis, and <strong>mobility of the maxilla.</strong></p>\n<p><strong>Diagnosis</strong>\u00a0is made with X-rays (Water's view, posteroanterior view, and lateral view) and CT scan. They help to understand the full extent of injuries.\u00a0</p>\n<p><strong>Treatment</strong>\u00a0requires fixation of the maxillary fractures which can be achieved by interdental wiring, and intermaxillary wiring using arch bars. Open reduction and interosseous wiring may be required in zygomatic fractures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a84c0aed8d36469080d0f39b86739fc7x900x1200.PNG"
    ]
  },
  {
    "text": "A patient with complaints of nasal obstruction and nasal discharge was diagnosed to be a case of an antrochoanal polyp. All of the following statements are true about the condition except",
    "choices": [
      {
        "id": 1,
        "text": "It is bilateral"
      },
      {
        "id": 2,
        "text": "Arises from the maxillary antrum"
      },
      {
        "id": 3,
        "text": "Recurrence is uncommon"
      },
      {
        "id": 4,
        "text": "Most commonly seen in children"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>All of the above statements about the antrochoanal polyp are true except it is bilateral.</p>\n<p><strong>Antrochoanal polyp</strong> is a type of non-neoplastic nasal polypoidal masses of edematous nasal or sinus mucosa. It arises from the mucosa of the <strong>maxillary antrum</strong> near its accessory ostium, comes out of it, and grows in the choana and nasal cavity.\u00a0It is usually single and <strong>unilateral</strong> which are <strong>more commonly</strong> seen in<strong> children</strong> and young adults.\u00a0</p>\n<p>It has 3 parts namely</p>\n<ul>\n<li>Thin antral <strong>stalk</strong>,</li>\n<li>Round and globular <strong>choanal</strong> part, and</li>\n<li>Flat <strong>nasal</strong> part.</li>\n</ul>\n<p>The clinical features include <strong>unilateral nasal obstruction</strong>, <strong>mucoid nasal discharge</strong>, and a <strong>hyponasal voice.</strong></p>\n<p>Anterior rhinoscopy may miss the antrochoanal polyp when it starts to grow posteriorly. A large polyp may protrude from the nasal cavity and may appear pink and congested. It is <strong>soft</strong> and can be moved with a probe. Posterior rhinoscopy may reveal a globular mass filling the choana and hanging down behind the soft palate.</p>\n<p>Diagnosis is made by radiograph of the paranasal sinuses reveals opacity of the involved antrum. <strong>Non-contrast CT scan</strong> reveals the <strong>extent</strong> of the polyp. Endoscopic examination reveals the antrochoanal polyp hidden posteriorly in the nasal cavity.</p>\n<p><strong>Endoscopic sinus surgery</strong> is the <strong>treatment of choice</strong>.\u00a0<strong>Recurrence is uncommon</strong> after the complete removal of the polyp.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following radiograph images with their views.",
    "choices": [
      {
        "id": 1,
        "text": "1-a, 2-b, 3-d, 4-c"
      },
      {
        "id": 2,
        "text": "1-c, 2-b, 3-d, 4-a"
      },
      {
        "id": 3,
        "text": "1-c, 2-d, 3-b, 4-a"
      },
      {
        "id": 4,
        "text": "1-c, 2-a, 3-d, 4-b"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correctly matched pair is\u00a0<strong>1-c, 2-b, 3-d, 4-a.</strong></p>\n<table style=\"border-collapse: collapse; width: 34.2359%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 3.30579%;\">1</td>\n<td style=\"width: 96.6942%;\">c. Water's view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">2</td>\n<td style=\"width: 96.6942%;\">b. Caldwell view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">3</td>\n<td style=\"width: 96.6942%;\">d. Towne's view</td>\n</tr>\n<tr>\n<td style=\"width: 3.30579%;\">4</td>\n<td style=\"width: 96.6942%;\">a. Submentovertical view</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Waters' view </strong>(also known as the <strong>Occipitomental</strong> view or <strong>nose-chin </strong>position) is a radiographic view, where an X-ray beam is angled at <strong>37\u00b0 </strong>to the <strong>orbitomeatal</strong> <strong>line</strong>. The rays are passed from behind the head and are perpendicular to the radiographic plate.</p>\n<ul>\n<li>It is commonly used to get a better view of the <strong>maxillary\u00a0</strong><strong>sinuses</strong>.</li>\n</ul>\n<p>Structures observed:</p>\n<ul>\n<li><strong>Maxillary sinuses</strong></li>\n<li>Frontal sinuses</li>\n<li>Sphenoid sinus (through open mouth)</li>\n<li>Zygoma</li>\n<li>Zygomatic arch</li>\n<li>Nasal bone</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa723fe009084145bccbb7022da1d3e7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f0a0fe3247ff4875a188468a3c8240ffx600x729.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/999ee94dc56d4e8d8ae8d02d28abcd14x627x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8e425cf42dff444ca7227b0e65a0c499x1280x747.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/96fa8aaab59a4e4299655c6a3d8b21c1x259x269.JPEG"
    ]
  },
  {
    "text": "A middle-aged patient presents with multiple nodules in the nasal mucosa. Biopsy from the nodules revealed the presence of Miculikz cells and Russell bodies. Which of the following is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rhinoscleroma"
      },
      {
        "id": 2,
        "text": "Rhinosporidiosis"
      },
      {
        "id": 3,
        "text": "Lupus vulgaris"
      },
      {
        "id": 4,
        "text": "Granulomatosis with polyangitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the biopsy findings showing <strong>Mikulicz cells</strong> and <strong>Russell bodies</strong> are characteristic of <strong>rhinoscleroma.</strong></p>\n<p><strong>Rhinoscleroma </strong>is a <strong>chronic granulomatous disease</strong> caused by&nbsp;<strong><em>Klebsiella rhinoscleromatis</em>&nbsp;</strong>(Frisch bacillus).</p>\n<p><strong>Mikulicz cells</strong> are large foam cells with a central nucleus and vacuolated cytoplasm containing causative bacilli.&nbsp;<strong>Russell bodies</strong> are homogenous eosinophilic<strong> inclusion bodies</strong> found in the plasma cells due to the <strong>accumulation of immunoglobulins</strong>&nbsp;secreted by plasma cells. Histology also shows infiltration of submucosa with plasma cells, lymphocytes and eosinophils.&nbsp;</p>\n<p>The following image shows rhinoscleroma with Mikulicz cells and Russell bodies(marked in black arrows)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/72287c52b31e4cc4a115d6bbee519d5fx720x480.JPEG"
    ]
  },
  {
    "text": "A 30-year old patient comes to the hospital with complaints of blood-tinged nasal discharge. The anterior rhinoscopy shows a pink polypoidal mass in the right nose and the same is biopsied. The image given below is the histological slide of the specimen. Treatment of choice for this condition is?",
    "choices": [
      {
        "id": 1,
        "text": "Streptomycin and tetracycline"
      },
      {
        "id": 2,
        "text": "Excision with cauterisation"
      },
      {
        "id": 3,
        "text": "Radiotherapy"
      },
      {
        "id": 4,
        "text": "Dapsone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario along with the histopathology showing several <strong>sporangia</strong> is most likely suggestive of the diagnosis of<strong> rhinosporidiosis. Surgical management </strong>(Excision of the lesion with cauterisation of the base ), is the <strong>treatment of choice </strong>in rhinosporidiosis.</p>\n<p><strong>Rhinosporidiosis</strong> is a chronic granulomatous disease caused by <strong><em>Rhinosporidium seeberi. </em></strong>Patients clinically present with <strong>blood-tinged nasal discharge,</strong> and <strong>pink polypoidal mass</strong> in the nose.</p>\n<p>Histopathology shows several <strong>sporangia</strong>, oval, or round in shape and filled with spores which may be seen bursting through its chitinous wall.</p>\n<p>It is treated by completely excising the mass with a diathermy knife followed by cauterization of the base.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e7b84070222542a99823dfef69d69b40.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents with bilateral nasal obstruction. On anterior rhinoscopy, multiple smooth pale glistening masses are found bilaterally suggestive of ethmoidal polyps. The surgeon plans functional endoscopic sinus surgery to remove them. Which of the following structures shown in the image given below is removed during infundibulotomy?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image above shows the <strong>computed tomography (CT) scan of the ostiomeatal complex</strong> in the coronal plane. The structure marked as<strong> 1 </strong>is the<strong> uncinate process</strong> which is removed in<strong> infundibulotomy.</strong></p>\n<p><strong>Infundibulotomy,\u00a0</strong>also known as<strong> uncinectomy,</strong> is the first surgical step in functional endoscopic sinus surgery (FESS). FESS is the treatment of choice for ethmoidal polyps, which this patient has.</p>\n<p>The structure marked as <strong>2</strong> is the <strong>ethmoidal bulla</strong>, and is removed in bullectomy.</p>\n<p>The structure marked as <strong>3</strong> is the <strong>middle turbinate</strong></p>\n<p>The structure marked as <strong>4\u00a0</strong>is the <strong>medial wall of the maxillary sinus.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5a92c24a1d4c48508eb4dd14c0d646ca.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6cee32eb2b0f4c5da5e281bc53f332ecx1280x1096.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/49049a0dc0e44418960900a6c4896c49x1280x2558.JPEG"
    ]
  },
  {
    "text": "A 40-year-old male fell down while climbing the stairs. He presented with complaints of fluid dripping from his nose, which he couldn't sniff back. The nasal discharge has the following appearance on tissue paper.  Which investigation should be ordered to localize the lesion?",
    "choices": [
      {
        "id": 1,
        "text": "Gadolinium enhanced MRI"
      },
      {
        "id": 2,
        "text": "High-resolution computerized tomography"
      },
      {
        "id": 3,
        "text": "Beta 2-transferrin assay"
      },
      {
        "id": 4,
        "text": "Computed tomography cisternogram"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario and the image showing a <strong>double target sign</strong> are suggestive of <strong>CSF rhinorrhea</strong> and&nbsp;<strong>high-resolution computerized tomography (</strong><strong>HRCT)</strong> is the investigation of choice for localizing the<strong> site of the leak </strong>in this condition.</p>\n<p><strong>Double ring sign</strong>&nbsp;or <strong>halo sign</strong>&nbsp;or <strong>target sign</strong>&nbsp;- when cerebrospinal fluid mixed with blood is collected on a piece of filter paper, it will show a&nbsp;central red spot&nbsp;(blood) and a&nbsp;peripheral lighter halo.</p>\n<p><strong>CSF rhinorrhea</strong>&nbsp;refers to the leakage of clear or blood-tinged CSF into the nose. <strong>Fracture of the cribriform plate</strong>&nbsp;of the ethmoid is the&nbsp;<strong>most common cause</strong>&nbsp;of this. Other causes include accidental or surgical trauma, infection and inflammation of the sinuses, neoplasms, and congenital lesions associated with skull base defects or may occur spontaneously.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\"><strong>Early cases</strong> of post-traumatic CSF rhinorrhea are managed <strong>conservatively</strong> by placing the patient in a <strong>semi-sitting position.</strong> Blowing of the nose, sneezing, and straining should be avoided.&nbsp;<strong>Prophylactic antibiotics</strong> can be administered to prevent meningitis. Persistent cases may be treated surgically by the intracranial or nasal endoscopic approach. The nasal endoscopic approach is useful for leaks from the frontal sinus, cribriform plate, and ethmoid or sphenoid sinuses.</p>\n<p>Other options:</p>\n</div>\n</div>\n<p>Option A:<strong> Gadolinium-enhanced MRI</strong> is the investigation of choice in glomus tumours, carotid body tumours and acoustic neuromas. MRI can be used to localize the lesion in CSF rhinorrhea but the CSF leak should be<strong> actively present</strong> at the time of the scan.</p>\n<p>Option C:<strong> Beta-2 transferrin protein</strong>&nbsp;detection by electrophoresis is a sensitive and specific test for detecting CSF rhinorrhea. Since it is absent in nasal secretions it helps to differentiate CSF from nasal secretions. It is also present in aqueous humor and perilymph. However, it cannot be used to localize the site of the leak.</p>\n<p>Option D:<strong> CT cisternogram&nbsp;</strong>is done in cases where beta-2 transferrin detection is not available. It involves an intrathecal injection of iohexol followed by a CT scan. It is not preferred nowadays.</p>\n<p>Note:<strong> Beta trace protein</strong> is another protein that is secreted by meninges and choroid plexus and is&nbsp;<strong>specific for CSF,&nbsp;</strong>but testing facilities are not widely available.&nbsp;An <strong>intrathecal fluorescein study</strong> may be performed preoperatively or intraoperatively to confirm the site of the defect.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9b15f59027094341bd3f672c1621b6ac.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 34-year-old man presented to you with complaints of pain over the nose after falling from height. On examination, there is a fracture of the nasal septum. Which of the following instruments would you use during the surgery for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The instrument used in the above scenario is the <strong>Asch forceps </strong>(image 2)<strong>. </strong>It is mainly used to <strong>reduce a nasal septum fracture.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e98b8b49fa2a4a40beee4b6f27bd0a38.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd7945010cf14a8e9fb0c3c5cfa8d5e8x600x312.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1c1bb8efdb554f7fa522a0961dc8855ex1280x1274.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a05a27ef5d20400fbf8543bc97137344x599x472.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a93d5a10b62941b0818de544ed0c35b3x600x495.JPEG"
    ]
  },
  {
    "text": "A middle-aged man presents with unilateral nasal obstruction. To check for patency of the nasal valve, a Cottle test is performed. In which of the following cases is the test positive?",
    "choices": [
      {
        "id": 1,
        "text": "Deviated nasal septum"
      },
      {
        "id": 2,
        "text": "Epistaxis"
      },
      {
        "id": 3,
        "text": "Atrophic rhinitis"
      },
      {
        "id": 4,
        "text": "Nasal polyp"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cottle test </strong>is positive in patients with a&nbsp;<strong>deviated nasal septum. </strong>It is used to assess the<strong> patency</strong> of the nasal valve and when positive, it indicates the abnormality in the <strong>vestibular component</strong> of the nasal valve.</p>\n<p>In this test, the cheek is drawn laterally while the patient breathes quietly.&nbsp;If the nasal airway improves and the obstruction is relieved on the test side, the test is <strong>positive</strong> and indicates&nbsp;the surgery will be useful and the patient can be taken up for surgery.</p>\n<p>The&nbsp;<strong>nasal valve area</strong>&nbsp;is the&nbsp;<strong>narrowest portion</strong>&nbsp;of the nasal passage. It is bounded <strong>medially</strong> by the <strong>nasal septum</strong>, <strong>superiorly</strong> and <strong>laterally</strong> by the caudal margin of the <strong>upper lateral cartilage</strong>, <strong>inferiorly</strong> by the <strong>floor</strong> of the <strong>piriform aperture</strong> and&nbsp;the nasal valve<strong>&nbsp;</strong>is the specific slit-like segment between the caudal margin of the upper lateral cartilage and the septum.</p>\n<p>Conditions with a positive Cottle test:</p>\n<ul>\n<li><strong>Deviated nasal septum</strong></li>\n<li><strong>Collapsed nasal valve</strong> - causes snoring and sleep apnoea</li>\n<li>Valve stenosis</li>\n</ul>\n<p>The below image depicts Cottle's test</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1635378e424041c58b6a63dd8565d9efx600x606.JPEG"
    ]
  },
  {
    "text": "Which of the following is the most common cause of septal perforation?",
    "choices": [
      {
        "id": 1,
        "text": "Septal abscess"
      },
      {
        "id": 2,
        "text": "Trauma"
      },
      {
        "id": 3,
        "text": "Syphilis"
      },
      {
        "id": 4,
        "text": "Tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Trauma</strong> is the most <strong>common cause</strong> of <strong>septal perforation</strong>.</p>\n<p>Causes of septal perforation:</p>\n<ul>\n<li>Trauma - nasal surgery, nose picking, septal cauterization, nasal packing, septal hematoma, foreign bodies</li>\n<li>Surface irritants - cocaine, heroin, decongestant nasal sprays</li>\n<li>Infections - syphilis, typhoid, tuberculosis, lepromatous leprosy, rhinosporidiosis, rhinoscleroma, aspergillosis</li>\n<li>Neoplastic - melanoma, SCC, adenocarcinoma, lymphoma</li>\n<li>Inflammatory - sarcoidosis, Crohn's disease, RA, Granulomatosis with polyangitis</li>\n</ul>\n<p>Small anterior perforations may present with a whistling sound during respiration. Large perforations may obstruct the nose or even bleed due to the formation of crusts.</p>\n<p>Treatment depends on the cause. Small asymptomatic perforations can be closed by plastic flaps. In larger perforations treatment is aimed at keeping the nose crust-free using nasal douches and bland ointments.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is inconsistent with nasopharyngeal carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Most common site of origin is the fossa of Rosenmuller"
      },
      {
        "id": 2,
        "text": "CN V involvement leads to reduced corneal reflex"
      },
      {
        "id": 3,
        "text": "Hearing loss is the most common presentation"
      },
      {
        "id": 4,
        "text": "Tumor can invade the orbit and cause exophthalmos"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The statement \u2018hearing loss is the most common presentation\u2019 is inconsistent with nasopharyngeal carcinoma.\u00a0</p>\n<p>The <strong>most common</strong> presenting symptom is <strong>cervical lymphadenopathy</strong>, occurring in 60-90% of cases.\u00a0</p>\n<p>Nasopharyngeal carcinoma is a malignant tumor of the nasopharynx. The theories for etiology include genetics, infection with <strong>Epstein-Barr virus</strong>, air pollution, and <strong>smoking</strong>.</p>\n<p>It has three types -</p>\n<ol>\n<li>Keratinizing carcinoma</li>\n<li>Nonkeratinizing differentiated carcinoma</li>\n<li>Nonkeratinizing undifferentiated carcinoma.\u00a0</li>\n</ol>\n<p>The most common site of <strong>origin</strong> of nasopharyngeal carcinoma is the<strong> fossa of Rosenmuller</strong> (Option A). From here, it can spread extensively in any direction locally. It also can spread lymphatically to the cervical, retropharyngeal, or parapharyngeal lymph nodes.\u00a0</p>\n<p><strong>Trotter's triad</strong> consists of <strong>ipsilateral conductive hearing loss</strong> (eustachian tube blockage),<strong> trigeminal neuralgia</strong> of the <strong>mandibular</strong> <strong>division</strong>, and <strong>palatal asymmetry</strong> due to invasion of levator palatini muscles may be seen. This triad occurs in malignant tumors of the lateral nasopharyngeal wall due to extensive invasion.\u00a0</p>\n<p>Nasopharyngeal carcinoma presents with the following symptoms:</p>\n<ul>\n<li>Nasal - obstruction, discharge, rhinolalia clausa, epistaxis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Ear - <strong>eustachian tube obstruction</strong> leading to conductive hearing loss or recurrent otitis media.\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Ophthalmoneurologic - all the cranial nerves (CN) may be involved.\u00a0</li>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>CN VI</strong> - squint and diplopia, the <strong>most common cranial nerve involved</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">CN III, IV, VI, - ophthalmoplegia</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">CN V - reduced corneal reflex (Option B)</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">CN II - exophthalmos (Option D)</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">CN IX, X, XI - jugular foramen syndrome</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\">Horner\u2019s syndrome</li>\n</ul>\n<li>Cervical lymph node metastasis</li>\n<li>Distant metastasis to the bone, liver, and lung.\u00a0</li>\n</ul>\n<p>Diagnosis is made by <strong>high resolution, contrast-enhanced CT</strong> of the neck.</p>\n<p>The treatment of choice is <strong>radiotherapy</strong>. Stage I and II can be treated with radiotherapy alone, while<strong> higher stages require combination treatment with radiotherapy</strong> and<strong> chemotherapy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A male patient presents with a sore throat and difficulty swallowing for 2 days. On oropharyngeal examination, a grey-white membrane is observed over the tonsils. All of the following are differential diagnoses for membrane over the tonsils except",
    "choices": [
      {
        "id": 1,
        "text": "Streptococcal tonsillitis"
      },
      {
        "id": 2,
        "text": "Diphtheria"
      },
      {
        "id": 3,
        "text": "Ludwig\u2019s angina"
      },
      {
        "id": 4,
        "text": "Infectious mononucleosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>All the above-mentioned options are the differential diagnosis for <strong>membrane over the tonsils </strong>except Ludwig&rsquo;s angina.&nbsp;Ludwig&rsquo;s angina is the infection of the submandibular space.</p>\n<p>The differential diagnosis for grey membrane over the tonsils includes the following</p>\n<ul>\n<li>Streptococcus &amp; other <strong>pyogenic organisms</strong></li>\n<li><strong>Diphtheria</strong></li>\n<li>Infectious mononucleosis</li>\n<li>Vincent&rsquo;s angina</li>\n<li>Leukemia</li>\n<li><strong>Candida</strong></li>\n<li>Agranulocytosis</li>\n<li>Malignancy</li>\n<li>Aphthous ulcer</li>\n<li>Traumatic ulcer</li>\n</ul>\n<p>&nbsp;The image given below shows acute tonsillitis presenting with a membrane over the tonsil.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97c6052cbe9e41fbb0d61be5c7f6e28ax1280x803.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6547702439144d15ba7e700253a8f4d9x720x1019.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d1d2794555404ed4be05cb5fa255ba07x720x486.JPEG"
    ]
  },
  {
    "text": "A patient with bilateral abductor paralysis is admitted to the intensive care unit. In order to relieve the respiratory obstruction, a tracheostomy is being performed. Which of the following is not an immediate complication of this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Aspiration of blood"
      },
      {
        "id": 2,
        "text": "Pneumothorax"
      },
      {
        "id": 3,
        "text": "Apnoea"
      },
      {
        "id": 4,
        "text": "Tracheal stenosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tracheal stenosis</strong>, due to tracheal ulceration and infection, is a<strong> late complication</strong> of tracheostomy and does not occur immediately.</p>\n<div class=\"page\" title=\"Page 374\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A tracheostomy is a procedure where an opening is made in the anterior wall of the trachea and it is converted into a stoma on the skin surface. It is primarily indicated when there is respiratory <strong>obstruction</strong>, <strong>secretions, </strong>or respiratory<strong> insufficiency.&nbsp;</strong>It is also indicated<strong>&nbsp;</strong>in an <strong>intubated patient</strong> after&nbsp;<strong>2-3 weeks</strong>&nbsp;to avoid&nbsp;<strong>subglottic stenosis.</strong></p>\n</div>\n</div>\n</div>\n<p><strong>Complications of tracheostomy:</strong></p>\n<table style=\"height: 271px; width: 558.359375px;\">\n<tbody>\n<tr>\n<td style=\"width: 177px; text-align: center;\">\n<p><strong>Immediate </strong></p>\n<p>(at the time of operation)</p>\n</td>\n<td style=\"width: 110px; text-align: center;\">\n<p><strong>Intermediate </strong></p>\n<p>(during first few hours or days)</p>\n</td>\n<td style=\"width: 210.359375px; text-align: center;\">\n<p><strong>Late </strong></p>\n<p>(after chronic use for weeks or months)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 177px;\">\n<ol>\n<li>Primary hemorrhage</li>\n<li>Apnoea due to sudden washout of CO2</li>\n<li>Pneumothorax due to injury to apical pleura</li>\n<li>Injury to recurrent laryngeal nerves</li>\n<li>Aspiration of blood</li>\n<li>Injury to esopgahus</li>\n</ol>\n</td>\n<td style=\"width: 110px;\">\n<ol>\n<li>Reactionary or secondary hemorrhage.</li>\n<li>Displacement of the tube.</li>\n<li>Blocking of the tube.</li>\n<li>Subcutaneous emphysema.</li>\n<li>Tracheitis and tracheobronchitis.</li>\n<li>Atelectasis and lung abscess.</li>\n<li>Local wound infection and granulations.</li>\n</ol>\n</td>\n<td style=\"width: 210.359375px;\">\n<ol>\n<li>Laryngeal stenosis.</li>\n<li>Tracheal stenosis</li>\n<li>Tracheo-oesophageal fistula</li>\n<li>Problems of decannulation.</li>\n<li>Persistent tracheocutaneous fistula.</li>\n<li>Keloid or unsightly scar.</li>\n<li>Aspiration of tracheostomy tube fragments into the tracheobronchial tree</li>\n</ol>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/53ce80cec98c4e1db894222948d61c68x720x569.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8ac6b785f2084d1f9e475bbc1023cc39x1279x1077.JPEG"
    ]
  },
  {
    "text": "A 5-year-old child is brought to you with complaints of noisy breathing. On performing direct laryngoscopy, subglottic stenosis is noted. Which grading system will you use to report the extent of the stenosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hyams grading"
      },
      {
        "id": 2,
        "text": "House Brackmann grading"
      },
      {
        "id": 3,
        "text": "Myer Cotton's grading"
      },
      {
        "id": 4,
        "text": "Modified Mallampati grading"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Myer Cotton&rsquo;s grading</strong> is used for <strong>subglottic stenosis.</strong></p>\n<p>It is the abnormal thickening of cricoid/fibrous tissue proliferation below cords. It causes the airway to narrow and presents with <strong>dyspnea</strong>, <strong>biphasic stridor</strong> and a <strong>normal cry.&nbsp;</strong></p>\n<p>Diagnosis:</p>\n<ul>\n<li>In full-term infants, subglottic diameter &lt;4mm.</li>\n<li>In premature infants, subglottic diameter &lt;3mm.</li>\n</ul>\n<p>The Myer Cotton&rsquo;s grading system allows to stratify the stenosis and plan for treatment:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Grade 1: &lt;50% stenosis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Grade 2: 51-70% stenosis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Grade 3: 71-99% stenosis</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Grade 4: No lumen detected</li>\n</ul>\n<p>Other options</p>\n<p>Option A - <strong>Hyams grading</strong> is a predictive tool used in <strong>olfactory neuroblastoma</strong>.</p>\n<p>Option B - <strong>House Brackmann grading</strong> is used as a <strong>facial nerve grading system.</strong></p>\n<p>Option D - <strong>Modified mallampati</strong> classification is used to <strong>assess difficult airway</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-year-old boy is brought to the emergency department with complaints of dysphagia, fever, stridor, drooling, and muffled voice. The following image is seen on a lateral x-ray of the neck. What is the finding seen in the given radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Steeple sign"
      },
      {
        "id": 2,
        "text": "Thumb sign"
      },
      {
        "id": 3,
        "text": "Adenoid hypertrophy"
      },
      {
        "id": 4,
        "text": "Omega shaped epiglottis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Thumb sign</strong> is seen on the given lateral view radiograph.</p>\n<p>The above clinical features of a&nbsp;toxic&nbsp;looking child with high-grade fever, tachypnea,&nbsp;stridor, dysphagia with salivary drooling are suggestive of&nbsp;<strong>acute epiglottitis</strong>.&nbsp;<strong>Thumb sign&nbsp;</strong>on lateral X-ray of neck is pathognomonic for <strong>acute epiglottitis</strong>.&nbsp;</p>\n<p><strong>Acute epiglottitis</strong> is an acute rapidly progressive confined to supraglottic structures i.e., epiglottis, aryepiglottic fold and arytenoids. It usually affects children of age <strong>2-7 years</strong>. It has a potentially fulminating course of fever, sore throat, dyspnea, and rapidly progressing respiratory obstruction.</p>\n<p>Management:</p>\n<p>Indirect laryngoscopy shows edema and congestion of supraglottic structures. A lateral X-ray of the neck shows swollen epiglottis giving an appearance called the thumb sign.</p>\n<p>Acute epiglottitis is a<strong>&nbsp;medical emergency</strong>&nbsp;due to sudden and unpredictable airway obstruction. The treatment includes the following:</p>\n<ul>\n<li>Admission to ICU</li>\n<li>Airway management - endotracheal intubation, tracheostomy for respiratory obstruction</li>\n<li>Antibiotics - <strong>Ampicillin </strong>or<strong> third-generation cephalosporin</strong>&nbsp;is indicated in the treatment of acute epiglottitis&nbsp;along with airway management.</li>\n<li>Dexamethasone may be given to reduce pharyngeal edema</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: <strong>Steeple sign</strong> is seen in <strong>laryngotracheobronchitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/305339cc7e1340b5aeffe0ab4b0c7aef.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8bc406afa34b45d29d8c64094b9a593cx1024x1024.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed09b84243614f119ad9f3b956924fdax512x546.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b740e9204085422b8493441a102cf9fbx366x366.JPEG"
    ]
  },
  {
    "text": "A patient with a parotid abscess is planned for incision and drainage (I & D). Which of the following practices will you avoid in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Put an incision that is similar to parotidectomy"
      },
      {
        "id": 2,
        "text": "Blunt dissection of the pus pockets"
      },
      {
        "id": 3,
        "text": "Dissection parallel to the facial nerve branches"
      },
      {
        "id": 4,
        "text": "Wait for the swelling to become fluctuant before performing I & D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In a case of a <strong>parotid abscess</strong>, one must <strong>never wait for fluctuation</strong> or pus point to occur. This is because the superficial layer of <strong>parotidomasseteric fascia</strong> is <strong>tense</strong> and the fluctuation will be apparent only in later stages.</p>\n<p>A parotid abscess&nbsp;refers to an infection and pus formation in the parotid space. It is caused most commonly by&nbsp;<em><strong>Staphylococcus aureus</strong>.&nbsp;</em><strong>Post-surgical cases</strong>&nbsp;and&nbsp;<strong>debilitated patients</strong>&nbsp;with&nbsp;<strong>stasis</strong> of salivary flow are at risk of developing parotid abscesses.</p>\n<p>Patients typically present with <strong>unilateral swelling, redness, induration,</strong> and tenderness over the parotid gland and angle of the mandible. Dehydration and fever are also present.&nbsp;Diagnosis is by <strong>ultrasonography</strong> or a <strong>CT scan</strong>. Multiple small loculi of pus are seen in the parenchyma. Aspiration of abscess can be done to determine the culture and sensitivity of the infective agent.&nbsp;</p>\n<p>Correction of <strong>dehydration</strong>, improving oral hygiene and promoting salivary flow. Intravenous antibiotics are also used in treatment.&nbsp;</p>\n<p>Surgical drainage under local or general anesthesia is carried out by a <strong>preauricular incision</strong> as employed for <strong>parotidectomy. </strong>A&nbsp;skin flap is raised to expose the surface of the gland, and the abscess or abscesses are <strong>bluntly opened</strong> working <strong>parallel</strong> to the branches of the <strong>VIIth nerve</strong>. The skin incision is loosely approximated over a drain and allowed to heal by <strong>secondary intention</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old boy with recurrent attacks of tonsillitis and speech difficulties was posted for a tonsillectomy procedure. Which of the following position is used in this surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Sniffing position"
      },
      {
        "id": 2,
        "text": "Semi Fowler\u2019s position"
      },
      {
        "id": 3,
        "text": "Reverse Trendelenburg position"
      },
      {
        "id": 4,
        "text": "Rose position"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Rose position</strong>&nbsp;is used in tonsillectomy surgery.&nbsp;</p>\n<p>In Rose's position, the patient is&nbsp;<strong>supine</strong>, with their&nbsp;<strong>head extended.</strong>&nbsp;A&nbsp;<strong>rubber ring</strong>&nbsp;is placed under the&nbsp;<strong>head</strong>&nbsp;to stabilize it and a&nbsp;<strong>pillow</strong>&nbsp;is placed under the&nbsp;shoulders<strong>&nbsp;to extend the head.&nbsp;</strong>Rose's position is also used in<strong>&nbsp;adenoidectomy&nbsp;</strong>and<strong>&nbsp;tracheostomy.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d587d8c5059a410cac1998ddcc876179x1280x1210.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/421260be9c4146de8a7751f28e5131fbx720x700.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a9978ae3c5c14271b58923953c4f84fdx1280x986.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4347db97f57444059ae7e3fd791f5f23x1280x1074.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/34e4d7b2f30e444fa253f7c4ed54f61fx600x2602.JPEG"
    ]
  },
  {
    "text": "Identify the given instrument.",
    "choices": [
      {
        "id": 1,
        "text": "Post nasal Mirror"
      },
      {
        "id": 2,
        "text": "Laryngeal Mirror"
      },
      {
        "id": 3,
        "text": "St. Clair Thompson Mirror"
      },
      {
        "id": 4,
        "text": "Double hook retractor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows a <strong>laryngeal mirror&nbsp;</strong>which is identified by its <strong>straight shaft</strong> without any bends with a mirror at the end.</p>\n<div class=\"page\" title=\"Page 452\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Indirect Laryngoscopy</strong> is done by the use of a laryngeal mirror.</p>\n<p>The patient is seated straight opposite the examiner, with the head and chest leaning slightly towards him. He is asked to protrude his tongue which is wrapped in gauze for protection from any inadvertent injury. The tongue is held by the examiner between the thumb and middle finger.</p>\n<p>The <strong>laryngeal mirror (size 4&ndash;6)</strong> is introduced into the mouth and held firmly against the uvula and soft palate. It should be <strong>warmed</strong> and tested on the back of the hand before introduction. Light is focused on the laryngeal mirror and the patient is asked to breathe quietly. Movements of both cords are seen and compared by asking the patient to take <strong>deep inspiration</strong> (abduction of cords), say<strong> &ldquo;Aa&rdquo;</strong> (adduction of cords), and <strong>&ldquo;Eee&rdquo;</strong> (for adduction and tension).</p>\n</div>\n</div>\n</div>\n<p>Structures seen on indirect laryngoscopy (in order) are:</p>\n<ul>\n<li>The base of the tongue (posterior one-third of the tongue)</li>\n<li>Vallecula</li>\n<li>Median and lateral glossoepiglottic folds</li>\n<li>Epiglottis</li>\n<li>Pharyngoepiglottic folds</li>\n<li>Aryepiglottic folds</li>\n<li>Arytenoids</li>\n<li>False vocal cords</li>\n<li>True vocal cords</li>\n</ul>\n<p>Other options:</p>\n<p>Options A and C: <strong>St. Clair Thompson mirror</strong> is the other name for the<strong> Postnasal/ posterior rhinoscopy mirror.</strong> It has<strong> two bends</strong> in the shaft and is <strong>bayonet shaped.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ea030f185f5b4f5a9996fd1f1d4b8eb1.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2c4ed2e65fd04d33817cc021aa222143x720x643.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/12b2cc9aaf71444aaef6dc7c03b71da1x1280x663.JPEG"
    ]
  },
  {
    "text": "A 10-year-old boy with nasal obstruction, nasal discharge,  sinusitis, and chronic suppurative otitis media is scheduled for adenoidectomy. Which of the following is a contraindication for this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Recurrent sinusitis"
      },
      {
        "id": 2,
        "text": "Chronic otitis media"
      },
      {
        "id": 3,
        "text": "Cleft palate"
      },
      {
        "id": 4,
        "text": "Dental malocclusion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The presence of a <strong>cleft palate</strong>&nbsp;is&nbsp;a <strong>contraindication for adenoidectomy</strong>.&nbsp;</p>\n<p>Performing an adenoidectomy in a patient with a cleft palate can lead to <strong>velopharyngeal insufficiency</strong>, a disorder of the velopharyngeal valve. The function of this valve is to<strong> separate the oral and nasal cavities</strong> during actions like speaking, swallowing, vomiting, blowing, and sucking.</p>\n<p>Velopharyngeal insufficiency leads to <strong>reduced speech intelligence</strong> as well as <strong>social</strong> and <strong>functional</strong> <strong>impairment</strong>. Patients have <strong>hypernasal speech</strong>, compensatory facial grimacing, and misarticulation.&nbsp;&nbsp;</p>\n<p>Indications for adenoidectomy include:&nbsp;</p>\n<ol>\n<li>Symptomatic <strong>adenoid hypertrophy</strong></li>\n<li><strong>Recurrent sinusitis</strong> (Option A)</li>\n<li><strong>Chronic otitis media</strong> (Option B)&nbsp;</li>\n<li>Chronic suppurative otitis media and recurrent ear discharge</li>\n<li><strong>Dental malocclusion</strong> (Option D) occurring due to a low-positioned tongue, and separated lips.&nbsp;</li>\n</ol>\n<p>Contraindications of adenoidectomy include:&nbsp;</p>\n<ol>\n<li><strong>Cleft palate</strong> or submucous palate</li>\n<li>Hemorrhagic diathesis</li>\n<li><strong>Acute infection</strong> of the upper respiratory tract&nbsp;</li>\n</ol>\n<p>Adenoidectomy is performed under general anesthesia in <strong>Rose's position</strong>. Here the patient is supine with the head extended by using a pillow under the shoulders. The head is stabilized with a rubber ring and hyperextension of the neck should be avoided.&nbsp;</p>\n<p>A <strong>Boyle - Davis mouth gag</strong> is inserted after examining the nasopharynx. An adenoid curette with a guard is introduced into the nasopharynx to engage the adenoids. The adenoid tissue is <strong>shaved off </strong>with gentle sweeping movements with smaller curettes used to remove lateral masses while avoiding the eustachian tubes. Hemostasis is achieved by packing the area and electrocoagulation. Persistent bleeding can be treated with a postnasal pack.&nbsp;</p>\n<p>Complications of adenoidectomy include:&nbsp;</p>\n<ul>\n<li><strong>Hemorrhage</strong></li>\n<li>Injury to the eustachian tube opening</li>\n<li>Injury to pharyngeal musculature and vertebrae due to hyperextension of the neck and pressure of the curette</li>\n<li><strong>Griesel syndrome</strong>: neck pain and torticollis due to spasm of paraspinal muscles or atlantoaxial dislocation</li>\n<li><strong>Velopharyngeal insufficiency</strong></li>\n<li>Nasopharyngeal stenosis</li>\n<li>Recurrence.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old boy was brought with loud, raspy, and noisy breathing. His mother also says that his voice has become hoarse over the past 3-4 months. He was born at term through an uncomplicated vaginal delivery. The fiberoptic laryngoscopy image is given below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Laryngomalacia"
      },
      {
        "id": 2,
        "text": "Reinke's edema"
      },
      {
        "id": 3,
        "text": "Vocal nodules"
      },
      {
        "id": 4,
        "text": "Respiratory papillomatosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This clinical vignette is suggestive of <strong>laryngeal papilloma</strong> or <strong>recurrent respiratory papillomatosis</strong>.</p>\n<p>It is the most common <strong>benign neoplasm</strong> of the larynx in children. It is caused by <strong>human papilloma DNA virus (HPV) types 6 and 11</strong>. Squamous papillomas can be seen in children, juvenile papillomatosis (as in this case), and in adults, adult-onset papilloma.\u00a0</p>\n<p>It is thought that the patients acquire this condition from their mothers who had <strong>vaginal human papillomavirus</strong> infection during birth.\u00a0It is usually seen in the <strong>supraglottic </strong>and<strong> glottic regions</strong>. Less commonly, the subglottis, trachea, and bronchi may be involved.</p>\n<p>Clinically, the patient is typically a <strong>young child 3-5 years</strong> of age. They may present with hoarseness of voice, stridor, and breathing difficulty. The disease recurs requiring repeated surgical and medical management throughout childhood. Rarely, they may undergo malignant change.\u00a0</p>\n<p>It is diagnosed using\u00a0<strong>flexible fiberoptic laryngoscopy</strong> and may later be confirmed by direct laryngoscopy or rigid bronchoscopy and biopsy.</p>\n<p>Treatment of recurrent respiratory papillomatosis:</p>\n<ul>\n<li>Surgical management with <strong>excision using a CO<sub>2</sub> laser</strong></li>\n<li>Medical management using\u00a0<strong>interferon-alpha\u00a0</strong>has been tried as an adjuvant, but it is associated with significant side effects\u00a0</li>\n</ul>\n<p>The adult-onset version is usually less severe and does not recur after surgical removal. It affects males more than females and presents between the ages of 30-50 years.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p>Option A - <strong>Laryngomalacia</strong> is a congenital condition of the larynx that manifests at birth and disappears by the age of 2 years. Babies present with stridor on crying that relieves in the prone position.\u00a0</p>\n<p>The following image shows the <strong>omega-shaped epiglottis</strong> of <strong>laryngomalacia</strong>:</p>",
    "explanation_video": "",
    "question_images": [
      "https://www.researchgate.net/publication/328182695/figure/fig1/AS:680027075141633@1539142497751/Laryngeal-papillomatosis-in-white-light-WL.png"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e30d8ddb316c408bb3263cab83bd70b2x366x366.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3aaad406c9e34848af31805aecce12a6x768x576.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/17b6e9150afd472cb0d43d81ff4461a3x1280x960.JPEG"
    ]
  }
];
        let quizName = 'Ent Test';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>