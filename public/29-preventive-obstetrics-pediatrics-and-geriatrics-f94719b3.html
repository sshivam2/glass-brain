<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>29 Preventive Obstetrics, Pediatrics And Geriatrics - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Community Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">28</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A pregnant woman has come for her first antenatal visit at 10 weeks of gestation. How many more antenatal visits does she require to fulfill the minimum requirements as per the Maternal and Child Health program?",
    "choices": [
      {
        "id": 1,
        "text": "7"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "8"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This patient requires <strong>3 more antenatal visits</strong> in order to fulfill the minimum requirements according to the Maternal and Child Health Program (<strong>MCH</strong>).</p>\n<p>The <strong>minimum </strong>number of<strong> antenatal visits</strong> according to <strong>MCH</strong> is <strong>4</strong>.</p>\n<ul>\n<li><strong>1st visit&nbsp;</strong>&ndash; within 12 weeks, preferably as soon as the pregnancy is suspected.</li>\n<li><strong>2nd visit&nbsp;</strong>&ndash; between 14 and 26 weeks</li>\n<li><strong>3rd visit&nbsp;</strong>&ndash; between 28 and 34 weeks</li>\n<li><strong>4th visit&nbsp;</strong>&ndash; between 36 weeks and term</li>\n</ul>\n<p>The minimum number of antenatal visits according to the <strong>WHO</strong>&nbsp;is <strong>8</strong>.&nbsp;Ideally, pregnant women should attend&nbsp;antenatal visits according to the following schedule:</p>\n<ul>\n<li><strong>Once a month</strong> during the<strong> first 7 months</strong></li>\n<li><strong>Twice a month</strong> during the <strong>8th&nbsp;month </strong></li>\n<li><strong>Once a week</strong>, thereafter if everything is normal.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a medical officer in a PHC. A pregnant woman comes to you for regular follow-up during her second trimester. Which of the following will you prescribe for her?",
    "choices": [
      {
        "id": 1,
        "text": "100 mg elemental iron + 500 mcg folic acid"
      },
      {
        "id": 2,
        "text": "100 mg elemental iron + 100 mcg folic acid"
      },
      {
        "id": 3,
        "text": "50 mg elemental iron + 500 mcg folic acid"
      },
      {
        "id": 4,
        "text": "60 mg elemental iron + 500 mcg of folic acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>As per the <strong>Anemia Mukt Bharat</strong> program, pregnant women should be given <strong>60 mg</strong> of elemental<strong> iron</strong> and <strong>500 mcg</strong> of <strong>folic acid\u00a0</strong>in the II trimester.\u00a0It should be started from the <strong>4th month</strong> of pregnancy and continued for <strong>180 days post-partum</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following vaccine is contraindicated in pregnancy?",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis A"
      },
      {
        "id": 2,
        "text": "Hepatitis B"
      },
      {
        "id": 3,
        "text": "Rabies"
      },
      {
        "id": 4,
        "text": "Varicella"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Varicella vaccine</strong> is <strong>contraindicated</strong> in <strong>pregnant</strong> women as it is a live vaccine.&nbsp;</p>\n<p>The live attenuated varicella virus vaccine is currently recommended for children between 12 to 18 months of age who have not had chickenpox.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the average weight gain during pregnancy in Indian women with inadequate calorie intake?",
    "choices": [
      {
        "id": 1,
        "text": "7 - 8 kg"
      },
      {
        "id": 2,
        "text": "9 \u2013 11 kg"
      },
      {
        "id": 3,
        "text": "8 - 9  kg"
      },
      {
        "id": 4,
        "text": "5 - 6 kg"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Weight gain</strong> during pregnancy in women with&nbsp;<strong>inadequate calorie</strong> intake is around <strong>5 - 6 kgs</strong>.</p>\n<p><strong>Normally</strong>, a woman is expected to gain around <strong>9-11 kgs</strong> of weight during pregnancy. An inadequate dietary intake can be suspected if the woman gains &lt; 2 kg/ month.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect about congenital syphilis?",
    "choices": [
      {
        "id": 1,
        "text": "It can be prevented by procaine penicillin administration"
      },
      {
        "id": 2,
        "text": "Infection of fetus most commonly occurs in the 1st trimester"
      },
      {
        "id": 3,
        "text": "Neurological damage with mental retardation is a serious complication"
      },
      {
        "id": 4,
        "text": "Chances of transmission are lower if mother has late syphilis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The chances of transmission of syphilis during pregnancy is highest<strong>\u00a0after 6th\u00a0month\u00a0</strong>of gestation. It does not occur before the 4<sup>th</sup> month.</p>\n<p>It is routine to test the mother for syphilis in antenatal clinics during her first visit.\u00a0The <strong>chance of infection</strong> of the fetus is\u00a0<strong>higher</strong> when the mother is suffering from <strong>early</strong><strong>\u00a0</strong>(primary or secondary)<strong> syphilis</strong>\u00a0and are lower in case of\u00a0late syphilis. <strong>Neurological damage</strong> with mental retardation is a serious complication of congenital syphilis.\u00a0It can be prevented by<strong> procaine penicillin</strong> administration.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The District Maternal Death Review Committee is reviewing the number of maternal deaths in the district during 2020. In order to calculate the maternal mortality ratio, what other parameter is required?",
    "choices": [
      {
        "id": 1,
        "text": "Total live births"
      },
      {
        "id": 2,
        "text": "Birth Rate"
      },
      {
        "id": 3,
        "text": "Total pregnant women"
      },
      {
        "id": 4,
        "text": "Total women in child bearing age"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>maternal mortality ratio</strong> is calculated using the number of <strong>maternal deaths</strong> and <strong>total live births</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following maternal deaths is not included when calculating the maternal mortality ratio?",
    "choices": [
      {
        "id": 1,
        "text": "Death of a 30-year-old woman following spontaneous abortion at 11 weeks of gestation"
      },
      {
        "id": 2,
        "text": "Death of a 24-year-old woman due to ruptured ectopic pregnancy"
      },
      {
        "id": 3,
        "text": "Death of a 26-year-old woman following a road traffic accident at 36 weeks of gestation"
      },
      {
        "id": 4,
        "text": "Death of a 21-year-woman following secondary PPH on postpartum day 14"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The death of a pregnant woman following a road traffic accident is not included when calculating the <strong>maternal mortality ratio</strong>. It includes all deaths anytime during <strong>pregnancy</strong> or <strong>within 42 days</strong> of termination from any cause <strong>related to</strong> or aggravated by the <strong>pregnancy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of maternal deaths in India?",
    "choices": [
      {
        "id": 1,
        "text": "Hemorrhage"
      },
      {
        "id": 2,
        "text": "Eclampsia"
      },
      {
        "id": 3,
        "text": "Anemia"
      },
      {
        "id": 4,
        "text": "Unsafe abortion"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>most common</strong> cause\u00a0of maternal deaths in India is <strong>hemorrhage</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a town, there were 2500 live births in a period of 6 months. During the same period, 15 women died due to the following causes. What is the maternal mortality ratio?",
    "choices": [
      {
        "id": 1,
        "text": "400 per 100000 live births"
      },
      {
        "id": 2,
        "text": "6 per 1000 live births"
      },
      {
        "id": 3,
        "text": "40 per 1000 live births"
      },
      {
        "id": 4,
        "text": "60 per 1000 live births"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The maternal mortality\u00a0ratio (<strong>MMR</strong>) of this town is <strong>400 per 100,000 live births</strong>.</p>\n<p>Maternal mortality refers to deaths during pregnancy or 42 days within termination, from causes related to pregnancy. Hence, in this town, there were <strong>10 maternal deaths</strong> (peripartum infection, PPH, obstructed labor).</p>\n<p>MMR = Number of maternal deaths in a period x 100,000 / Number of live births in the same period</p>\n<p>Hence, MMR = 10 x 100000/2500 = 400 per 100,000 live births</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A baby was delivered at home in a village. Until which day of life should an ASHA worker visit this baby?",
    "choices": [
      {
        "id": 1,
        "text": "14"
      },
      {
        "id": 2,
        "text": "28"
      },
      {
        "id": 3,
        "text": "21"
      },
      {
        "id": 4,
        "text": "42"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Under the<strong> Home Based Newborn Care</strong> (HBNC) guidelines, <strong>ASHA </strong>workers&nbsp;should visit <strong>all newborns</strong> up to&nbsp;<strong>42 days</strong> of life, according to the following schedule.&nbsp;</p>\n<table style=\"height: 98px; width: 355px;\">\n<tbody>\n<tr>\n<td style=\"width: 148px; text-align: center;\"><strong>Mode of delivery</strong></td>\n<td style=\"width: 50.296875px; text-align: center;\"><strong>No. of visits</strong></td>\n<td style=\"width: 136.703125px; text-align: center;\"><strong>Schedule of visits</strong></td>\n</tr>\n<tr>\n<td style=\"width: 148px;\">Home delivery</td>\n<td style=\"width: 50.296875px;\">7</td>\n<td style=\"width: 136.703125px;\">Days&nbsp;1, 3, 7, 14, 21, 28, 42</td>\n</tr>\n<tr>\n<td style=\"width: 148px;\">Hospital-based normal vaginal delivery</td>\n<td style=\"width: 50.296875px;\">6</td>\n<td style=\"width: 136.703125px;\">\n<p>Days&nbsp;3, 7, 14, 21, 28, 42</p>\n<p>(except day 1)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 148px;\">Hospital-based LSCS delivery</td>\n<td style=\"width: 50.296875px;\">5</td>\n<td style=\"width: 136.703125px;\">\n<p>Days 7, 14, 21, 28, 42</p>\n<p>(except days 1, 3)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>During her visits, ASHA workers must record weight, ensure vaccination, and registration of births. On completion of all these visits, they receive an <strong>incentive</strong> of <strong>Rs. 250</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the best indicator of obstetric and neonatal care given before and around the time of birth?",
    "choices": [
      {
        "id": 1,
        "text": "Infant mortality rate"
      },
      {
        "id": 2,
        "text": "Perinatal mortality rate"
      },
      {
        "id": 3,
        "text": "Under 5 mortality rate"
      },
      {
        "id": 4,
        "text": "Early neonatal mortality rate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> perinatal mortality rate </strong>is the best indicator to evaluate obstetric and neonatal care given <strong>before</strong> and <strong>around</strong> the time of <strong>birth</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the 2030 target of the India Newborn Action Plan with regards to the stillbirth rate?",
    "choices": [
      {
        "id": 1,
        "text": "< 10 per 1000 live births"
      },
      {
        "id": 2,
        "text": "< 20 per 1000 live births"
      },
      {
        "id": 3,
        "text": "< 30  per 10000 live births"
      },
      {
        "id": 4,
        "text": "< 40 per 10000 live births"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The India Newborn Action Plan targets to achieve a <strong>stillbirth rate</strong> of <strong>&lt; 10/ 1000 </strong>live births&nbsp;and <strong>neonatal mortality rate</strong> of <strong>&lt; 10/ 1000 </strong>live births (<strong>single-digit</strong> SBR and NMR) by <strong>2030</strong>.</p>\n<p>This program was launched to reduce preventable newborn deaths and stillbirths.&nbsp;It provides the following:</p>\n<ul>\n<li>Pre-conception and antenatal care</li>\n<li>Care during labor and childbirth</li>\n<li>Immediate newborn care</li>\n<li>Care of healthy newborn</li>\n<li>Care of small and sick newborn</li>\n<li>Care beyond newborn survival</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A group of health workers are conducting a perinatal mortality audit in a hospital. Which of the following must they take into account to calculate the perinatal mortality rate?",
    "choices": [
      {
        "id": 1,
        "text": "1,3,4"
      },
      {
        "id": 2,
        "text": "1,2,4"
      },
      {
        "id": 3,
        "text": "1,4,5"
      },
      {
        "id": 4,
        "text": "2,4,5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong>&nbsp;</strong>perinatal mortality rate (<strong>PMR</strong>)&nbsp;is calculated using the following parameters<strong>&nbsp;</strong>during a particular time period:</p>\n<ul>\n<li><strong>Late fetal</strong> deaths or&nbsp;stillbirths<strong>&nbsp;&gt; 1000 g</strong><strong>&nbsp;</strong>- correlates to <strong>28 weeks</strong> of gestation</li>\n<li><strong>Early neonatal </strong>deaths<strong>&nbsp;</strong>- from birth to 7 days of life</li>\n<li><strong>Live births</strong> &gt; 1000 g</li>\n</ul>\n<p>The neonatal mortality rate (<strong>NMR</strong>) refers to the deaths within the <strong>first 28 days</strong> of life. It is calculated using the following parameters:</p>\n<ul>\n<li>Early neonatal deaths</li>\n<li>Late neonatal deaths - after 7th day but before 28th completed day of life</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a given population, 4050 births were recorded over a period of 1 year. Among these, 50 were stillbirths, 50 died in the 1st week of life and 150 died within 8-28 days of life. What is the neonatal mortality rate of this population?",
    "choices": [
      {
        "id": 1,
        "text": "50"
      },
      {
        "id": 2,
        "text": "12. 5"
      },
      {
        "id": 3,
        "text": "100"
      },
      {
        "id": 4,
        "text": "62.5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The neonatal mortality rate (<strong>NMR</strong>) of the given population is <strong>50 per 1000 live births</strong>.</p>\n<p>Neonatal mortality rate = No. of deaths of neonates &lt; 28 days within a year x 1000 / Total live births in the same year</p>\n<p>In this population, there were <strong>4000 live births</strong> (no. of total births - no. of stillbirths).</p>\n<p>NMR = (50+150) x 1000/4000 = 100/2 = 50</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the leading cause of neonatal mortality?",
    "choices": [
      {
        "id": 1,
        "text": "Prematurity"
      },
      {
        "id": 2,
        "text": "Birth Asphyxia"
      },
      {
        "id": 3,
        "text": "Sepsis"
      },
      {
        "id": 4,
        "text": "Pneumonia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Prematurity\u00a0</strong>is the leading cause of neonatal mortality.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In children aged 1 month to 1 year, all of the following are common causes of mortality except:",
    "choices": [
      {
        "id": 1,
        "text": "Tetanus"
      },
      {
        "id": 2,
        "text": "Malnutrition"
      },
      {
        "id": 3,
        "text": "Diarrheal diseases"
      },
      {
        "id": 4,
        "text": "Acute respiratory infections"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Tetanus<strong>&nbsp;</strong>is not a common cause of mortality in children between the age of 1 month to 1 year (<strong>post-neonatal period</strong>).&nbsp;The main causes of post-neonatal deaths are <strong>diarrhea, respiratory infections,&nbsp;</strong>and<strong> malnutrition</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a given population, there were 5100 births during the year 2020. Of these, 100 babies were stillborn. Among the living children, the following deaths were recorded. Calculate the infant mortality rate for this population.",
    "choices": [
      {
        "id": 1,
        "text": "100 per 1000 live births"
      },
      {
        "id": 2,
        "text": "10 per 1000 live births"
      },
      {
        "id": 3,
        "text": "160 per 1000 live births"
      },
      {
        "id": 4,
        "text": "16 per 1000 live births"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The infant mortality rate (<strong>IMR</strong>) for this population is <strong>100</strong> <strong>/ 1000 live births</strong>.</p>\n<p>IMR = No. of deaths within 1st year of life over a period of time x 1000 / No. of live births in the same period</p>\n<p>In this population, there were <strong>5000 live births</strong> (5100 \u2013 100) and <strong>500 deaths</strong> within the <strong>1st year</strong> of life.</p>\n<p>Hence, IMR = 500 x 1000/5000 = 100 per 1000 live births</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true for a newborn stabilization unit?",
    "choices": [
      {
        "id": 1,
        "text": "It is located in the delivery room."
      },
      {
        "id": 2,
        "text": "It is for sick babies and LBW babies < 1800 g"
      },
      {
        "id": 3,
        "text": "It is present in all community health centres"
      },
      {
        "id": 4,
        "text": "All cases except major surgeries are managed here"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>newborn stabilization unit</strong> is present in all <strong>community health centers</strong>\u00a0(CHC).</p>\n<p>India accounts for 30% of neonatal deaths globally and 73.3% of these deaths occur in 1st week of life. To address this issue, the following facility-based newborn care services were introduced:</p>\n<table style=\"height: 237px; width: 428px;\">\n<tbody>\n<tr>\n<td style=\"width: 327.140625px;\">\u00a0</td>\n<td style=\"width: 10px;\"><strong>Newborn care corner</strong></td>\n<td style=\"width: 102px;\"><strong>Newborn stabilization unit</strong></td>\n<td style=\"width: 102px;\"><strong>Special newborn care units</strong></td>\n</tr>\n<tr>\n<td style=\"width: 327.140625px;\">Present in</td>\n<td style=\"width: 10px;\">Delivery room of all centers and hospitals</td>\n<td style=\"width: 102px;\">Within or close to the maternity ward, in CHCs and first referral units</td>\n<td style=\"width: 102px;\">District hospitals and facilities with &gt;3000 deliveries/ year</td>\n</tr>\n<tr>\n<td style=\"width: 327.140625px;\">Admits</td>\n<td style=\"width: 10px;\">Immediate care to all newborns</td>\n<td style=\"width: 102px;\">Sick and LBW &gt;1800 gms</td>\n<td style=\"width: 102px;\">Sick and LBW&lt; 1800 gms</td>\n</tr>\n<tr>\n<td style=\"width: 327.140625px;\">Service</td>\n<td style=\"width: 10px;\">Immediate resuscitation, early initiation of breastfeeding, identification, and referral of at-risk newborns</td>\n<td style=\"width: 102px;\">Hyperbilirubinemia, asphyxia, pneumonia, diarrhea, sepsis</td>\n<td style=\"width: 102px;\">All care except assisted ventilation and major surgery</td>\n</tr>\n<tr>\n<td style=\"width: 327.140625px;\">Training of health personnel appointed</td>\n<td style=\"width: 10px;\">2 days, under Navjat Shishu Suraksha Karyakram</td>\n<td style=\"width: 102px;\">11 days in IMNCI</td>\n<td style=\"width: 102px;\">4 days of training and two weeks of observership</td>\n</tr>\n<tr>\n<td style=\"width: 327.140625px;\">Staff</td>\n<td style=\"width: 10px;\">1 doctor, 1 nurse, 1 auxiliary midwife</td>\n<td style=\"width: 102px;\">1 doctor, 4 nurses</td>\n<td style=\"width: 102px;\">3-4 doctors and 10 nurses</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are a doctor at a child health clinic. You will consider all of the following children as at-risk infants except:",
    "choices": [
      {
        "id": 1,
        "text": "A 2-month-old baby with 3 older siblings"
      },
      {
        "id": 2,
        "text": "A 15-day-old baby with birth weight of 2.4 kgs"
      },
      {
        "id": 3,
        "text": "An 1-year-old girl with protein-energy malnutrition"
      },
      {
        "id": 4,
        "text": "An 8-month-old baby being raised by a working mother"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The 2-month-old baby with 3 older siblings has a birth order of 4. Infants with <strong>birth order</strong> of <strong>5 or more</strong> are considered <strong>at-risk infants</strong>.</p>\n<p>The following are considered at-risk infants:</p>\n<ul>\n<li>Birth weight <strong>&lt; 2.5 kgs</strong></li>\n<li>Twins\u00a0</li>\n<li>Birth order of 5 or more</li>\n<li>Artificial feeding</li>\n<li>Weight below 70% of the expected weight</li>\n<li>Failure to gain weight during 3 successive months</li>\n<li>Children with\u00a0protein-energy malnutrition<strong>\u00a0</strong>(<strong>PEM</strong>), diarrhea</li>\n<li><strong>Working mother</strong> or single parent</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A researcher is calculating the child survival indices for different populations. Which of the following should he use for calculating the same?",
    "choices": [
      {
        "id": 1,
        "text": "Maternal mortality rate"
      },
      {
        "id": 2,
        "text": "Infant mortality rate"
      },
      {
        "id": 3,
        "text": "Perinatal mortality rate"
      },
      {
        "id": 4,
        "text": "Under-5 mortality rate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The<strong> under-5 mortality rate&nbsp;</strong>is used in the calculation of the <strong>child survival index</strong>. It is calculated as&nbsp;(1000 &ndash; Under-5 mortality rate)/10.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the false statement about the following tool:",
    "choices": [
      {
        "id": 1,
        "text": "Malnutrition can be detected even before signs and symptoms appear"
      },
      {
        "id": 2,
        "text": "It provides an objective basis for policy making on child healthcare"
      },
      {
        "id": 3,
        "text": "It can be used to teach the importance of adequate feeding"
      },
      {
        "id": 4,
        "text": "It can be used to indicate proof of government aid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows a&nbsp;<strong>growth chart.</strong>&nbsp;It is not used as proof of government aid.</p>\n<p>The uses of growth charts are as follows:</p>\n<ul>\n<li>Growth monitoring and diagnosis - can detect malnutrition before clinical features appear</li>\n<li>Educational tool - to teach parents about the importance of adequate feeding.</li>\n<li>Objective basis for planning and&nbsp;<strong>policy-making&nbsp;</strong>on child healthcares</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4224c7ff52b9496bae1061976ff9235b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A juvenile delinquent was sentenced by the court to be placed in a center under the care of a doctor and psychiatrist. Which of the following fulfills this requirement?",
    "choices": [
      {
        "id": 1,
        "text": "Borstal"
      },
      {
        "id": 2,
        "text": "Foster home"
      },
      {
        "id": 3,
        "text": "Remand home"
      },
      {
        "id": 4,
        "text": "Shelter home"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A <strong>remand home</strong> is an establishment where children are placed under the care of a <strong>doctor</strong>, <strong>psychiatrist</strong>&nbsp;and other trained personnel.</p>\n<p>An <strong>orphanage</strong>&nbsp;or <strong>shelter home</strong> is an institution where children who have <strong>no home or parents</strong> or for some reason can&rsquo;t be cared for are placed.</p>\n<p><strong>Foster homes</strong> are arrangements where a <strong>family</strong> or a <strong>couple</strong> takes care of a child on a <strong>temporary basis</strong>.</p>\n<p><strong>Borstal</strong> is a place that falls between a certified institution and a prison. It is where boys <strong>&gt; 16 years</strong> who have <strong>misbehaved</strong> or are too difficult to handle are sent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The police authorities rescued a girl from being trafficked for sexual exploitation. She is identified to be a refugee. As a part of the Ujjawala scheme, which of the following benefits will she not receive?",
    "choices": [
      {
        "id": 1,
        "text": "Rehabilitation"
      },
      {
        "id": 2,
        "text": "Re-integration"
      },
      {
        "id": 3,
        "text": "Remuneration"
      },
      {
        "id": 4,
        "text": "Repatriation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The girl will <strong>not</strong> receive remuneration (monetary compensation) under the Ujjawala scheme.</p>\n<p>The <strong>Ujjawala scheme</strong> was launched to <strong>combat women and child trafficking</strong> in India.&nbsp;The components of the scheme include:</p>\n<ul>\n<li><strong>Prevention</strong> of <strong>trafficking</strong> by awareness, vigilance, education</li>\n<li><strong>Rescue</strong> of victims from the place of exploitation</li>\n<li><strong>Rehabilitation</strong> of victims</li>\n<li><strong>Re-integration</strong> of victims into their family and society</li>\n<li><strong>Repatriation</strong> of cross-border victims to their place of origin</li>\n</ul>\n<p>Some other legislations associated with children in India are:</p>\n<ul>\n<li>The Right of Children to Free and Compulsory Education Act, 2009</li>\n<li>Juvenile Justice (Care and Protection of Children) Act, 2000</li>\n<li>Child Labour (Prohibition and Regulation) Act, 1986 (amended in 2006 and 2016)</li>\n<li>Protection of Children from Sexual Offences (POCSO), 2012 under the&nbsp;National Commission for Protection of Child Rights (NCPCR)</li>\n<li>Prohibition of Child Marriage Act, 2006</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old girl was brought by her parents who tell you that she fell down while playing. On examination, bruises and ecchymoses of varying ages are noted all over the body. An x-ray showed a spiral fracture of the right femur. Which of the following programs can provide support services to this child and prevent further such incidents?",
    "choices": [
      {
        "id": 1,
        "text": "Ujjawala scheme"
      },
      {
        "id": 2,
        "text": "INSPIRE strategy"
      },
      {
        "id": 3,
        "text": "SABLA scheme"
      },
      {
        "id": 4,
        "text": "POCSO act"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario points towards<strong> child abuse</strong>. The&nbsp;<strong>INSPIRE </strong>strategy was introduced to&nbsp;<strong>eliminate</strong>&nbsp;such<strong>&nbsp;</strong><strong>violence against children</strong>&nbsp;and also provide <strong>support</strong> <strong>services</strong>.</p>\n<p>It refers to a set of 7 evidence-based strategies&nbsp;to eliminate violence against children:</p>\n<table>\n<tbody>\n<tr>\n<td>&nbsp;</td>\n<td style=\"text-align: center;\"><strong>Strategies</strong></td>\n<td style=\"text-align: center;\"><strong>Approach</strong></td>\n</tr>\n<tr>\n<td>I &nbsp;</td>\n<td>Implementation and enforcement of laws</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Banning violent punishment of children and criminalizing sexual abuse</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Preventing alcohol misuse and limiting youth access to weapons</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>N</td>\n<td>Norms and values</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Changing perceptions about harmful gender and social norms</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>S</td>\n<td>Safe environments</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Reducing the spread of violence&nbsp;</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>P</td>\n<td>Parent and caregiver support</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Delivered through home visits and in groups in community settings&nbsp;</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>I</td>\n<td>Income and economic strengthening</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Cash transfers&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Providing small loans&nbsp;</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>R</td>\n<td>Response and support services</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Counseling and therapy</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Treatment programs for juvenile offenders&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Foster care interventions</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td>E</td>\n<td>Education and life skills</td>\n<td>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Increasing enrolment in schools&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Establishing safe school environments</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Improving sexual education for children and teaching self-defense strategies &nbsp;</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As a PHC medical officer,  which of the following groups would you target as a part of Kishori Shakti Yojana?",
    "choices": [
      {
        "id": 1,
        "text": "Girls aged 9-11 years"
      },
      {
        "id": 2,
        "text": "Adolescent boys and girls"
      },
      {
        "id": 3,
        "text": "Girls aged 3-6 years"
      },
      {
        "id": 4,
        "text": "Adolescent girls"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The&nbsp;Kishori Shakti Yojana (<strong>KSY</strong>) program is aimed at<strong>&nbsp;adolescent girls </strong>(<strong>11-18 years</strong>).&nbsp;</p>\n<p>This program is a&nbsp;<strong>component</strong>&nbsp;of the Integrated Child Development Services (<strong>ICDS</strong>) scheme and is&nbsp;a redesign of the already existing Adolescent Girls (AG) scheme.</p>\n<p>The objectives of KSY are:</p>\n<ul>\n<li>To improve the <strong>nutrition</strong>, <strong>health</strong>, and development status&nbsp;</li>\n<li>To promote <strong>awareness</strong> on health, hygiene, nutrition, and family care</li>\n<li>To teach<strong> life skills</strong> and encourage school attendance</li>\n<li>To help understand their social environment</li>\n<li>Aspects aimed at <strong>empowerment</strong> and enhanced&nbsp;self-perception</li>\n<li>To help them take initiatives to become <strong>productive</strong> members of society</li>\n</ul>\n<p>It also fosters convergence with other sectoral programs, addressing the interrelated needs of adolescent girls and women.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The school health programs are managed by which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Primary health center"
      },
      {
        "id": 2,
        "text": "District hospital"
      },
      {
        "id": 3,
        "text": "Sub-centre"
      },
      {
        "id": 4,
        "text": "Sub-divisional hospital"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>school health programs</strong> are managed by the <strong>primary health center</strong> (PHC).</p>\n<p>The <strong>School Health Committee</strong> (1961) in India recommended that the school health services should be a part of the general health services administered through PHCs.&nbsp;Formation of school health committees at the village, block, district, state, and national levels was recommended. The National School Health Council was created as an advisory and coordinating body.</p>\n<p>PHCs provide the following school health services:</p>\n<ul>\n<li><strong>Screening</strong> and general assessments for -\n<ul>\n<li>Anemia/nutritional status</li>\n<li>Visual acuity and hearing problems</li>\n<li>Dental check-up</li>\n<li>Physical disabilities</li>\n<li>Learning disorders and behavior problems</li>\n</ul>\n</li>\n<li>Basic medicines for <strong>common ailments</strong></li>\n<li><strong>Immunization</strong>&nbsp;</li>\n<li>Micronutrient management&nbsp;(vitamin A, iron, and folic acid)</li>\n<li>Deworming&nbsp;</li>\n<li>Mid-day meal</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 68-year-old man visits your outpatient clinic for a routine follow-up. Which of the following protocols would you use to assess his health literacy?",
    "choices": [
      {
        "id": 1,
        "text": "GATHER"
      },
      {
        "id": 2,
        "text": "SPEAK"
      },
      {
        "id": 3,
        "text": "SPIKES"
      },
      {
        "id": 4,
        "text": "S-BAR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> SPEAK&nbsp;</strong>protocol is used to assess <strong>health literacy&nbsp;</strong>in the <strong>geriatric population</strong> in a clinical setting.</p>\n<p>Health literacy<strong>&nbsp;</strong>is defined as the degree to which individuals have the capacity to obtain, process, and <strong>understand</strong> basic <strong>health information</strong> needed to make appropriate <strong>health decisions</strong>. The SPEAK protocol provides a simple framework that healthcare providers can use to assess literacy. SPEAK stands for:</p>\n<ul>\n<li>S - Speech</li>\n<li>P - Perception</li>\n<li>E - Education</li>\n<li>A - Access</li>\n<li>K - Knowledge</li>\n</ul>\n<p>Option A: The&nbsp;<strong>GATHER&nbsp;</strong>approach is mainly used for <strong>counseling </strong>(usually, family planning and reproductive counseling)<strong>&nbsp;</strong>to help people make decisions about health. It stands for:</p>\n<ul>\n<li>G &ndash; Greet</li>\n<li>A &ndash; Ask</li>\n<li>T &ndash; Tell&nbsp;</li>\n<li>H &ndash; Help&nbsp;</li>\n<li>E &ndash; Explain&nbsp;</li>\n<li>R &ndash; Return&nbsp;</li>\n</ul>\n<p>Option C: The&nbsp;<strong>SPIKES</strong>&nbsp;protocol is used to convey&nbsp;distressing information&nbsp;and <strong>break bad news</strong> in an organized manner to patients and families. It stands for:</p>\n<ul>\n<li>S - Setting</li>\n<li>P - Perception</li>\n<li>I - Invitation or information</li>\n<li>K - Knowledge</li>\n<li>E - Empathy</li>\n<li>S - Summarizing or strategizing.</li>\n</ul>\n<p>Option D: The&nbsp;<strong>S-BAR</strong>&nbsp;technique is used for prompt and appropriate <strong>communication</strong>&nbsp;among health care workers&nbsp;in hospital settings. It stands for:</p>\n<ul>\n<li>S - Situation</li>\n<li>B - Background</li>\n<li>A - Assessment</li>\n<li>R - Recommendation</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following comes under the Rashtriya Varishth Jan Swasthya Yojana?",
    "choices": [
      {
        "id": 1,
        "text": "Domiciliary visits to homes of elderly in the community by ANMs or male HCWs"
      },
      {
        "id": 2,
        "text": "Rehabilitation units with physiotherapy at CHCs"
      },
      {
        "id": 3,
        "text": "Super-specialty geriatric departments for training, guidelines and referral"
      },
      {
        "id": 4,
        "text": "Weekly geriatric clinics arranged at PHCs by medical officer"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The establishment of <strong>super-specialty</strong> <strong>geriatric</strong> <strong>departments</strong> for training, guidelines, and referral comes under the Rashtriya Varishth Jan Swasthya Yojna (<strong>RVJSY</strong>). It refers to the tertiary component of the&nbsp;National Programme for Healthcare of the Elderly&nbsp;(NPHCE).</p>\n<p>The <strong>NPHCE</strong>&nbsp;was established for geriatric care and includes provisions at primary, secondary, and tertiary levels.</p>\n<table style=\"height: 169px; width: 510px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 144.453px; height: 18px; text-align: center;\">Centers</td>\n<td style=\"width: 340.547px; height: 18px; text-align: center;\">&nbsp;Services according to NPHCE</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 144.453px; height: 18px;\"><strong>PHCs </strong>(primary)</td>\n<td style=\"width: 340.547px; height: 18px;\">\n<ul>\n<li>Weekly&nbsp;<strong>geriatric</strong> <strong>clinics</strong>&nbsp;at PHC</li>\n<li>Treatment of minor ailments</li>\n<li><strong>Referral</strong> services to higher centers</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 144.453px; height: 18px;\"><strong>Sub-centres </strong>(primary)</td>\n<td style=\"width: 340.547px; height: 18px;\">\n<ul>\n<li>ANMs/ male&nbsp;health workers make <strong>domiciliary visits</strong> to the elderly</li>\n<li>Arrange&nbsp;supportive devices&nbsp;for the disabled</li>\n<li>Treatment of minor ailments</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 144.453px; height: 18px;\"><strong>CHCs </strong>(secondary)</td>\n<td style=\"width: 340.547px; height: 18px;\">\n<ul>\n<li>Dedicated <strong>geriatric</strong> <strong>clinics</strong> twice weekly</li>\n<li>Rehabilitation unit with trained<strong>&nbsp;physiotherapists</strong></li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>The&nbsp;<strong>tertiary</strong> <strong>component</strong> of the program has been&nbsp;<strong>renamed</strong>&nbsp;as&nbsp;<strong>RVJSY&nbsp;</strong>and&nbsp;has the following provisions:</p>\n<ul>\n<li>Geriatrics departments at 20 super specialty institutions-\n<ul>\n<li><strong>30-bedded</strong> inpatient facility and <strong>referral</strong> treatment</li>\n<li>Research and manpower&nbsp;development,&nbsp;&nbsp;</li>\n<li>Development of&nbsp;training,&nbsp;IEC material, and&nbsp;guidelines</li>\n</ul>\n</li>\n<li>Geriatric units at district hospitals (tertiary) -\n<ul>\n<li><strong>10</strong>&nbsp;<strong>bedded</strong> geriatric ward</li>\n<li>Dedicated geriatric <strong>OPD</strong>&nbsp;</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '29 Preventive Obstetrics, Pediatrics And Geriatrics';
        let hierarchy = ["Marrow", "qBank", "Community Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>