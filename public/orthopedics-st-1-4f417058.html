<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthopedics St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Best diagnostic test for unilateral stress fracture is _______",
    "choices": [
      {
        "id": 1,
        "text": "CT"
      },
      {
        "id": 2,
        "text": "Bone scan"
      },
      {
        "id": 3,
        "text": "X-ray"
      },
      {
        "id": 4,
        "text": "MRI"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>The best diagnostic test </strong>for<strong>&nbsp;a unilateral </strong>stress fracture is<strong> MRI.</strong></p>\n<p>For stress fracture, Best diagnostic test for,</p>\n<ul>\n<li>Unilateral stress fracture&ndash; MRI</li>\n<li>Bilateral stress fracture- Bone scan</li>\n</ul>\n<p>If unilateral or bilateral is not mentioned then <strong>MRI</strong> is the preferred choice.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "For tuberculosis of the spine the radiological investigation of choice is",
    "choices": [
      {
        "id": 1,
        "text": "Bone scan"
      },
      {
        "id": 2,
        "text": "CT"
      },
      {
        "id": 3,
        "text": "MRI"
      },
      {
        "id": 4,
        "text": "X-rays"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The radiological investigation of choice for TB spine is <strong>MRI.</strong></p>\n<p>MRI can also be reliably used to differentiate between tuberculous and pyogenic vertebral osteomyelitis.</p>\n<p>Patients with tuberculous vertebral osteomyelitis have a significantly higher incidence of a well-defined paraspinal abnormal signal, thin and smooth walled abscess cavities, particularly at paraspinal or intraosseous locations, sub-ligamentous spread to three or more vertebral levels and involvement of multiple vertebral bodies.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following statements are true about the given image except",
    "choices": [
      {
        "id": 1,
        "text": "Pain on attempt of hyperextension of fingers"
      },
      {
        "id": 2,
        "text": "Tenderness over involved sheath"
      },
      {
        "id": 3,
        "text": "Involvement of ulnar bursa"
      },
      {
        "id": 4,
        "text": "Abscess of midpalmar space"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image classically shows <strong>Infectious Tenosynovitis</strong>.</p>\n<p><strong>Tenosynovitis</strong></p>\n<ul>\n<li>Infection of the <strong>flexor tendon sheath</strong>.</li>\n<li>Puncture wounds on flexor creases</li>\n<li>May involve <strong>ulnar</strong> and radial bursa</li>\n<li>Kanavel&rsquo;s sign\n<ul>\n<li>4 cardinal signs are</li>\n<li><strong>Tenderness </strong>over involved sheath</li>\n<li><strong>Finger in flexion</strong> deformity</li>\n<li><strong>Pain on attempt of hyperextension</strong> of fingers</li>\n<li><strong>Swelling</strong> of involved part</li>\n</ul>\n</li>\n<li>Note:\n<div id=\"topicText\">\n<p>Extensor and flexor tendon sheaths have two surfaces: an inner visceral layer (visceral paratenon) adherent to the tendon and an outer parietal layer (parietal paratenon) abutting adjacent structures such as adjacent muscles and retinacular structures. Normally, the visceral and parietal layers abut one another. In the setting of tenosynovitis, the potential space between these two layers may fill with inflammatory or purulent fluid.</p>\n<p>The visceral and parietal layers of most tendons coalesce at the proximal and distal ends to produce a closed tendon sheath compartment. The thumb flexor sheath is contiguous with the radial bursa, and the small finger flexor sheath is contiguous with the ulnar bursa; these two bursae extend proximally into the carpal tunnel. The radial and ulnar bursae communicate at the wrist in 50 to 80 percent of patients . Therefore, <strong>infection in the thumb tendon sheath can spread to the small finger sheath via the ulnar bursa (or vice versa), creating a \"horseshoe abscess</strong>.\"</p>\n<a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a><a target=\"_blank\"></a></div>\n<div id=\"subscribeMessage\">&nbsp;</div>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6498a2a86d8044679ad50453a138dbc3.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A man after having a binge of alcohol on Saturday night complains of wrist drop the following morning. What type of injury is suspected ?",
    "choices": [
      {
        "id": 1,
        "text": "Neuropraxia"
      },
      {
        "id": 2,
        "text": "Neurotmesis"
      },
      {
        "id": 3,
        "text": "Axonotmesis"
      },
      {
        "id": 4,
        "text": "Complete section"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Neuropraxia</strong> is seen typically in</p>\n<ul>\n<li>Pressure paralysis in states of drunkenness (&lsquo;<strong>Saturday night palsy</strong>&rsquo;)</li>\n<li>Crutch palsy</li>\n<li>Milder types of tourniquet palsy</li>\n<li>It is due to mechanical pressure causing segmental demyelination.</li>\n<li>It is a <strong>reversible physiological nerve conduction block</strong> in which there is loss of some types of sensation and muscle power followed by spontaneous <strong>recovery after a few days or weeks</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Wartenberg sign in ulnar nerve injury indicates the paralysis of which of the following muscles",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal interossei"
      },
      {
        "id": 2,
        "text": "Lumbricals"
      },
      {
        "id": 3,
        "text": "Palmar interossei"
      },
      {
        "id": 4,
        "text": "Adductor pollicis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Wartenberg sign</strong> refers to the <strong>abducted position of little finger</strong>. It is due to weakness of <strong>palmar interossei.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ddea375c1d75416d8129c864722ea270x936x1262.JPEG"
    ]
  },
  {
    "text": "A 40-year-old hypothyroid female complains of heaviness and tingling in the left index and middle finger, the pain often increases in the night and is relieved on moving the hand for a while. Which of the following is not a clinical test for the above condition?",
    "choices": [
      {
        "id": 1,
        "text": "Phalen\u2019s test"
      },
      {
        "id": 2,
        "text": "Tourniquet\u2019s test"
      },
      {
        "id": 3,
        "text": "Finkelstein\u2019s test"
      },
      {
        "id": 4,
        "text": "Tinel\u2019s sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario suggests that the female is suffering from carpal tunnel syndrome.</p>\n<p><strong>Finkelstein test</strong> is done for <strong>de Quervain&rsquo;s synovitis</strong>.</p>\n<ul>\n<li>Hold the patient&rsquo;s hand with his thumb tucked firmly unto the palm.</li>\n<li>Then turn the wrist into full ulnar deviation.</li>\n<li>In a positive test, this will elicit sharp pain in the &nbsp;effected sheath.</li>\n</ul>\n<p>Phalen&rsquo;s test, Tinel&rsquo;s sign, Tourniquet&rsquo;s test are done for Carpal tunnel syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The primary pathology in athletic pubalgia is",
    "choices": [
      {
        "id": 1,
        "text": "Abdominal muscle strain"
      },
      {
        "id": 2,
        "text": "Hamstring strain"
      },
      {
        "id": 3,
        "text": "Rectus femoris strain"
      },
      {
        "id": 4,
        "text": "Gluteus medius strain"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Athletic pubalgia</strong> refers to chronic pain on the <strong>inguinal or pubic region</strong> on <strong>exertion.</strong></p>\n<p>The primary pathology is in the insertion of <strong>rectus abdominis</strong>&nbsp;muscle on the pubis.</p>\n<ul>\n<li>Its also called as <strong>Sportsman&rsquo;s hernia</strong> or <strong>Gilmore&rsquo;s groin</strong>.</li>\n<li>Management is conservative.</li>\n<li><strong>Nesovic&rsquo;s </strong>operation is reserved for resistant cases.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Commonest ligament injured in ankle injury is",
    "choices": [
      {
        "id": 1,
        "text": "Anterior talofibular ligament"
      },
      {
        "id": 2,
        "text": "Calcaneofibular ligament"
      },
      {
        "id": 3,
        "text": "Posterior talofibular ligament"
      },
      {
        "id": 4,
        "text": "Spring ligament"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>Lateral ligament complex</strong> especially the <strong>anterior talofibular ligament</strong> is most commonly involved on ankle injuries.</li>\n<li>The second most common ligament to be injured is <strong>Calcaneofibular ligament.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3ff5c6aef7b54d5ab2db0cd9f6bf31a6x379x400.PNG"
    ]
  },
  {
    "text": "Among the marked structures all are components of O\u2019Donoghue triad except",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The marked structure B represents <strong>\u2018Posterior cruciate ligament\u2019.</strong></p>\n<p>It is not a part of O\u2019Donoghue triad.</p>\n<p><strong>O\u2019Donoghue triad involves:</strong></p>\n<ul>\n<li>Medial collateral ligament</li>\n<li>Medial meniscus</li>\n<li>Anterior cruciate ligament</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e0320d17400449bbab6b34593ba1f735.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d422ac5de52d4c8589928bf809dc6276x1280x1392.JPEG"
    ]
  },
  {
    "text": "A child is brought to the casualty with pain and swelling of the forearm. Her mother gives a history of a fall while running in the playground. Radiograph image is given below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Monteggia fracture"
      },
      {
        "id": 2,
        "text": "Galeazzi fracture"
      },
      {
        "id": 3,
        "text": "Barton fracture"
      },
      {
        "id": 4,
        "text": "Night stick fracture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given X-ray shows a <strong>fracture </strong>in the<strong>&nbsp;proximal third </strong>of the<strong> ulna</strong> and there is a <strong>dislocation </strong>of the<strong> proximal radioulnar joint</strong>, which points to a diagnosis of&nbsp;<strong>Monteggia fracture-dislocation</strong>.&nbsp;</p>\n<p>Dislocation of the head of the radius can be detected using <strong>McLaughlin&rsquo;s line (radiocapitellar line)</strong>. A line drawn along the center of the shaft of the radius will cut the capitellum of the humerus in the center irrespective of the position of the elbow. In Monteggia fracture this relationship is disturbed.&nbsp;</p>\n<p>The mechanism of injury in these fractures is usually a&nbsp;<strong>fall </strong>on the<strong> outstretched hand</strong>. Clinical features include:</p>\n<ul>\n<li><strong>Deformity</strong> in the proximal forearm - due to ulnar fracture. The dislocation of the head of the radius may be masked by the swelling</li>\n<li><strong>Pain</strong> and <strong>tenderness</strong> on the lateral side of the elbow - due to proximal radioulnar dislocation</li>\n</ul>\n<p>Monteggia fracture is <strong>treated surgically </strong>(fracture of necessity). The ulnar fracture is reduced and bone restored to full length. It is then fixed with a plate and screws. The radial head usually reduces once the ulna is fixed.</p>\n<p>The below image shows radiocapitellar line (McLaughlin&rsquo;s line) in a normal x-ray.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9abfbadd54e74b46ade02686207190a3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c2243b564214ef8aaa99e836bbd79a1x314x323.JPEG"
    ]
  },
  {
    "text": "Fracture shown in the radiograph is:",
    "choices": [
      {
        "id": 1,
        "text": "Pott\u2019s fracture"
      },
      {
        "id": 2,
        "text": "Massonaise\u2019s fracture"
      },
      {
        "id": 3,
        "text": "Pilon fracture"
      },
      {
        "id": 4,
        "text": "Aviator\u2019s fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above radiograph shows <strong>Aviator&rsquo;s fracture.&nbsp;</strong></p>\n<p>An&nbsp;aviator fracture&nbsp;is a coronal-plane&nbsp;fracture&nbsp;of the<strong> neck of the talus</strong> resulting from <strong>forced dorsiflexion of ankle</strong>.<wbr />&nbsp;</p>\n<p>It is the <strong>second most common talar&nbsp;<em>fracture</em></strong>, after talar dome&nbsp;fractures.<wbr />&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6b3b37936e4649ab919570fdc3715578.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The given X ray of left knee joint suggests",
    "choices": [
      {
        "id": 1,
        "text": "Simple bone cyst"
      },
      {
        "id": 2,
        "text": "Aneurysmal bone cyst"
      },
      {
        "id": 3,
        "text": "Osteosarcoma"
      },
      {
        "id": 4,
        "text": "Giant cell tumor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given X ray of left knee joint shows immature skeleton with expansile <strong>multi-cystic lytic lesions</strong> in the metaphysis of tibia. It is the classical presentation of a <strong>aneurysmal bone cyst </strong>(ABC).\u00a0</p>\n<p>Aneurysmal bone cysts (ABCs) are <strong>benign, expansile lesions</strong> of bone composed of <strong>blood-filled cystic spaces</strong>. They predominantly affect <strong>children and teenagers</strong> with an <strong>equal sex distribution</strong>. ABCs are most commonly seen in the <strong>metaphyses of long bones</strong>, particularly the <strong>femur, tibia and humerus</strong>. In the spine , they usually affect the posterior elements. Patients typically present with pain and swelling. When affecting the spine, presentation can be with nerve root impingement and neurological impairment.\u00a0</p>\n<p>ABCs appear as a subperiosteal,<strong> poorly defined osteolytic lesion</strong>, and <strong>progressively elevating</strong> and <strong>eroding </strong>the cortex. MRI shows typically <strong>cysts with multiple intralesional septations </strong>and <strong>fluid levels</strong>.\u00a0Histologically, ABCs are composed of blood-filled, cystic spaces separated by fibrous septae which may comprise woven bone in chronic lesions. An ABC can appear as a solid lesion, which resembles a giant-cell lesion but in immature skeleton.</p>\n<p>ABC-like areas can be seen in other benign tumours and occasionally malignant lesions where there has been haemorrhage within the tumour (secondary ABC). <strong>Curettage of the lesion</strong> at the time of biopsy ,debriding the cystic cavity wall, is often effective though recurrence can occur in up to 20% of cases. <strong>Radiation</strong> is effective in stimulating cyst calcification but <strong>risk of secondary tumors</strong> due to radiation and <strong>growth arrest</strong> due to epiphyseal damage in present.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3662bd6f574048ebb8d45434da3da93c.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/06cb56d372414fd5a0731626abf936ecx262x205.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf495dccdc124f50a6d22d4b59737241x720x987.JPEG",
      "https://cdn1.dailyrounds.org/uploads/ff611094bd514ee6b8a13ea5eaad7f3b.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/daeaa5479a0f429cbaa6cf8c08f3e674x1280x2155.JPEG",
      "https://cdn1.dailyrounds.org/uploads/6a305aafbdbe4dabaa1eb56cab66a55d.JPEG"
    ]
  },
  {
    "text": "A 14-year-old boy presents with painful swelling over the left shoulder. Radiograph of the shoulder showed an osteolytic area with stippled calcification over the proximal humeral epiphysis. Biopsy of the lesion revealed an immature fibrous matrix with scattered giant cells. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Giant cell tumor"
      },
      {
        "id": 2,
        "text": "Chondroblastoma"
      },
      {
        "id": 3,
        "text": "Chondromyxoid fibroma"
      },
      {
        "id": 4,
        "text": "Osteosarcoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and the histopathological report suggests the diagnosis of <strong>chondroblastoma. </strong></p>\n<p><strong>Chondroblastoma / Codman&rsquo;s tumor</strong></p>\n<ul>\n<li>Well circumscribed lesion</li>\n<li><strong>Epiphysis</strong> of long bone</li>\n<li><strong>Chicken wire appearance</strong> due to calcification</li>\n<li><strong>Histopathology</strong>\n<ul>\n<li>Chondroid tissue composed of round cells (&lsquo;<strong>chondroblasts</strong>&rsquo;)</li>\n<li>Scattered multinucleated giant cells</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/a9975f6e1afd4c33a1fa10de946b484cx335x150.PNG"
    ]
  },
  {
    "text": "The term floating knee refers to",
    "choices": [
      {
        "id": 1,
        "text": "Damage to both ACL and PCL"
      },
      {
        "id": 2,
        "text": "Tear of both Medial collateral ligament and lateral collateral ligament"
      },
      {
        "id": 3,
        "text": "Femoral shaft fracture with proximal tibial metaphyseal fracture"
      },
      {
        "id": 4,
        "text": "Advanced TB of knee joint"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The combination of <strong>femoral shaft</strong> and <strong>tibial shaft fractures</strong> on the <strong>same side</strong>, produces a <strong>&lsquo;floating knee&rsquo;</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the following instrument",
    "choices": [
      {
        "id": 1,
        "text": "Periosteal elevator"
      },
      {
        "id": 2,
        "text": "Bone curette"
      },
      {
        "id": 3,
        "text": "Bone hook"
      },
      {
        "id": 4,
        "text": "Osteotome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image depicts a bone curette.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/bd1db62adcd9406bb82a79950976b3a2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5cebe8fa2ffd4aa5b9d8672bd41776f0x1280x691.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/729ef065b9d545879687d377609fee92x1280x691.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/948981ea1d0d4395a3dd65d4b45adccex1280x691.JPEG"
    ]
  },
  {
    "text": "K.L. Splint is used for",
    "choices": [
      {
        "id": 1,
        "text": "Fracture tibia"
      },
      {
        "id": 2,
        "text": "Plantar fasciitis"
      },
      {
        "id": 3,
        "text": "de Quervain\u2019s synovitis"
      },
      {
        "id": 4,
        "text": "Tennis elbow"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>K.L. splint</strong> is one of the treatment modalities of Plantar fasciitis.</p>\n<p><strong>Plantar fasciitis</strong></p>\n<p><strong>Painful</strong> inflammatory process of <strong>plantar fascia.</strong></p>\n<p>Incidental finding &ndash; <strong>Heel spur</strong>, bony calcification of the calcaneus heel bone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/961d7a9073d14e9aaf7cfaf8c6c60328x779x600.JPEG"
    ]
  },
  {
    "text": "The given image depicts",
    "choices": [
      {
        "id": 1,
        "text": "Austin moore prosthesis"
      },
      {
        "id": 2,
        "text": "Thompson\u2019s prosthesis"
      },
      {
        "id": 3,
        "text": "Bipolar prosthesis"
      },
      {
        "id": 4,
        "text": "Shoulder prosthesis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image shows a <strong>Thompson\u2019s prosthesis</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f699c2fbbcc64b50b91a277fc6d823ac.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/05f194eb297a41b58c6e96ecbc1a1f13x800x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/18c62ce4b6074f429819d932235fb7f6x1280x1402.JPEG"
    ]
  },
  {
    "text": "The term vertebroplasty refers to",
    "choices": [
      {
        "id": 1,
        "text": "Replacement of vertebral body only"
      },
      {
        "id": 2,
        "text": "Replacement of vertebral body along with Intervertebral disc"
      },
      {
        "id": 3,
        "text": "Fusion of adjacent vertebrae"
      },
      {
        "id": 4,
        "text": "Stabilization of vertebral compression fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Vertebroplasty is a treatment modality of <strong>Vertebral compression fractures.</strong></li>\n<li>It refers to the <strong>transpedicular</strong> injection of <strong>methacrylate</strong> or bone graft substitute paste in order <strong>to stop further</strong> <strong>deformity and control pain</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Corduroy or Jailhouse appearance is commonly seen in",
    "choices": [
      {
        "id": 1,
        "text": "Multiple myeloma"
      },
      {
        "id": 2,
        "text": "Chordoma"
      },
      {
        "id": 3,
        "text": "Eosinophilic granuloma"
      },
      {
        "id": 4,
        "text": "Hemangioma of bone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Corduroy</strong> or <strong>Jailhouse appearance</strong> is the radiographic finding in <strong>Hemangioma of a Spine</strong>.</li>\n<li>On CT scan &ndash; <strong>Polka dot pattern</strong> is seen on cross section.</li>\n<li>It is due to the thickened vertically aligned <strong>trabeculae.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/99706870535a4085b15be11d57fcf0c5x292x204.PNG",
      "https://cdn1.dailyrounds.org/uploads/b94466f8b84b4586bb7d53a98309cebbx283x180.PNG"
    ]
  },
  {
    "text": "Bankart lesion is usually seen at",
    "choices": [
      {
        "id": 1,
        "text": "Posterior surface of the humerus"
      },
      {
        "id": 2,
        "text": "Posterolateral surface of the humerus"
      },
      {
        "id": 3,
        "text": "Anteroinferior Part of the glenoid"
      },
      {
        "id": 4,
        "text": "Posteroinferior part of glenoid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Bankart lesion</strong> refers to <strong>detachment of labrum and capsule</strong> <strong>from anterior rim of glenoid</strong>.</p>\n<p>It is seen in <strong>recurrent subluxation or dislocation of shoulder joint.</strong></p>\n<p>&nbsp;</p>\n<p>The following X-ray shows Bankart lesion:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c5a361575b5747c9ae918f1eece89e7ax381x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a081de721b1433e80a61d592dc57e75x558x599.PNG"
    ]
  },
  {
    "text": "In CTEV Inversion of the foot occurs at:-",
    "choices": [
      {
        "id": 1,
        "text": "Tibiotalar joint"
      },
      {
        "id": 2,
        "text": "Talocalcaneal joint"
      },
      {
        "id": 3,
        "text": "Talonavicular joint"
      },
      {
        "id": 4,
        "text": "Calcaneocuboid joint"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Inversion and eversion </strong>occurs at <strong>Talocalcaneal or subtalar joint</strong>.</p>\n<p>In case of CTEV</p>\n<p align=\"left\"><span style=\"font-family: Arial, Helvetica, sans-serif; font-size: large;\">The four main components of clubfoot are:</span></p>\n<ol>\n<li><span style=\"font-family: Arial, Helvetica, sans-serif; font-size: large;\">hindfoot varus (calcaneus is too far medial)</span></li>\n<li><span style=\"font-family: Arial, Helvetica, sans-serif; font-size: large;\">equinus heel (fixed plantar flexion of the heel)</span></li>\n<li><span style=\"font-family: Arial, Helvetica, sans-serif; font-size: large;\">metatarsus adductus (adduction of the metatarsals with forefoot varus)</span></li>\n<li><span style=\"font-family: Arial, Helvetica, sans-serif; font-size: large;\">talonavicular subluxation</span></li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Transient synovitis of the hip is characterized by all except:",
    "choices": [
      {
        "id": 1,
        "text": "May be following URTI"
      },
      {
        "id": 2,
        "text": "Blood reports are usually normal"
      },
      {
        "id": 3,
        "text": "The attitude of hip is adduction and internal rotation"
      },
      {
        "id": 4,
        "text": "USG of the hip reveals widening of the joint space"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Attitude of hip</strong> in a case of transient synovitis of hip joint is <strong>flexion, abduction and external rotation</strong>.</p>\n<p><strong>Transient synovitis</strong> is also known as <strong>irritable hip or observation hip or coxitis serosa or coxalgia fugax.</strong></p>\n<ul>\n<li>It is <strong>non-specific, short-lived synovitis</strong>.</li>\n<li>Characteristically, symptoms last for 1&ndash;2 weeks and then subside spontaneously; hence the synonym &lsquo;transient synovitis&rsquo;.</li>\n</ul>\n<p>Etiology</p>\n<ul>\n<li>Etiology</li>\n<li>Trauma</li>\n<li>Allergy</li>\n</ul>\n<p>Clinical feature:</p>\n<ul>\n<li>Age group affected - <strong>3&ndash;8-year olds.</strong></li>\n<li><strong>Boys are affected twice as often as girls</strong></li>\n<li><strong>Painful limp</strong> - often intermittent and following activity</li>\n<li>It is the <strong>most common cause of an acute limp or hip pain in children</strong></li>\n<li><strong>Cardinal sign is restriction of all movements with pain at the extremes of the range in all directions.</strong></li>\n</ul>\n<p>Investigations:</p>\n<ul>\n<li>WBC count, erythrocyte sedimentation rate (ESR) and C-reactive protein concentration are usually within normal limits.</li>\n<li>X-rays - subtle widening of the medial joint space (1&ndash;2 mm)</li>\n</ul>\n<p>Treatment:</p>\n<ul>\n<li>Bed rest</li>\n<li>Reduced activity</li>\n<li>Observation</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "55 years old male patient having arthritic changes at small joints of hands (PIP, DIP &amp; CMC joint of the thumb). No changes at wrist and MCP joints. What is the most probable diagnosis:",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Osteoarthritis"
      },
      {
        "id": 3,
        "text": "Psoriatic arthritis"
      },
      {
        "id": 4,
        "text": "Pseudogout"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Osteoarthritis characteristically involves</strong>\n<ul>\n<li>Distal interphalangeal joint (<strong>Heberden&rsquo;s node</strong>)</li>\n<li>Proximal interphalangeal joint (<strong>Bouchard&rsquo;s node</strong>)</li>\n<li>1<sup>st</sup> carpometacarpal joint (base of thumb)</li>\n</ul>\n</li>\n<li>Osteoarthritis <strong>doesn&rsquo;t affect metacarpophalangeal joint and wrist joint.</strong></li>\n<li>Hence most probable diagnosis is osteoarthritis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All the osteochondritis are correctly matched except",
    "choices": [
      {
        "id": 1,
        "text": "Sever\u2019s : Calcaneum"
      },
      {
        "id": 2,
        "text": "Kienbock: Lunate"
      },
      {
        "id": 3,
        "text": "Perthe\u2019s : Femoral head"
      },
      {
        "id": 4,
        "text": "Osgood Schlatter: Lower pole patella"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Osgood Schlatter</strong> is <strong>osteochondritis of tibial tuberosity.</strong></p>\n<p><strong>Osteochondritis of lower pole of patella</strong> is known as <strong>Johanson-Larsens.</strong></p>\n<p></p>\n<table style=\"width: 324px;\">\n<tbody>\n<tr>\n<td style=\"width: 163px;\"><strong>Bone affected</strong></td>\n<td style=\"width: 156px;\"><strong>Name</strong></td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Calcaneum</td>\n<td style=\"width: 156px;\">Sever&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">2<sup>nd</sup> metatarsal head</td>\n<td style=\"width: 156px;\">Frieberg</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">5<sup>th</sup> metatarsal base</td>\n<td style=\"width: 156px;\">Islene</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Tibial tuberosity</td>\n<td style=\"width: 156px;\">Osgood Schlatter&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Tibia</td>\n<td style=\"width: 156px;\">Blounts</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Central bony nucleus of vertebrae</td>\n<td style=\"width: 156px;\">Calves</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Lower pole of patella</td>\n<td style=\"width: 156px;\">Johanson-Larsens</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Calcaneum</td>\n<td style=\"width: 156px;\">Haglund</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Scaphoid</td>\n<td style=\"width: 156px;\">Preiser&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Pisiform</td>\n<td style=\"width: 156px;\">Schmier&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Triquetrum</td>\n<td style=\"width: 156px;\">Witt&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Trapezoid</td>\n<td style=\"width: 156px;\">Agati</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Capitulum of elbow</td>\n<td style=\"width: 156px;\">Panner&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Phalanges</td>\n<td style=\"width: 156px;\">Fleischner Theimann</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Head of humerus</td>\n<td style=\"width: 156px;\">Haas</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Metacarpal head</td>\n<td style=\"width: 156px;\">Mouclaire&rsquo;s</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Osteochondritis with epiphyseal separation</td>\n<td style=\"width: 156px;\">Wegner</td>\n</tr>\n<tr>\n<td style=\"width: 163px;\">Tubular bones</td>\n<td style=\"width: 156px;\">Konig&rsquo;s</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cock up splint is used in:",
    "choices": [
      {
        "id": 1,
        "text": "Brachial Plexus injury"
      },
      {
        "id": 2,
        "text": "Radial Nerve Injury"
      },
      {
        "id": 3,
        "text": "Ulnar Nerve injury"
      },
      {
        "id": 4,
        "text": "Median nerve injury"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Cock up splint is used in the treatment of radial nerve injury.</p>\n<p>Wrist, thumb and finger extension is lost in radial nerve injury (wrist, thumb and finger drop).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/6f82e62e1ca141cf944f83558f35abd2x269x142.PNG",
      "https://cdn1.dailyrounds.org/uploads/dcfa46a23dcb41f6bfacbba4fa6ed9dax229x185.PNG"
    ]
  },
  {
    "text": "Maffucci syndrome is associated with",
    "choices": [
      {
        "id": 1,
        "text": "Enchondroma"
      },
      {
        "id": 2,
        "text": "Osteoma"
      },
      {
        "id": 3,
        "text": "Chondroblastoma"
      },
      {
        "id": 4,
        "text": "Ewing\u2019s Sarcoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Maffucci&rsquo;s disease</strong> is characterized by the development of</p>\n<ul>\n<li><strong>Multiple enchondromas</strong></li>\n<li><strong>Soft-tissue haemangiomas</strong> of the skin and viscera</li>\n</ul>\n<p>Both <strong>bony and soft tissue lesions</strong> are <strong>more prone for malignant transformation.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Avulsion of Extensor tendon give rise to",
    "choices": [
      {
        "id": 1,
        "text": "Swan Neck Deformity"
      },
      {
        "id": 2,
        "text": "Trigger Finger"
      },
      {
        "id": 3,
        "text": "Mallet finger"
      },
      {
        "id": 4,
        "text": "Boutonniere\u2019s Deformity"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Mallet finger</strong> also known as baseball finger refers to <strong>avulsion of extensor tendon of distal interphalangeal joint from its insertion at the base of distal phalanx.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/eaf482cd44c744b78da81d5aabb00b08x305x241.PNG",
      "https://cdn1.dailyrounds.org/uploads/f8fc17d9107b4bbe975657b5c23f53e3x326x216.PNG",
      "https://cdn1.dailyrounds.org/uploads/3cba5889a15b4569bf11211ca2c8e3d3x280x207.PNG",
      "https://cdn1.dailyrounds.org/uploads/657fdad2cade4363ad96ee0a126969c3x280x238.PNG"
    ]
  },
  {
    "text": "All are correct match for entrapment neuropathies except",
    "choices": [
      {
        "id": 1,
        "text": "Carpal tunnel: Median Nerve"
      },
      {
        "id": 2,
        "text": "Tarsal tunnel: Ant. Tibial Nerve"
      },
      {
        "id": 3,
        "text": "Cubital tunnel: Ulnar nerve"
      },
      {
        "id": 4,
        "text": "Meralgia paresthetica: Lateral Cutaneous nerve of thigh"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tarsal tunnel syndrome</strong> refers to <strong>compression of the posterior tibial nerve behind and below the medial malleolus.</strong></p>\n<p></p>\n<table>\n<tbody>\n<tr>\n<td><strong>Entrapment syndrome</strong></td>\n<td><strong>Nerve involved</strong></td>\n</tr>\n<tr>\n<td>Carpal tunnel syndrome</td>\n<td>Median nerve</td>\n</tr>\n<tr>\n<td>Pronator syndrome</td>\n<td>Median nerve</td>\n</tr>\n<tr>\n<td>Cubital tunnel syndrome</td>\n<td>Ulnar nerve</td>\n</tr>\n<tr>\n<td>Guyon&rsquo;s canal syndrome</td>\n<td>Ulnar nerve</td>\n</tr>\n<tr>\n<td>Thoracic outlet syndrome</td>\n<td>Lower trunk of brachial plexus</td>\n</tr>\n<tr>\n<td>Piriformis syndrome</td>\n<td>Sciatic nerve</td>\n</tr>\n<tr>\n<td>Cheralgia paresthetica</td>\n<td>Superficial radial nerve</td>\n</tr>\n<tr>\n<td>Meralgia paresthetica</td>\n<td>Lateral cutaneous nerve of thigh</td>\n</tr>\n<tr>\n<td>Tarsal tunnel syndrome</td>\n<td>Posterior tibial nerve</td>\n</tr>\n<tr>\n<td>Morton&rsquo;s metatarsalgia</td>\n<td>Interdigital nerve compression</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Aeroplane splint is used in the management of which of the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "Median nerve palsy"
      },
      {
        "id": 2,
        "text": "Erb's palsy"
      },
      {
        "id": 3,
        "text": "Radial nerve injury"
      },
      {
        "id": 4,
        "text": "Ulnar nerve injury"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Aeroplane splint</strong> is used in the management of <strong>Erb&rsquo;s palsy.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/fe5289dbfd1d42c1a1f121b69c717197x202x145.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3afe5c90c92440eda2a81476c6aeb2acx1280x1622.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ce1657be1ffe482f8ffe96eb0d4a1c6ax1279x1075.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e010366959d04e8094bde3fb19dc9ae0x1280x1246.JPEG"
    ]
  },
  {
    "text": "Which of the following is an avulsion fracture",
    "choices": [
      {
        "id": 1,
        "text": "Jefferson fracture"
      },
      {
        "id": 2,
        "text": "Hangman\u2019s fracture"
      },
      {
        "id": 3,
        "text": "Undertaker\u2019s fracture"
      },
      {
        "id": 4,
        "text": "Clay-Shoveller\u2019s fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Clay-Shoveller&rsquo;s fracture</strong> refers to <strong>avulsion fracture of spinous process of 7<sup>th</sup> cervical vertebra</strong>.</p>\n<ul>\n<li>Option a: <strong>Jefferson fracture</strong> is <strong>burst fracture of ring of Atlas (C1 vertebra)</strong>.</li>\n<li>Option b: <strong>Hangman&rsquo;s fracture</strong> - bilateral fractures of the <strong>pars interarticularis of C2 and the C2/3 disc is torn.</strong></li>\n<li>Option c: Undertaker&rsquo;s fracture refers to tearing of C6-7 disc space causing subluxation.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Denis classification to assess spine stability divides spinal cord into how many parts",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "5"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Denis 3 column classification to assess spinal stability includes:</p>\n<ul>\n<li><strong>The posterior osseoligamentous complex (or posterior column)</strong> consisting of\n<ul>\n<li>Pedicles</li>\n<li>Facet joints</li>\n<li>Posterior bony arch</li>\n<li>Interspinous ligament</li>\n<li>Supraspinous ligament</li>\n</ul>\n</li>\n<li><strong>The middle column comprising the </strong>\n<ul>\n<li>Posterior half of the vertebral body</li>\n<li>Posterior part of the intervertebral disc</li>\n<li>Posterior longitudinal ligament</li>\n</ul>\n</li>\n<li><strong>The anterior column composed of</strong>\n<ul>\n<li>Anterior half of the vertebral body</li>\n<li>Anterior part of the intervertebral disc</li>\n<li>Anterior longitudinal ligament</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/c60d7bb056a047bb8454baae432b5766x200x175.PNG"
    ]
  },
  {
    "text": "Tarsometatarsal amputation is known as",
    "choices": [
      {
        "id": 1,
        "text": "Pirogoff amputation"
      },
      {
        "id": 2,
        "text": "Lisfranc amputation"
      },
      {
        "id": 3,
        "text": "Chopart\u2019s amputation"
      },
      {
        "id": 4,
        "text": "Syme\u2019s amputation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Lisfranc amputation</strong> is partial foot amputation through <strong>tarsometatarsal joint</strong>.</p>\n<ul>\n<li>option a: <strong>Pirgoff</strong> is a type of below ankle amputation.(removal of forefoot and talus followed by calcaneotibial arthrodesis)</li>\n<li>Option d:<strong>&nbsp;Symes</strong>&nbsp;is a type of <strong>above ankle amputations</strong>.(amputation performed at level of talocrural joint and plantar pad of fat is dissected from the calcaneum and preserved)</li>\n<li>Option c: <strong>Chopart&rsquo;s amputation</strong> is partial foot amputation through <strong>mid-tarsal joint.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf90fd8d9ac34c13892c301d33cf5c5fx318x258.JPEG"
    ]
  },
  {
    "text": "Paget\u2019s disease is associated with",
    "choices": [
      {
        "id": 1,
        "text": "Osteosarcoma"
      },
      {
        "id": 2,
        "text": "Ewing\u2019s sarcoma"
      },
      {
        "id": 3,
        "text": "Osteoclastoma"
      },
      {
        "id": 4,
        "text": "Fibrosarcoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Paget&rsquo;s disease can result in <strong>malignant transformation mainly osteosarcoma</strong>.</p>\n<p><strong>Incidence </strong>of malignant transformation is <strong>around 1%.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Denosumab a monoclonal antibody against RANKL receptor is used in the treatment of",
    "choices": [
      {
        "id": 1,
        "text": "Osteoporosis"
      },
      {
        "id": 2,
        "text": "Osteoarthritis"
      },
      {
        "id": 3,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 4,
        "text": "Osteosarcoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li><strong>Denosumab</strong> is used in the&nbsp;<strong>treatment of osteoporosis</strong>.</li>\n<li><strong>RANK-RANKL interaction</strong> is <strong>necessary for osteoclastogenesis</strong>.</li>\n<li>This drug <strong>interrupts the RANKL&ndash;RANK interaction</strong> and thus reduces osteoclastic activity and bone resorption.</li>\n</ul>\n<p>Uses of Denosumab:</p>\n<ol>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Osteoporosis</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Aromatase Inhibitor Induced Bone Loss</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Androgen Deprivation Induced Bone Loss</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Glucocorticoid-Induced Osteoporosis</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Multiple myelomas and&nbsp; bone metastases from solid tumors</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Giant Cell Tumor</span></li>\n<li><span style=\"font-size: 10pt; font-family: arial, helvetica, sans-serif;\">Hypercalcemia of Malignancy</span></li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Candle bones are seen in",
    "choices": [
      {
        "id": 1,
        "text": "Melorheostosis"
      },
      {
        "id": 2,
        "text": "Osteopoikilosis"
      },
      {
        "id": 3,
        "text": "Osteopathia striatia"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Candle bones (melorheostosis, Leri&rsquo;s disease)</strong></p>\n<ul>\n<li>Non-familial condition</li>\n<li>C/F: Pain and stiffness in one limb</li>\n<li>X-rays show irregular patches of sclerosis, usually distributed in a linear fashion through the limb- appearance is reminiscent of wax that congeals on the side of a burning candle.</li>\n<li>Associated with scleroderma and joint contractures.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/69447322cf474a469c8b5813f4c606f2x262x256.PNG",
      "https://cdn1.dailyrounds.org/uploads/706cf28514ae46cb8d7919d55729f2eax336x238.PNG",
      "https://cdn1.dailyrounds.org/uploads/b8c37f81f36c40df8c532c0835b11107x186x241.PNG"
    ]
  },
  {
    "text": "Looser zone is a feature of",
    "choices": [
      {
        "id": 1,
        "text": "Osteoporosis"
      },
      {
        "id": 2,
        "text": "Osteomalacia"
      },
      {
        "id": 3,
        "text": "Osteopetrosis"
      },
      {
        "id": 4,
        "text": "Scurvy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>classical lesion of osteomalacia</strong> is the <strong>Looser zone</strong>, a <strong>thin transverse band of rarefaction</strong> in an otherwise normal-looking bone.</p>\n<p>Other radiological features of osteomalacia are</p>\n<ul>\n<li>Biconcave vertebrae (from disc pressure)</li>\n<li>Lateral indentation of the acetabula (\u2018<strong>trefoil\u2019 pelvis</strong>\u2019)</li>\n<li><strong>Spontaneous fractures</strong> of the ribs, pubic rami, femoral neck or the metaphyses above and below the knee.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/de152fff6ca047a58b4fcb7a945ec018x358x269.PNG"
    ]
  },
  {
    "text": "Caffey\u2019s disease is",
    "choices": [
      {
        "id": 1,
        "text": "Renal osteodystrophy"
      },
      {
        "id": 2,
        "text": "Osteomyelitis of jaw in children"
      },
      {
        "id": 3,
        "text": "Infantile cortical hyperostosis"
      },
      {
        "id": 4,
        "text": "Osteoporosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Caffey&rsquo;s disease</strong> is also known as <strong>infantile cortical hyperostosis</strong>.</p>\n<p>It is <strong>self limiting</strong> disorder</p>\n<ul>\n<li>Most common age group affected is <strong>&lt;6 months old</strong>.</li>\n<li><strong>Spontaneous resolution</strong> by 3 years of age.&nbsp;</li>\n<li>Most common bone affected in <strong>sporadic case &ndash; mandible.</strong></li>\n<li>Most common bone affected in <strong>familial case &ndash; tibia&gt; ulna.</strong></li>\n<li>Symptoms:\n<ul>\n<li><strong>Painful swelling </strong>over the tubular bones and/or the mandible.</li>\n<li>The child may be <strong>feverish and irritable</strong>, refusing to move the affected limb.</li>\n</ul>\n</li>\n<li>Investigations:\n<ul>\n<li>X-rays - <strong>Periosteal new-bone formation</strong> resulting in thickening of the cortex of affected bone.</li>\n</ul>\n</li>\n<li>Treatment &ndash; antibiotics are sometimes employed.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are seen in Klippel-Feil syndrome except",
    "choices": [
      {
        "id": 1,
        "text": "Low posterior hairline"
      },
      {
        "id": 2,
        "text": "Restricted neck movements"
      },
      {
        "id": 3,
        "text": "Pseudoarthrosis of tibia"
      },
      {
        "id": 4,
        "text": "Short neck"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Klippel-Feil syndrome is a <strong>congenital fusion of the cervical vertebrae</strong> that may <strong>involve two segments, a congenital block</strong><br /><strong>vertebra, or the entire cervical spine.</strong></p>\n<p>Congenital cervical fusion is a result of <strong>failure of normal segmentation of the cervical somites</strong> during the <strong>third to eighth week of life.</strong></p>\n<p>The <strong>classic features</strong> of Klippel-Feil syndrome are a <strong>short neck, low posterior hairline, and limited range of neck motion.</strong></p>\n<p><strong>Associated anamolies are</strong></p>\n<ul>\n<li><strong>Scoliosis in 60%</strong> patients</li>\n<li><strong>Renal abnormalities</strong> (30%)</li>\n<li><strong>VSD</strong> (4-14%)</li>\n<li><strong>Deafness</strong> (30%)</li>\n<li><strong>Synkinesis</strong> (20%)</li>\n<li>Respiratory anomalies like <strong>failure of lobe formation, ectopic lungs and restriction of lung function</strong></li>\n<li><strong>Sprengel deformity</strong> in 20%</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Marker of bone resorption is ?",
    "choices": [
      {
        "id": 1,
        "text": "Osteocalcin"
      },
      {
        "id": 2,
        "text": "Deoxypyridinolines"
      },
      {
        "id": 3,
        "text": "Type I procollagen"
      },
      {
        "id": 4,
        "text": "Bone specific alkaline phosphatase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Urine total free deoxypyridinoline</strong> is a <strong>marker of bone resorption</strong>.</p>\n<p><strong>Markers of bone resorption:</strong></p>\n<ul>\n<li>Urine and serum cross linked N telopeptide</li>\n<li>Urine and serum cross linked C telopeptide</li>\n<li>Urine total free deoxypyridinoline</li>\n<li><strong>Urine hydroxyproline</strong></li>\n<li>Urine hydroxylysine glycosides</li>\n<li>Serum Tatarate Resistant Acid Phosphatase (TRAP)</li>\n<li>Serum bone sialoprotein</li>\n</ul>\n<p><strong>Markers of bone formation:</strong></p>\n<ul>\n<li>Serum bone specific alkaline phosphatase</li>\n<li><strong>Serum Osteocalcin</strong></li>\n<li>Serum peptide of type I procollagen</li>\n<li>Type I collagen extension peptide</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The bone tumor which can cause hyperglycemia is",
    "choices": [
      {
        "id": 1,
        "text": "Ewing\u2019s sarcoma"
      },
      {
        "id": 2,
        "text": "Osteosarcoma"
      },
      {
        "id": 3,
        "text": "Chondrosarcoma"
      },
      {
        "id": 4,
        "text": "Multiple myeloma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Chondrosarcoma can produce hyperglycemia in 85 % of cases.</p>\n<p><strong>Chondrosarcoma</strong></p>\n<ul>\n<li>Second in frequency to osteosarcoma</li>\n<li>No neoplastic osteoid</li>\n<li>Long history, pain not a prominent feature</li>\n<li>X ray &ndash; &lsquo;<strong>Popcorn</strong>&rsquo; calcification , &lsquo;<strong>punctate</strong>&rsquo; or &lsquo;<strong>comma</strong>&rsquo; calcification</li>\n<li>Treatment &ndash; Wide local excision / Radical excision</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5 year old boy fell on his outstretched hand. X-ray is shown below. Which of the following vessel is most commonly affected?",
    "choices": [
      {
        "id": 1,
        "text": "Radial artery"
      },
      {
        "id": 2,
        "text": "Brachial  artery"
      },
      {
        "id": 3,
        "text": "Ulnar artery"
      },
      {
        "id": 4,
        "text": "Cubital vein"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given X-ray shows a supracondylar fracture of the humerus and injury to <strong>the b</strong><strong>rachial artery</strong> is the most common vascular complication.</p>\n<p>The fracture most commonly caused by a fall on an outstretched hand in a child is the supracondylar fracture of the humerus. As the hand strikes the ground, the elbow is forced into hyperextension resulting in a fracture of the humerus above the condyles.</p>\n<ul>\n<li>The brachial artery is usually injured by the <strong>sharp edge</strong> of the proximal fragment.</li>\n<li>Sometimes flexor muscles of the forearm - flexor pollicis longus and flexor digitorum profundus (medial-half) may suffer ischemic damage leading to <strong>Volkmann's ischemia</strong> leading to <strong>c</strong><strong>ompartment syndrome</strong>.</li>\n</ul>\n<p>While injury to the brachial artery is the <strong>commonest</strong> <strong>vascular</strong> complication, however, malunion is the <strong>most common complication</strong> of supracondylar fracture of the humerus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/73f90b093f974518b0a0824993bae5fb.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/ed4c2e49e9a04e6ca856dd26b04dad91x339x208.JPEG"
    ]
  },
  {
    "text": "The resorption surface can be distinguished from the bone formation surface by identifying the _________.",
    "choices": [
      {
        "id": 1,
        "text": "Howship lacunae"
      },
      {
        "id": 2,
        "text": "Haversian canals"
      },
      {
        "id": 3,
        "text": "Volkmann\u2019s canals"
      },
      {
        "id": 4,
        "text": "Sharpey\u2019s fibres"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Howship lacunae help in distinguishing the resorption surface from bone formation surface.</strong></p>\n<p><strong>Osteoclast-mediated resorption of bone takes place in scalloped areas which are referred to as Howship lacunae (resorptive pits).</strong></p>\n<p>Haversian canals are central canals surrounded by a series of concentric lamellae. These run longitudinally.</p>\n<p>Volkmann&rsquo;s canals run from the endosteal to the periosteal surface, horizontally.</p>\n<p><strong>Sharpey fibers are strands of fibrous tissue connecting the bone to the periosteum.</strong></p>\n<p>Arrows&nbsp;in the electron micrograph depicted below points <strong>Howship lacunae.&nbsp;</strong>An osteoclast (Oc) showing ruffled border (RB) and clear zone (CZ) is in close juxtaposition to the resorptive pits.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df0d3a5416ed4b50b78e54e02a1fb0e2x250x184.JPEG"
    ]
  },
  {
    "text": "Which of the following is not included in the major diagnostic triad of fat embolism syndrome (FES)?",
    "choices": [
      {
        "id": 1,
        "text": "Neurological impairment"
      },
      {
        "id": 2,
        "text": "PaO2 < 60 mmHg"
      },
      {
        "id": 3,
        "text": "Fat globules in urine"
      },
      {
        "id": 4,
        "text": "Petechiae"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Fat globules in urine is a minor criterion</strong> in diagnosing fat embolism syndrome.</p>\n<p>Fat embolism syndrome is caused by the release of fat globules from the bone marrow into the bloodstream. It <strong>usually occurs following long bone or pelvic fractures</strong>, and multiple fractures.</p>\n<p>Along with platelet aggregates, the globules result in the following manifestations which make up the <strong>major diagnostic triad</strong>:</p>\n<ul>\n<li><strong>Respiratory insufficiency</strong></li>\n<li><strong>Neurological impairment</strong></li>\n<li><strong>Petechial rash</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A subperiosteally placed graft is called:",
    "choices": [
      {
        "id": 1,
        "text": "Cancellous graft"
      },
      {
        "id": 2,
        "text": "Cortical graft"
      },
      {
        "id": 3,
        "text": "Phemister graft"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A phemister bone graft is placed subperiosteally and is most commonly used in the tibial injuries.</p>\n<p>Other options:</p>\n<ul>\n<li>A <strong>cancellous bone graft</strong> is useful in defects less than 2.5 cm. it is rapidly revascularised.</li>\n<li>A <strong>cortical bone graft</strong> provides fixation and osteogenesis. It can be used for the non union of shafts of long bones.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pseudoarthrosis may be seen in all of the following conditions except _______",
    "choices": [
      {
        "id": 1,
        "text": "Fracture"
      },
      {
        "id": 2,
        "text": "Idiopathic"
      },
      {
        "id": 3,
        "text": "Neurofibromatosis"
      },
      {
        "id": 4,
        "text": "Osteomyelitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Pseudoarthosis is not seen in Osteomyelitis.</p>\n<p>Pseudoarthrosis refers to the formation of a false joint that may develop after a fracture that has not united properly due to inadequate immobilization.</p>\n<p><strong>The central portion of the callus undergoes cystic degeneration and the luminal surface can become lined by synovial like cells, creating a false joint filled with clear fluids</strong>.</p>\n<p>Causes of pseudoarthrosis include neurofibromatosis, non union, idiopathic, osteogenesis imperfecta, ankylosing spondylitis, fibrous dysplasia, and congenital causes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old boy is brought to casualty following a fall on an outstretched hand. He has swelling and pain on his left elbow. X-ray done is given below. Which of the following vessels is most likely to be injured?",
    "choices": [
      {
        "id": 1,
        "text": "Axillary artery"
      },
      {
        "id": 2,
        "text": "Radial artery"
      },
      {
        "id": 3,
        "text": "Brachial artery"
      },
      {
        "id": 4,
        "text": "Ulnar artery"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and X-ray is suggestive of <strong>supracondylar fracture </strong>of the<strong> humerus</strong> in which&nbsp;<strong>brachial artery</strong> is most commonly injured.</p>\n<p>When there is vascular injury, the patient may complain of <strong>paraesthesia</strong> or <strong>numbness </strong>distal to the injury. On examination, the injured limb will be pale or slightly cyanosed, cold, and the <strong>pulse </strong>will be&nbsp;<strong>weak or absent</strong>.&nbsp;</p>\n<p>If a vascular injury is suspected, an <strong>angiogram </strong>or<strong> duplex scan </strong>is done&nbsp;immediately. If the test detects vascular injury,&nbsp;emergency treatment must be initiated without much delay.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9e5934fa68f34d0d9f20c9cfc1f99273.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The equipment shown in the picture below is used to treat ____________",
    "choices": [
      {
        "id": 1,
        "text": "Fracture tibia"
      },
      {
        "id": 2,
        "text": "Fracture neck of humerus"
      },
      {
        "id": 3,
        "text": "Fracture lateral malleolus"
      },
      {
        "id": 4,
        "text": "Shaft of femur fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows Thomas splint which is used in the treatment of fracture shaft of the femur.</p>\n<p>It is also used as a first-aid measure.</p>\n<p>It is used for the transportation of injured patients and in joint diseases like tuberculosis of the knee.</p>\n<p>Identification:</p>\n<ul>\n<li>It has a padded metal oval ring set at an angle of 120 degree to inner bar</li>\n<li>It has two sidebars, the outer bar is longer than inner bar</li>\n<li>Distal end is w shaped.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a4a912e671b84604a9f177c8507d0262.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/288ef67d692547a194e4e1933b7fde7cx1280x1895.JPEG"
    ]
  },
  {
    "text": "Triple deformity occurs in:",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Haemophilia"
      },
      {
        "id": 3,
        "text": "Polio"
      },
      {
        "id": 4,
        "text": "All of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The Triple deformity is seen in</p>\n<ul>\n<li>Rheumatoid arthritis</li>\n<li>Hemophilia</li>\n<li>Tuberculosis</li>\n<li>Polio</li>\n<li>Triple deformity of knee is the one in which flexion, external rotation, valgus at knee associated with posterior subluxation of tibia occurs.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/e8cb01c73fe1493cbc4e444738bd17f9x967x639.PNG"
    ]
  },
  {
    "text": "Kyphosis is maximum in which of the following regions?",
    "choices": [
      {
        "id": 1,
        "text": "Lumbar"
      },
      {
        "id": 2,
        "text": "Thoracic"
      },
      {
        "id": 3,
        "text": "Cervical"
      },
      {
        "id": 4,
        "text": "Equal in all regions"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Tuberculosis is the most common cause for kyphosis in India. Kyphosis is maximum in the thoracic spine because of normal kyphotic curvature. In the lumbar region, it is slight because of normal lordosis, in which most of the body weight is transmitted posteriorly and collapse is partial. And in the cervical spine, collapse is minimal, as most of the bony weight is borne through the articular process.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect regarding reactive arthritis?",
    "choices": [
      {
        "id": 1,
        "text": "It is most common among young men."
      },
      {
        "id": 2,
        "text": "It is linked with the HLA-B27 locus."
      },
      {
        "id": 3,
        "text": "X-ray evidence of sacro-ilitis is found in patients with long standing disease."
      },
      {
        "id": 4,
        "text": "Poststreptococcal reactive arthritis responds well to aspirin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Poststreptococcal reactive arthritis responds <strong>poorly</strong> to aspirin.</p>\n<p>Reactive arthritis is most common among young men and has been linked to <strong>HLA-B27</strong>. It is a painful asymmetric oligo-arthritis that mainly affects the knees, ankles, and feet. Low back pain is common and evidence of sacroilitis in chronic disease is a usual finding. Most cases recover within 6 months but the prolonged recurrent disease may occur in chlamydial infections. Reactive arthritis is not migratory. Frequent causes are<em> Chlamydia, Yersinia, Shigella, Campylobacter,</em> and<em>&nbsp;Salmonella</em>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Orthopedics St 1';
        const quizFilename = 'orthopedics-st-1-4f417058.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>