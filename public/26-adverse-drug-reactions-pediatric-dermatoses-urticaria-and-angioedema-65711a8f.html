<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>26 Adverse Drug Reactions, Pediatric Dermatoses, Urticaria And Angioedema - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Dermatology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 25-year-old man presents with recurrent dark red plaques on his penis. He reports that these lesions appear shortly after taking certain medications. The patches are localized and recur in the same areas with each exposure. He denies any other symptoms or systemic involvement. Which of the following statements is correct regarding the diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Resolution of lesions without any visible skin lesions."
      },
      {
        "id": 2,
        "text": "It is a type 1 hypersensitivity reaction"
      },
      {
        "id": 3,
        "text": "Upon re-exposure Lesions develop on the 10th day."
      },
      {
        "id": 4,
        "text": "Tetracyclines are commonly associated with FDE"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Tetracyclines are commonly associated with FDE</strong></p>\n\n<p><strong>Explanation:\u00a0</strong> Fixed <span class=\"customMeta\" data-dictid=\"4cbbddb4e216927771865577c1460f\">drug eruption</span> is a distinctive <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> allergic reaction that characteristically recurs at the <strong>same sites</strong> with the same <span class=\"customMeta\" data-dictid=\"2dcf62bc831692777192e737f2c4b0\">morphology</span> on re-exposure to the medication or other\u00a0chemical\u00a0agent.</p>\n\n<p><img alt=\"\" data-author=\"\"G W Csonka G W Csonka Neville Rosedale L Walkden \"\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Fixed_drug_reaction              https://www.researchgate.net/publication/18913438_Balanitis_due_to_fixed_drug_eruption_associated_with_tetracycline_therapy\" data-tags=\"\" height=\"357\" src=\"https://image.prepladder.com/content/CJqUpUygf8LMZSSNBa1a1723201661.png\" width=\"536\" /></p>\n\n<ul>\n\t<li><strong>Type 4 hypersen</strong><strong>sitivity</strong> reaction (Option B ruled out)</li>\n\t<li>Causative drugs: <strong>Co</strong>-<strong>trimoxazole</strong>, <strong>NSAIDs</strong>, <strong>tetracyclines</strong>, <strong>sulfonamides</strong>.</li>\n\t<li>Mediated by <strong>memory T-cells.</strong></li>\n\t<li>Acutely, erythematous and bullous phases of fixed eruptions, followed by well-circumscribed areas of<strong> slate-brown pigmentation</strong></li>\n\t<li>Site of lesions: <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">Mucous</span> <span class=\"customMeta\" data-dictid=\"34cd707428169277719272942b7905\">membrane</span> (Lips, tongues, <span class=\"customMeta\" data-dictid=\"e62ab50e7a16927771882c6a886b18\">Glans</span> penis), face and <span class=\"customMeta\" data-dictid=\"b01b22718a169277718096920a80e7\">acral</span> areas although can occur anywhere on the skin surface.</li>\n\t<li>Leaves <strong>residual hyperpigmentation</strong> on <span class=\"customMeta\" data-dictid=\"9cf83937931692777188a014337dcf\">healing</span> (Option A ruled out).</li>\n\t<li>Upon reexposure, lesions develop within 30 minutes to 8 hours (Option C ruled out).</li>\n\t<li>Treatment:\n\t<ul>\n\t\t<li>Stop the <span class=\"customMeta\" data-dictid=\"f616aee08b169277718361438e1a91\">causative</span> drug.</li>\n\t\t<li>Topical steroids and antibiotics combinations</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/CJqUpUygf8LMZSSNBa1a1723201661.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/F78CT8blRLXI4yH4iSaz1730719966.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Akz0yTJnQspuLHeYFFk81730720058.mp3"
  },
  {
    "text": "<p>A 26-year-old male presents to the emergency department with a sudden onset of skin lesions. Upon examination, you notice distinct lesions with concentric rings resembling a \"bull's eye\" appearance. The patient reports a recent malarial infection. Which of the following conditions is most likely responsible for these skin lesions?</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Erythema_multiforme\" data-tags=\"\" height=\"556\" src=\"https://image.prepladder.com/content/tWqjw4RN3ycKZhmCYUlw1723027974.png\" width=\"556\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Fixed drug eruption"
      },
      {
        "id": 2,
        "text": "Nummular eczema"
      },
      {
        "id": 3,
        "text": "Urticaria"
      },
      {
        "id": 4,
        "text": "Erythema multiforme"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> multiforme</strong></p>\n\n<p><strong>Explanantion</strong>: Based on the history provided and the Target lesions seen in the image, the diagnosis is <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> multiforme.</p>\n\n<p>Erythema Multiforme (EM) is an acute, immune-mediated condition characterized by distinctive target-like skin lesions accompanied by erosions or <span class=\"customMeta\" data-dictid=\"fc2efe08081692777183a5a07d6101\">bullae</span> involving the oral, genital, and/or <span class=\"customMeta\" data-dictid=\"7b1f175723169277719459db16938e\">ocular</span> mucosa.</p>\n\n<p><img alt=\"\" data-author=\"\"Meng-Ling Chiang Ying-Tai Jin Julia Yu-Fong Chang Chun-Pin Chiang\"\" data-hash=\"\" data-license=\"CC BY-NC-ND 4.0\" data-source=\"https://www.researchgate.net/figure/Clinical-photographs-of-our-case-of-erythema-multiforme-A-B-C-and-D-Clinical_fig1_350237478\" data-tags=\"\" height=\"498\" src=\"https://image.prepladder.com/content/IrKaZYNFZQ3abDC8DklA1723201736.png\" width=\"764\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Types:</strong> <span class=\"customMeta\" data-dictid=\"2a5e6ab60e1692777187087a9036a1\">EM</span> may present as <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> Multiforme Major (with severe mucosal involvement and <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> symptoms) or <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> Multiforme Minor (without or with mild mucosal disease and <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> symptoms).</p>\n\n<p>\u00a0</p>\n\n<p><strong>Aetiology:</strong></p>\n\n<ul>\n\t<li>Infectious cause (M/C cause): <span class=\"customMeta\" data-dictid=\"17df0c44e116927771897deca1bbf4\">HSV</span> 1, Mycoplasma.</li>\n\t<li>Drugs: NSAIDs, Sulphonamides, Antimalarials.</li>\n\t<li>SLE, Leukemia.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Clinical Manifestations:</strong> <span class=\"customMeta\" data-dictid=\"2a5e6ab60e1692777187087a9036a1\">EM</span> typically presents with <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> lesions (Target lesions) over <span class=\"customMeta\" data-dictid=\"5ff25303a01692777186731f6a4f5c\">distal</span> extremities often with mucosal involvement. Prodromal symptoms are uncommon in mild cases but may be seen in severe cases.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Target lesions:</strong> Target lesions typically consist of three distinct zones</p>\n\n<ul>\n\t<li>Central area: This area is usually dusky or darker in colour and may sometimes blister.</li>\n\t<li>Middle zone: Surrounding the central area is a dark red <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> zone.</li>\n\t<li>Outer zone: This zone is characterized by a pale ring of oedema.</li>\n\t<li>Periphery: An erythematous <span class=\"customMeta\" data-dictid=\"95af91681416927771887742113c38\">halo</span> may be present on the extreme outer edge of the lesion.</li>\n</ul>\n\n<p><strong>Treatment:</strong></p>\n\n<ul>\n\t<li>Immediate withdrawal of offending drug.</li>\n\t<li>Acyclovir</li>\n\t<li>A short course of <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> steroids if necessary.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Fixed <span class=\"customMeta\" data-dictid=\"4cbbddb4e216927771865577c1460f\">drug eruption</span> (Option A)\u00a0</strong>is a distinctive <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> allergic reaction that characteristically recurs at the <strong>same sites</strong> with the same <span class=\"customMeta\" data-dictid=\"2dcf62bc831692777192e737f2c4b0\">morphology</span> on re-exposure to the medication or other chemical agent. It presents as acutely, erythematous and bullous phases of fixed eruptions, followed by well-circumscribed areas of<strong> slate-brown pigmentation</strong>. Site of lesions: <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">Mucous</span> <span class=\"customMeta\" data-dictid=\"34cd707428169277719272942b7905\">membrane</span> (Lips, tongues, <span class=\"customMeta\" data-dictid=\"e62ab50e7a16927771882c6a886b18\">Glans</span> penis), face and <span class=\"customMeta\" data-dictid=\"b01b22718a169277718096920a80e7\">acral</span> areas although can occur anywhere on the skin surface.</p>\n\n<p><strong>Nummular <span class=\"customMeta\" data-dictid=\"cfcf3a19b2169277718637c5eb0e74\">eczema</span> (Option B) </strong>presents with coin-shaped lesions, typically without the characteristic <span class=\"customMeta\" data-dictid=\"9bb62139a81692777184648bfef564\">concentric</span> rings seen in <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> multiforme.</p>\n\n<p><strong>Urticaria (Option C)</strong> is characterized by transient, raised, erythematous wheals with central pallor, which are typically pruritic. It does not present with the characteristic targetoid lesions of <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> multiforme.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/tWqjw4RN3ycKZhmCYUlw1723027974.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/IrKaZYNFZQ3abDC8DklA1723201736.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/kkegNd63KK6YxQ3en3nQ1730720135.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/wX36kkuVsSnPcZU6ipJ81730720209.mp3"
  },
  {
    "text": "<p>A 50-year-old patient presented to the emergency department with widespread blistering and skin detachment, along with mucosal involvement, after starting a new medication a week ago. On examination, there are large areas of epidermal detachment involving more than 30% of the body surface area. Nikolsky's sign is positive. Which of the following conditions is most likely to be responsible for this presentation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Erythema multiforme"
      },
      {
        "id": 2,
        "text": "Stevens-Johnson syndrome"
      },
      {
        "id": 3,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 4,
        "text": "Toxic epidermal necrolysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Toxic <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> necrolysis</strong></p>\n\n<p><strong>Explanation</strong>: <span class=\"customMeta\" data-dictid=\"ed682ddaee16927771995530b7101b\">Stevens-Johnson syndrome</span> (SJS) and toxic <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> <span class=\"customMeta\" data-dictid=\"254d4c2ea21692777193838ccf204d\">necrolysis</span> (TEN) are severe <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> adverse reactions characterized by extensive <span class=\"customMeta\" data-dictid=\"5e84a7987c16927771931012aced83\">necrosis</span> and <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> of the epidermis.</p>\n\n<p>\u00a0</p>\n\n<p>Classification based on Body surface area involvement (BSA)</p>\n\n<ul>\n\t<li><strong>SJS</strong>: <10 % of <span class=\"customMeta\" data-dictid=\"270c00aff316927771839a8749b963\">BSA</span> detached (Option B ruled out)</li>\n\t<li><strong>SJS/TEN</strong> overlap: 10 to 30 % of <span class=\"customMeta\" data-dictid=\"270c00aff316927771839a8749b963\">BSA</span> detached</li>\n\t<li><strong>TEN:</strong> >30 percent of <span class=\"customMeta\" data-dictid=\"270c00aff316927771839a8749b963\">BSA</span> detached</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>The term \"epidermal necrolysis\" collectively refers to SJS, SJS/TEN overlap, and TEN.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Pathophysiology:</strong></p>\n\n<ul>\n\t<li>The predominant cause of SJS/TEN is medication use,\n\t<ul>\n\t\t<li>NSAIDs (Oxicam groups)</li>\n\t\t<li>Allopurinol.</li>\n\t\t<li>Anti epileptics: Lamotrigine, Carbamazepine</li>\n\t\t<li>Sulfonamides</li>\n\t\t<li>Anti retrovirals.</li>\n\t</ul>\n\t</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"715b4caf0316927771943797627d8d\">pathogenesis</span> of SJS/TEN is predominantly a T cell-mediated reaction, often <span class=\"customMeta\" data-dictid=\"3978e9614f1692777200abbe4cfa34\">triggered</span> by a genetic predisposition, particularly specific human <span class=\"customMeta\" data-dictid=\"00346a7f211692777191e91c2af9fc\">leukocyte</span> <span class=\"customMeta\" data-dictid=\"782b31281a1692777181708484c1d1\">antigen</span> (HLA) haplotypes.</li>\n\t<li>Necrosis of keratinocytes.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Clinical presentation:</strong></p>\n\n<ul>\n\t<li>The clinical presentation typically involves prodromal symptoms followed by <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> lesions that progress to extensive skin detachment.\n\t<ul>\n\t\t<li>Atypical target lesions (Only 2 zones)</li>\n\t\t<li>Diffuse <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> -> <span class=\"customMeta\" data-dictid=\"fc2efe08081692777183a5a07d6101\">Bullae</span> -> Sheet-like <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> peeling.</li>\n\t\t<li>Pseudo <span class=\"customMeta\" data-dictid=\"88c4848c37169277719335b7422f60\">Nikolsky sign</span> positive.</li>\n\t</ul>\n\t</li>\n\t<li>Mucosal involvement is common and can affect various sites, including the oral, nasal, ocular, genital, and <span class=\"customMeta\" data-dictid=\"b3a647ce2516927771881427f56c1d\">gastrointestinal</span> mucosa.</li>\n\t<li>SCORTEN - developed to predict mortality in SJS/TEN</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"Terrence Piva\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.mdpi.com/ijms/ijms-17-02135/article_deploy/html/images/ijms-17-02135-g001-550.jpg\" data-tags=\"\" height=\"460\" src=\"https://image.prepladder.com/content/5ZeOIBYuMfOnsvxMwKwa1723545572.png\" width=\"607\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Management</strong>:</p>\n\n<ul>\n\t<li>Involves immediate withdrawal of the offending drug.</li>\n\t<li>Cyclosporine, IV Immunoglobulins.</li>\n\t<li>Supportive care</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Erythema multiforme (Option A)</strong> is a less severe condition characterized by target-like lesions and typically involves less than 10% of the body surface area. While it may be <span class=\"customMeta\" data-dictid=\"3978e9614f1692777200abbe4cfa34\">triggered</span> by medications or infections, it does not typically cause extensive <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> or mucosal involvement seen in TEN.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Pemphigus <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> (Option C)</strong> is an <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> blistering disorder characterized by <span class=\"customMeta\" data-dictid=\"83676f1719169277719003a837e078\">intraepidermal</span> blistering due to autoantibodies <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> desmogleins 3> 1. It does not typically present with widespread <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> or mucosal involvement as seen in TEN.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/5ZeOIBYuMfOnsvxMwKwa1723545572.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/vXxsuWIIfLtMIIBMkTdu1730724498.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/8LgAWU7zn5Mmcq8AGJqy1730724586.mp3"
  },
  {
    "text": "<p>Which among the following is involved in the pathophysiology behind Toxic epidermal necrolysis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "HLA polymorphism."
      },
      {
        "id": 2,
        "text": "T cell-mediated response."
      },
      {
        "id": 3,
        "text": "Necrosis of keratinocytes."
      },
      {
        "id": 4,
        "text": "All of the above."
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) All of the above.</strong></p>\n\n<p><strong>Explanation</strong>: Toxic <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> <span class=\"customMeta\" data-dictid=\"254d4c2ea21692777193838ccf204d\">necrolysis</span> (TEN) are severe <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> adverse reaction characterized by extensive <span class=\"customMeta\" data-dictid=\"5e84a7987c16927771931012aced83\">necrosis</span> and <span class=\"customMeta\" data-dictid=\"2b005085881692777186cf95c3ad51\">detachment</span> of the epidermis.</p>\n\n<p>\u00a0</p>\n\n<p>The <span class=\"customMeta\" data-dictid=\"19bbbcd51e16927771947c31adcdd0\">pathophysiology</span> behind TEN is as follows,</p>\n\n<p>1. Genetic Predisposition:</p>\n\n<ul>\n\t<li>HLA polymorphism</li>\n\t<li>Pharmacogenetics</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>2. Drug <span class=\"customMeta\" data-dictid=\"782b31281a1692777181708484c1d1\">Antigen</span> Presentation:</p>\n\n<ul>\n\t<li>The drug binds to self-proteins or <span class=\"customMeta\" data-dictid=\"b1debe2a7c16927771890479332d98\">HLA</span> molecule</li>\n\t<li>Presents drug-specific antigens to T cells</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>3. T Cell-Mediated Response and Immune Dysregulation:</p>\n\n<ul>\n\t<li>Activation of drug-specific CD8+ T cells</li>\n\t<li>Release of cytotoxic proteins</li>\n\t<li>Immune <span class=\"customMeta\" data-dictid=\"3704fc52401692777186c42775c9fb\">dysregulation</span> (e.g., impaired T regulatory cell function)</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>4. Release of Cytotoxic Mediators, Death Signals, and <span class=\"customMeta\" data-dictid=\"bd91556e6316927771902afa1c1ece\">Keratinocyte</span> Cell Death:</p>\n\n<ul>\n\t<li>Cytotoxic proteins (e.g., granulysin, perforin/granzyme)</li>\n\t<li>Death signals (e.g., Fas ligand)</li>\n\t<li>Keratinocyte <span class=\"customMeta\" data-dictid=\"4bfa3e6f2c1692777181c53b124cf7\">apoptosis</span> and necrosis</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>5. Additional <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">Cellular</span> and Molecular Mediators:</p>\n\n<ul>\n\t<li>Natural killer (NK)/T cells</li>\n\t<li>T helper type 17 (Th17) cells</li>\n\t<li>Neutrophils</li>\n\t<li>Cytokines/chemokines (e.g., TNF-alpha, IL-15)</li>\n\t<li>Alarmins (e.g., IL-33)</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>6. <span class=\"customMeta\" data-dictid=\"e32252a2c41692777194fe542b3e35\">Pathologic</span> Sequelae:</p>\n\n<ul>\n\t<li>Epidermal necrolysis</li>\n\t<li>Full-thickness <span class=\"customMeta\" data-dictid=\"616d85c57416927771875ef23f6751\">epidermal</span> detachment</li>\n\t<li>Mucosal involvement</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/aHcGAXDybtlX2YExdkYL1730726010.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/ZJuHdXlR227rYJvLrioX1730726059.mp3"
  },
  {
    "text": "<p>A 38-year-old woman presents with a sudden onset of widespread, non-follicular pustules on an erythematous base. She reports having taken medication for a urinary tract infection two days ago. On examination, she appears febrile with diffuse erythema and multiple small, sterile pustules on her trunk and extremities. There is no mucosal involvement. What is the most likely cause of her presentation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcal scalded skin syndrome"
      },
      {
        "id": 2,
        "text": "Pemphigus vulgaris"
      },
      {
        "id": 3,
        "text": "Acute generalized exanthematous pustulosis"
      },
      {
        "id": 4,
        "text": "Milia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer :C) <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">Acute</span> generalized <span class=\"customMeta\" data-dictid=\"4f279b047716927771872685599ba9\">exanthematous</span> pustulosis</strong></p>\n\n<p><strong>Explanation</strong>: <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">Acute</span> generalized <span class=\"customMeta\" data-dictid=\"4f279b047716927771872685599ba9\">exanthematous</span> <span class=\"customMeta\" data-dictid=\"0be7ae6bba1692777196b5b1511dab\">pustulosis</span> (AGEP) is a rare, <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> reaction caused in approximately 90 per cent of cases by drugs, most often antibiotics, <span class=\"customMeta\" data-dictid=\"54de8b79a91692777183e608bc0dd4\">calcium</span> channel blockers, and antimalarials.</p>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>AGEP is characterized by the development of numerous nonfollicular, sterile, small pustules on a background of edematous <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> with flexural accentuation.</li>\n\t<li>Fever above 38\u00b0C (100.4\u00b0F) and <span class=\"customMeta\" data-dictid=\"515cde208f1692777191112bb2ff9e\">leukocytosis</span> with a <span class=\"customMeta\" data-dictid=\"000d23188716927771936c5f2fe74e\">neutrophil</span> count >7000/microL are usually present.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"e8c6da34eb169277718752e1060128\">eruption</span> usually occurs a few hours to a few days after the administration of the offending drug.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"e8c6da34eb169277718752e1060128\">eruption</span> resolves spontaneously in one to two weeks after the discontinuation of the offending drug</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"\"Therdpong Tempark Shobana John Pawinee Rerknimitr[...] Chonlaphat Sukasem\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Acute-generalized-exanthematous-pustulosis-AGEP-Multiple-pin-head-sized_fig3_360064439\" data-tags=\"\" height=\"309\" src=\"https://image.prepladder.com/content/ov7fnNFnpS2G8gM01GGM1723028298.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Staphylococcal scalded skin syndrome (SSSS) (Option A</strong>) also known as Ritter\u2019s disease, the <span class=\"customMeta\" data-dictid=\"870a1d0bab1692777187e92f005fc1\">exfoliative</span> <span class=\"customMeta\" data-dictid=\"41329dc9381692777200a9b6d57cf4\">toxin</span> of <span class=\"customMeta\" data-dictid=\"71c203268816927771994a1fffd645\">Staphylococcus</span> bacteria causes the characteristic flaccid, blisters and\u00a0bullae, which are usually accentuated in the flexures.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Pemphigus <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> (Option B)</strong>\u00a0is an <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> disease caused by autoantibodies against desmogleins. It presents with <span class=\"customMeta\" data-dictid=\"d28003a82c1692777202475273e346\">flaccid</span> blisters containing clear fluids, which can <span class=\"customMeta\" data-dictid=\"e73553a3a5169277719787fd5f4680\">rupture</span> to produce erosions. The <span class=\"customMeta\" data-dictid=\"88c4848c37169277719335b7422f60\">Nikolsky sign</span> is positive.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Milia (Option D)</strong> are small, self-limiting, <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> <span class=\"customMeta\" data-dictid=\"ad4f95ee4c1692777199e970f56c9d\">subepidermal</span> <span class=\"customMeta\" data-dictid=\"d0e68b82ed1692777190fa10f7d4ba\">keratin</span> cysts. They are commonly seen in half of newborns and have little to no clinical relevance. They are most commonly present on the face but can occur anywhere on the skin. They heal without any scarring.</p>\n\n<p><img alt=\"\" data-author=\"Serephine,\" data-hash=\"\" data-license=\"CC0\" data-source=\"https://commons.wikimedia.org/wiki/File:Newborn_Milia_%28Milk_Spots%29.jpg\" data-tags=\"\" height=\"523\" src=\"https://image.prepladder.com/content/vSu7O2foKbiJQ5c02TSh1723028317.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/ov7fnNFnpS2G8gM01GGM1723028298.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/mwRzX4MwcYAEi6zznDRt1730726141.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/41Gfbce3uCQsHJL1w5ua1730726216.mp3"
  },
  {
    "text": "<p>Match the following:</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:556px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>A.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Kyle Cullingham Gregory Kost\"\" data-hash=\"\" data-license=\"CC BY-NC 4.0\" data-source=\"https://www.researchgate.net/figure/Bleomycin-induced-flagellate-dermatitis-Resulting-post-inflammatory-hyperpigmentation_fig2_354246611\" data-tags=\"\" height=\"291\" src=\"https://image.prepladder.com/content/bdqvIom6QLlSElDnQiHT1723028740.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">1. Hydroxychloroquine</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>B.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Ali Hossein Samadi Takaldani Mohammad Negaresh Maryam Salimi Nima Javanshir\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Blue-man-syndrome-Blue-gray-discoloration-on-cheek-and-nose-yellow-arrow_fig1_371444379\" data-tags=\"\" height=\"141\" src=\"https://image.prepladder.com/content/UVsPW9wQA2mW7Ua9vuPp1723028722.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p>2. Clofazimine</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>C.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"Kiran Singh \" data-hash=\"\" data-license=\"Creative Commons Attribution/Share-Alike License\" data-source=\"https://www.wikidoc.org/index.php/File:Acquired_Ichthyosis-Clofazimine01.jpg\" data-tags=\"\" height=\"304\" src=\"https://image.prepladder.com/content/IfAIKv83asTqjoYDm1261723028708.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p>3. Bleomycin</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>D.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Suran Yang Yuya Takakubo Shinji Kobayashi[...] Michiaki Takagi\"\" data-hash=\"\" data-license=\"CC BY-NC 3.0\" data-source=\"https://www.researchgate.net/figure/Case-4-A-33-year-old-man-had-received-200-mg-day-minocycline-for-7-months-for-infection_fig2_230798816\" data-tags=\"\" height=\"416\" src=\"https://image.prepladder.com/content/7Xr4SN3DKMIPCdFAh0o91723028679.png\" width=\"325\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p>4. Amiodarone</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "choices": [
      {
        "id": 1,
        "text": "A-3, B-1, C-4, D-2"
      },
      {
        "id": 2,
        "text": "A-3, B-4, C-2, D-1"
      },
      {
        "id": 3,
        "text": "A-4, B-3, C-2, D-1"
      },
      {
        "id": 4,
        "text": "A-4, B-2, C-3, D-1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B)A-3, B-4, C-2, D-1</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>A.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Kyle Cullingham Gregory Kost\"\" data-hash=\"\" data-license=\"CC BY-NC 4.0\" data-source=\"https://www.researchgate.net/figure/Bleomycin-induced-flagellate-dermatitis-Resulting-post-inflammatory-hyperpigmentation_fig2_354246611\" data-tags=\"\" height=\"291\" src=\"https://image.prepladder.com/content/bdqvIom6QLlSElDnQiHT1723028740.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Bleomycin</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Flagellate Hyperpigmentation.</li>\n\t\t\t\t<li>Cutaneous reaction to treatment with Bleomycin.</li>\n\t\t\t\t<li>Multiple linear, erythematous streaks arise at the site of minor trauma or scratching.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>B.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Ali Hossein Samadi Takaldani Mohammad Negaresh Maryam Salimi Nima Javanshir\"\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/figure/Blue-man-syndrome-Blue-gray-discoloration-on-cheek-and-nose-yellow-arrow_fig1_371444379\" data-tags=\"\" height=\"141\" src=\"https://image.prepladder.com/content/UVsPW9wQA2mW7Ua9vuPp1723028722.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p><strong>Amiodarone</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Photosensitivity.</li>\n\t\t\t\t<li>Blue man syndrome: Bluish slate grey discolouration of the skin, predominantly in the face due to deposition of <span class=\"customMeta\" data-dictid=\"d638132b7a1692777191174f482d41\">lipofuscin</span> in the dermis</li>\n\t\t\t</ul>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>C.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"Kiran Singh \" data-hash=\"\" data-license=\"Creative Commons Attribution/Share-Alike License\" data-source=\"https://www.wikidoc.org/index.php/File:Acquired_Ichthyosis-Clofazimine01.jpg\" data-tags=\"\" height=\"304\" src=\"https://image.prepladder.com/content/IfAIKv83asTqjoYDm1261723028708.png\" width=\"416\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p><strong>Clofazimine (In <span class=\"customMeta\" data-dictid=\"f200a5b7181692777191c4f24b2a3e\">leprosy</span> patients)</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Ichthyosis.</li>\n\t\t\t\t<li>Photosensitivity.</li>\n\t\t\t\t<li>Brownish skin discoloration.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>D.</p>\n\n\t\t\t<p><img alt=\"\" data-author=\"\"Suran Yang Yuya Takakubo Shinji Kobayashi[...] Michiaki Takagi\"\" data-hash=\"\" data-license=\"CC BY-NC 3.0\" data-source=\"https://www.researchgate.net/figure/Case-4-A-33-year-old-man-had-received-200-mg-day-minocycline-for-7-months-for-infection_fig2_230798816\" data-tags=\"\" height=\"416\" src=\"https://image.prepladder.com/content/7Xr4SN3DKMIPCdFAh0o91723028679.png\" width=\"325\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ol>\n\t\t\t</ol>\n\n\t\t\t<p><strong>Hydroxychloroquine</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Brown, Blue-gray and/or slate grey <span class=\"customMeta\" data-dictid=\"30261213bf16927771898b5d2f245d\">hyperpigmentation</span> most commonly on shins, but can also be seen in arms, forearms, face, oral mucosa, trunk, nails, and axilla.</li>\n\t\t\t\t<li>The involvement is typically bilateral.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [
      "https://image.prepladder.com/content/bdqvIom6QLlSElDnQiHT1723028740.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/bdqvIom6QLlSElDnQiHT1723028740.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 17-year-old male presents with a dark, irregularly pigmented patch on his right shoulder that he first noticed a few years ago. On examination, you see a large, unilateral patch of hyperpigmentation with a slightly irregular border and scattered areas of increased hair growth. The lesion has remained stable in size and shape over the years. The patient reports no associated symptoms such as itching or pain. Which of the following is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Seborrheic keratosis"
      },
      {
        "id": 2,
        "text": "Malignant melanoma"
      },
      {
        "id": 3,
        "text": "Becker's nevus"
      },
      {
        "id": 4,
        "text": "Nevus of Ito"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C)\u00a0Becker's nevus</strong></p>\n\n<p><strong>Explanation:</strong>\u00a0Becker's nevus, (or Becker melanosis), is a hyperpigmented skin lesion, commonly seen in adolescent males.</p>\n\n<ul>\n\t<li>While <span class=\"customMeta\" data-dictid=\"9f6f4d73c51692777189dcc13200e2\">hypertrichosis</span> is frequently observed, it is not consistently present.</li>\n\t<li>Commonly found on the Shoulders and the upper trunk.</li>\n\t<li>Becker's <span class=\"customMeta\" data-dictid=\"d61ced9a671692777193e04a03c423\">nevus</span> may also be associated with extracutaneous abnormalities, collectively <span class=\"customMeta\" data-dictid=\"047f8930dd1692777197fed61e213c\">referred</span> to as Becker's <span class=\"customMeta\" data-dictid=\"d61ced9a671692777193e04a03c423\">nevus</span> syndrome. These abnormalities can involve underlying structures such as <span class=\"customMeta\" data-dictid=\"5dff4943631692777181b8974b302b\">aplasia</span> or <span class=\"customMeta\" data-dictid=\"35c595890e1692777189a68438427a\">hypoplasia</span> of breast tissue, <span class=\"customMeta\" data-dictid=\"afa97794e21692777195a324ffec49\">pectoralis</span> major muscle,\u00a0or\u00a0lipoatrophy.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Becker%27s_nevus\" data-tags=\"\" height=\"338\" src=\"https://image.prepladder.com/content/bmRMEj0uJmvfsEAKPV8Z1723028860.png\" width=\"416\" /></p>\n\n<p><strong>Option A: <span class=\"customMeta\" data-dictid=\"5d5241c3cf1692777198a1ba71f8d4\">Seborrheic</span> keratosis:</strong></p>\n\n<p>It is a <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> tumour that typically presents as a raised, wart-like <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> with a dull, <span class=\"customMeta\" data-dictid=\"b8ccccd9b81692777202ca2fa976d6\">waxy</span> surface that gives it a characteristic 'stuck-on' appearance. It tends to occur in older individuals and is not associated with hyperpigmentation.</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"https://symbiosisonlinepublishing.com/dermatology/dermatology98.php\" data-tags=\"\" height=\"376\" src=\"https://image.prepladder.com/content/wrlhXQpbQOTViup3mauc1723028895.png\" width=\"416\" /></p>\n\n<p><strong>Option B: <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">Malignant</span> melanoma</strong></p>\n\n<p>Malignant <span class=\"customMeta\" data-dictid=\"e42297345d16927771922d2d0dc020\">melanoma</span> is a tumour produced by the <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> transformation of melanocytes, characterized by the development of <span class=\"customMeta\" data-dictid=\"06123ff61a1692777182e19b790ebc\">atypical</span> moles or lesions. While it can present as a darkly <span class=\"customMeta\" data-dictid=\"85dafbf32f1692777195b9d9f035d8\">pigmented</span> patch, it often exhibits asymmetry, <span class=\"customMeta\" data-dictid=\"863f5457381692777190f05632a8b2\">irregular</span> borders, variation in colour, and changes in size over time. Additionally, <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> <span class=\"customMeta\" data-dictid=\"e42297345d16927771922d2d0dc020\">melanoma</span> typically occurs in sun-exposed areas and is less likely to be associated with\u00a0hypertrichosis.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Option D: <span class=\"customMeta\" data-dictid=\"d61ced9a671692777193e04a03c423\">Nevus</span> of Ito</strong></p>\n\n<p>The <span class=\"customMeta\" data-dictid=\"d61ced9a671692777193e04a03c423\">Nevus</span> of Ito manifests as a <span class=\"customMeta\" data-dictid=\"92b4dd0d9516927772013f2e4296b7\">unilateral</span> blue-greyish <span class=\"customMeta\" data-dictid=\"ebad8eb48c1692777191b5de5d04a1\">macular</span> discolouration, often <span class=\"customMeta\" data-dictid=\"8fb8df140b1692777191702bbc9358\">localized</span> in the dermatomal distribution innervated by the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> <span class=\"customMeta\" data-dictid=\"53765334f31692777199cf434360de\">supraclavicular</span> and <span class=\"customMeta\" data-dictid=\"fc380e21321692777191739bd99191\">lateral</span> <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"1e4db8b6ad1692777183683f42d44b\">brachial</span> nerves. <span class=\"customMeta\" data-dictid=\"d69566338f1692777189ff10521054\">Histopathology</span> shows numerous melanocytes\u00a0in\u00a0the\u00a0dermis.</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Nevus_of_Ito\" data-tags=\"\" height=\"450\" src=\"https://image.prepladder.com/content/XBbvdbWP1TdLDuKZL4hj1723028917.png\" width=\"450\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/bmRMEj0uJmvfsEAKPV8Z1723028860.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/L5IosMFqxaTZHKMXLKdZ1730726367.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/7NtJNoPMVKsq7pNkwrly1730726440.mp3"
  },
  {
    "text": "<p>A 3-year-old girl is brought to the clinic for evaluation of a prominent facial birthmark. Upon examination, you observe a port-wine stain covering most of the left side of her face, including the upper eyelid. The mother mentions that her daughter sometimes seems disoriented and has had a few brief seizures. A CT scan of the brain shows tram track calcification. What is the most likely diagnosis?</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Sturge%E2%80%93Weber_syndrome\" data-tags=\"\" height=\"416\" src=\"https://image.prepladder.com/content/Po13XkhvkbC2s5RnCEUz1723028996.png\" width=\"331\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Tubercular Meningitis"
      },
      {
        "id": 2,
        "text": "Sturge-Weber Syndrome"
      },
      {
        "id": 3,
        "text": "Klippel-Trenaunay Syndrome"
      },
      {
        "id": 4,
        "text": "Cutis Marmorata Telangiectatica Congenita"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B)\u00a0Sturge-Weber Syndrome</strong></p>\n\n<p><strong>Explanation</strong>: The clinical presentation of port-wine <span class=\"customMeta\" data-dictid=\"b29a1a16ab1692777199ede1c6e28b\">stain</span> along with the CT findings of Tram track <span class=\"customMeta\" data-dictid=\"a1ee14c673169277718351bfe6afd4\">calcification</span> suggests the diagnosis of Sturge <span class=\"customMeta\" data-dictid=\"0495fb4f8216927772029622eabcaa\">Weber</span> syndrome.</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Sturge%E2%80%93Weber_syndrome\" data-tags=\"\" height=\"476\" src=\"https://image.prepladder.com/content/mwQv9TZVIZJhcDXZYmXF1723201824.png\" width=\"623\" /></p>\n\n<ul>\n\t<li><strong>Sturge <span class=\"customMeta\" data-dictid=\"0495fb4f8216927772029622eabcaa\">Weber</span> syndrome</strong> is a <span class=\"customMeta\" data-dictid=\"d64938bfc81692777193fb87a47c80\">neurocutaneous</span> syndrome characterized by the <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> of port-wine <span class=\"customMeta\" data-dictid=\"b29a1a16ab1692777199ede1c6e28b\">stain</span> in the <span class=\"customMeta\" data-dictid=\"6d1eb38ecf1692777200bb65bbdefb\">trigeminal</span> distribution, <span class=\"customMeta\" data-dictid=\"ca762506461692777190f12b43bb1a\">ipsilateral</span> leptomeningeal <span class=\"customMeta\" data-dictid=\"b1ea59d05a169277718151d680c6a5\">angiomatosis</span> and <span class=\"customMeta\" data-dictid=\"7b1f175723169277719459db16938e\">ocular</span> complications.</li>\n\t<li>Neurological manifestations include convulsions, behavioural problems, <span class=\"customMeta\" data-dictid=\"badba65b4c16927771990edb2d999c\">subnormal</span> intelligence.</li>\n\t<li>Ocular complications include <span class=\"customMeta\" data-dictid=\"ca762506461692777190f12b43bb1a\">ipsilateral</span> glaucoma, buphthalmos, congestion, strabismus.</li>\n\t<li>Plain <span class=\"customMeta\" data-dictid=\"5c71603ac81692777197e2aa1e7fd3\">radiograph</span> of skull shows the characteristic tram-track sign. CT is the best to detect the calcifications and <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> (Preferred <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> neuroimaging) shows changes such as <span class=\"customMeta\" data-dictid=\"721937292f1692777185048f04ce29\">cortical</span> <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> and leptomeningeal enhancement.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Klippel-Trenaunay Syndrome (KTS) (Option C)</strong></p>\n\n<p>It is characterized by three features:</p>\n\n<ul>\n\t<li>Port wine stain</li>\n\t<li>Venous and <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> malformation</li>\n\t<li>Bony and soft tissue <span class=\"customMeta\" data-dictid=\"3baac9012a1692777189cb4dc70c04\">hypertrophy</span> of an extremity</li>\n</ul>\n\n<p>It is diagnosed only if at least 2 out of the 3 features are present. Radiological <span class=\"customMeta\" data-dictid=\"fe3220767716927771892419444041\">imaging</span> shows soft tissue overgrowth.<br />\n\u00a0</p>\n\n<p><img alt=\"\" data-author=\"Kiran Singh \" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://www.wikidoc.org/index.php/Klippel-Trenaunay-Weber_syndrome\" data-tags=\"\" height=\"355\" src=\"https://image.prepladder.com/content/MOSjddIBaHTNv9Sommht1723029149.png\" width=\"416\" /></p>\n\n<p><strong>Cutis Marmorata Telangiectatica Congenita (Option D)</strong></p>\n\n<p>Also termed <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> <span class=\"customMeta\" data-dictid=\"53f2eb017116927771918255da4e8b\">livedo</span> reticularis, is a rare condition present at birth, characterized by a red-purple <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> pattern. Typically appears on limbs, intensifies with cold, crying, or physical activity. Skin <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> may occur alongside. While often isolated, <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> <span class=\"customMeta\" data-dictid=\"53f2eb017116927771918255da4e8b\">livedo</span> reticularis can also coincide with other <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> anomalies.</p>\n\n<p>\u00a0</p>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Livedo_reticularis\" data-tags=\"\" height=\"201\" src=\"https://image.prepladder.com/content/emS7TvsjNQONPvpXRwlv1723029162.png\" width=\"416\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/Po13XkhvkbC2s5RnCEUz1723028996.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/mwQv9TZVIZJhcDXZYmXF1723201824.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/TvdA6dkyHTN9RCkUkPz31730869945.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/iJtZHJXa526VuwryPGT61730870018.mp3"
  },
  {
    "text": "<p>A 30-year-old man presents to the clinic with a sudden onset of red, raised, and itchy wheals on his arms, legs, and torso. The patient notes that the welts move around and change shape over time, resolving in one area and appearing in another. The patient denies any known allergies, recent illnesses, or new medications. Upon examination, you observe that there is no swelling of the lips, tongue, or throat. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hereditary Angioedema"
      },
      {
        "id": 2,
        "text": "Erythema nodosum"
      },
      {
        "id": 3,
        "text": "Urticaria"
      },
      {
        "id": 4,
        "text": "Fixed drug eruption"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C)\u00a0Urticaria</strong></p>\n\n<p><strong>Explanation:</strong>Urticarial lesions are intensely pruritic, circumscribed, raised, and erythematous plaques, often with central pallor.</p>\n\n<ul>\n\t<li>They are due to <span class=\"customMeta\" data-dictid=\"7aa9f8d34616927772018c11493bbc\">vasodilation</span> and increased <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> <span class=\"customMeta\" data-dictid=\"1c7103a9b516927771955682b6aaa4\">permeability</span> causing <span class=\"customMeta\" data-dictid=\"532334711316927771865e5309b763\">dermal</span> edema. Mostly <span class=\"customMeta\" data-dictid=\"1f95a52091169277719133cc234fe0\">Mast</span> cell-dependent Can also be <span class=\"customMeta\" data-dictid=\"3c5739595d16927771839e61a5855c\">Bradykinin</span> mediated.</li>\n\t<li>Urticarial lesions typically develop over minutes to hours and resolve in hours to a day without <span class=\"customMeta\" data-dictid=\"a459f313d9169277719789fdfb7ada\">residual</span> markings.</li>\n\t<li>There may be accompanying angioedema, which is a non-pitting <span class=\"customMeta\" data-dictid=\"7cb424e4921692777199f9951be2ce\">submucosal</span> or <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> oedema commonly seen in lips and eyelids.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC0\" data-source=\"https://www.wikidata.org/wiki/Q187440\" data-tags=\"\" height=\"322\" src=\"https://image.prepladder.com/content/WbI3i2jTOmcBKkTWFVoR1723029237.png\" width=\"416\" /></p>\n\n<p><strong>Classification: </strong></p>\n\n<p>Urticaria is classified as either <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> or chronic.</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:655px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Acute Urticaria</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Chronic urticaria</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Periodic outbreaks of urticarial lesions that resolve within six weeks.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Urticaria that persists beyond six weeks</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Infections: <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">Viral</span> infections.</li>\n\t\t\t\t<li>Drugs: Penicillin, <span class=\"customMeta\" data-dictid=\"e6a50302661692777199484845ac1d\">sulfa</span> drugs.</li>\n\t\t\t\t<li>Ingestion: Food items</li>\n\t\t\t\t<li>Inhalation: Pollen.</li>\n\t\t\t\t<li>Idiopathic.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Chronic <span class=\"customMeta\" data-dictid=\"f71e485d131692777199151d1076d2\">spontaneous</span> <span class=\"customMeta\" data-dictid=\"7e814d15c31692777201fe0d9c1a61\">urticaria</span> (autoimmune, pseudo allergic, infection, and idiopathic).</li>\n\t\t\t\t<li>Physical/ <span class=\"customMeta\" data-dictid=\"c6f527a009169277719084484976fa\">inducible</span> urticaria.</li>\n\t\t\t\t<li>Urticarial vasculitis.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Salient features of physical/inducible Urticaria:</strong></p>\n\n<p><img alt=\"\" data-author=\"Pradeep\" data-hash=\"\" data-license=\"PrepLadder Copyrights\" data-source=\"PrepLadder Copyrights\" data-tags=\"\" height=\"298\" src=\"https://image.prepladder.com/content/NAocdasanjZAc54QkwaQ1723185544.png\" width=\"559\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Management:</strong></p>\n\n<ul>\n\t<li>2nd generation antihistamines (Dose can be increased up to 4 folds.</li>\n\t<li>The biological agent used in <span class=\"customMeta\" data-dictid=\"7e814d15c31692777201fe0d9c1a61\">Urticaria</span> is Omalizumab.</li>\n\t<li>Monteleukast and <span class=\"customMeta\" data-dictid=\"fa041055ec16927771858fe49c76d3\">Cyclosporine</span> can also be used.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/WbI3i2jTOmcBKkTWFVoR1723029237.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/2s7f3ycex2JLYwAICtV21730870099.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/81JTfHzFqtG21Luwnqyb1730870184.mp3"
  },
  {
    "text": "<p>A 32-year-old woman presents with recurrent episodes of swelling in her face, lips, and throat, which she says occur intermittently and without any clear triggers. She has difficulty breathing during these episodes and She denies any rash or itching. She also reports a family history of similar symptoms affecting her mother and her maternal grandmother.</p>\n\n<p>Which of the following is the most likely diagnosis based on the patient's presentation and family history?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Aquagenic pruritis"
      },
      {
        "id": 2,
        "text": "Urticarial vasculitis"
      },
      {
        "id": 3,
        "text": "Hereditary angioedema"
      },
      {
        "id": 4,
        "text": "Anaphylaxis."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"ee5175c06116927771880846d1cbe0\">Hereditary</span> angioedema</strong></p>\n\n<p><strong>Explanation</strong>: <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">Recurrent</span> episodes of swelling, lack of <span class=\"customMeta\" data-dictid=\"dc75edd604169277719735ac5b4d5b\">rash</span> (wheals) or itching, Difficulty breathing, and family history suggest a diagnosis of <span class=\"customMeta\" data-dictid=\"ee5175c06116927771880846d1cbe0\">Hereditary</span> angioedema.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Hereditary angioedema:</strong></p>\n\n<ul>\n\t<li>Hereditary <span class=\"customMeta\" data-dictid=\"5f26e5a9e916927771816a407f7545\">angioedema</span> (HAE) is a rare condition characterized by <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> episodes of angioedema, without <span class=\"customMeta\" data-dictid=\"7e814d15c31692777201fe0d9c1a61\">urticaria</span> (also called wheals) or pruritus, which most often affects the skin or mucosal tissues of the upper <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> and <span class=\"customMeta\" data-dictid=\"b3a647ce2516927771881427f56c1d\">gastrointestinal</span> tracts.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"619dd7032e16927771888def2294b0\">HAE</span> arise from <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> or <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> of the <span class=\"customMeta\" data-dictid=\"b48686fbfe169277718345fbd3d992\">C1 inhibitor</span> (C1-INH).</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"5f26e5a9e916927771816a407f7545\">angioedema</span> that occurs in <span class=\"customMeta\" data-dictid=\"619dd7032e16927771888def2294b0\">HAE</span> due to C1-INH <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> (HAE-C1-INH) results from excessive production of bradykinin, a potent vasodilatory mediator.</li>\n\t<li>It is not histamine-mediated, hence there are no wheals associated.</li>\n</ul>\n\n<p><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://en.wikipedia.org/wiki/Angioedema\" data-tags=\"\" height=\"288\" src=\"https://image.prepladder.com/content/a4dP015qrFd2raekdhhe1723029326.png\" width=\"470\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Types:</strong></p>\n\n<ul>\n\t<li>Type 1: <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">Deficiency</span> in C1 inhibitor.</li>\n\t<li>Type 2: <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">Defect</span> in C1 inhibitor.</li>\n\t<li>Type 3: Normal levels and function of C1 inhibitor.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p><strong>Management:</strong></p>\n\n<ul>\n\t<li>C1 <span class=\"customMeta\" data-dictid=\"b5fb56a28b1692777190396ae8b625\">inhibitor</span> concentrate (plasma-derived)</li>\n\t<li>Recombinant C1 inhibitor</li>\n\t<li>Bradykinin B2-receptor antagonist: Icatibant</li>\n\t<li>Kallikrein inhibitor: Ecallantide</li>\n\t<li>Fresh frozen plasma.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><img alt=\"HA\" data-author=\"\" data-hash=\"8052\" data-license=\"\" data-source=\"\" data-tags=\"April2025\" src=\"https://image.prepladder.com/notes/RHiaFBQkqkwxlXkI9Ioa1744081954.png\" /></p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>Aquagenic pruritus(<strong>Option A</strong>)\u00a0is a condition where a person experiences intense <span class=\"customMeta\" data-dictid=\"8f179d376f16927771905338bc9387\">itching</span> after coming into contact with water, regardless of temperature.</p>\n\n<ul>\n\t<li>The <span class=\"customMeta\" data-dictid=\"8f179d376f16927771905338bc9387\">itching</span> can occur on various body parts and typically presents without any wheals.</li>\n\t<li>This condition may be associated with underlying medical issues such as <span class=\"customMeta\" data-dictid=\"7fd466a9c016927771962d5b061b0f\">polycythemia</span> vera</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>Urticarial <span class=\"customMeta\" data-dictid=\"fcb3e0d7911692777201ffb9695dea\">vasculitis</span> (<strong>Option B)</strong>\u00a0is a <span class=\"customMeta\" data-dictid=\"b43152fe1c1692777184f5008f113c\">chronic urticaria</span> characterized by <span class=\"customMeta\" data-dictid=\"14ccc7cf1c1692777189d4fb9d1fb5\">hives</span> that last longer than 24 hours and leave behind bruising or <span class=\"customMeta\" data-dictid=\"30261213bf16927771898b5d2f245d\">hyperpigmentation</span> when they resolve.</p>\n\n<ul>\n\t<li>This condition involves <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> of small blood vessels (Leukocytoclastic vasculitis) in the skin.</li>\n\t<li>They are associated with <span class=\"customMeta\" data-dictid=\"67e237a57c16927771859803f93ab3\">connective</span> tissue diseases and haematological malignancies.</li>\n</ul>\n\n<p><br />\n\u00a0</p>\n\n<p>Anaphylaxis (<strong>Option D)</strong>\u00a0is an acute, life-threatening condition associated with urticaria, angioedema, hypotension, and bronchoconstriction.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/a4dP015qrFd2raekdhhe1723029326.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/8F7oJXezMscwvQQwx1Am1730870262.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/XMfoyzNVLNafhMT4ylEx1730870348.mp3"
  }
];
        let quizName = '26 Adverse Drug Reactions, Pediatric Dermatoses, Urticaria And Angioedema';
        const quizFilename = '26-adverse-drug-reactions-pediatric-dermatoses-urticaria-and-angioedema-65711a8f.html';
        let hierarchy = ["PrepLadder", "qBank", "Dermatology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>