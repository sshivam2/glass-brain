<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>82 Previous Year Questions - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">26</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>What is the term used to describe the type of cell in the body that has the ability to give rise to the highest number of other cells?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Totipotent"
      },
      {
        "id": 2,
        "text": "Multipotent"
      },
      {
        "id": 3,
        "text": "Pluripotent"
      },
      {
        "id": 4,
        "text": "Lineage stem cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct option: A</strong></p>\n\n<ul>\n\t<li>Totipotent cells are capable of differentiating into all cell types, including the cells of the <span class=\"customMeta\" data-dictid=\"30bf2366951692777187735fffe4b4\">embryo</span> and the <span class=\"customMeta\" data-dictid=\"2b266b12d916927771875d47756588\">extraembryonic</span> tissues. They have the ability to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> all cell lineages, both embryonic and extraembryonic. Totipotent cells are found in the early stages of embryonic development, up to the 4-cell stage. They have the highest developmental potential and can give rise to a complete organism.</li>\n</ul>\n\n<p><strong>Incorrect options: </strong></p>\n\n<p><strong>Option B: </strong>Multipotent: Multipotent cells are capable of differentiating into multiple, but not all, cell types. They can give rise to cells of a closely related <span class=\"customMeta\" data-dictid=\"82d797e19a16927771840c7fb5be53\">cell lineage</span> or tissue type.</p>\n\n<p><strong>Option C: </strong>Pluripotent: <span class=\"customMeta\" data-dictid=\"25a049eb321692777195ee5ad55371\">Pluripotent</span> cells can <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> into cells of all three <span class=\"customMeta\" data-dictid=\"b3623bc67216927771889eb144d9ed\">germ</span> layers (endoderm, mesoderm, and ectoderm) but cannot <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> the <span class=\"customMeta\" data-dictid=\"2b266b12d916927771875d47756588\">extraembryonic</span> tissues.</p>\n\n<p><strong>Option D: </strong>Lineage stem cells: This term is not commonly used in the context of cell potency. It may refer to stem cells that are capable of differentiating into specific lineages but not all cell types.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient underwent ileal resection and subsequently developed anemia along with peripheral neuropathy and features of SACD. Laboratory findings show hemoglobin (Hb) of 9 g/dL and mean corpuscular volume (MCV) of 110 fL.</p>\n\n<p>What is the most likely cause of his anemia?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Iron deficiency anemia"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Folic acid deficiency"
      },
      {
        "id": 4,
        "text": "Sideroblastic anemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Vitamin B12 deficiency</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Ileal <span class=\"customMeta\" data-dictid=\"17b5bd50d91692777197ea9cb7f468\">resection</span> can lead to vitamin B12 deficiency, as the <span class=\"customMeta\" data-dictid=\"16b76d1d1c1692777200240efcb0e2\">terminal</span> <span class=\"customMeta\" data-dictid=\"cb1eb1c704169277718933136caf06\">ileum</span> is the primary site for <span class=\"customMeta\" data-dictid=\"5fcb9396d1169277718069dd7fa788\">absorption</span> of the vitamin B12\u2013intrinsic factor complex; this <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> commonly results in macrocytic anemia, <span class=\"customMeta\" data-dictid=\"014b1a7b931692777197f57251720d\">reflected</span> by an elevated MCV of 110 fL.</p>\n\n<ul>\n\t<li><strong>Terminal ileum</strong>: Site of vitamin B12 <span class=\"customMeta\" data-dictid=\"5fcb9396d1169277718069dd7fa788\">absorption</span> (B12\u2013intrinsic factor complex).\n\n\t<ul>\n\t\t<li>Ileal <span class=\"customMeta\" data-dictid=\"17b5bd50d91692777197ea9cb7f468\">resection</span> \u2192 impaired B12 <span class=\"customMeta\" data-dictid=\"5fcb9396d1169277718069dd7fa788\">absorption</span> \u2192 Vitamin B12 deficiency.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Vitamin B12 deficiency</strong>:\n\t<ul>\n\t\t<li>Causes macrocytic (megaloblastic) <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> \u2192 MCV > 100 fL.</li>\n\t\t<li>May present with neurological symptoms (e.g., paresthesia, ataxia).</li>\n\t\t<li><strong>Lab findings</strong>:\n\t\t<ul>\n\t\t\t<li>\u2193 Hemoglobin</li>\n\t\t\t<li>\u2191 MCV (e.g., 110 fL)</li>\n\t\t\t<li>\u2191 LDH, \u2191 <span class=\"customMeta\" data-dictid=\"2f73e160ba1692777190d65065c95b\">indirect</span> bilirubin, \u2193 <span class=\"customMeta\" data-dictid=\"249592767b16927771976df58de24d\">reticulocyte</span> count</li>\n\t\t</ul>\n\t\t</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Iron <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> (Option A) </strong>is unlikely because it typically causes <span class=\"customMeta\" data-dictid=\"d09dc1da551692777192706b7f882e\">microcytic</span> <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> (low MCV), not macrocytic anemia.</p>\n\n<p><strong>Folic acid <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> (Option C) </strong>causes macrocytic anemia, but <span class=\"customMeta\" data-dictid=\"c66705291e1692777203ed3498a606\">folate</span> is absorbed in the jejunum, not the ileum, making it less likely after ileal resection.</p>\n\n<p><strong>Sideroblastic <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> (Option D) </strong>usually presents with <span class=\"customMeta\" data-dictid=\"d09dc1da551692777192706b7f882e\">microcytic</span> or <span class=\"customMeta\" data-dictid=\"132fe0557f1692777186f7d81c3999\">dimorphic</span> anemia, and it's not related to ileal absorption.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Bernard-Soulier syndrome is caused by a defect in which of the following platelet glycoproteins?</p>",
    "choices": [
      {
        "id": 1,
        "text": "GpIIb/IIIa"
      },
      {
        "id": 2,
        "text": "GpIb/IX complex"
      },
      {
        "id": 3,
        "text": "GpIa/IIa"
      },
      {
        "id": 4,
        "text": "GpIV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - GpIb/IX complex:</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Bernard-Soulier syndrome is caused by a <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> in the GpIb/IX complex on platelets.</p>\n\n<ul>\n\t<li>GpIb/IX complex is the <span class=\"customMeta\" data-dictid=\"9e4959f6f316927771978bb152d440\">receptor</span> for von Willebrand factor (vWF) \u2192 mediates <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> to <span class=\"customMeta\" data-dictid=\"debc628674169277719936b6424a58\">subendothelial</span> <span class=\"customMeta\" data-dictid=\"d215f4a56c16927771842f34a24156\">collagen</span> after <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> injury.</li>\n\t<li>In Bernard\u2013Soulier syndrome, this <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> step is impaired \u2192 <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"7803d1e7ea169277719552dc5e49d4\">plug</span> formation.</li>\n\t<li>Labs/Findings:\n\t<ul style=\"list-style-type:circle\">\n\t\t<li>Normal or low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count</li>\n\t\t<li>Prolonged <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> time</li>\n\t\t<li>Giant platelets on <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> smear</li>\n\t\t<li>Normal <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> with ADP, collagen, epinephrine, but absent <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> with <span class=\"customMeta\" data-dictid=\"94ec122d611692777197d287df7f88\">ristocetin</span> (not corrected by adding normal plasma, unlike vWD).</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>GpIIb/IIIa (Option A)</strong>:</p>\n\n<ul>\n\t<li>Function: Binds <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> \u2192 <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <strong>aggregation</strong>.</li>\n\t<li>Defect causes <strong>Glanzmann thrombasthenia</strong>, not BSS.</li>\n\t<li>Lab: Normal <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count, <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> with all agonists except ristocetin.</li>\n</ul>\n\n<p><strong>GpIa/IIa (Option C):</strong></p>\n\n<ul>\n\t<li>Function: Binds <span class=\"customMeta\" data-dictid=\"d215f4a56c16927771842f34a24156\">collagen</span> (supports <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> adhesion).</li>\n\t<li>Defects are rare and cause mild <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorders, not the classic BSS picture.</li>\n</ul>\n\n<p><strong>GpIV (Option D): </strong>Also called CD36; role in <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> and <span class=\"customMeta\" data-dictid=\"f860186e9616927771987b23ea8a1a\">scavenger</span> <span class=\"customMeta\" data-dictid=\"9e4959f6f316927771978bb152d440\">receptor</span> function.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A young boy presents with joint swelling after a fall. Lab investigations show normal PT and raised aPTT. What is the most likely diagnosis?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Von Willebrand Disease"
      },
      {
        "id": 2,
        "text": "Hemophilia"
      },
      {
        "id": 3,
        "text": "Iron Deficiency Anaemia (IDA)"
      },
      {
        "id": 4,
        "text": "Platelet function disorder"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B \u2013</strong> <strong>Haemophilia:</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>This presentation matches <strong>haemophilia</strong> because:</p>\n\n<ul style=\"list-style-type:circle\">\n\t<li>\n\t<p><strong>Joint <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> after trauma</strong> \u2192 suggests hemarthrosis, which is typical of <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> factor deficiencies, especially haemophilia.</p>\n\t</li>\n\t<li>\n\t<p><strong>Normal PT</strong> \u2192 <span class=\"customMeta\" data-dictid=\"810de80cac1692777187a436b4315b\">extrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> is intact.</p>\n\t</li>\n\t<li>\n\t<p><strong>Prolonged aPTT</strong> \u2192 <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> (Factors VIII, IX, XI).</p>\n\t</li>\n\t<li>\n\t<p>Haemophilia A = Factor VIII deficiency; Haemophilia B = Factor IX deficiency.</p>\n\t</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Von Willebrand Disease (Option A): </strong> usually has prolonged aPTT (due to low factor VIII) <em>and</em> <span class=\"customMeta\" data-dictid=\"da3e60ac9a16927771933cdfe4327f\">mucocutaneous</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> (epistaxis, menorrhagia), not deep joint bleeds as the main feature.</p>\n\n<p><strong>Iron <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">Deficiency</span> Anaemia (IDA) (Option C)</strong>: causes <span class=\"customMeta\" data-dictid=\"dd5d862f051692777194647422e1c9\">pallor</span> and fatigue, not isolated <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> abnormalities.</p>\n\n<p><strong>Platelet function disorder (Option D):</strong> causes mucosal <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> and petechiae, not hemarthrosis; PT and aPTT are usually normal.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is not a haemostatic agent?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Zeolite"
      },
      {
        "id": 2,
        "text": "Chitosan"
      },
      {
        "id": 3,
        "text": "Boric acid"
      },
      {
        "id": 4,
        "text": "Kaolin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C.</strong></p>\n\n<p>Boric acid: <span class=\"customMeta\" data-dictid=\"2fb2437f1e16927771835cc6863503\">Boric acid</span> is not commonly used as a <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> agent. It is primarily used in various industrial and <span class=\"customMeta\" data-dictid=\"b9cdc3b7c21692777195f04d3922c8\">pharmaceutical</span> applications, but it does not have specific <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> properties.</p>\n\n<p><strong>Incorrect Option</strong></p>\n\n<p><strong>Option A</strong>: Zeolite: <span class=\"customMeta\" data-dictid=\"f8a052f6a81692777202ec615d3833\">Zeolite</span> is a mineral-based compound that has been used as a <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> agent. It works by absorbing water and promoting <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> formation at the site of bleeding.</p>\n\n<p><strong>Option B.</strong> Chitosan: <span class=\"customMeta\" data-dictid=\"c23bcccc8d169277718400cb271c9c\">Chitosan</span> is a <span class=\"customMeta\" data-dictid=\"96eaffc09c169277718340811382cb\">biopolymer</span> derived from chitin, which is found in the <span class=\"customMeta\" data-dictid=\"06ebdc8f3d16927771876706d7eeb8\">exoskeleton</span> of crustaceans. Chitosan-based products have been used as <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> agents due to their ability to promote <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> and accelerate wound healing.</p>\n\n<p><strong>Option D</strong>. Kaolin: <span class=\"customMeta\" data-dictid=\"9a504443b51692777190b7d2b2de65\">Kaolin</span> is a naturally occurring clay mineral that has <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> properties. It acts by activating the <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> <span class=\"customMeta\" data-dictid=\"6826aa04ef16927771833336e53730\">cascade</span> and promoting <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> formation.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following statements about Von Willebrand's disease is incorrect?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Type 2 von Willebrand disease is associated with a moderate bleeding tendency."
      },
      {
        "id": 2,
        "text": "Type 3 von Willebrand disease is associated with a complete absence of von Willebrand factor."
      },
      {
        "id": 3,
        "text": "Type 1 von Willebrand disease presents with severe bleeding since childhood."
      },
      {
        "id": 4,
        "text": "Type 2 von Willebrand disease includes subtypes with varying defects in the von Willebrand factor."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C - <span class=\"customMeta\" data-dictid=\"ebcb7136251692777201ef4b5c5718\">Type 1</span> von Willebrand disease presents with severe <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> since childhood:</strong></p>\n\n<ul>\n\t<li>Type 1 von Willebrand disease presents with mild <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> of Von Willebrand factor and, hence, mild bleeding.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Options A, B, and D</strong> are correct regarding Von Willebrand's disease.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Stellate granuloma is found in:</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cat scratch disease"
      },
      {
        "id": 2,
        "text": "Leprosy"
      },
      {
        "id": 3,
        "text": "Coccidomycosis"
      },
      {
        "id": 4,
        "text": "Histoplasmosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct option: A</strong></p>\n\n<ul>\n\t<li>Stellate <span class=\"customMeta\" data-dictid=\"2334b7498b1692777188fa8b2eee36\">granuloma</span> is a histopathological finding characterized by <span class=\"customMeta\" data-dictid=\"bcca1a959c16927771845f711facaf\">central necrosis</span> surrounded by histiocytes, giant cells, and lymphocytes arranged in a <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> or star-shaped pattern. It is commonly associated with cat scratch disease, which is caused by the <span class=\"customMeta\" data-dictid=\"ff3e9793d01692777182b598b4a090\">bacterium</span> <span class=\"customMeta\" data-dictid=\"f19dcceb1b1692777182a7202283a9\">Bartonella</span> henselae. In cat scratch disease, <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> granulomas can be found in the affected <span class=\"customMeta\" data-dictid=\"4df97a6cbf169277719172fd1af767\">lymph</span> nodes, indicating the <span class=\"customMeta\" data-dictid=\"dc6add5cf91692777189b30a6bae38\">immune response</span> to the infection.</li>\n</ul>\n\n<p><strong>Incorrect options: </strong></p>\n\n<p><strong>Option B: </strong>Leprosy: <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">Stellate</span> granulomas are not a characteristic finding in leprosy. <span class=\"customMeta\" data-dictid=\"f200a5b7181692777191c4f24b2a3e\">Leprosy</span> is associated with <span class=\"customMeta\" data-dictid=\"9e1f97f6ad169277718805c2dd35c1\">granulomatous</span> <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> but presents with different histopathological features.</p>\n\n<p><strong>Option C: </strong>Coccidiomycosis: Coccidiomycosis is a fungal infection caused by <span class=\"customMeta\" data-dictid=\"2d9089cee0169277718436d8886926\">Coccidioides</span> species and is not typically associated with <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> granulomas.</p>\n\n<p><strong>Option D: </strong>Histoplasmosis: <span class=\"customMeta\" data-dictid=\"006d878cdb1692777189ed467e63d2\">Histoplasmosis</span> is a fungal infection caused by <span class=\"customMeta\" data-dictid=\"1645996cc4169277718966ff366843\">Histoplasma</span> capsulatum and does not typically present with <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> granulomas.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Leiden mutation is of factor:</p>",
    "choices": [
      {
        "id": 1,
        "text": "V"
      },
      {
        "id": 2,
        "text": "VIII"
      },
      {
        "id": 3,
        "text": "I"
      },
      {
        "id": 4,
        "text": "X"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Option A:\u00a0V</strong></p>\n\n<ul>\n\t<li>Leiden <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> is a genetic <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> of factor V, also known as <span class=\"customMeta\" data-dictid=\"14693f062c16927772024df5839c43\">Factor V</span> Leiden. <span class=\"customMeta\" data-dictid=\"14693f062c16927772024df5839c43\">Factor V</span> is a protein involved in the blood <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> process. The Leiden <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> refers to a specific <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> in the <span class=\"customMeta\" data-dictid=\"14693f062c16927772024df5839c43\">factor V</span> gene, which leads to an increased risk of <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> <span class=\"customMeta\" data-dictid=\"40d68b98721692777183c42090e023\">blood clot</span> formation.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option B: Factor VIII-</strong> <span class=\"customMeta\" data-dictid=\"65dc2273b5169277720208ba704b7f\">Factor VIII</span> is another protein involved in the blood <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> process, but it is not associated with the Leiden mutation.</p>\n\n<p><strong>Option C: Factor I-</strong> Factor I, also known as fibrinogen, is a protein involved in the formation of blood clots, but it is not associated with the Leiden mutation.</p>\n\n<p><strong>Option D: Factor X-</strong> <span class=\"customMeta\" data-dictid=\"69e0db00bd169277720233cd39735b\">Factor X</span> is another protein involved in the blood <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> process, but it is not associated with the Leiden mutation.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Stellate granuloma is found in:</p>",
    "choices": [
      {
        "id": 1,
        "text": "Cat scratch disease"
      },
      {
        "id": 2,
        "text": "Leprosy"
      },
      {
        "id": 3,
        "text": "Coccidomycosis"
      },
      {
        "id": 4,
        "text": "Histoplasmosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Cat scratch disease</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li><strong>Stellate granulomas</strong> are <strong>irregular star-shaped granulomas</strong> commonly found in <strong>Cat Scratch Disease (CSD)</strong>, caused by <strong>Bartonella henselae</strong>.</li>\n\t<li><strong>Causative agent:</strong> <span class=\"customMeta\" data-dictid=\"f19dcceb1b1692777182a7202283a9\">Bartonella</span> henselae (transmitted via cat scratches/bites).</li>\n\t<li><strong>Histology: Stellate-shaped </strong>granulomas with <span class=\"customMeta\" data-dictid=\"bcca1a959c16927771845f711facaf\">central necrosis</span> and<strong> <span class=\"customMeta\" data-dictid=\"041f0e547a1692777193350b3f7d39\">neutrophilic</span> infiltrate.</strong></li>\n\t<li><strong>Symptoms: </strong>Painful <span class=\"customMeta\" data-dictid=\"344bcb4e391692777191307c1e0074\">lymphadenopathy</span> (axillary, cervical) with fever. Resolves spontaneously in immunocompetent individuals.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Leprosy (Option B)</strong> granulomas contain foamy macrophages (Virchow cells) and Langhans giant cells, not <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> granulomas.</p>\n\n<p><strong>Coccidiomycosis</strong> <strong>(Option C)</strong> forms <strong>caseating granulomas</strong>, not <span class=\"customMeta\" data-dictid=\"41b4e6c32f169277719986f77fbe28\">stellate</span> granulomas.</p>\n\n<p><strong>Histoplasmosis</strong> <strong>(Option D)</strong> forms <strong>well-defined granulomas with caseation</strong> commonly found in the <strong>lungs</strong>.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 26-year-old female with a bleeding disorder following autosomal dominant inheritance. She gave the history of her father and sister having the same bleeding disorders. What is the most likely disorder?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Von Willebrand disease"
      },
      {
        "id": 2,
        "text": "Hemophilia A"
      },
      {
        "id": 3,
        "text": "Christmas disease"
      },
      {
        "id": 4,
        "text": "Factor X deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Von Willebrand disease</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>Von Willebrand disease (VWD)</strong> is the most common inherited <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorder caused by <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> or deficient <strong>von Willebrand factor (vWF)</strong>.</li>\n\t<li>It follows an <strong>autosomal <span class=\"customMeta\" data-dictid=\"18e7ddb7841692777186f7e78b2206\">dominant inheritance</span> pattern</strong>, affecting both males and females, with a 50% chance of passing the disorder to offspring.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<ul>\n\t<li>Von Willebrand disease is clinically and molecularly heterogeneous, with three identified types, each exhibiting a variety of phenotypes.</li>\n</ul>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:720px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>vWD type 1</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>vWD Type 2</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>vWD <span class=\"customMeta\" data-dictid=\"6f809a27121692777201d1ccde5ace\">Type 3</span> </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Autosomal dominant.</li>\n\t\t\t\t<li>The most common type.</li>\n\t\t\t\t<li><strong>Mild to moderate </strong>vWF deficiency.</li>\n\t\t\t\t<li>Quantitative defect.</li>\n\t\t\t\t<li>Point substitutions prevent the <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">vWF</span> protein from maturing or cause it to leave the <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> quickly.</li>\n\t\t\t</ul>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Autosomal dominant.</li>\n\t\t\t\t<li><strong>Qualitative defect.</strong></li>\n\t\t\t</ul>\n\n\t\t\t<p><br />\n\t\t\t<strong>Types: </strong>2A, 2B, 2M, 2N</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>2A (<strong>Most common</strong>) - Decrease in binding between <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">vWF</span> and Gp1b/9 <span class=\"customMeta\" data-dictid=\"7f17ae677a16927771925cfc2b7972\">Missense</span> mutations cause faulty <span class=\"customMeta\" data-dictid=\"fdce63b86616927771934a6fba441a\">multimer</span> formation \u2192 the most active forms of vWF, i.e. large- and intermediate-sized multimers are absent.</li>\n\t\t\t\t<li>2B - Increase in binding between <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">vWF</span> and Gp1b/9</li>\n\t\t\t\t<li>2M - VWF-dependent <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> is decreased. <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">VWF</span> binding to platelets is impaired. Type 2M VWD typically has mild to moderate <span class=\"customMeta\" data-dictid=\"da3e60ac9a16927771933cdfe4327f\">mucocutaneous</span> bleeding</li>\n\t\t\t\t<li>2N - There is a marked decline in the binding <span class=\"customMeta\" data-dictid=\"227269f3ec1692777180d76a7898dd\">affinity</span> for factor VIII. The level of <span class=\"customMeta\" data-dictid=\"65dc2273b5169277720208ba704b7f\">factor VIII</span> is lower when compared to the VWF: Ag. This led to misdiagnosis as haemophilia A.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Autosomal recessive</strong>.</li>\n\t\t\t\t<li>Quantitative defect.</li>\n\t\t\t\t<li>Produced by <strong>frameshift mutations or deletions </strong>affecting both alleles (autosomal recessive), which produce <strong>little or no vWF. </strong></li>\n\t\t\t\t<li>Factor VIII levels are also lowered because <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">vWF</span> stabilizes <span class=\"customMeta\" data-dictid=\"65dc2273b5169277720208ba704b7f\">factor VIII</span> in the blood, and the resulting <strong>bleeding condition is severe.</strong></li>\n\t\t\t</ul>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Hemophilia A</strong> <strong>(Option B) </strong>is an <strong>X-linked recessive</strong> disorder that mainly affects males, with females being carriers. This makes it an unlikely diagnosis for this patient, who has a <strong>family history involving females.</strong></p>\n\n<p><strong>Christmas disease</strong> <strong>(Option C)</strong> is an <strong>X-linked recessive</strong> disorder; hence, this condition is primarily seen in males, and it is less likely to be the cause of an autosomal <span class=\"customMeta\" data-dictid=\"18e7ddb7841692777186f7e78b2206\">dominant inheritance</span> pattern. <strong> </strong></p>\n\n<p><strong>Factor X deficiency</strong> <strong>(Option D)</strong> is a <strong>rare <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorder</strong> that can be inherited in autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> patterns, which causes the <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> process to take longer than normal.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A young patient presents with a large retroperitoneal haemorrhage and a history of intermittent knee swelling during strenuous exercise. There is no history of mucosal bleeding. Which of the following deficiencies is responsible for the condition mentioned above?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Factors VIII and IX"
      },
      {
        "id": 2,
        "text": "GP1b/IX"
      },
      {
        "id": 3,
        "text": "Von Willebrand factor"
      },
      {
        "id": 4,
        "text": "Lupus anticoagulant"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Factors VIII and IX</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The patient's symptoms (large <span class=\"customMeta\" data-dictid=\"5d0f37715816927771973ecda21336\">retroperitoneal</span> haemorrhage and knee swelling) suggest <strong>haemophilia</strong>, which is typically caused by deficiencies in <strong>Factors VIII (Hemophilia A) or IX (Hemophilia B)</strong>.</li>\n\t<li>This condition is characterised by <span class=\"customMeta\" data-dictid=\"f71e485d131692777199151d1076d2\">spontaneous</span> or trauma-induced joint and muscle bleeds but not mucosal bleeding, which is distinct from von Willebrand disease or <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> dysfunction.</li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Aspect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Hemophilia A</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Hemophilia B</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Deficient factor</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Factor 8 deficiency</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Factor 9 deficiency</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Pathway affected</strong></p>\n\t\t\t</td>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Intrinsic <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> defect</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>APTT</strong></p>\n\t\t\t</td>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Elevated</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>BT, PT, and TT</strong></p>\n\t\t\t</td>\n\t\t\t<td colspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Normal</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Cryoprecipitate, <span class=\"customMeta\" data-dictid=\"b566321fe8169277719716b1cf4df0\">Recombinant</span> factor 8 (Humate)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\">Fresh frozen plasma</p>\n\n\t\t\t<p style=\"text-align: center;\">(FFP)</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li><strong>Hemophilia C</strong> is due to <strong>factor 11 deficiency</strong><strong>,</strong> an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> condition. <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">Bleeding</span> episodes are generally <strong>milder </strong>than in <span class=\"customMeta\" data-dictid=\"904d77ba8a16927771882396edef7c\">Hemophilia</span> A and B.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>GP1b/IX </strong><strong>(Option B)</strong>: This is associated with <strong>Bernard-Soulier syndrome</strong>, a <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> disorder characterised by <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> adhesion. It leads to mucosal bleeding, which is absent in this case.</p>\n\n<p><strong>Von Willebrand factor </strong><strong>(Option C)</strong> <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> causes <strong>von Willebrand disease</strong>, which primarily results in mucosal <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> (e.g., nosebleeds, <span class=\"customMeta\" data-dictid=\"09980563461692777188b0de904031\">gum</span> bleeding) and not typically large <span class=\"customMeta\" data-dictid=\"5d0f37715816927771973ecda21336\">retroperitoneal</span> haemorrhages or joint bleeds.</p>\n\n<p><strong>Lupus <span class=\"customMeta\" data-dictid=\"b5fc7729f316927771817f809648f5\">anticoagulant</span> </strong><strong>(Option D)</strong>: This is associated with <strong>antiphospholipid syndrome</strong>, leading to an increased risk of <span class=\"customMeta\" data-dictid=\"3e745919391692777200fae21b7251\">thrombosis</span> (clots), not bleeding. It does not explain the <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> symptoms described in this patient.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following shows maximum amplitude on thromboelastography?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Platelets"
      },
      {
        "id": 2,
        "text": "Intrinsic"
      },
      {
        "id": 3,
        "text": "Extrinsic"
      },
      {
        "id": 4,
        "text": "von Willebrand Disease (vWD)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n\t<li>Thromboelastography (TEG) measures the <strong>viscoelastic properties</strong> of blood as it clots.</li>\n\t<li>The <strong>maximum <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> (MA)</strong> on TEG reflects the strength of the clot, which is primarily determined by the number and function of <strong>platelets</strong> and the <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> concentration.</li>\n\t<li>The <strong>platelets</strong> contribute most significantly to the clot's strength and the <strong>MA</strong> value.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Thromboelastography (TEG)</strong> is a <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> tool used to evaluate <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> profiles and guide management with transfusions and <span class=\"customMeta\" data-dictid=\"7414bd02f216927771889b3e159ef4\">hemostatic</span> therapies. Studies show that TEG can reduce blood product usage by up to 40%, decrease <span class=\"customMeta\" data-dictid=\"8f584900e71692777196a6e8943d4e\">postoperative</span> length of stay, and lower the risk of reoperation.</p>\n\n<p>\u00a0</p>\n\n<p>TEG measures the <span class=\"customMeta\" data-dictid=\"c771cf5a291692777202cf053d7550\">viscoelastic</span> properties of blood as <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> occurs. The resulting data is plotted on a <span class=\"customMeta\" data-dictid=\"90b63cdcfe16927771885e9612aecb\">graph</span> with time on the x-axis and <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> (clot strength) on the y-axis. Key values include:</p>\n\n<ul>\n\t<li><strong>Reaction time (R):</strong> The time it takes for the <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> strength to reach an <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> of 2 mm.</li>\n\t<li><strong>Kinetics (K):</strong> The time from R to when the <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> reaches 20 mm.</li>\n\t<li><strong>\u03b1-angle:</strong> The angle formed by a line from R to the point where K intersects with the 20 mm <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> mark.</li>\n\t<li><strong>Maximum <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> (MA):</strong> The highest <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> reached.</li>\n\t<li><strong>Lysis at 30 minutes (Ly30):</strong> The per cent decrease in <span class=\"customMeta\" data-dictid=\"4c75de951316927771819cdfdbdd6a\">amplitude</span> 30 minutes after MA (or 60 minutes in some cases).</li>\n</ul>\n\n<p><img alt=\"Lysis at 30 minutes (Ly30)\" data-author=\"\" data-hash=\"11222\" data-license=\"\" data-source=\"\" data-tags=\"\" src=\"https://image.prepladder.com/notes/LBLlBfjmGoCbHxekE2K31745400506.png\" /></p>\n\n<p><strong>Inference:</strong></p>\n\n<ul>\n\t<li>A prolonged R time may indicate <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> factor <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> or anticoagulation.</li>\n\t<li>A decreased \u03b1-angle can result from hypofibrinogenemia</li>\n\t<li>Low MA can be due to <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> or <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> dysfunction.</li>\n\t<li>Increased Ly30 indicates hyperfibrinolysis, often seen in severe trauma or with <span class=\"customMeta\" data-dictid=\"78e1197ee31692777200fa8819cf74\">thrombolytic</span> therapy.</li>\n</ul>\n\n<p><img alt=\"Inference\" data-author=\"\" data-hash=\"11223\" data-license=\"\" data-source=\"\" data-tags=\"April2025\" src=\"https://image.prepladder.com/notes/d8jv6tu599VE1NBORZKm1745400583.png\" /></p>\n\n<p>Based on the TEG findings, targeted blood products can be administered to normalize coagulation. For example:</p>\n\n<ul>\n\t<li>Fresh frozen <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> for prolonged R time</li>\n\t<li>Cryoprecipitate for decreased \u03b1-angle</li>\n\t<li>Platelets for decreased MA</li>\n\t<li>Tranexamic acid or <span class=\"customMeta\" data-dictid=\"fc966eaa141692777181d46aae2190\">aminocaproic acid</span> for increased Ly30.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/LBLlBfjmGoCbHxekE2K31745400506.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Below is an image of the coagulation cascade activation following closed endothelial injury. Identify the factor \u2018L\u2019, which combines with tissue factor to activate factor IX.</p>\n\n<p style=\"text-align: center;\"><img alt=\"Coagulation cascade\" data-author=\"\" data-hash=\"12579\" data-license=\"\" data-source=\"\" data-tags=\"May2025\" height=\"311\" src=\"https://image.prepladder.com/notes/iUlkKW6nrD19GuyU00n31747051847.png\" width=\"373\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Factor XII"
      },
      {
        "id": 2,
        "text": "Factor VII"
      },
      {
        "id": 3,
        "text": "Factor VIII"
      },
      {
        "id": 4,
        "text": "vWF"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Factor VII</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p><strong>Factor VII (Proconvertin) </strong>combines with tissue factor to <span class=\"customMeta\" data-dictid=\"dddc752e1716927771807f985bb8bb\">activate</span> factor IX in the <strong>Coagulation Cascade</strong> following closed endothelial injury.</p>\n\n<ul>\n\t<li>When tissue factor is exposed due to endothelial injury, it forms a complex with Factor VII. This complex activates Factor IX by cleaving it to Factor IXa, which then participates in the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> cascade.</li>\n</ul>\n\n<p style=\"text-align: center;\"><img alt=\"Coagulation cascade\" data-author=\"\" data-hash=\"12580\" data-license=\"\" data-source=\"\" data-tags=\"May2025\" height=\"396\" src=\"https://image.prepladder.com/notes/Ff7mPUgw9ZkDxA6DlHd51747051948.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Factor XII (Hageman factor) (Option A) </strong>is involved in the <span class=\"customMeta\" data-dictid=\"a4f93a26c11692777190f1659fa7c9\">initiation</span> of the<strong> <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> pathway</strong> of the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> cascade. It is not directly responsible for activating factor IX in response to closed endothelial injury.</p>\n\n<p><strong>Factor VIII (antihemophilic factor A) (Option C) </strong>plays a crucial role in the<strong> <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> </strong>of the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> cascade. However, it is not involved in the direct <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> of factor IX in response to closed endothelial injury.</p>\n\n<p><strong>vWF (von Willebrand factor) (Option D)</strong> is a <span class=\"customMeta\" data-dictid=\"6c9fa3a73216927771888299c86e08\">glycoprotein</span> that plays a vital role in <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> and aggregation. It is not directly involved in activating factor IX in the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> <span class=\"customMeta\" data-dictid=\"6826aa04ef16927771833336e53730\">cascade</span> following closed endothelial injury.</p>\n\n<p style=\"text-align: center;\"><img alt=\"Clotting in Lab\" data-author=\"\" data-hash=\"12581\" data-license=\"\" data-source=\"\" data-tags=\"May2025\" height=\"451\" src=\"https://image.prepladder.com/notes/FsqXqWST1qfmM0WxA7cx1747051972.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/notes/iUlkKW6nrD19GuyU00n31747051847.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/Ff7mPUgw9ZkDxA6DlHd51747051948.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Leiden mutation is of factor:</p>",
    "choices": [
      {
        "id": 1,
        "text": "V"
      },
      {
        "id": 2,
        "text": "VIII"
      },
      {
        "id": 3,
        "text": "I"
      },
      {
        "id": 4,
        "text": "X"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) V</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>The <strong>Leiden mutation</strong> is a genetic alteration in <strong>Factor V</strong>, a protein essential for blood clotting.</li>\n\t<li>It has the autosomal dominant type of inheritance.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> makes <span class=\"customMeta\" data-dictid=\"14693f062c16927772024df5839c43\">factor V</span> resistant to <span class=\"customMeta\" data-dictid=\"2f7bf58a321692777190e32a914615\">inactivation</span> by protein C, disrupting an <span class=\"customMeta\" data-dictid=\"9259c6f2981692777181fadef25e02\">antithrombotic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> and increasing the risk of thrombosis.</li>\n</ul>\n\n<p><strong>Factor VIII (Option B)</strong> plays a key role in the <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation, where it activates <span class=\"customMeta\" data-dictid=\"69e0db00bd169277720233cd39735b\">Factor X</span> to Xa, which then helps in the conversion of <span class=\"customMeta\" data-dictid=\"94b02f097916927771962072dbeeac\">prothrombin</span> to thrombin, leading to the formation of a blood clot. It is not associated with the Leiden mutation.</p>\n\n<p><strong>Factor I (Option C)</strong>, also known as <strong>fibrinogen,</strong> is the <span class=\"customMeta\" data-dictid=\"ae13cdc5c3169277719683e9f6bda5\">precursor</span> to fibrin, which forms the structural framework of a blood clot. When <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> occurs, <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> is converted to <span class=\"customMeta\" data-dictid=\"18c2380be716927772020c9b2863de\">fibrin</span> by the <span class=\"customMeta\" data-dictid=\"0f160e4e42169277718771b715516a\">enzyme</span> <span class=\"customMeta\" data-dictid=\"ac7e1f394f1692777200c5bb11e4d8\">thrombin</span> during the final steps of the <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> cascade. It is not associated with the Leiden mutation.</p>\n\n<p><strong>Factor X (Option D)</strong>, also known as the <strong>Stuart-Prower factor,</strong> is a key <span class=\"customMeta\" data-dictid=\"0f160e4e42169277718771b715516a\">enzyme</span> in the blood <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> process. It is activated to Factor Xa and plays a crucial role in converting <span class=\"customMeta\" data-dictid=\"94b02f097916927771962072dbeeac\">prothrombin</span> to thrombin, ultimately leading to the formation of a blood clot. It is not associated with the Leiden mutation.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following clotting factor deficiencies will not affect clotting in vivo?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Factor VII"
      },
      {
        "id": 2,
        "text": "Factor V"
      },
      {
        "id": 3,
        "text": "Factor XII"
      },
      {
        "id": 4,
        "text": "Factor IX"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Factor XII</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li><strong>Factor XII <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> (Hageman factor)</strong> does not significantly affect <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> in vivo, as it primarily participates in the <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> and is involved in the <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> of the <span class=\"customMeta\" data-dictid=\"f43fcbd30c1692777202bae15ef702\">fibrinolytic</span> system and the contact <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> of the <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> cascade.</li>\n\t<li>Factor XII does not notably impair normal clotting, as other factors and pathways can compensate for its lack.</li>\n\t<li>In contrast, Factor VII, Factor V, and <span class=\"customMeta\" data-dictid=\"f8846c9a0516927772020622977113\">Factor IX</span> deficiencies significantly impact the <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> <span class=\"customMeta\" data-dictid=\"6826aa04ef16927771833336e53730\">cascade</span> and lead to <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorders.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p style=\"text-align: center;\"><img alt=\"Coagulation cascade\" data-author=\"\" data-hash=\"12286\" data-license=\"\" data-source=\"\" data-tags=\"May2025\" height=\"452\" src=\"https://image.prepladder.com/notes/cTS2uo5SokK2z4TMsXRd1746554570.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Factor VII</strong> <strong>(Option A)</strong> is a critical component of the <strong>extrinsic</strong> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation. <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">Deficiency</span> can lead to <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorders, as it directly impacts the <span class=\"customMeta\" data-dictid=\"a4f93a26c11692777190f1659fa7c9\">initiation</span> of the <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> <span class=\"customMeta\" data-dictid=\"6826aa04ef16927771833336e53730\">cascade</span> in vivo.</p>\n\n<p><strong>Factor V (Option B)</strong> is essential for the common <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation, acting as a <span class=\"customMeta\" data-dictid=\"a416d7580c1692777184952da793d1\">cofactor</span> for Factor Xa in the conversion of <span class=\"customMeta\" data-dictid=\"94b02f097916927771962072dbeeac\">prothrombin</span> to thrombin. Its <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> results in impaired <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> and increases the risk of bleeding.</p>\n\n<p><strong>Factor IX (Option D)</strong> is involved in the <strong>intrinsic</strong> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation. <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">Deficiency</span> causes <span class=\"customMeta\" data-dictid=\"904d77ba8a16927771882396edef7c\">Hemophilia</span> B, leading to impaired <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> formation and increased <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> risk in vivo.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/cTS2uo5SokK2z4TMsXRd1746554570.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which test evaluates the <span class=\"marker\">extrinsic pathway</span>?</p>",
    "choices": [
      {
        "id": 1,
        "text": "aPTT"
      },
      {
        "id": 2,
        "text": "PT"
      },
      {
        "id": 3,
        "text": "TT"
      },
      {
        "id": 4,
        "text": "Bleeding time"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - PT:</strong></p>\n\n<ul>\n\t<li>Prothrombin time (PT) evaluates the <span class=\"customMeta\" data-dictid=\"810de80cac1692777187a436b4315b\">extrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation.</li>\n\t<li>It measures the time it takes for blood to <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> in response to activating agents that initiate the <span class=\"customMeta\" data-dictid=\"810de80cac1692777187a436b4315b\">extrinsic</span> pathway, primarily involving factors VII, X, V, II (prothrombin), and fibrinogen.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>Option A - aPTT:</strong></p>\n\n<ul>\n\t<li>Activated <span class=\"customMeta\" data-dictid=\"40141499f716927771945a13f86369\">partial <span class=\"customMeta\" data-dictid=\"9b51982d06169277720063c9420fbb\">thromboplastin</span> time</span> evaluates the <span class=\"customMeta\" data-dictid=\"a6795c876e169277719057a1099465\">intrinsic</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> of coagulation.</li>\n</ul>\n\n<p><strong>Option C - TT:</strong></p>\n\n<ul>\n\t<li>Thrombin time measures the time it takes for <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> to be converted into <span class=\"customMeta\" data-dictid=\"18c2380be716927772020c9b2863de\">fibrin</span> by the action of thrombin.</li>\n\t<li>It evaluates the <span class=\"customMeta\" data-dictid=\"e2dc7b9bc11692777203b6c813b277\">final common pathway</span> of <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> and is used to assess the activity of thrombin.</li>\n</ul>\n\n<p><strong>Option D - <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">Bleeding</span> Time:</strong></p>\n\n<ul>\n\t<li>Bleeding time assesses the primary hemostasis, specifically the ability of platelets to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> a <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"7803d1e7ea169277719552dc5e49d4\">plug</span> and initiate <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> formation.</li>\n\t<li>It measures the time it takes for <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> to stop after a standardized skin incision.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A CKD patient had to undergo dialysis, and his Hb was 5.2 g/dL. So two blood transfusions were to be given. The first bag was completed in 2 hours. The second was started, and in the midway, he developed shortness of breath and hypertension. Vitals were BP: 180/120 mmHg and pulse rate: 110/min. What is the cause?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Allergic"
      },
      {
        "id": 2,
        "text": "Transfusion-related circulatory overload"
      },
      {
        "id": 3,
        "text": "Transfusion-related acute lung injury"
      },
      {
        "id": 4,
        "text": "Febrile non-hemolytic transfusion reaction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct option B: Transfusion-related <span class=\"customMeta\" data-dictid=\"f3739d892c1692777184b2e134615c\">circulatory</span> overload:</strong></p>\n\n<ul>\n\t<li>Transfusion-related <span class=\"customMeta\" data-dictid=\"f3739d892c1692777184b2e134615c\">circulatory</span> <span class=\"customMeta\" data-dictid=\"9d02a99d051692777194aa3375023b\">overload</span> (TACO) occurs when a patient receives blood or fluid too quickly.</li>\n\t<li>In the given case, the patient undergoing <span class=\"customMeta\" data-dictid=\"5755720cc31692777186c957a0feb7\">dialysis</span> received two blood transfusions. overwhelming the <span class=\"customMeta\" data-dictid=\"e2b5f013011692777183ea1b11ed9c\">cardiovascular</span> system's capacity to handle the increased volume.</li>\n\t<li>Symptoms of TACO include shortness of breath, hypertension, elevated blood pressure, and fluid overload.</li>\n</ul>\n\n<p><strong>Incorrect options:</strong></p>\n\n<p><strong>Option A: Allergic reaction: </strong>While allergic reactions can occur during transfusions, they typically present with symptoms such as itching, rash, hives, or anaphylaxis.</p>\n\n<p><strong>Option C: Transfusion-related <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> lung injury:</strong></p>\n\n<ul>\n\t<li>TRALI is a rare but potentially serious <span class=\"customMeta\" data-dictid=\"8a6b09beac1692777184b08a2b5766\">complication</span> of blood <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> characterized by <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> <span class=\"customMeta\" data-dictid=\"afafb9026e1692777186e3dd168fa8\">distress</span> and <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> edema.</li>\n\t<li>While shortness of breath is a symptom of TRALI, <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> and elevated <span class=\"customMeta\" data-dictid=\"263ee5444e1692777183a7e8e704da\">blood pressure</span> are not typically associated with this condition.</li>\n</ul>\n\n<p><strong>Option D: <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">Febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reaction:</strong> A <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reaction is characterized by fever and chills during or after a blood transfusion, usually due to antibodies in the recipient's blood reacting to donor leukocytes.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient who receives recurrent transfusions for thalassemia develops fever and chills during this time. There is no evidence of hemolysis. Which of the following measures can decrease the rate of transfusion reactions?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Leukoreduced RBCs"
      },
      {
        "id": 2,
        "text": "Antibiotics"
      },
      {
        "id": 3,
        "text": "Irradiation"
      },
      {
        "id": 4,
        "text": "Washed RBCs"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct option A: Leukoreduced RBCs:</strong></p>\n\n<ul>\n\t<li>The patient's presentation with fever and chills with no evidence of <span class=\"customMeta\" data-dictid=\"c2b082746716927771888f0933941d\">hemolysis</span> is suggestive of a <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reaction.</li>\n\t<li>Leukoreduced red blood cells (RBCs) refer to blood products that have undergone a process to remove or reduce the number of leukocytes.</li>\n\t<li>White blood cells can trigger immune responses and cause <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reactions, including <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reactions.</li>\n\t<li>Leukoreduced RBCs reduce the risk of <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reactions.</li>\n</ul>\n\n<p><strong>Incorrect options: Options B, C, and D do not reduce the</strong> risk of <span class=\"customMeta\" data-dictid=\"e57922b3c91692777202151895d37e\">febrile</span> non-hemolytic <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> reactions.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Arrange the following clotting factors in the sequence that they follow in the <span class=\"marker\">coagulation cascade:</span></p>\n\n<ol>\n\t<li>13</li>\n\t<li>12</li>\n\t<li>10</li>\n\t<li>5</li>\n\t<li>9</li>\n</ol>",
    "choices": [
      {
        "id": 1,
        "text": "2, 3, 4, 1, 5"
      },
      {
        "id": 2,
        "text": "2, 5, 3, 4, 1"
      },
      {
        "id": 3,
        "text": "1, 2, 5, 3, 4"
      },
      {
        "id": 4,
        "text": "2, 3, 5, 4, 1"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - 2, 5, 3, 4, 1:</strong></p>\n\n<ul>\n\t<li>The <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> <span class=\"customMeta\" data-dictid=\"6826aa04ef16927771833336e53730\">cascade</span> involves a series of sequential <span class=\"customMeta\" data-dictid=\"ba6b77f29316927771807350f86ce2\">activation</span> and interactions of various <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> factors, leading to the formation of a stable <span class=\"customMeta\" data-dictid=\"18c2380be716927772020c9b2863de\">fibrin</span> clot.</li>\n</ul>\n\n<p><img src=\"https://image.prepladder.com/content/LVK0qtGw3YLGkDSvhPuW1691233650.png\" /></p>\n\n<p><strong>Incorrect Options:</strong>\u00a0</p>\n\n<ul>\n\t<li><strong>Options A, C, and D </strong>are incorrect.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/LVK0qtGw3YLGkDSvhPuW1691233650.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is the major source of <span class=\"marker\">plasma Von Willebrand factor?</span></p>",
    "choices": [
      {
        "id": 1,
        "text": "Platelets"
      },
      {
        "id": 2,
        "text": "Lymphocytes"
      },
      {
        "id": 3,
        "text": "Macrophages"
      },
      {
        "id": 4,
        "text": "Endothelial cells"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Option D - Endothelial Cells:</strong></p>\n\n<ul>\n\t<li>Endothelial cells, which line the blood vessels, are the primary source of <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> von Willebrand factor.</li>\n\t<li>These cells <span class=\"customMeta\" data-dictid=\"37ab4f3d3a16927771991ff7316442\">synthesize</span> and release <span class=\"customMeta\" data-dictid=\"0327d20161169277720287847fa436\">vWF</span> into the bloodstream.</li>\n\t<li>Von Willebrand factor produced by endothelial cells plays a crucial role in blood <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> and <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> to damaged <span class=\"customMeta\" data-dictid=\"72c06d2cc71692777183b1cbaf5bae\">blood vessel</span> walls.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<ul>\n\t<li><strong>Options A, B, and C</strong> are incorrect.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Acid mucin is stained by:</p>",
    "choices": [
      {
        "id": 1,
        "text": "PAS"
      },
      {
        "id": 2,
        "text": "Alcian blue"
      },
      {
        "id": 3,
        "text": "Masson trichrome"
      },
      {
        "id": 4,
        "text": "Phosphotungstic acid haematoxylin (PTAH)"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct option B: Alcian blue:</strong></p>\n\n<ul>\n\t<li>Alcian blue <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> is specifically used to detect and <span class=\"customMeta\" data-dictid=\"67407c787d1692777202245c791c31\">visualize</span> <span class=\"customMeta\" data-dictid=\"3a983e569716927771805ed22b90d7\">acidic</span> mucopolysaccharides, such as acid mucin.</li>\n\t<li>It is often employed to identify mucin-producing cells, <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> glands, and mucin-rich <span class=\"customMeta\" data-dictid=\"67e237a57c16927771859803f93ab3\">connective</span> tissues.</li>\n\t<li>Alcian blue <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> results in a blue or bluish-green color, indicating the presence of acid mucin.</li>\n</ul>\n\n<p><strong>Incorrect options:</strong></p>\n\n<p><strong>Option A: PAS:</strong></p>\n\n<ul>\n\t<li>PAS <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> is used to detect and highlight the presence of carbohydrates, including <span class=\"customMeta\" data-dictid=\"2e2aa646ab1692777188e3eb8286d8\">glycogen</span> and mucopolysaccharides.</li>\n\t<li>It is commonly used to <span class=\"customMeta\" data-dictid=\"b29a1a16ab1692777199ede1c6e28b\">stain</span> structures such as basement membranes, <span class=\"customMeta\" data-dictid=\"2e2aa646ab1692777188e3eb8286d8\">glycogen</span> granules, and fungal organisms.</li>\n\t<li>PAS <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> results in a pink-to-magenta coloration.</li>\n</ul>\n\n<p><strong>Option C: Masson trichrome:</strong></p>\n\n<ul>\n\t<li>Masson trichrome <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> is a <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> technique used to <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> various tissue components.</li>\n\t<li>It involves <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> <span class=\"customMeta\" data-dictid=\"d215f4a56c16927771842f34a24156\">collagen</span> fibers blue, <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> and muscle fibers red, and <span class=\"customMeta\" data-dictid=\"e6b47028191692777193eb698e43b6\">nuclei</span> dark red to black.</li>\n\t<li>While Masson trichrome <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> can help <span class=\"customMeta\" data-dictid=\"67407c787d1692777202245c791c31\">visualize</span> <span class=\"customMeta\" data-dictid=\"67e237a57c16927771859803f93ab3\">connective</span> tissues and collagen, it does not specifically target acid mucin.</li>\n</ul>\n\n<p><strong>Option D: <span class=\"customMeta\" data-dictid=\"0556cd120b1692777195e81fff695d\">Phosphotungstic acid</span> haematoxylin (PTAH):</strong></p>\n\n<ul>\n\t<li>PTAH <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> is commonly used to highlight muscle fibers and fibrin.</li>\n\t<li>It is particularly useful in diagnosing muscle disorders and identifying abnormalities in muscle structure.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What does the following image show?</p>\n\n<p><img src=\"https://image.prepladder.com/content/NTNrJAcHF90F6H0H4zU51688021993.png\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Autophagy"
      },
      {
        "id": 2,
        "text": "Emperipolesis"
      },
      {
        "id": 3,
        "text": "Phagocytosis"
      },
      {
        "id": 4,
        "text": "Amoebic autophagy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct option B: Emperipolesis:</strong></p>\n\n<ul>\n\t<li>Emperipolesisis a <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> process in which one cell is engulfed and contained within the <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> of another cell without being degraded.</li>\n\t<li>It is a non-destructive process, unlike <span class=\"customMeta\" data-dictid=\"aa86b61bdd1692777195ea42ef0356\">phagocytosis</span> or autophagy, where the engulfed material is typically broken down and degraded.</li>\n</ul>\n\n<p><strong>Incorrect options: </strong></p>\n\n<p><strong>Option A: Autophagy:</strong></p>\n\n<ul>\n\t<li>Autophagy is a <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> process that involves the <span class=\"customMeta\" data-dictid=\"d395f610461692777185cbe8b8806d\">degradation</span> and recycling of <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> components.</li>\n\t<li>It is a mechanism by which cells remove damaged organelles, misfolded proteins, and other cytoplasmic constituents.</li>\n\t<li>Autophagy plays a crucial role in maintaining <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> <span class=\"customMeta\" data-dictid=\"50796581771692777189251fbe5ef1\">homeostasis</span> and responding to various stress conditions.</li>\n</ul>\n\n<p><strong>Option C: Phagocytosis:</strong></p>\n\n<ul>\n\t<li>Phagocytosis is a process by which cells, such as macrophages and neutrophils, engulf and internalize solid particles, such as bacteria, <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> debris, or foreign substances.</li>\n\t<li>The engulfed material is then enclosed within a membrane-bound <span class=\"customMeta\" data-dictid=\"43337a69ad169277720110a038f222\">vesicle</span> called a phagosome, which fuses with lysosomes for <span class=\"customMeta\" data-dictid=\"d395f610461692777185cbe8b8806d\">degradation</span> and destruction of the engulfed material.</li>\n</ul>\n\n<p><strong>Option D: Amoebic autophagy:</strong></p>\n\n<ul>\n\t<li>Amoebic <span class=\"customMeta\" data-dictid=\"06d27b773a1692777182ec37e7fb5f\">autophagy</span> refers to the <span class=\"customMeta\" data-dictid=\"8a46cef7a11692777182069d47aa68\">autophagic</span> process observed in amoebae, which are single-celled organisms.</li>\n\t<li>It involves the engulfment and <span class=\"customMeta\" data-dictid=\"d395f610461692777185cbe8b8806d\">degradation</span> of <span class=\"customMeta\" data-dictid=\"12a6f23332169277718402ca6703e2\">cellular</span> components or particles by the amoebae to obtain nutrients or eliminate unwanted materials.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/NTNrJAcHF90F6H0H4zU51688021993.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient has been brought with severe bleeding to your ER. His blood group is unknown. Fresh frozen plasma from which of the following blood groups can be given?</p>",
    "choices": [
      {
        "id": 1,
        "text": "O"
      },
      {
        "id": 2,
        "text": "AB"
      },
      {
        "id": 3,
        "text": "B"
      },
      {
        "id": 4,
        "text": "A"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct option A: O:</strong></p>\n\n<ul>\n\t<li>Fresh frozen <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> from <span class=\"customMeta\" data-dictid=\"a3c99b36b6169277718332b20cc393\">blood group</span> O can be given to patients with an unknown blood group.</li>\n\t<li>Blood group O individuals are considered universal <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> donors because their <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> lacks both A and B antigens on red blood cells, making it <span class=\"customMeta\" data-dictid=\"8baf7b24c316927771847e2b2ae466\">compatible</span> with recipients of any ABO <span class=\"customMeta\" data-dictid=\"8cb71c753c16927771831c74cb7271\">blood type</span> without causing an ABO <span class=\"customMeta\" data-dictid=\"722db2c56816927771903e6469e2dc\">incompatibility</span> reaction.</li>\n</ul>\n\n<p><strong>Incorrect options: </strong>Options B, C, and D are incorrect. Refer to the explanation of the correct answer.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the color of the <span class=\"marker\">vacutainer that contains sodium fluoride?</span></p>",
    "choices": [
      {
        "id": 1,
        "text": "Red"
      },
      {
        "id": 2,
        "text": "Grey"
      },
      {
        "id": 3,
        "text": "Blue"
      },
      {
        "id": 4,
        "text": "Yellow"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option B - Grey: </strong></p>\n\n<ul>\n\t<li>Sodium <span class=\"customMeta\" data-dictid=\"7cdfdfcdc616927772026ac0b8d995\">fluoride</span> is used as an <span class=\"customMeta\" data-dictid=\"8fabe131a916927771802a448a329c\">additive</span> in vacutainers to prevent <span class=\"customMeta\" data-dictid=\"185a500ee91692777188b3044db06d\">glycolysis</span> in blood samples.</li>\n\t<li>The vacutainer tube that contains sodium <span class=\"customMeta\" data-dictid=\"7cdfdfcdc616927772026ac0b8d995\">fluoride</span> as an <span class=\"customMeta\" data-dictid=\"8fabe131a916927771802a448a329c\">additive</span> typically has a grey color.</li>\n\t<li>The grey-top vacutainer is specifically designed for <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> and <span class=\"customMeta\" data-dictid=\"5a751dc161169277719123aae1b764\">lactate</span> determinations, as sodium <span class=\"customMeta\" data-dictid=\"7cdfdfcdc616927772026ac0b8d995\">fluoride</span> acts as a <span class=\"customMeta\" data-dictid=\"185a500ee91692777188b3044db06d\">glycolysis</span> inhibitor.</li>\n</ul>\n\n<p><strong>Incorrect Options: </strong></p>\n\n<ul>\n\t<li><strong>Options A, C, and D </strong>are incorrect.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p><span class=\"marker\">Prolonged bleeding</span> time is seen in:</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hemophilia A"
      },
      {
        "id": 2,
        "text": "Hemophilia B"
      },
      {
        "id": 3,
        "text": "Von Willebrand disease"
      },
      {
        "id": 4,
        "text": "Both A and B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C - Von Willebrand Disease:</strong></p>\n\n<ul>\n\t<li>Prolonged <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> time is seen in Von Willebrand disease.</li>\n\t<li>Von Willebrand disease is a <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> disorder caused by a <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> or <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> of von Willebrand factor (VWF), a protein involved in <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> and blood clotting.</li>\n</ul>\n\n<p><strong>Incorrect Options: </strong></p>\n\n<ul>\n\t<li><strong>Options A, B, and D: </strong>Prolonged <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> time is not seen.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the maximum duration for TRALI to occur after a blood transfusion?</p>",
    "choices": [
      {
        "id": 1,
        "text": "12 hours"
      },
      {
        "id": 2,
        "text": "24 hours"
      },
      {
        "id": 3,
        "text": "6 hours"
      },
      {
        "id": 4,
        "text": "48 hours"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct option C: 6 hours:</strong></p>\n\n<ul>\n\t<li>Transfusion-related <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> lung injury (TRALI) is a potentially severe <span class=\"customMeta\" data-dictid=\"8a6b09beac1692777184b08a2b5766\">complication</span> that can occur after a blood transfusion.</li>\n\t<li>It is characterized by the sudden onset of <span class=\"customMeta\" data-dictid=\"cfad80a0f716927771979aae100f95\">respiratory</span> <span class=\"customMeta\" data-dictid=\"afafb9026e1692777186e3dd168fa8\">distress</span> and non-cardiogenic <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> edema.</li>\n\t<li>TRALI typically manifests within 6 hours after a blood transfusion.</li>\n</ul>\n\n<p><strong>Incorrect options:</strong> Options A, B, and D are incorrect.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '82 Previous Year Questions';
        const quizFilename = '82-previous-year-questions-38bc8880.html';
        let hierarchy = ["PrepLadder", "qBank", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>