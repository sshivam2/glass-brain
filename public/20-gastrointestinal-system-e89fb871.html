<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>20  Gastrointestinal System - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        DAMS / DQB / Anatomy
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">33</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "id": 50000,
    "choices": [
      {
        "id": 200000,
        "text": "Right colic artery"
      },
      {
        "id": 200001,
        "text": "Middle colic artery"
      },
      {
        "id": 200002,
        "text": "Ileocolic artery"
      },
      {
        "id": 200003,
        "text": "All of the above"
      }
    ],
    "text": "Arterial supply of caecum is through :",
    "unique_key": "Q6362395",
    "question_audio": null,
    "question_video": null,
    "map_id": 34677829,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Ileocolic artery. Explanation for the Correct Answer: The ileocolic artery is the primary artery that supplies the cecum. It is a branch of the superior mesenteric artery (SMA) and provides blood flow to the cecum, appendix, ascending colon, and terminal ileum. The ileocolic artery is specifically responsible for the vascular supply to the cecum. Explanation for Incorrect Answers: A. Right colic artery: The right colic artery is a branch of the superior mesenteric artery, but it primarily supplies the ascending colon, not the cecum. While the right colic artery may provide some minor contributions to the cecum, it is not the main artery for its supply. B. Middle colic artery: The middle colic artery is a branch of the superior mesenteric artery that supplies the transverse colon. It does not supply the cecum, which is supplied by the ileocolic artery. D. All of the above: This option is incorrect because, while the right colic and middle colic arteries do contribute to the vascularization of nearby regions of the colon, the main arterial supply to the cecum comes from the ileocolic artery, not from all three arteries.",
    "correct_choice_id": 200002,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40801171697972489/40801171697972489.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40801171697972489/40801171697972489.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50001,
    "choices": [
      {
        "id": 200004,
        "text": "Jejunum"
      },
      {
        "id": 200005,
        "text": "Appendix"
      },
      {
        "id": 200006,
        "text": "Ascending colon"
      },
      {
        "id": 200007,
        "text": "Descending colon"
      }
    ],
    "text": "Which of the following is NOT supplied by Superior mesenteric artery ?",
    "unique_key": "Q9016441",
    "question_audio": null,
    "question_video": null,
    "map_id": 34459279,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Descending colon. Explanation for the Correct Answer: D. Descending colon: The descending colon is not supplied by the superior mesenteric artery (SMA). Instead, it receives its blood supply from the inferior mesenteric artery (IMA), which branches off the aorta. The SMA primarily supplies the midgut structures, including the small intestine and parts of the large intestine, up to the proximal two-thirds of the transverse colon. Explanation for Incorrect Answers: A. Jejunum: The jejunum is supplied by branches of the superior mesenteric artery. It is part of the small intestine, which is considered to be part of the midgut, and the SMA provides the blood supply to the jejunum through jejunal branches. B. Appendix: The appendix is supplied by the appendicular artery, which is a branch of the ileocolic artery. The ileocolic artery, in turn, arises from the superior mesenteric artery, meaning the SMA does supply the appendix. C. Ascending colon: The ascending colon is supplied by the right colic artery, which is a branch of the superior mesenteric artery. This part of the colon is considered to be within the midgut and receives blood from the SMA.",
    "correct_choice_id": 200007,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7612981697972583/7612981697972583.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7612981697972583/7612981697972583.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50002,
    "choices": [
      {
        "id": 200008,
        "text": "Posterior vagal trunk"
      },
      {
        "id": 200009,
        "text": "Esophageal branches of the left gastric vessels"
      },
      {
        "id": 200010,
        "text": "Anterior vagal trunk"
      },
      {
        "id": 200011,
        "text": "Thoracic duct"
      }
    ],
    "text": "All of the following structures pass through the esophageal hiatus except",
    "unique_key": "Q4945537",
    "question_audio": null,
    "question_video": null,
    "map_id": 34588185,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Thoracic duct. Explanation for the Correct Answer: D. Thoracic duct: The thoracic duct does not pass through the esophageal hiatus. It passes through the aortic hiatus of the diaphragm, which is located posterior to the esophageal hiatus. The thoracic duct carries lymph from the body to the venous system, draining into the left subclavian vein. Thus, it is not part of the structures that pass through the esophageal hiatus. Explanation for Incorrect Answers: A. Posterior vagal trunk: The posterior vagal trunk is one of the components of the vagus nerve that passes through the esophageal hiatus. It innervates structures in the esophagus and stomach, providing parasympathetic innervation. B. Esophageal branches of the left gastric vessels: The esophageal branches of the left gastric vessels pass through the esophageal hiatus along with the esophagus. These branches supply blood to the lower esophagus. C. Anterior vagal trunk: The anterior vagal trunk is another component of the vagus nerve and it also passes through the esophageal hiatus. It is important for parasympathetic innervation to the esophagus and stomach.",
    "correct_choice_id": 200011,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12638591697972690/12638591697972690.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/12638591697972690/12638591697972690.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50003,
    "choices": [
      {
        "id": 200012,
        "text": "IVC"
      },
      {
        "id": 200013,
        "text": "Free border of Lesser omentum"
      },
      {
        "id": 200014,
        "text": "Free border of Greater omentum"
      },
      {
        "id": 200015,
        "text": "Caudate lobe of Liver"
      }
    ],
    "text": "Epiploic Foramen is bounded by all except",
    "unique_key": "Q9314908",
    "question_audio": null,
    "question_video": null,
    "map_id": 34214953,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Free border of Greater omentum. Explanation for the Correct Answer: C. Free border of Greater omentum: The epiploic foramen, also known as the foramen of Winslow, is an opening that connects the greater sac (main portion of the peritoneal cavity) with the lesser sac (omental bursa). The free border of the greater omentum is not a boundary of the epiploic foramen. The greater omentum hangs down from the greater curvature of the stomach, but it does not directly form a boundary of the foramen. Explanation for Incorrect Answers: A. IVC (Inferior Vena Cava): The inferior vena cava (IVC) is one of the structures that forms the posterior boundary of the epiploic foramen. It lies in the posterior aspect of the foramen, close to the liver. B. Free border of Lesser omentum: The lesser omentum forms part of the anterior boundary of the epiploic foramen. The free border of the lesser omentum connects the liver to the lesser curvature of the stomach and duodenum and contributes to the foramen\u2019s boundary. D. Caudate lobe of the Liver: The caudate lobe of the liver forms part of the superior boundary of the epiploic foramen. It lies adjacent to the epiploic foramen and plays a role in demarcating the opening between the greater and lesser sacs.",
    "correct_choice_id": 200014,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64505671697972722/64505671697972722.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64505671697972722/64505671697972722.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50004,
    "choices": [
      {
        "id": 200016,
        "text": "Ileo colic artery"
      },
      {
        "id": 200017,
        "text": "Right colic artery"
      },
      {
        "id": 200018,
        "text": "Middle colic artery"
      },
      {
        "id": 200019,
        "text": "Posterior cecal artery"
      }
    ],
    "text": "Appendicular artery is a branch of -",
    "unique_key": "Q1189644",
    "question_audio": null,
    "question_video": null,
    "map_id": 34185716,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Ileo colic artery. Explanation for the Correct Answer: A. Ileo colic artery: The appendicular artery is a branch of the ileocolic artery, which is itself a branch of the superior mesenteric artery. The ileocolic artery supplies blood to the cecum, appendix, and the terminal part of the ileum. The appendicular artery, which specifically supplies the appendix, arises from the ileocolic artery. This makes A the correct answer. Explanation for Incorrect Answers: B. Right colic artery: The right colic artery is a branch of the superior mesenteric artery and supplies blood to the ascending colon. However, it does not give rise to the appendicular artery. Thus, B is incorrect. C. Middle colic artery: The middle colic artery is another branch of the superior mesenteric artery, but it primarily supplies blood to the transverse colon. It does not give rise to the appendicular artery. Therefore, C is incorrect. D. Posterior cecal artery: The posterior cecal artery is also a branch of the ileocolic artery and supplies the posterior part of the cecum. However, it is not the source of the appendicular artery. The appendicular artery is specifically a branch of the ileocolic artery. Thus, D is incorrect.",
    "correct_choice_id": 200016,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14771151697972796/14771151697972796.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14771151697972796/14771151697972796.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50005,
    "choices": [
      {
        "id": 200020,
        "text": "Ileocolic artery"
      },
      {
        "id": 200021,
        "text": "Right colic artery"
      },
      {
        "id": 200022,
        "text": "Appendicular artery"
      },
      {
        "id": 200023,
        "text": "Posterior cecal artery"
      }
    ],
    "text": "Recurrent appendicular artery is a branch of-",
    "unique_key": "Q3406780",
    "question_audio": null,
    "question_video": null,
    "map_id": 34221815,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Appendicular artery. Explanation for the Correct Answer: C. Appendicular artery: The recurrent appendicular artery is a branch of the appendicular artery itself, which typically originates from the ileocolic artery. The appendicular artery is the main arterial supply to the appendix, and the recurrent appendicular artery is a small branch that supplies the appendix and its surrounding structures. Since the recurrent appendicular artery is derived directly from the appendicular artery, C is the correct answer. Explanation for Incorrect Answers: A. Ileocolic artery: The ileocolic artery gives rise to the appendicular artery, which supplies the appendix. However, the recurrent appendicular artery is a branch of the appendicular artery and not the ileocolic artery directly. Thus, A is incorrect. B. Right colic artery: The right colic artery supplies the ascending colon and part of the cecum. It does not supply the appendix or contribute to the recurrent appendicular artery. Therefore, B is incorrect. D. Posterior cecal artery: The posterior cecal artery, a branch of the ileocolic artery, supplies the cecum but not the appendix or the recurrent appendicular artery. As such, D is incorrect.",
    "correct_choice_id": 200022,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2264411697972851/2264411697972851.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2264411697972851/2264411697972851.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50006,
    "choices": [
      {
        "id": 200024,
        "text": "Posterior wall of stomach"
      },
      {
        "id": 200025,
        "text": "Visceral surface of spleen"
      },
      {
        "id": 200026,
        "text": "Right crus of diaphragm"
      },
      {
        "id": 200027,
        "text": "Greater omentum"
      }
    ],
    "text": "Lesser sac of the stomach is not bounded by",
    "unique_key": "Q9656227",
    "question_audio": null,
    "question_video": null,
    "map_id": 34811172,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Right crus of diaphragm. Explanation for the Correct Answer: C. Right crus of diaphragm: The lesser sac (also known as the omental bursa) is a peritoneal space located behind the stomach. It is bounded by various structures but does not include the right crus of the diaphragm as a boundary. The right crus of the diaphragm is located more posteriorly and laterally to the lesser sac, not as one of its limiting borders. Therefore, C is the correct answer. Explanation for Incorrect Answers: A. Posterior wall of stomach: The posterior wall of the stomach is an important part of the boundary of the lesser sac. The lesser sac lies posterior to the stomach and is bordered by its posterior wall, making A incorrect. B. Visceral surface of spleen: The visceral surface of the spleen is part of the left boundary of the lesser sac. It forms a boundary along with other structures, such as the posterior stomach wall, and therefore, B is incorrect. D. Greater omentum: The greater omentum forms part of the boundary of the lesser sac. It hangs from the greater curvature of the stomach and helps to separate the greater sac from the lesser sac, so D is incorrect.",
    "correct_choice_id": 200026,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44499121697973154/44499121697973154.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44499121697973154/44499121697973154.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50007,
    "choices": [
      {
        "id": 200028,
        "text": "Left kidney"
      },
      {
        "id": 200029,
        "text": "Left supra renal gland"
      },
      {
        "id": 200030,
        "text": "Splenic vein"
      },
      {
        "id": 200031,
        "text": "Tail of pancreas"
      }
    ],
    "text": "The bed of the stomach is not formed by",
    "unique_key": "Q6929133",
    "question_audio": null,
    "question_video": null,
    "map_id": 34463000,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Splenic vein. Explanation for the Correct Answer: C. Splenic vein: The splenic vein is not a part of the bed of the stomach. The splenic vein is located posterior to the stomach, but it does not contribute to the direct support or formation of the stomach's bed. It lies behind the pancreas and is part of the portal venous system. Explanation for Incorrect Answers: A. Left kidney: The left kidney is a part of the bed of the stomach. The posterior surface of the stomach lies adjacent to the left kidney, and this contributes to the bed of the stomach. The left kidney is positioned behind the stomach, forming part of its posterior relationship. B. Left suprarenal gland: The left suprarenal (adrenal) gland is also a part of the bed of the stomach. It is situated above the left kidney and lies behind the upper part of the stomach, contributing to the posterior part of its bed. D. Tail of pancreas: The tail of the pancreas is a part of the bed of the stomach. The tail of the pancreas lies to the left of the stomach, in close proximity to the spleen, and forms part of the posterior wall of the stomach.",
    "correct_choice_id": 200030,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20493741697973287/20493741697973287.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20493741697973287/20493741697973287.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50008,
    "choices": [
      {
        "id": 200032,
        "text": "Coeliac trunk"
      },
      {
        "id": 200033,
        "text": "Splenic artery"
      },
      {
        "id": 200034,
        "text": "Gastroduodenal artery"
      },
      {
        "id": 200035,
        "text": "All of the above"
      }
    ],
    "text": "Stomach is supplied by -",
    "unique_key": "Q3702024",
    "question_audio": null,
    "question_video": null,
    "map_id": 34403810,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) All of the above. Explanation for the Correct Answer: D. All of the above: The stomach receives its blood supply from multiple arteries, including: Coeliac trunk: The coeliac trunk is the main arterial supply to the stomach. It gives rise to branches like the left gastric artery which supplies the lesser curvature of the stomach. Splenic artery: The splenic artery, which is a branch of the coeliac trunk, gives off the short gastric arteries and the left gastroepiploic artery, both of which supply parts of the stomach, especially the fundus and greater curvature. Gastroduodenal artery: The gastroduodenal artery, a branch of the common hepatic artery (which originates from the coeliac trunk), gives rise to the right gastroepiploic artery that supplies the greater curvature of the stomach. Thus, all three arteries\u2014the coeliac trunk, splenic artery, and gastroduodenal artery\u2014are involved in supplying the stomach. Explanation for Incorrect Responses: A. Coeliac trunk: While the coeliac trunk is indeed a major source of arterial supply to the stomach (through its branches such as the left gastric artery), this answer alone is incomplete as the other arteries, such as the splenic and gastroduodenal arteries, also contribute to the stomach\u2019s blood supply. B. Splenic artery: The splenic artery supplies the stomach, but it does so indirectly through its branches (the short gastric arteries and left gastroepiploic artery). However, the splenic artery alone is not the only source of supply to the stomach, so this answer is also incomplete. C. Gastroduodenal artery: The gastroduodenal artery contributes to the stomach's blood supply through its branch, the right gastroepiploic artery. However, it does not supply the entire stomach, and other arteries (like the left gastric artery and short gastric arteries) are also necessary for full blood supply.",
    "correct_choice_id": 200035,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75833941697973406/75833941697973406.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75833941697973406/75833941697973406.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50009,
    "choices": [
      {
        "id": 200036,
        "text": "Left gastric artery"
      },
      {
        "id": 200037,
        "text": "Short gastric artery"
      },
      {
        "id": 200038,
        "text": "Lt gastroepiploic artery"
      },
      {
        "id": 200039,
        "text": "Inferior mesenteric artery"
      }
    ],
    "text": "Which of the following does not supply the stomach",
    "unique_key": "Q8787172",
    "question_audio": null,
    "question_video": null,
    "map_id": 34787838,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Inferior mesenteric artery. Explanation for the Correct Answer: D. Inferior mesenteric artery: The inferior mesenteric artery (IMA) does not supply the stomach. It primarily supplies the distal colon (sigmoid colon, and part of the rectum), but it does not have branches that reach the stomach. Therefore, it is not involved in the vascular supply to the stomach. Explanation for Incorrect Responses: A. Left gastric artery: This artery does supply the stomach. It is one of the main branches of the celiac trunk and provides blood to the lesser curvature of the stomach. Therefore, this option is correct in the context of blood supply to the stomach. B. Short gastric artery: The short gastric arteries arise from the splenic artery, which is a branch of the celiac trunk. These arteries supply the fundus of the stomach. Thus, they do contribute to the stomach's blood supply, making this option incorrect in terms of not supplying the stomach. C. Left gastroepiploic artery: The left gastroepiploic artery is another branch of the splenic artery and supplies the greater curvature of the stomach. Therefore, it is part of the vascular supply to the stomach, and this option is also incorrect in terms of not supplying the stomach.",
    "correct_choice_id": 200039,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21468701697973722/21468701697973722.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21468701697973722/21468701697973722.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50010,
    "choices": [
      {
        "id": 200040,
        "text": "Gonadal veins"
      },
      {
        "id": 200041,
        "text": "Superior mesenteric artery"
      },
      {
        "id": 200042,
        "text": "Portal vein"
      },
      {
        "id": 200043,
        "text": "Inferior mesenteric vein"
      }
    ],
    "text": "The Blood vessel related to the paraduodenal fossa is-",
    "unique_key": "Q3136611",
    "question_audio": null,
    "question_video": null,
    "map_id": 34712051,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Inferior mesenteric vein. Explanation for the Correct Answer: D. Inferior mesenteric vein: The paraduodenal fossa is a small peritoneal recess located near the duodenum, and it is related to the inferior mesenteric vein. This vein, which drains the colon and rectum, passes near the paraduodenal fossa and can sometimes be involved in anatomical variations or pathologies like internal hernias. Explanation for Incorrect Responses: A. Gonadal veins: The gonadal veins (testicular or ovarian veins) are not related to the paraduodenal fossa. These veins drain the gonads and enter either the inferior vena cava (right side) or left renal vein (left side), but they do not have a direct relationship with the paraduodenal fossa. B. Superior mesenteric artery: While the superior mesenteric artery supplies much of the intestines, it is not directly related to the paraduodenal fossa. The superior mesenteric artery runs anteriorly to the paraduodenal fossa, but the blood vessel related to the fossa itself is the inferior mesenteric vein. C. Portal vein: The portal vein is formed by the junction of the superior mesenteric vein and splenic vein, but it does not directly relate to the paraduodenal fossa.",
    "correct_choice_id": 200043,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19185611697973862/19185611697973862.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19185611697973862/19185611697973862.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50011,
    "choices": [
      {
        "id": 200044,
        "text": "Omental bursa (lesser sac)"
      },
      {
        "id": 200045,
        "text": "Greater sac"
      },
      {
        "id": 200046,
        "text": "Right subphrenic space"
      },
      {
        "id": 200047,
        "text": "Hepato renal space (pouch of Morison)"
      }
    ],
    "text": "A posteriorly perforating ulcer in the pyloric antrum of the stomach is most likely to produce initial localized peritonitis or abscess formation in the following-",
    "unique_key": "Q7278572",
    "question_audio": null,
    "question_video": null,
    "map_id": 34492909,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Omental bursa (lesser sac). Explanation for the Correct Answer: A. Omental bursa (lesser sac): A posteriorly perforating ulcer in the pyloric antrum of the stomach is most likely to cause localized peritonitis or abscess formation in the omental bursa (also known as the lesser sac). The lesser sac is located behind the stomach and lesser omentum, and any perforation in the pyloric region can cause leakage of gastric contents, leading to inflammation or infection in this space. The omental bursa communicates with the greater sac, which can lead to a more widespread infection if not controlled. Explanation for Incorrect Responses: B. Greater sac: While the greater sac is the larger part of the peritoneal cavity, a posterior ulcer would initially affect the lesser sac (omental bursa) due to its anatomical relationship with the stomach. However, infection can spread to the greater sac over time if it is not contained in the lesser sac. C. Right subphrenic space: The right subphrenic space is located between the diaphragm and the liver. It may become involved in infections or abscesses, but it is not the primary area affected by a posterior ulcer in the pyloric antrum. This space typically becomes affected when there is an infection from the liver or biliary tract. D. Hepatorenal space (pouch of Morison): The hepatorenal space is located between the liver and the right kidney. While it can be involved in peritoneal infections, it is not the primary site affected by a posterior ulcer in the pyloric antrum. This space can become infected if the infection spreads from the lesser sac or greater sac, but it is not the first area affected.",
    "correct_choice_id": 200044,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21048351697973981/21048351697973981.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21048351697973981/21048351697973981.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50012,
    "choices": [
      {
        "id": 200048,
        "text": "Inferior rectal vein"
      },
      {
        "id": 200049,
        "text": "Superior rectal vein"
      },
      {
        "id": 200050,
        "text": "Para rectal node"
      },
      {
        "id": 200051,
        "text": "Inferior mesenteric plexus"
      }
    ],
    "text": "Contents of mesorectum are of EXCEPT:",
    "unique_key": "Q4818167",
    "question_audio": null,
    "question_video": null,
    "map_id": 34733540,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Inferior rectal vein The mesorectum is the fatty tissue surrounding the rectum, extending from the rectosigmoid junction to the anus. It contains important vascular structures, lymphatic nodes, and nerve plexuses that support the rectum. The inferior rectal vein does not lie within the mesorectum; rather, it drains the lower part of the rectum and anus, draining into the internal pudendal vein, which is outside the mesorectum. Explanation for Incorrect Options: B. Superior rectal vein: The superior rectal vein is part of the venous drainage system of the rectum and is a component found within the mesorectum. It drains into the inferior mesenteric vein. C. Para rectal node: Para-rectal lymph nodes are located in the mesorectum and play a crucial role in lymphatic drainage from the rectum. D. Inferior mesenteric plexus: This is a nerve plexus within the mesorectum that provides autonomic innervation to the rectum.",
    "correct_choice_id": 200048,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37621571697974840/37621571697974840.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37621571697974840/37621571697974840.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50013,
    "choices": [
      {
        "id": 200052,
        "text": "Splenic artery"
      },
      {
        "id": 200053,
        "text": "Hepatic artery"
      },
      {
        "id": 200054,
        "text": "Superior mesenteric artery"
      },
      {
        "id": 200055,
        "text": "Celiac axis"
      }
    ],
    "text": "Stomach derives its blood supply from all these arteries directly or indirectly except -",
    "unique_key": "Q8567505",
    "question_audio": null,
    "question_video": null,
    "map_id": 34055558,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Superior mesenteric artery. The superior mesenteric artery (SMA) does not supply the stomach directly or indirectly. It primarily supplies the small intestine (except for the duodenum) and parts of the large intestine. The SMA does not have branches that reach the stomach, which is why it is not involved in the blood supply to this organ. Now, for the incorrect options: A. Splenic artery: The splenic artery is one of the primary sources of blood to the stomach. It gives rise to the short gastric arteries that supply the fundus of the stomach and branches that contribute to the left gastroepiploic artery, which supplies the greater curvature of the stomach. B. Hepatic artery: The hepatic artery is another crucial artery supplying the stomach. It gives rise to the right gastric artery and the gastroduodenal artery. The right gastric artery supplies the lesser curvature of the stomach, and the gastroduodenal artery contributes to the right gastroepiploic artery, which supplies the greater curvature. D. Celiac axis: The celiac axis (or celiac trunk) is the primary arterial source for the stomach. It branches into several arteries, including the left gastric artery, which supplies the lesser curvature of the stomach, and the splenic artery and common hepatic artery, both of which contribute branches that further supply the stomach.",
    "correct_choice_id": 200054,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43558381697974912/43558381697974912.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43558381697974912/43558381697974912.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50014,
    "choices": [
      {
        "id": 200056,
        "text": "L5-S1 roots"
      },
      {
        "id": 200057,
        "text": "S1-S2 roots"
      },
      {
        "id": 200058,
        "text": "L2-L3 roots"
      },
      {
        "id": 200059,
        "text": "S2-S4 roots"
      }
    ],
    "text": "Pudendal nerve supplying motor part to external sphincter is derived from -",
    "unique_key": "Q1724443",
    "question_audio": null,
    "question_video": null,
    "map_id": 34992435,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) S2-S4 roots The pudendal nerve is responsible for motor innervation to the external anal sphincter, as well as other muscles of the perineum. This nerve originates from the S2, S3, and S4 spinal nerves. The motor fibers to the external sphincter come from the S2-S4 roots, making D the correct answer. These roots contribute to the sacral portion of the nervous system, which controls functions of the pelvic organs, including voluntary control of the external anal sphincter. Incorrect Responses: (A) L5-S1 roots The L5-S1 roots are involved in the innervation of the lower limbs and parts of the pelvis, but they do not supply the external sphincter. Therefore, the L5-S1 roots are not responsible for the motor supply to the external anal sphincter, making A incorrect. (B) S1-S2 roots While S1 and S2 are part of the sacral spinal nerves, they do not fully account for the motor supply to the external anal sphincter. The motor innervation to this muscle specifically involves the S2-S4 roots. Thus, the inclusion of only S1-S2 would be incorrect, making B incorrect. (C) L2-L3 roots The L2-L3 roots are primarily involved in the innervation of the lower limbs and do not contribute to the motor innervation of the external sphincter or other pelvic muscles. The L2-L3 roots do not play a role in the pudendal nerve pathway, making C incorrect.",
    "correct_choice_id": 200059,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48755881697975078/48755881697975078.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48755881697975078/48755881697975078.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50015,
    "choices": [
      {
        "id": 200060,
        "text": "Lined by stratified squamous epithelium"
      },
      {
        "id": 200061,
        "text": "Mucosa is thick"
      },
      {
        "id": 200062,
        "text": "Middle third contains both skeletal and smooth muscles"
      },
      {
        "id": 200063,
        "text": "Lower third contains only skeletal muscle"
      }
    ],
    "text": "All are true about esophagus EXCEPT:",
    "unique_key": "Q1775966",
    "question_audio": null,
    "question_video": null,
    "map_id": 34484387,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Lower third contains only skeletal muscle This statement is incorrect because, in the lower third of the esophagus, there is only smooth muscle. The esophagus is characterized by a change in muscle type along its length. The upper third contains only skeletal muscle, the middle third has both skeletal and smooth muscle, and the lower third is composed entirely of smooth muscle. Therefore, the lower third does not contain only skeletal muscle. Incorrect Responses: (A) Lined by stratified squamous epithelium This statement is correct. The esophagus is lined by stratified squamous epithelium, which provides protection against the mechanical stress and abrasion from food as it moves down the esophagus. This epithelium is well-suited for this function due to its multiple layers, which help resist damage. (B) Mucosa is thick This statement is correct. The mucosa of the esophagus is relatively thick compared to other parts of the gastrointestinal tract. The thickness of the mucosa provides additional protection against abrasion caused by food particles passing through the esophagus. It also contributes to the esophagus\u2019s ability to resist chemical damage, especially from refluxed gastric contents. (C) Middle third contains both skeletal and smooth muscles This statement is correct. The middle third of the esophagus contains a mixture of skeletal muscle and smooth muscle. This is a transitional zone between the upper third, which is composed of only skeletal muscle, and the lower third, which contains only smooth muscle. The presence of both muscle types helps with the coordinated peristalsis of food.",
    "correct_choice_id": 200063,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67577291697975392/67577291697975392.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/67577291697975392/67577291697975392.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50016,
    "choices": [
      {
        "id": 200064,
        "text": "Enterocyte"
      },
      {
        "id": 200065,
        "text": "Endocrine cell"
      },
      {
        "id": 200066,
        "text": "Paneth cell"
      },
      {
        "id": 200067,
        "text": "Goblet cell"
      }
    ],
    "text": "Cell which does not migrate from the base of the crypt to ends of villi is:",
    "unique_key": "Q2648401",
    "question_audio": null,
    "question_video": null,
    "map_id": 34060312,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Paneth cell Paneth cells are specialized cells found at the base of the crypts in the small intestine. Unlike other intestinal cells, they do not migrate from the base of the crypts to the tips of the villi. Instead, Paneth cells remain at the crypt base where they play a crucial role in the immune response by secreting antimicrobial peptides, such as defensins and lysozyme, that help protect the intestinal lining from infections. This is why they do not migrate like other types of epithelial cells in the small intestine. Incorrect Responses: (A) Enterocyte Enterocytes are the most abundant cell type in the small intestine and are the primary absorptive cells. Enterocytes do migrate from the base of the crypts to the tips of the villi. As they migrate, they differentiate and become specialized for absorption, eventually sloughing off at the tip of the villi after a few days. Therefore, this statement is incorrect. (B) Endocrine cell Endocrine cells, also known as enteroendocrine cells, are involved in the production of various hormones that regulate gastrointestinal functions. These cells, like enterocytes, migrate from the base of the crypts to the villi. They release hormones, such as gastrin and serotonin, into the bloodstream, influencing digestive processes. This makes option (B) incorrect, as these cells do migrate. (D) Goblet cell Goblet cells are responsible for the secretion of mucus to protect the mucosal lining of the intestine. These cells do migrate from the base of the crypts to the tips of the villi, where they increase their mucus secretion as they mature. This makes option (D) incorrect as well.",
    "correct_choice_id": 200066,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5108431697975405/5108431697975405.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/5108431697975405/5108431697975405.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50017,
    "choices": [
      {
        "id": 200068,
        "text": "Right Hepatic artery"
      },
      {
        "id": 200069,
        "text": "Gastroduodenal artery"
      },
      {
        "id": 200070,
        "text": "Hepatic artery"
      },
      {
        "id": 200071,
        "text": "Superior mesenteric atery"
      }
    ],
    "text": "Right gastroepiploic artery is a branch of",
    "unique_key": "Q2289983",
    "question_audio": null,
    "question_video": null,
    "map_id": 34371284,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Gastroduodenal artery The right gastroepiploic artery is a branch of the gastroduodenal artery, which is a branch of the common hepatic artery. The right gastroepiploic artery supplies blood to the greater curvature of the stomach and the omentum. It runs along the greater curvature of the stomach and anastomoses with the left gastroepiploic artery, which arises from the splenic artery. This makes option (B) the correct answer. Incorrect Responses: (A) Right Hepatic artery The right hepatic artery is a branch of the common hepatic artery that supplies the right lobe of the liver and the gallbladder. It does not give rise to the right gastroepiploic artery. Therefore, this option is incorrect. (C) Hepatic artery The hepatic artery refers to the common hepatic artery, which gives rise to multiple branches, including the right hepatic artery. However, the right gastroepiploic artery specifically branches from the gastroduodenal artery, not directly from the common hepatic artery. Therefore, this option is also incorrect. (D) Superior mesenteric artery The superior mesenteric artery supplies the small intestine, cecum, ascending colon, and part of the transverse colon, but it does not give rise to the right gastroepiploic artery. The right gastroepiploic artery is derived from the gastroduodenal artery, which is a branch of the common hepatic artery, not the superior mesenteric artery. Therefore, this option is incorrect.",
    "correct_choice_id": 200069,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77151851697975423/77151851697975423.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77151851697975423/77151851697975423.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50018,
    "choices": [
      {
        "id": 200072,
        "text": "Jejunum"
      },
      {
        "id": 200073,
        "text": "Descending Colon"
      },
      {
        "id": 200074,
        "text": "Stomach"
      },
      {
        "id": 200075,
        "text": "Ascending Colon"
      }
    ],
    "text": "Valvulae conniventes are seen in",
    "unique_key": "Q3357575",
    "question_audio": null,
    "question_video": null,
    "map_id": 34985208,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Jejunum The valvulae conniventes, also known as plicae circulares, are transverse folds of the mucous membrane in the small intestine. They are particularly prominent in the jejunum and are responsible for increasing the surface area for absorption. These folds are most abundant in the proximal part of the jejunum and gradually decrease towards the ileum. They are not present in the large intestine or the stomach. Therefore, option A (Jejunum) is the correct answer. Incorrect Responses: (B) Descending Colon The descending colon does not have valvulae conniventes. The large intestine, including the descending colon, has a smooth mucosal lining with haustra (sacculations) and taeniae coli (longitudinal muscle bands), but it lacks the circular folds seen in the small intestine. Therefore, option B (Descending Colon) is incorrect. (C) Stomach The stomach contains rugae, which are folds of the mucosal lining that allow for the expansion of the stomach as it fills with food. Unlike valvulae conniventes, rugae are not circular and do not serve the same purpose of increasing surface area for absorption. Therefore, option C (Stomach) is incorrect. (D) Ascending Colon Similar to the descending colon, the ascending colon does not have valvulae conniventes. The large intestine is characterized by haustra and taeniae coli, but it lacks the circular folds seen in the small intestine.",
    "correct_choice_id": 200072,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74771121697976338/74771121697976338.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/74771121697976338/74771121697976338.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50019,
    "choices": [
      {
        "id": 200076,
        "text": "Paracolic"
      },
      {
        "id": 200077,
        "text": "Epicolic"
      },
      {
        "id": 200078,
        "text": "Preaortic"
      },
      {
        "id": 200079,
        "text": "Ileocoic"
      }
    ],
    "text": "Which of the following is the terminal group of lymph node for colon?",
    "unique_key": "Q6755253",
    "question_audio": null,
    "question_video": null,
    "map_id": 34176630,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Preaortic The preaortic lymph nodes are considered the terminal group of lymph nodes for the colon. They are located in front of the abdominal aorta and receive lymph from the colon through the mesenteric lymph nodes. The lymphatics of the colon primarily drain into the preaortic lymph nodes, especially those associated with the superior mesenteric artery (SMA) and inferior mesenteric artery (IMA). Therefore, option C (Preaortic) is the correct answer. Incorrect Responses: (A) Paracolic The paracolic lymph nodes are located alongside the colon and receive lymph from the colon, particularly from the adjacent areas. However, they are not considered the terminal group of lymph nodes for the colon, as the lymph from the paracolic nodes eventually drains into the mesenteric or preaortic nodes. Therefore, option A (Paracolic) is incorrect. (B) Epicolic The epicolic lymph nodes are located on the surface of the colon and are among the first lymph nodes that drain lymph from the colon. However, they are not the terminal group of lymph nodes, as the lymph eventually drains to deeper lymph nodes like the mesenteric and preaortic nodes. Therefore, option B (Epicolic) is incorrect. (D) Ileocolic The ileocolic lymph nodes are located near the junction of the ileum and the colon, specifically around the ileocolic artery. They drain the ileum and cecum, but they do not serve as the terminal group for the entire colon. The terminal drainage for the colon is through the preaortic lymph nodes,",
    "correct_choice_id": 200078,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60821101697976350/60821101697976350.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60821101697976350/60821101697976350.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50020,
    "choices": [
      {
        "id": 200080,
        "text": "Retrocaecal"
      },
      {
        "id": 200081,
        "text": "Pelvic"
      },
      {
        "id": 200082,
        "text": "Paracaecal"
      },
      {
        "id": 200083,
        "text": "Preileal"
      }
    ],
    "text": "The commonest anatomical position of appendix is:",
    "unique_key": "Q6180232",
    "question_audio": null,
    "question_video": null,
    "map_id": 34693312,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Retrocaecal The most common anatomical position of the appendix is retrocaecal, where the appendix lies behind the cecum. This position is observed in approximately 50% of cases. The appendix may have a variable position, but retrocaecal is considered the most common due to its relative frequency and anatomical alignment in the right lower quadrant. Incorrect Responses: (B) Pelvic In the pelvic position, the appendix is located within the pelvis, which is seen in around 10-20% of cases. While this is a common variation, it is not the most frequent anatomical position, making B (Pelvic) an incorrect answer. (C) Paracaecal In the paracaecal position, the appendix lies beside the cecum, typically to the side but not behind it. This position is less common than the retrocaecal position, seen in about 20-30% of individuals. Thus, C (Paracaecal) is not the most common anatomical position of the appendix. (D) Preileal In the preileal position, the appendix is positioned in front of the ileum, which is an unusual variation. It is found in about 5-10% of cases and is not as common as the retrocaecal position,",
    "correct_choice_id": 200080,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55018661697976369/55018661697976369.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55018661697976369/55018661697976369.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50021,
    "choices": [
      {
        "id": 200084,
        "text": "Appendix"
      },
      {
        "id": 200085,
        "text": "Caecum"
      },
      {
        "id": 200086,
        "text": "Rectum"
      },
      {
        "id": 200087,
        "text": "Sigmoid colon"
      }
    ],
    "text": "Appendices epiploicae present in -",
    "unique_key": "Q8469773",
    "question_audio": null,
    "question_video": null,
    "map_id": 34050249,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Sigmoid colon Appendices epiploicae are small pouches of peritoneum filled with fat, and they are most commonly found along the colon, particularly in the sigmoid colon. These structures are part of the serosa of the colon and are particularly abundant in the sigmoid colon. They serve a role in fat storage, although their exact physiological function remains somewhat unclear. Therefore, the correct response is D (Sigmoid colon). Incorrect Responses: (A) Appendix The appendix does not have appendices epiploicae. The appendix is a small, finger-like projection that hangs from the cecum, and although it has a mesentery, it is not characterized by appendices epiploicae. Thus, A (Appendix) is incorrect. (B) Caecum While the caecum has a mesentery and can have some fatty deposits, it does not have the same extensive presence of appendices epiploicae as seen in the sigmoid colon. The caecum\u2019s structure does not typically include these fatty pouches, so B (Caecum) is an incorrect answer. (C) Rectum The rectum is the final part of the colon, and while it does have a mesorectum and other supportive structures, appendices epiploicae are generally not present in the rectum. Therefore, C (Rectum) is incorrect.",
    "correct_choice_id": 200087,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23731721697976382/23731721697976382.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23731721697976382/23731721697976382.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50022,
    "choices": [
      {
        "id": 200088,
        "text": "Gastric antrum"
      },
      {
        "id": 200089,
        "text": "Ascending portion of the duodenum"
      },
      {
        "id": 200090,
        "text": "Transverse portion of the duodenum"
      },
      {
        "id": 200091,
        "text": "Descending portion of the duodenum"
      },
      {
        "id": 200092,
        "text": "Duodenojejunal flexure"
      },
      {
        "id": 200093,
        "text": "Jejunum"
      }
    ],
    "text": "A 28 years old female presents to your office with severe nausea and recurrent bilious vomiting. Her symptoms initially began as postprandial epigastric pain. She tells you that her symptoms only started when she had \u201crelationship issue with her boyfriend because of her being overweight. She took it as a challenge and lost 15 kg on a \u201cstrict diet\". On physical exam, her abdomen is tender and slightly distended with high-pitched bowel sounds. Concerned about a small bowel obstruction, you admit the patient to the hospital. A laparotomy is performed, and it is observed that the angle between her superior mesenteric artery and her aorta is significantly decreased. Which of the following structures is most likely to be obstructed by the artery?",
    "unique_key": "Q7542394",
    "question_audio": null,
    "question_video": null,
    "map_id": 34745334,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Superior mesenteric artery (SMA) syndrome (Wilkie's syndrome) \u2022 A rare cause of upper gastrointestinal obstruction. \u2022 It is an acquired disorder in which acute angulation of the SMA causes compression of the third part of the duodenum between the SMA and the aorta. \u2022 Clinical SMA syndrome manifestations appear if the angle drops below 22\u00b0. \u2022 Commonly due to loss of loss of fatty tissue as a result of a variety of debilitating conditions.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/qid%2069846.png\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200090,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3442771698324888/3442771698324888.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/3442771698324888/3442771698324888.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50023,
    "choices": [
      {
        "id": 200094,
        "text": "Acid reduction therapy"
      },
      {
        "id": 200095,
        "text": "Anti-inflammatory medications"
      },
      {
        "id": 200096,
        "text": "Modified dairy diet"
      },
      {
        "id": 200097,
        "text": "Modified grain diet"
      },
      {
        "id": 200098,
        "text": "Enzyme supplementation"
      },
      {
        "id": 200099,
        "text": "Antibiotic therapy"
      }
    ],
    "text": "A 14 months old girl is brought to the office due to a 2-month history of diarrhea. Her parents report that she has 3-5 loose, non bloody bowel movements daily with occasional episodes of vomiting She was breastfed exclusively until age 9 months and after that she had a balanced and mixed diet including whole milk, fruits, vegetables, bread, and meats. However, the girl has been less interested in food over the past several weeks. There is no history of travel or contacts with similar symptoms. On physical examination, the patient appears well but has lost 1.2 kg in the last 2 months. After laboratory evaluation, duodenal biopsy findings are shown in the picture. Which of the following would most likely improve this patient's symptoms?<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/image(355).png\" alt=\"Question Image\"></p>",
    "unique_key": "Q6941706",
    "question_audio": null,
    "question_video": null,
    "map_id": 34596532,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Celiac disease (gluten-sensitive enteropathy) classically presents between age 6-24 months with abdominal pain, diarrhea, vomiting, and weight loss. Duodenal biopsy reveals crypt hyperplasia, villous atrophy, and intraepithelial lymphocyte infiltration. Treatment with a gluten-free diet is recommended.",
    "correct_choice_id": 200097,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51879011698328462/51879011698328462.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51879011698328462/51879011698328462.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50024,
    "choices": [
      {
        "id": 200100,
        "text": "A"
      },
      {
        "id": 200101,
        "text": "B"
      },
      {
        "id": 200102,
        "text": "C"
      },
      {
        "id": 200103,
        "text": "D"
      }
    ],
    "text": "A 62 years old woman comes to the emergency department with progressive fatigue and lower-extremity paresthesias Past history is insignificant. Laboratory studies show a mean corpuscular volume of 114 fL. Upper gastrointestinal endoscopy shows atrophic mucosa in the gastric body and fundus and a normal-appearing antrum. Destruction of which of the following gastric layers is most likely responsible for this patient's symptoms?<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Anat%20Clen%20vign%2085.png\" alt=\"Question Image\"></p>",
    "unique_key": "Q3548265",
    "question_audio": null,
    "question_video": null,
    "map_id": 34235195,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Given scenario is of pernicious anemia (macrocytic anemia). Parietal cells secrete HCl and also intrinsic factor required for absorption of B12. So the patient has Vit B12 deficiency.",
    "correct_choice_id": 200102,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32926941698328484/32926941698328484.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/32926941698328484/32926941698328484.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50025,
    "choices": [
      {
        "id": 200104,
        "text": "The cardiac constriction, the azygos arch, the pulmonary trunk"
      },
      {
        "id": 200105,
        "text": "The cardiac constriction, the cricoid cartilageconstriction, and the thoracic duct"
      },
      {
        "id": 200106,
        "text": "The pulmonary constriction, cricothyroid constriction,and the azygos arch"
      },
      {
        "id": 200107,
        "text": "At the aortic arch, the cricopharyngeal constriction, and the diaphragmatic constriction"
      },
      {
        "id": 200108,
        "text": "The cricopharyngeal constriction, cricothyroidconstriction, thymus gland"
      }
    ],
    "text": "A 35-year-old female who was brought into the emergency department for a drug overdose requires insertion of a nasogastric tube and administration of activated charcoal. What are the three sites in the esophagus where one should anticipate resistance due to compression on the organ?",
    "unique_key": "Q8052734",
    "question_audio": null,
    "question_video": null,
    "map_id": 34515240,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) The esophagus typically has four constrictions. In the thorax the esophagus is compressed by (1) the arch of the aorta (2) the left principal bronchus, and (3) the diaphragm. The cricopharyngeal constriction is in the neck<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/15(192).png\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200107,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48396761698329029/48396761698329029.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/48396761698329029/48396761698329029.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50026,
    "choices": [
      {
        "id": 200109,
        "text": "Left gastric"
      },
      {
        "id": 200110,
        "text": "Left gastroepiploic"
      },
      {
        "id": 200111,
        "text": "Right gastric"
      },
      {
        "id": 200112,
        "text": "Right gastroepiploic"
      }
    ],
    "text": "A 36-year-old woman is hospitalized for treatment of a stomach ulcer that has been getting progressively worse over several months. Radiographic studies reveal the site of involvement to be along the greater curvature, approximately 4 cm away from the pyloric sphincter. That night, the ulcer perforates, and there is considerable intra-abdominal bleeding. Surgery reveals that the ulcer has eroded through the stomach wall and has damaged the artery supplying the involved region of the stomach. Which artery was likely involved?",
    "unique_key": "Q3462868",
    "question_audio": null,
    "question_video": null,
    "map_id": 34093863,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) The right gastroepiploic artery, branch of the gastroduodenal artery, supplies the right half of the greater curvature of the stomach and could be directly affected by ulceration of the greater curvature of the stomach at a site this close (4 cm) to the pyloric sphincter. The left gastric artery (choice A), branch of the celiac trunk, supplies the left half of the lesser curvature of the stomach. The left gastroepiploic artery (choice B), branch of the splenic artery, supplies the left half of the greater curvature of the stomach. Although it anastomoses with the right gastroepiploic artery, it is unlikely that this artery would be directly damaged by ulceration of the stomach near the pyloric sphincter. The right gastric artery (choice C), off the proper hepatic artery, supplies the right half of the lesser curvature of the stomach.<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/qid%2069845(1).jpg\" alt=\"Solution Image\"></p>",
    "correct_choice_id": 200112,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52264591698329095/52264591698329095.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52264591698329095/52264591698329095.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50027,
    "choices": [
      {
        "id": 200113,
        "text": "At the base of villi throughout the small intestine"
      },
      {
        "id": 200114,
        "text": "In the epithelium of the ampulla of Vater"
      },
      {
        "id": 200115,
        "text": "In the mucosa and submucosa of the jejunum"
      },
      {
        "id": 200116,
        "text": "In the submucosa of the duodenum"
      }
    ],
    "text": "Brunner\u2019s glands secrete an alkaline product that helps achieve optimal pH for the activity of pancreatic enzymes. Where are these glands located?",
    "unique_key": "Q8553821",
    "question_audio": null,
    "question_video": null,
    "map_id": 34196099,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Brunner\u2019s glands are located in the submucosa of the duodenum. These glands are connected to the intestinal lumen by ducts that open into certain crypts. They secrete an alkaline product that protects the duodenal mucosa from the acidic chyme and helps achieve optimal pH for pancreatic enzymes.",
    "correct_choice_id": 200116,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50409531698329140/50409531698329140.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/50409531698329140/50409531698329140.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50028,
    "choices": [
      {
        "id": 200117,
        "text": "A-1, B-2, C-3, D-4"
      },
      {
        "id": 200118,
        "text": "A-2, B-3, C-1, D-4"
      },
      {
        "id": 200119,
        "text": "A-2, B-1, C-4, D-3"
      },
      {
        "id": 200120,
        "text": "A-1, B-3, C-2, D-4"
      }
    ],
    "text": "Match the following columns 1. Pelvic 2. Retrocaecal 3. Subcaecal 4. Preileal<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/3(328).png\" alt=\"Question Image\"></p>",
    "unique_key": "Q9391573",
    "question_audio": null,
    "question_video": null,
    "map_id": 34093873,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) 1. Pelvic-C 2. Retrocaecal-A 3. Subcaecal-B 4. Preileal-D",
    "correct_choice_id": 200118,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50029,
    "choices": [
      {
        "id": 200121,
        "text": "Superior mesenteric vessels"
      },
      {
        "id": 200122,
        "text": "Root of mesentery"
      },
      {
        "id": 200123,
        "text": "Gall bladder"
      },
      {
        "id": 200124,
        "text": "Jejunal coils"
      }
    ],
    "text": "Anterior relations of 3rd part of Duodenum are all except?",
    "unique_key": "Q6324981",
    "question_audio": null,
    "question_video": null,
    "map_id": 34100491,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Option A-Superior mesenteric vessels lies anterior to 3rd part of duodenum. Option B-Root of mesentery also lies anterior to 3rd part of duodenum. Option C-Gall bladder lies anterior to 1st part of duodenum. Option D-Jejunal coils also lies anterior to 3rd part of duodenum.",
    "correct_choice_id": 200123,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50030,
    "choices": [
      {
        "id": 200125,
        "text": "Ileal diverticulum"
      },
      {
        "id": 200126,
        "text": "Urachal cyst"
      },
      {
        "id": 200127,
        "text": "Umbilical fistula"
      },
      {
        "id": 200128,
        "text": "Omphalocele"
      }
    ],
    "text": "What is the diagnosis based on the image shown below:-<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/4(375).png\" alt=\"Question Image\"></p>",
    "unique_key": "Q3339407",
    "question_audio": null,
    "question_video": null,
    "map_id": 34815796,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Option A-Ileal diverticulum/Meckel diverticulum is a common congenital abnormality of the small intestine caused by incomplete obliteration of the vitelline (omphalomesenteric) duct. Most patients with Meckel diverticulum are asymptomatic, with the abnormality discovered only incidentally in imaging studies. Option B-A urachal cyst occurs when a pocket forms in a remnant of the urachus, between the bladder and the naval. This fluid-filled sac can vary in size and clinical presentation. Option C-Umbilical fistulae can occur when there is a failure of closure of the structures passing through the umbilicus. Option D-An omphalocele is a birth defect in which an infant's intestine or other abdominal organs are outside of the body because of a hole in the belly button (navel) area. The intestines are covered only by a thin layer of tissue and can be easily seen.",
    "correct_choice_id": 200125,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8239091725256636/8239091725256636.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/8239091725256636/8239091725256636.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50031,
    "choices": [
      {
        "id": 200129,
        "text": "Amnion"
      },
      {
        "id": 200130,
        "text": "Chorion"
      },
      {
        "id": 200131,
        "text": "Mesoderm"
      },
      {
        "id": 200132,
        "text": "Endoderm"
      }
    ],
    "text": "The covering of an omphalocele is derived from which layer",
    "unique_key": "Q4813842",
    "question_audio": null,
    "question_video": null,
    "map_id": 34349639,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) The covering of an omphalocele is derived from Amnion. An omphalocele is considered an abdominal wall defect (a hole in the abdominal wall). The child's intestines usually stick out (protrude) through the hole. The condition looks similar to gastroschisis. An omphalocele is a birth defect in which the infant's intestine or other abdominal organs protrude through a hole in the belly button area and are covered with a membrane. In gastroschisis, there is no covering membrane.",
    "correct_choice_id": 200129,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25850681725256650/25850681725256650.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/25850681725256650/25850681725256650.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50032,
    "choices": [
      {
        "id": 200133,
        "text": "Hepatic flexure"
      },
      {
        "id": 200134,
        "text": "Splenic flexure"
      },
      {
        "id": 200135,
        "text": "Rectosigmoid Jn."
      },
      {
        "id": 200136,
        "text": "Ileocolic Jn."
      }
    ],
    "text": "Watershed area between SMA and IMA which commonly result in ischemia is -",
    "unique_key": "Q5632411",
    "question_audio": null,
    "question_video": null,
    "map_id": 34532166,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Splenic flexure The splenic flexure, also known as the left colic flexure, is located between the left transverse colon and the descending colon. This region is a common site for ischemia due to its position at the watershed area between the superior mesenteric artery (SMA) and the inferior mesenteric artery (IMA). The blood supply to the splenic flexure is marginal, making it more prone to ischemic events, especially in cases of reduced perfusion or vascular insufficiency. This area is known as the Griffith's point and is frequently affected in conditions like mesenteric ischemia, particularly in the setting of low blood flow or arterial occlusion. Incorrect Responses: (A) Hepatic flexure The hepatic flexure is located at the junction between the ascending colon and the transverse colon. While it is near a watershed area, its blood supply is primarily from the right colic artery, which branches from the superior mesenteric artery (SMA). As a result, the hepatic flexure is less susceptible to ischemia compared to the splenic flexure, making A incorrect. (C) Rectosigmoid junction The rectosigmoid junction is where the sigmoid colon transitions into the rectum. Its blood supply comes from branches of the inferior mesenteric artery (IMA), with contributions from the superior rectal artery. While ischemia in this area can occur, it is not considered a classic watershed area between the SMA and IMA like the splenic flexure. Therefore, C is incorrect. (D) Ileocolic junction The ileocolic junction is the area where the ileum meets the cecum and is primarily supplied by the ileocolic artery, a branch of the superior mesenteric artery (SMA). This area is less prone to ischemia in comparison to the splenic flexure, as it is well-vascularized by the SMA.",
    "correct_choice_id": 200134,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '20  Gastrointestinal System';
        const quizFilename = '20-gastrointestinal-system-e89fb871.html';
        let hierarchy = ["DAMS", "DQB", "Anatomy"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on navigation
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>