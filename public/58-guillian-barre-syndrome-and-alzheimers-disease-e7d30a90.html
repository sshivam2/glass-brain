<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>58 Guillian Barre Syndrome And Alzheimers Disease - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 30-year-old man from Pune presents with recurrent falls in stairs from past 3 days with leg muscle weakness and root pains in both legs. On examination flaccid paralysis is noted in both legs with arreflexia. Sensory examination shows distinct level below T10 where radicular pain is being felt. Bladder was catheterized due to urinary incontience. MRI spine shows inflammation of spinal cord. He had a diarrheal episodes 2 weeks ago. Diagnosis is?\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Acute inflammatory demyelinating polyneuropathy"
      },
      {
        "id": 2,
        "text": "Miller Fisher syndorme"
      },
      {
        "id": 3,
        "text": "Transverse Myelitis"
      },
      {
        "id": 4,
        "text": "Chronic inflammatory demyelinating polyneuropathy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) <span class=\"customMeta\" data-dictid=\"a6260fa86416927772008d36bd7e5f\">Transverse</span> myelitis\u00a0</strong></p>\n\n<p>This patient has <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"d28003a82c1692777202475273e346\">flaccid</span> <span class=\"customMeta\" data-dictid=\"3e91939b981692777194eb7e537bfd\">paraparesis</span> with a clear <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> level (below T10) and <span class=\"customMeta\" data-dictid=\"e6cfda323816927771839cc83e376d\">bladder</span> involvement, suggesting a <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> in the <span class=\"customMeta\" data-dictid=\"d816ba952f1692777199fc69bd7c56\">spinal</span> cord rather than <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> nerves.The presence of a <strong>sensory level and <span class=\"customMeta\" data-dictid=\"d816ba952f1692777199fc69bd7c56\">spinal</span> cord inflammation</strong> on MRI confirms the diagnosis of <strong>transverse myelitis.</strong></p>\n\n<p>While AIDP (Guillain-Barr\u00e9 Syndrome) also presents with <span class=\"customMeta\" data-dictid=\"62f0d7c8491692777182ab7cc82edb\">ascending</span> <span class=\"customMeta\" data-dictid=\"d28003a82c1692777202475273e346\">flaccid</span> <span class=\"customMeta\" data-dictid=\"72fa9105b916927771945aef35e8ed\">paralysis</span> and areflexia, it <strong>lacks </strong>a <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> level, and bladder/bowel involvement is rare.\u00a0</p>\n\n<p>CIDP is a chronic, progressive <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"25cf8215eb1692777186f0ab76dc34\">demyelinating polyneuropathy</span> where LMNL features evolve over > 9 weeks\u00a0</p>\n\n<p>Miller fisher syndrome\u00a0 has <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> of opthalmoplegia, arreflexia without weakness and ataxia\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/FfUNtp0VvSonJ7GAMsEK1751578850.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/0ju0W3ZS7O5mUHo5z3zJ1751578961.mp3"
  },
  {
    "text": "<p>Which of the following is not correct about GBS?\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Prolonged F wave latency"
      },
      {
        "id": 2,
        "text": "Diaphragmatic paralysis"
      },
      {
        "id": 3,
        "text": "Pseudo-bulbar weakness may cause difficulty in handling secretions"
      },
      {
        "id": 4,
        "text": "Proprioception loss"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C)\u00a0</strong>Pseudo-bulbar weakness may cause difficulty in handling secretions</p>\n\n<p>GBS is LMNL and has <span class=\"customMeta\" data-dictid=\"ef00544aba1692777183bc916b1c30\">bulbar</span> weakness causing difficulty in handling oral secretions that may <span class=\"customMeta\" data-dictid=\"efaf9e0192169277719278711f7f74\">mimic</span> <span class=\"customMeta\" data-dictid=\"4004f1f7241692777183d200f866da\">brainstem</span> ischemia. <strong>Pseudo-bulbar <span class=\"customMeta\" data-dictid=\"f3e67cebd51692777194f5257898e4\">palsy</span> implies UMN l</strong>esion.\u00a0</p>\n\n<p>Brighton criteria for GBS mention NCV shows\u00a0Prolonged F-waves + slowed <span class=\"customMeta\" data-dictid=\"63bda90e3516927771848cbb473f04\">conduction</span> + <span class=\"customMeta\" data-dictid=\"63bda90e3516927771848cbb473f04\">conduction</span> block\u00a0 in demyelinating GBS</p>\n\n<p>Diaphragmatic <span class=\"customMeta\" data-dictid=\"72fa9105b916927771945aef35e8ed\">paralysis</span> can occur due to <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> spine demyelination</p>\n\n<p>Proprioception loss in GBS occurs due to <strong>demyelination of large-diameter <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> fibers in <span class=\"customMeta\" data-dictid=\"51b29c48291692777186b488ac8cd9\">dorsal</span> roots</strong>, disrupting input to the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> column pathway</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/DgBQ9wHHenYseNeUqbUS1751579147.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/5RJiwgEJsIn8lF9f9aH91751579236.mp3"
  },
  {
    "text": "<p>Which of the following statements is incorrect regarding the types of Guillain-Barr\u00e9 syndrome?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "AIDP is the most common form in adults"
      },
      {
        "id": 2,
        "text": "AMSAN has best prognosis amongst all variants"
      },
      {
        "id": 3,
        "text": "AMAN involves axonal degeneration in children and young adults"
      },
      {
        "id": 4,
        "text": "Miller-Fisher syndrome is associated with anti-GQ1b antibodies"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) AMSAN has a better <span class=\"customMeta\" data-dictid=\"e580b4033e169277719609af594c16\">prognosis</span> than AMAN.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0</p>\n\n<p>AMSAN typically has a worse <span class=\"customMeta\" data-dictid=\"e580b4033e169277719609af594c16\">prognosis</span> than AMAN</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:676px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Type</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Features</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Neural Target</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Electrodiagnostic Study</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>AIDP (Acute Inflammatory Demyelinating Polyneuropathy)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Most common in adults <strong> (Option A)</strong></li>\n\t\t\t\t<li>Rapid recovery</li>\n\t\t\t\t<li>IgG Anti-GM1 a/b</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Schwann cells</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Demyelination</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>AMAN (Acute Motor Axonal Neuropathy) </strong><strong> </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Seen in children and young adults <strong>(Option C)</strong></li>\n\t\t\t\t<li>Poor prognosis</li>\n\t\t\t\t<li>IgG Anti-GM1 a/b</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Nodes of Ranvier</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Axonal degeneration</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>AMSAN (Acute Motor Sensory Axonal Neuropathy) </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Uncommon</li>\n\t\t\t\t<li>Seen in adults</li>\n\t\t\t\t<li>Worst prognosis</li>\n\t\t\t\t<li>IgG Anti-GM1 a/b</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Nodes of Ranvier</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Axonal degeneration</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Miller Fisher Syndrome </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Triad:</strong> Ophthalmoplegia, Areflexia, Ataxia</li>\n\t\t\t\t<li>Seen in 5% of cases</li>\n\t\t\t\t<li>Anti-GQ1b <strong>(Option D)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Identical to AIDP</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Either <span class=\"customMeta\" data-dictid=\"336cefd9041692777185a8959344f8\">demyelination</span> or axonal degeneration</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/Q2g7TNRwl5VcWwAt6wf11751579340.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/2wi4bk4sgZzPE6vAUfhT1751579462.mp3"
  },
  {
    "text": "<p>A 35-year-old man presents with a 2-day history of progressive weakness that started in his legs after returning from his international trip. Today he cannot get up from bed and is having hand weakness. On examination, distal arreflexia is noted with power grade 1/5 for muscles at all joints of lower limbs and 3/5 for upper limbs. CSF study shows cytoalbuminological dissociation. Which criteria are used for diagosis of this condition?\u00a0\u00a0</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Brighton"
      },
      {
        "id": 2,
        "text": "Macdonald'"
      },
      {
        "id": 3,
        "text": "Adam and Victor"
      },
      {
        "id": 4,
        "text": "Dubois"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A)</strong> Brighton criteria\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Brighton criteria are used for diangosis of GBS. These criteria <span class=\"customMeta\" data-dictid=\"d4ae50897e16927771884b5c46ba7d\">grade</span> <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> certainty from Level 1 (highest) to Level 4 based on clinical findings, CSF analysis (albuminocytologic dissociation), and electrophysiological testing.\u00a0</p>\n\n<p>Option B is used for multiple sclerosis.</p>\n\n<p>Option C is used for Normal pressure hydrocephalus.</p>\n\n<p>Option D is used for Alzeihemer disease (\u00a0Clinical + biomarker-based diagnosis).\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/Oh15iGjYjb9s6ox83xvn1751579548.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MAJmmyMe5QP7MhkLglXu1751579627.mp3"
  },
  {
    "text": "<p>A 40-year-old man presents with a one day history of progressive weakness, initially localized to his legs but now involving the arms. He tells about inability in buttoning his shirt along with fatigue during minimal exertion.On examination, there is flaccid quadriparesis with absent deep tendon reflexes. What is the next best step in the management of this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Nerve conduction studies"
      },
      {
        "id": 2,
        "text": "Lumbar puncture for cytoalbuminological dissociation"
      },
      {
        "id": 3,
        "text": "Anti GM1 and Anti GQ1 antibody titers"
      },
      {
        "id": 4,
        "text": "PCR stool for C. jejuni"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Nerve <span class=\"customMeta\" data-dictid=\"63bda90e3516927771848cbb473f04\">conduction</span> studies\u00a0</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:100%\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td><strong>Test\u00a0</strong></td>\n\t\t\t<td><strong>Remarks\u00a0</strong></td>\n\t\t\t<td><strong>What it\u00a0shows and time-lines\u00a0</strong></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>CSF study\u00a0</td>\n\t\t\t<td>CSF protein can be normal in first 2\u00a0days. Maximum protein rise is seen around day 7. \u00a0</td>\n\t\t\t<td>\n\t\t\t<p>Cytoalbuminological dissociation\u00a0</p>\n\n\t\t\t<p><strong>So Can be false negative\u00a0in first few days of illness\u00a0</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>NCV</td>\n\t\t\t<td>Shows demeylination or axonal loss\u00a0</td>\n\t\t\t<td>Can be <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> before LP\u00a0</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>Option C and D are not a part of Brighton criteria for diagnosis of GBS. Progression of GBS can be as fast as 12 hours or can be over 4 weeks\u00a0</p>\n\n<p><strong>Brighton Criteria for Guillain-Barr\u00e9 Syndrome (GBS)</strong></p>\n\n<p><strong>Mnemonic: FAME</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Criteria</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Description</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Flaccid Bilateral Weakness</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Weakness of limbs (flaccid).</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Areflexia</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Areflexia is present in areas of weakness.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>CytoAlbuminologic dissociation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Elevated CSF protein with normal WBC count.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Monophasic Illness</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Symptoms develop over 12 hours to 28 days.</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Electrodiagnostic testing\u00a0</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>NCV shows increased <span class=\"customMeta\" data-dictid=\"d3874506171692777191570df32b65\">latency</span> of F <span class=\"customMeta\" data-dictid=\"20f478f55f1692777197e351415f8f\">reflex</span> and <span class=\"customMeta\" data-dictid=\"63bda90e3516927771848cbb473f04\">conduction</span> block with <span class=\"customMeta\" data-dictid=\"637ea4d17516927772003be2b2aae4\">temporal</span> dispersion\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/G6ees0N9WEPgsVDCcoTp1751623561.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/FAYlzTArW3iMX2VPi0Wi1751623862.mp3"
  },
  {
    "text": "<p>A 50-year-old man presents with difficulty in walking due to imbalance following a recent viral illness. He also reports double vision. Examination reveals bilateral ptosis, ophthalmoplegia, and areflexia. He has a history of alcohol use but no diabetes or hypertension.What is the most appropriate treatment?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous immunoglobulin"
      },
      {
        "id": 2,
        "text": "Corticosteroids"
      },
      {
        "id": 3,
        "text": "Thiamine with dextrose"
      },
      {
        "id": 4,
        "text": "Dextrose with thiamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Intravenous immunoglobulin</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The diagnosis is Miller-Fisher Syndrome (a <span class=\"customMeta\" data-dictid=\"0efdcdc9e01692777201003c81c85a\">variant</span> of GBS), characterized by the classic <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> of <span class=\"customMeta\" data-dictid=\"2cc1b4ff2216927771940a80e764a2\">ophthalmoplegia</span> (ptosis, double vision), <span class=\"customMeta\" data-dictid=\"0842a8a59f1692777182f44d334dda\">ataxia</span> (lack of coordination), and <span class=\"customMeta\" data-dictid=\"0afce348351692777182d61735adc5\">areflexia</span> (absence of <span class=\"customMeta\" data-dictid=\"606c2acae5169277720052151cb04c\">tendon</span> reflexes). The <span class=\"customMeta\" data-dictid=\"6b7b5460171692777185e6e2475f8c\">cranial</span> nerve involved is 3rd nerve.\u00a0</li>\n\t<li>IVIG is the first-line treatment, <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> the underlying <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> process.</li>\n\t<li>Option C is ruled out as it used for wernicke <span class=\"customMeta\" data-dictid=\"b37b211cbc169277718725f07b5473\">encephalopathy</span> where patient has global confusion, opthalmoplegia and ataxia. The <span class=\"customMeta\" data-dictid=\"6b7b5460171692777185e6e2475f8c\">cranial</span> nerve involved in 6th nerve.\u00a0</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/MoMB8W1W9I2VS1SzQAxr1751624031.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/rDha9GS7RfDQ8x7SAqBt1751624156.mp3"
  },
  {
    "text": "<p>A 20-year-old female presents with acute dysphagia, particularly for liquids, and nasal regurgitation, following a recent dengue fever. Examination reveals bilateral facial weakness and areflexia in the upper limbs. Brain and cervical spine MRI is normal, while cerebrospinal fluid analysis shows elevated protein with normal opening pressure, cells and glucose. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Acute pharyngeal cervicobrachial neuropathy"
      },
      {
        "id": 2,
        "text": "Miller-Fisher syndrome"
      },
      {
        "id": 3,
        "text": "Multiple sclerosis"
      },
      {
        "id": 4,
        "text": "Botulism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Acute pharyngeal <span class=\"customMeta\" data-dictid=\"48379902e51692777184ad0891981d\">cervicobrachial</span> neuropathy</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The diagnosis is <strong>Acute pharyngeal <span class=\"customMeta\" data-dictid=\"48379902e51692777184ad0891981d\">cervicobrachial</span> Neuropathy</strong>.\u00a0</li>\n\t<li>This condition is characterized by <span class=\"customMeta\" data-dictid=\"b1a011ab5416927771949dde193e3a\">oropharyngeal</span> and <span class=\"customMeta\" data-dictid=\"48379902e51692777184ad0891981d\">cervicobrachial</span> weakness, often with <span class=\"customMeta\" data-dictid=\"0afce348351692777182d61735adc5\">areflexia</span> in the upper limbs. It is <span class=\"customMeta\" data-dictid=\"3978e9614f1692777200abbe4cfa34\">triggered</span> by <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> infections like dengue. The normal MRI findings and elevated protein in <span class=\"customMeta\" data-dictid=\"99a9bf133e1692777184ec4b1011fe\">cerebrospinal</span> fluid further support this diagnosis.</li>\n\t<li>Associated with anti-GT1a antibodies</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Miller Fisher syndrome (Option B):</strong> typically presents with a <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> of ophthalmoplegia, ataxia, and areflexia.</p>\n\n<p><strong>Multiple <span class=\"customMeta\" data-dictid=\"dae4dea0581692777198fdef9fa684\">sclerosis</span> (Option C)</strong> usually shows distinct clinical features like visual disturbances and <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> deficits, and MRI would have plaques\u00a0</p>\n\n<p><strong>Botulism (Option D): </strong>the specific findings of elevated protein with normal <span class=\"customMeta\" data-dictid=\"af3ae60c0c16927771889b84ca41c0\">glucose</span> in the CSF suggest PCB over botulism.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/dZrisf5oTfegLGwrMaOG1751624785.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/KwgReFoef2CGxFAbOESA1751625225.mp3"
  },
  {
    "text": "<p>A 75-year-old man presents with progressive memory loss, difficulty in performing daily activities, and mood changes. His family notes that he often repeats the same questions and becomes easily confused. Neurological examination reveals no focal deficits, but cognitive testing indicates significant impairment in memory and language skills. What is the possible neurotransmitter status for this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Increased Acetylcholine, decreased Norepinephrine, decreased Serotonin"
      },
      {
        "id": 2,
        "text": "Decreased Acetylcholine, decreased Norepinephrine, decreased Serotonin"
      },
      {
        "id": 3,
        "text": "Normal Acetylcholine, increased Norepinephrine, normal Serotonin"
      },
      {
        "id": 4,
        "text": "Increased Acetylcholine, increased Norepinephrine, decreased Serotonin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Decreased Acetylcholine, decreased Norepinephrine, decreased Serotonin.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The diagnosis is Alzheimer's disease, characterized by progressive memory loss and cognitive decline.</li>\n\t<li>There is a significant decrease in <span class=\"customMeta\" data-dictid=\"a79a62c36e169277718062f9630d56\">acetylcholine</span> levels (hence, <span class=\"customMeta\" data-dictid=\"db78c4439e16927771805a2496ec6b\">AchE</span> <span class=\"customMeta\" data-dictid=\"b5fb56a28b1692777190396ae8b625\">inhibitor</span> drugs are preferred for the treatment to increase <span class=\"customMeta\" data-dictid=\"fba05f424716927771802b63f6c392\">Ach</span> levels), which is critical for memory and learning. Additionally, <span class=\"customMeta\" data-dictid=\"155371e9941692777193b48666ce0a\">norepinephrine</span> and <span class=\"customMeta\" data-dictid=\"06eba971ce169277719884f8c62937\">serotonin</span> levels are often decreased.</li>\n</ul>\n\n<p><br />\n\u00a0</p>\n\n<p><strong>Neurotransmitters involved in Alzheimer\u2019s</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:535px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p style=\"text-align: center;\"><strong>Neurotransmitter</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p style=\"text-align: center;\"><strong>Location of Synthesis</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Decreased ACh</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Nucleus <span class=\"customMeta\" data-dictid=\"849623f7a71692777182fb29760194\">basalis</span> of Meynert (forebrain)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Decreased Norepinephrine</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Locus <span class=\"customMeta\" data-dictid=\"7ab09b1b141692777184616deb49e2\">coeruleus</span> (pons)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Decreased Serotonin</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Dorsal <span class=\"customMeta\" data-dictid=\"127f1d277616927771975f15621776\">raphe</span> (brainstem)</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/Ee1FZPaX8Mj5JYyOovCu1751625317.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/D3SK1NXQEU6DB3itIcVH1751625378.mp3"
  },
  {
    "text": "<p>A 30-year-old man with Down syndrome is being monitored for cognitive decline due to his increased risk for Alzheimer's disease. Why is this patient at a higher risk for developing Alzheimer's disease?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Presenilin 1 gene mutation"
      },
      {
        "id": 2,
        "text": "Overexpression of the APP gene"
      },
      {
        "id": 3,
        "text": "Mutation in the ApoE4 gene"
      },
      {
        "id": 4,
        "text": "Release of pro-inflammatory cytokines and promoting insulin resistance"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Overexpression of the <span class=\"customMeta\" data-dictid=\"351e627bcf1692777181d406512336\">APP</span> gene </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Individuals with <span class=\"customMeta\" data-dictid=\"e8be57a3f316927771864f46a8ea54\">Down syndrome</span> have <span class=\"customMeta\" data-dictid=\"5e54fdc4d3169277720003f231621d\">trisomy</span> 21, meaning they have an extra copy of <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 21.</li>\n\t<li>With the extra copy of <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 21, individuals with <span class=\"customMeta\" data-dictid=\"e8be57a3f316927771864f46a8ea54\">Down syndrome</span> have overexpression of the (Amyloid <span class=\"customMeta\" data-dictid=\"ae13cdc5c3169277719683e9f6bda5\">Precursor</span> Protein) <span class=\"customMeta\" data-dictid=\"351e627bcf1692777181d406512336\">APP</span> gene, leading to increased production of amyloid-beta (A-beta).</li>\n\t<li>This <span class=\"customMeta\" data-dictid=\"7a1ae24f701692777187a7f60bbd9f\">excess</span> amyloid-beta tends to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> <span class=\"customMeta\" data-dictid=\"51ad856e041692777181f80c9d507a\">amyloid</span> plaques in the brain, a hallmark of Alzheimer's disease.</li>\n</ul>\n\n<p><strong>Causes of Alzheimer's Disease (AD)</strong></p>\n\n<ul>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"8dcd91eadf1692777193a72a442f37\">multifactorial</span> condition associated with many risk factors</li>\n\t<li>The most significant factor is age (>65 years of age)</li>\n\t<li>Cardiovascular diseases: strokes or <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> dementia</li>\n\t<li>Obesity: Release of pro-inflammatory cytokines and promoting <span class=\"customMeta\" data-dictid=\"b47c9c6144169277719010eaa1a0ee\">insulin</span> resistance <strong> (Option D ruled out)</strong></li>\n\t<li>Diabetes: <span class=\"customMeta\" data-dictid=\"3e4ab602061692777193ec4b31dde7\">Neuroinflammation</span> and accumulation of beta-amyloid (A-beta)</li>\n\t<li>Other:\n\t<ul>\n\t\t<li>Traumatic head injury, depression, higher parental age at birth, smoking, family history of dementia, and increased <span class=\"customMeta\" data-dictid=\"00472d632e1692777189a71b99d4a9\">homocysteine</span> levels</li>\n\t</ul>\n\t</li>\n\t<li><strong>Genetic causes:</strong></li>\n</ul>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:590px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Chromosome 1</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Presenilin 2 gene defective</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Chromosome 14</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Presenilin 1 gene defective<strong> (Option A ruled out)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Chromosome 19</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>ApoE gene</p>\n\n\t\t\t<p>ApoE4 allele: Higher risk of developing <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">sporadic</span> Alzheimer's disease <strong> (Option C ruled out)</strong></p>\n\n\t\t\t<p>ApoE2 allele: Low risk</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Chromosome 21</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>The <span class=\"customMeta\" data-dictid=\"51ad856e041692777181f80c9d507a\">amyloid</span> <span class=\"customMeta\" data-dictid=\"ae13cdc5c3169277719683e9f6bda5\">precursor</span> protein (APP) gene</p>\n\n\t\t\t<p>Alzheimer's Disease in <span class=\"customMeta\" data-dictid=\"e8be57a3f316927771864f46a8ea54\">Down syndrome</span> (extra copy of <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 21 leads to overexpression of the <span class=\"customMeta\" data-dictid=\"351e627bcf1692777181d406512336\">APP</span> gene) <strong>(Option B)</strong></p>\n\n\t\t\t<p>Early-age-of-onset <span class=\"customMeta\" data-dictid=\"5dda3cc2ab1692777202b3b3c65bea\">familial</span> AD</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/DdckWXOYYcGlUnO0ZU9c1751626314.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/oWpIfAqOa4J8Z7AU1gLo1751626753.mp3"
  },
  {
    "text": "<p>Which of the following neurodegenerative disorders is not classified as a tauopathy?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Alzheimer\u2019s disease"
      },
      {
        "id": 2,
        "text": "Punch-drunk syndrome"
      },
      {
        "id": 3,
        "text": "Parkinson\u2019s disease"
      },
      {
        "id": 4,
        "text": "Pick's disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Parkinson\u2019s disease</strong></p>\n\n<p><strong>Explanation\u00a0</strong></p>\n\n<p>Parkinson\u2019s disease is not classified as a tauopathy. It is primarily associated with Lewy bodies, composed mainly of misfolded alpha-synuclein, not tau.</p>\n\n<p><strong>Mnemonic for <span class=\"customMeta\" data-dictid=\"0507e631fc16927772001491484328\">Tauopathy</span> </strong>(\u00a0abnormal hyperphosphorylation of <span class=\"customMeta\" data-dictid=\"349c5a4f5d169277720062d348498a\">tau</span> protein accumulation ) : <strong>Pick- CAP-Down\u00a0</strong></p>\n\n<table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" style=\"width:100%\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t<p><strong>P</strong>ick disease</p>\n\n\t\t\t<p><strong>C</strong>hronic <span class=\"customMeta\" data-dictid=\"18034e0517169277720002aaa66d36\">traumatic</span> <span class=\"customMeta\" data-dictid=\"b37b211cbc169277718725f07b5473\">encephalopathy</span> / Punch drunk and <strong>C</strong>orticobasal syndrome</p>\n\n\t\t\t<p><strong>A</strong>lzeihmer's disease</p>\n\n\t\t\t<p><strong>P</strong>rogressive <span class=\"customMeta\" data-dictid=\"5ef5f7d035169277719997649dc97a\">supranuclear</span> gaze palsy</p>\n\n\t\t\t<p><strong>D</strong>own syndrome</p>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/w1IaiSWD093yEHy0J3pA1751626858.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/L0090MFTdkdrtFO2IT4I1751627246.mp3"
  },
  {
    "text": "<p>A 60-year-old woman has been diagnosed with early-stage Alzheimer's disease. Her husband reports that she frequently struggles to remember recent events and has begun to repeat herself in conversations. Additionally, she has difficulty managing her finances and has gotten lost while driving to familiar places. Despite these issues, she insists that she is \u201cjust fine\u201d and is not concerned about her memory. Which term best describes the unawareness of her cognitive decline?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Subjective cognitive decline"
      },
      {
        "id": 2,
        "text": "Anosognosia"
      },
      {
        "id": 3,
        "text": "Apraxia"
      },
      {
        "id": 4,
        "text": "Confabulation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Anosognosia </strong></p>\n\n<p><strong>Explanation: </strong>Anosognosia is a condition in which a person is unaware of their own illness or cognitive decline. This lack of awareness can lead to a denial of any problems and is commonly observed in Alzheimer's disease.</p>\n\n<p><strong>Subjective cognitive decline:\u00a0</strong>This refers to <em>self-reported</em> memory loss without objective cognitive <span class=\"customMeta\" data-dictid=\"4885d5d0021692777189aac6dc80f7\">impairment</span> \u2014 the opposite of this case (here, the patient denies the problem).</p>\n\n<p><strong>Apraxia: </strong>Inability to perform learned motor tasks (e.g., dressing, brushing hair), despite intact strength.\u00a0\u00a0</p>\n\n<p><strong>Confabulation:</strong>\u00a0Confabulation refers to the unintentional <span class=\"customMeta\" data-dictid=\"239e215b2916927772021b4483d346\">fabrication</span> or <span class=\"customMeta\" data-dictid=\"eaec97de1d1692777186b2ce902b4d\">distortion</span> of memories without the intention to deceive. Patients truly believe the false memories they are sharing. it is seen in Korsakoff psychosis.\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/eJaeLZ0oL8Kl8Htyf7pn1751627433.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/SzcteGL6w9LeFZq4N1bT1751627727.mp3"
  },
  {
    "text": "<p>A 74-year-old woman is brought to a memory clinic by her daughter, who reports increasing forgetfulness over the past year. The daughter notes that her mother often misplaces items, struggles to find the right words during conversations, and repeats questions she has just asked. Recently, she became lost while driving to her regular grocery store, which she has frequented for years. On examination, she has difficulty following a conversation, and signs of apraxia are present. There are no significant findings on routine laboratory tests, and an FDG-PET is ordered. Which finding in FDG-PET is most consistent with the diagnosis of this patient\u2019s condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hypometabolism in the posterior temporal-parietal cortex"
      },
      {
        "id": 2,
        "text": "Cerebral atrophy"
      },
      {
        "id": 3,
        "text": "Widened third ventricle"
      },
      {
        "id": 4,
        "text": "Detection of amyloid depositions"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"9849077c1616927771895faff93dc5\">Hypometabolism</span> in the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> temporal-parietal cortex</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Clinical manifestations strongly correlate with a diagnosis of Alzheimer\u2019s disease. FDG-PET scans commonly reveal <span class=\"customMeta\" data-dictid=\"9849077c1616927771895faff93dc5\">hypometabolism</span> in the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> temporal-parietal cortex. This pattern correlates with the cognitive deficits associated with Alzheimer\u2019s disease, including memory loss and difficulties with language and <span class=\"customMeta\" data-dictid=\"deb8ae881316927772022814765ee7\">visuospatial</span> skills.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Investigating Alzheimer\u2019s Disease</strong></p>\n\n<p><strong>Cognitive Assessment:</strong></p>\n\n<ul>\n\t<li>Bedside <span class=\"customMeta\" data-dictid=\"4db35273091692777192b31d3a51e7\">Mini-Mental State Examination</span> (MMSE) or Montreal Cognitive Assessment (MoCA)</li>\n</ul>\n\n<p><strong>Laboratory Tests:</strong></p>\n\n<ul>\n\t<li>Routine tests (CBC, CMP, TSH, Vitamin B12) to rule out other causes of cognitive impairment. No specific abnormalities for AD.</li>\n</ul>\n\n<p><strong>Histopathology:</strong></p>\n\n<ul>\n\t<li><strong>Neurofibrillary tangles:</strong></li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"Neurofibillary tangles\" data-author=\"Mikael H\u00e4ggstr\u00f6m, M.D.\" data-hash=\"9377\" data-license=\"CC0\" data-source=\"https://commons.wikimedia.org/wiki/File:Histopathology_of_neurofibrillary_tangles_in_Alzheimer%27s_disease_-_annotated.jpg\" data-tags=\"\" height=\"275\" src=\"https://image.prepladder.com/notes/qyXhAPnWbRmGbeuplgPm1744371697.png\" width=\"226\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<ul>\n\t<li><strong>Hirano bodies:</strong></li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"Hirano bodies\" data-author=\"Patho\" data-hash=\"9386\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Hirano_bodies_in_the_Hippocampus_in_an_old_person_with_Alzheimer-related_pathology,_HE_2.JPG\" data-tags=\"\" height=\"234\" src=\"https://image.prepladder.com/notes/sL2hm9UMxLhkFKjdJDJZ1744372796.png\" width=\"349\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p><strong>Imaging:</strong></p>\n\n<ul>\n\t<li>The main purpose of <span class=\"customMeta\" data-dictid=\"fe3220767716927771892419444041\">imaging</span> is to exclude other disorders, such as primary and secondary neoplasms, <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> dementia, normal-pressure hydrocephalus, and other degenerative disorders, such as <span class=\"customMeta\" data-dictid=\"d57a339d6116927772031e53a22701\">frontotemporal</span> <span class=\"customMeta\" data-dictid=\"41cc5ad93c169277718553c6b948a3\">dementia</span> (FTD or the <span class=\"customMeta\" data-dictid=\"20553f38d21692777196e9fc4ea9cf\">prion</span> disorder <span class=\"customMeta\" data-dictid=\"2fa320ed45169277718594fea874a8\">Creutzfeldt-Jakob disease</span> (CJD)</li>\n\t<li><strong>CT:</strong> Cerebral atrophy, widened third <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> <strong>(Options B & C ruled out)</strong></li>\n\t<li><strong>MRI:</strong> <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">Atrophy</span> in <span class=\"customMeta\" data-dictid=\"433fcc5f441692777187d3963abc73\">entorhinal</span> cortex, <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> <span class=\"customMeta\" data-dictid=\"637ea4d17516927772003be2b2aae4\">temporal</span> cortex, and hippocampi</li>\n\t<li><strong>Amyloid PET</strong> detects <span class=\"customMeta\" data-dictid=\"51ad856e041692777181f80c9d507a\">amyloid</span> depositions <strong>(Option D ruled out)</strong></li>\n\t<li><strong>Fluorodeoxyglucose-PET (FDG-PET)</strong> reveals <span class=\"customMeta\" data-dictid=\"9849077c1616927771895faff93dc5\">hypometabolism</span> in the <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> temporal-parietal <span class=\"customMeta\" data-dictid=\"cab8787ce916927771852a7e72f34d\">cortex</span> <strong>(Option A)</strong></li>\n\t<li>Functional brain <span class=\"customMeta\" data-dictid=\"fe3220767716927771892419444041\">imaging</span> techniques such as <span class=\"customMeta\" data-dictid=\"10296f9e2d16927771969f41fe8a6c\">Positron</span> Emission <span class=\"customMeta\" data-dictid=\"8d4f2a375b1692777200f41db641bc\">Tomography</span> (PET), functional <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> (fMRI), and Single-Photon Emission <span class=\"customMeta\" data-dictid=\"44b07c254816927771855a12777513\">Computed Tomography</span> (SPECT) help in <span class=\"customMeta\" data-dictid=\"efa5d21d3d16927771918a62baf918\">mapping</span> patterns of <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> in smaller brain areas of the <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> <span class=\"customMeta\" data-dictid=\"637ea4d17516927772003be2b2aae4\">temporal</span> and <span class=\"customMeta\" data-dictid=\"51df38de3d1692777194ced4c4bab5\">parietal</span> lobes</li>\n</ul>\n\n<p><strong>EEG:</strong></p>\n\n<ul>\n\t<li>Typically normal in AD patients</li>\n</ul>\n\n<p><strong>CSF Biomarkers:</strong></p>\n\n<ul>\n\t<li>Decreased <span class=\"customMeta\" data-dictid=\"123c47549916927771854892334fb9\">CSF</span> A\u03b242</li>\n\t<li>Increased p-tau and t-tau (phosphorylated and total tau) levels</li>\n</ul>\n\n<p><strong>Genetics:</strong></p>\n\n<ul>\n\t<li>Not routinely recommended unless for rare early-onset AD cases</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Note: Slowly progressive decline in memory and orientation, normal results on laboratory tests, and an <span class=\"customMeta\" data-dictid=\"7ce7bcb2f316927771938e0bea7f4d\">MRI</span> or <span class=\"customMeta\" data-dictid=\"871577be5e169277718596f7614659\">CT scan</span> showing only distributed or posteriorly predominant <span class=\"customMeta\" data-dictid=\"721937292f1692777185048f04ce29\">cortical</span> and hippocampal <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> are highly suggestive of AD.\u00a0</strong></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/qyXhAPnWbRmGbeuplgPm1744371697.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/hLPkZO4qqr85U7Di8d7o1751627886.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/E8hJ9t7H13BINyYUkIhO1751627960.mp3"
  },
  {
    "text": "<p>A 75-year-old woman with moderate Alzheimer's disease has been on Donepezil for the past year. On routine follow-up, her cognitive abilities are declining further, and the physician decides to add another medication. Which treatment would be most appropriate to consider at this stage?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Rivastigmine"
      },
      {
        "id": 2,
        "text": "Memantine"
      },
      {
        "id": 3,
        "text": "Lecanemab"
      },
      {
        "id": 4,
        "text": "Galantamine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Memantine</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>A common approach to Alzheimer's disease drug therapy is to initiate a <strong>cholinesterase <span class=\"customMeta\" data-dictid=\"b5fb56a28b1692777190396ae8b625\">inhibitor</span> </strong>for a patient diagnosed with mild AD <span class=\"customMeta\" data-dictid=\"41cc5ad93c169277718553c6b948a3\">dementia</span> and to add <strong>memantine</strong> when patients enter the moderate stage of the disease.\u00a0Memantine blocks excessive <span class=\"customMeta\" data-dictid=\"ada5fcf7e416927771886ff24152ff\">glutamate</span> activity at NMDA receptors in the CNS and reduces <span class=\"customMeta\" data-dictid=\"2e3f76360d16927771877148466104\">excitotoxic</span> neuronal injury.\u00a0</p>\n\n<p><strong>Rivastigmine is <span class=\"customMeta\" data-dictid=\"63b92227451692777180db3901b72f\">acetylcholinesterase</span> inhibitors and similar to Donepezil so not added together routinely. </strong>Same for galantamine is <span class=\"customMeta\" data-dictid=\"a4488d66fc16927771975d043c4ccc\">reversible</span> AChE <span class=\"customMeta\" data-dictid=\"b5fb56a28b1692777190396ae8b625\">inhibitor</span> + allosteric <span class=\"customMeta\" data-dictid=\"a4dd3586e816927771927d01e3fe29\">modulator</span> of nAChRs</p>\n\n<p><strong>Therapies <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> amyloid-\ud835\udec3</strong></p>\n\n<p>1. Aducanumab is withdrawn\u00a0</p>\n\n<p>2. Lecanemab is humanized <span class=\"customMeta\" data-dictid=\"b2b82438d6169277719287eb450079\">monoclonal</span> <span class=\"customMeta\" data-dictid=\"9d7a12cab116927771811a0079086d\">antibody</span> <span class=\"customMeta\" data-dictid=\"e4865847fa169277720044d7b530b0\">targeting</span> <span class=\"customMeta\" data-dictid=\"845fedd06d16927771989597afa034\">soluble</span> amyloid-beta <span class=\"customMeta\" data-dictid=\"57b76256ff1692777196c86a1384d9\">protofibril</span> that reduces <span class=\"customMeta\" data-dictid=\"51ad856e041692777181f80c9d507a\">amyloid</span> <span class=\"customMeta\" data-dictid=\"af71c1668e169277719542cf8f1364\">plaque</span> accumulation in the brain\u2014believed to slow disease progression.\u00a0 It is approved for mild cognitive <span class=\"customMeta\" data-dictid=\"4885d5d0021692777189aac6dc80f7\">impairment</span> (MCI) and early Alzheimer's\u00a0and m ust confirm <span class=\"customMeta\" data-dictid=\"51ad856e041692777181f80c9d507a\">amyloid</span> <span class=\"customMeta\" data-dictid=\"54e0888a6616927771945a99208287\">pathology</span> via PET scan or CSF biomarkers before startin. It is given as <span class=\"customMeta\" data-dictid=\"27b78a96071692777190f4dfb93430\">intravenous</span> infusion, every 2 weeks\u00a0 and side effects of <span class=\"customMeta\" data-dictid=\"c8013ecf46169277720128cab0a7b4\">vasogenic</span> cerebral oedema, <span class=\"customMeta\" data-dictid=\"721937292f1692777185048f04ce29\">cortical</span> microhemorrhages, and <span class=\"customMeta\" data-dictid=\"ebb480187d1692777199e233e9e356\">superficial</span> siderosis.\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/2bepf1GEZU4LhRXHRdMu1751630288.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/HKpAXxgwVUU0IMyIGKMv1751630568.mp3"
  },
  {
    "text": "<p>Which of the following is NOT part of the clinical triad of Normal Pressure Hydrocephalus (NPH)?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Ataxia"
      },
      {
        "id": 2,
        "text": "Urinary incontinence"
      },
      {
        "id": 3,
        "text": "Dementia"
      },
      {
        "id": 4,
        "text": "Visual disturbances"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Visual disturbances </strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Visual <span class=\"customMeta\" data-dictid=\"4586eccbe71692777186e577e31829\">disturbance</span> is not part of the clinical triad. They are not typically associated with NPH.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Normal Pressure Hydrocephalus</strong></p>\n\n<p><strong>The clinical <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> includes:</strong></p>\n\n<ul>\n\t<li>Abnormal <span class=\"customMeta\" data-dictid=\"053afdc7031692777187c2079a86a3\">gait</span> (ataxic or apractic) <strong>(Option A ruled out)</strong></li>\n\t<li>Dementia (usually mild to moderate) <strong>(Option C ruled out)</strong></li>\n\t<li>Urinary <span class=\"customMeta\" data-dictid=\"026c92ea6316927772013c7cfd287b\">urgency</span> or <span class=\"customMeta\" data-dictid=\"76979fe6ab16927771902f20401597\">incontinence</span> <strong>(Option B ruled out)</strong></li>\n\t<li>Shuffling <span class=\"customMeta\" data-dictid=\"053afdc7031692777187c2079a86a3\">gait</span> with preserved arm swing</li>\n</ul>\n\n<p><strong>Neuroimaging</strong>:</p>\n\n<ul>\n\t<li><strong>Enlarged <span class=\"customMeta\" data-dictid=\"fc380e21321692777191739bd99191\">lateral</span> ventricles</strong> (hydrocephalus) with little or no <span class=\"customMeta\" data-dictid=\"721937292f1692777185048f04ce29\">cortical</span> atrophy</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"Normal Pressure Hydrocephalus\" data-author=\"Nevit Dilmen\" data-hash=\"9390\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:NPH_MRI_088.png\" data-tags=\"\" height=\"233\" src=\"https://image.prepladder.com/notes/uwvMcv8b4oUMHYMl01cz1744373232.png\" width=\"205\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p><strong>Radionuclide cisternography:</strong></p>\n\n<ul>\n\t<li>Delay in <span class=\"customMeta\" data-dictid=\"123c47549916927771854892334fb9\">CSF</span> <span class=\"customMeta\" data-dictid=\"5fcb9396d1169277718069dd7fa788\">absorption</span> over the convexity</li>\n</ul>\n\n<p><strong>Lumbar puncture</strong>:</p>\n\n<ul>\n\t<li>The opening pressure is in the high-normal range</li>\n\t<li>CSF protein, glucose, and cell counts are normal</li>\n\t<li>Removal of 30\u201350 mL of <span class=\"customMeta\" data-dictid=\"123c47549916927771854892334fb9\">CSF</span> causes <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> improvement in <span class=\"customMeta\" data-dictid=\"053afdc7031692777187c2079a86a3\">gait</span> or cognition</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/uwvMcv8b4oUMHYMl01cz1744373232.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/Lhg4ORN7kInVbLl8JHCD1751630656.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Yh8d31gg1fn3dyW6oLIE1751630779.mp3"
  }
];
        let quizName = '58 Guillian Barre Syndrome And Alzheimers Disease';
        const quizFilename = '58-guillian-barre-syndrome-and-alzheimers-disease-e7d30a90.html';
        let hierarchy = ["PrepLadder", "qBank", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>