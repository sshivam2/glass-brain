<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Test Iii - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A patient presents to you with clubbing of fingers; hyperhidrosis; and thick, furrowed, and redundant skin on his forehead, cheeks, and chin. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acromegaly"
      },
      {
        "id": 2,
        "text": "Hyperthyroidism"
      },
      {
        "id": 3,
        "text": "Pachydermoperiostosis"
      },
      {
        "id": 4,
        "text": "Syphilitic periostitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pachydermoperiostosis:</strong></p>\n<p>A syndrome that combines hypertrophic osteoarthropathy and acromegalic features.</p>\n<p>Patients with this disorder have cylindrical thickening of the limbs due to periostosis and skin changes.</p>\n<p>The hereditary form of pachydermoperiostosis may be inherited as an autosomal dominant trait with incomplete penetrance and is most severe in males. Its onset usually occurs in the late teens.</p>\n<p>The acquired form is not associated with a family history of the disorder, usually occurs in older men, and is associated with coexisting chronic cardiopulmonary or gastrointestinal neoplasm or infection.</p>\n<ul>\n<li>Skin changes:<br />\n<ul>\n<li>Marked thickening and oiliness of the skin of the hands, forearms, and legs;</li>\n<li>Accentuation of facial folds</li>\n<li>Hyperhidrosis of the hands and feet</li>\n<li>Reduplication and furrowing of skin over the scalp (called\u202fcutis verticis gyrata,\u202for \"bulldog scalp\").</li>\n</ul>\n</li>\n</ul>\n<p>There may also be macroglossia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The arterial blood gas analysis of a patient reveals a pH of 7.55, pCO2- 54 mmHg, and HCO3- 40 mEq/L. What is the underlying disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Mixed acid-base disorder"
      },
      {
        "id": 2,
        "text": "Metabolic alkalosis with compensatory respiratory acidosis"
      },
      {
        "id": 3,
        "text": "Respiratory acidosis with compensatory metabolic alkalosis"
      },
      {
        "id": 4,
        "text": "Respiratory alkalosis with compensatory metabolic acidosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The underlying disorder in this patient is&nbsp;<strong>metabolic alkalosis with compensatory respiratory acidosis.</strong></p>\n<p>Interpretation of the ABG:</p>\n<p>Step 1: A <strong>pH</strong> of <strong>7.55</strong>&nbsp;indicates <strong>alkalosis</strong>.</p>\n<p>Step 2: Plasma <strong>HCO<sub>3</sub><sup>-</sup></strong> is <strong>40</strong> mEq/L, which in the presence of a high pH indicates <strong>metabolic</strong> alkalosis.</p>\n<p>Step 3: pCO2 is 54 mmHg indicating <strong>respiratory acidosis</strong>. The increase in pCO2&nbsp;along with the increase in pH suggests that this is a compensatory response.</p>\n<p>Step 4: Assessing the compensatory response:</p>\n<p>On average, the<strong> pCO<sub>2</sub> rises 0.75 mmHg </strong>for every<strong> 1.0 mEq/L increment </strong>in the plasma<strong>&nbsp;HCO<sub>3</sub><sup>-</sup></strong></p>\n<p>In the above scenario,&nbsp;the plasma HCO<sub>3</sub>- concentration is increased to <strong>40 mEq/L</strong> (The average normal value is considered as <strong>24 mEq/L</strong>)<br /> <br />Thus, the HCO<sub>3</sub><sup>-</sup> elevation is 40 &ndash; 24 = <strong>16 mEq/L</strong><br /><br />Therefore, pCO<sub>2</sub> elevation should be 0.75 &times; 16 =\u202f <strong>12 mmHg</strong></p>\n<p>Now, considering that the average value of normal pCO<sub>2</sub> is 40 mmHg, the estimated pCO<sub>2</sub> measured should be 40 + 12= <strong>52 mmHg</strong>. <br /> <br />As pCO<sub>2</sub> is higher than the expected estimate, it is a case of metabolic alkalosis with compensatory respiratory acidosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Metabolic alkalosis is suspected in a patient presenting with multiple episodes of vomiting. Which of the following laboratory results would be seen in his arterial blood gas analysis?",
    "choices": [
      {
        "id": 1,
        "text": "Option 1"
      },
      {
        "id": 2,
        "text": "Option 3"
      },
      {
        "id": 3,
        "text": "Option 2"
      },
      {
        "id": 4,
        "text": "Option 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the given options,<strong> high pH</strong> (7.55),<strong> high HCO<sub>3</sub><sup>-</sup></strong>&nbsp;(30 mEq/L), and <strong>high pCO<sub>2&nbsp;</sub></strong>(48 mmHg) is suggestive of <strong>metabolic alkalosis</strong> with respiratory acidosis, as a result of compensatory hypoventilation.</p>\n<p>Multiple episodes of vomiting result in loss of acids from the body and thus increases the pH.</p>\n<table style=\"height: 387px; width: 442px;\">\n<tbody>\n<tr style=\"height: 20.0312px;\">\n<td style=\"width: 53.6364px; height: 20.0312px;\">&nbsp;</td>\n<td style=\"width: 70.8381px; height: 20.0312px;\"><strong>pH</strong></td>\n<td style=\"width: 79.0199px; height: 20.0312px;\">\n<p><strong>pCO2</strong></p>\n<p><strong>(mmHg)</strong></p>\n</td>\n<td style=\"width: 78.4375px; height: 20.0312px;\">\n<p><strong>HCO3&macr;</strong></p>\n<p><strong>(mEq/L)</strong></p>\n</td>\n<td style=\"width: 127.273px; height: 20.0312px;\">\n<p><strong>Interpretation</strong></p>\n</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 53.6364px; height: 29px;\">1</td>\n<td style=\"width: 70.8381px; height: 29px;\">\n<p>7.48</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 79.0199px; height: 29px;\">\n<p>32</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 78.4375px; height: 29px;\">\n<p>21</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 127.273px; height: 29px;\">Respiratory alkalosis with compensatory metabolic acidosis</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 53.6364px; height: 29px;\">2</td>\n<td style=\"width: 70.8381px; height: 29px;\">\n<p>7.32</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 79.0199px; height: 29px;\">\n<p>30</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 78.4375px; height: 29px;\">\n<p>22</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 127.273px; height: 29px;\">Metabolic acidosis with compensatory respiratory alkalosis</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 53.6364px; height: 29px;\">3</td>\n<td style=\"width: 70.8381px; height: 29px;\">\n<p>7.28</p>\n<p>(low)</p>\n</td>\n<td style=\"width: 79.0199px; height: 29px;\">\n<p>50</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 78.4375px; height: 29px;\">\n<p>32</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 127.273px; height: 29px;\">Respiratory acidosis with compensatory metabolic alkalosis</td>\n</tr>\n<tr style=\"height: 29px;\">\n<td style=\"width: 53.6364px; height: 29px;\">4</td>\n<td style=\"width: 70.8381px; height: 29px;\">\n<p>7.55</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 79.0199px; height: 29px;\">\n<p>48</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 78.4375px; height: 29px;\">\n<p>30</p>\n<p>(high)</p>\n</td>\n<td style=\"width: 127.273px; height: 29px;\">Metabolic alkalosis with compensatory respiratory acidosis</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a cause of metabolic alkalosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mineralocorticoid deficiency"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Thiazide diuretic therapy"
      },
      {
        "id": 4,
        "text": "Recurrent vomiting"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Mineralocorticoid deficiency does not cause metabolic alkalosis. Its excess causes metabolic alkalosis.</p>\n<p><strong>Causes of metabolic alkalosis: </strong></p>\n<p>Loss of hydrogen:</p>\n<ul>\n<li>Gastrointestinal loss <br />\n<ul>\n<li>Removal of gastric secretions -&nbsp;<strong>vomiting</strong> or nasogastric suction</li>\n<li>Chloride-losing diarrhea</li>\n<li>Gastrocolic fistula</li>\n<li>Villous adenoma</li>\n<li>Antacid therapy, particularly if combined with cation exchange resin</li>\n</ul>\n</li>\n<li>Renal loss <br />\n<ul>\n<li>Loop or<strong> thiazide</strong> diuretics</li>\n<li>Mineralocorticoid excess (primary aldosteronism, Cushing's, steroids, licorice)</li>\n<li>Posthypercapnic states</li>\n<li>Hypercalcemia, including milk-alkali syndrome</li>\n</ul>\n</li>\n<li>H<sup>+</sup> movement into cells\n<ul>\n<li><strong>Hypokalemia</strong></li>\n</ul>\n</li>\n</ul>\n<p>Exogenous Alkali:</p>\n<ul>\n<li>Administration of NaHCO3, sodium citrate/gluconate/acetate/antacids</li>\n<li>Massive blood transfusion</li>\n<li>Antacids- Milk alkali syndrome</li>\n</ul>\n<p>Contraction alkalosis (loss of ECF volume):</p>\n<ul>\n<li>Loop or thiazide-type diuretics</li>\n<li>Sweat losses in cystic fibrosis</li>\n<li>Gastric losses in achlorhydria</li>\n</ul>\n<p>Miscellaneous:</p>\n<ul>\n<li>Bartter's syndrome</li>\n<li>Gitelman's syndrome</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old woman presents with the lesions shown in the image. She also says that she has difficulty climbing the stairs and raising her arms above her head. The eyelids appear red in color. The probable diagnosis is _____.",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Sarcoidosis"
      },
      {
        "id": 3,
        "text": "Dermatomyositis"
      },
      {
        "id": 4,
        "text": "Osteoarthritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This image shows <strong>Gottron's papules</strong>, indicating a probable diagnosis of <strong>dermatomyositis</strong>, which is pathognomonic for this condition.</p>\n<p>Dermatomyositis is an idiopathic inflammatory myopathy characterized by proximal skeletal muscle weakness, muscle inflammation, and a variety of characteristic skin manifestations.</p>\n<p>The classic cutaneous signs in dermatomyositis:</p>\n<ul>\n<li><strong>Gottron\u2019s papules</strong> - erythematous rash over the extensor surfaces of joints such as the knuckles, elbows, knees, and ankles</li>\n<li><strong>Heliotrope rash</strong> - erythematous discolouration of eyelids with periorbital edema</li>\n<li><strong>Shawl sign,</strong> which is macular erythema of the upper chest and back</li>\n<li><strong>V sign</strong>- rash on the sun-exposed anterior neck and chest</li>\n<li>Nail bed telangiectasia</li>\n<li>Scalp erythema and hair loss</li>\n<li>Flagellate erythema</li>\n<li>Mechanic\u2019s hands- non\u2010inflammatory hyperkeratosis occurring on the hands or feet, usually over the radial surfaces of the fingers and the outer border of the feet</li>\n<li>Deposition of calcium in the tissues</li>\n</ul>\n<p>\u00a0The image below shows heliotrope rash.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/76cb972c55b140b19790d9c4c9f7174f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1571819fb26343389d5ac9138085705ex720x1009.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d6659c5bedf42c4b48ae18a795e7c95x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1345000955de47238fa0202729da50a2x480x366.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/421e696b974947958be048e82b84b477x592x768.JPEG"
    ]
  },
  {
    "text": "During a routine health checkup, the following lab reports were obtained for a young male patient. What will be your next step in the evaluation?",
    "choices": [
      {
        "id": 1,
        "text": "Perform bone marrow aspiration"
      },
      {
        "id": 2,
        "text": "Measure RBC mass"
      },
      {
        "id": 3,
        "text": "Measure arterial oxygen saturation"
      },
      {
        "id": 4,
        "text": "Look for JAK2 mutation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient has increased Hb and normal WBCs and platelets. The next step is to<strong> measure&nbsp;RBC mass</strong>&nbsp;to evaluate for&nbsp;polycythemia.</p>\n<p>A person has to be evaluated for <strong>polycythemia</strong> if there is:</p>\n<ul>\n<li><strong>Increased hemoglobin:</strong>&nbsp;&gt;16.5 g/dL in men or &gt;16.0 g/dL in women, (or)</li>\n<li><strong>Increased hematocrit:</strong>&nbsp;&gt;49 percent in men or &gt;48 percent in women</li>\n</ul>\n<p>This condition is due to either a true increase in the number of RBCs (<strong>absolute polycythemia)</strong> or an apparent increase due to a decrease in the plasma volume (<strong>relative polycythemia</strong>). Both of these conditions can be differentiated by measuring RBC mass (amount of total blood volume that is occupied by RBCs).</p>\n<p>In patients with absolute polycythemia, <strong>erythropoietin </strong>(EPO)&nbsp;levels must be measured.</p>\n<ul>\n<li><strong>Primary</strong> polycythemia - <strong>low or normal</strong> EPO levels</li>\n<li><strong>Secondary</strong> polycythemia - <strong>elevated</strong> EPO levels</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following controls the secretions of GIT?",
    "choices": [
      {
        "id": 1,
        "text": "Myenteric plexuses"
      },
      {
        "id": 2,
        "text": "Auerbach plexuses"
      },
      {
        "id": 3,
        "text": "Meissner plexuses"
      },
      {
        "id": 4,
        "text": "Extrinsic nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Secretions</strong> of GIT are controlled by the&nbsp;<strong>Meissner plexus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c379169dbf184c589732b632246e25f1x1280x1354.JPEG"
    ]
  },
  {
    "text": "Which of the following statements regarding immune thrombocytopenic purpura is false?",
    "choices": [
      {
        "id": 1,
        "text": "Acute ITP occurs following viral infections"
      },
      {
        "id": 2,
        "text": "Lymphocytosis is rare in chronic ITP"
      },
      {
        "id": 3,
        "text": "Chronic ITP is commonly seen in males"
      },
      {
        "id": 4,
        "text": "Spontaneous remission is common in acute ITP"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Chronic ITP is more common in <strong>females.</strong></p>\n<table style=\"height: 347px; width: 353px;\">\n<tbody>\n<tr style=\"height: 40px;\">\n<td style=\"width: 166px; height: 40px;\"><strong>Acute ITP</strong></td>\n<td style=\"width: 175px; height: 40px;\"><strong>Chronic ITP</strong></td>\n</tr>\n<tr style=\"height: 40px;\">\n<td style=\"width: 166px; height: 40px;\">Common in children</td>\n<td style=\"width: 175px; height: 40px;\">Common in adults (females &gt; males)</td>\n</tr>\n<tr style=\"height: 40px;\">\n<td style=\"width: 166px; height: 40px;\">No sex predilection</td>\n<td style=\"width: 175px; height: 40px;\">More common in females</td>\n</tr>\n<tr style=\"height: 58px;\">\n<td style=\"width: 166px; height: 58px;\">Associated with antecedent viral infection</td>\n<td style=\"width: 175px; height: 58px;\">Not associated with antecedent infection</td>\n</tr>\n<tr style=\"height: 66.5625px;\">\n<td style=\"width: 166px; height: 66.5625px;\">Spontaneous remission within 6 months in most cases</td>\n<td style=\"width: 175px; height: 66.5625px;\">Spontaneous remission is not usually seen</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Severe spontaneous bleeding is seen in Hemophilia patients when Factor  VIII levels are _____",
    "choices": [
      {
        "id": 1,
        "text": "<1 IU/dl"
      },
      {
        "id": 2,
        "text": "1-5 IU/dl"
      },
      {
        "id": 3,
        "text": "6-40 IU/dl"
      },
      {
        "id": 4,
        "text": "40-50 IU/dl"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Factor VIII levels&nbsp;&lt;1 IU/dl</strong> is associated with severe spontaneous bleeding.</p>\n<p>Classification of Hemophilia A and B by severity:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Severity</strong></td>\n<td><strong>Clinical Picture</strong></td>\n<td><strong>Factor VIII or IX level (IU/dl)</strong></td>\n</tr>\n<tr>\n<td>\n<p>Mild</p>\n</td>\n<td>Mild bleeding with<br />major trauma or<br />surgery</td>\n<td>6&ndash;40</td>\n</tr>\n<tr>\n<td>Moderate</td>\n<td>Moderate bleeding<br />with minimal trauma<br />or surgery</td>\n<td>1-5&nbsp;</td>\n</tr>\n<tr>\n<td>Severe</td>\n<td>Severe, spontaneous<br />bleeding</td>\n<td>&lt;1&nbsp;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year-old man is found to have the following findings on a routine CBC. A subsequent peripheral smear is performed as shown below. A bone marrow aspiration study is planned for this patient. All of the following are likely to be seen on bone marrow except:",
    "choices": [
      {
        "id": 1,
        "text": "Hypercellular bone marrow"
      },
      {
        "id": 2,
        "text": "Myeloid: Erythroid ratio of 15:1"
      },
      {
        "id": 3,
        "text": "Marrow blasts >20 %"
      },
      {
        "id": 4,
        "text": "Sea-blue histiocytes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The image shows a<strong> left-shift</strong> with a predominance of segmented neutrophils, myelocytes, metamyelocytes that is suggestive of <strong>chronic myeloid</strong> <strong>leukemia</strong> (CML). <strong>Marrow blasts </strong>are usually <strong>&lt; 5%</strong> in the majority of CML patients.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/953efa8ae72047358cfdecce702a4cc6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/af8aa583bc3c45d494bb2e06e5d68374x1280x1117.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/724372ce4d5d41cab064bd8a0bf9cd75x436x356.JPEG"
    ]
  },
  {
    "text": "A 55-year-old smoker presents with high-grade fever, shortness of breath, diarrhea, and confusion. Gram-staining of the sputum revealed neutrophilia with no organisms. Chest x-ray showed bilateral multilobar infiltrates. Lab values are given below. Which pathogenic agent is suspected?",
    "choices": [
      {
        "id": 1,
        "text": "Legionella"
      },
      {
        "id": 2,
        "text": "Pneumocystis jirovecii"
      },
      {
        "id": 3,
        "text": "Klebsiella pneumoniae"
      },
      {
        "id": 4,
        "text": "Streptococcus pneumoniae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is highly suggestive of atypical pneumonia caused by&nbsp;<strong><em>legionella</em>.</strong>&nbsp;</p>\n<p>Clinical features of Legionnaire's disease:</p>\n<ul>\n<li>High-grade-fever( &gt;104 F)</li>\n<li>Cough with scanty sputum</li>\n<li>Extrapulmonary manifestations involve\n<ul>\n<li>gastrointestinal- <strong>diarrhea</strong>, abdominal pain, nausea, vomiting</li>\n<li>neurological- most common-<strong>confusion</strong>, headache, encephalopathy</li>\n</ul>\n</li>\n<li>Relative bradycardia</li>\n<li>Occurrence of illness in an environment in which water supply is at risk of contamination</li>\n<li>Failure to respond&nbsp;to beta-lactams and aminoglycoside antibiotics</li>\n</ul>\n<p>Investigations:</p>\n<ul>\n<li>On gram-staining of the sputum, numerous neutrophils with no organisms</li>\n<li>Hyponatremia</li>\n<li>Elevated liver enzymes</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common type of interstitial lung disease (ILD)  is_____",
    "choices": [
      {
        "id": 1,
        "text": "Desquamative  interstitial pneumonia"
      },
      {
        "id": 2,
        "text": "Idiopathic interstitial pneumonia"
      },
      {
        "id": 3,
        "text": "Acute  interstitial pneumonia"
      },
      {
        "id": 4,
        "text": "Non specific interstitial pneumonia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Idiopathic interstitial pneumonia</strong> (IIP) is the most common type of ILD.</p>\n<p>The most common subtype of IIP is idiopathic pulmonary fibrosis also known as usual interstitial pneumonia.&nbsp;</p>\n<p>Usual interstitial pneumonia (UIP) is the typical pathological finding in patients with suspected idiopathic pulmonary fibrosis (IPF).</p>\n<p>Patients with UIP typically present in their sixth and seventh decades.</p>\n<p>Men are affected more commonly than women.</p>\n<p>High-resolution computed tomography (HRCT) demonstrates a characteristic pattern of peripheral (subpleural), bibasilar reticular opacities associated with architectural distortion, including honeycomb changes and traction bronchiectasis.</p>\n<p>Classification of ILD: (based on histopathological pattern on lung biopsy)</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td width=\"234\">\n<p><strong>Histologic pattern</strong></p>\n</td>\n<td width=\"234\">\n<p><strong>Clinical syndrome</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Usual interstitial pneumonia</p>\n</td>\n<td width=\"234\">\n<p>Idiopathic pulmonary fibrosis</p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Desquamative Interstitial Pneumonia</p>\n</td>\n<td width=\"234\">\n<p>Desquamative interstitial pneumonia</p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Acute interstitial pneumonia</p>\n</td>\n<td width=\"234\">\n<p>Hamman&ndash;Rich syndrome</p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Bronchiolitis obliterans organizing pneumonia (BOOP)</p>\n</td>\n<td width=\"234\">\n<p>Cryptogenic organizing pneumonia</p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Non-specific interstitial pneumonia</p>\n</td>\n<td width=\"234\">\n<p>Non-specific interstitial pneumonia</p>\n</td>\n</tr>\n<tr>\n<td width=\"234\">\n<p>Respiratory bronchiolitis associated lung disease</p>\n</td>\n<td width=\"234\">\n<p>Respiratory bronchiolitis associated interstitial lung disease</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman is admitted to the hospital with a fever and cough. She has a history of repeated chest infections for several years and coughs up yellow-green purulent sputum with some streaky hemoptysis. What could be the underlying condition based on the CT given below?",
    "choices": [
      {
        "id": 1,
        "text": "Cystic fibrosis"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Amyloidosis"
      },
      {
        "id": 4,
        "text": "Lung abscess"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the CT showing <strong>signet ring sign</strong> is suggestive of <strong>bronchiectasis</strong>&nbsp;which can be due to <strong>cystic fibrosis</strong>.</p>\n<p>A history of <strong>repeated chest infections</strong> is an indication of cystic fibrosis and a major risk factor for the development of bronchiectasis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/723f274c00c14489a232f1638772d821.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presents to the emergency with chest pain that is radiating to his shoulder, shortness of breath, and diaphoresis. He is a known case of chronic kidney disease. Which of the following investigations is best for diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Serial troponin levels over 6 hours"
      },
      {
        "id": 2,
        "text": "Troponin levels on admission and 1 hour later"
      },
      {
        "id": 3,
        "text": "Troponin and CK-MB levels at admission"
      },
      {
        "id": 4,
        "text": "Serial CK-MB levels over 6 hours"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario is suggestive of acute myocardial infarction (<strong>MI</strong>) in a patient with chronic kidney disease (<strong>CKD</strong>). A<strong> serial</strong>&nbsp;rise in cardiac <strong>troponin</strong> levels over <strong>3-6 hours</strong> following presentation is needed to make a diagnosis. An interval of 1-hour is not considered sufficient.&nbsp;</p>\n<p>Minor <strong>chronic elevations</strong> in serum <strong>troponins</strong> are commonly observed in patients with CKD even in the <strong>absence</strong> of <strong>cardiovascular</strong> disease. Hence, a single elevated troponin value in such patients cannot be used to diagnose MI.&nbsp;</p>\n<p><strong>CK-MB</strong>&nbsp;is far<strong> less sensitive</strong> and <strong>specific</strong> than troponins.&nbsp;Hence, it is not preferred.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding trigeminal neuralgia?",
    "choices": [
      {
        "id": 1,
        "text": "The region of ophthalmic division of trigeminal nerve is always spared"
      },
      {
        "id": 2,
        "text": "The pain usually last for a few hours"
      },
      {
        "id": 3,
        "text": "The condition is also known as tic douloureux"
      },
      {
        "id": 4,
        "text": "It is more common in men"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tic douloureux</strong>&nbsp;is another term for <strong>trigeminal neuralgia</strong>.</p>\n<p>Trigeminal neuralgia is characterized by frequent&nbsp;<strong>paroxysms of severe pain</strong> in the lips, gums, cheek, or chin. It is <strong>sometimes seen</strong> in the distribution of the <strong>ophthalmic division</strong> of the trigeminal nerve.</p>\n<p><strong>Middle-aged</strong> and <strong>elderly females</strong> are&nbsp;primarily affected.<strong>&nbsp;</strong>The pain usually lasts for a <strong>short time</strong> (seconds to minutes) but be may intense enough that the patient winces, hence the term 'tic'.</p>\n<p>A characteristic feature is the presence of<strong> trigger zones</strong>, typically on the face, lips, or tongue. Patients usually report excruciating pain during activities such as washing the face or brushing the teeth. However, no signs of sensory loss can be demonstrated.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 66-year-old man presents with complaints of resting tremor in his right hand, which improves with movement. He also says that he has difficulty initiating movements and his wife says his movements have been slow. On examination, rigidity is observed to passive arm movement and shuffling gait with a stooped posture is noticed.  Which of the following statements is false regarding the pathology of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Substantia nigra pars reticulata is unaffected by the disease process"
      },
      {
        "id": 2,
        "text": "Decreased striatal dopamine is seen in this condition"
      },
      {
        "id": 3,
        "text": "Degeneration of dopaminergic neurons in the substantia nigra pars compacta"
      },
      {
        "id": 4,
        "text": "Lewy bodies which containing degenerated tau protein are seen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Parkinson's disease </strong>and<strong> Lewy bodies</strong>&nbsp;seen in Parkinson's disease do not contain tau protein. They contain the protein <strong>&alpha;-synuclein.</strong></p>\n<p>Pathologic hallmarks of Parkinson's disease include:</p>\n<ul>\n<li>Degeneration of dopaminergic neurons in the <strong>substantia nigra pars compacta&nbsp;</strong>(SNc)</li>\n<li>Reduced striatal dopamine</li>\n<li>Intracytoplasmic proteinaceous inclusions called <strong>Lewy bodies,</strong> which contain the protein <strong>&alpha;-synuclein</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 68-year-old woman presents to the casualty after she tripped over a stone. She has been having trouble sleeping and abdominal discomfort. Her daughter said that she has become forgetful and her movements are very slow. She is diagnosed with Parkinson's disease. Which of her symptoms will be relieved by treatment with levodopa?",
    "choices": [
      {
        "id": 1,
        "text": "Forgetfulness"
      },
      {
        "id": 2,
        "text": "Trouble sleeping"
      },
      {
        "id": 3,
        "text": "Abdominal discomfort"
      },
      {
        "id": 4,
        "text": "Slow movements"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Levodopa is useful in alleviating the <strong>bradykinesia&nbsp;</strong>(slow movement) seen in Parkinson's disease.</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td colspan=\"2\" width=\"301\">\n<p><strong>Levodopa in Parkinson's disease</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"301\">\n<p>Levodopa benefits</p>\n</td>\n<td width=\"301\">\n<p>Classic motor symptoms of Parkinson's disease:</p>\n<ul>\n<li>Bradykinesia</li>\n<li>Rigidity</li>\n<li>Tremor</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td width=\"301\">\n<p>Levodopa does<strong> not</strong> benefit</p>\n</td>\n<td width=\"301\">\n<p>Non-dopaminergic features:</p>\n<ul>\n<li>Freezing</li>\n<li>Falling</li>\n<li>Sleep disorders</li>\n<li>Dementia</li>\n<li>Autonomic dysfunction (GI disturbances, orthostatic hypotension etc.)</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following features would you not expect to see in a patient with West syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Infantile spasms"
      },
      {
        "id": 2,
        "text": "Abnormal EEG"
      },
      {
        "id": 3,
        "text": "Developmental regression"
      },
      {
        "id": 4,
        "text": "Caf\u00e9 au lait"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Caf&eacute; au lait</strong> is a neurocutaneous marker seen in <strong>neurofibromatosis</strong>, not a component of West syndrome.&nbsp;</p>\n<p>The <strong>triad</strong> of <strong>West syndrome</strong> is:</p>\n<ul>\n<li>Infantile spasms (also called Salaam spells)</li>\n<li>Developmental regression</li>\n<li>Hypsarrhythmia (abnormal EEG)</li>\n</ul>\n<p>West syndrome is treated with:</p>\n<ul>\n<li>ACTH injections</li>\n<li>Vigabatrin if associated with tuberous sclerosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following sensory deficits is severely affected in a patient with Guillain-Barre syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Pain"
      },
      {
        "id": 2,
        "text": "Temperature"
      },
      {
        "id": 3,
        "text": "Proprioception"
      },
      {
        "id": 4,
        "text": "Touch"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Loss</strong> of<strong> proprioception</strong> is <strong>severe</strong> in&nbsp;Guillain-Barre syndrome <strong>(GBS).</strong></p>\n<p>GBS affects the large sensory fibers, leading to attenuation or loss of deep tendon reflexes and loss of proprioception.</p>\n<p>Cutaneous sensory deficits (e.g., loss of pain and temperature sensation) are usually relatively mild.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old male complains of dysphagia and regurgitation of food that has been eaten 3 days back. He has foul breath and a gurgling sound is heard on swallowing. \nThe most likely diagnosis is _____",
    "choices": [
      {
        "id": 1,
        "text": "Scleroderma"
      },
      {
        "id": 2,
        "text": "Achalasia cardia"
      },
      {
        "id": 3,
        "text": "Zenker\u2019s diverticulum"
      },
      {
        "id": 4,
        "text": "Meckel\u2019s diverticulum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The history is suggestive of <strong>Zenker's diverticulum</strong>. If often presents with the following:</p>\n<ul>\n<li>Dysphagia</li>\n<li>Regurgitation</li>\n<li>Halitosis</li>\n<li>Gurgling sound on swallowing</li>\n<li>Aspiration</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Anti centromere antibody is characteristic of _____",
    "choices": [
      {
        "id": 1,
        "text": "Diffuse cutaneous Systemic sclerosis"
      },
      {
        "id": 2,
        "text": "Mixed Connective tissue disorder"
      },
      {
        "id": 3,
        "text": "Limited cutaneous systemic sclerosis"
      },
      {
        "id": 4,
        "text": "Polymyositis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Anti-centromere antibody is the characteristic autoantibody seen in <strong>Limited Cutaneous Systemic sclerosis</strong>.</p>\n<p>Anti-topoisomerase I and anti RNA polymerase III are seen in Diffuse Cutaneous Systemic sclerosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient complains about difficulty doing chores due to morning stiffness of the joints. Investigations show elevated ESR, CRP, and positive Rheumatoid factor. Which of the following is not likely to be seen in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperandrogenism"
      },
      {
        "id": 2,
        "text": "Hip fractures"
      },
      {
        "id": 3,
        "text": "Keratoconjunctivitis sicca"
      },
      {
        "id": 4,
        "text": "Congestive heart failure"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of <strong>rheumatoid arthritis</strong>, which is associated with <strong>hypoandrogenism.&nbsp;</strong></p>\n<p>It is characterized by&nbsp;low levels of serum testosterone, LH, and DHEA.</p>\n<p>The conditions associated with rheumatoid arthritis are:</p>\n<ul>\n<li>Cardiovascular disease, congestive heart failure</li>\n<li>Osteoporosis - hip fractures are more likely to occur</li>\n<li>Ocular - keratoconjunctivitis sicca, episcleritis, scleritis, keratitis</li>\n<li>Secondary Sjogren's syndrome</li>\n<li>Hypoandrogenism in men and postmenopausal women</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A software engineer presented with complaints of dryness and itching of eyes on staring at his laptop screen. On examination, parotid swelling was noted and the test shown below was positive. The serology of this patient is likely to be positive for which of the following antibodies?",
    "choices": [
      {
        "id": 1,
        "text": "Anti topoisomerase"
      },
      {
        "id": 2,
        "text": "Anti centromere"
      },
      {
        "id": 3,
        "text": "Anti U1-RNP"
      },
      {
        "id": 4,
        "text": "Anti Ro/SS-A"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario of dry eyes, parotid swelling, and a positive Schirmer test is suggestive of <strong>Sj&ouml;gren's syndrome. </strong>It is associated with<strong>&nbsp;anti-Ro/SS-A </strong>and<strong> anti-La/SS-B</strong>&nbsp;autoantibodies.</p>\n<p>The presence of anti-Ro/SS-A and anti-La/SS-B indicate extra glandular involvement and <strong>poor prognosis</strong>.</p>\n<p>Note:&nbsp;Anti-Ro and anti-La in <strong>SLE</strong> indicate a <strong>good prognosis</strong>, due to decreased risk of nephritis and vasculitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d54558cf5d494b4f969a54453199ddbc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "All the following are components of the Harmless acute pancreatitis score  except:",
    "choices": [
      {
        "id": 1,
        "text": "Absence of rebound abdominal tenderness"
      },
      {
        "id": 2,
        "text": "Normal serum creatinine"
      },
      {
        "id": 3,
        "text": "Normal haematocrit"
      },
      {
        "id": 4,
        "text": "Normal serum calcium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Serum Calicum is NOT a part of </strong>Harmless acute pancreatitis score(<strong>HAPS</strong>).</p>\n<p>HAPS predicts a non-severe course of pancreatitis with 98% accuracy.</p>\n<p>It has the following components:</p>\n<ul>\n<li>Absence of rebound abdominal tenderness/guarding</li>\n<li>Normal hematocrit value</li>\n<li>Normal serum creatinine level</li>\n</ul>\n<p>Scoring Systems Used for Acute Pancreatitis</p>\n<ul>\n<li>RANSON criteria</li>\n<li>BISAP score (Bedside Index for Severity in Acute Pancreatitis)</li>\n<li>HAPS (Harmless acute pancreatitis score)</li>\n<li>Revised Atlanta classification</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the given image.",
    "choices": [
      {
        "id": 1,
        "text": "Esophageal carcinoma"
      },
      {
        "id": 2,
        "text": "Caustic burn"
      },
      {
        "id": 3,
        "text": "Eosinophilic esophagitis"
      },
      {
        "id": 4,
        "text": "Achalasia cardia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image depicts <strong>eosinophilic esophagitis.</strong></p>\n<p>The characteristic endoscopic esophageal findings are loss of vascular markings (edema), <strong>multiple oesophageal rings</strong>,<strong> longitudinally oriented furrows</strong>, and punctate exudate.</p>\n<p>Etiologies of esophageal eosinophilia include GERD, drug hypersensitivity, connective tissue disorders, and hypereosinophilic syndrome infection.</p>\n<p>Current evidence indicates that EoE is an immunologic disorder induced by antigen sensitization in susceptible individuals. Dietary factors play an important role in both pathogenesis and treatment of EoE. Aeroallergens may also contribute.</p>\n<p>Histologic confirmation: 15 eosinophils per high power field</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e4407f421144413daea8822c3aecf48c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Based on your observation of the foot of the patient shown below, what is the most likely diagnosis and its inheritance pattern?",
    "choices": [
      {
        "id": 1,
        "text": "HNPCC, autosomal recessive"
      },
      {
        "id": 2,
        "text": "Tuberous Sclerosis, autosomal dominant"
      },
      {
        "id": 3,
        "text": "Frederichs ataxia, autosomal recessive"
      },
      {
        "id": 4,
        "text": "Neurofibromatosis, mitochondrial inheritance"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows&nbsp;<strong>periungual fibroma</strong> seen in&nbsp;<strong>tuberous sclerosis</strong>. Periungual fibromas are benign tumors that are composed of connective tissue and typically appear in the second decade of life or later.</p>\n<p><strong>Tuberous sclerosis</strong>&nbsp;is an inherited neurocutaneous disorder. It is inherited in <strong>autosomal dominant</strong> pattern.</p>\n<p>The clinical features include:</p>\n<ul>\n<li><strong>Ash-leaf macules -&nbsp;</strong>hypopigmented macules -</li>\n<li>Facial angiofibroma</li>\n<li><strong>Shagreen patches</strong> mostly over the lower back</li>\n<li>Periungual fibromas</li>\n</ul>\n<p>The image below shows an ash leaf macule.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1d5ebafd013f4b22b24a8b9486cc63bd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e155a774570247e3aa0ac3e30f7084abx720x410.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/092567344d3846b3833dea4b3fe0c32cx720x627.JPEG"
    ]
  },
  {
    "text": "A first-year pathology resident prepares the following smear from a patient's blood sample. Which of the following is it suggestive of?",
    "choices": [
      {
        "id": 1,
        "text": "Thalassemia"
      },
      {
        "id": 2,
        "text": "Autoimmune hemolysis"
      },
      {
        "id": 3,
        "text": "Iron deficiency anaemia"
      },
      {
        "id": 4,
        "text": "Lead poisoning"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"ng-scope\">\n<p>The&nbsp;small, dense RBCs with <strong>absent central pallor</strong> seen in the given peripheral smear&nbsp;are called&nbsp;<strong>spherocytes</strong>.&nbsp;They&nbsp;appear due to decreased membrane surface area and&nbsp;are seen in the following conditions:</p>\n<ul>\n<li><strong>Autoimmune hemolytic anemia</strong></li>\n<li>Hereditary spherocytosis</li>\n<li>Clostridial sepsis</li>\n<li>Snake bites</li>\n</ul>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/04b01563c72e4d0c9b908173126ca460.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old man with a BMI of 41 kg/m2 is being evaluated for bariatric surgery. Which of the following procedures does not reduce the surface area for iron absorption?",
    "choices": [
      {
        "id": 1,
        "text": "Duodenal switch"
      },
      {
        "id": 2,
        "text": "Sleeve gastrectomy"
      },
      {
        "id": 3,
        "text": "Roux-en-Y gastric bypass"
      },
      {
        "id": 4,
        "text": "Biliopancreatic diversion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Iron absorption</strong> takes place in the&nbsp;<strong>duodenum</strong>. In <strong>sleeve gastrectomy</strong>, a portion of the stomach is resected but the <strong>duodenum</strong> remains <strong>intact</strong>. Hence, the surface area of iron absorption is not affected.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74c32a6959fd4c878adb545688406d21x1279x1661.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b763810aa0124fb7b0069e07a9517bbfx1280x1641.JPEG"
    ]
  },
  {
    "text": "Which of the following would not be seen in patients with sideroblastic anemia?",
    "choices": [
      {
        "id": 1,
        "text": "Erythroid hyperplasia"
      },
      {
        "id": 2,
        "text": "Low serum iron"
      },
      {
        "id": 3,
        "text": "High transferrin saturation"
      },
      {
        "id": 4,
        "text": "Dimorphic blood picture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>High serum iron </strong>levels are seen in patients with <strong>sideroblastic anemia</strong>.</p>\n<p>Sideroblastic anemia presents with the following features:</p>\n<ul>\n<li>Serum iron level - high/normal</li>\n<li><strong>Transferrin</strong> <strong>saturation</strong> - <strong>high</strong></li>\n<li>Serum ferritin levels - high</li>\n<li>TIBC - low/normal</li>\n<li>Peripheral smear - <strong>dimorphic population</strong>&nbsp;(both microcytes and macrocytes).</li>\n<li>Bone marrow study - marked <strong>erythroid hyperplasia.</strong></li>\n</ul>\n<p>The iron profile of sideroblastic anemia is opposite to that of iron deficiency anemia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about polycythemia vera is true?",
    "choices": [
      {
        "id": 1,
        "text": "Risk of thrombosis strongly correlates with the degree of thrombocytosis"
      },
      {
        "id": 2,
        "text": "Generalized pruritus is a consequence of mast cell activation by JAK 2 mutation"
      },
      {
        "id": 3,
        "text": "It is protective against H.pylori infection"
      },
      {
        "id": 4,
        "text": "Acute myeloid leukemia is the most common cause of mortality"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Generalized pruritus</strong> seen in polycythemia vera (PV) is a consequence of the <strong>activation of mast cells by JAK 2 mutation</strong>.</p>\n<p>Other options:</p>\n<p>Option A: The risk of <strong>thrombosis</strong> strongly correlates with <strong>erythrocytosis</strong>, <strong>not</strong> the <strong>degree of thrombocytosis</strong>.</p>\n<p>Option C: In polycythemia vera, there is an <strong>increased risk of H.pylori infection</strong>.</p>\n<p>Option D: <strong>Thrombosis</strong> is the <strong>major cause of mortality</strong> in polycythemia vera. The incidence of acute leukemia in patients not exposed to chemotherapy or radiation therapy is low.</p>\n<p>PV is a <strong>clonal hematopoietic stem cell disorder</strong> in which red cells, granulocytes &amp; platelets accumulate in the absence of a physiological stimulus. The most common mutation seen in PV is the <strong>JAK2 mutation</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which lead does the given ECG tracing represent in a normal ECG?",
    "choices": [
      {
        "id": 1,
        "text": "aVL"
      },
      {
        "id": 2,
        "text": "aVR"
      },
      {
        "id": 3,
        "text": "V1"
      },
      {
        "id": 4,
        "text": "V6"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>As all the waves (<strong>P, QRS, T</strong>) are <strong>negative</strong>&nbsp;in the given ECG, it should be lead <strong>aVR</strong>. All the depolarisations waves (P, QRS, T) move away from lead aVR in the normal sinus.</p>\n<p>Depolarisation wave moving towards the positive pole of the lead (or active electrode) produces a positive deflection in the ECG and depolarization moving away from the positive pole of the lead produces a negative deflection in the ECG.</p>\n<p>The lead aVR provides&nbsp;information from the right upper side of the heart.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c1dc4ed5617f4786bbf2b98e827ef737.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f77d513ca2a4b888208329cdfb90fc8x1280x1382.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b180f095ef484a1b862f718dcd8cb82ax1280x713.JPEG"
    ]
  },
  {
    "text": "A 72-year-old man comes to the emergency room complaining his heart is pounding and that he is going to die. The emergency physician orders an ECG. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Inferior wall MI"
      },
      {
        "id": 2,
        "text": "Extensive anterior wall MI"
      },
      {
        "id": 3,
        "text": "Anterolateral wall MI"
      },
      {
        "id": 4,
        "text": "Anteroseptal MI"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given ECG shows&nbsp;<strong>ST elevation </strong>in leads<strong> V1-V4</strong>&nbsp;which is suggestive of <strong>acute anteroseptal myocardial infarction</strong> (MI)<strong>. </strong>ST depression in the leads III and aVF signifies an old inferior wall infarction.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/edfec934c9dd4e948efdec9aa4fdee9e.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old female patient was admitted to the hospital in view of severe dyspnea. History revealed that the dyspnea was exertional initially and later worsened to breathlessness during normal daily activities. She died on the 3rd day following admission. The image of the autopsy of the heart is shown below. Identify the condition.",
    "choices": [
      {
        "id": 1,
        "text": "Mitral stenosis"
      },
      {
        "id": 2,
        "text": "Mitral regurgitation"
      },
      {
        "id": 3,
        "text": "Tricuspid stenosis"
      },
      {
        "id": 4,
        "text": "Tricuspid regurgitation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image is of <strong>mitral stenosis</strong> showing <strong>fish mouth</strong> or <strong>buttonhole</strong> appearance.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/605ccf70079548dc8de82f986d56f830.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following cardiac biomarkers is the earliest to rise after acute myocardial infarction?",
    "choices": [
      {
        "id": 1,
        "text": "Creatine kinase"
      },
      {
        "id": 2,
        "text": "Myoglobin"
      },
      {
        "id": 3,
        "text": "Troponin T"
      },
      {
        "id": 4,
        "text": "Troponin I"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Myoglobin </strong>is the <strong>earliest to rise </strong>in acute MI followed by troponin, CK-MB and then LDH.</p>\n<p>Serum myoglobin and heart-type fatty acid-binding protein are smaller molecules that diffuse through interstitial \ufb02uids more rapidly after cell death than the larger CK and troponin molecules. They become abnormal as early as<strong> 30 minutes after myocardial injury.&nbsp;</strong>Neither molecule is specific to myocardial tissue. Myoglobin levels are not tested in routine practice.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A concerned wife brought her 43-year-old husband to the clinic after an episode of light-headedness and palpitations. An ECG was taken. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mobitz type II block"
      },
      {
        "id": 2,
        "text": "Mobitz type I block"
      },
      {
        "id": 3,
        "text": "Complete Heart block"
      },
      {
        "id": 4,
        "text": "1st Degree AV block"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient has symptoms and ECG findings suggestive of <strong>Mobitz type I or&nbsp;Wenckebach block.</strong></p>\n<p>In the given ECG <strong>PR segment progressively increases</strong> in each successive cycle, until a P wave of the series fails to produce a QRS complex (<strong>dropped QRS</strong>). In this example, for every 5 'P' waves, there are only 4 'QRS' complexes; hence, this is a 5:4 Wenckebach block.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/984406bb7c55446aa29563339e422f4b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Urinary antigen detection test is recommended for diagnosing patients with?",
    "choices": [
      {
        "id": 1,
        "text": "Mycoplasma pneumonia"
      },
      {
        "id": 2,
        "text": "Chlamydia pneumonia"
      },
      {
        "id": 3,
        "text": "Streptococcus pneumonia"
      },
      {
        "id": 4,
        "text": "Legionella pneumonia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A <strong>urinary antigen detection test</strong> is recommended for the diagnosis of<strong> Legionella pneumonia.&nbsp;</strong>The sensitivity (70%) and specificity (99%) of the test are high.</p>\n<p>The test can detect antigen even after the initiation of appropriate antibiotic therapy.&nbsp;Urinary antigen detection test can also be used for<strong>&nbsp;Streptococcus pneumonia</strong>&nbsp;but is not used due to the availability of better alternatives.</p>\n<p>Other investigations for Legionella:</p>\n<ul>\n<li>DFA (direct fluorescent antibody)- is highly specific but not sensitive</li>\n<li>Culture- <strong>Gold standard</strong>, BCYE media is used</li>\n<li>DNA detection with PCR</li>\n</ul>\n<p>Treatment: Drugs of choice are azithromycin and respiratory fluoroquinolones (levofloxacin, moxifloxacin).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following would be elevated in patients with chronic kidney disease?",
    "choices": [
      {
        "id": 1,
        "text": "Fibrinogen"
      },
      {
        "id": 2,
        "text": "Fetuin"
      },
      {
        "id": 3,
        "text": "Albumin"
      },
      {
        "id": 4,
        "text": "Globulin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Chronic kidney disease (<strong>CKD</strong>) is associated with <strong>elevated</strong> levels of <strong>fibrinogen</strong>.\u00a0</p>\n<p>CKD is a pro-inflammatory state characterized by altered levels of acute-phase reactants (<strong>APR</strong>)\u00a0</p>\n<ul>\n<li><strong>Elevated</strong> levels of positive APR like\u00a0<strong>CRP</strong> and <strong>fibrinogen</strong>\u00a0(associated with high ESR).</li>\n<li><strong>Reduced</strong> levels of\u00a0negative APR like <strong>albumin</strong> and <strong>fetuin</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man with CKD has been on dialysis for 3 months. He now presents with intense body pains and muscle pain. He suffered from 2 fractures over the last 2 months.  On evaluation, he was found to have decreased PTH levels and normal calcium levels. He has been regularly taking oral vitamin D and calcium tablets. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Osteomalacia"
      },
      {
        "id": 2,
        "text": "Adynamic bone disease"
      },
      {
        "id": 3,
        "text": "Osteitis fibrosa cystica"
      },
      {
        "id": 4,
        "text": "Tumoral calcinosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario in a <strong>CKD</strong> patient is suggestive of&nbsp;<strong>adynamic bone disease.</strong></p>\n<p>In CKD, metabolic bone disorders (renal osteodystrophy) can be of three types:</p>\n<table style=\"height: 615px; width: 413px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 36px;\">\n<td style=\"width: 151.984px; height: 36px;\"><strong>Osteitis fibrosa cystica</strong></td>\n<td style=\"width: 124.016px; height: 36px;\"><strong>Osteomalacia</strong></td>\n<td style=\"width: 115px; height: 36px;\"><strong>Adynamic bone disease</strong></td>\n</tr>\n<tr style=\"height: 62px;\">\n<td style=\"width: 151.984px; height: 62px;\">High bone turnover</td>\n<td style=\"width: 124.016px; height: 62px;\">\n<p>Low bone turnover</p>\n</td>\n<td style=\"width: 115px; height: 62px;\">\n<p>Low bone turnover</p>\n</td>\n</tr>\n<tr style=\"height: 204px;\">\n<td style=\"width: 151.984px; height: 204px;\">Renal calcium loss&nbsp;</td>\n<td style=\"width: 124.016px; height: 204px;\">Decreased calcitriol formation leads to&nbsp;low calcium</td>\n<td style=\"width: 115px; height: 204px;\">\n<p>It is an <strong>iatrogenic</strong> condition</p>\n<p>Increased intake of <strong>vitamin D</strong> or <strong>calcium-containing</strong> phosphate binders or dialysis.</p>\n</td>\n</tr>\n<tr style=\"height: 258px;\">\n<td style=\"width: 151.984px; height: 258px;\">High PTH occurs in response to low calcium (secondary hyperparathyroidism)</td>\n<td style=\"width: 124.016px; height: 258px;\">\n<p>Low vitamin D leads to <strong>defective</strong> <strong>mineralization</strong></p>\n<p>Decreased calcium leads to a mild increase in PTH, which stimulates osteoblasts. Thus the <strong>bone volume</strong> is <strong>maintained</strong>.</p>\n</td>\n<td style=\"width: 115px; height: 258px;\">\n<p>High vitamin D&nbsp; decreases PTH levels, which leads to <strong>decreased bone volume</strong>.</p>\n<p><strong>Mineralization</strong> is <strong>defective</strong> because of aluminium, which comes from dialysis.</p>\n</td>\n</tr>\n<tr style=\"height: 78px;\">\n<td style=\"width: 151.984px; height: 78px;\">\n<p style=\"text-align: left;\"><strong>Treatment:</strong></p>\n<p style=\"text-align: left;\">Vitamin D + calcium</p>\n</td>\n<td style=\"width: 124.016px; height: 78px; text-align: left;\">\n<p><strong>Treatment:</strong></p>\n<p>Vitamin D + calcium</p>\n</td>\n<td style=\"width: 115px; height: 78px; text-align: left;\">\n<p><strong>Treatment:</strong></p>\n<p>Withdrawal of offending agent</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to your OPD with galactorrhea and amenorrhea. Apart from the determination of serum prolactin levels, which other investigation would you like to do?",
    "choices": [
      {
        "id": 1,
        "text": "LH"
      },
      {
        "id": 2,
        "text": "TSH"
      },
      {
        "id": 3,
        "text": "FSH"
      },
      {
        "id": 4,
        "text": "Urinary ketosteroids"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>TSH</strong> should be measured along with the prolactin level to rule out hypothyroidism which can cause hyperprolactinemia.</p>\n<p>Note: However, pregnancy (using qualitative HCG) should be ruled out in all women of the reproductive age group with amenorrhea.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You have started a 40-year-old man on treatment for type 2 diabetes mellitus and dyslipidemia. Which of the following is not an appropriate target for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "HbA1c < 7 %"
      },
      {
        "id": 2,
        "text": "Blood pressure < 130 / 80 mmHg"
      },
      {
        "id": 3,
        "text": "Triglycerides < 150 mg/dL"
      },
      {
        "id": 4,
        "text": "Postprandial plasma glucose < 200 mg/dL"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>According to the ADA guidelines, a treatment goal of<strong>&nbsp;postprandial</strong>&nbsp;plasma glucose <strong>&lt; 180</strong> mg/dL must be followed in adults with diabetes.</p>\n<p>In <strong>younger</strong> individuals or those with other cardiovascular risk factors, the target blood pressure is <strong>&lt; 130/80</strong> <strong>mm Hg</strong>. Although not a treatment goal, the ADA also recommends triglyceride levels be maintained at &lt; 150 mg/dl.</p>\n<p>Note:&nbsp;Saroglitazar is a&nbsp;more advanced drug that reduces blood sugar and lipid levels in diabetic patients. It acts on PPAR alpha and gamma receptors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old boy has been on treatment for type 1 diabetes mellitus since the age of 10 years. His physician decides to begin screening for diabetic nephropathy. Which of the following is not always a reliable indicator of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Long duration of diabetes"
      },
      {
        "id": 2,
        "text": "Albuminuria of 30-300 mg/day"
      },
      {
        "id": 3,
        "text": "Presence of diabetic retinopathy"
      },
      {
        "id": 4,
        "text": "Reduced glomerular filtration rate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Albumin of 30-300 mg/day refers to <strong>microalbuminuria</strong>. It can be<strong>&nbsp;unreliable </strong>in the<strong>&nbsp;</strong>diagnosis&nbsp;of&nbsp;<strong>diabetic</strong> <strong>nephropathy</strong>.</p>\n<p>It is not required to diagnose nephropathy as it is very variable. <strong>Non-albuminuric</strong> diabetic nephropathy may occur in some patients and <strong>regression</strong> of albuminuria may be seen in type 1 diabetics.</p>\n<p>Diabetic nephropathy can be diagnosed if the following are satisfied:&nbsp;</p>\n<ul>\n<li><strong>Reduced</strong> <strong>GFR</strong> (&lt;&nbsp;60 mL/min/1.73 m<sup>2)&nbsp;</sup>with or without persistent albuminuria (&gt; 30 mg/day or urine PCR &gt; 30 mg/g)</li>\n<li>Long duration of diabetes or established diabetic retinopathy</li>\n<li>Other etiologies are ruled out</li>\n</ul>\n<p><strong>Long duration</strong> in<strong> type 1</strong> diabetes refers to <strong>5 years</strong> after diagnosis. On the other hand, patients with <strong>type 2</strong> diabetes are exposed to hyperglycemia and prediabetes for a long time even before diagnosis. Hence,&nbsp;at the <strong>time of diagnosis</strong>, patients with type 2 diabetes are considered to have had the disorder for a duration sufficiently long to produce kidney disease.</p>\n<p>However, a clinical diagnosis of diabetic nephropathy can be made in patients with established <strong>retinopathy</strong>, even if the duration of diabetes is short.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient with reduced cortisol and elevated ACTH, which of the following would not be part of your differential diagnoses?",
    "choices": [
      {
        "id": 1,
        "text": "Kearns-Sayre syndrome"
      },
      {
        "id": 2,
        "text": "Autoimmune polyglandular syndrome type 2"
      },
      {
        "id": 3,
        "text": "Triple-A syndrome"
      },
      {
        "id": 4,
        "text": "MEN 4 syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Elevated ACTH and reduced cortisol levels are seen in&nbsp;<strong>primary adrenal insufficiency</strong>. It is not a feature of MEN 4 syndrome.</p>\n<p>The following syndromes are associated with primary adrenal insufficiency:</p>\n<ul>\n<li>Autoimmune polyglandular syndrome type 1</li>\n<li><strong>Autoimmune polyglandular syndrome type 2</strong></li>\n<li><strong>Triple-A syndrome</strong></li>\n<li>Smith-Lemli-Opitz syndrome</li>\n<li><strong>Kearns-Sayre syndrome</strong></li>\n<li>IMAGe syndrome</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common biochemical abnormality seen at presentation in patients with adrenal insufficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Hypernatremia"
      },
      {
        "id": 2,
        "text": "Hypokalemia"
      },
      {
        "id": 3,
        "text": "Hyponatremia"
      },
      {
        "id": 4,
        "text": "Hyperkalemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Hyponatremia </strong>is the most common biochemical abnormality seen at presentation in patients with <strong>adrenal insufficiency</strong>.&nbsp;It is observed in <strong>80%</strong> of the patients at presentation.</p>\n<p>Hyponatremia is caused by:</p>\n<ul>\n<li>Mineralocorticoid deficiency</li>\n<li>Diminished inhibition of ADH release by cortisol, resulting in mild SIADH during secondary adrenal insufficiency</li>\n</ul>\n<p><strong>Hyperkalemia</strong> is diagnosed in <strong>40%</strong> of the patients during initial diagnosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You can advise any of the following tests for screening of a patient suspected to be having Cushing's syndrome except:",
    "choices": [
      {
        "id": 1,
        "text": "Midnight plasma cortisol measurement"
      },
      {
        "id": 2,
        "text": "Determination of plasma ACTH levels"
      },
      {
        "id": 3,
        "text": "24 hour urinary free cortisol measurement"
      },
      {
        "id": 4,
        "text": "Overnight dexamethasone suppression test"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Determination of<strong> plasma ACTH </strong>levels is <strong>not</strong> advised as a <strong>screening</strong> test for a patient with Cushing's syndrome.</p>\n<p>Plasma ACTH determination&nbsp;is done to distinguish between ACTH-dependent and independent causes. It is done after the screening or confirmation of Cushing's syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The Model for End-Stage Liver Disease (MELD) score cut off suggestive of significant mortality in alcoholic hepatitis is _____",
    "choices": [
      {
        "id": 1,
        "text": "16 or more"
      },
      {
        "id": 2,
        "text": "21 or more"
      },
      {
        "id": 3,
        "text": "32 or more"
      },
      {
        "id": 4,
        "text": "36 or more"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>MELD score </strong>which is 21&nbsp;or more is also associated with <strong>significant mortality in alcoholic hepatitis. </strong></p>\n<ul>\n<li>The presence of ascites, variceal hemorrhage, deep encephalopathy, or hepatorenal syndrome predicts a dismal prognosis.</li>\n<li>The pathologic stage of the injury can be helpful in predicting prognosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant presented with yellow discolouration of the skin, poor feeding, and seizures. Investigations revealed total bilirubin- 40 mg/dL and unconjugated bilirubin- 34 mg/dL. Phenobarbitone was administered while blood was being arranged for an exchange transfusion. However, there was no improvement. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Gilbert syndrome"
      },
      {
        "id": 2,
        "text": "Crigler-Najjar syndrome type 1"
      },
      {
        "id": 3,
        "text": "Crigler-Najjar syndrome type 2"
      },
      {
        "id": 4,
        "text": "Rotor syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with poor feeding and seizures is indicative of <strong>kernicterus. </strong>This accompanied with <strong>unconjugated hyperbilrubinemia</strong>\u00a0is highly suggestive of <strong>Crigler-Najjar syndrome type 1</strong>.</p>\n<p><strong>No improvement</strong> in bilirubin levels<strong> following</strong> the administration of <strong>phenobarbital</strong> further supports the diagnosis.\u00a0</p>\n<p><strong>Crigler-Najjar syndrome</strong> is of two types with<strong> type 1</strong> having <strong>absent/trace enzyme activity</strong> and <strong>type 2</strong> having<strong> &lt;10% of the normal enzyme activity</strong>. Hence, type 1 is far more severe and leads to kernicterus and neurological damage. Type 2 may also lead to kernicterus occasionally.\u00a0</p>\n<p><strong>Kernicterus</strong> occurs because the <strong>unconjugated bilirubin</strong> is <strong>lipid-soluble</strong> and hence <strong>crosses the blood-brain barrier</strong>.\u00a0</p>\n<p><strong>Phenobarbital</strong> is an <strong>enzyme inducer</strong>. Its administration can be used to differentiate between type 1 and type 2 Crigler-Najjar.</p>\n<ul>\n<li>Enzyme induction by phenobarbital leads to <strong>improved conjugation</strong> of bilirubin leading to a reduction in total bilirubin level <strong>in type 2 Crigler-Najjar</strong> syndrome.</li>\n<li><strong>No improvement</strong> is seen <strong>in type 1</strong> as the enzyme activity is absent and therefore cannot be induced.</li>\n</ul>\n<p>Inherited unconjugated hyperbilirubinemias (Autosomal Recessive) include:</p>\n<table style=\"height: 245px; width: 421px;\">\n<tbody>\n<tr style=\"height: 83px;\">\n<td style=\"width: 121px; height: 83px;\">\u00a0</td>\n<td style=\"width: 122px; height: 83px;\">\n<p>Crigler-Najjar type\u00a0 I</p>\n</td>\n<td style=\"width: 183px; height: 83px;\">\n<p>Crigler-Najjar type II</p>\n</td>\n<td style=\"width: 259px; height: 83px;\">Gilbert Syndrome</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 121px; height: 36px;\">UDP-GT Activity\u00a0</td>\n<td style=\"width: 122px; height: 36px;\">Absent</td>\n<td style=\"width: 183px; height: 36px;\">Markedly reduced</td>\n<td style=\"width: 259px; height: 36px;\">Reduced</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"width: 121px; height: 36px;\">Serum bilirubin</td>\n<td style=\"width: 122px; height: 36px;\">20 - 45 mg/dl</td>\n<td style=\"width: 183px; height: 36px;\">&lt;20 mg/dl</td>\n<td style=\"width: 259px; height: 36px;\">Generally &lt;3 mg/dl</td>\n</tr>\n<tr style=\"height: 72px;\">\n<td style=\"width: 121px; height: 72px;\">Pheno-barbital effect on serum bilirubin</td>\n<td style=\"width: 122px; height: 72px;\">No effect</td>\n<td style=\"width: 183px; height: 72px;\">Reduction</td>\n<td style=\"width: 259px; height: 72px;\">Reduction</td>\n</tr>\n<tr style=\"height: 72px;\">\n<td style=\"width: 121px; height: 72px;\">Outcome</td>\n<td style=\"width: 122px; height: 72px;\">Kernicterus</td>\n<td style=\"width: 183px; height: 72px;\">Usually benign, kernicterus is rare\u00a0</td>\n<td style=\"width: 259px; height: 72px;\">Benign</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"width: 121px; height: 18px;\">Prevalence</td>\n<td style=\"width: 122px; height: 18px;\">Rare\u00a0</td>\n<td style=\"width: 183px; height: 18px;\">Rare</td>\n<td style=\"width: 259px; height: 18px;\">\u00a0Common</td>\n</tr>\n</tbody>\n</table>\n<p>Note: Rotor syndrome causes conjugated hyperbilirubinemia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 44-year-old woman with rheumatoid arthritis is now diagnosed with primary biliary cholangitis. Which of the following is false regarding her lab values?",
    "choices": [
      {
        "id": 1,
        "text": "Positive Anti-LKM- 2 antibodies"
      },
      {
        "id": 2,
        "text": "Elevated alkaline phosphatase  (ALP)"
      },
      {
        "id": 3,
        "text": "Elevated gamma-glutamyl transferase (GGT)"
      },
      {
        "id": 4,
        "text": "Positive antimitochondrial antibodies"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Anti-LKM 2 antibodies are not seen in primary biliary cholangitis. They are seen in drug-induced hepatitis.</p>\n<p>The laboratory findings of primary biliary cholangitis include :</p>\n<ul>\n<li>Liver function tests\n<ul>\n<li><strong>Elevated ALP</strong>&nbsp;</li>\n<li>Elevated GGT and 5'- nucleotidase</li>\n<li>Elevated ALT and AST</li>\n</ul>\n</li>\n<li>Serology -&nbsp;\n<ul>\n<li><strong>Antimitochondrial antibodies</strong> - positive in 95% of patients. These are mostly directed against the pyruvate dehydrogenase complex.</li>\n<li>Antinuclear antibodies</li>\n</ul>\n</li>\n<li>Elevated HDL, LDL, and VLDL</li>\n<li>Elevated serum IgM</li>\n</ul>\n<p>Hyperbilirubinemia is seen once cirrhosis has developed.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect about hemodialysis?\u200b",
    "choices": [
      {
        "id": 1,
        "text": "Dialyzers are made up of cellulose membranes"
      },
      {
        "id": 2,
        "text": "Bicarbonate is commonly used as a buffer"
      },
      {
        "id": 3,
        "text": "Glutaraldehyde  is used as a reprocessing agent"
      },
      {
        "id": 4,
        "text": "Urea is cleared more efficiently than creatinine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In <strong>hemodialysis,</strong> the <strong>dialyzer</strong> is made up of biocompatible membranes derived from <strong>polysulfone.</strong>&nbsp;Cellulose is bio-incompatible and is no longer used.</p>\n<p>Hemodialysis&nbsp;is based on the principle of solute diffusion using an artificial semi-permeable membrane. Smaller molecules (<strong>urea</strong>) diffuse faster and are <strong>cleared</strong> more <strong>efficiently</strong> than larger molecules (creatinine). There are three components to this system:</p>\n<ul>\n<li>Dialyzer - a chamber that contains compartments for blood and dialysate solution, separated by a semipermeable membrane.&nbsp;</li>\n<li><strong>Dialysate</strong> - a solution that helps in the removal of metabolic waste products.&nbsp;<strong>Bicarbonate</strong> is used as a <strong>buffer</strong> to correct acidosis in CKD patients.</li>\n<li><strong>Blood delivery system</strong> - consists of the vascular access and extracorporeal circuit.</li>\n</ul>\n<p>The dialyzers used during a session of dialysis are reprocessed and reused for the next dialysis sessions. The reprocessors used for dialyzers are:&nbsp;</p>\n<ul>\n<li><strong>Glutaraldehyde</strong></li>\n<li>Formaldehyde&nbsp;&nbsp;</li>\n<li>Peracetic acid-hydrogen peroxide</li>\n</ul>\n<p>The following image depicts hemodialysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/53e103fc130b4abb9632f647983fc3a8x654x564.PNG"
    ]
  },
  {
    "text": "Characteristic cardiac lesion in SLE is",
    "choices": [
      {
        "id": 1,
        "text": "Pericarditis"
      },
      {
        "id": 2,
        "text": "Verrucous endocarditis"
      },
      {
        "id": 3,
        "text": "Myocardial fibrosis"
      },
      {
        "id": 4,
        "text": "Valvular incompetence"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>characteristic cardiac lesions of SLE</strong> are <strong>verrucous valvular abnormalities</strong> known as <strong>Libman-Sacks endocarditis</strong>.</p>\n<p>They most often are located on the <strong>left-sided cardiac valves</strong>, particularly on the <strong>ventricular surface of the posterior mitral leaflet</strong>, and are made up almost entirely of <strong>fibrin.</strong></p>\n<p>However,<strong> Pericarditis </strong>is the <strong>most common cardiac manifestation of SLE.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cogan syndrome includes all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Interstitial nephritis"
      },
      {
        "id": 2,
        "text": "Interstitial keratitis"
      },
      {
        "id": 3,
        "text": "Aortitis"
      },
      {
        "id": 4,
        "text": "Vestibuloauditory symptoms"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Interstitial nephritis is not a part of Cogan&rsquo;s syndrome.</p>\n<p><strong>Cogan&rsquo;s syndrome</strong> is a <strong>primary vasculitis syndrome</strong>.</p>\n<p>It includes</p>\n<ul>\n<li><strong>Interstitial keratitis</strong></li>\n<li><strong>Vestibuloauditory</strong> symptoms</li>\n<li>Systemic vasculitis, particularly <strong>aortitis </strong>with involvement of the aortic valve. <strong>Glucocorticoids </strong>are the <strong>mainstay of treatment</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medicine Test Iii';
        const quizFilename = 'medicine-test-iii-c0b3e798.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>