<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>47 Platelet Disorders And Hematology Images - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">23</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Which of the following is correct about the neutrophil shown in peripheral smear?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"335\" src=\"https://image.prepladder.com/content/DnVKFErarHMLVBZPkvTp1755776074.png\" width=\"444\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Chediak higashi Syndrome"
      },
      {
        "id": 2,
        "text": "Myelodysplastic syndrome"
      },
      {
        "id": 3,
        "text": "Perinicious anemia"
      },
      {
        "id": 4,
        "text": "Burns"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer is b: Myelodysplastic syndrome </strong></p>\n\n<ul>\n\t<li>The <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> shows hyposegmented neutrophils with clear cytoplasms seen in MDS. Chediak higashi syndrome will have inclusions in neutrophils. Pernicious <span class=\"customMeta\" data-dictid=\"53bee2a41216927771814d7ec3a67f\">anemia</span> will have hypersegmented neutrophils. Burns will have Dohle bodies which are <span class=\"customMeta\" data-dictid=\"0bc69d6cf8169277718209818c7522\">basophilic</span> inclusions</li>\n</ul>\n\n<p><strong>Neutrophil <span class=\"customMeta\" data-dictid=\"c3b8b9a17416927771906b1bebb13c\">inclusion</span> bodies</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Inclusion body</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Appearance </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Seen in</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Notes</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Dohle bodies</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Pale blue, <span class=\"customMeta\" data-dictid=\"74793d564816927771943ae4ba74b3\">oval</span> cytoplasmic inclusions</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Severe bacterial infection, burns pregnancy, CML, after G-CSF</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Made of rough ER</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Toxic granulation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Large, dark <span class=\"customMeta\" data-dictid=\"2fbcd980171692777182d07ca6812c\">azurophilic</span> granules</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Severe infection, inflammation, CML</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Due to \u2191 primary granules</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Auer rods ( in <span class=\"customMeta\" data-dictid=\"000d23188716927771936c5f2fe74e\">neutrophil</span> precursors)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Needle - like red structures</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>AML (especially M2, M3)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Composed of fused lysosomes/ primary granules</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Chediak - higashi granules</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Giant <span class=\"customMeta\" data-dictid=\"2fbcd980171692777182d07ca6812c\">azurophilic</span> granules</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Chediak - Higashi syndrome</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Due to lysosomal <span class=\"customMeta\" data-dictid=\"4c550b1d7a1692777200641b5f4e28\">trafficking</span> <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> (LYST <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> )</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Intracytoplasmic bacteria</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>small rods/ <span class=\"customMeta\" data-dictid=\"57640139fe169277718418f95ae49f\">cocci</span> inside neutrophils</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>sepsis (esp. gonococcal, meningococcal</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Pathogen visible on smear</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/DnVKFErarHMLVBZPkvTp1755776074.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is the correct presentation of Bernard\u2013Soulier syndrome?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Presence of large platelets with thrombocytopenia and defective platelet adhesion"
      },
      {
        "id": 2,
        "text": "Small platelets, eczema, recurrent infections, and thrombocytopenia due to an X-linked disorder"
      },
      {
        "id": 3,
        "text": "Umbilical stump bleeding on day 1 of life"
      },
      {
        "id": 4,
        "text": "Normal platelet count with defective platelet aggregation caused by absent GPIIb/IIIa receptors"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A. Presence of large platelets with <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> and <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> adhesion</strong></p>\n\n<ul>\n\t<li><strong>Remember Big Bernard implying big platelets in Bernard\u2013Soulier syndrome</strong>. It is an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> disorder caused by <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> of <strong>GpIb receptor</strong> Platelets hence cannot bind vWF leading to <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <strong>adhesion</strong>. Peripheral <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> shows <strong>giant platelets</strong> with thrombocytopenia.</li>\n</ul>\n\n<p><strong>Incorrect options </strong></p>\n\n<p><strong>Wiskott\u2013Aldrich syndrome i</strong>s X-linked disorder: <span class=\"customMeta\" data-dictid=\"1a0a43d74e16927772004473a05ae3\">triad</span> of eczema, <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> infections, and <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> with <strong>small platelets</strong>. <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">Bleeding</span> is due to low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count, not <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> defect.</p>\n\n<p><strong>Factor XIII <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> </strong>presents with <strong>umbilical <span class=\"customMeta\" data-dictid=\"cd187682b0169277719976b8127f36\">stump</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> in neonates (day 1\u20132 of life)</strong>, poor wound healing, and <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> <span class=\"customMeta\" data-dictid=\"cd42e0ddad1692777190d18c595ec5\">intracranial</span> hemorrhage. PT, aPTT, BT all <strong>normal</strong>. Only <span class=\"customMeta\" data-dictid=\"5e0b40993316927771844dbf382689\">clot</span> stability is affected. <strong>Clot <span class=\"customMeta\" data-dictid=\"a9295e67a41692777198dce0de3f34\">solubility</span> test in 5 M <span class=\"customMeta\" data-dictid=\"38d4be106e169277720105b006c26b\">urea</span> or 1% monochloroacetic acid:</strong> <strong>clot dissolves</strong> and is diagnostic. <strong>Factor XIII <span class=\"customMeta\" data-dictid=\"fc026ff6d81692777182835f6de6df\">assay</span> confirms deficiency</strong></p>\n\n<p><strong>Glanzmann thrombasthenia</strong> is an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> of <strong>GpIIb/IIIa receptor</strong> and platelets cannot bind <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> and leads to <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <strong>aggregation</strong>.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is correct about the mechanism of action of Ticagrelor?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Inhibiting P2Y12 , ADP receptor"
      },
      {
        "id": 2,
        "text": "Acetylation of COX-1"
      },
      {
        "id": 3,
        "text": "Blocking activated glycoprotein Gp IIb/IIIa"
      },
      {
        "id": 4,
        "text": "Inhibiting production of COX-1"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer is a: Inhibiting P2Y12, ADP receptor</strong></p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"303\" src=\"https://image.prepladder.com/content/w18Oe66bHw8nEVJZSW1Q1755769851.png\" width=\"666\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/w18Oe66bHw8nEVJZSW1Q1755769851.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Life span of platelet in body is</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "3-5 days"
      },
      {
        "id": 2,
        "text": "5-7 days"
      },
      {
        "id": 3,
        "text": "7-10 days"
      },
      {
        "id": 4,
        "text": "10-14 days"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer is c: 7-10 days</strong></p>\n\n<p>Life span of platelets</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:600px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Physiological in body</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>7-10 days ( no consumption and no alloimmunization)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Storage in <span class=\"customMeta\" data-dictid=\"40e5b091961692777183c9488699bb\">blood bank</span> at 20-24 C</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>3-5 days</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Special situations like DHF, DIC</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>24 hours</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<ul>\n\t<li>Platelets are disc-shaped, <span class=\"customMeta\" data-dictid=\"39b2ca0c3916927771819e142c3ae2\">anucleate</span> cells < 5 \u03bcm that circulate in the blood at concentrations of 200\u2013400,000/\u03bcL.</li>\n\t<li>Platelets are derived from megakaryocytes, polyploidal <span class=\"customMeta\" data-dictid=\"d2e0ab499c169277718886ab5a46bf\">hematopoietic</span> cells found in the bone marrow.</li>\n\t<li>The primary regulator of <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> formation is thrombopoietin</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 30 year old multigravida post-partum female developed multiple bruises and ecchymosis after delivery. coagulogram shows prolonged aPTT, normal TT and normal PT. and TT and a mixing study that does not correct with normal pooled plasma. The Bethesda assay using factor-specific deficient plasma is planned. First differential diagnosis is</p>",
    "choices": [
      {
        "id": 1,
        "text": "Von Willebrand disease"
      },
      {
        "id": 2,
        "text": "HELLP syndrome"
      },
      {
        "id": 3,
        "text": "Acquired Hemophilia A"
      },
      {
        "id": 4,
        "text": "DIC"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer is c; Acquired Hemophilia A</strong></p>\n\n<p>Post-partum women can develop autoantibodies against factor VIII. This causes isolated prolonged aPTT that <strong>fails to correct on mixing study</strong>, and diagnosis is confirmed with a Bethesda assay.</p>\n\n<p><strong>Incorrect options </strong></p>\n\n<p><strong>Von Willebrand disease:</strong> Also prolongs aPTT, but mixing study <strong>corrects</strong> since it is a deficiency, not an inhibitor.</p>\n\n<p><strong>HELLP syndrome:</strong> Presents with hemolysis, elevated liver enzymes, and thrombocytopenia</p>\n\n<p><strong>DIC:</strong> Causes <strong>both PT and aPTT prolongation</strong> with low <span class=\"customMeta\" data-dictid=\"a137b7092a16927772025412d4ef05\">fibrinogen</span> and thrombocytopenia</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following cause/s lead to DIC?</p>\n\n<p>a. Fulminant hepatic failure</p>\n\n<p>b. Acute promyelocytic leukemia</p>\n\n<p>c. Carcinoma prostate</p>\n\n<p>d. Fungal sepsis</p>",
    "choices": [
      {
        "id": 1,
        "text": "b,c,d"
      },
      {
        "id": 2,
        "text": "a,c,d"
      },
      {
        "id": 3,
        "text": "a,b,d"
      },
      {
        "id": 4,
        "text": "a,b,c,d"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer is d: a,b,c,d</strong></p>\n\n<p>Sepsis is overall the most common cause. Any agent whether bacterial, <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> and fungal can trigger DIC</p>\n\n<p>In Fulminant <span class=\"customMeta\" data-dictid=\"3268e86ce01692777188f249c64d6e\">hepatic</span> failure production of both pro-coagulant and <span class=\"customMeta\" data-dictid=\"4665fdd0a0169277718100f58eb0d5\">anti</span> <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> factors will reduce leading to DIC.</p>\n\n<p>Auer rods of APL trigger DIC. Carcinoma <span class=\"customMeta\" data-dictid=\"19c0231fc41692777196ffce23771d\">prostate</span> and <span class=\"customMeta\" data-dictid=\"2e2fe8c6c116927771946fb9a8adb0\">pancreas</span> release tissue factor (thromboplastin-like material) and <span class=\"customMeta\" data-dictid=\"ff2094828c1692777196941a65e6eb\">procoagulant</span> phospholipids that lead to DIC.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>9-year old with acquired factor IX deficiency. However, the coagulation abnormality corrected after administration of Vitamin K. What is the most likely diagnosis?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Classic Hemophilia"
      },
      {
        "id": 2,
        "text": "Pernicious anemia"
      },
      {
        "id": 3,
        "text": "Hepatitis A"
      },
      {
        "id": 4,
        "text": "Bile duct obstruction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer is d: <span class=\"customMeta\" data-dictid=\"cf978047b61692777183c0569f21f2\">Bile</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> </strong></p>\n\n<ul>\n\t<li>Acquired factor IX <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> can occur in Vitamin K <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> because factor IX is a Vitamin K\u2013dependent <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> factor (along with II, VII, X, and proteins C & S).</li>\n\t<li>Now the <span class=\"customMeta\" data-dictid=\"92a52a7756169277718538d58fe1a9\">correction</span> with Vitamin K<strong> strongly suggests</strong> that this is not <em>true</em> factor IX <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> (i.e. Hemophilia B, which does not correct with Vitamin K), but rather a Vitamin K <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> state.</li>\n\t<li>In children, <strong>bile <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> obstruction</strong> (cholestasis) causes fat-soluble vitamin malabsorption. This causes Vitamin K <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> that will reduce the levels of factors II, VII, IX, X and cause prolonged PT/PTT, which corrects with Vitamin K.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following are used in non transfusion therapy for hemophilia A?</p>\n\n<p>a. Factor VIII concentrate</p>\n\n<p>b. Cryoprecipitate</p>\n\n<p>c. DDAVP</p>\n\n<p>d. Epsilon amino caproic acid</p>",
    "choices": [
      {
        "id": 1,
        "text": "a,b"
      },
      {
        "id": 2,
        "text": "a,c"
      },
      {
        "id": 3,
        "text": "a,d"
      },
      {
        "id": 4,
        "text": "c,d"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer is d: c,d</strong></p>\n\n<p>The question is on <strong>non-transfusion </strong>therapy that uses DDAVP and Epsilon <span class=\"customMeta\" data-dictid=\"543f207eb51692777181723491a358\">amino</span> caproic acid.</p>\n\n<p>DDAVP: It causes a <span class=\"customMeta\" data-dictid=\"a6cf2c3dc51692777200ef7fb22f69\">transient</span> rise in FVIII and VWF, but not FIX, by release from stores in <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> endothelial cells.</p>\n\n<p>EACA: <span class=\"customMeta\" data-dictid=\"03b359edf81692777181e4a297fbf8\">antifibrinolytic</span> therapy prevents destruction of already formed clots by plasmin.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which clotting factor has the longest half life?</p>",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "7"
      },
      {
        "id": 3,
        "text": "9"
      },
      {
        "id": 4,
        "text": "13"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer is d: 13</strong></p>\n\n<p>Factor <strong>VIII</strong> has the <strong>shortest </strong>half life of 4-6 hours and factor <strong>XIII </strong>has the <strong>longest</strong> half life of 11-14 days.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The following inclusions inside RBC are called _______________</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Dohle bodies"
      },
      {
        "id": 2,
        "text": "Pappenheimer bodies"
      },
      {
        "id": 3,
        "text": "Howell Jolly bodies"
      },
      {
        "id": 4,
        "text": "Dutcher bodies"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Option C </strong>- <strong>Howell <span class=\"customMeta\" data-dictid=\"76e0153a6716927771906eff5bb5f2\">Jolly bodies</span> </strong></p>\n\n<p>The image shows <span class=\"customMeta\" data-dictid=\"9729ba172a1692777198c816c4ad9c\">solitary</span> <span class=\"customMeta\" data-dictid=\"0bc69d6cf8169277718209818c7522\">basophilic</span> <span class=\"customMeta\" data-dictid=\"c3b8b9a17416927771906b1bebb13c\">inclusion</span> inside RBC which is Howell jolly bodies. Option A is seen in Neutrophils. Option D is seen in <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> cells. Option B is multiple bodies inside RBC.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Howell Jolly bodies</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Pappenheimer bodies</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"332\" src=\"https://image.prepladder.com/content/O0ZMkAIndDy9V0ZSMflg1755776204.png\" width=\"337\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"279\" src=\"https://image.prepladder.com/content/oxt2b2nXX3KQgijnNF0g1755776197.png\" width=\"444\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/O0ZMkAIndDy9V0ZSMflg1755776204.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The following inclusions in neutrophils are seen in?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"305\" src=\"https://image.prepladder.com/content/671WLiMLydpaPqkiPZUj1755776133.png\" width=\"399\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Burns"
      },
      {
        "id": 2,
        "text": "Chediak higashi granules"
      },
      {
        "id": 3,
        "text": "Celiac sprue"
      },
      {
        "id": 4,
        "text": "Whipple disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer is a: Burns</strong></p>\n\n<p><strong>D\u00f6hle bodies</strong> are pale blue-gray, <span class=\"customMeta\" data-dictid=\"74793d564816927771943ae4ba74b3\">oval</span> inclusions <strong>in the <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> cytoplasm</strong> of neutrophils, representing aggregates of rough <span class=\"customMeta\" data-dictid=\"c01a5a8c221692777187daa368ab62\">endoplasmic reticulum</span> and ribosomal RNA. They are typically seen in toxic <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> states such as bacterial infections, burns, and pregnancy</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:602px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Dohle bodies </strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:1px solid black; vertical-align:top\">\n\t\t\t<p><strong>Chediak Higashi </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:1px solid black; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"339\" src=\"https://image.prepladder.com/content/NaTD4t46m763Bk5nNpHt1755776156.png\" width=\"444\" /></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid black; border-left:none; border-right:1px solid black; border-top:none; vertical-align:top\">\n\t\t\t<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"353\" src=\"https://image.prepladder.com/content/FdLgXcWg9doU9e4c97Ge1755776168.png\" width=\"444\" /></p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/671WLiMLydpaPqkiPZUj1755776133.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/NaTD4t46m763Bk5nNpHt1755776156.png"
    ],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 6-year-old boy presents with recurrent skin and respiratory infections since infancy. Examination reveals partial albinism and peripheral neuropathy. Peripheral smear is shown below. Which of the following is the most likely underlying defect?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"353\" src=\"https://image.prepladder.com/content/9QbYtia4XJG9REktTGqb1755776104.png\" width=\"444\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Defective lysosomal trafficking"
      },
      {
        "id": 2,
        "text": "NADPH oxidase deficiency"
      },
      {
        "id": 3,
        "text": "Defective adhesion molecule"
      },
      {
        "id": 4,
        "text": "Myeloperoxidase deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer is A: <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">Defective</span> lysosomal trafficking</strong></p>\n\n<ul>\n\t<li>The slide shows giant granules in the <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> of neutrophil. This along with history of <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> infections and <span class=\"customMeta\" data-dictid=\"d9b1de62b816927771817623b2a5fd\">albinism</span> points to diagnosis as Chediak higashi syndrome.</li>\n\t<li>It occurs due to <strong>LYST gene <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 1 </strong> that leads to impaired microtubule-dependent <span class=\"customMeta\" data-dictid=\"4c550b1d7a1692777200641b5f4e28\">trafficking</span> of lysosomes. This causes <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> phagolysosomal <span class=\"customMeta\" data-dictid=\"a7dfeb385e1692777203302bcf142d\">fusion</span> and <span class=\"customMeta\" data-dictid=\"4c550b1d7a1692777200641b5f4e28\">trafficking</span> inside the neutrophils.</li>\n</ul>\n\n<p>Manifestations seen in chediak higashi syndrome</p>\n\n<ol>\n\t<li>Giant granules in leukocytes</li>\n\t<li>Recurrent <span class=\"customMeta\" data-dictid=\"f6332ef2d21692777196294f154e57\">pyogenic</span> infections</li>\n\t<li>Oculo-cutaneous <span class=\"customMeta\" data-dictid=\"d9b1de62b816927771817623b2a5fd\">albinism</span> ( <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"ffa379767c169277719297e1ad4f77\">melanosome</span> trafficking)</li>\n\t<li>Neuropathy</li>\n</ol>\n\n<p><strong>Incorrect options </strong></p>\n\n<p><strong>B.</strong> NADPH <span class=\"customMeta\" data-dictid=\"4a14dfa14e1692777194882f818d87\">oxidase</span> <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> is seen in chronic <span class=\"customMeta\" data-dictid=\"9e1f97f6ad169277718805c2dd35c1\">granulomatous</span> disease and leads to <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> catalase-positive infections, <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"60d563fe241692777194203742bf5b\">oxidative</span> burst (diagnosed by DHR test).</p>\n\n<p><strong>C.</strong> CD18 <span class=\"customMeta\" data-dictid=\"359a8718a61692777185568ac80abb\">defect</span> seen in <span class=\"customMeta\" data-dictid=\"00346a7f211692777191e91c2af9fc\">Leukocyte</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> deficiency. It presents with delayed <span class=\"customMeta\" data-dictid=\"9cc3973459169277720194a0847477\">umbilical</span> cord separation and <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> infections without pus</p>\n\n<p><strong>D.</strong> Myeloperoxidase <span class=\"customMeta\" data-dictid=\"209b85faf71692777185767d43e3bd\">deficiency</span> is usually asymptomatic, impaired killing of Candida</p>",
    "question_images": [
      "https://image.prepladder.com/content/9QbYtia4XJG9REktTGqb1755776104.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following is not correct about ITP?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Secondary ITP occurs due to autoimmune causes like SLE and infections like HIV , HCV"
      },
      {
        "id": 2,
        "text": "Wet purpura heralds life threatening bleed"
      },
      {
        "id": 3,
        "text": "Severe ITP needs emergency splenectomy"
      },
      {
        "id": 4,
        "text": "Eltrombopag is used in patients who relapse"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer is c: Severe ITP needs emergency <span class=\"customMeta\" data-dictid=\"3c702f2ca816927771998e8ca552e1\">splenectomy</span> </strong></p>\n\n<ul>\n\t<li>Emergency <span class=\"customMeta\" data-dictid=\"3c702f2ca816927771998e8ca552e1\">splenectomy</span> is <em>not</em> first-line for severe ITP; initial management involves corticosteroids, IVIG, or anti-D immunoglobulin. <span class=\"customMeta\" data-dictid=\"3c702f2ca816927771998e8ca552e1\">Splenectomy</span> is considered only in <strong>chronic or refractory</strong> cases, not as an emergency measure.</li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p>Secondary ITP occurs due to <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> causes like SLE and infections like HIV, HCV</p>\n\n<p>Wet <span class=\"customMeta\" data-dictid=\"0acd34c758169277719644923511e5\">purpura</span> means <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> in oral <span class=\"customMeta\" data-dictid=\"31ae8f4dc51692777193069d92be37\">mucosa</span> and it heralds life-threatening <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> including <span class=\"customMeta\" data-dictid=\"cd42e0ddad1692777190d18c595ec5\">intracranial</span> hemorrhage.</p>\n\n<p>Eltrombopag is a <span class=\"customMeta\" data-dictid=\"b084a2ed0d1692777200e64e4a9b54\">thrombopoietin</span> <span class=\"customMeta\" data-dictid=\"9e4959f6f316927771978bb152d440\">receptor</span> <span class=\"customMeta\" data-dictid=\"7d8d28cda71692777180c89a3c86ce\">agonist</span> for chronic/refractory ITP to stimulate <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> production.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>The following feature is seen in which of the following conditions</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"252\" src=\"https://image.prepladder.com/content/7H7APgVGHtOIY8UqK8Em1755776045.png\" width=\"334\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Plasma cell dyscaria"
      },
      {
        "id": 2,
        "text": "Multiple lineage dysplasia"
      },
      {
        "id": 3,
        "text": "Myelofibrosis"
      },
      {
        "id": 4,
        "text": "Leukamoid reaction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer is a: <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">Plasma</span> cell dyscaria </strong></p>\n\n<p>The image shows rouleaux formation which is seen in multiple myeloma/ <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> cell dyscaria.</p>\n\n<p>In multiple myeloma, <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> <span class=\"customMeta\" data-dictid=\"a0e40688fa169277719572bdb48c92\">plasma</span> cells produce large amounts of <span class=\"customMeta\" data-dictid=\"b2b82438d6169277719287eb450079\">monoclonal</span> immunoglobulins.</p>\n\n<p>These <span class=\"customMeta\" data-dictid=\"7a1ae24f701692777187a7f60bbd9f\">excess</span> proteins coat the RBC surface, reducing the <span class=\"customMeta\" data-dictid=\"3adbec543616927772021797c392ea\">zeta</span> potential (normal <span class=\"customMeta\" data-dictid=\"f44c02b9791692777187aaeffe8302\">electrostatic</span> <span class=\"customMeta\" data-dictid=\"51207bf6d91692777197fff1a22545\">repulsion</span> between red cells), so the RBCs stick together in stacks \u2014 rouleaux formation.</p>",
    "question_images": [
      "https://image.prepladder.com/content/7H7APgVGHtOIY8UqK8Em1755776045.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 60-year-old man presents with progressive fatigue, early satiety, and weight loss over 3 months. Examination reveals massive splenomegaly. Laboratory findings: Hemoglobin: 8.5 g/dL, WBC: 3,000/\u00b5L, Platelets: 90,000/\u00b5L, Peripheral smear is shown below.. Which of the following is the most likely diagnosis?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"325\" src=\"https://image.prepladder.com/content/2VKOEkI0bs72mT1Itin91755775987.png\" width=\"444\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Chronic myeloid leukemia"
      },
      {
        "id": 2,
        "text": "Myelofibrosis"
      },
      {
        "id": 3,
        "text": "Polycyathemia vera"
      },
      {
        "id": 4,
        "text": "Aplastic anemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer is b: Myelofibrosis</strong></p>\n\n<p>P.smear finding of tear drop RBC + <span class=\"customMeta\" data-dictid=\"c219021c491692777189d289f1fc03\">immature</span> WBC in <span class=\"customMeta\" data-dictid=\"337d16dac5169277718474b97f6e4a\">circulation</span> + <span class=\"customMeta\" data-dictid=\"7644c201051692777194859abcd534\">pancytopenia</span> + <span class=\"customMeta\" data-dictid=\"b3eb52fe3b1692777199de8465eea8\">Splenomegaly</span> indicate diagnosis as Myelofibrosis. The reason for <span class=\"customMeta\" data-dictid=\"b3eb52fe3b1692777199de8465eea8\">splenomegaly</span> is <span class=\"customMeta\" data-dictid=\"0ba1f7edfa1692777187ae6f51e603\">extramedullary</span> hematopoiesis.</p>\n\n<p>The initial impression due to <span class=\"customMeta\" data-dictid=\"c219021c491692777189d289f1fc03\">immature</span> cells in <span class=\"customMeta\" data-dictid=\"337d16dac5169277718474b97f6e4a\">circulation</span> and massive <span class=\"customMeta\" data-dictid=\"b3eb52fe3b1692777199de8465eea8\">splenomegaly</span> and counts can cause misdiagnosis as CML. It does not have \u201ctear drop RBC\u201d.</p>\n\n<p>Option C will have high <span class=\"customMeta\" data-dictid=\"ad2073fe6716927771885f3c1ec652\">hemoglobin</span> and option D will have <span class=\"customMeta\" data-dictid=\"7644c201051692777194859abcd534\">pancytopenia</span> without organomegaly.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/2VKOEkI0bs72mT1Itin91755775987.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient diagnosed with Acute promyelocytic leukemia develops bleeding from body orifices. which of the following coagulogram report will be seen in this case</p>",
    "choices": [
      {
        "id": 1,
        "text": "PT increased, BT increased, aPTT increased"
      },
      {
        "id": 2,
        "text": "PT increased, BT normal, aPTT increased"
      },
      {
        "id": 3,
        "text": "PT normal, BT increased, aPTT increased"
      },
      {
        "id": 4,
        "text": "PT normal, BT normal , aPTT increased"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer is a: PT increased, BT increased, aPTT increased </strong></p>\n\n<p>Acute promyelocytic <span class=\"customMeta\" data-dictid=\"4521dbf4b91692777191a73002bf98\">leukemia</span> (APL / M3 AML) is notorious for triggering <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> DIC due to release of <span class=\"customMeta\" data-dictid=\"ff2094828c1692777196941a65e6eb\">procoagulant</span> substances/ <span class=\"customMeta\" data-dictid=\"e2af3f82171692777182faad22cbdb\">auer rods</span> from promyelocytes.</p>\n\n<p>In DIC: PT \u2191, aPTT \u2191 (due to <span class=\"customMeta\" data-dictid=\"58c17961c71692777184ab55a9c4df\">clotting</span> factor consumption) + Bleeding time \u2191 (due to thrombocytopenia/platelet dysfunction).</p>\n\n<p>This explains simultaneous prolongation of PT, aPTT, and BT in such a patient.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>All of the following are contraindications to use of the following instruments in hematology except?</p>\n\n<p><img alt=\"\" data-author=\"\" data-hash=\"\" data-license=\"\" data-source=\"\" data-tags=\"\" height=\"305\" src=\"https://image.prepladder.com/content/ykRmrrfiLIGStw9htHNL1755767840.png\" width=\"200\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Consumptive coagulopathy"
      },
      {
        "id": 2,
        "text": "Local site infection"
      },
      {
        "id": 3,
        "text": "Patient on warfarin"
      },
      {
        "id": 4,
        "text": "Low platelet count 40,000/uL"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer:</strong> <strong>D. Low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count</strong></p>\n\n<ul>\n\t<li>Low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count is often the reason for performing a <span class=\"customMeta\" data-dictid=\"5b9831f3aa169277718395d7361df6\">bone marrow</span> <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> to determine its cause, and with very low counts <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"cbb73554631692777200444a9ea263\">transfusion</span> can be given before the procedure.</li>\n</ul>\n\n<p><strong>Incorrect options </strong></p>\n\n<p>Option A and C: Absolute <span class=\"customMeta\" data-dictid=\"c9f33964851692777185b94f619862\">contraindication</span> until corrected because of uncontrolled <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> risk.</p>\n\n<p>Option B. Local site infection: Absolute <span class=\"customMeta\" data-dictid=\"c9f33964851692777185b94f619862\">contraindication</span> as <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> can disseminate infection beside increasing risk of osteomyelitis.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/ykRmrrfiLIGStw9htHNL1755767840.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A 5-year-old boy presents with petechiae over his legs, pallor and decreased urine output. His mother reports that he had bloody diarrhea a week ago. The examination shows mild edema and hypertension. Laboratory results reveal:Hemoglobin: 7.8 g/dL, platelet count: 65,000/\u00b5L, Creatinine: 2.5 mg/dL, Peripheral smear: schistocytes present. Which of the following is the most likely diagnosis?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Immune thrombocytopenic purpura"
      },
      {
        "id": 2,
        "text": "Hemolytic uremic syndrome"
      },
      {
        "id": 3,
        "text": "Henoch Scholein Purpura"
      },
      {
        "id": 4,
        "text": "Post-infectious-glomerulonephritis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer is b: Hemolytic <span class=\"customMeta\" data-dictid=\"7b92610b86169277720111ae27d1d8\">uremic</span> syndrome </strong></p>\n\n<ul>\n\t<li>Schistocytes with low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count and <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> failure ( <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> <span class=\"customMeta\" data-dictid=\"0096f2a7631692777201eb9f21d5a7\">urine</span> output + <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">Hypertension</span> and oedema ) favours diagnosis as HUS. <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">Platelet</span> count is low due to consumption in formation of microthrombi.</li>\n</ul>\n\n<p><strong>Incorrect options:</strong></p>\n\n<p><strong>A. Immune thrombocytopenic <span class=\"customMeta\" data-dictid=\"0acd34c758169277719644923511e5\">purpura</span> :</strong> Isolated <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> without anemia, schistocytes, or <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> failure; no preceding bloody diarrhea.</p>\n\n<p><strong>C. Thrombotic thrombocytopenic <span class=\"customMeta\" data-dictid=\"0acd34c758169277719644923511e5\">purpura</span> :</strong> Shares MAHA + <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> + <span class=\"customMeta\" data-dictid=\"b9356afdba16927771979d068c6587\">renal</span> signs but usually occurs in adults, with prominent neurological symptoms and no diarrheal prodrome.</p>\n\n<p><strong>D. Acute post-streptococcal glomerulonephritis:</strong> Causes <span class=\"customMeta\" data-dictid=\"660645b0c91692777188bbdf3fedff\">hematuria</span> and <span class=\"customMeta\" data-dictid=\"45372f6c361692777189ff3209e642\">hypertension</span> after strep infection, but no MAHA, thrombocytopenia, or schistocytes.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following causes non thrombocytopenic purpura?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "HUS"
      },
      {
        "id": 2,
        "text": "TTP"
      },
      {
        "id": 3,
        "text": "DIC"
      },
      {
        "id": 4,
        "text": "HSP"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer is d: HSP</strong></p>\n\n<p>HSP causes <span class=\"customMeta\" data-dictid=\"0acd34c758169277719644923511e5\">purpura</span> due to small-vessel <span class=\"customMeta\" data-dictid=\"6c7cd91ff41692777191606869024d\">leukocytoclastic vasculitis</span> with IgA deposition \u2014 <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count is normal (non-thrombocytopenic purpura).</p>\n\n<p>HUS, TTP, and DIC all cause <span class=\"customMeta\" data-dictid=\"0acd34c758169277719644923511e5\">purpura</span> with <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> because of <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> consumption in microthrombi or <span class=\"customMeta\" data-dictid=\"42f1e4deb8169277718412c0681a54\">coagulation</span> activation.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>An 18-year-old boy with severe hemophilia A (factor VIII activity <1%) is scheduled for wisdom tooth extraction. His past history includes multiple episodes of hemarthrosis but no inhibitors to factor VIII. Which of the following is the best strategy to prevent perioperative bleeding?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Administer desmopressin (DDAVP) before the procedure"
      },
      {
        "id": 2,
        "text": "Transfuse fresh frozen plasma 1 hour before surgery"
      },
      {
        "id": 3,
        "text": "Give prophylactic factor VIII concentrate to raise levels to \u226550% before the procedure"
      },
      {
        "id": 4,
        "text": "Start oral tranexamic acid only after the extraction"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C. Give <span class=\"customMeta\" data-dictid=\"a87d6eeedb16927771967434e19075\">prophylactic</span> factor VIII concentrate to raise levels to \u226550% before the procedure</strong></p>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>A. Desmopressin : </strong>Useful only in mild <span class=\"customMeta\" data-dictid=\"904d77ba8a16927771882396edef7c\">hemophilia</span> A or vWD by releasing <span class=\"customMeta\" data-dictid=\"2a7f0b780c1692777187fe83ec76b1\">endogenous</span> factor VIII and vWF</p>\n\n<p><strong>B. Fresh frozen plasma: </strong>Contains factor VIII but in low concentration and large volumes would be required</p>\n\n<p><strong>D. Tranexamic acid:</strong> Helps stabilize clots but does not replace deficient factor VIII; used only as adjunct</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>16-year-old girl presents with a history of heavy menstrual bleeding since menarche and frequent gum bleeding after brushing her teeth. She reports prolonged bleeding after a tooth extraction last year. There is no history of joint swelling or muscle hematomas. Examination reveals pallor but no petechiae or ecchymoses. Laboratory results show: Hemoglobin: 9.5 g/dL, Platelet count: 250,000/\u00b5L, PT: Normal, aPTT: Mildly prolonged, Bleeding time: Prolonged, Ristocetin cofactor assay: Decreased. Which of the following is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hemophilia A"
      },
      {
        "id": 2,
        "text": "Bernard\u2013Soulier syndrome"
      },
      {
        "id": 3,
        "text": "Von Willebrand disease"
      },
      {
        "id": 4,
        "text": "Glanzmann thrombasthenia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C. Von Willebrand disease</strong></p>\n\n<ul>\n\t<li>Mucocutaneous <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> with normal <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count, prolonged <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> time, mildly prolonged aPTT, and decreased <span class=\"customMeta\" data-dictid=\"94ec122d611692777197d287df7f88\">ristocetin</span> <span class=\"customMeta\" data-dictid=\"a416d7580c1692777184952da793d1\">cofactor</span> activity is classic for vWD due to <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"2b1931a185169277718065e3fa42dd\">adhesion</span> and <span class=\"customMeta\" data-dictid=\"10c83adb331692777197f775bec1aa\">reduced</span> factor VIII stability.</li>\n</ul>\n\n<p><strong>Incorrect options </strong></p>\n\n<p><strong>A. Hemophilia A \u2013</strong> Causes deep tissue/joint bleeds, not <span class=\"customMeta\" data-dictid=\"da3e60ac9a16927771933cdfe4327f\">mucocutaneous</span> bleeds with only aPTT prolonged</p>\n\n<p><strong>B. Bernard\u2013Soulier syndrome \u2013</strong> Shows <span class=\"customMeta\" data-dictid=\"fc28c74bb716927772003aee4aa43c\">thrombocytopenia</span> + giant platelets + absent <span class=\"customMeta\" data-dictid=\"94ec122d611692777197d287df7f88\">ristocetin</span> response; here <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count is normal.</p>\n\n<p><strong>D. Glanzmann <span class=\"customMeta\" data-dictid=\"1efc0b2c811692777200a0db5277dc\">thrombasthenia</span> \u2013</strong> Normal <span class=\"customMeta\" data-dictid=\"94ec122d611692777197d287df7f88\">ristocetin</span> test but absent <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> with ADP, collagen, epinephrine; not seen here.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>4-year-old boy presents with a history of easy bruising and frequent nosebleeds since infancy. His parents report prolonged bleeding after minor cuts, but there is no history of deep muscle or joint bleeds. Examination reveals petechiae and multiple ecchymoses over the extremities. Laboratory findings show:Platelet count: 250,000/\u00b5L, PT: Normal, aPTT: Normal, Bleeding time: Prolonged, Platelet aggregation absent with ADP, collagen, and epinephrine; normal with ristocetin. Which of the following is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Bernard\u2013Soulier syndrome"
      },
      {
        "id": 2,
        "text": "Hemophilia A"
      },
      {
        "id": 3,
        "text": "Glanzmann thrombasthenia"
      },
      {
        "id": 4,
        "text": "Von Willebrand disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer is c: Glanzmann <span class=\"customMeta\" data-dictid=\"1efc0b2c811692777200a0db5277dc\">thrombasthenia</span> </strong></p>\n\n<ul>\n\t<li>Mucocutaneous <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> with <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> defect: Absent with ADP, collagen, epinephrine, but normal with <span class=\"customMeta\" data-dictid=\"94ec122d611692777197d287df7f88\">ristocetin</span> is classic for GpIIb/IIIa deficiency.</li>\n</ul>\n\n<p><strong>Hack to remember </strong></p>\n\n<ul>\n\t<li><strong>GTA- RACE negative : G</strong>lanzmann <strong>T</strong>hrombasthenia has <strong>A</strong>ggregation with <strong>R</strong>istocein but <strong>ACE</strong> A: ADP , C: collagen, E: <span class=\"customMeta\" data-dictid=\"76baf6616a169277718738f8790ab9\">epinephrine</span> <strong>absent </strong></li>\n</ul>\n\n<p><strong>Incorrect Options:</strong></p>\n\n<p><strong>A. Bernard\u2013Soulier syndrome \u2013</strong> Low <span class=\"customMeta\" data-dictid=\"e7032bae7f1692777195d693722e54\">platelet</span> count + giant platelets + absent <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> with ristocetin.</p>\n\n<p><strong>B. Hemophilia A \u2013 </strong>Presents with deep tissue/joint bleeds + prolonged aPTT</p>\n\n<p><strong>D. Von Willebrand disease \u2013</strong> Causes <span class=\"customMeta\" data-dictid=\"da3e60ac9a16927771933cdfe4327f\">mucocutaneous</span> <span class=\"customMeta\" data-dictid=\"41e858bf2816927771836d46c619b9\">bleeding</span> but shows <span class=\"customMeta\" data-dictid=\"144d78fe4816927771852de984c62f\">defective</span> ristocetin-induced <span class=\"customMeta\" data-dictid=\"a00e90be0416927771803afbbf099b\">aggregation</span> and often prolonged aPTT</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Elective splenectomy is done in which of the following conditions?</p>\n\n<p>a. Beta thalassemia major with 50% increase in transfusion requirement over last one year</p>\n\n<p>b. Hereditary spherocytosis with severe anemia by 5 years of age</p>\n\n<p>c. Chronic ITP non responsive to steroids</p>\n\n<p>d. Myelopthisis</p>",
    "choices": [
      {
        "id": 1,
        "text": "a,b"
      },
      {
        "id": 2,
        "text": "a,c"
      },
      {
        "id": 3,
        "text": "a,b,c"
      },
      {
        "id": 4,
        "text": "a,b,c,d"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer is 3: a,b,c</strong></p>\n\n<p>Elective <span class=\"customMeta\" data-dictid=\"3c702f2ca816927771998e8ca552e1\">splenectomy</span> is done in:</p>\n\n<ol>\n\t<li>Hypersplenism seen with <span class=\"customMeta\" data-dictid=\"806eb8418c16927771822855b56695\">beta</span> <span class=\"customMeta\" data-dictid=\"baed0c93841692777200be26c8b9d2\">thalassemia</span> major</li>\n\t<li>HS with severe anaemia</li>\n\t<li>Chronic ITP not responding to medication</li>\n</ol>\n\n<p>Myelophthisis means <span class=\"customMeta\" data-dictid=\"5b9831f3aa169277718395d7361df6\">bone marrow</span> failure caused by replacement of normal <span class=\"customMeta\" data-dictid=\"d2e0ab499c169277718886ab5a46bf\">hematopoietic</span> tissue with <span class=\"customMeta\" data-dictid=\"458e050fdc16927771809854c9fd53\">abnormal</span> cells like metastatic cancers ,TB, Sarcoidosis and gaucher disease. It presents with <span class=\"customMeta\" data-dictid=\"7644c201051692777194859abcd534\">pancytopenia</span> and <span class=\"customMeta\" data-dictid=\"021f168f061692777191adee3319b4\">leukoerythroblastic</span> blood picture (nucleated RBCs + <span class=\"customMeta\" data-dictid=\"c219021c491692777189d289f1fc03\">immature</span> <span class=\"customMeta\" data-dictid=\"da88d7f2211692777193037caba514\">myeloid</span> cells in <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> smear).</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  }
];
        let quizName = '47 Platelet Disorders And Hematology Images';
        const quizFilename = '47-platelet-disorders-and-hematology-images-7d4567af.html';
        let hierarchy = ["PrepLadder", "qBank", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>