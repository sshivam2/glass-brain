<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neet 2021 Mini Test 8  (20 Questions) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 52-year-old patient presented with complaints of breathlessness and chest pain for 1 week. She is a known case of rheumatoid arthritis. Her chest radiograph is given below. Which of the following findings is not consistent with rheumatoid arthritis being the cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "High protein in pleural fluid"
      },
      {
        "id": 2,
        "text": "High glucose in the pleural fluid"
      },
      {
        "id": 3,
        "text": "High LDH in the pleural fluid"
      },
      {
        "id": 4,
        "text": "Presence of monocytes in the pleural fluid"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given chest radiograph shows a left-sided pleural effusion.&nbsp;<strong>High glucose</strong>&nbsp;is <strong>not&nbsp;consistent</strong> <strong>with</strong>&nbsp;<strong>pleural effusion due to rheumatoid arthritis</strong>, since <strong>low glucose is expected</strong> in the pleural fluid analysis of this patient.</p>\n<p>Pleural fluid analysis in a rheumatoid pleural effusion shows:</p>\n<ul>\n<li>Gross appearance: turbid; green-yellow color</li>\n<li><strong>pH &lt; 7.2</strong></li>\n<li><strong>WBC count: up to 20,000 cells/&mu;L, can be monocytes or neutrophils</strong></li>\n<li>Rheumatoid factor: positive</li>\n<li><strong>Glucose: low (&lt; 60 mg/dL)</strong></li>\n<li><strong>Cholesterol crystals present</strong></li>\n</ul>\n<p><strong>Rheumatoid pleural effusion </strong>is a type of <strong>exudative </strong>pleural effusion<strong>. Light&rsquo;s criteria</strong>&nbsp;are used to <strong>distinguish between exudative and transudative</strong> pleural effusions. An <strong>exudative</strong> pleural effusion <strong>satisfies at least one</strong> of the following criteria:</p>\n<ul>\n<li><strong>Pleural fluid protein / serum protein &gt; 0.5</strong></li>\n<li><strong>Pleural fluid LDH / serum LDH &gt; 0.6</strong></li>\n<li>Pleural fluid LDH more than 2/3rds of the upper limit of normal serum value</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/de1f48c54ed84b179c5ac8dc095159f0.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/898189c31ba749e29449e6daaefe0e20x1280x2558.JPEG"
    ]
  },
  {
    "text": "A patient who underwent septoplasty, complains of pressure over the nose and difficulty in breathing on postoperative day 1. Local examination revealed smooth, round, soft, and fluctuant swellings on either side of the septum. What is the next best step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Systemic antibiotics"
      },
      {
        "id": 2,
        "text": "Incision and drainage"
      },
      {
        "id": 3,
        "text": "High-resolution computerized tomography"
      },
      {
        "id": 4,
        "text": "Submucosal resection"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The next best step in the management of this patient with clinical features suggestive of <strong>septal hematoma</strong> is <strong>incision and</strong> <strong>drainage</strong>.<strong>&nbsp;</strong></p>\n<p>Septal hematoma refers to a collection of blood under the <strong>perichondrium</strong> or <strong>periosteum</strong> of the nasal septum. It may be caused due to <strong>trauma</strong>, septal <strong>surgery</strong> (as in this patient), or spontaneously in bleeding disorders.</p>\n<p>Patients usually present with <strong>bilateral nasal obstruction</strong>, <strong>pressure</strong> over the nasal bridge, or a <strong>frontal headache</strong>. On examination, smooth, round swellings, <strong>soft</strong> and <strong>fluctuant</strong> on palpation, can be seen on <strong>either side</strong> of the septum.</p>\n<p>All septal hematomas must be <strong>drained</strong> to prevent the formation of <strong>septal abscess</strong> or fibrosis leading to a permanently<strong> thickened septum</strong>. A small <strong>anteroposterior incision</strong>&nbsp;is made parallel to the nasal floor. It must be followed by <strong>nasal packing</strong>. Smaller hematomas can be aspirated using a wide gauge needle. Patients should thereafter be started on <strong>systemic antibiotics&nbsp;</strong>to prevent abscess formation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bb882abc165f4375a56b2110453e3b6cx593x599.PNG"
    ]
  },
  {
    "text": "A woman underwent transvaginal cerclage under general anesthesia. Propofol was used for induction and succinylcholine was used for anesthesia maintenance. Even after 6 hours after the procedure, there were no signs of neuromuscular function recovery. Later, her dibucaine number was found to be 20. Identify the enzyme defect for the given condition.",
    "choices": [
      {
        "id": 1,
        "text": "Acetylcholinesterase"
      },
      {
        "id": 2,
        "text": "Monoamine oxidase"
      },
      {
        "id": 3,
        "text": "Catechol-O-methyltransferase"
      },
      {
        "id": 4,
        "text": "Butyrylcholinesterase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the given clinical scenario of <strong>delayed recovery</strong> from a neuromuscular blockade by succinylcholine with <strong>dibucaine number 20</strong>, the defect is in<strong>&nbsp;</strong>the<strong> butyrylcholinesterase </strong>(pseudocholinesterase)<strong>&nbsp;</strong>enzyme. Dibucaine number 20 is seen in people with <strong>homozygous atypical</strong> butyrylcholinesterase which prolongs the action of succinylcholine to 4-8 hours.&nbsp;</p>\n<p><strong>Dibucaine number</strong>&nbsp;refers to the<strong>&nbsp;percentage </strong>of inhibition of<strong> pseudocholinesterase</strong>&nbsp;activity.&nbsp;Dibucaine is a local anesthetic that inhibits <strong>normal</strong> pseudocholinesterase activity by<strong> 80%</strong> but inhibits <strong>heterozygous</strong> <strong>atypical</strong> enzyme activity by&nbsp;<strong>40-60%</strong> and <strong>homozygous</strong> <strong>atypical</strong> enzyme activity by only<strong> 20%.</strong>&nbsp;Accordingly, the patient with normal pseudocholinesterase has a dibucaine number of 80, and the patients with atypical pseudocholinesterase will have a lesser dibucaine number.</p>\n<p><strong>Succinylcholine </strong>and <strong>mivacurium </strong>are metabolized by the enzyme<strong> pseudocholinesterase.</strong> Some conditions like liver disease, pregnancy, advanced age, renal failure, major burns, and oral contraceptives might lead to the minimal prolongation of neuromuscular paralysis.</p>\n<p>People with atypical pseudocholinesterase enzyme will have reduced clearance of succinylcholine and mivacurium over time, thus <strong>prolonging </strong>the <strong>recovery time</strong>. Patients with one normal and one abnormal pseudocholinesterase gene (<strong>heterozygous</strong>) will have blockade for <strong>20-30 minutes&nbsp;</strong>whereas patients with two abnormal genes (<strong>homozygous</strong>) can have blockade for up to <strong>4-8 hours</strong>.&nbsp;It is treated with continued mechanical ventilation and sedation until the muscle function comes back to normal.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Acetylcholinesterase</strong> metabolizes&nbsp;<strong>acetylcholine</strong> in the synaptic space.</p>\n<p>Options B and C- <strong>Monoamine oxidase</strong> and <strong>catechol-O-methyltransferases</strong> are the enzymes that metabolize <strong>norepinephrine.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with symptoms of fever, pharyngitis, and acute follicular conjunctivitis following his return from a summer camp. After a detailed workup, he was diagnosed with pharyngoconjunctival fever. What is the nature of the causative virus?",
    "choices": [
      {
        "id": 1,
        "text": "dsRNA enveloped virus"
      },
      {
        "id": 2,
        "text": "ssDNA non-enveloped virus"
      },
      {
        "id": 3,
        "text": "dsDNA non-enveloped virus"
      },
      {
        "id": 4,
        "text": "ssRNA nonenveloped virus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Pharyngoconjunctival fever is caused by <strong>adenovirus </strong>which is<strong>&nbsp;</strong>a <strong>non-enveloped</strong>, space-vehicle-shaped <strong>dsDNA virus</strong>.</p>\n<p><strong>Pharyngoconjunctival fever</strong> is an acute highly infectious illness with <strong>fever</strong>,&nbsp;<strong>pharyngitis</strong>, and&nbsp;<strong>acute follicular conjunctivitis</strong> with tender, <strong>enlarged preauricular adenopathy</strong>. The illness usually lasts for about 1-2 weeks followed by complete recovery. It is usually caused by <strong>serotypes</strong> <strong>3, 7&nbsp;</strong>and&nbsp;<strong>14</strong>. It occurs usually, as <strong>outbreaks, in schools, summer camps, </strong>and<strong> prisons</strong>.</p>\n<p>The following table shows various syndromes caused by adenoviruses and associated serotypes:</p>\n<table width=\"419\">\n<tbody>\n<tr style=\"height: 36px;\">\n<td style=\"height: 36px;\"><strong>Syndrome</strong></td>\n<td style=\"height: 36px;\"><strong>Principle serotypes</strong></td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px;\"><strong>Respiratory disease in children</strong></td>\n<td style=\"height: 18px;\"><strong>1, 2, 5, 6</strong></td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px;\">Sore throat, febrile cold, pneumonia</td>\n<td style=\"height: 18px;\">3, 4, 7, 14, 21</td>\n</tr>\n<tr style=\"height: 18px;\">\n<td style=\"height: 18px;\">ARD in military recruits</td>\n<td style=\"height: 18px;\">4, 7, 21</td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"height: 36px;\"><strong>Follicular (swimming pool) conjunctivitis</strong></td>\n<td style=\"height: 36px;\"><strong>3, 7</strong></td>\n</tr>\n<tr style=\"height: 36px;\">\n<td style=\"height: 36px;\">Epidemic keratoconjunctivitis (shipyard eye)</td>\n<td style=\"height: 36px;\">8, 19, 37</td>\n</tr>\n<tr style=\"height: 28.1278px;\">\n<td style=\"height: 28.1278px;\"><strong>Diarrhea</strong></td>\n<td style=\"height: 28.1278px;\"><strong>40, 41</strong></td>\n</tr>\n</tbody>\n</table>\n<p>Diagnosis is mainly clinical. Tissue culture, serodiagnosis, and polymerase chain reaction for detection of viral DNA may be used.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which layer of the cornea is affected in lattice corneal dystrophy?",
    "choices": [
      {
        "id": 1,
        "text": "Endothelium"
      },
      {
        "id": 2,
        "text": "Bowman layer"
      },
      {
        "id": 3,
        "text": "Stroma"
      },
      {
        "id": 4,
        "text": "Descemet membrane"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Stroma</strong> is affected in <strong>lattice corneal dystrophy.</strong></p>\n<p>The corneal dystrophies are a group of progressive, usually bilateral, variable corneal opacifying disorders, many of which are associated with decreased vision and discomfort. Based on layers of the cornea involved,\u00a0they are classified into epithelial, Bowman layer, stroma, and Descemet membrane and endothelial dystrophies.</p>\n<p><strong>Lattice corneal dystrophy</strong></p>\n<p><strong>Lattice dystrophy</strong> affects the <strong>stromal layer</strong> of the cornea. The classic form of lattice corneal dystrophy has an <strong>autosomal dominant</strong> inheritance and is caused due to a defect in the <strong>TGFB1 gene</strong>. It is characterized by the presence of <strong>recurrent corneal erosions</strong> at the end of the first decade of age. The blurring of vision usually occurs later.\u00a0</p>\n<p>On examination, <strong>a fine filamentous lattice</strong> that spares the periphery can be seen. It is associated with generalized <strong>stromal haze</strong> and <strong>reduced corneal sensation.</strong></p>\n<p>Histopathology will show the deposition of <strong>amyloid</strong>. These deposits stain with <strong>congo red stain</strong> and\u00a0exhibit <strong>green birefringence</strong> on a polarised microscope.</p>\n<p>It is treated by penetrating or deep lamellar keratoplasty.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4b90807c5e774a1980ea05d13da282c9x500x500.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4965b6e7e54648889acb86f045b4fc5ax500x500.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9c662b98985245efaef6799962dae410x499x499.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74331b4bf63b44ca8fef43225df9451ax800x533.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ecbc9f05b0d647a3b6666d217aaac3d8x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/085f9432630b4761be1cc41fbbdc3d41x500x500.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/adffa4775137436da53ae45bf3382bddx500x500.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4dce9156e2364d798e2fa493ee6296b5x500x500.JPEG"
    ]
  },
  {
    "text": "A 45-year-old man recently diagnosed with lung cancer presents with a worsening headache that is aggravated by stooping forward. On examination, he has facial and upper limb edema. His anterior abdominal wall appears as shown in the image with the arrow depicting the direction of subcutaneous venous flow. What is the most likely cause of his symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Inferior vena cava obstruction"
      },
      {
        "id": 2,
        "text": "Superior vena cava obstruction"
      },
      {
        "id": 3,
        "text": "Cranial metastasis"
      },
      {
        "id": 4,
        "text": "Tumor lysis syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario with\u00a0the image showing <strong>dilated</strong> <strong>tortuous</strong> superficial <strong>abdominal veins</strong> is suggestive of superior vena cava (<strong>SVC</strong>)<strong> syndrome </strong>seen due to superior vena cava (<strong>SVC</strong>)<strong> obstruction.</strong></p>\n<p><strong>Superior vena cava</strong> (SVC) syndrome is a clinical condition caused by the <strong>obstruction of the superior vena cava</strong>, which leads to impaired venous drainage from the head, neck, upper extremities, and upper torso. The most common cause is <strong>malignancy</strong> ( lung cancer, lymphomas, particularly non-Hodgkin lymphoma, and metastatic tumors). Non-malignant causes include <strong>thrombosis</strong> (caused by\u00a0central venous catheters, pacemakers, or implantable defibrillators),<strong> fibrosing mediastinitis</strong> (e.g., due to tuberculosis or histoplasmosis), and <strong>aortic aneurysm</strong> or mediastinal fibrosis.</p>\n<p>SVC syndrome is usually diagnosed clinically. Patients present with\u00a0</p>\n<ul>\n<li><strong>Facial puffiness</strong> and periorbital edema (worsens in the morning or when bending forward)</li>\n<li><strong>Jugular venous distension </strong>(JVD) and prominent veins on the chest wall</li>\n<li>Dyspnea, cough, hoarseness, and stridor (if trachea is compressed)</li>\n<li>Headache, dizziness, and confusion (due to cerebral venous congestion)</li>\n<li><strong>Edema</strong> and cyanosis of the upper limbs</li>\n</ul>\n<p>The image below shows the direction of subcutaneous venous flow in various conditions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/476ba28e5f0c4a53a8216a9036fb3ec8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e579333ee054f0f89aeadf7802274cax1280x4833.JPEG"
    ]
  },
  {
    "text": "During your rotation in the forensic medicine and toxicology department, you notice the specimen of a fetus with a  length of 16 cm. What is the age of the fetus likely to be?",
    "choices": [
      {
        "id": 1,
        "text": "5 months"
      },
      {
        "id": 2,
        "text": "3 months"
      },
      {
        "id": 3,
        "text": "4 months"
      },
      {
        "id": 4,
        "text": "2 months"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The age of the fetus in months, calculated using the <strong>Rule of Haase,&nbsp;</strong>is &radic;16 =<strong> 4 months</strong>.&nbsp;</p>\n<p>Rule of Haase&nbsp;enables the estimation of the <strong>age </strong>of the<strong> fetus </strong>in<strong> months</strong> from its&nbsp;<strong>crown-heel length </strong>(in cm) in the<strong> first 5 months.&nbsp;</strong>It is a rough method of calculating the age of the fetus. During the first five months of pregnancy, the <strong>square root of the length</strong> gives the approximate <strong>age </strong>of the <strong>fetus </strong>in<strong> months.</strong></p>\n<p><strong>Haase's Modification</strong> of Morisson's Law:</p>\n<p>During the <strong>last five months</strong>, the <strong>length</strong> of the fetus (in cm)<strong> divided </strong>by<strong> five</strong> gives the <strong>age </strong>in<strong> months.</strong></p>\n<p>Example - A fetus of length 40cm is likely to be 8 months old.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the stain used in the given preparation for demonstrating H. pylori?",
    "choices": [
      {
        "id": 1,
        "text": "Masson trichrome stain"
      },
      {
        "id": 2,
        "text": "Von kossa stain"
      },
      {
        "id": 3,
        "text": "Warthin-starry stain"
      },
      {
        "id": 4,
        "text": "Alcian blue stain"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given slide shows the GI mucosa stained with <strong>Warthin-Starry silver stain</strong>, demonstrating the bacilli (<em><strong>Helicobacter pylori).</strong></em></p>\n<p>Helicobacter pylori is a&nbsp;<strong>gram-negative rod</strong>&nbsp;and contains flagella. It is a risk factor for peptic ulcer disease, mucosa-associated lymphoid tissue lymphoma, and gastric adenocarcinoma. It causes gastric injury by releasing various virulence factors like&nbsp;<span class=\"s1\">&gamma;</span>-glutamyl transpeptidase (<strong>GGT)</strong>, cytotoxin-associated gene A (<strong>cagA)</strong>&nbsp;product, virulence components vacuolating toxin (vacA), and lipopolysaccharides.</p>\n<p>Important tests for the detection of H.Pylori are:</p>\n<ul>\n<li>Rapid urease test</li>\n<li>Histology</li>\n<li>Culture</li>\n<li>Serology</li>\n<li>Urea breath test</li>\n<li>Stool antigen test</li>\n</ul>\n<p>Other options:</p>\n<p><strong>Masson trichrome stain</strong> demonstrating pulmonary <strong>hypertensive arteriopathy</strong> is shown in the image below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/365a919c187e4e12abb2c4697eaf62f6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10236df214dc42dcb9781d69dc626b6dx1200x900.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b537551de2da4da889a63c5cf008e66bx1199x816.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/50b32812adb24f638f4cac6ad333de58x719x512.JPEG"
    ]
  },
  {
    "text": "A 42-year-old smoker presented at 28 weeks of gestation with worsening abdominal pain of a few hours duration. She had also had some vaginal bleeding within the past hour. She was found to have low-amplitude, high-frequency uterine contractions, and fetal heart rate measurement shows repetitive, late decelerations. Her uterus was tender and firm to palpation. What is the grade of placental abruption in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Grade 1"
      },
      {
        "id": 2,
        "text": "Grade 2"
      },
      {
        "id": 3,
        "text": "Grade 3"
      },
      {
        "id": 4,
        "text": "Grade 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario of a woman with vaginal bleeding, tachycardia, stable BP and&nbsp;<strong>fetal distress&nbsp;</strong>(Repetitive, late decelerations) is graded as<strong> grade 2 placental abruption.</strong></p>\n<p><strong>Page clinical classification of placental abruption</strong>:</p>\n<table style=\"width: 333px; height: 369px;\">\n<tbody>\n<tr>\n<td style=\"width: 94px;\"><strong>Features</strong></td>\n<td style=\"width: 79px;\"><strong>Grade 1</strong></td>\n<td style=\"width: 81px;\"><strong>Grade 2</strong></td>\n<td style=\"width: 83px;\"><strong>Grade 3</strong></td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Vaginal bleeding</td>\n<td style=\"width: 79px;\">Slight</td>\n<td style=\"width: 81px;\">Mild-moderate</td>\n<td style=\"width: 83px;\">Moderate-severe or concealed</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Uterus</td>\n<td style=\"width: 79px;\">Minimal tenderness</td>\n<td style=\"width: 81px;\">Tenderness is present</td>\n<td style=\"width: 83px;\">Marked tenderness</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Maternal shock</td>\n<td style=\"width: 79px;\">Pulse and BP maintained</td>\n<td style=\"width: 81px;\">Pulse increased and BP maintained</td>\n<td style=\"width: 83px;\"><strong>Shock</strong> is pronounced</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\">Maternal coagulopathy</td>\n<td style=\"width: 79px;\">Absent</td>\n<td style=\"width: 81px;\">Absent</td>\n<td style=\"width: 83px;\">May be present</td>\n</tr>\n<tr>\n<td style=\"width: 94px;\"><strong>Fetal condition</strong></td>\n<td style=\"width: 79px;\"><strong>Good</strong></td>\n<td style=\"width: 81px;\">Fetal <strong>distress</strong></td>\n<td style=\"width: 83px;\">Fetal <strong>death</strong></td>\n</tr>\n</tbody>\n</table>\n<p><strong>Grade 0</strong> presents with no clinical features and the diagnosis is made <strong>after delivery</strong> by inspecting the placenta. There is no grade 4 placental abruption.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old female patient presented to the clinic with a history of chronic diarrhea, bloating, weight loss, and poor appetite for the past several months. A trial of antibiotic treatment a couple of months ago produced no significant clinical improvement. Her pulse rate was 82 beats per minute, BP was 110/78 mm of Hg, and the temperature was 98.6F. Laboratory investigations revealed anemia. Duodenal biopsy of the patient showed crypt hyperplasia, villi atrophy, and CD8+ cells in lamina propria as shown below. What is the most likely diagnosis in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Environmental enteropathy"
      },
      {
        "id": 2,
        "text": "Celiac disease"
      },
      {
        "id": 3,
        "text": "Whipple's disease"
      },
      {
        "id": 4,
        "text": "Chronic pancreatitis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical presentation and the histopathological findings are suggestive of <strong>celiac disease.</strong></p>\n<p>Celiac disease is an <strong>autoimmune gluten-induced enteropathy. </strong>It is associated with&nbsp;<strong>HLA DQ2 and DQ8.</strong>&nbsp;The pathogenesis of celiac disease involves an inflammatory response to gluten and gliadin (gluten-derived peptide).&nbsp;In the small intestine, gliadin is deamidated by the tissue transglutaminase (tTG), an intestinal enzyme. The deamidated gliadin is more immunogenic and is&nbsp;presented to helper T cells which mediate mucosal inflammation and cause tissue damage.&nbsp;</p>\n<p>Microscopic findings on biopsy of the proximal small intestine will show <strong>villi atrophy</strong>, <strong>villi flattening</strong>, <strong>crypt hyperplasia</strong>, and <strong>increased intraepithelial T lymphocytes</strong>.</p>\n<p>Clinically, patients with celiac disease present with&nbsp;<strong>malabsorption</strong> <strong>syndrome</strong> with diarrhea, abdominal pain, bloating, chronic refractory anemia, and marked unintentional weight loss. Some patients may also present with <strong>d</strong><strong>ermatitis herpetiformis </strong>characterized by herpes-like vesicles that are caused due to the deposition of IgA at the tips of the dermal papillae.</p>\n<p><strong>Antiendomysial</strong> and <strong>anti-tissue transglutaminase </strong>(tTG) antibodies are found in serological studies. Symptoms can be reversed by a gluten-free diet.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Environmental enteropathy / tropical sprue</strong> is associated with tropical areas with poor sanitation. It is believed to be caused by one or more infectious agents that respond to antibiotics. Mucosa shows variable <strong>villous atrophy.</strong></p>\n<p>Option C- <strong>Whipple's disease</strong> is a multisystemic disease caused by T.whipplei. Small intestine biopsy shows, <strong>PAS-positive macrophages.</strong></p>\n<p>Option D- <strong>Chronic pancreatitis&nbsp;</strong>affects the phase of&nbsp;intraluminal digestion&nbsp;is affected in which proteins, carbohydrates, and fats are broken down into forms suitable for absorption. These patients have <strong>fat malabsorption that presents as&nbsp;steatorrhea.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dfd21a90571a4165ba488311faa7732c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 22-year-old woman presents with a swelling in her vagina. It is usually not painful but is troublesome during intercourse. On examination, a tender shiny swelling with well-defined margins is observed on the lateral vaginal wall. It is non-reducible and does not have any rugosities. Cough impulse is absent. The image of the swelling is given below. What causes this swelling?",
    "choices": [
      {
        "id": 1,
        "text": "Traumatic implantation of epidermal cells"
      },
      {
        "id": 2,
        "text": "Prolapse of urinary bladder into vagina"
      },
      {
        "id": 3,
        "text": "Obstruction of Bartholin gland"
      },
      {
        "id": 4,
        "text": "Cystic remnant of Wolffian duct"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario is typical of <strong>Gartner's cyst</strong>. It arises from Gartner's duct, which is a <strong>remnant of the Wolffian duct</strong> in adults.</p>\n<p>It is typically an asymptomatic cyst that is found on the lateral wall of the vagina.\u00a0Symptoms, if present include\u00a0<strong>dyspareunia</strong>, vaginal <strong>pain,</strong> and <strong>difficulty inserting tampons</strong>. Examination findings include a <strong>tense</strong> swelling that is palpable or seen to bulge from beneath the vaginal wall.</p>\n<p>Management involves excision or marsupialization of cyst in symptomatic cases</p>\n<p>Other options</p>\n<p>Option A - <strong>Epidermoid cysts</strong> (or epidermal inclusions) are <strong>skin-colored</strong> round-oval cysts commonly found on the vulva. It is caused due to <strong>traumatic implantation of epidermal cells</strong> into deep tissues or due to plugged pilosebaceous units.</p>\n<p>Option B - <strong>Cystocele</strong> is the <strong>prolapse</strong> of the <strong>urinary bladder</strong> into the vagina. It appears as a reducible swelling with ill-defined margins, rugosities, and a cough impulse. It is often associated with urinary symptoms.</p>\n<p>Option C - Bartholin glands produce mucus for the lubrication of the vulva and vagina. <strong>Obstruction</strong> of this gland leads to <strong>Bartholin cyst</strong>. It is identified by its anatomic location, i.e.\u00a0<strong>lower medial labia majora</strong> or <strong>lower vestibular area</strong>. It is usually asymptomatic but becomes painful when infected.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b0b23d7a439b4b0d8f480cdd88989612.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Cyanosis with increased pulmonary blood flow would be the feature of a patient with:",
    "choices": [
      {
        "id": 1,
        "text": "Ebstein's anomaly"
      },
      {
        "id": 2,
        "text": "Tricuspid atresia"
      },
      {
        "id": 3,
        "text": "Persistent truncus arteriosus"
      },
      {
        "id": 4,
        "text": "Ventricular septal defect"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Among the given options, a patient with\u00a0<strong>truncus arteriosus</strong> would be\u00a0<strong>cyanotic</strong>\u00a0with <strong>increased pulmonary blood flow</strong>.</p>\n<p>Cyanotic congenital heart diseases can be broadly classified based on pulmonary blood flow:</p>\n<table style=\"width: 364.517px;\">\n<tbody>\n<tr style=\"height: 18px;\">\n<td style=\"width: 246px; height: 18px;\"><strong>Decreased pulmonary blood flow</strong></td>\n<td style=\"width: 269.517px; height: 18px;\"><strong>Increased pulmonary blood flow</strong></td>\n</tr>\n<tr style=\"height: 163.6px;\">\n<td style=\"width: 246px; height: 163.6px;\">\n<p>Tetrology of Fallot</p>\n<p>Pulmonary atresia\u00a0with an intact ventricular septum</p>\n<p>Ebstein's anomaly</p>\n<p>Tricuspid atresia\u00a0</p>\n<p>Transposition of the great vessels with VSD and pulmonary stenosis</p>\n</td>\n<td style=\"width: 269.517px; height: 163.6px;\">\n<p>Transposition of the great vessels with VSD or PDA</p>\n<p>Total anomalous\u00a0pulmonary venous return (TAPVR)</p>\n<p>Truncus arteriosus</p>\n<p>Hypoplastic left\u00a0heart syndrome (HLHS)</p>\n<p>\u00a0</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><br />Atrial and ventricular septal defects are also associated with increased pulmonary blood flow. However, they are acyanotic.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following pairs is an example of epimers?",
    "choices": [
      {
        "id": 1,
        "text": "D-glucose and L-glucose"
      },
      {
        "id": 2,
        "text": "Glucose and mannose"
      },
      {
        "id": 3,
        "text": "d-glucose and l-fructose"
      },
      {
        "id": 4,
        "text": "\u03b1-glucopyranose and \u03b2-glucopyranose"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Glucose </strong>and<strong> mannose</strong> are examples of <strong>epimers.</strong></p>\n<p>Isomers differing as a result of variations in the configuration of the &mdash;OH and &mdash;H on <strong>carbon atoms 2, 3,</strong> or<strong> 4</strong> of glucose are known as epimers.<span class=\"Apple-converted-space\">&nbsp;They differ only in one carbon atom. For example,</span></p>\n<ul>\n<li><span class=\"Apple-converted-space\"><strong>Mannose</strong> is an epimer of <strong>glucose</strong> at carbon <strong>2</strong></span></li>\n<li><span class=\"Apple-converted-space\"><strong>Galactose</strong> is an epimer of <strong>glucose</strong> at carbon <strong>4</strong></span></li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7938bcd7de9345289759b1ac536cd47ax1280x1063.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ebef85ed9517496cb0837a89233cc031x1280x1064.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fed0adf78bf24dd5ab77337db2071927x1280x1063.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/14a3c653ace047679f0bd8c313597288x1280x1063.JPEG"
    ]
  },
  {
    "text": "A young man is brought to the emergency department following a road traffic accident. He was driving the car when the accident occurred. On examination, it is noted that the injured leg is shortened. The image of the pelvis radiograph is shown below. Which of the following nerve is most commonly damaged in the given condition?",
    "choices": [
      {
        "id": 1,
        "text": "Sciatic nerve"
      },
      {
        "id": 2,
        "text": "Posterior femoral cutaneous nerve"
      },
      {
        "id": 3,
        "text": "Inferior gluteal nerve"
      },
      {
        "id": 4,
        "text": "Femoral nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above radiograph shows that the <strong>femoral head</strong> of the left hip is <strong>displaced upwards and laterally</strong>, and the affected limb is in <strong>adduction.</strong> Also, the&nbsp;<strong>lesser trochanter is obscured</strong>. These features indicate&nbsp;<strong>posterior dislocation </strong>of the<strong> left hip&nbsp;joint</strong>. The <strong>nerve&nbsp;the most commonly injured</strong> in this type of dislocation is the <strong>sciatic nerve</strong>.</p>\n<p>Posterior hip dislocation occurs when the knee of the passenger strikes the <strong>dashboard.</strong>&nbsp;The affected leg is <strong>shortened</strong>, and lies in an <strong>adducted,</strong> <strong>internally rotated</strong> and slightly flexed position.</p>\n<p>Imaging shows the following features:</p>\n<ul>\n<li><strong>Upward dislocation</strong>&nbsp;of the femoral head</li>\n<li>The size of the <strong>femoral head</strong> appears <strong>smaller</strong> compared to the unaffected side</li>\n<li><strong>Adduction</strong> of the affected limb.</li>\n<li>The <strong>lesser trochanter</strong> may <strong>not</strong> be <strong>visible</strong> due to the internal rotation of the affected leg</li>\n</ul>\n<p>Treatment- A pure hip dislocation should be <strong>reduced</strong> as early as possible to reduce the risk of osteonecrosis and subsequent osteoarthritis. Important <strong>maneuvers</strong> to reduce posterior hip dislocation are:</p>\n<ul>\n<li>Rochester method</li>\n<li>East Baltimore lift</li>\n<li>Allis</li>\n<li>Bigelow</li>\n<li>Stimson</li>\n</ul>\n<p><strong>Complications</strong> of posterior hip dislocation are:</p>\n<ul>\n<li>Injury to the sciatic nerve</li>\n<li>Injury to the superior gluteal artery</li>\n<li>Osteonecrosis of the femoral head</li>\n<li>Secondary osteoarthritis</li>\n<li>Myositis ossificans</li>\n<li>Recurrent instability of the reduced dislocation</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/26dcf889047d472f963f646e034e9f52.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old male is posted for elective splenectomy in your unit. He is anxious regarding the surgery. You are asked to explain the procedures to him and obtain written informed consent. With regards to the possible complications that can happen post-splenectomy, which of the following statements is/are wrong?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4, 5"
      },
      {
        "id": 2,
        "text": "2, 3, 4"
      },
      {
        "id": 3,
        "text": "1 and 4"
      },
      {
        "id": 4,
        "text": "1, 2, 3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Statements 1, 2, and 3 are wrong</p>\n<p><strong>Left lower lobe atelectasis</strong> is the <strong>most common complication after</strong> <strong>open splenectomy</strong> while OPSI (Overwhelming post-splenectomy infection)is the <strong>most common fatal late complication</strong> of splenectomy.</p>\n<p>Infections by capsulated organisms like pneumococci are very common but these usually occur in the <strong>first 2-3 years</strong> after surgery.\u00a0</p>\n<p><strong>Adult</strong> individuals are vaccinated with the\u00a0<strong>Pneumococcal PPV 23</strong> vaccine and not the 7 valent vaccine. These vaccines should be given<strong> 2 weeks before elective surgery.</strong></p>\n<p>Following splenectomy, the patients are more susceptible to infections with\u00a0<strong>capsulated</strong>\u00a0organisms. The commonly involved organisms are:</p>\n<ul>\n<li><strong><em>Streptococcus pneumoniae\u00a0</em></strong>(most common)</li>\n<li class=\"p1\"><em>Neisseria meningitides</em></li>\n<li class=\"p1\"><em>Haemophilus influenzae</em></li>\n<li class=\"p1\"><em>Escherichia coli</em></li>\n</ul>\n<p>Currently, the standard of care for post-splenectomy patients includes\u00a0<strong>immunization</strong>\u00a0with the following w<strong>ithin 2 weeks of splenectomy</strong>\u00a0if the patient did not receive these before surgery:</p>\n<ul>\n<li><strong>Polyvalent pneumococcal vaccine (PPV23)</strong></li>\n<li><em><strong>Haemophilus influenzae\u00a0</strong></em><strong>type b conjugate vaccine</strong></li>\n<li><strong>Meningococcal polysaccharide vaccine</strong></li>\n</ul>\n<p>Thrombocytosis occurs following splenectomy, particularly in patients with myeloproliferative disorders (e.g., chronic myeloid leukemia [CML], polycythemia vera, essential thrombocytosis). It can result in the thrombosis of the mesenteric, portal, and renal veins and can be life-threatening because it can lead to hemorrhage and thromboembolism. An <strong>immediate complication specific to splenectomy</strong> includes <strong>hemorrhage resulting from a slipped ligature.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with neonatal hypotonia, tachypnoea, abnormal eye movements, and mental retardation. On axial imaging, the fourth ventricle is abnormally shaped with a \u2018batwing appearance\u2019 as given below. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rhombencephalosynapsis"
      },
      {
        "id": 2,
        "text": "Pontine tegmental cap dysplasia"
      },
      {
        "id": 3,
        "text": "Joubert syndrome"
      },
      {
        "id": 4,
        "text": "Dandy walker malformation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario and the image showing the<strong> Molar tooth sign</strong> suggest the diagnosis of<strong> Joubert syndrome. The image</strong>&nbsp;shows an<strong>&nbsp;</strong>axial T2 weighted image at the level of superior cerebellar peduncles demonstrating the&nbsp;<strong>molar tooth sign</strong>.</p>\n<p><strong>Joubert syndrome:</strong></p>\n<p>These are a group of recessive <strong>congenital ataxia</strong> disorders in which typically there is</p>\n<ul>\n<li>Neonatal hypotonia</li>\n<li>Tachypnoea</li>\n<li>Abnormal eye movements</li>\n<li>Mental retardation associated with a particular pattern of cerebellar dysgenesis with a <strong>molar tooth-type malformation</strong> and vermis hypoplasia</li>\n</ul>\n<p><strong>MRI features :</strong></p>\n<ul>\n<li>The cardinal feature is the presence of a <strong>molar tooth</strong>&nbsp;<strong>sign</strong> which is created by a <strong>combination of</strong>\n<ul>\n<li><strong>Midbrain hypoplasia</strong> with an</li>\n<li><strong>Abnormally deep interpeduncular fossa</strong> and</li>\n<li><strong>A failure of the superior cerebellar peduncles</strong> to <strong>decussate</strong> across the midline.</li>\n</ul>\n</li>\n<li>On axial imaging, the <strong>fourth ventricle</strong> is abnormally shaped with a <strong>batwing appearance</strong></li>\n<li>Cerebellar hypoplasia</li>\n<li>Midline vermian cleft</li>\n<li>Dysplastic small vermis</li>\n<li>The midbrain is small</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8de790473815413ba4f7c0751e25a729.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a histone deacetylase inhibitor that can be used in the treatment of cutaneous T - cell lymphoma?",
    "choices": [
      {
        "id": 1,
        "text": "Panobinostat"
      },
      {
        "id": 2,
        "text": "Alemtuzumab"
      },
      {
        "id": 3,
        "text": "Denileukin"
      },
      {
        "id": 4,
        "text": "Vorinostat"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Vorinostat&nbsp;</strong>is a <strong>histone deacetylase</strong> (HDAC)<strong> inhibitor</strong> that can be used in the treatment of<strong> cutaneous T - cell lymphoma</strong>.<strong>&nbsp;</strong></p>\n<p>It is indicated for use in patients with cutaneous T - cell lymphoma who have progressive, persistent, or recurrent disease on or following two systemic therapies.</p>\n<p>HDAC are enzymes that catalyze deacetylation reactions of acetylated lysine amino acids in histones leading to the <strong>transcriptional activation</strong> of cellular genes.&nbsp;&nbsp;</p>\n<p>Overexpression of HDAC can be found in some cancers. Thus HDAC inhibitors can cause <strong>differentiation</strong> with the emergence of a more normal cellular phenotype or cause <strong>cell cycle arrest</strong> with an expression of endogenous regulators of cell cycle progression.&nbsp;<strong>Romidepsin</strong> is also an HDAC&nbsp; inhibitor that can be used to treat cutaneous or peripheral T - cell lymphoma.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Panobinostat</strong>&nbsp;is an HDAC inhibitor that is indicated for the treatment of patients with <strong>multiple myeloma</strong> who have received at least 2 prior regimens, including bortezomib and an immunomodulatory agent.</p>\n<p>Option B: <strong>Alemtuzumab</strong>&nbsp;is&nbsp;a CD52-directed cytolytic monoclonal antibody indicated for the treatment of patients with relapsing forms of multiple sclerosis and for treating B-cell CLL.</p>\n<p>Option C:<strong> Denileukin difitox</strong> is a CD25-directed cytotoxin indicated for the treatment of patients with persistent or recurrent <strong>cutaneous T-cell lymphoma</strong> whose malignant cells express the CD25 component of the IL-2 receptor. It is a <strong>fusion protein of diphtheria toxin </strong>which&nbsp;<strong>inhibits protein synthesis.</strong>&nbsp;It is commercially unavailable at present.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following would not favor a diagnosis of pulmonary arterial hypertension?",
    "choices": [
      {
        "id": 1,
        "text": "Vascular pruning on chest X-ray"
      },
      {
        "id": 2,
        "text": "Increased pulmonary capillary wedge pressure (PCWP)"
      },
      {
        "id": 3,
        "text": "Right axis deviation on electrocardiography"
      },
      {
        "id": 4,
        "text": "Palpable second heart sound at the left sternal border"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Increased pulmonary capillary wedge pressure (PCWP) will not favor a diagnosis of pulmonary arterial hypertension (PAH). Increased PCWP will be seen in post-capillary pulmonary hypertension (PH).</p>\n<p>Pulmonary hypertension is broadly classified into:</p>\n<ul>\n<li><strong>Pre-capillary PH or PAH</strong>\n<ul>\n<li>Involves the pulmonary arterial system</li>\n</ul>\n</li>\n<li><strong>Post-capillary PH</strong>\n<ul>\n<li>Involves the pulmonary venous system</li>\n<li><strong>PCWP \u2265\u00a015 mmHg\u00a0</strong>and</li>\n<li>Pulmonary vascular resistance<strong>\u00a0(PVR) &lt; 3 Wood units</strong>.</li>\n</ul>\n</li>\n</ul>\n<p><strong>Signs and symptoms of PAH</strong></p>\n<ul>\n<li>Dyspnoea and/or fatigue</li>\n<li>Elevated JVP</li>\n<li>Loud P2 (second heart sound), palpable in left second intercostal space</li>\n<li>Right-sided S3 or S4</li>\n<li>Murmurs in PAH\n<ul>\n<li>Tricuspid regurgitation - <strong>Holosystolic</strong> murmur</li>\n<li>Pulmonary stenosis - <strong>Ejection systolic</strong> murmur</li>\n<li>Pulmonary regurgitation - <strong>End diastolic</strong> murmur (Graham-Steel murmur) in severe PAH</li>\n</ul>\n</li>\n<li>Right heart failure in severe PAH - Peripheral edema, ascites, hepatomegaly.</li>\n</ul>\n<p><strong>Investigations in PAH</strong></p>\n<ul>\n<li>Chest X-ray\n<ul>\n<li>Enlargement of central pulmonary arteries</li>\n<li>Rapid tapering of vessels known as <strong>vascular pruning</strong></li>\n<li>Right ventricular enlargement.</li>\n</ul>\n</li>\n<li>ECG\n<ul>\n<li>Features of RV strain such as<strong> right axis deviation</strong> and right ventricular hypertrophy.</li>\n</ul>\n</li>\n<li>Pulmonary function tests<br />\n<ul>\n<li><strong>Reduction in DLCO</strong></li>\n<li>Normal FEV1 and FVC if no underlying lung disease.</li>\n</ul>\n</li>\n<li>Definitive diagnosis of PAH is by cardiac catheterisation and will have all of the following:\n<ul>\n<li>Mean pulmonary arterial pressure, mPAP &gt; 25mmHg (or &gt;20 mmHg at rest)</li>\n<li>PVR \u2265\u00a03 Wood units</li>\n<li>PCWP \u2264 15 mmHg.\u00a0</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d0d90317dfff4883b8b59ce3d5af37b5x1280x1298.JPEG"
    ]
  },
  {
    "text": "An elderly man was brought to the hospital with complaints of rapid heartbeat, increased sweating, and dizziness. His ECG is shown below and his BP is 126/82 mm of Hg. The doctor asked him to lie down and turn his head to the left side. He then applied pressure on the right carotid artery just below the angle on the mandible, which lowered the patient's heart rate. Which among the following is the afferent nerve for the manoeuvre performed by the doctor?",
    "choices": [
      {
        "id": 1,
        "text": "Vagus nerve"
      },
      {
        "id": 2,
        "text": "Cranial accessory nerve"
      },
      {
        "id": 3,
        "text": "Glossopharyngeal nerve"
      },
      {
        "id": 4,
        "text": "Trigeminal nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The ECG is suggestive of\u00a0paroxysmal supraventricular tachycardia (PSVT). As the patient is stable, the doctor has performed a carotid sinus massage to slow the heart rate and to convert to sinus rhythm. This stimulates the <strong>baroreceptor reflex</strong>, whose <strong>afferent</strong> nerve is the <strong>glossopharyngeal nerve.\u00a0</strong></p>\n<p>Features suggestive of PSVT are:</p>\n<ul>\n<li>Narrow complex tachycardia at 150 bpm</li>\n<li>No visible P waves</li>\n<li>Pseudo R\u2019 waves in lead aVR due to retrograde atrial activation</li>\n</ul>\n<p><strong>Carotid sinus massage:</strong></p>\n<p><strong>Procedure</strong>- It is performed with the patient supine and the head turned slightly away from the side being stimulated. Before performing massage the doctor should always auscultate to check for the presence of <strong>carotid bruit</strong>. If bruit is present, it should not be performed. The area of the carotid sinus, at the artery\u2019s bifurcation, is palpated with two fingers at the angle of the jaw until a good pulse is felt. A minimal amount of pressure is applied over the carotid sinus. If there is no effect, a side-to-side or rotating motion of the fingers over the site is performed for up to 5 seconds. ECG should be performed to assess the response.</p>\n<p><strong>Mechanism</strong>- Pressure over the carotid sinus stimulates the baroreceptors. These\u00a0signals are transmitted through small <strong>Hering\u2019s nerves</strong> to the <strong>glossopharyngeal nerves</strong> and then to the <strong>nucleus tractus solitarius (NTS)</strong> in the medulla. These signals<strong> inhibit</strong> the <strong>vasoconstrictor</strong> center of the medulla and <strong>excite</strong> the <strong>vagal</strong> parasympathetic centre. The <strong>stimulation of the vagus</strong> results in a <strong>slowing </strong>of<strong> impulse generation </strong>in the <strong>SA node </strong>and a\u00a0<strong>slowing </strong>of <strong>conduction </strong>velocity in the\u00a0<strong>AV node.\u00a0\u00a0</strong></p>\n<p>Other vagal maneuvers which are used to treat cardiac arrhythmias and conduction abnormalities are,</p>\n<ul>\n<li><strong>Valsalva manoeuvre- </strong>the patient is placed in a supine or semirecumbent position and instructed to exhale forcefully against a closed glottis. The patient should maintain this strain for 10-15 seconds and then start breathing normally. It decreases the heart rate and can be used in paroxysmal supraventricular tachycardia.</li>\n<li><strong>Diving reflex</strong>- A patient holds his breath and then immerses his face in the water at a temperature of 10-20 degrees Celsius. It results in bradycardia and can be used to terminate paroxysmal supraventricular tachycardia.\u00a0</li>\n</ul>\n<p>Note- <strong>Vagus nerve</strong> is an afferent for the impulses from the\u00a0<strong>aortic baroreceptors</strong> in the arch of the aorta.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb84773b563b4299bc37f215b6f46326.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The physician explains the complications of diabetes and the need for compliance in simple terms to his illiterate patient. This is an example of which level of communication?",
    "choices": [
      {
        "id": 1,
        "text": "Emotional plane"
      },
      {
        "id": 2,
        "text": "Cultural plane"
      },
      {
        "id": 3,
        "text": "Intellectual plane"
      },
      {
        "id": 4,
        "text": "Scientific plane"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is an example of communication on an <strong>intellectual</strong> <strong>plane</strong>.</p>\n<p>Communication on an <strong>intellectual plane </strong>involves\u00a0giving <strong>empathetic, easy-to-understand explanations</strong> of their conditions and helping the patients develop insight into their ailments and their treatment plans. The doctor should take into account the fact that the patient's intellectual understanding may not be at the same level and, hence, put it in simple easy-to-understand terms.</p>\n<p>For a successful <strong>doctor-patient</strong> relationship, a doctor must have in his/her regard communication on the following levels:</p>\n<ul>\n<li>Communication on an <strong>emotional plane: </strong> Listening with empathy,\u00a0building rapport, and ensuring openness and trust from the patient is part of this.\n<ul>\n<li>Example- Dr. X lending a sympathetic ear to the complaints made by the 84-year-old geriatric patient on his lingering backache is the emotional plane.</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>Communication on a <strong>cultural plane:</strong> To understand the community to which the patient belongs and his/her cultural and lifestyle factors that may influence health and disease and to advise in terms that the patient would understand.\u00a0\n<ul>\n<li>Example- Dr. A, the hypertension clinic physician, making his dietary advice in terms that fit the already existing lifestyle pattern in that area is an example of understanding the cultural plane.</li>\n</ul>\n</li>\n</ul>\n<p>There is no such plane as the scientific plane in communication.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Neet 2021 Mini Test 8  (20 Questions)';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>