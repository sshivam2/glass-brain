<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Physiology Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In which stage of sleep are K complex and sleep spindles seen?",
    "choices": [
      {
        "id": 1,
        "text": "REM"
      },
      {
        "id": 2,
        "text": "Stage 1 NREM"
      },
      {
        "id": 3,
        "text": "Stage 2 NREM"
      },
      {
        "id": 4,
        "text": "Stage 3 NREM"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Stage 2 of NREM sleep is marked by the appearance of sinusoidal waves called <strong>sleep spindles </strong>(12\u201314 Hz) and occasional high-voltage biphasic waves called <strong>K complexes.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/327aadf2122f475f88923e4013f5aad5x853x448.PNG"
    ]
  },
  {
    "text": "All are true except that ____.",
    "choices": [
      {
        "id": 1,
        "text": "PCT is permeable to water"
      },
      {
        "id": 2,
        "text": "Descending limb of loop of henle is permeable to water"
      },
      {
        "id": 3,
        "text": "Thick ascending limb is permeable to water"
      },
      {
        "id": 4,
        "text": "Distal tubule is permeable to water"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The ascending limb is always impermeable to H<sub>2</sub>O.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true?",
    "choices": [
      {
        "id": 1,
        "text": "Type A\u03b1 fibre carry information related to pressure"
      },
      {
        "id": 2,
        "text": "Type A\u03b2 fibre has the largest diameter"
      },
      {
        "id": 3,
        "text": "Type A\u03a5  fibre is unmyelinated"
      },
      {
        "id": 4,
        "text": "Type C fibre has the slowest conduction velocity"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Type C fibers</strong> are the small <strong>unmyelinated</strong> nerve fibers that conduct impulses at <strong>low velocities.</strong></p>\n<p>Greater the diameter of a given nerve fiber, the greater its speed of conduction.</p>\n<p>The nerve fibers are divided into types A (myelinated), B (myelinated), and C(Unmyelinated). The type A fibers are further subdivided into \u03b1, \u03b2, \u03b3, and \u03b4 fibers.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A nurse in the pulmonology clinic administered a test using the following instrument. Which of the following parameters cannot be measured?",
    "choices": [
      {
        "id": 1,
        "text": "Tidal volume"
      },
      {
        "id": 2,
        "text": "Residual volume"
      },
      {
        "id": 3,
        "text": "Vital capacity"
      },
      {
        "id": 4,
        "text": "Inspiratory reserve capacity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given image shows <strong>spirometry</strong>. All of the given parameters can be measured by a spirometer except <strong>residual volume.</strong></p>\n<p><strong>Residual volume is measured by:</strong></p>\n<ul>\n<li>N<sub>2</sub> washout method</li>\n<li>Helium-dilution method</li>\n<li>Body plethysmography</li>\n</ul>\n<p>Other parameters which cannot be measured by spirometry are:</p>\n<ul>\n<li><strong>Functional residual capacity</strong></li>\n<li><strong>Total lung capacity</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/65cd734d651846b98906f3eaeae2f761.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Haldane effect is _______",
    "choices": [
      {
        "id": 1,
        "text": "Binding of O2 to Hb favours release of CO2"
      },
      {
        "id": 2,
        "text": "Binding of CO2 to Hb favours release of O2"
      },
      {
        "id": 3,
        "text": "HCO3- leaving RBC in exchange for Cl-"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Binding of O<sub>2 </sub>with hemoglobin tends to displace CO<sub>2 </sub></strong>from the blood. This effect is called the <strong>Haldane effect. </strong>(Remember - Haldane effect occurs in lungs and causes&nbsp;left shift of O2-Hb dissociation curve)</p>\n<p><strong>Haldane Effect</strong></p>\n<ul>\n<li>Binding of O<sub>2 </sub>with hemoglobin tends to displace CO<sub>2 </sub>from the blood. This effect, called the Haldane effect, is important in promoting CO<sub>2</sub> transport.</li>\n<li>The Haldane effect results from the simple fact that the combination of O<sub>2</sub> with hemoglobin in the lungs causes the hemoglobin to become a stronger acid. This displaces CO<sub>2</sub> from the blood and into the alveoli.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Insulin secretion is normally stimulated by_____",
    "choices": [
      {
        "id": 1,
        "text": "GLP 1"
      },
      {
        "id": 2,
        "text": "GLP 2"
      },
      {
        "id": 3,
        "text": "VIP"
      },
      {
        "id": 4,
        "text": "Adrenergic receptor"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Insulin secretion is normally stimulated by <strong>GLP-1</strong>.</p>\n<div class=\"page\" title=\"Page 946\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Glucagon-like peptide&ndash;1</strong> (GLP-1) and <strong>glucose-dependent insulinotropic peptide</strong> (GIP) are called <strong>incretins</strong>&nbsp;and are potent <strong>stimulators</strong> of <strong>insulin secretion</strong>. They also<strong> inhibit</strong> <strong>glucagon</strong> secretion. They are released in the gastrointestinal tract after a person eats a meal. They then cause an <strong>&ldquo;anticipatory&rdquo; increase</strong> in blood insulin in preparation for the glucose and amino acids to be absorbed from the meal.&nbsp;</p>\n<p>Note: Drugs that mimic the action of incretins are used in the management of diabetes.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about the G-protein-coupled receptor (GPCR)?",
    "choices": [
      {
        "id": 1,
        "text": "G proteins bind to hormones on the surface of the nucleus."
      },
      {
        "id": 2,
        "text": "All the three subunits \u03b1, \u03b2, and \u0263 should bind to each other for G proteins to act."
      },
      {
        "id": 3,
        "text": "G proteins act as inhibitory or excitatory because of differences in \u03b1 subunit."
      },
      {
        "id": 4,
        "text": "G protein is bound to GTP in resting state."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>G proteins act as <strong>inhibitory or excitatory</strong> because of differences in <strong>&alpha; subunit.</strong></p>\n<p>G protein-coupled receptors (GPCRs) are<strong> cell membrane receptors</strong> that span across the membrane 7 times hence called seven helix or serpentine receptors.</p>\n<p>G proteins have 3 subunits (&alpha;,&beta; and \u0263). In its resting state, <strong>&alpha; subunit is bound to GDP. </strong></p>\n<p>Upon<strong> ligand binding to GPCR</strong>, it undergoes a conformational change that activates G protein within the cell. The <strong>&alpha; subunit dissociates</strong> and in turn alters the activity of <strong>second messengers</strong> such as cAMP, cGMP or Ca<sup>2+</sup>.</p>\n<p>Once the <strong>ligand is unbound</strong>, the intrinsic GTPase activity of the <strong>&alpha; subunit</strong> converts <strong>GTP to GDP</strong>. This leads to <strong>reassociation</strong> of &alpha; with the &beta;-\u0263 subunit and termination of effector activation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff5a258469fa43508a4fdf743a1388b1x1280x1086.JPEG"
    ]
  },
  {
    "text": "The AH interval on His Bundle Electrocardiogram (HBE) corresponds to the conduction of _____ on ECG.",
    "choices": [
      {
        "id": 1,
        "text": "Through His \u2013Purkinje system"
      },
      {
        "id": 2,
        "text": "From AV node to bundle of His"
      },
      {
        "id": 3,
        "text": "Purkinje to ventricular fibers"
      },
      {
        "id": 4,
        "text": "Through ventricular fibers"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The AH interval corresponds to conduction from AV node to bundle of His on an ECG.</p>\n<p><strong>His bundle electrogram (HBE)</strong></p>\n<p>The record of the electrical activity obtained with the catheter&nbsp;passed through a vein to the right side of the heart and placed close to the tricuspid valve is&nbsp;HBE.</p>\n<p>It shows 3 deflections as shown in the figure:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a14c30dc320e4b1fadb19e77546a273ex1280x973.JPEG"
    ]
  },
  {
    "text": "A patient's urine flow rate is 2 ml/min. What is the clearance of a substance x whose plasma concentration is 10mg/mL and in urine is 100mg/mL?",
    "choices": [
      {
        "id": 1,
        "text": "0.2 ml/min"
      },
      {
        "id": 2,
        "text": "2 ml/min"
      },
      {
        "id": 3,
        "text": "20 ml/min"
      },
      {
        "id": 4,
        "text": "200 ml/min"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clearance in the given scenario is 20 ml/ min.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/743ceaa607804d2f9375b239c487cec5x404x132.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/11f17ecec63e4d38b5d8c53166278132x303x46.PNG"
    ]
  },
  {
    "text": "The relationship between the  flow in a long narrow tube, the viscosity of the fluid, and the radius of the tube is expressed mathematically by___.",
    "choices": [
      {
        "id": 1,
        "text": "Laplace law"
      },
      {
        "id": 2,
        "text": "Poiseuille's law"
      },
      {
        "id": 3,
        "text": "Fick law"
      },
      {
        "id": 4,
        "text": "Frank starling law"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The relationship between the flow in a long narrow tube, the viscosity of the fluid, and the radius of the tube is expressed mathematically by Poiseullie's law.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/768cad75314f4907a54ad8c4f6e754f6x600x374.JPEG"
    ]
  },
  {
    "text": "Mitral cells are seen in ______",
    "choices": [
      {
        "id": 1,
        "text": "left atrium"
      },
      {
        "id": 2,
        "text": "Olfactory bulb"
      },
      {
        "id": 3,
        "text": "Primary visual cortex"
      },
      {
        "id": 4,
        "text": "Geniculate body"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Mitral cells are seen in&nbsp;<strong>Olfactory bulb.</strong></p>\n<p>Axons of Olfactory nerves (First cranial nerve) synapse with the <strong>mitral cells and tufted cells</strong> in the olfactory bulb to form anatomically discrete units called olfactory glomeruli.</p>\n<p>The olfactory bulb also contains periglomerular cells that are inhibitory interneurons and <strong>granule cells </strong>that make reciprocal synapses with mitral and tufted cells.</p>\n<p>These mitral and tufted cells (second-order neurons) terminate in Olfactory cortex.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c0553212ef841208c2c302917d5842bx800x543.JPEG"
    ]
  },
  {
    "text": "Which of the following is a component of the Papez circuit?",
    "choices": [
      {
        "id": 1,
        "text": "Lateral dorsal nucleus"
      },
      {
        "id": 2,
        "text": "Anterior nucleus of thalmus"
      },
      {
        "id": 3,
        "text": "Ventral anterior nucleus"
      },
      {
        "id": 4,
        "text": "Pulvinar"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Anterior nucleus </strong>of the <strong>thalamus</strong> is a component of <strong>Papez circuit</strong>, which is important for <strong>short term memory.</strong></p>\n<p><strong>Papez Circuit (refer figure):</strong></p>\n<p>The limbic system was studied by James Papez who described the Papez circuit. It consists of:</p>\n<p><strong>Mnemonic </strong>for components of Papez circuit<strong>-H</strong>e <strong>M</strong>an <strong>A</strong>te <strong>C</strong>at</p>\n<ul>\n<li><strong>H</strong>e-Hippocampus</li>\n<li><strong>M</strong>an-Mamillary body</li>\n<li><strong>A</strong>te-Anterior thalamus</li>\n<li><strong>C</strong>at-Cingulate gyrus</li>\n</ul>\n<p>The fornix connects the hippocampus to the mammillary bodies, which are in turn connected to the anterior nuclei of the thalamus by the mammillothalamic tract. The anterior nuclei of the thalamus project to the cingulate cortex, and from there, connections to the hippocampus complete a complex closed circuit.</p>\n<p>The boundaries of the limbic system were subsequently expanded to include the amygdala, septum, basal forebrain, nucleus accumbens, and orbitofrontal cortex.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ee64e2d841a4615bb7b273ba140c293x1280x1360.JPEG"
    ]
  },
  {
    "text": "Which is the best parameter to analyze hypoxic hypoxia?",
    "choices": [
      {
        "id": 1,
        "text": "Partial pressure of CO2 in arterial blood (Paco2)"
      },
      {
        "id": 2,
        "text": "Partial pressure of O2 in arterial blood (Pao2)"
      },
      {
        "id": 3,
        "text": "A-V difference"
      },
      {
        "id": 4,
        "text": "Po2 venous"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hypoxic hypoxia</strong> is characterized by<strong>&nbsp;low partial pressure of O<sub>2</sub> in arterial blood (Pao<sub>2</sub>),&nbsp;</strong>while other parameters like<strong>&nbsp;partial pressure of CO<sub>2</sub> in arterial blood</strong>&nbsp;<strong>(Paco<sub>2</sub>)</strong> may remain normal.</p>\n<p><strong>Ventilation&ndash;Perfusion&nbsp;Imbalance:</strong></p>\n<ul>\n<li>The patchy <strong>ventilation&ndash;perfusion imbalance</strong> is the <strong>most common cause of hypoxic hypoxia or hypoxemia.</strong></li>\n<li>If alveoli are not ventilated but perfusion is present - blood passing through that alveoli remains unoxygenated.</li>\n<li>When this unoxygenated blood mixes with blood from normal or overventilated alveoli, there is a right to left shunt created.</li>\n<li>This results in reduced partial pressure of O<sub>2</sub> in arterial blood <sub>&nbsp;</sub>(PaO<sub>2</sub>) i.e., hypoxemia and consequently hypoxia.</li>\n</ul>\n<p><strong>Note:</strong></p>\n<ul>\n<li><strong>Hypoxemia</strong> can be defined as a condition where <strong>arterial oxygen tension or partial pressure of oxygen (PaO<sub>2</sub>) is below normal.</strong></li>\n<li><strong>Hypoxia</strong> is defined as the <strong>reduction of oxygen supply at the tissue level, which is not measured directly by a laboratory value.</strong></li>\n</ul>\n<p><strong>Scenario 1:</strong></p>\n<ul>\n<li>Generally, the <strong>presence of hypoxemia suggests hypoxia</strong> i.e. if there is less oxygen in blood, O<sub>2</sub> supply to tissues will also be reduced.</li>\n<li>But, in case of <strong>cyanide poisoning,</strong> there is <strong>hypoxia in the absence of hypoxemia,</strong> i.e., arterial O<sub>2</sub> content is normal but tissues are not able to utilize it because&nbsp;<strong>cyanide interferes with aerobic metabolism in the tissues.</strong></li>\n</ul>\n<p><strong>Scenario 2:</strong></p>\n<ul>\n<li><strong>Hypoxia may not be present in patients with hypoxemia</strong> if the patient compensates for a low PaO<sub>2</sub> by increasing oxygen delivery. This is typically achieved by <strong>increasing cardiac output (by raising the heart rate) or decreasing tissue oxygen consumption.</strong></li>\n<li>Nevertheless, <strong>hypoxemia is definitely the most common cause of tissue hypoxia</strong>, and the correct diagnosis should be made because it is <strong>readily treatable.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Appetite is stimulated by all except______",
    "choices": [
      {
        "id": 1,
        "text": "Agouti related peptide"
      },
      {
        "id": 2,
        "text": "Melanocyte stimulating hormone"
      },
      {
        "id": 3,
        "text": "Melanin concentrating hormone"
      },
      {
        "id": 4,
        "text": "Neuropeptide Y"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>MSH is anorexigenic</strong> and hence <strong>decreases appetite.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are rapidly acting blood pressure control mechanisms except:",
    "choices": [
      {
        "id": 1,
        "text": "Chemoreceptor reflex"
      },
      {
        "id": 2,
        "text": "Central nervous system ischemic mechanism"
      },
      {
        "id": 3,
        "text": "Renin angiotensin vasoconstrictor mechanism"
      },
      {
        "id": 4,
        "text": "Baroreceptor reflex"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Renin-angiotensin vasoconstrictor mechanism is not a&nbsp;rapidly acting pressure control mechanism, it is an intermediate-acting mechanism.</p>\n<p>Regulation of Arterial Blood Pressure:</p>\n<ul>\n<li><strong>Rapidly acting pressure control mechanism&nbsp;</strong>(acting within sec or min)\n<ul>\n<li>The chemoreceptor reflex.</li>\n<li>The central nervous system ischemic mechanism.</li>\n<li>The baroreceptor reflex.</li>\n</ul>\n</li>\n<li><strong>Intermediate-acting mechanisms </strong>(act after minutes)\n<ul>\n<li>The capillary fluid shift mechanism.</li>\n<li>Stress-relaxation of the vasculature.</li>\n<li>The renin-angiotensin vasoconstrictor mechanism.</li>\n</ul>\n</li>\n<li><strong>Long-term mechanisms </strong>(after days)\n<ul>\n<li>Renin-angiotensin-aldosterone system (RAAS)</li>\n</ul>\n</li>\n</ul>\n<p>Note:</p>\n<ul>\n<li>Renin-angiotensin <strong>vasoconstrictor</strong> mechanism is an intermediate-acting mechanism, but <strong>water conservation</strong> by RAAS is a long-term mechanism in the regulation of BP.</li>\n<li><strong>Most</strong> <strong>rapidly</strong> acting: <strong>Baroreceptor</strong> <strong>reflex</strong>&gt;&gt;Chemoreceptor reflex</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "How much urine in the bladder will cause the first urge to void in a patient?",
    "choices": [
      {
        "id": 1,
        "text": "150ml"
      },
      {
        "id": 2,
        "text": "250ml"
      },
      {
        "id": 3,
        "text": "350ml"
      },
      {
        "id": 4,
        "text": "100ml"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>first urge to void</strong> is felt at a bladder volume of about <strong>150 mL</strong>, and a marked <strong>sense of fullness at about 400 mL.</strong></p>\n<p><strong>Cystometrogram (refer figure)</strong></p>\n<p>A plot of intravesical pressure against the volume of fluid in the bladder is called a <strong>cystometrogram.</strong></p>\n<p>The curve shows</p>\n<ul>\n<li>An initial slight rise in pressure when the first increments in the volume are produced(Ia);</li>\n<li>A long, nearly flat segment as further increments are produced(Ib);</li>\n<li>A sudden, sharp rise in pressure as the micturition reflex is triggered(II).</li>\n<li>The flatness of segment Ib is a manifestation of <strong>the law of Laplace</strong>.</li>\n<li>This law states that the pressure in a spherical viscus is equal to twice the wall tension divided by the radius.</li>\n<li><strong>P= 2T/R</strong></li>\n<li>In the case of the blad&shy;der, the tension increases as the organ fill but so does the radius. Therefore, the pressure increase is slight until the organ is relatively full.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8bcae05cab3a496a83cdc3295308817cx1020x906.JPEG"
    ]
  },
  {
    "text": "The myogram below shows a slow onset and a longer after-discharge. Which type of reflex does it represent?",
    "choices": [
      {
        "id": 1,
        "text": "Flexor withdrawal reflex"
      },
      {
        "id": 2,
        "text": "Stretch reflex"
      },
      {
        "id": 3,
        "text": "Crossed extensor reflex"
      },
      {
        "id": 4,
        "text": "Inverse stretch reflex"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The figure shows the typical myogram recorded from a muscle involved in a crossed extensor reflex. This myogram demonstrates the relatively long latency before the reflex begins and the long after-discharge at the end of the stimulus.</p>\n<ul>\n<li>When a painful stimulus is applied to the body, the flexor withdrawal and the crossed extensor reflexes are stimulated.</li>\n<li>About 0.2 to 0.5 seconds after the flexor reflex in one limb, the opposite limb begins to extend. This reflex is called the <strong>crossed extensor reflex</strong>.</li>\n<li>After the painful stimulus is removed, the crossed extensor reflex has an even longer period of after-discharge than does the flexor reflex. This prolonged after-discharge results from reverberating circuits among the inter-neuronal cells.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e4fbf49ae974bc288aa0f04a6339228.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/680f0c4b777a4e6cbeaabafa31052121x1280x1037.JPEG"
    ]
  },
  {
    "text": "In a patient, pO2 is 85mmHg, pCO2 is 50mmHg, pH is 7.2, and HCO3- is 36mmol/L. Identify the condition.",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory acidosis with compensatory metabolic alkalosis"
      },
      {
        "id": 2,
        "text": "Uncompensated respiratory acidosis"
      },
      {
        "id": 3,
        "text": "Respiratory alkalosis with compensatory metabolic acidosis"
      },
      {
        "id": 4,
        "text": "Respiratory acidosis with compensatory metabolic acidosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient has respiratory acidosis with compensatory metabolic alkalosis.</p>\n<p>pH is <strong>decreased (&lt;7.35)</strong> so it is <strong>acidosis.</strong></p>\n<p>The <strong>CO<sub>2</sub> levels are increased (&gt;45mmHg)</strong>, which is <strong>in line with the change in pH</strong> (in respiratory acidosis CO<sub>2</sub> is expected to raise), thus the <strong>primary problem is respiratory.</strong></p>\n<p>The <strong>HCO<sup>3-</sup> levels are increased (&gt;30mmol/L)</strong>, which is&nbsp;<strong>opposite to change in pH</strong> (i.e there is acidosis and HCO<sup>3-</sup> levels are high), thus, there is&nbsp;<strong>compensatory metabolic alkalosis.</strong></p>\n<p>Thus, this is a case of <strong>respiratory acidosis with compensatory metabolic alkalosis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a cell adhesion molecule (CAM)?",
    "choices": [
      {
        "id": 1,
        "text": "Integrin"
      },
      {
        "id": 2,
        "text": "Selectin"
      },
      {
        "id": 3,
        "text": "Cadherin"
      },
      {
        "id": 4,
        "text": "Spectrin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Spectrin</strong> is a cytoskeletal protein but not a cell adhesion molecule.</p>\n<p>Cells are attached to each other or to the basal lamina by cell adhesion molecules (CAMs). Some important classes of CAMs are:&nbsp;</p>\n<ul>\n<li><strong>Integrins</strong>:<strong>&nbsp;</strong>heterodimers that bind to various receptors</li>\n<li><strong>IgG superfamily </strong>of immunoglobulins</li>\n<li><strong>Cadherins</strong>:<strong>&nbsp;</strong>Ca<sup>2+</sup>-dependent molecules that mediate cell-to-cell adhesion by homophilic reactions</li>\n<li><strong>Selectins</strong> which have lectin-like domains that bind carbohydrates</li>\n</ul>\n<p><strong>Clinical significance</strong></p>\n<ul>\n<li>Cancer cells have abnormal CAMs<strong>&nbsp;</strong>and hence cause decreased cell adhesion and allow individual cancer&nbsp;cells to detach from the parent cancer.</li>\n<li>The decrease in the amount of&nbsp;E-cadherin maybe the reason for early metastasis of numerous tumors.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The figure below depicts the major anatomical site of _______ neurons.",
    "choices": [
      {
        "id": 1,
        "text": "Cholinergic neurons"
      },
      {
        "id": 2,
        "text": "Adrenergic neurons"
      },
      {
        "id": 3,
        "text": "Seretonergic neurons"
      },
      {
        "id": 4,
        "text": "Dopaminergic neurons"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 153\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p style=\"text-align: left;\"><strong>Cholinergic neurons</strong> in the basal forebrain complex project to the hippocampus and the neocortex and those in the pontomesencephalotegmental cholinergic complex project to the dorsal thalamus and the forebrain.</p>\n<p style=\"text-align: left;\"><strong>Major Anatomical Sites of Various Neuromodulators</strong></p>\n<ul>\n<li style=\"text-align: left;\"><strong>Noradrenergic neurons</strong> in the <strong>locus coeruleus</strong> innervate the spinal cord, cerebellum, several nuclei of the hypothalamus, thalamus, basal telencephalon, and neocortex. (Figure A)</li>\n<li style=\"text-align: left;\"><strong>Serotonergic neurons</strong> in the <strong>raphe nuclei</strong> project to the hypothalamus, limbic system, neocortex, cerebellum, and spinal cord.&nbsp;(Figure B)</li>\n<li style=\"text-align: left;\"><strong>Dopaminergic neurons</strong> in the <strong>substantia nigra</strong> project to the striatum and those in the <strong>ventral tegmental area</strong> of the midbrain project to the prefrontal cortex of the limbic system.&nbsp;(Figure C)</li>\n<li style=\"text-align: left;\"><strong>Cholinergic neurons</strong> in the <strong>basal forebrain complex</strong> project to the hippocampus and the neocortex and those&nbsp; in the&nbsp;<strong>pontomesencephalotegmental</strong> cholinergic complex project to the dorsal thalamus and the forebrain.&nbsp;(Figure D)</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ef8d67b681f14143866d75c802c1dffd.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e399f5111ad441caaa8385f8a0b6a5fx327x288.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f3920cbd98df4642adab557248c93672x295x299.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ce1f391c0a0d466e98e39e2a583c375dx319x296.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/210a11789bc74ed0a836b8ef0ebd8dd9x1280x2558.JPEG"
    ]
  },
  {
    "text": "Identify the type of nerve fibre in the diagram below.",
    "choices": [
      {
        "id": 1,
        "text": "Gamma Neuron"
      },
      {
        "id": 2,
        "text": "Alpha Neuron"
      },
      {
        "id": 3,
        "text": "Beta Neuron"
      },
      {
        "id": 4,
        "text": "Delta Neuron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given figure, the fiber in yellow innervates the <strong>ends of the muscle spindle</strong>. Therefore, it is a&nbsp;<strong>gamma motor neuron. &nbsp;</strong></p>\n<p>Many much smaller gamma motor neurons are located in the <strong>spinal cord anterior horns </strong>(shown as the yellow efferent fiber). These gamma motor neurons average <strong>5 micrometers</strong> in diameter, which go to small, special skeletal muscle fibers called intrafusal fibers or the&nbsp;muscle spindle. These fibers constitute the ends of the muscle spindle, which help control <strong>basic muscle &ldquo;tone.&rdquo;&nbsp;</strong></p>\n<p><strong>Option (b):</strong></p>\n<p>The <strong>alpha motor neurons </strong>(shown as the blue efferent fibre) are on an average&nbsp;<strong>14 micrometers</strong> in diameter. These fibers branch many times after they enter the muscle and<strong> innervate the large skeletal muscle fibers at the motor endplate</strong>. Stimulation of a single alpha nerve fiber excites anywhere from three to several hundred skeletal muscle fibers, which are collectively called the <strong>motor unit.</strong></p>\n<p><strong>Option (c):</strong></p>\n<p>A-beta fibers are fibers for touch and pressure.</p>\n<p><strong>Option (d):</strong></p>\n<p>A-delta fibers are fibers for pain and temperature.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c040e3a449d04de797eea1dca92d028c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/30b848ac2f584f47801d896b36ec4bb7x1280x1643.JPEG"
    ]
  },
  {
    "text": "Which of the following equations is used to calculate the equilibrium potential for an ion?",
    "choices": [
      {
        "id": 1,
        "text": "Gibbs-Donnan equation"
      },
      {
        "id": 2,
        "text": "Nernst equation"
      },
      {
        "id": 3,
        "text": "Goldmann equation"
      },
      {
        "id": 4,
        "text": "Bernoulli equation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Equilibrium potential</strong> for an ion is calculated using the\u00a0<strong>Nernst equation.\u00a0</strong></p>\n<p>When there is a concentration gradient for an ion across the membrane, the ion tends to diffuse down the concentration gradient. The electric potential that exactly opposes this net diffusion is called the equilibrium potential for that ion. This is calculated using the Nernst equation.</p>\n<p>It is expressed as the <strong>potential inside the cell</strong> (<strong>intracellular potential relative</strong> to the extracellular potential).</p>\n<p>To calculate the value of the equilibrium potential:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6de0c451718d447bb5bae58f9120f914x1280x735.JPEG"
    ]
  },
  {
    "text": "Which of the following causes relaxation of the mesangial cells?",
    "choices": [
      {
        "id": 1,
        "text": "cAMP"
      },
      {
        "id": 2,
        "text": "Endothelin"
      },
      {
        "id": 3,
        "text": "PGF2"
      },
      {
        "id": 4,
        "text": "Vasopressin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>cAMP</strong> causes <strong>relaxation</strong> of the <strong>mesangial cells.</strong> The other agents mentioned in the options cause contraction of the mesangial cells.</p>\n<p>Agents causing relaxation of mesangial cells (mnemonic - <strong>DA</strong>n<strong>CE</strong>)</p>\n<ul>\n<li><strong>D</strong>opamine</li>\n<li><strong>A</strong>NP</li>\n<li><strong>c</strong>AMP</li>\n<li>PG<strong>E</strong>2</li>\n</ul>\n<p><strong>Angiotensin II</strong> is an important regulator of mesangial<strong> contraction</strong>, and there are angiotensin II receptors in the glomeruli.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about anandamide?",
    "choices": [
      {
        "id": 1,
        "text": "It is not produced endogenously"
      },
      {
        "id": 2,
        "text": "It is a nociceptive agent"
      },
      {
        "id": 3,
        "text": "There are anandamide-containing neurons in the periaqueductal gray"
      },
      {
        "id": 4,
        "text": "It binds to opioid receptors"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>There are anandamide-containing neurons in the <strong>periaqueductal gray</strong> and other areas concerned with pain.</p>\n<p>There are 2 types of <strong>endogenous</strong> cannabinoids: 2-arachidonyl glycerol and Anandamide. They bind to <strong>CB1&nbsp;</strong>and<strong> CB2</strong> receptors.&nbsp;They have an <strong>anti-nociceptive</strong> effect.</p>\n<p>Descending pathways from the mesencephalic periaqueductal&nbsp;gray inhibit transmission in nociceptive pathways. This descending pathway includes a synapse in the ventromedial medulla (Raphe nucleus) and the release of endogenous opiates. So&nbsp;periaqueductal&nbsp;gray matter releases endogenous opiates.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding dead space volume in a healthy individual?",
    "choices": [
      {
        "id": 1,
        "text": "Anatomical dead space> physiologic dead space"
      },
      {
        "id": 2,
        "text": "Anatomical dead space< physiological dead space"
      },
      {
        "id": 3,
        "text": "Anatomical dead space and  physiologic dead space are almost equivalent"
      },
      {
        "id": 4,
        "text": "Anatomical dead space is not related to physiologic dead space"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In healthy individuals<strong>, anatomical dead space </strong>and<strong> physiologic dead space</strong>&nbsp;are almost equivalent, and can be estimated by body weight.</p>\n<p>Dead space is the volume of the airways and lungs that do not participate in gas exchange.</p>\n<p><strong>Types</strong></p>\n<ul>\n<li><strong>Anatomic dead space</strong>- Volume of the air-occupying <strong>conducting zone</strong> where no exchange of gases takes place.</li>\n<li><strong>Alveolar/functional dead space</strong>- the volume of gas not equilibrating with blood (<strong>wasted ventilation</strong>)</li>\n<li><strong>Total dead space/Physiological dead space = Anatomical + Alveolar dead space.</strong></li>\n</ul>\n<p>In healthy individuals:</p>\n<ul>\n<li>Anatomical dead space = 150 mL.</li>\n<li>Alveolar dead space is usually zero (increased in diseased conditions).</li>\n</ul>\n<p>Hence,</p>\n<ul>\n<li>Physiological dead space = Anatomical + Alveolar = 150 + 0 = 150 mL.</li>\n<li>Physiological dead space = Anatomical dead space.</li>\n<li>Radford's formula: Anatomical dead space&nbsp;in mL is approximately equal to the body weight in pounds.</li>\n<li>Dead space can be measured by the following:\n<ul>\n<li>Single Breath N<sub>2 </sub>method (Fowler&rsquo;s method)</li>\n<li>Bohr&rsquo;s equation</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most important neurotransmitter of reward pathway is ______",
    "choices": [
      {
        "id": 1,
        "text": "Dopamine"
      },
      {
        "id": 2,
        "text": "Serotonin"
      },
      {
        "id": 3,
        "text": "Noradrenaline"
      },
      {
        "id": 4,
        "text": "Acetylcholine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most important neurotransmitter of reward pathway is<strong> dopamine</strong>.</p>\n<p>Reward pathway (mesolimbic pathway) connects the ventral tegmental area in the midbrain to the nucleus accumbens and limbic subcortical areas. This pathway is involved in reward behaviour, addiction and in psychiatric disorders such as schizophrenia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following tracts does not carry proprioceptive impulses?",
    "choices": [
      {
        "id": 1,
        "text": "Olivocerebellar"
      },
      {
        "id": 2,
        "text": "Tectocerebellar"
      },
      {
        "id": 3,
        "text": "Spinocerebellar"
      },
      {
        "id": 4,
        "text": "Cuneocerebellar"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tectocerebellar tract</strong> carries <strong>auditory and visual impulses</strong> via inferior and superior colliculi while the olivocerebellar tract, spinocerebellar tract, and cuneocerebellar tract carry proprioceptive impulses.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 18-year-old female patient was diagnosed with iron deficiency anemia and was prescribed ferrous fumarate tablets for 2 months. Which of the following channels help in the absorption of this iron taken orally into the enterocyte?",
    "choices": [
      {
        "id": 1,
        "text": "Divalent metal transporter 1"
      },
      {
        "id": 2,
        "text": "Transferrin"
      },
      {
        "id": 3,
        "text": "Ferroportin"
      },
      {
        "id": 4,
        "text": "Hephaestin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The\u00a0channel that helps in the absorption of the iron into the enterocyte is <strong>divalent metal transporter 1 (DMT1).\u00a0</strong>Transport of iron across the brush border of the intestinal cells in the ferrous form is accomplished by<strong>\u00a0DMT-1,\u00a0</strong>also known as <strong>natural resistance-associated macrophage protein type 2 (Nramp 2).\u00a0</strong></p>\n<p>The mechanism of iron absorption and transport -\u00a0</p>\n<p>Iron is available in food in two forms, heme and nonheme.\u00a0<strong>Heme iron</strong>\u00a0is mainly present in\u00a0<strong>red meat</strong>\u00a0and is\u00a0<strong>readily absorbed. </strong>This iron is mainly absorbed from the\u00a0<strong>duodenum </strong>and <strong>proximal small intestine</strong>. The acidic contents of the stomach play a major role in absorption. Once it reaches the brush border of the absorbing cell, the ferric form is converted to ferrous form by\u00a0<strong>ferrireductase</strong>. This ferrous form is then transported into the cell by\u00a0<strong>divalent metal transporter type 1 (DMT-1).\u00a0</strong></p>\n<p class=\"p1\">Once inside the\u00a0cell, iron may be\u00a0<strong>stored</strong>\u00a0as\u00a0<strong>ferritin</strong>\u00a0or transported\u00a0to plasma through\u00a0<strong>ferroportin</strong>. During the transport, iron is converted back into the ferric form by\u00a0<strong>hephaestin</strong> and <strong>ceruloplasmin.\u00a0</strong>The iron in plasma is then\u00a0<strong>transferred</strong>\u00a0to the required tissues with the help of protein\u00a0<strong>transferrin.\u00a0</strong>Iron is a major content of<strong>\u00a0hemoglobin,\u00a0</strong>myoglobin, cytochrome P-450 group of enzymes, components of electron transport chain, and ribonucleotide reductase.</p>\n<p><strong>Hepcidin</strong>, a protein secreted from the liver plays a major role in the regulation of iron absorption. When the body\u2019s iron stores are adequate, it downregulates the expression of ferroportin and thereby decreases iron absorption.\u00a0</p>\n<p>The following illustration shows the absorption of iron in the duodenum:\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d961a2683f0346bb80224ba99136cdd9x1279x1210.JPEG"
    ]
  },
  {
    "text": "Which statement about the facilitated diffusion is true?",
    "choices": [
      {
        "id": 1,
        "text": "Form of active transport"
      },
      {
        "id": 2,
        "text": "Requires carrier protein"
      },
      {
        "id": 3,
        "text": "Doesn't follow saturation kinetics"
      },
      {
        "id": 4,
        "text": "Requires creatinine phosphate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>When <strong>carrier proteins </strong>help in the movement of substances in the direction of their chemical or electrical gradients (downhill movement), no energy input is required and the process is called <strong>facilitated diffusion.</strong></p>\n<p><strong>Examples</strong></p>\n<ul>\n<li>GLUT</li>\n<li>Urea Transporters :\n<ul>\n<li>UTA<sub> 1, 2, 3, 4</sub> in Kidney</li>\n<li>UTB in RBC</li>\n</ul>\n</li>\n<li>Amino Acid Transporters</li>\n</ul>\n<p>Other options are wrong because:&nbsp;</p>\n<ul>\n<li>Facilitated diffusion is a type of passive transport.</li>\n<li>It follows saturation kinetics.&nbsp;</li>\n<li>No energy input is required in facilitated diffusion.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cf1a691501c84c0a8bda5452ac135c65x1280x959.JPEG"
    ]
  },
  {
    "text": "Which of the following increases turbulence in blood flow?",
    "choices": [
      {
        "id": 1,
        "text": "Increase in diameter of blood vessel"
      },
      {
        "id": 2,
        "text": "Reynolds number less than 2000"
      },
      {
        "id": 3,
        "text": "Decrease in density of blood"
      },
      {
        "id": 4,
        "text": "Decrease in velocity of blood"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Turbulence in blood flow increases with <strong>increase in diameter</strong> of blood vessel.</p>\n<p>The turbulence of flow depends upon <strong>Reynold&rsquo;s number:</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2be0f15f956948838c6f0a2831ace561x1072x692.PNG"
    ]
  },
  {
    "text": "Which of the following occurs during skeletal muscle contraction?",
    "choices": [
      {
        "id": 1,
        "text": "A band shorten"
      },
      {
        "id": 2,
        "text": "Both H and I band shorten"
      },
      {
        "id": 3,
        "text": "Both A and I band shorten"
      },
      {
        "id": 4,
        "text": "Both A and H band shorten"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Sliding of thin filament over thick filament (cross bridge formation) <strong>reduces the length of I and H band</strong>.</p>\n<ul>\n<li>During contraction, the <strong>Z lines come closer</strong> to each other reducing the length of the sarcomere.</li>\n<li>The <strong>A band remains constant</strong> and M line becomes prominent.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not delay gastric emptying?",
    "choices": [
      {
        "id": 1,
        "text": "Fat in duodenum"
      },
      {
        "id": 2,
        "text": "Acid in duodenum"
      },
      {
        "id": 3,
        "text": "Gastrin"
      },
      {
        "id": 4,
        "text": "Secretin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Gastrin increases</strong>&nbsp;<strong>gastric emptying.</strong> It does&nbsp;not delay it.&nbsp;</p>\n<p>Gastrin has mild to moderate stimulatory effects on motor functions in the body of the stomach. Thus, gastrin likely promotes stomach emptying.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The x descent in jugular venous pressure corresponds to _______ phase of the cardiac cycle.",
    "choices": [
      {
        "id": 1,
        "text": "Atrial systole"
      },
      {
        "id": 2,
        "text": "Ventricular systole"
      },
      {
        "id": 3,
        "text": "Ventricular diastole"
      },
      {
        "id": 4,
        "text": "Joint diastole"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The x descent in jugular venous pressure corresponds to the&nbsp;<strong>ventricular systole</strong> of the cardiac cycle.</p>\n<p><strong> The jugular venous pulse</strong></p>\n<ul>\n<li>The waves in JVP reflect the pressure changes in the right atrium.</li>\n<li>The internal jugular vein is preferred because the external jugular vein is valved and not directly in line with the superior vena cava and right atrium.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b75abb8d6f464acc96eb692a4474cfe8x741x600.PNG"
    ]
  },
  {
    "text": "Which of the following hormones demonstrates the fluctuations depicted below?",
    "choices": [
      {
        "id": 1,
        "text": "ACTH"
      },
      {
        "id": 2,
        "text": "GH"
      },
      {
        "id": 3,
        "text": "TSH"
      },
      {
        "id": 4,
        "text": "Prolactin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Growth hormone</strong> demonstrates the depicted fluctuations. Growth hormone is secreted in a <strong>pulsatile fashion</strong>, with <strong>increase</strong> during strenuous <strong>exercise</strong> and during the <strong>early period </strong>of <strong>sleep</strong>, (<strong>Non-REM Sleep</strong>)&nbsp;as shown in the graph. It is <strong>reduced</strong> during the <strong>later stages</strong> of <strong>sleep</strong>. (<strong>REM sleep</strong>)</p>\n<p>Other options:</p>\n<p>Option A: <strong>ACTH</strong> levels are <strong>high</strong>&nbsp;in the early&nbsp;<strong>morning </strong>and&nbsp;<strong>low</strong> in the late <strong>evening</strong>.&nbsp;</p>\n<p>Option C: <strong>TSH</strong> is secreted in pulses, but the <strong>fluctuations </strong>are <strong>less</strong> in comparison to other pituitary hormones because of the low amplitude of the pulses and the relatively long half-life of TSH.</p>\n<p>Option D: <strong>Prolactin</strong> is secreted in a pulsatile fashion, with the <strong>highest</strong> secretory peak between <strong>4:00 </strong>and<strong> 6:00 a.m</strong>. (<strong>REM Sleep</strong>)</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/57019d3330704b6fb4a971e3b79c9fe0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old woman has a resting heart rate of 70-beats/min. Her pressure-volume diagram of the left ventricle is given below. What is her cardiac output (in mL/min)? (Point 2 corresponds to 120 ml)",
    "choices": [
      {
        "id": 1,
        "text": "2000"
      },
      {
        "id": 2,
        "text": "3000"
      },
      {
        "id": 3,
        "text": "4900"
      },
      {
        "id": 4,
        "text": "7000"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In this case, the patient has a heart rate of 70-beats/min and the stroke volume can be determined from the given pressure-volume diagram.</p>\n<p>Point 2 corresponds to the EDV(End diastolic volume) = 120 mL<br />Point 1 corresponds to the ESV(End systolic volume) = 50 mL</p>\n<p>Thus, <strong>stroke volume (SV) = EDV \u2013 ESV = 120 \u2013 50 = 70 mL</strong></p>\n<p>Therefore, Cardiac output = HR X SV =<strong> 70 X 70</strong> = <strong>4900 mL/min.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/afde8e00a4864cd5a7012bde9dca0c9a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/81717ac2d7704d259d2ee1860ff7005cx1280x1418.JPEG"
    ]
  },
  {
    "text": "Which of the following cells secrete anti mullerian hormone?",
    "choices": [
      {
        "id": 1,
        "text": "Theca cells"
      },
      {
        "id": 2,
        "text": "Leydig cells"
      },
      {
        "id": 3,
        "text": "Sertoli cells and Granulosa cells"
      },
      {
        "id": 4,
        "text": "Muller cells"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>(Anti Mullerian Hormone) is secreted by both <strong>sertoli&nbsp;cells and granulosa cells.</strong></p>\n<p>Sertoli cells produce Anti Mullerian Hormone (Mullerian inhibitory substance) during development. It induces the regression of the mullerian duct that is programmed to give rise to a female reproductive tract.</p>\n<p>Granulosa cells of the ovary produce AMH during the reproductive years. It limits the formation of primary follicles by inhibiting excessive follicular recruitment by FSH.<sup id=\"cite_ref-pmid14742691_15-1\" class=\"reference\"><a href=\"https://en.wikipedia.org/wiki/Anti-M%C3%BCllerian_hormone#cite_note-pmid14742691-15\" target=\"_blank\" rel=\"noopener\"></a></sup></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A professional athlete uses phosphocreatine to improve his sprinting capacity and maximize muscle power during a 100 m dash race. Which of the following energy systems is utilized by the muscles of the athlete's body during a dash race?",
    "choices": [
      {
        "id": 1,
        "text": "Phosphagen system"
      },
      {
        "id": 2,
        "text": "Glycogen Lactic acid system"
      },
      {
        "id": 3,
        "text": "Aerobic system"
      },
      {
        "id": 4,
        "text": "Pentose phosphate pathway"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<div class=\"page\" title=\"Page 1035\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>The phosphagen system</strong> is utilized by the muscles of the athlete's body during a dash race.</p>\n<p>The combined amounts of cell ATP and cell phosphocreatine are called the <strong>phosphagen energy system.</strong>\u00a0These substances together can provide maximal muscle power for <strong>8 </strong>to<strong> 10 seconds</strong>, almost enough for the 100-meter run. Thus, the energy from the phosphagen system is used for maximal <strong>short bursts </strong>of <strong>muscle power.</strong></p>\n<p>Energy systems:</p>\n<div class=\"page\" title=\"Page 1034\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The <strong>phosphocreatine-creatine system</strong>: The combined amounts of cell ATP and cell phosphocreatine are called the <strong>phosphagen energy system.</strong>\u00a0These substances together can provide maximal muscle power for <strong>8 to 10 seconds.</strong></li>\n<li>The <strong>glycogen\u2013lactic acid system</strong>:\u00a0can provide <strong>1.3 to 1.6 minutes</strong> of maximal muscle activity.</li>\n<li>The <strong>aerobic system</strong>: The aerobic system is the oxidation of foodstuffs in the mitochondria to provide energy. It can sustain mucle activity for an <strong>unlimited time</strong> (as long as nutrients last).</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Interstitial fluid volume is best measured using a combination of which two dyes?",
    "choices": [
      {
        "id": 1,
        "text": "Inulin and Evans blue"
      },
      {
        "id": 2,
        "text": "Evans blue and D2O"
      },
      {
        "id": 3,
        "text": "Tritium oxide and Inulin"
      },
      {
        "id": 4,
        "text": "D2O and Mannitol"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Interstitial fluid volume is best measured using a combination of <strong>i</strong><strong>nulin and Evans blue.</strong></p>\n<p>Insterstitial fluid is measured indirectly.\u00a0ECF minus plasma volume gives the interstitial fluid value.</p>\n<ul>\n<li>Best measure of ECF - Inulin</li>\n<li>Best measure of Plasma Volume - Evans Blue (T1824)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The diagram below shows the pressure-volume curves for 3 different lungs. Which of the following is the best representation of compliance between the three lungs?",
    "choices": [
      {
        "id": 1,
        "text": "A<B<C"
      },
      {
        "id": 2,
        "text": "B>A>C"
      },
      {
        "id": 3,
        "text": "B>C>A"
      },
      {
        "id": 4,
        "text": "C>A>B"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>The pressure-volume relationship is the fundamental relation between the work of breathing and lung mechanics.</li>\n<li>The diagram depicts the <strong>change in volume</strong> with respect to the <strong>change in intrapleural pressure</strong>, which is <strong>compliance. </strong>Here, the change is <strong>more</strong> (steep curve) <strong>with B</strong> and <strong>least</strong> (flat curve)<strong> with C</strong>.<strong>\u00a0</strong></li>\n<li>The \u201c<strong>stiffer</strong>\u201d lung displays a more horizontal curve (C), meaning that it takes a <strong>greater pressure to achieve the same inflation volume</strong> compared with a normal lung (A). These lungs are called\u00a0less compliant.</li>\n<li>Curve (B) is <strong>more compliant</strong> as it takes <strong>lesser pressure to achieve the same inflation</strong> volume compared to normal (A).</li>\n</ul>\n<p><strong>Applied aspect:</strong></p>\n<p><strong>Compliance is increased in emphysema.</strong>\u00a0The mechanism is shown in the flow chart below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/08efac4b8618403fb3d048d347282eb7.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f1a4eecaa0b6429b979ac6cce3f14cd4x269x250.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/572f398643fe457c8c25854f78d63401x1280x1179.JPEG"
    ]
  },
  {
    "text": "Which of the following is not an effect of parathormone?",
    "choices": [
      {
        "id": 1,
        "text": "\u2191 bone resorption"
      },
      {
        "id": 2,
        "text": "\u2191 calcium reabsorption in kidney"
      },
      {
        "id": 3,
        "text": "\u2191 phosphate reabsorption in kidney"
      },
      {
        "id": 4,
        "text": "\u2191 calcitriol (vitamin D3) synthesis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>PTH</strong>&nbsp;does not increase phosphate reabsorption in kidney, rather it causes <strong>decreased</strong> <strong>phosphate reabsorption</strong> in the kidney.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mineralocorticoid receptors are present in all  except______",
    "choices": [
      {
        "id": 1,
        "text": "Hippocampus"
      },
      {
        "id": 2,
        "text": "Kidney"
      },
      {
        "id": 3,
        "text": "Colon"
      },
      {
        "id": 4,
        "text": "Liver"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Mineralocorticoid receptors are not present in the liver. They are present in&nbsp;<strong>kidneys, colon,&nbsp;</strong><strong>hippocampus</strong>, <strong>salivary glands</strong>, and <strong>sweat glands.</strong>&nbsp;</p>\n<p>Mineralocorticoid activity increases the reabsorption of Na+ and potassium excretion from urine, sweat, saliva, and contents of the colon. Along with the Na+, there is water reabsorption and inturn ECF volume expansion.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statement is correct regarding secretin?",
    "choices": [
      {
        "id": 1,
        "text": "\u2191 bicarbonate secretion"
      },
      {
        "id": 2,
        "text": "Inhibit bicarbonate secretion"
      },
      {
        "id": 3,
        "text": "\u2191 gastric acid secretion"
      },
      {
        "id": 4,
        "text": "Stimulates gastrin release"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Secretin increases HCO<sub>3</sub><sup>-</sup> secretion</strong> by ductal cells of the pancreas and duodenum.</p>\n<p>It is secreted by the&nbsp;S cells in the upper small intestine.</p>\n<p>Functions of secretion are:</p>\n<ul>\n<li><strong>Primary function</strong>\n<ul>\n<li><strong>&uarr; HCO<sup>3- </sup>secretion</strong> by ductal cells of pancreas and duodenum</li>\n</ul>\n</li>\n<li>Other functions\n<ul>\n<li>Augments the effects of CCK</li>\n<li><strong>Inhibits gastrin release</strong></li>\n<li><strong>&darr; gastric acid secretion</strong></li>\n<li>Contraction of pyloric sphincter</li>\n<li>Exerts trophic effect on the pancreas</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following hormones act via the given pathway except ______",
    "choices": [
      {
        "id": 1,
        "text": "Glucagon"
      },
      {
        "id": 2,
        "text": "FSH"
      },
      {
        "id": 3,
        "text": "LH"
      },
      {
        "id": 4,
        "text": "Estrogen"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Estrogen</strong> acts through <strong>nuclear receptors.</strong></p>\n<p>The rest of the hormones in the options act through GPCRs via the cAMP second messenger pathway, which is seen in the image.&nbsp;</p>\n<ul>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"13\" aria-setsize=\"-1\" data-aria-posinset=\"1\" data-aria-level=\"1\">The image shows binding of the hormones with the receptor which allows the coupling of the recep&shy;tor to a G protein, leading to <strong>activation of adenylate cyclase.</strong>&nbsp;</li>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"13\" aria-setsize=\"-1\" data-aria-posinset=\"2\" data-aria-level=\"1\">Activated <strong>adenylate cyclase</strong> then catalyzes the <strong>conversion of ATP to cAMP</strong> (2nd messenger).&nbsp;</li>\n<li data-leveltext=\"\uf0b7\" data-font=\"Symbol\" data-listid=\"13\" aria-setsize=\"-1\" data-aria-posinset=\"2\" data-aria-level=\"1\"><strong>cAMP</strong> then activates cAMP-dependent <strong>protein kinase A</strong> which phosphorylates certain proteins leading to a physiological response.</li>\n</ul>\n<p>Hormones using cAMP as the second messenger:</p>\n<ul>\n<li>CRH, ACTH, Catecholamines (&beta;<sub>1</sub> and &beta;<sub>2</sub> receptors)</li>\n<li>Parathyroid Hormone (PTH), calcitonin</li>\n<li>Growth hormone-releasing hormone (GHRH)</li>\n<li>FSH, LH, hCG</li>\n<li>TSH</li>\n<li>ADH (V<sub>2</sub> receptors)</li>\n<li>Glucagon</li>\n<li>Somatostatin</li>\n<li>Secretin</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://daily-rounds-staging.s3.amazonaws.com/uploads/5e02f6933d4f4f70a0e7e77dc086d32a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a true statement?",
    "choices": [
      {
        "id": 1,
        "text": "Fructose is absorbed in the intestine by secondary active transport"
      },
      {
        "id": 2,
        "text": "SGLT2 is involved in absorption of monosaccharide in intestine"
      },
      {
        "id": 3,
        "text": "GLUT2 is involved in transport of glucose from enterocyte into interstitium"
      },
      {
        "id": 4,
        "text": "GLUT4 is responsible for basal glucose uptake in many organs"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>GLUT2</strong> is involved in the <strong>transport</strong> of <strong>glucose</strong> from the <strong>enterocyte into</strong> the <strong>interstitium</strong> (or out of the enterocytes).&nbsp;</p>\n<p>The image below shows the function of GLUT 2 on enterocytes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/da36e19b135d4238be62373aa755535ex1280x1133.JPEG"
    ]
  },
  {
    "text": "Which of the following statements regarding smooth muscle is false?",
    "choices": [
      {
        "id": 1,
        "text": "Unitary smooth muscle has an unstable membrane potential"
      },
      {
        "id": 2,
        "text": "Dense Bodies are present instead of Z lines"
      },
      {
        "id": 3,
        "text": "It can exert a variable tension at any given length"
      },
      {
        "id": 4,
        "text": "Sympathetic stimulation produces excitatory membrane potentials"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Sympathetic stimulation</strong>&nbsp;(norepinephrine) of a smooth muscle produces<strong> inhibitory potentials and relaxation.</strong></p>\n<p>Parasympathetic stimulation (or acetylcholine) causes depolarization and contraction in the smooth muscle.</p>\n<p>Smooth muscle can be divided into:</p>\n<ul>\n<li><strong>Unitary smooth muscle</strong> - has low-resistance gap junctions between individual muscle cells and functions in a syncytial manner</li>\n<li><strong>Multiunit smooth muscle</strong> -&nbsp; made up of individual units with few or nil gap junctions.</li>\n</ul>\n<p>Blood vessels have both unitary and multiunit smooth muscle in their walls.</p>\n<p>Option A: Unitary smooth muscle has an<strong> unstable membrane potential</strong> with continuous irregular contractions independent of its nerve supply. This state of partial contraction is called <strong>tonus or tone.</strong></p>\n<p>Option B: <strong>Dense bodies</strong> are present instead of Z lines in smooth muscle. These are bound to actin filaments by&nbsp;&alpha;-actinin.</p>\n<p>Option C: Smooth muscle can exert <strong>variable tension at any given length.</strong> This property is called <strong>plasticity</strong>. When a unitary smooth muscle is stretched, it first exerts increased tension. However, if it is held at this length after stretching, the tension gradually decreases. This is referred to as plasticity.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The intrapleural pressure is______",
    "choices": [
      {
        "id": 1,
        "text": "Always positive"
      },
      {
        "id": 2,
        "text": "Sometimes positive and sometimes negative"
      },
      {
        "id": 3,
        "text": "Negative except in forced expiration"
      },
      {
        "id": 4,
        "text": "Negative at apex but positive at base"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Intrapleural pressure&nbsp;is <strong>usually negative.</strong>&nbsp;(normally -2.5 mmHg)</p>\n<p>During inspiration, it becomes more negative. (-6 mmHg).&nbsp;</p>\n<p>During forced expiration, contraction of the expiratory muscles raises intrapleural pressure to a positive value.</p>\n<p>Intrapleural pressure&nbsp;is the pressure of the fluid in the thin space between the visceral and parietal pleura.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Peripheral chemoreceptors are primarily sensitive to_____",
    "choices": [
      {
        "id": 1,
        "text": "PaCO2"
      },
      {
        "id": 2,
        "text": "H+"
      },
      {
        "id": 3,
        "text": "PaO2"
      },
      {
        "id": 4,
        "text": "HCO3-"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>peripheral chemoreceptors</strong>, located in the <strong>carotid and aortic bodies</strong>, are primarily <strong>sensitive to decrease in arterial PO<sub>2</sub></strong>, although high PaCO<sub>2</sub> and low pH also stimulates them and enhance their sensitivity to hypoxia.</p>\n<p>Carotid body is more sensitive than aortic body.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to Herrington classification, the decerebrate rigidity is characterized by all except ______",
    "choices": [
      {
        "id": 1,
        "text": "Rigidity occurs in all the muscles of the body"
      },
      {
        "id": 2,
        "text": "Increase in the rate of discharge of the \u0263 efferent neuron"
      },
      {
        "id": 3,
        "text": "Increased excitability of the motor neuron pool"
      },
      {
        "id": 4,
        "text": "Decerebration produces no phenomenon akin to spinal shock"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In decerebrate rigidity, there is rigidity in <strong>extensor muscles of all the four extremities</strong> (not all muscles of the body).</p>\n<p><strong>Decerebration</strong></p>\n<ul>\n<li>Complete transection of the brain stem between the superior and inferior colliculi permits the brain stem pathways to function independently of their input from higher brain structures. This is called a <strong>mid-collicular decerebration.</strong></li>\n<li>This lesion interrupts all input from the cortex (corticospinal and corticobulbar tracts) and red nucleus (rubrospinal tract), primarily to distal muscles of the extremities.</li>\n<li>The excitatory and inhibitory reticulospinal pathways (primarily to postural extensor muscles) remain intact.</li>\n<li>The dominance of drive from ascending sensory pathways to the excitatory reticulospinal pathway leads to hyperactivity in extensor muscles in all four extremities which are called <strong>decerebrate rigidity.</strong></li>\n<li>The excitatory input from the reticulospinal pathway activates \u03b3-motor neurons which indirectly activate \u03b1-motor neurons (via Ia spindle afferent activity). This is called the <strong>gamma loop.</strong></li>\n</ul>\n<p>Option 4. Spinal shock is different from decebrate rigidity as it is a transient state that can occur immediately after a spinal cord injury. It is characterized by a temporary loss or depression of spinal reflexes below the level of the injury.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient sustains an injury to the lateral portion of the postcentral gyrus in the right hemisphere. Loss of sensation is likely to be seen at which of the following sites in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Left lower limb"
      },
      {
        "id": 2,
        "text": "Right lower limb"
      },
      {
        "id": 3,
        "text": "Left facial area"
      },
      {
        "id": 4,
        "text": "Right facial area"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In this case, injury to the <strong>lateral portion</strong> of the&nbsp;<strong>postcentral gyrus</strong> in the <strong>right hemisphere</strong> would result in loss of sensation in the <strong>left facial area.</strong></p>\n<p>Each hemisphere receives somatic sensory information from the <strong>opposite side</strong> of the body in the <strong>postcentral gyrus </strong>(somatosensory area).</p>\n<p>The <strong>lateral portion</strong> of the postcentral gyrus receives somatic sensory information from the <strong>facial</strong> and<strong> neck region</strong> while the <strong>medial portion</strong> of the postcentral gyrus received somatic sensory information from the <strong>trunk</strong> and<strong> appendages</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/97f9a8cb2b3249b4999964a582955ec5x1024x1020.JPEG"
    ]
  },
  {
    "text": "Which of the following oxygen-hemoglobin dissociation curves corresponds to blood from an adult (dark blue line) and blood from a fetus (light blue line)?",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Curve C</strong> corresponds to blood from an adult (dark blue line) and blood from a fetus (light blue line).&nbsp;The fetal oxygen-hemoglobin dissociation curve is<strong>&nbsp;shifted to the left</strong> relative to the adult curve.</p>\n<p>The <strong>fetal hemoglobin (Hb F) has a greater affinity for O<sub>2</sub></strong> than adult hemoglobin (Hb A). This facilitates the movement of O<sub>2</sub> from the mother to fetus. The cause of this greater affinity is the <strong>poor binding of 2,3-DPG by \u0263 polypeptide chains</strong> that replace &beta; chains in Hb F. The fetal oxygen-hemoglobin dissociation curve is thus<strong> shifted to the left</strong> relative to the adult curve. Typically, fetal arterial Po<sub>2</sub>&nbsp;is low, hence leftward shift enhances placental uptake of O<sub>2</sub>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/847d892dc2c54b16a0ff618a7facd140.JPEG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Physiology Test I';
        const quizFilename = 'physiology-test-i-25b2d72a.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>