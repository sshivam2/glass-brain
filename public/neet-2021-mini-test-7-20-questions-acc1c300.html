<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neet 2021 Mini Test 7  (20 Questions) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2020-21
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A 7-year-old girl presents with a sore throat, fever, tonsillar exudates, and cervical lymphadenopathy for 3 days. She has a history of frequent sore throats requiring prolonged antibiotics, easy bruising, and bruises of different ages on her arms.  She is fair-skinned and has blonde hair.  Her birth and family history are unremarkable. What is the likely defect?",
    "choices": [
      {
        "id": 1,
        "text": "Disorder of T cell"
      },
      {
        "id": 2,
        "text": "Disorder of B cell"
      },
      {
        "id": 3,
        "text": "Disorder of complement"
      },
      {
        "id": 4,
        "text": "Disorder of phagocytosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This clinical vignette is strongly suggestive of <strong>Chediak Higashi syndrome</strong> which is a <strong>disorder </strong>of <strong>phagocytosis</strong>.</p>\n<p>It is\u00a0an <strong>autosomal recessive disorder</strong>\u00a0that causes a\u00a0<strong>loss-of-function mutation</strong> of the\u00a0<strong>LYST</strong>\u00a0gene encoding for the\u00a0<strong>lysosomal trafficking regulator</strong>\u2014a protein required for the normal packaging and distribution of granules. This defect results in defective chemotaxis,\u00a0phagolysosome fusion,\u00a0degranulation of T-cells and NK cells, and\u00a0ADP granule function in platelets.\u00a0</p>\n<p>Patients with <strong>Chediak-Higashi syndrome</strong> may present clinically with <strong>persistent</strong> skin, respiratory, and gastrointestinal infections, particularly due to <em><strong>Staphylococcus aureus</strong></em>. They may also exhibit <strong>partial oculo-cutaneous albinism</strong>, and <strong>platelet dysfunction</strong> leading to increased bleeding time, easy bruising, and <strong>excessive bleeding</strong> despite<strong> normal platelet counts</strong>. Neurological dysfunctions such as <strong>progressive peripheral neuropathy</strong>, <strong>nystagmus</strong>, and <strong>mental retardation</strong> are common, and patients may experience an <strong>accelerated phase</strong> with <strong>lymphoma-like illness</strong> and <strong>hemophagocytic lymphohistiocytosis</strong>. The latter is a life-threatening condition characterized by prolonged high fever, hepatomegaly, splenomegaly, and cytopenia, and it carries a very poor prognosis.</p>\n<p>Diagnosis can be done by detecting the presence of <strong>peroxidase-positive giant primary granules</strong> in neutrophils and other granule-bearing cells on Wright\u2019s stain. Genetic detection may be confirmatory.\u00a0</p>\n<p>The image below shows a<strong>\u00a0</strong>neutrophil in Chediak Higashi Syndrome\u00a0showing polymorphonuclear leukocytes with abundant giant intracytoplasmic granules-</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/526673e86985427bb1060879324808b3x472x132.PNG"
    ]
  },
  {
    "text": "Which of the following mucopolysaccharidosis does not show leukocyte inclusions?",
    "choices": [
      {
        "id": 1,
        "text": "Hunter Disease"
      },
      {
        "id": 2,
        "text": "Hurler Disease"
      },
      {
        "id": 3,
        "text": "Morquio Disease"
      },
      {
        "id": 4,
        "text": "Maroteaux-Lamy disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Morquio disease does not show leukocyte inclusions.</p>\n<p>Morquio disease is different from other mucopolysaccharidoses as it presents as <strong>spondyloepiphyseal skeletal dysplasia</strong>.&nbsp;</p>\n<table class=\"t1\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr>\n<td class=\"td1\" colspan=\"8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>&nbsp;</strong></span></p>\n<p class=\"p1\"><span class=\"s1\"><strong>Manifestations in Mucopolysaccharidoses</strong></span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td2\" colspan=\"8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong><span class=\"Apple-converted-space\">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>Mucopolysaccharidosis Type</strong></span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td3\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>MANIFESTATIONS</strong></span></p>\n</td>\n<td class=\"td4\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>I-H</strong></span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>I-S</strong></span></p>\n</td>\n<td class=\"td6\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>II</strong></span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>III</strong></span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>IV</strong></span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>VI</strong></span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\"><strong>VII</strong></span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td7\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Mental deficiency</span></p>\n</td>\n<td class=\"td8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td10\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">&plusmn;</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">&plusmn;</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td11\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Coarse facial features</span></p>\n</td>\n<td class=\"td12\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td13\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td14\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td13\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td13\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td13\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td13\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">&plusmn;</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td7\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Corneal clouding</span></p>\n</td>\n<td class=\"td8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td10\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">&plusmn;</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td3\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Visceromegaly</span></p>\n</td>\n<td class=\"td4\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td6\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td7\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Short stature</span></p>\n</td>\n<td class=\"td8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td10\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td3\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Joint contractures</span></p>\n</td>\n<td class=\"td4\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td6\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">-</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td7\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Dysostosis multiplex</span></p>\n</td>\n<td class=\"td8\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td10\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">(+)</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td9\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n</tr>\n<tr>\n<td class=\"td3\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">Leucocyte inclusions</span></strong></p>\n</td>\n<td class=\"td4\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">+</span></strong></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">(+)</span></strong></p>\n</td>\n<td class=\"td6\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">+</span></strong></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">+</span></strong></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">-</span></strong></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">+</span></strong></p>\n</td>\n<td class=\"td5\" valign=\"top\">\n<p class=\"p1\"><strong><span class=\"s1\">+</span></strong></p>\n</td>\n</tr>\n<tr>\n<td class=\"td15\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">Mucopolysacchariduria</span></p>\n</td>\n<td class=\"td16\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td17\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td18\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td17\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td17\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td17\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n<td class=\"td17\" valign=\"top\">\n<p class=\"p1\"><span class=\"s1\">+</span></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p class=\"p1\"><span class=\"s1\">I-H: Hurler disease</span></p>\n<p class=\"p1\"><span class=\"s1\"> I-S: Scheie disease</span></p>\n<p class=\"p1\"><span class=\"s1\">II: Hunter disease</span></p>\n<p class=\"p1\"><span class=\"s1\">III: Sanfilippo disease</span></p>\n<p class=\"p1\"><strong><span class=\"s1\">IV: Morquio disease</span></strong></p>\n<p class=\"p1\"><span class=\"s1\">VI: Maroteaux-Lamy disease</span></p>\n<p class=\"p1\"><span class=\"s1\">VII: Sly disease.</span></p>\n<p class=\"p1\"><strong>Mucopolysaccharidoses</strong>&nbsp;are a group of&nbsp;metabolic disorders&nbsp;caused by the absence or malfunctioning of&nbsp;lysosomal&nbsp;enzymes needed to break down molecules called&nbsp;glycosaminoglycans.</p>\n<ul>\n<li><strong>Most common MPS</strong>: Sanfilippo &gt; Hurler&rsquo;s and Hunter&rsquo;s</li>\n<li><strong>MPS with no mental retardation</strong>: Scheie&rsquo;s disease, Morquio syndrome, and Maroteaux&ndash;Lamy syndrome.</li>\n<li><strong>MPS with no corneal clouding:</strong> Hunter&rsquo;s disease and Sanfilippo syndrome</li>\n<li><strong>MPS with XLR inheritance:</strong> Hunter&rsquo;s disease</li>\n<li><strong>MPS with no visceromegaly:</strong> Morquio&rsquo;s disease</li>\n<li>Skeletal deformity associated with all MPS: Dysostosis multiplex</li>\n<li><strong>MPS with no leucocyte inclusions:</strong> Morquio&rsquo;s disease</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<td width=\"199\">\n<p>&nbsp;<strong>Type</strong></p>\n</td>\n<td width=\"240\">\n<p><strong>&nbsp;Enzyme involved</strong></p>\n</td>\n<td width=\"170\">\n<p><strong>Chromosome&nbsp;</strong></p>\n</td>\n</tr>\n<tr>\n<td width=\"199\">\n<p>&nbsp;Morquio syndrome A</p>\n</td>\n<td width=\"240\">&nbsp;Galactosamine 6-sulfatase</td>\n<td width=\"170\">Chromosome 16</td>\n</tr>\n<tr>\n<td width=\"199\">\n<p>&nbsp;Morquio syndrome B</p>\n</td>\n<td width=\"240\">\n<p>&nbsp;&beta;-Galactosidase</p>\n</td>\n<td width=\"170\">\n<p>Chromosome&nbsp; 4</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old woman presents with acute onset abdominal pain, nausea, and vomiting. She has a low-grade fever, with a pulse rate of 90 bpm and blood pressure of 126/84 mm Hg. She has regular menstrual cycles of 28 days. Pelvic examination shows a tender right adnexal mass.  Ultrasound scan reveals a swollen oedematous ovary, globular in shape with disruption in adnexal flow seen on doppler. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rupture of Graafian follicle"
      },
      {
        "id": 2,
        "text": "Tubo-ovarian abcsess"
      },
      {
        "id": 3,
        "text": "Ectopic pregnancy"
      },
      {
        "id": 4,
        "text": "Ovarian torsion"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above clinical scenario is suggestive of <strong>ovarian torsion.</strong></p>\n<p>Torsion of the ovaries is a <strong>gynecological emergency</strong> and is most commonly seen in women of the reproductive age group. Ovarian cysts including mucous cystadenomas and dermoid cysts have the highest risks of undergoing torsion. Adnexal masses measuring &gt;6 cm in diameter have the highest rates of torsion.</p>\n<p>A patient with torsion presents with <strong>sharp lower abdominal pain</strong>, usually localized to the involved side with radiation to the flank, groin, or thigh. <strong>Nausea and vomiting</strong> are commonly associated. Adnexal necrosis may cause a <strong>low-grade fever</strong>.\u00a0</p>\n<p>During torsion, the low-pressure veins are initially compressed by the twisting pedicle. This leads to continuous inflow with decreased outflow causing <strong>stromal edema and congestion</strong>. The increasing stromal swelling later compresses the arteries causing ischemia and necrosis.</p>\n<p>On USG, the ovary appears enlarged, globular, and has a heterogenous appearance compared to the contralateral ovary due to edema, engorgement, and hemorrhage. Twisting of the vascular pedicle may give rise to a '<strong>whirlpool sign</strong>', a round hyperechoic structure with concentric hypoechoic stripes. <strong>Colour Doppler</strong> sonography should be performed in suspected torsion as it may show <strong>disruption to blood flow,</strong> which is highly suggestive of torsion. However, some cases of incomplete torsion or chronic torsion, may not show decreased flow on Doppler. MRI or CT imaging can be used in patients with normal Doppler but with characteristic signs and symptoms of torsion, to confirm or rule out the diagnosis.</p>\n<p>Management involves <strong>urgent laparotomy or laparoscopic evaluation.</strong> Salvage of the involved adnexa with the removal of any associated cyst/tumor and possible oophoropexy are the goals. However, necrosis of the adnexa necessitates the removal of the adnexal structures.</p>\n<p>Other options:</p>\n<p>Option A:\u00a0In a woman of reproductive age group, ovulatory pain following the rupture of Graafian follicle (ovulation) may present similarly with lower abdominal pain, nausea, and vomiting. This patient has a regular 28-day cycle and should have ovulated around the 14<sup>th</sup> day.\u00a0</p>\n<p>Option B: Tubo-ovarian abscess presents with a more indolent course, and may be associated with fever. The characteristic appearance on USG is of a complex, multilocular mass.\u00a0</p>\n<p>Option C: Ectopic pregnancy presents with nausea, vomiting, and adnexal pain, with or without a mass. However, this patient has a negative UPT, and serum\u00a0\u03b2-HCG level is in the non-pregnant range (&lt; 2 mIU/L) excluding ectopic pregnancy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old boy with sickle-cell anemia was brought by his parents with complaints of fever and a runny nose. The child has a maculopapular rash with a lacy pattern on his trunk and extremities, sparing the palm and soles. He also has a rash on his face as shown below. What specific complication would you anticipate in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Coronary aneurysm"
      },
      {
        "id": 2,
        "text": "Subacute sclerosing panencephalitis"
      },
      {
        "id": 3,
        "text": "Transient aplastic crisis"
      },
      {
        "id": 4,
        "text": "Acute poststreptococcal glomerulonephritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient's clinical symptoms and the typical <strong>\u2018slapped cheek appearance\u2019 </strong>that is the erythematous facial flushing as\u00a0shown in the image are suggestive of\u00a0<strong>erythema infectiosum</strong>. A\u00a0<strong>transient aplastic crisis</strong> is a complication that is anticipated in this patient.\u00a0</p>\n<p>Erythema infectiosum or<strong>\u00a0fifth disease\u00a0</strong>is a viral infection caused by <strong>parvovirus B19</strong>. It usually has three phases:</p>\n<ul>\n<li><strong>First</strong>\u00a0phase - sudden onset\u00a0diffuse and macular,\u00a0asymptomatic erythema of the cheeks or\u00a0<strong>slapped cheek\u00a0</strong>appearance.<strong>\u00a0</strong>Prodromal symptoms may occur</li>\n<li><strong>Second</strong>\u00a0phase - begins after 1\u20134 days, with discrete erythematous\u00a0<strong>macules</strong>\u00a0and\u00a0<strong>papules</strong>\u00a0on the\u00a0<strong>proximal extremities</strong>\u00a0and later the\u00a0<strong>trunk</strong></li>\n<li>Third phase -\u00a0<strong>recurring</strong>\u00a0stage, the eruption is greatly reduced or invisible, only to recur after the patient is exposed to heat or sunlight, or in response to crying or exercise</li>\n</ul>\n<p>Parvovirus B-19-induced transient <strong>aplastic crisis</strong> is a complication seen in patients with all types of chronic hemolytic anemia like<strong> sickle-cell disease</strong>, thalassemia, hereditary spherocytosis, and pyruvate kinase deficiency.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Coronary aneurysm</strong> is a complication of <strong>Kawasaki disease</strong>. Patients with this disease present with high fever for<strong> at least 5 days</strong> along with at least four out of the five characteristic features: polymorphous exanthem, bilateral nonexudative conjunctivitis with limbal sparing, lip cracking, and oral mucosal erythema with <strong>strawberry tongue appearance</strong>, <strong>cervical lymphadenopathy</strong>, and extremity involvement - erythema of palms and soles with edema of hands and legs.</p>\n<p>The image given below shows strawberry tongue and erythema of hands seen in Kawasaki disease.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/64a22cd898aa42e18449475d3ffb082c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0b7cac95fabf4432aec5e8b82abe7fcdx720x1156.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0158865dfd834b8395e4122cdab48037x685x1053.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f6a61c45d4f448fea0ae6ce33b3832bex296x718.JPEG"
    ]
  },
  {
    "text": "Which of the following is used for the imaging of Meckel\u2019s diverticulum?",
    "choices": [
      {
        "id": 1,
        "text": "Tc 99m pertechnetate"
      },
      {
        "id": 2,
        "text": "Tc pyrophosphate"
      },
      {
        "id": 3,
        "text": "Tc 99m DTPA"
      },
      {
        "id": 4,
        "text": "Tc 99m DMSA"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Technitium (Tc) 99m Pertechnetate</strong> is used for the <strong>imaging of Meckel's diverticulum.</strong></p>\n<p>Uses of Tc-99m pertechnetate include -</p>\n<ul>\n<li>Thyroid imaging for thyroid nodules and ectopic thyroid</li>\n<li>Salivary gland imaging</li>\n<li>Meckel scan</li>\n<li>Gastric emptying studies, intestinal and rectal functional studies.</li>\n<li>Vesicoureteral reflux imaging.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image below shows the histology of a normal lymph node. Which of the following sites marked in the image, allows affinity maturation of B lymphocytes?",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "4"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>B-Lymphocytes</strong>\u00a0undergo affinity maturation in the <strong>germinal center </strong>(marked as 3)\u00a0of lymph nodes and produce antibodies.</p>\n<p>The structures marked in the above <strong>histological section of the lymph node</strong> are as follows:</p>\n<p>1 - Capsule;</p>\n<p>2 - Subcapsular sinus;</p>\n<p>3 - Germinal center;</p>\n<p>4 - Lymphoid nodule;</p>\n<p>5 - Trabeculae\u00a0</p>\n<p><strong>Histology of lymph node:</strong></p>\n<div class=\"page\" title=\"Page 110\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Lymph nodes are surrounded by a <strong>capsule</strong> with a <strong>subcapsular sinus</strong> below the capsule. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Each lymph node consists of a </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">connective tissue framework</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> and numerous lymphocytes of all types which are arranged in a stroma of reticulin fibers and cells to form </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">3 major regions</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> within each Lymph node:</span></p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Cortex</strong>\u00a0- It contains subcapsular sinuses, lymphoid nodules, and densely packed lymphocytes. It\u00a0<strong>stains darkly. </strong>Each nodule has a paler staining <strong>germinal center</strong> surrounded by a zone of densely packed lymphocytes. It contains B lymphocytes and follicular dendritic cells.</li>\n<li><span class=\"s1\"><strong>P</strong><strong>aracortex\u00a0</strong>(deeper cortex)</span>\u00a0- It lacks nodules and has fewer lymphocytes. It is, therefore, <strong>lighter homogenously staining. </strong>It contains T-lymphocytes and interdigitating dendritic cells.</li>\n<li><span class=\"s1\"><strong>M</strong><strong>edulla -</strong></span>\u00a0 with prominent draining sinusoids adjacent to the hilum. It has less densely packed lymphocytes arranged in medullary cords and macrophages.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a748f6796e7c49d49bf0c65dd5546dd5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5fb963a2064449dea9ab6cca527388ebx743x681.PNG"
    ]
  },
  {
    "text": "A 20-year-old patient with traumatic perforation of the tympanic membrane is scheduled to undergo a tympanic membrane grafting. Which of the following inhalational agents would you avoid in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Desflurane"
      },
      {
        "id": 2,
        "text": "Halothane"
      },
      {
        "id": 3,
        "text": "Sevoflurane"
      },
      {
        "id": 4,
        "text": "Nitrous oxide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The inhalational agent to be <strong>avoided</strong> in a patient undergoing tympanic membrane grafting&nbsp;is<strong>&nbsp;nitrous oxide</strong>.</p>\n<p>Nitrous oxide has the potential to expand air containing cavities as it can diffuse into and accumulate in them. Hence, it should be avoided in patients undergoing&nbsp;tympanic membrane grafting.</p>\n<p>Other conditions in which nitrous oxide might be hazardous include:</p>\n<ul>\n<li>venous or arterial air embolism</li>\n<li>pneumothorax</li>\n<li>acute intestinal obstruction with bowel distention</li>\n<li>intracranial air (pneumocephalus following dural closure or pneumoencephalography)</li>\n<li>pulmonary air cysts</li>\n<li>intraocular air bubbles</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old woman alleges that a man assaulted her the previous night, causing a wound over her forearm. According to her history, the wound should be about 12\u201314 hours old. If the history regarding the timing of the injury is accurate, you would expect the abrasion to appear as",
    "choices": [
      {
        "id": 1,
        "text": "A fresh bright red lesion without any scab"
      },
      {
        "id": 2,
        "text": "A scab that is about to fall off"
      },
      {
        "id": 3,
        "text": "A brownish-black scab"
      },
      {
        "id": 4,
        "text": "A bright red scab"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>An abrasion that was sustained 12 to 14 hours ago would show a <strong>bright red scab</strong> as&nbsp;lymph and blood dry up.</p>\n<p>Abrasions are superficial wounds produced due to the destruction of the epidermis. Although the exact age of the wound cannot be determined, based on the healing and appearance of the wound, an estimated time can be given.</p>\n<p>Abrasion types:</p>\n<ul>\n<li><strong>Linear</strong> abrasions (scratches): Caused by relative movement of a pointed object on the skin. It leaves a clean area at the start and tags at the end.\n<ul>\n<li>e.g. nail, thorn, or the point of a sword or knife.</li>\n</ul>\n</li>\n<li><strong>Grazed</strong> abrasions (sliding /scrapping/grinding abrasion)<strong>: </strong>Caused by relative movement of a rough surface on a wide area of skin.\n<ul>\n<li>known as brush burns.</li>\n<li>e.g. fall, a victim being dragged on the ground, road traffic accidents.</li>\n</ul>\n</li>\n<li><strong>Impact</strong> abrasions (imprint abrasions): Caused by the impact of a rigid hard rough surface over a localized area of the skin, without any movement\n<ul>\n<li>e.g. fingernails, tires,&nbsp;grills, bicycle chains, or bite marks.</li>\n</ul>\n</li>\n<li><strong>Friction</strong> abrasions (pressure abrasion): Caused by pressure upon the skin with an agent with a smooth surface, accompanied by movement.\n<ul>\n<li>e.g. ligature marks around the neck in hanging, strangulation.</li>\n</ul>\n</li>\n<li><strong>Patterned abrasion</strong>:&nbsp;Caused by impact abrasion or pressure abrasion, reproducing the pattern of the object causing it</li>\n</ul>\n<p>Note: <strong>Grazed abrasion</strong> is the most common type of abrasion.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 54-year-old man comes for an evaluation of blood pressure. He had a history of occasional flank pain and a family history of stroke in his father. His BP is 160/90 mm of Hg in both arms. Further evaluation with CT was done and shown below. Which of the following is the most common extrarenal manifestation of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Pancreatic cysts"
      },
      {
        "id": 2,
        "text": "Hepatic cysts"
      },
      {
        "id": 3,
        "text": "Lung cysts"
      },
      {
        "id": 4,
        "text": "Splenic cysts"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient's presentation of <strong>hypertension</strong>, family history of <strong>stroke</strong>, along with the CT findings showing&nbsp;<strong>bilaterally enlarged kidneys</strong> with <strong>multiple cysts </strong>and liver cysts suggests a diagnosis of <strong>autosomal dominant polycystic kidney disease </strong>(ADPKD). The most common extrarenal manifestation seen in ADPKD is <strong>hepatic cysts.</strong></p>\n<p>ADPKD is caused by mutations in <strong>PKD1 and PKD2</strong> which code for polycystin 1 and 2 respectively.&nbsp;They present incidentally with hypertension, abdominal mass or flank pain. Hematuria can also be present&nbsp;</p>\n<p>The most common extrarenal manifestation is <strong>hepatic cysts</strong> which are <strong>derived from the biliary epithelium</strong>.<strong>&nbsp;</strong>Other extra-renal manifestations of ADPKD:</p>\n<ul>\n<li>Pancreatic cysts</li>\n<li>Berry aneurysms</li>\n<li>Colonic diverticula</li>\n<li>Abdominal hernias</li>\n<li>Mitral valve prolapse&nbsp;</li>\n</ul>\n<p><strong>Management</strong> comprises of blood pressure control, antibiotics like trimethoprim-sulfamethoxazole, quinolones and chloramphenicol for 4-6 weeks, and analgesics. Surgical decompression for cysts may be done.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7e626febca4946e08f024a0bccec3c58.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Among the following women with bleeding per vaginum (PV) who are being evaluated, which would be diagnosed as secondary post-partum hemorrhage?",
    "choices": [
      {
        "id": 1,
        "text": "A 32 year old woman at 40 weeks gestation in second stage of labour"
      },
      {
        "id": 2,
        "text": "A 26 year old woman who delivered twins vaginally 6 hours ago"
      },
      {
        "id": 3,
        "text": "A 29 year old woman who delivered a preterm baby 1 week ago"
      },
      {
        "id": 4,
        "text": "A 36 year old woman at 32 weeks gestation bleeding PV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A 29-year-old woman who delivered a preterm baby 1 week ago, now having bleeding per vaginum has <strong>secondary post-partum hemorrhage (PPH)</strong>.</p>\n<p>Secondary postpartum hemorrhage is defined as bleeding from or into the genital tract, <strong>occurring beyond 24 hours of birth</strong> and within the puerperium.&nbsp;</p>\n<p>Causes of secondary PPH include:&nbsp;</p>\n<ul>\n<li>Retained bits of placental cotyledons or membranes</li>\n<li>Infection of deep cervicovaginal laceration and separation of the slough</li>\n<li>Endometritis and subinvolution of the site of the placenta&nbsp;</li>\n<li>Withdrawal bleeding following estrogen therapy for lactation suppression</li>\n<li>Rare causes - chorionepithelioma, puerperal inversion of the uterus</li>\n</ul>\n<p>Other Options:</p>\n<p>Options A and D: These women have <strong>antepartum hemorrhage</strong>. Antepartum hemorrhage is defined as <strong>bleeding</strong> from or into the genital tract <strong>after the 28th week of pregnancy</strong> but <strong>before the birth of the baby</strong>. Therefore a patient in the second stage of labour and a patient with bleeding PV at 32 weeks gestation have antepartum hemorrhage.</p>\n<p>Option B: This woman has <strong>primary PPH.</strong>&nbsp;Bleeding <strong>within 24</strong> <strong>hours following the birth</strong> of the baby. Common causes of primary PPH include atony of the uterus, trauma during labor, retained tissues, and coagulopathies.&nbsp;Primary PPH is of two types:</p>\n<ul>\n<li>Third stage hemorrhage - bleeding before the expulsion of placenta</li>\n<li>True post-partum hemorrhage -bleeding after the expulsion of placenta</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An MRI of a female patient with new-onset seizures revealed a large, ring-enhancing mass with central necrosis and surrounding edema, crossing the corpus callosum into both frontal lobes. Subsequently, she underwent surgical resection of the mass. Grossly, it was a grayish-white solid tumor with yellowish areas of necrosis, with interspersed areas of hemorrhages. Microscopy findings are shown below. Identify the condition.",
    "choices": [
      {
        "id": 1,
        "text": "Glioblastoma"
      },
      {
        "id": 2,
        "text": "Craniopharyngioma"
      },
      {
        "id": 3,
        "text": "Meningioma"
      },
      {
        "id": 4,
        "text": "Oligodendroglioma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical vignette with MRI findings is strongly suggestive of <strong>glioblastoma</strong> or grade IV astrocytoma.</p>\n<p>It affects people usually in the sixth or seventh decade. These tumors may arise de novo or may result from a malignant transformation of lower-grade astrocytomas. <strong>Mutations </strong>of<strong> isocitrate dehydrogenase (<em>IDH</em>), <em>PTEN</em>,</strong> and <strong>epidermal growth factor receptor (<em>EGFR</em>)</strong>&nbsp;gene are implicated in the pathogenesis.</p>\n<p>They preferentially spread along the condensed white matter tracts such as corticospinal tracts and corpus callosum and can give rise to the&nbsp;<strong>butterfly glioma,</strong>&nbsp;involving the contralateral hemisphere.&nbsp;</p>\n<p>Clinically, patients present with&nbsp;headaches, seizures due to raised intracranial pressure, or focal neurologic deficits, depending upon the site involved.&nbsp;</p>\n<p>Grossly, glioblastomas are found <strong>to infiltrate</strong>&nbsp;the brain tissue and are poorly delineated. They have grayish tumor cells with central yellowish necrosis and multiple areas of hemorrhages. Microscopically, they are composed of <strong>poorly differentiated pleomorphic astrocytic cells</strong> with nuclear atypia and high mitotic activity. <strong>Necrosis</strong> and florid <strong>microvascular proliferation</strong> are characteristic. They exhibit <strong>pseudopalisading</strong>&mdash;dense arrangement of tumor cells&nbsp;lining up around the foci of tumor necrosis.</p>\n<p>Radiologically, glioblastomas appear as a large <strong>ring-enhancing heterogeneous</strong> mass with <strong>central necrosis</strong> and <strong>surrounding edema</strong> that <strong>crosses</strong> the <strong>corpus callosum</strong> into both frontal lobes. The surrounding edema may be interspersed with infiltrating tumor cells. The tumor may show partial or complete enhancement on contrast study.&nbsp;</p>\n<p>Standard treatment includes <strong>surgery</strong> followed by a combination of <strong>radiotherapy</strong> and chemotherapy with <strong>temozolomide</strong> following surgical resection.&nbsp;<strong>Bevacizumab</strong>, which is a vascular endothelial growth factor (VEGF) antibody, may be used in the treatment of recurrent glioblastoma.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/82ce8e5c16dd462283180f3df27da23d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0b7b7c9e2e704877b01e0f9206b1e415x720x534.JPEG"
    ]
  },
  {
    "text": "A 50-year-old lady presents with a 5x4x3cm lump in the right breast. It is hard in consistency and is fixed to the skin. On examination, there are fixed and matted axillary lymph nodes in the left and right axilla. Mammography reveals the presence of microcalcifications with irregular spiculated margins. A tru-cut biopsy is performed which shows ductal carcinoma. What is the staging of the tumor as per the recent AJCC classification?",
    "choices": [
      {
        "id": 1,
        "text": "IIIB"
      },
      {
        "id": 2,
        "text": "IIB"
      },
      {
        "id": 3,
        "text": "IIIC"
      },
      {
        "id": 4,
        "text": "IV"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>A<strong> contralateral lymph node involvement</strong> is considered <strong>metastasis.\u00a0</strong>The presence of metastasis classifies the tumor under <strong>stage IV.</strong></p>\n<p>The TNM status in the above scenario is:</p>\n<ul>\n<li><strong>Tumor:\u00a0</strong>Skin involvement over the breast- peau d'orange appearance classifies this as stage\u00a0<strong>T4b</strong>.</li>\n<li><strong>Nodes: </strong>Ipsilateral fixed or matted axillary lymph nodes come under <strong>N2A</strong>.</li>\n<li><strong>Metastasis: </strong>Contralateral lymph node involvement (Here, mass is on the right breast and axillary lymph nodes on the left side are involved) is considered as <strong>M1</strong>.</li>\n</ul>\n<p>Some important considerations while staging a breast tumor:</p>\n<ul>\n<li>In tumor size assessment, the <strong>greatest dimension</strong> is considered. For example, if a mass is 6*2cm in size, 6cm is taken into account and it comes under T3 (&gt;5cm).</li>\n<li>Any skin involvement other than those mentioned under T4b and T4d is not considered for staging. Thus, skin changes like <strong>dimpling of skin</strong> or <strong>nipple retraction</strong> are not considered for staging.</li>\n<li><strong>Supraclavicular</strong> lymph node involvement indicates <strong>N3c</strong>.</li>\n<li>Metastasis to\u00a0<strong>any contralateral lymph node</strong>\u00a0or metastasis to any lymph node other than those mentioned in N staging is considered\u00a0<strong>distant metastasis (M1). </strong>Thus, the involvement of the <strong>cervical</strong> lymph node (ipsilateral or contralateral) would be considered a distant metastasis.</li>\n<li>If two masses are present in the same breast, staging is according to the bigger mass.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/322534da051e4580a5c79821ecc88bff.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient is undergoing an evaluation for shortness of breath. A test to assess the diffusing capacity of the lungs is done. This is measured using one of the following gas components?",
    "choices": [
      {
        "id": 1,
        "text": "Carbon monoxide"
      },
      {
        "id": 2,
        "text": "Nitrous oxide"
      },
      {
        "id": 3,
        "text": "Carbon dioxide"
      },
      {
        "id": 4,
        "text": "Nitric oxide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>diffusion capacity</strong> of the lungs is measured with <strong>carbon monoxide (CO).</strong></p>\n<p>The diffusing of CO is diffusion-limited and hence the diffusion capacity for CO called&nbsp;<strong>D<sub>LCO</sub></strong>&nbsp;is measured as an index of diffusing capacity of the lung.</p>\n<p>The diffusing capacity of the lung for a given gas is directly proportional to the surface area of the alveolar-capillary membrane and inversely proportional to its thickness.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/d6189195e876496c9bfe7a5b847211a7x992x158.PNG"
    ]
  },
  {
    "text": "A 63-year-old woman presents with a right-sided headache for 2 weeks along with jaw pain. It has progressively increased in severity. Of late, she also has a loss of appetite, malaise, and fatigue. She also has a history of stiffness and pain in her shoulders and hip, which has disabled her from doing household chores. On examination, the patient appears pale and the temperature is 99.8F. Gentle pressure on the scalp elicits focal tenderness.  ESR is elevated. What is the next best step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Sumatriptan"
      },
      {
        "id": 2,
        "text": "Vascular imaging"
      },
      {
        "id": 3,
        "text": "Perform temporal artery biopsy"
      },
      {
        "id": 4,
        "text": "Start steroids"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>This patient's clinical scenario is suggestive of <strong>giant cell arteritis</strong> with <strong>polymyalgia rheumatica</strong>. The patient should be immediately started on <strong>steroids</strong>.&nbsp;</p>\n<p>Giant cell arteritis (GCA), also known as <strong>temporal arteritis</strong> is an inflammation of medium and large-sized vessels. It is more common in <strong>women</strong> and in people aged <strong>&gt;50 years</strong>.</p>\n<p>The clinical features include headache associated with scalp pain and jaw claudication, fever, fatigue, malaise, and weight loss. Half of the patients have signs of superficial temporal artery inflammation, including erythema, pain on palpation, nodularity, thickening, or reduced pulsation on the affected side.&nbsp;Gentle pressure on the scalp may elicit focal or generalized tenderness.&nbsp;It is very commonly associated with polymyalgia rheumatica characterized by morning stiffness and pain around the shoulders and hip.&nbsp;</p>\n<p>A dreaded complication is <strong>ischemic optic neuropathy</strong>, which can lead to&nbsp;<strong>sudden blindness</strong>. Therefore, patients with a clinical diagnosis of GCA, especially with headaches or visual symptoms should immediately be started on steroids. Else damage may be irreversible if treatment is delayed beyond 48 hours.</p>\n<p>The diagnosis can be confirmed by <strong>temporal artery biopsy</strong>. It may not be positive in all patients, due to patchy involvement of the vessels. Obtaining a biopsy segment of 3-5 cm with serial sectioning may yield a positive result. A color doppler ultrasound can be used as an alternative to temporal artery biopsy.&nbsp;</p>\n<p>Newer drugs used in the treatment of giant cell arteritis are <strong>tocilizumab </strong>(anti-IL-6 receptor) and<strong> abatacept </strong>(CTLA4-Ig).</p>\n<p>Other options:</p>\n<p>Option A: <strong>Sumatriptan</strong> is used in the treatment of <strong>migraine</strong> headaches. Although migraine headaches commonly present with unilateral headache, the other clinical features in this patient are suggestive of GCA.</p>\n<p>Option B: There is a limited role of vascular imaging in the diagnosis of GCA. Additionally, the patient must be started on steroids without awaiting diagnostic confirmation when GCA is suspected.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-month-old boy is admitted to the hospital with a three-day history of gasping and choking spells. They are associated with repeated coughing bouts which are occasionally followed by episodes of vomiting. His mother says that he has been unwell for about two weeks now. On examination, the baby was found to have an increased breathing rate, which was labored. Blood work showed an abnormally large percentage of lymphocytes (70%). Nasopharyngeal swabs cultured on a selective medium yielded grayish, \"mercury-like\" colonies and a gram stain revealed minute gram-negative coccobacilli. Which of the following is false about the diagnosis/etiological agent?",
    "choices": [
      {
        "id": 1,
        "text": "The causative organism is fastidious and requires an enriched medium for growth"
      },
      {
        "id": 2,
        "text": "It requires X and V factor for growth"
      },
      {
        "id": 3,
        "text": "An effective vaccine is available to prevent the illness"
      },
      {
        "id": 4,
        "text": "The factor responsible for the profound lymphocytosis is an A/B structured toxin."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical picture strongly points towards a diagnosis of <strong>p</strong><strong>ertussis/whooping cough</strong>\u00a0caused by <strong>Bordetella pertussis</strong>. It does not require X and V factor for growth.\u00a0</p>\n<p>X and V factors are required for the growth of Hemophilus species.\u00a0</p>\n<p>Bordetella pertussis is a <strong>gram-negative coccobacillus</strong>. It does not grow on simple media such as nutrient agar and requires enriched selective media such as\u00a0<strong>Bordet-Gengou medium</strong> and <strong>Regan Lowe medium</strong>. On the Bordet-Gengou medium, the colonies resemble '<strong>mercury droplets</strong>' as described in this clinical picture.\u00a0</p>\n<p>It produces various virulence factors and toxins that are responsible for the clinical disease. They include-</p>\n<ul>\n<li><strong>Pertussis toxin</strong>- It is a classic <strong>A/B structure toxin</strong> with subunit A that carries the biologic activity and a subunit B that binds the complex to the cell membrane. The A-subunit ADP-ribosylates the inhibitory G-protein (G<sub>i</sub>). It causes lymphocytosis, sensitization to histamine, and enhanced insulin secretion.</li>\n<li>Filamentous hemagglutinin- Promotes adherence of the B.pertussis to the cilia. It also has a hemagglutinin activity.\u00a0</li>\n<li>Adenylate cyclase toxin- Inhibits phagocytic cell oxidative responses and natural killer cell (NK cell) activity.</li>\n<li>Tracheal toxin- Causes destruction of the ciliated cells in the trachea.\u00a0</li>\n<li>Other virulence factors- Includes Pertactin, heat-labile toxin, lipopolysaccharide.</li>\n</ul>\n<p>Clinically, the disease is transmitted via respiratory droplets. It courses over 3 phases after an incubation period of 2 weeks-</p>\n<ul>\n<li><strong>Catarrhal</strong> - lasts for<strong> 1-2 weeks</strong> and consists of cough, coryza, and nasopharyngeal secretions.</li>\n<li><strong>Paroxysma</strong>l - lasts for <strong>2-6 weeks</strong> and consists of worsening paroxysms of productive whooping cough. Whooping cough derives its name from the inspiratory whoop at the end of a coughing bout. It becomes more frequent and ends with vomiting.\u00a0</li>\n<li><strong>Convalescent</strong> - Intensity and frequency of cough decrease <strong>over 4 weeks.</strong></li>\n</ul>\n<p>The diagnosis is made on clinical grounds. A specific diagnosis can be done by isolation of the organism from a\u00a0nasopharyngeal swab\u00a0or nasopharyngeal aspiration, and cultured on <strong>Bordet-Gengou</strong> <strong>medium.</strong></p>\n<p>Management involves <strong>antibiotic therapy</strong> and supportive care. Pertussis can be prevented through vaccination.\u00a0Every infant should receive three injections of the pertussis vaccine during the first year of life followed by booster series for a total of five doses. Acellular vaccines contain a few of the following antigens: inactivated pertussis toxin, filamentous hemagglutinin, fimbrial proteins, and pertactin.<strong><br /></strong></p>\n<div class=\"page\" title=\"Page 348\">\u00a0</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old gymnast came to the emergency department with a history of a fall an hour ago. He was practicing his vault when he fell on his head. He complains of pain over his nose and a bloody discharge from his nose. A tissue paper he used to blow his nose into, shows bloodstains with charectaristic appearance as shown below.  Which of the following laboratory tests would be the best to confirm the suspected diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ferritin"
      },
      {
        "id": 2,
        "text": "Albumin"
      },
      {
        "id": 3,
        "text": "Glucose"
      },
      {
        "id": 4,
        "text": "Beta-2-transferrin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>History of head trauma along with nasal discharge that shows&nbsp;<strong>double target sign </strong>on a handkerchief/tissue paper&nbsp;is consistent with <strong>traumatic CSF rhinorrhea</strong>. The&nbsp;single best lab investigation to establish the diagnosis of CSF rhinorrhea is the assay of <strong>beta-2 transferrin.</strong></p>\n<p>It is absent in normal nasal discharge and is&nbsp;present only in the CSF, perilymph, and aqueous humor. Detection of beta-2-transferrin is done by electrophoresis and is a very sensitive and specific test for CSF leak.&nbsp;</p>\n<p>Although the beta-2-transferrin assay may confirm the diagnosis of CSF rhinorrhea, a <strong>high-resolution computerized tomography (HRCT)</strong> is required to<strong> localize the site of the defect</strong> causing the CSF leak.&nbsp;</p>\n<p>An intrathecal fluorescein study may be performed preoperatively or intraoperatively to confirm the site of the defect.&nbsp;</p>\n<p>Treatment of CSF rhinorrhea:</p>\n<ul>\n<li>Early cases of post-traumatic CSF rhinorrhea are managed conservatively by placing the patient in the semi-sitting position</li>\n<li>Avoiding blowing of nose, sneezing, and straining.</li>\n<li>Prophylactic antibiotics to prevent meningitis.</li>\n<li>Persistent cases may be treated surgically by intracranial or nasal endoscopic approach.</li>\n<li>Nasal endoscopic approach is useful for leaks from the frontal sinus, cribriform plate, ethmoid or sphenoid sinuses.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/39755cde10c345cc911ae3c085eea724.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old male patient presents with complaints of blurring of vision and progressive discomfort in both his eyes for the past 1 week. There is an antecedent history of penetrating trauma to his right eye 6 weeks back. Slit lamp examination reveals mutton-fat keratic precipitates in the anterior chamber. Direct ophthalmoscopy shows discrete yellow-white nodules in the fundus. What is the main modality of initial management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Systemic antibiotics"
      },
      {
        "id": 2,
        "text": "Pulse intravenous methylprednisolone therapy"
      },
      {
        "id": 3,
        "text": "Enucleation of the exciting eye"
      },
      {
        "id": 4,
        "text": "Intravenous cyclophosphamide"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario points to a diagnosis of<strong> sympathetic ophthalmitis. </strong>Pulse intravenous methylprednisolone therapy is the main modality of the initial management of this condition.</p>\n<p><strong><span class=\"notion-enable-hover\" data-token-index=\"0\" data-reactroot=\"\">Sympathetic ophthalmitis&nbsp;</span></strong>is a&nbsp;<strong><span class=\"notion-enable-hover\" data-token-index=\"2\" data-reactroot=\"\">granulomatous pan-uveitis&nbsp;</span></strong>that usually occurs after&nbsp;<span class=\"notion-enable-hover\" data-token-index=\"4\" data-reactroot=\"\"><strong>penetrative trauma</strong>. It can also develop after intraocular surgery.</span>&nbsp;Both the injured eye (<strong>exciting eye</strong>) and fellow eye (<strong>sympathizing eye</strong>) develop panuveitis. Trauma to the ciliary region (dangerous zone) poses an increased risk.</p>\n<p>It is a&nbsp;<strong>type 4 hypersensitivity</strong>&nbsp;reaction. According to the allergic theory, the uveal pigment in the injured eye acts as an&nbsp;<strong>allergen</strong>&nbsp;that causes uveitis in the other eye.&nbsp;<strong>Dalen-Fuchs nodules</strong>&nbsp;(proliferation of pigment epithelium), exudative retinal detachment, and optic disc swelling can be seen on fundoscopy.&nbsp;A&nbsp;<strong>sunset glow</strong>&nbsp;appearance can persist due to residual chorioretinal scarring.</p>\n<p>Dalen-Fuchs nodules are depicted in the image below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c387d4d4727e42418856a1d6d6313687x720x626.PNG"
    ]
  },
  {
    "text": "A researcher is studying 2 screening tests, A and B for a disease. He tests 100 people, half of which are cases, and obtains the following result for each of the tests. Which of the following is true regarding test B as compared to A ?",
    "choices": [
      {
        "id": 1,
        "text": "More sensitive, more specific"
      },
      {
        "id": 2,
        "text": "More sensitive, less specific"
      },
      {
        "id": 3,
        "text": "Less sensitive, more specific"
      },
      {
        "id": 4,
        "text": "Less sensitive,  less specific"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In this given scenario, test B is <strong>less sensitive and more specific</strong> as compared to test A.&nbsp;</p>\n<p>Test A</p>\n<table style=\"height: 229px;\" width=\"357\">\n<tbody>\n<tr>\n<td style=\"width: 74px;\">\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 91px;\">\n<p><strong>Disease +</strong></p>\n</td>\n<td style=\"width: 85px;\">\n<p><strong>Disease -</strong></p>\n</td>\n<td style=\"width: 79px;\">\n<p><strong>Total</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 74px;\">\n<p><strong>Test A+</strong></p>\n</td>\n<td style=\"width: 91px;\">\n<p>46 (TP)</p>\n</td>\n<td style=\"width: 85px;\">\n<p>34 (FP)</p>\n</td>\n<td style=\"width: 79px;\">\n<p>80</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 74px;\">\n<p><strong>Test A-</strong></p>\n</td>\n<td style=\"width: 91px;\">\n<p>04(FN)</p>\n</td>\n<td style=\"width: 85px;\">\n<p>16 (TN)</p>\n</td>\n<td style=\"width: 79px;\">\n<p>20</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 74px;\">\n<p><strong>Total</strong></p>\n</td>\n<td style=\"width: 91px;\">\n<p>50</p>\n</td>\n<td style=\"width: 85px;\">\n<p>50</p>\n</td>\n<td style=\"width: 79px;\">\n<p>100</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>TP - true positive; FP - false positive; TN - true negative; FN - false negative</p>\n<p>Sensitivity =&nbsp;<strong>TP/(TP + FN) x 100 </strong></p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 46 / ( 46 + 4 )</p>\n<p>Thus, sensitivity is <strong>92%</strong>&nbsp;</p>\n<p>Specificity = <strong>TN/(FP + TN) x 100</strong></p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 16 / ( 34 + 16 )</p>\n<p>Thus, specificity is <strong>32%.</strong></p>\n<p>Test B</p>\n<table style=\"height: 205px;\" width=\"360\">\n<tbody>\n<tr>\n<td style=\"width: 75px;\">\n<p>&nbsp;</p>\n</td>\n<td style=\"width: 92px;\">\n<p><strong>Disease +</strong></p>\n</td>\n<td style=\"width: 85px;\">\n<p><strong>Disease -</strong></p>\n</td>\n<td style=\"width: 80px;\">\n<p><strong>Total</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 75px;\">\n<p><strong>Test B+</strong></p>\n</td>\n<td style=\"width: 92px;\">\n<p>36 (TP)</p>\n</td>\n<td style=\"width: 85px;\">\n<p>16 (FP)</p>\n</td>\n<td style=\"width: 80px;\">\n<p>52</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 75px;\">\n<p><strong>Test B-</strong></p>\n</td>\n<td style=\"width: 92px;\">\n<p>14(FN)</p>\n</td>\n<td style=\"width: 85px;\">\n<p>34 (TN)</p>\n</td>\n<td style=\"width: 80px;\">\n<p>48</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 75px;\">\n<p><strong>Total</strong></p>\n</td>\n<td style=\"width: 92px;\">\n<p>50</p>\n</td>\n<td style=\"width: 85px;\">\n<p>50</p>\n</td>\n<td style=\"width: 80px;\">\n<p>100</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Sensitivity =&nbsp;<strong>TP/(TP + FN) x 100.</strong></p>\n<p><strong>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </strong>= 36 / ( 36 + 14) x 100</p>\n<p>Thus, sensitivity is<strong>&nbsp;72%.</strong></p>\n<p>Specificity =&nbsp;<strong>TN/(FP + TN) x 100</strong>.</p>\n<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; = 34 / ( 16 + 34 ) x 100</p>\n<p>Thus, specificity is <strong>68%</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old woman presents to the OPD with complaints of curdy white vaginal discharge, dysuria, and intense itching. Per speculum examination of the vagina is done as shown below. A wet smear with 10% KOH solution shows budding yeast cells. The clinician prescribes an oral medication. What is the likely mechanism of action of the given medication?",
    "choices": [
      {
        "id": 1,
        "text": "Forms pores in the fungal cell wall"
      },
      {
        "id": 2,
        "text": "Inhibits microtubule assembly"
      },
      {
        "id": 3,
        "text": "Inhibits fungal squalene epoxidation"
      },
      {
        "id": 4,
        "text": "Inhibits ergosterol biosynthesis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical symptoms of curdy white vaginal discharge and the KOH smear showing budding yeast cells are suggestive of\u00a0<strong>vulvovaginal candidiasis</strong>. The oral medication given in this condition is\u00a0<strong>fluconazole\u00a0</strong>which acts by<strong> inhibiting ergosterol synthesis.</strong></p>\n<p>Azole group of antifungal are grouped into two types :</p>\n<ul>\n<li><strong>Imidazole</strong>- clotrimazole, ketoconazole, luliconazole</li>\n<li><strong>Triazole</strong>- Itraconazole, <strong>fluconazole</strong>, voriconazole, posaconazole, and isavuconazole</li>\n</ul>\n<p>The\u00a0<strong>azole\u00a0</strong>group\u00a0<strong>inhibits</strong>\u00a0the fungal cytochrome P450 enzyme called\u00a0<strong>14-\u03b1-sterol demethylase</strong>\u00a0and results in an impaired conversion of lanosterol to ergosterol. This results in the depletion of membrane ergosterol.</p>\n<p><strong>Therapeutic uses</strong> of fluconazole-</p>\n<ul>\n<li><strong>Oropharyngeal candidiasis</strong> can be treated with fluconazole by taking 100\u2013200 mg a day for 7\u201314 days. Uncomplicated <strong>vaginal candidiasis</strong> can be effectively treated with a single 150 mg dose. Treatment of candidemia in nonimmunosuppressed patients involves a loading dosage of 800 mg, followed by 400 mg daily.</li>\n<li>For the first eight weeks of the consolidation phase of the therapy of <strong>cryptococcal meningitis</strong> in individuals with AIDS, fluconazole is administered.</li>\n<li>Due to its excellent CSF penetration and significantly lower morbidity than intrathecal amphotericin B, fluconazole is the medication of choice for treating <strong>coccidioidal meningitis</strong>. Fluconazole is similar to itraconazole in treating various types of coccidioidomycosis.</li>\n</ul>\n<p>Other options</p>\n<p>Option A- <strong>Amphotericin B</strong> acts by <strong>forming pores </strong>in the fungal <strong>cell membrane.</strong>\u00a0It has also been found that it forms aggregates that sequester ergosterol from lipid bilayers, leading to fungal cell death. It is indicated in invasive mucormycosis, fungal endophthalmitis following pars plana vitrectomy, and induction therapy in cryptococcal meningitis.\u00a0</p>\n<p>Option B- <strong>Griseofulvin</strong> acts by <strong>inhibiting microtubule assembly</strong>, disrupting the fungal cell division. It is the drug of choice for tinea capitis in children. It is also effective in treating ringworm of glabrous skin, tinea cruris, tinea corprosis, tinea pedis, and tinea of the hands and beard.\u00a0</p>\n<p>Option C- <strong>Terbinafine</strong> acts by\u00a0<strong>inhibiting</strong> <strong>epoxidation of fungal squalene</strong> that<strong>\u00a0</strong>reduces\u00a0ergosterol biosynthesis. It is helpful for treating nail onychomycosis in adults and tinea capitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e3e18e474cbb42dfb5c02f37d96d3b78.jpg"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old male patient presents with pain during defecation along with the presence of blood-streaked stools. He has had a history of constipation for 5 months. On examination, a sentinel tag is present at the anal orifice. Due to extreme pain, a digital rectal examination is avoided. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Fistula in ano"
      },
      {
        "id": 2,
        "text": "Anal fissure"
      },
      {
        "id": 3,
        "text": "Internal hemorrhoids"
      },
      {
        "id": 4,
        "text": "External hemorrhoids"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This case scenario with a history of chronic constipation, and the presence of sentinel tags on examination, suggests a diagnosis of\u00a0<strong>anal fissure</strong>.</p>\n<div class=\"page\" title=\"Page 1372\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>An anal fissure is a longitudinal split in the anoderm of the distal anal canal. A chronic anal fissure is frequently associated with:</p>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Sentinel tag </strong>externally</li>\n<li>Hypertrophied <strong>anal papillae</strong>\u00a0internally</li>\n<li>Anal ulcer overlying the internal sphincter</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d14f8c599baf44dc9dfa86d317a3f99cx1280x1429.JPEG"
    ]
  }
];
        let quizName = 'Neet 2021 Mini Test 7  (20 Questions)';
        const quizFilename = 'neet-2021-mini-test-7-20-questions-acc1c300.html';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2020-21"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>