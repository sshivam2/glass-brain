<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pharmacology St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following phase is usually not a mandatory regulatory requirement for drug approval?",
    "choices": [
      {
        "id": 1,
        "text": "Preclinical"
      },
      {
        "id": 2,
        "text": "Phase 0"
      },
      {
        "id": 3,
        "text": "Phase I"
      },
      {
        "id": 4,
        "text": "Phase II"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The phase 0/ microdosing stage is not mandatory and not clearly categorized by regulatory authorities yet.</p>\n<p>Phase 0 studies</p>\n<ul>\n<li>Very low doses of drugs, usually 1/100th of the estimated human dose or a maximum of 100 mcg is used.</li>\n<li>They are done to obtain pharmacokinetics data in humans at a very early stage of drug development Preclinical, phase I, phase II, and phase III studies are mandatory for drug approval process (options a, c and d).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "High hepatic extraction ratio is not seen with",
    "choices": [
      {
        "id": 1,
        "text": "Propranolol"
      },
      {
        "id": 2,
        "text": "Morphine"
      },
      {
        "id": 3,
        "text": "Ciprofloxacin"
      },
      {
        "id": 4,
        "text": "Verapamil"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Ciprofloxacin does not have high hepatic extraction ratio.</p>\n<p>Drugs having high hepatic extraction:</p>\n<ul>\n<li>Propranolol (option a)</li>\n<li>Morphine (option b)</li>\n<li>Pethidine</li>\n<li>Salbutamol</li>\n<li>Verapamil (option d)</li>\n<li>Glyeryl trinitrate</li>\n</ul>\n<p>Clinical correlate for drugs with high hepatic extraction:</p>\n<ul>\n<li>Oral dose is very high when compared to parenteral dose to accommodate high hepatic extraction.</li>\n<li>Oral dose has to be reduced in liver diseases.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Decrease in Km value for an enzymatic reaction is seen with",
    "choices": [
      {
        "id": 1,
        "text": "Enzyme induction"
      },
      {
        "id": 2,
        "text": "Enzyme stimulation"
      },
      {
        "id": 3,
        "text": "Competitive inhibition"
      },
      {
        "id": 4,
        "text": "Noncompetitive inhibition"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Km of the enzyme is rate constant of the enzymatic reaction and defined as the substrate concentration at which the velocity reaches half of the maximum (Vmax).</li>\n<li>Stimulation of an enzyme increases its affinity for the substrate resulting in lowering of rate constant (Km). Eg: Pyridoxine acts as a co-factor and stimulates decarboxylase activity.</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<td>Type of enzyme inhibition</td>\n<td>Km value</td>\n</tr>\n<tr>\n<td>Enzyme stimulation</td>\n<td>Decreased</td>\n</tr>\n<tr>\n<td>Enzyme induction</td>\n<td>Unaltered</td>\n</tr>\n<tr>\n<td>Competitive inhibition</td>\n<td>Increased</td>\n</tr>\n<tr>\n<td>Noncompetitive inhibtion</td>\n<td>Unaltered</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What does I.P in the following indicate?",
    "choices": [
      {
        "id": 1,
        "text": "Intellectual property"
      },
      {
        "id": 2,
        "text": "Indian pharmacopoeia"
      },
      {
        "id": 3,
        "text": "Industrial production"
      },
      {
        "id": 4,
        "text": "International pharmaceuticals"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The IP in the image indicates Indian Pharmacopoeia</p>\n<ul>\n<li>Pharmacopoeia contains the description of chemical structure, assay methods, solubility, standards of purity and other information regarding manufacturing of medicines.</li>\n<li>They are useful to drug manufacturers and regulatory authorities. It indicates that the standards present in the mentioned pharmacopoeia are followed.</li>\n</ul>\n<p>Examples of pharmacopoeia:</p>\n<ul>\n<li>IP: Indian Pharmacopoeia</li>\n<li>BP: British Pharmacopoeia</li>\n<li>USP: United States Pharmacopoeia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5551c804072f4c8e97a03c8423583cb6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The image below shows the metabolic pathways of levodopa in the periphery and brain. Identify the drug that corresponds to the action of A in the following",
    "choices": [
      {
        "id": 1,
        "text": "Benserazide"
      },
      {
        "id": 2,
        "text": "Carbidopa"
      },
      {
        "id": 3,
        "text": "Selegiline"
      },
      {
        "id": 4,
        "text": "Tolcapone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The drug that corresponds to the action of A is <strong>tolcapone</strong>.</p>\n<p>Tolcapone is an <strong>anti-parkinsonism drug</strong> that acts by <strong>inhibiting COMT enzyme&nbsp;</strong>and is an <strong>adjuvant</strong> to <strong>levodopa-carbidopa</strong> in <strong>advanced parkinsonism </strong>with<strong> motor fluctuations</strong>. It acts as an adjuvant by prolonging the half-life of levodopa. COMT inhibitors are used to smoothen the 'wearing off' as well as increase the 'on' time and decrease the 'off' time and thus allowing to reduce the dose of levodopa. Another drug in the same class is <strong>entacapone</strong>.</p>\n<p>Parkinsonism is an <strong>extrapyramidal disorder</strong> and is characterized by <strong>rigidity</strong>, <strong>tremor</strong>, and<strong> hypokinesia</strong>. It occurs due to degeneration of substantia nigra and the nigrostriatal tract causing a <strong>deficiency </strong>of <strong>dopamine</strong>.&nbsp;&nbsp;</p>\n<p>Other options:</p>\n<p>Options A and B: <strong>Benserazide</strong> and<strong> carbidopa</strong> are <strong>peripheral </strong>(extracerebral)<strong> dopa decarboxylase inhibitors</strong> and do not penetrate the blood-brain barrier or inhibit the conversion of levodopa into dopamine.&nbsp;</p>\n<p>Option C:&nbsp;<strong>Selegiline</strong> is an <strong>MAO</strong>-<strong>B inhibitor </strong>and at low doses<strong> retards </strong>the<strong> intracerebral degradation </strong>of<strong> dopamine</strong>.</p>\n<p>The image below shows the various mechanisms by which different drugs show anti-parkinsonian action.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c6d6e01e7f1842aa8c107e39aa32923f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3c0ca949b982482ba2d9b8bcd800284ax800x500.PNG"
    ]
  },
  {
    "text": "Which of the following is an inhibitor of vasopressin secretion?",
    "choices": [
      {
        "id": 1,
        "text": "Vincristine"
      },
      {
        "id": 2,
        "text": "Cyclophosphamide"
      },
      {
        "id": 3,
        "text": "Ethanol"
      },
      {
        "id": 4,
        "text": "Nicotine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Ethanol consumption inhibits vasopressin secretion from posterior pituitary gland.</p>\n<p>Drugs inhibiting or decreasing vasopressin release</p>\n<table style=\"width: 318px;\">\n<tbody>\n<tr>\n<td style=\"width: 141px;\">Stimulating vasopressin release</td>\n<td style=\"width: 166px;\">Inhibiting vasopressin release</td>\n</tr>\n<tr>\n<td style=\"width: 141px;\">\n<p>Vincristine</p>\n<p>Cyclophoshamide</p>\n<p>Nicotine</p>\n<p>Tricyclic antidepressants</p>\n<p>Epinephrine</p>\n<p>High doses of morphine</p>\n</td>\n<td style=\"width: 166px;\">\n<p>Ethanol</p>\n<p>Phenytoin</p>\n<p>Glucocorticoids</p>\n<p>Haloperidol</p>\n<p>Fluphenazine</p>\n<p>Promethazine</p>\n<p>Low doses of morphine</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<p>Remember</p>\n<p>Lithium: inhibits renal effects of vasopressin but enhances central vasopressin secretion Carbamazepine: produces antidiuresis in central diabetes insipidus through renal action; but inhibits central vasopressin secretion</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the first FDA approved drug for obsessive-compulsive disorder?",
    "choices": [
      {
        "id": 1,
        "text": "Clomipramine"
      },
      {
        "id": 2,
        "text": "Imipramine"
      },
      {
        "id": 3,
        "text": "Desipramine"
      },
      {
        "id": 4,
        "text": "Trimipramine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Clomipramine is a tricyclic antidepressant that was the first approved drug for obsessive-compulsive disorder (OCD).</p>\n<p>The following SSRIs have also been approved by the US FDA or use in OCD:</p>\n<ul>\n<li>Fluoxetine</li>\n<li>Fluvoxamine</li>\n<li>Paroxetine (Paxil)</li>\n<li>Sertraline (Zoloft)&nbsp;</li>\n<li>Citalopram</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An infant presents with the following features shown in the image below. On examination, microcephaly and hypoplasia of  distal phalanges are also found. The most likely medication that would have resulted in the above deformity is",
    "choices": [
      {
        "id": 1,
        "text": "Warfarin"
      },
      {
        "id": 2,
        "text": "Phenytoin"
      },
      {
        "id": 3,
        "text": "Ethanol"
      },
      {
        "id": 4,
        "text": "Thalidomide"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Features of fetal hydantoin syndrome</p>\n<ul>\n<li>Digital hypoplasia</li>\n<li>Microcephaly</li>\n<li>Cleft lip, cleft palate and other minor craniofacial abnormalities</li>\n</ul>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7011252c40d14672aa0ba62ab33b0c26.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The main lipid abnormality associated with atypical antipsychotics use is",
    "choices": [
      {
        "id": 1,
        "text": "Increased LDL-C"
      },
      {
        "id": 2,
        "text": "Hypertriglyceridemia"
      },
      {
        "id": 3,
        "text": "Decreased HDL-C"
      },
      {
        "id": 4,
        "text": "Increased HDL-C"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Atypical antipsychotics are associated with dyslipidemia, particularly hypertriglyceridemia.</p>\n<p>Metabolic abnormalities associated with atypical antipsychotics.</p>\n<ul>\n<li>Increased weight</li>\n<li>Dyslipidemia</li>\n<li>New-onset type 2 DM</li>\n<li>Diabetic ketoacidosis</li>\n</ul>\n<p>Atypical agents classified according to their metabolic risk potential</p>\n<ul>\n<li>Highest: clozapine, olanzapine</li>\n<li>Immediate: quetiapine, risperidone, paliperidone</li>\n<li>Least: Aripiprazole, ziprasidone, iloperidone, asenapine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following effect of chronic ethanol consumption might increase the risk of acetaminophen induced hepatotoxicity",
    "choices": [
      {
        "id": 1,
        "text": "Inhibition of CYP2E1"
      },
      {
        "id": 2,
        "text": "Induction of CYP2E1"
      },
      {
        "id": 3,
        "text": "Inhibition of aldehyde dehydrogenase"
      },
      {
        "id": 4,
        "text": "Induction of aldehyde dehydrogenase"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Chronic ethanol consumption induces hepatic CYP enzymes (CYP2E1) that result in increased formation of hepatotoxic metabolite from acetaminophen.</p>\n<p>Acetaminophen metabolism:</p>\n<ul>\n<li>Major pathway: glucuronidation into inactive metabolites.</li>\n<li>Minor pathway: CYP2E1 conversion into N-acetyl-p-benzoquinone imine (NAPQI) which is a hepatotoxic metabolite.</li>\n<li>Chronic ethanol consumption induces CYP2E1 enzyme resulting in increased formation of&nbsp; NAPQI resulting in hepatotoxicity at less than toxic doses of acetaminophen.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Complication that is not associated with metformin use",
    "choices": [
      {
        "id": 1,
        "text": "Lactic acidosis"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Infertility"
      },
      {
        "id": 4,
        "text": "Gastrointestinal disturbances"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Metformin use is not associated with infertility.</li>\n<li>On the contrary, it can cause ovulation and fertility in some infertile women with polycystic ovarian disease. Lactic acidosis is a rare and serious side effect of&nbsp; metformin (option a).</li>\n<li>Metformin can interfere with the absorption of vitamin B12 and cause vitamin B12 deficiency, but the incidence is rare (option b).</li>\n<li>Gastrointestinal disturbances like abdominal pain, anorexia, bloating and others are common especially during initiation of therapy. Most of them subside with time (option d).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a short acting insulin analog?",
    "choices": [
      {
        "id": 1,
        "text": "Glulisine"
      },
      {
        "id": 2,
        "text": "Lispro"
      },
      {
        "id": 3,
        "text": "Glargine"
      },
      {
        "id": 4,
        "text": "Aspart"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Glargine is a long acting insulin analog.</p>\n<p>Long acting insulin analogs (GlaDeD)</p>\n<ul>\n<li>Glargine</li>\n<li>Detemir</li>\n<li>Degludec</li>\n</ul>\n<p>Short acting insulin analogs (AsLi Glu)</p>\n<ul>\n<li>As: Aspart</li>\n<li>Li: Lispro</li>\n<li>Glu: Glulisine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following statement is not true about sotalol",
    "choices": [
      {
        "id": 1,
        "text": "It prolongs action potential duration throughout the heart"
      },
      {
        "id": 2,
        "text": "It is a cardioselective beta blocker"
      },
      {
        "id": 3,
        "text": "It is excreted primarily through kidneys"
      },
      {
        "id": 4,
        "text": "Torsades de pointes is a common side effect"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Sotalol is a non selective beta blocker.</li>\n<li>It has additional class III antiarrhythmic properties and thus prolongs the APD as well as the QT interval (option b). So it has propensity to cause Torsades de pointes. (option d).</li>\n<li>Torsades de pointes incidence is around 1.5-2% and is dose dependent.</li>\n<li>Sotalol is a lipid insoluble beta blocker and thus excreted primarily by the kidneys (option c).</li>\n<li>Other lipid insoluble beta blockers are atenolol and nadolol.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hypocalcemia is seen more commonly with",
    "choices": [
      {
        "id": 1,
        "text": "Thiazide diuretics"
      },
      {
        "id": 2,
        "text": "Loop diuretics"
      },
      {
        "id": 3,
        "text": "Carbonic anhydrase inhibitors"
      },
      {
        "id": 4,
        "text": "Both b and c"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Loop diuretics</strong> decreases calcium reabsorption and can result in <strong>hypocalcemia</strong></p>\n<p>Loop diuretics by inhibiting the Na+/K+/2Cl- transporter decreases calcium and magnesium reabsorption by abolishing the transepithelial potential difference that is the dominant force for these cations reabsorption.</p>\n<p><strong>Thiazide diuretics</strong> decrease excretion of calcium and can result in <strong>hypercalcemia</strong> (option a).</p>\n<p>Carbonic anhydrase inhibitors does not alter calcium levels (option c).</p>\n<p>Acute effects of different diuretics on excretion of different electrolytes:</p>\n<table>\n<tbody>\n<tr>\n<td>Diuretics</td>\n<td>Sodium</td>\n<td>Potassium</td>\n</tr>\n<tr>\n<td>Carbonic anhydrase inhibitors</td>\n<td>&uarr;</td>\n<td>&uarr;&uarr;</td>\n</tr>\n<tr>\n<td>Osmotic diuretics</td>\n<td>&uarr;&uarr;</td>\n<td>&uarr;</td>\n</tr>\n<tr>\n<td>Loop diuretics</td>\n<td>&uarr;&uarr;&uarr;</td>\n<td>&uarr;</td>\n</tr>\n<tr>\n<td>Thiazides</td>\n<td>&uarr;&uarr;</td>\n<td>&uarr;</td>\n</tr>\n<tr>\n<td>Epithelial sodium channel blockers</td>\n<td>&uarr;</td>\n<td>&darr;</td>\n</tr>\n<tr>\n<td>Aldosterone antagonists</td>\n<td>&uarr;</td>\n<td>&darr;</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "T-type calcium channels are blocked by",
    "choices": [
      {
        "id": 1,
        "text": "Verapamil"
      },
      {
        "id": 2,
        "text": "Diltiazem"
      },
      {
        "id": 3,
        "text": "Dihydropyridines"
      },
      {
        "id": 4,
        "text": "Ethosuximide"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Ethosuximide is an antiepileptic that acts through selective suppression of T-type calcium channels. It is indicated in the treatment of absence seizures.</p>\n<p>Types of calcium channels and their blockers:</p>\n<ul>\n<li>L type: Verapamil, diltiazem, dihydropiridines</li>\n<li>T type: Flunarizine, ethosuximide, mibefradil</li>\n<li>N type: Gabapentin, ziconotide</li>\n<li>P/Q type: Omega agatoxin IVa</li>\n<li>R type: SNX-482, Omega agatoxin IIIa</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a prodrug?",
    "choices": [
      {
        "id": 1,
        "text": "Enalapril"
      },
      {
        "id": 2,
        "text": "Levodopa"
      },
      {
        "id": 3,
        "text": "Lisinopril"
      },
      {
        "id": 4,
        "text": "Clopidogrel"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Lisinopril is the lysine derivative of enalaprilat (active form of enalapril).</p>\n<p>All ACE inhibitors are prodrugs except lisinopril and captopril (option a).</p>\n<p>Examples of prodrugs:</p>\n<ul>\n<li>Prednisone</li>\n<li>Levodopa</li>\n<li>ACE inhibitors (except lisinopril and captopril)</li>\n<li>Sulfasalazine</li>\n<li>Methyldopa</li>\n<li>Cyclophosphamide</li>\n<li>Clopidogrel</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is cholesterol absorption inhibitor?",
    "choices": [
      {
        "id": 1,
        "text": "Cholestyramine"
      },
      {
        "id": 2,
        "text": "Colesevelam"
      },
      {
        "id": 3,
        "text": "Ezetimibe"
      },
      {
        "id": 4,
        "text": "Saroglitazar"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Ezetimibe is a cholesterol absorption inhibitor.</li>\n<li>It interferes with a specific cholesterol transport protein (NPC1L1) in intestinal mucosa and decreases cholesterol absorption.</li>\n<li>Cholestyramine and colesevelam are bile acid sequestrants.</li>\n<li>Saroglitazar is a dual PPAR agonist approved for diabetic dyslipidemia in India.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following monoclonal antibodies is approved for use in familial hypercholesterolemia?",
    "choices": [
      {
        "id": 1,
        "text": "Omalizumab"
      },
      {
        "id": 2,
        "text": "Alirocumab"
      },
      {
        "id": 3,
        "text": "Bevacizumab"
      },
      {
        "id": 4,
        "text": "Natalizumab"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Alirocumab</strong> is a <strong>monoclonal antibody</strong> that<strong> inhibits PCSK9</strong> that is used in <strong>familial hypercholesterolemia</strong>.</p>\n<p><strong>PCSK9</strong> is a serine protease that <strong>causes lysosomal degradation of the LDL receptors</strong> present on the surface of the hepatocytes. <strong>Monoclonal antibodies directed against PCSK9</strong> such as <strong>alirocumab</strong> and <strong>evolocumab</strong> counter this and <strong>cause the persistence of LDL receptors</strong> on hepatocytes. This leads to <strong>more LDL uptake from the circulation</strong>, <strong>bringing down the LDL-cholesterol</strong> levels in patients with familial hypercholesterolemia.</p>\n<p><strong>PCSK9 inhibitors</strong> are indicated only as <strong>adjunctive therapy</strong> in patients with <strong>familial hypercholesterolemia</strong> or <strong>established atherosclerotic cardiovascular disease</strong> who have <strong>elevated LDL-cholesterol levels</strong> <strong>despite</strong> being on <strong>maximum</strong> <strong>statin</strong> therapy.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Omalizumab</strong> is a monoclonal antibody against <strong>IgE</strong>. It is approved for use in patients with <strong>asthma</strong> with <strong>elevated levels of circulating IgE</strong>.</p>\n<p>Option C: <strong>Bevacizumab</strong> is a monoclonal antibody against <strong>VEGF</strong>. It is approved for use in patients with <strong>metastatic colorectal cancers</strong> and <strong>wet age-related macular degeneration&nbsp;</strong>(intravitreal administration).</p>\n<p>Option D: <strong>Natalizumab</strong> is a monoclonal antibody against&nbsp;&alpha;4 integrin. It prevents&nbsp;<strong>&alpha;<sub>4</sub>&beta;<sub>1</sub></strong> interaction with VCAM-1, thus restricting T-cell diapedesis into the brain. It is approved for use in <strong>multiple sclerosis</strong>. The use of natalizumab in a patient requires <strong>checking for antibodies against the JC virus</strong>. The <strong>presence of these antibodies</strong> indicates a latent infection, and is a <strong>contraindication to the use of natalizumab</strong>. Natalizumab can cause JC-virus antibody-positive patients to develop multifocal leukoencephalopathy.&nbsp;</p>\n<p>Note: <strong>Vedolizumab</strong> is a monoclonal antibody that prevents only <strong>&alpha;<sub>4</sub>&beta;<sub>7</sub></strong> interaction and is approved for use in <strong>Crohn's disease </strong>and<strong> ulcerative colitis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Recombinant interleukin 11 that is used in thrombocytopenia is",
    "choices": [
      {
        "id": 1,
        "text": "Romiplostim"
      },
      {
        "id": 2,
        "text": "Eltrombopag"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Oprelvekin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>Oprelvekin is a recombinant interleukin 11</strong> preparation.</li>\n<li>It stimulates thrombopoiesis and is indicated in prevention of thrombocytopenia associated with antineoplastic agents.</li>\n<li>Romiplostim and eltrombopag are thrombopoietin receptor agonist that are used in chronic immune thrombocytopenia (options a and b).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a direct thrombin inhibitor?",
    "choices": [
      {
        "id": 1,
        "text": "Apixaban"
      },
      {
        "id": 2,
        "text": "Edoxaban"
      },
      {
        "id": 3,
        "text": "Idarucizumab"
      },
      {
        "id": 4,
        "text": "Dabigatran"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Dabigatran is an oral anticoagulant that inhibits thrombin directly.</p>\n<p>Oral factor Xa inhibitors (have &ldquo;xa&rdquo; in their names)</p>\n<ul>\n<li>Rivaroxaban</li>\n<li>Apixaban</li>\n<li>Edoxaban</li>\n</ul>\n<p>Idarucizumab is an antidote for dabigatran.&nbsp; It is a monocloncal antibody against dabigatran that binds dabigatran more avidly than thrombin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a GPIIb/IIIa inhibitor?",
    "choices": [
      {
        "id": 1,
        "text": "Eptifibatide"
      },
      {
        "id": 2,
        "text": "Abciximab"
      },
      {
        "id": 3,
        "text": "Tirofiban"
      },
      {
        "id": 4,
        "text": "Cangrelor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Cangrelor is an adenosine analog that binds reversibly to P2Y12 receptors and inhibits it.</p>\n<p>GPIIb/IIIa inhibitors:</p>\n<ul>\n<li>Eptifibatide</li>\n<li>Abciximab: highest incidence of thrombocytopenia</li>\n<li>Tirofiban</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following side effect in a young male patient can be due to",
    "choices": [
      {
        "id": 1,
        "text": "Ranitidine"
      },
      {
        "id": 2,
        "text": "Cimetidine"
      },
      {
        "id": 3,
        "text": "Famotidine"
      },
      {
        "id": 4,
        "text": "Roxatidine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Cimetidine displaces dihydrotestosterone from its cytoplasmic receptor, increases the plasma prolactin and inhibits the degradation of estradiol by liver.</li>\n<li>High doses of cimetidine given for a long time can cause gynaecomastia in males and galactorrhea in females.</li>\n<li>Other H2 blockers do not share this property (options a, c and d).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3cf2f44c4118432e8db64dd9c03c594e.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a long acting beta 2 agonist (LABA)?",
    "choices": [
      {
        "id": 1,
        "text": "Pirbuterol"
      },
      {
        "id": 2,
        "text": "Salmeterol"
      },
      {
        "id": 3,
        "text": "Formoterol"
      },
      {
        "id": 4,
        "text": "Arformoterol"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Pirbuterol is a short acting beta 2 agonist (SABA).</p>\n<p>Long acting beta 2 agonists:</p>\n<ul>\n<li>Salmeterol</li>\n<li>Formoterol</li>\n<li>Arformoterol</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mechanism of action of tamoxifen is",
    "choices": [
      {
        "id": 1,
        "text": "Has androgenic receptor blocking action"
      },
      {
        "id": 2,
        "text": "Inhibits enzyme 5 alpha reductase"
      },
      {
        "id": 3,
        "text": "Has partial agonist and antagonist action on estrogen receptors"
      },
      {
        "id": 4,
        "text": "Inhibition of FSH and LH release from the pituitary"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Tamoxifen is a selective estrogen receptor modulator. It has both agonist and antagonist action on estrogen receptors.</p>\n<p>It has potent antiestrogenic effects in breast tissues.</p>\n<p>Estrogenic agonist action is seen in</p>\n<ul>\n<li>Endometrium: endometrial hypertrophy, vaginal bleeding and endometrial cancer.</li>\n<li>Coagulation system: thromboembolism risk.</li>\n<li>Bone metabolism: increase in bone mineral density.</li>\n<li>Liver: alteration of blood lipid profile.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Shortest acting acetylcholine esterase enzyme inhibitor among the following is",
    "choices": [
      {
        "id": 1,
        "text": "Neostigmine"
      },
      {
        "id": 2,
        "text": "Physostigmine"
      },
      {
        "id": 3,
        "text": "Pyridostigmine"
      },
      {
        "id": 4,
        "text": "Edrophonium"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Edrophonium attaches reversibly to choline subsite of the active esteric site.</li>\n<li>It does not form any covalent bond with the enzyme and it has a rapid renal elimination due to its quaternary structure making it a very short acting drug (5-20 min).</li>\n<li>Edrophonium is used in the diagnosis of myasthenia gravis because of the short duration of action Neostigmine, physostigmine and pyridostigmine have longer duration of action (options a,b and c).</li>\n<li>They bind to both esteric and anionic site of the AChE enzyme and carbamylate the enzyme.</li>\n<li>Carbamylated enzyme is hydrolysed slowly resulting in reversible but longer acting inhibition of AChE.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Synaptic transmission in sympathetic and parasympathetic ganglia is predominantly",
    "choices": [
      {
        "id": 1,
        "text": "Cholinergic in parasympathetic, adrenergic in sympathetic"
      },
      {
        "id": 2,
        "text": "Cholinergic in parasympathetic, dopaminergic in sympathetic"
      },
      {
        "id": 3,
        "text": "Cholinergic in both sympathetic and parasympathetic ganglia"
      },
      {
        "id": 4,
        "text": "Adrenergic in both sympathetic and parasympathetic ganglia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Acetylcholine is the major neurotransmitter in both sympathetic and parasympathetic ganglia&nbsp;innervated by preganglionic autonomic nerves. Therefore, both the ganglia have cholinergic transmission.&nbsp;</li>\n<li>The primary rapid depolarization is brought about by Nn type of nicotinic cholinergic receptors.</li>\n<li>Subsidiary receptors like M1, M2, adrenergic, dopaminergic can modulate the primary response.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Beta 3 agonist indicated for treatment of overactive bladder",
    "choices": [
      {
        "id": 1,
        "text": "Oxybutynin"
      },
      {
        "id": 2,
        "text": "Flavoxate"
      },
      {
        "id": 3,
        "text": "Mirabegron"
      },
      {
        "id": 4,
        "text": "Darifenacin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Mirabegron is a <strong>beta 3 agonist</strong> that is indicated for the treatment of overactive bladder.</p>\n<p>Stimulation of beta 3 receptors in detrusor muscle increases the bladder capacity and provides symptomatic relief in overactive bladder.</p>\n<p>Oxybutynin, Solifenacin, darifenacin and Fesoterodine are anticholinergics that are used in the treatment of overactive bladder.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Cevimeline is a muscarinic agonist with high affinity to",
    "choices": [
      {
        "id": 1,
        "text": "M1 receptors"
      },
      {
        "id": 2,
        "text": "M2 receptors"
      },
      {
        "id": 3,
        "text": "M3 receptors"
      },
      {
        "id": 4,
        "text": "M4 receptors"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Cevimeline is a muscarinic agonist that has high affinity to M3 receptors in salivary and lacrimal glands.</li>\n<li>It has fewer side effects than non-selective pilocarpine.</li>\n<li>It is indicated as a sialagogue in Sjogren&rsquo;s syndrome.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The \u201cVasomotor reversal of Dale\u201d phenomenon is seen with which of the following drugs?",
    "choices": [
      {
        "id": 1,
        "text": "Adrenaline"
      },
      {
        "id": 2,
        "text": "Noradrenaline"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Dopamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The vasomotor reversal of Dale is seen with <strong>adrenaline</strong> when an alpha blocker like<strong> </strong>phentolamine\u00a0has been previously administered.</p>\n<p>Rapid IV injection of adrenaline produces a marked increase in both systolic as well as diastolic BP. This occurs because at <strong>high concentrations \u03b1 response</strong> predominates and <strong>vasoconstriction</strong> occurs. As the concentration <strong>declines</strong>, adrenaline is not able to act on \u03b1 receptors but continues to act on<strong> \u03b22 receptors</strong>.</p>\n<p>When an <strong>\u03b1 blocker</strong>\u00a0has been given and then adrenaline is injected, only a\u00a0<strong>fall in BP </strong>instead of an initial rise\u00a0is seen, an effect first described by Dale and hence called<strong> vasomotor reversal of Dale</strong>. This is due to adrenaline's <strong>action only on\u00a0\u03b22 receptors</strong>, which are not blocked by phentolamine.</p>\n<p><strong>Noradrenaline</strong> and <strong>dopamine</strong> <strong>lack beta 2 action,</strong> and vasomotor reversal of the Dale phenomenon is not seen with them.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following has higher alpha 1A receptor selective blocking activity?",
    "choices": [
      {
        "id": 1,
        "text": "Prazosin"
      },
      {
        "id": 2,
        "text": "Tamsulosin"
      },
      {
        "id": 3,
        "text": "Silodosin"
      },
      {
        "id": 4,
        "text": "Both b and c"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Both tamsulosin and silodosin have higher alpha 1A selectivity over alpha 1B receptors.</p>\n<p>Tamsulosin is an alpha 1A/1D selective blocker.</p>\n<p>Selective alpha 1A vs. non-selective alpha 1 blockers:</p>\n<p>Advantage:</p>\n<ul>\n<li>Less interference with blood pressure</li>\n<li>Lower incidence of dizziness and orthostatic hypotension</li>\n</ul>\n<p>Disadvantage:</p>\n<ul>\n<li>Higher incidence of abnormal ejaculation or retrograde ejaculation</li>\n</ul>\n<p>Prazosin is a non-selective alpha 1 blocker; it has equal selectivity for alpha 1A, 1B and 1D receptors &nbsp;(option a).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Inhibition of fibrinolysis is caused by",
    "choices": [
      {
        "id": 1,
        "text": "Streptokinase"
      },
      {
        "id": 2,
        "text": "Epsilon amino caproic acid"
      },
      {
        "id": 3,
        "text": "Heparin"
      },
      {
        "id": 4,
        "text": "Protamine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>Epsilon amino caproic acid binds lysine-binding site of plasmin and inhibits plasmin-induced fibrinolysis.</li>\n<li>Streptokinase is a plasminogen activator that results in fibrinolysis (option a).</li>\n<li>Heparin is an anticoagulant, whereas protamine is an antidote to heparin (options c and d).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "H3 receptor agonists exhibits",
    "choices": [
      {
        "id": 1,
        "text": "Positive chronotropic effect"
      },
      {
        "id": 2,
        "text": "Increased wakefulness"
      },
      {
        "id": 3,
        "text": "Decreased H1 mediated gastrin secretion"
      },
      {
        "id": 4,
        "text": "Bronchoconstriction"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>H3 receptors</strong> are predominantly <strong>auto receptors</strong> that <strong>decrease histamine release</strong> and <strong>antagonize the actions of histamine</strong>.</p>\n<p>Therefore, H3 receptor agonists <strong>decrease H1 mediated gastrin secretion</strong>.</p>\n<p><strong>H3 receptor agonist actions</strong>:</p>\n<ul>\n<li><strong>Negative chronotropic activity</strong>: modulatory activity on adrenergic neuronal terminals resulting in decreased NA release (option a)</li>\n<li><strong>Sedation</strong> due to decreased histamine release (option b)</li>\n<li><strong>Inhibition</strong> <strong>of</strong> histamine induced<strong> bronchoconstriction</strong> (option d)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Hypertrichosis of eyelashes is seen with the following antiglaucoma agents",
    "choices": [
      {
        "id": 1,
        "text": "Topical beta blockers"
      },
      {
        "id": 2,
        "text": "Topical PGF2 alpha analogs"
      },
      {
        "id": 3,
        "text": "Topical carbonic anhydrase inhibitors"
      },
      {
        "id": 4,
        "text": "Systemic carbonic anhydrase inhibitors"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Topical PGF2 alpha analogs are associated with hypertrichosis of eyelashes.</p>\n<p>Bimatoprost is used in the topical treatment of eyelash hypotrichosis.</p>\n<p>Adverse effects of&nbsp; topical PGF2 alpha analogs:</p>\n<ul>\n<li>Eyelash hypertrichosis</li>\n<li>Iris pigmentation</li>\n<li>Macular edema</li>\n<li>Blurred vision</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes with complaints of claudication pain of the left lower limb while walking. Which of the following phosphodiesterase inhibitors is indicated in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Sildenafil"
      },
      {
        "id": 2,
        "text": "Cilostazol"
      },
      {
        "id": 3,
        "text": "Theophylline"
      },
      {
        "id": 4,
        "text": "Milrinone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The history of&nbsp;<strong>claudication pain&nbsp;</strong>suggests a likely diagnosis of <strong>peripheral vascular disease</strong> and <strong>cilostazol</strong> is the <strong>phosphodiesterase inhibitor</strong> that is <strong>indicated</strong> in this condition.</p>\n<p>Phosphodiesterase (PDE) is an enzyme that degrades cyclic nucleotides intracellularly. Therefore, phosphodiesterase inhibitors increase the concentration of cyclic nucleotides (cAMP and cGMP).</p>\n<p>There are different classes of phosphodiesterase inhibitors of which <strong>cilostazol</strong> is a <strong>PDE-3 inhibitor</strong>. It increases intracellular cAMP in vascular smooth muscle and platelets leading to vasodilatory and antiaggregatory effects. This allows patients with intermittent claudication to have <strong>better walking distance</strong>.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Sildenafil</strong> and tadalafil are <strong>selective PDE-5 inhibitor</strong>&nbsp;and are used for <strong>pulmonary arterial hypertension</strong> and <strong>erectile dysfunction</strong>.</p>\n<p>Option C: <strong>Theophylline</strong> is a <strong>non-specific phosphodiesterase</strong> <strong>inhibitor</strong> that causes <strong>bronchodilatation</strong> as well as decreases the release of inflammatory cytokines. It has <strong>limited use</strong> in the management of asthma due to various side effects.</p>\n<p>Option D: <strong>Milrinone</strong> is a <strong>selective PDE - 3 inhibitor</strong> and is used as a short-term therapy in <strong>severe</strong> or <strong>refractory congestive heart failure</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sacubitril is a/an",
    "choices": [
      {
        "id": 1,
        "text": "Angiotensin converting enzyme inhibitor"
      },
      {
        "id": 2,
        "text": "Angiotensin receptor blocker"
      },
      {
        "id": 3,
        "text": "Direct renin blocker"
      },
      {
        "id": 4,
        "text": "Neprilysin inhibitor"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>Sacubitril is a neprilysin inhibitor indicated for the management of CHF along with valsartan, an AT1 receptor antagonist (option b).</li>\n<li>The combination has mortality benefits in CHF patients.</li>\n<li>Neprilysin is an enzyme responsible for the breakdown of atrial and brain natriuretic peptide. Inhibition of neprilysin results in increased natriuresis and other effects that are beneficial for CHF patients.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Macrocyclic antibiotic indicated for the treatment of Clostridium difficile associated diarrhea is",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin"
      },
      {
        "id": 2,
        "text": "Telithromycin"
      },
      {
        "id": 3,
        "text": "Fidaxomicin"
      },
      {
        "id": 4,
        "text": "Roxithromycin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Fidaxomicin is a narrow spectrum macrocyclic antibacterial active against Clostridium difficile.</li>\n<li>Like macrolides (14/15 memebered ring), fidaxomicin has a large lactone ring consisting of 18 membered ring. But the mechanism of action is different.</li>\n<li>It is bactericidal and acts by inhibiting protein synthesis through blockade of RNA polymerase.</li>\n<li>It is indicated in the treatment of Clostridium difficile associated diarrhea especially in recurrent cases.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs blocks the binding of gp120 HIV protein to the CCR5 receptor?",
    "choices": [
      {
        "id": 1,
        "text": "Enfuviritide"
      },
      {
        "id": 2,
        "text": "Maraviroc"
      },
      {
        "id": 3,
        "text": "Lopinavir"
      },
      {
        "id": 4,
        "text": "Raltegravir"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Maraviroc</strong> <strong>blocks</strong> HIV envelope protein <strong>gp120 </strong>from<strong> binding to the CCR5 receptor</strong>.&nbsp;</p>\n<p>During the entry of the HIV virus into the host cell, <strong>gp120 anchors the virion</strong> to the host cell <strong>by binding to CD4</strong>. Further, <strong>gp120 binds to CCR5</strong> chemokine receptors <strong>to stabilize</strong> the entire complex. <strong>Gp41</strong> then mediates the <strong>fusion of the viral membrane with the cell membrane</strong> of the target cell.&nbsp;<strong>Maraviroc</strong> is an <strong>entry inhibitor</strong> that is used for the treatment of HIV.&nbsp;<strong>Maraviroc</strong> <strong>binds to CCR5</strong> receptors and <strong>prevents viral entry</strong> into the cell.&nbsp;</p>\n<p><strong>Enfuvirtide</strong> (option A) is another <strong>entry inhibito</strong>r that <strong>binds to</strong> certain domains of <strong>gp41 HIV protein</strong> and <strong>prevents membrane fusion</strong> and viral entry into the cell. It is the <strong>only antiretroviral drug</strong> that is <strong>given parenterally</strong> (subcutaneous or intravenous).&nbsp;</p>\n<p><strong>Lopinavir</strong> (option C) is a <strong>protease inhibitor</strong>. This class of drugs <strong>inhibits the viral protease</strong> that is essential for conversion of the inactive protein precursors into functional proteins.</p>\n<p><strong>Raltegravir</strong> (option D) is an <strong>integrase inhibitor</strong>. It <strong>prevents</strong> the formation of covalent bond&nbsp;&mdash; and thus the <strong>integration</strong>&nbsp;&mdash; <strong>of</strong> the <strong>HIV DNA and the host cell DNA</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true about cephalosporins except",
    "choices": [
      {
        "id": 1,
        "text": "Cefazolin is a first generation parenteral cephalosporin"
      },
      {
        "id": 2,
        "text": "Cefoperazone has anti-pseudomonal activity"
      },
      {
        "id": 3,
        "text": "Cefixime has poor activity against Staph aureus"
      },
      {
        "id": 4,
        "text": "Cefoxitin has no activity against anaerobes"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Cefoxitin</strong>, cefmetazole and cefotetan are the second generation cephalosporins that are <strong>active against anaerobic bacteria</strong> (B fragilis).</p>\n<p><strong>Cefazolin</strong> is a first generation parenteral cephalosporin (option a).</p>\n<p><strong>Cefixime</strong> has poor activity against Staph aureus (option c).</p>\n<p>Cephalosporins having antipseudomonal activity:</p>\n<ul>\n<li><strong>Cefoperazone</strong> (option b)</li>\n<li>Ceftazidime</li>\n<li>Cefepime</li>\n<li>Cefpirome</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mesna use reduces the toxicity associated with high doses of",
    "choices": [
      {
        "id": 1,
        "text": "Cyclophosphamide"
      },
      {
        "id": 2,
        "text": "Ifosfamide"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Methotrexate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Cyclophosphamide and ifosfamide release a urotoxic metabolite called acrolein in high-dose regimens.</li>\n<li>Acrolein is responsible for severe hemorrhagic cystitis.</li>\n<li>Mesna or 2-mercaptoethanesulfonate prevents hemorrhagic cystitis by binding acrolein.</li>\n<li>Leucovorin is helpful in mitigating high dose methotrexate toxicity (option d).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "BCR-ABL tyrosine kinase inhibitor is",
    "choices": [
      {
        "id": 1,
        "text": "Gefitinib"
      },
      {
        "id": 2,
        "text": "Erlotinib"
      },
      {
        "id": 3,
        "text": "Nilotinib"
      },
      {
        "id": 4,
        "text": "Afatinib"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Nilotinib is an inhibitor of BCR-ABL tyrosine kinase.</p>\n<p>BCR-ABL tyrosine kinase inhibitors</p>\n<ul>\n<li>Imatinib</li>\n<li>Dasatinib</li>\n<li>Nilotinib</li>\n</ul>\n<p>Gefitinib and erlotinib competitively inhibits ATP binding at the active site of epidermal growth factor receptor (EGFR) tyrosine kinase (options a and b). Afatinib binds covalently to EGFR and other related tyrosine kinase receptors and cause irreversible inhibition (option d).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old woman with chronic kidney disease was given a diuretic intravenously. Following administration of the drug, she developed tinnitus and diminished hearing. Which of the following drugs was most likely given?",
    "choices": [
      {
        "id": 1,
        "text": "Thiazide"
      },
      {
        "id": 2,
        "text": "Spirinolactone"
      },
      {
        "id": 3,
        "text": "Ethacrynic acid"
      },
      {
        "id": 4,
        "text": "Triamterene"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ethacrynic acid </strong>is the diuretic that was most likely given as it is commonly associated with<strong> ototoxicity</strong>.</p>\n<p>Ototoxicity occurs with <strong>rapid intravenous infusion</strong> and the hearing impairment and deafness are usually <strong>reversible.</strong></p>\n<p>Ethacrynic acid should be used only in patients who are not able to tolerate other loop diuretics.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following agents act by intracellular receptors except ______",
    "choices": [
      {
        "id": 1,
        "text": "Thyroid hormones"
      },
      {
        "id": 2,
        "text": "Vitamin D"
      },
      {
        "id": 3,
        "text": "Insulin"
      },
      {
        "id": 4,
        "text": "Steroid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Insulin</strong> receptors belong to the class of<strong> trans-membrane</strong> enzyme-linked receptors.</p>\n<p><strong>Transmembrane enzyme-linked receptors </strong>consist of a<strong>&nbsp;</strong>large extracellular ligand-binding domain. It is connected to an intracellular subunit having enzymatic property through a single transmembrane helical peptide chain. The enzyme on the cytosolic side is usually a <strong>protein kinase</strong> (tyrosine) or <strong>membrane-bound GC&nbsp;</strong>(guanylyl cyclase).</p>\n<p>Physiological ligands for transmembrane enzyme-linked receptors are mostly growth factors and chemokines. Other receptors belonging to this class include:</p>\n<ul>\n<li><strong>Receptor tyrosine kinases -&nbsp;</strong>Growth factors (PDGF, EGF, VEGF); insulin</li>\n</ul>\n<ul>\n<li><strong>Membrane-bound GC -&nbsp;</strong>Natriuretic peptides</li>\n</ul>\n<ul>\n<li><strong>Receptor serine-threonine kinases -&nbsp;</strong>TGF-&beta;&nbsp;</li>\n</ul>\n<p>Thyroid hormones, vitamin D, and steroids act via intracellular receptors.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following acid-base abnormality is least likely to be associated with salicylate use at therapeutic or toxic doses",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory alkalosis"
      },
      {
        "id": 2,
        "text": "Metabolic alkalosis"
      },
      {
        "id": 3,
        "text": "Metabolic acidosis"
      },
      {
        "id": 4,
        "text": "Respiratory acidosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Metabolic alkalosis </strong>is <strong>least likely</strong> to be associated with salicylate use at therapeutic or toxic doses.<strong>&nbsp;</strong></p>\n<p>At&nbsp;therapeutic doses:&nbsp; Salicylates stimulate respiratory&nbsp;center causing a fall in PCO<sub>2 </sub>leading to&nbsp;<strong>respiratory alkalosis</strong>. This is compensated by increased renal bicarbonate excretion.&nbsp;</p>\n<p>At higher (toxic) doses: Salicylates directly depress the respiration preventing the washout of CO<sub>2</sub>&nbsp;causing a fall in blood pH. Since the concentration of HCO<sub>3</sub><sup>-</sup> in already low in the plasma due to increased renal excretion, it leads to uncompensated&nbsp;<strong>respiratory acidosis</strong>.</p>\n<p>Further, salicylates impair renal function leading to accumulation of sulfuric and phosphoric acids and accumulation of organic acids like pyruvic, lactic and acetoacetic acid.&nbsp;This together leads to <strong>metabolic acidosis</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following NSAIDs can commonly cause NSAID induced nephropathy?",
    "choices": [
      {
        "id": 1,
        "text": "Phenacetin"
      },
      {
        "id": 2,
        "text": "Phenylbutazone"
      },
      {
        "id": 3,
        "text": "Naproxen"
      },
      {
        "id": 4,
        "text": "Ibuprofen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Phenacetin, a para-amino phenal derivative was introduced in 1887 and was used extensively therafter. <strong>It was subsequently withdrawn due to its association with analgesic abuse nephropathy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following antihistaminic drugs has additional platelet-activating factor antagonistic property?",
    "choices": [
      {
        "id": 1,
        "text": "Fexofenadine"
      },
      {
        "id": 2,
        "text": "Cetirizine"
      },
      {
        "id": 3,
        "text": "Ebastine"
      },
      {
        "id": 4,
        "text": "Rupatadine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Rupatadine</strong> is an antihistaminic drug that has additional<strong> platelet activating</strong> <strong>factor</strong> <strong>antagonistic property&nbsp;</strong>and is indicated in allergic rhinitis.</p>\n<p>Platelet-activating factor (PAF)&nbsp;is&nbsp;involved in the pathophysiology of allergic rhinitis, asthma, and anaphylaxis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not useful in prophylaxis of migraine?",
    "choices": [
      {
        "id": 1,
        "text": "Propranolol"
      },
      {
        "id": 2,
        "text": "Timolol"
      },
      {
        "id": 3,
        "text": "Metoprolol"
      },
      {
        "id": 4,
        "text": "Pindolol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Beta blockers having intrinsic sympathomimetic activity like pindolol is not effective in prophylaxis of migraine</strong>.</p>\n<p>Non-selective blockers like propranolol and timolol and cardioselective blockers like metoprolol, atenolol are effective in prophylaxis of migraine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Osteomalacia in phenytoin is due to:",
    "choices": [
      {
        "id": 1,
        "text": "Altered metabolism of vitamin D"
      },
      {
        "id": 2,
        "text": "Altered metabolism of vitamin K"
      },
      {
        "id": 3,
        "text": "Both a and b"
      },
      {
        "id": 4,
        "text": "Direct action on parathyroid glands"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li><strong>Osteomalacia due to phenytoin use is attributed to both alteration in vitamin D and vitamin K metabolism.</strong></li>\n</ul>\n<ul>\n<li>Alteration in vitamin D metabolism and the attendant inhibition in intestinal reabsorption of Ca<sup>2+</sup> contributes to hypocalcemia and osteomalacia.</li>\n</ul>\n<ul>\n<li>The increase in vitamin K metabolism reduces the concentration of vitamin K-dependent proteins that are important for normal Ca<sup>2+</sup> metabolism in bones. This is the reason why the osteomalacia due to phenytoin is not always ameliorated by the administration of vitamin D.</li>\n<li>Gamma carboxylation of osteocalcin and other important activities in bone requires vitamin K.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a carbamazepine analogue that has an advantage of once daily dosing?",
    "choices": [
      {
        "id": 1,
        "text": "Oxcarbezepine"
      },
      {
        "id": 2,
        "text": "Eslicarbazepine acetate"
      },
      {
        "id": 3,
        "text": "Dacarbazine"
      },
      {
        "id": 4,
        "text": "Licarbazepine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Eslicarbazepine acetate</strong> is an analog of carbamazepine that has the advantage of <strong>once-daily</strong> dosing. It is a <strong>prodrug</strong> and is rapidly converted to active <strong>licarbazepine</strong>.</p>\n<p><strong>Oxcarbazepine</strong> is an analog of carbamazepine that is also converted to licarbazepine. Oxcarbazepine does not have the advantage of once-daily dosing like eslicarbazepine acetate.</p>\n<p><strong>Dacarbazine</strong> is not a carbamazepine analog like the other drugs and is a <strong>chemotherapy</strong> medication used in the treatment of <strong>melanoma</strong> and <strong>Hodgkin's lymphoma.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A college student on MAO inhibitor therapy for depression consumed two bottles of beer during a party. The next day he started experiencing severe headache, nausea, and vomiting. He was taken to the casualty by his friends where his BP was recorded to be 180/110mmHg. Which of the following compounds would be responsible for this complication?",
    "choices": [
      {
        "id": 1,
        "text": "Tyramine"
      },
      {
        "id": 2,
        "text": "Tyrptophan"
      },
      {
        "id": 3,
        "text": "Threonine"
      },
      {
        "id": 4,
        "text": "Thiamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical presentation of a <strong>hypertensive crisis</strong> in a patient on <strong>MAO inhibitor</strong> therapy is suggestive of <strong>cheese reaction</strong>, which is seen after consumption of foods rich in<strong>&nbsp;tyramine </strong>(beer).</p>\n<p>Tyramine is an indirect <strong>sympathomimetic</strong>. It induces the release of catecholamines from the neurons. Tyramine can be produced in high concentrations in <strong>protein-rich foods</strong> by decarboxylation of tyrosine during fermentation.</p>\n<p>Normally tyramine is <strong>inactivated</strong> when taken orally because it is readily metabolized <strong>by MAO</strong> in the liver. In patients who are on&nbsp;<strong>MAO inhibitor therapy</strong>, the tyramine taken in the diet is <strong>not inactivated</strong> and results in its <strong>increased sympathomimetic effect</strong> resulting in elevated blood pressure, termed as hypertensive crisis or cheese reaction. Drug of choice for cheese reaction is <strong>IV phentolamine.</strong></p>\n<p>When MAO inhibitors are taken along with SSRI or TCA, it results in <strong>serotonin syndrome </strong>due to the overstimulation of 5HT receptors. The clinical features are a triad of:</p>\n<ol>\n<li><strong>Cognitive</strong> effect - delirium, coma</li>\n<li><strong>Autonomic</strong> effects- hypertension, tachycardia</li>\n<li><strong>Somatic</strong> effects- myoclonus, hyperreflexia, tremors</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e161466fb10d429f81c37cb0bbc1f784x1280x1437.JPEG"
    ]
  },
  {
    "text": "Maximum hepatic enzyme inhibition is seen with ______",
    "choices": [
      {
        "id": 1,
        "text": "Ranitidine"
      },
      {
        "id": 2,
        "text": "Cimetidine"
      },
      {
        "id": 3,
        "text": "Famotidine"
      },
      {
        "id": 4,
        "text": "Nizatidine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cimetidine causes maximum hepatic enzyme inhibition among the given options.</strong></p>\n<p>Cimetidine inhibits CYP enzymes like CYP1A2, CYP2C9, and CYP2D6. It can interfere with the metabolism of drugs that are substrates of the above enzymes.</p>\n<p>Ranitidine also interacts with CYP enzymes but the affinity is only 10% to that of cimetidine (Option A).</p>\n<p>Famotidine and nizatidine are considered safer with respect to enzyme inhibition (Options C and D).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Pharmacology St 1';
        const quizFilename = 'pharmacology-st-1-a3e27432.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>