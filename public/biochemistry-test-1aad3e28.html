<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biochemistry Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "An elderly patient on a vegetarian diet presenting with easy fatigability and pallor was investigated. Peripheral smear showed findings of macrocytic anemia. Investigations reveal elevated serum homocysteine levels and normal serum methylmalonic acid levels. What is the probable cause of anemia in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B9 deficiency"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Vitamin B1 deficiency"
      },
      {
        "id": 4,
        "text": "Vitamin B6 deficiency"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of megaloblastic <strong>anemia</strong> in a vegetarian with <strong>elevated </strong>homocysteine levels and <strong>normal </strong>serum methylmalonic acid (MMA) levels is due to folic acid deficiency.</p>\n<p><strong>Folic acid</strong> (Vitamin <strong>B9</strong>) is a <strong>water-soluble</strong> vitamin, and its <strong>active form</strong> is tetrahydrofolate (<strong>THFA</strong>). It acts as a carrier of\u00a0<strong>one-carbon groups.\u00a0</strong>THFA is involved in the formation of many <strong>coenzymes</strong> in metabolic systems, particularly for <strong>purine</strong> and <strong>pyrimidine synthesis</strong>, nucleoprotein synthesis, and maintenance in erythropoiesis.</p>\n<p>Folate deficiency results in megaloblastic anemia, homocysteinemia, and <strong>neural tube defects</strong> (spina bifida, anencephaly) in the fetus.</p>\n<p>Folic acid deficiency is associated with the following clinical and laboratory findings:</p>\n<ul>\n<li><strong>Raised MCV</strong> (normal range: 80\u2013100 fL)\u00a0- <strong>macrocytosis</strong></li>\n<li><strong>Decrease </strong>in<strong> hemoglobin </strong>and <strong>hematocrit levels.</strong></li>\n<li><strong>Normal MMA </strong>level</li>\n<li><strong>Elevated homocysteine </strong>levels<strong>.</strong></li>\n</ul>\n<p>where MCV<strong>\u00a0</strong>is<strong>\u00a0</strong>the\u00a0mean corpuscular volume.</p>\n<p>Patients with folate deficiency should be offered <strong>supplemental folic acid</strong> for the correction of the deficiency. Typically, oral folic acid (1 to 5 mg daily) suffices to treat folate deficiency\u00a0</p>\n<p>Other options:</p>\n<p>Option B:\u00a0<strong>Vitamin B12</strong> or<strong> cobalamin</strong>\u00a0deficiency presents as<strong>\u00a0anemia</strong>, fatigue, and pallor symptoms. Other presenting complaints may include\u00a0<strong>peripheral neuropathy</strong>,\u00a0glossitis, diarrhea, headaches, neuropsychiatric disturbances like\u00a0dementia, and\u00a0<strong>subacute combined degeneration of the spinal cord</strong> (SACD) leading to\u00a0ataxia. A peripheral smear shows\u00a0macrocytic anemia\u00a0and\u00a0hypersegmented neutrophils. Vitamin B12 deficiency is associated with <strong>raised </strong>serum methylmalonic acid (MMA) levels.</p>\n<p>Option C: A patient with <strong>thiamine </strong>or\u00a0<strong>vitamin B1</strong>\u00a0deficiency presents either\u00a0<strong>dry Beriberi</strong>\u00a0with\u00a0<strong>predominantly neurological</strong>\u00a0symptoms like\u00a0<strong>neuropathy</strong>, muscle weakness, and wasting or\u00a0<strong>wet Beriberi</strong>\u00a0with predominant cardiac symptoms like <strong>cardiomegaly</strong>, tachycardia, high output congestive cardiac failure.</p>\n<p>Option D: A patient with <strong>pyridoxine or</strong>\u00a0<strong>vitamin B6</strong>\u00a0deficiency presents with symptoms of seborrhea, glossitis, convulsions, neuropathy, depression, confusion, and\u00a0<strong>normocytic</strong>\u00a0<strong>anemia</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with tendon xanthomas. His lipid profile showed serum cholesterol levels to be 283 mg/dL and serum LDL to be 202 mg/dL. He was started on lovastatin. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Familial hypercholesterolemia"
      },
      {
        "id": 2,
        "text": "Tangier's disease"
      },
      {
        "id": 3,
        "text": "Lipoprotein lipase deficiency"
      },
      {
        "id": 4,
        "text": "Familial hyperchylomicronemia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical presentation with <strong>tendon xanthomas</strong> and <strong>elevated serum LDL</strong> (low-density lipoprotein) and <strong>elevated serum cholesterol</strong> points to a diagnosis of <strong>familial hypercholesterolemia (FH).</strong></p>\n<p>Familial hypercholesterolemia &nbsp;(type IIa hyperlipoproteinemia) is an <strong>inherited disorder</strong> due to <strong>defects in LDL receptors</strong>. This defect causes a decrease in the uptake of LDL and cholesterol. As a result, the blood levels of both LDL and cholesterol are elevated. Such patients are at increased risk to develop <strong>atherosclerosis</strong> and <strong>coronary artery disease.</strong></p>\n<p>Features of FH:&nbsp;</p>\n<ul>\n<li>Painful polyarthritis and tendinitis are common.</li>\n<li>Physical findings seen are <strong>corneal arcus</strong>&nbsp;and&nbsp;<strong>tendon xanthomas</strong> over<strong> Achilles tendon</strong> and&nbsp;the dorsum of hands. Xanthomas are tumorous masses produced by foamy cell clusters (lipid-laden macrophages) found in the connective tissue of the skin and in tendons.</li>\n</ul>\n<p>Diagnosis is done clinically based on hypercholesterolemia with&nbsp;</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">LDL <strong>&gt; 190 mg/dl</strong>,&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Family history of hypercholesterolemia and/or</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Premature coronary artery disease.</li>\n</ul>\n<p>Treatment includes lifestyle changes, restriction of a fatty diet, and pharmacotherapy with <strong>statins</strong> in heterozygous FH patients.</p>\n<p>Recent drugs for specific treatment of homozygous FH are:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Lomitapide</strong>, a microsomal triglyceride transfer protein (MTP) inhibitor, and</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Mipomersen</strong>, an antisense oligonucleotide against apoB.</li>\n</ul>\n<p>The image below shows Achilles tendon xanthoma and a plain lateral radiograph of both ankles showing bilateral symmetrical swellings (arrows) superior to the calcaneum respectively.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/864ecc007850432da511921ae29204c9x284x178.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a4d2e15aa1c430891887f2f5685ec09x512x416.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/dd350316b6c9423d8b3a4b0547759642x225x225.JPEG"
    ]
  },
  {
    "text": "A 6-month-old child was brought to the outpatient clinic with features of hypotonia, irritability, and exaggerated startle response. Development milestones were delayed. Fundoscopic examination revealed the finding as shown in the image below. Which of the following enzymes is deficient in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "\u03b1-Galactosidase"
      },
      {
        "id": 2,
        "text": "Arylsulfatase A"
      },
      {
        "id": 3,
        "text": "\u03b2-Hexosaminidase A"
      },
      {
        "id": 4,
        "text": "\u03b2-Glucosidase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of an infant presenting with hypotonia, irritability, exaggerated startle response, delayed milestones, and the image showing the cherry-red spot point to the diagnosis of <strong>Tay-Sachs disease</strong>. The enzyme <strong>deficient</strong> in this condition is <strong>\u03b2-hexosaminidase A.</strong></p>\n<p>Tay-Sachs disease is a lipid storage disorder due to the\u00a0deficiency<strong>\u00a0</strong>of<strong>\u00a0</strong>hexosaminidase<strong> </strong>A leading to the <strong>accumulation</strong> of<strong> GM2 gangliosides. </strong>It is\u00a0classified into infantile, juvenile, and adult-onset forms based on the age at onset and clinical features.</p>\n<p>Affected infants usually develop normally until 4-5 months of age. Clinical features of Tay-Sachs disease include:</p>\n<ul>\n<li><strong>Muscle weakness (hypotonia)</strong></li>\n<li>Seizures</li>\n<li><strong>Exaggerated startle response</strong></li>\n<li>Macrocephaly</li>\n<li>Mental retardation</li>\n<li><strong>Macular</strong>\u00a0<strong>cherry-red spots</strong></li>\n<li>Blindness</li>\n<li><strong>Developmental delay</strong></li>\n</ul>\n<p>The deficiency of <strong>\u03b2-hexosaminidase A </strong>and<strong> B</strong> causes <strong>Sandhoff's</strong> <strong>disease</strong>. The clinical manifestations of Sandhoff disease are similar to those of Tay-Sachs disease. Infants with Sandhoff disease have hepatosplenomegaly, cardiac involvement, and mild bony abnormalities.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/796d7466cb434493ac459ed06347e8c6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The echocardiography report of a 35-year-old woman hailing from China indicates dilated cardiomyopathy. Which of the following conditions can explain her diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Selenium toxicity"
      },
      {
        "id": 2,
        "text": "Selenium deficiency"
      },
      {
        "id": 3,
        "text": "Zinc toxicity"
      },
      {
        "id": 4,
        "text": "Zinc deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient is probably suffering from <strong>Keshan's disease</strong>, which is due to <strong>selenium deficiency</strong>.</p>\n<p>Keshan disease is <strong>endemic cardiomyopathy</strong> found in children and young women residing in regions of <strong>China</strong> where <strong>dietary intake</strong> of <strong>selenium</strong> is <strong>low</strong>. Mainly <strong>dilated cardiomyopathy</strong> is characteristic, and may also result in cardiomegaly,\u00a0congestive cardiac failure and fulminant cardiogenic shock.</p>\n<p>Selenium is an important trace element that is a <strong>part </strong>of the<strong> 21st amino acid selenocysteine</strong>. There are many selenium-containing enzymes such as:</p>\n<ul>\n<li>Glutathione peroxidase</li>\n<li>De-iodinase</li>\n<li>Thioredoxin reductase</li>\n</ul>\n<p>Selenium is also an <strong>intracellular antioxidant</strong> that complements the role of vitamin E. Dietary sources of selenium include seafood, muscle meat, and\u00a0some cereals.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which Vitamin forms a part of Coenzyme A and acyl carrier protein (ACP)?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B2"
      },
      {
        "id": 2,
        "text": "Vitamin B3"
      },
      {
        "id": 3,
        "text": "Vitamin B5"
      },
      {
        "id": 4,
        "text": "Vitamin B6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pantothenic Acid (Vitamin B5)</strong> acts as the pantetheine functional moiety in <strong>Coenzyme A</strong> and\u00a0<strong>acyl carrier protein (ACP)</strong></p>\n<p>Vitamin B5 plays a central role in acyl group metabolism.</p>\n<p><strong>Functions of CoA (Coenzyme A)</strong> :</p>\n<p>Takes part in the reactions of\u00a0</p>\n<ul>\n<li>Citric acid cycle</li>\n<li>Fatty acid oxidation</li>\n<li>Acetylations</li>\n<li>Cholesterol synthesis</li>\n</ul>\n<p><strong>ACP</strong> plays a major role in <strong>Fatty Acid synthesis</strong></p>\n<p>Other options :</p>\n<p>Option A: <strong>Riboflavin (Vitamin B2)</strong> is responsible for the coenzymes flavin mononucleotide (FMN) and Flavin-adenine-dinucelotide (FAD)</p>\n<p>Option B:<strong> Niacin (Vitamin B3)</strong> helps in the formation of coenzymes Nicotinamide-adenine dinucleotide (NAD) and NADP</p>\n<p>Option D: <strong>Pyridoxine (Vitamin B6)</strong> forms Pyridoxal Phosphate (PLP) as a coenzyme.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statement is false regarding epigenetic modification:",
    "choices": [
      {
        "id": 1,
        "text": "It causes the alteration of gene expression without mutation"
      },
      {
        "id": 2,
        "text": "The acetylation of histone favors active transcription"
      },
      {
        "id": 3,
        "text": "Genomic imprinting is a phenomenon involved in epigenetic gene inactivation"
      },
      {
        "id": 4,
        "text": "DNA methylation is restricted between cytosine and guanine residues connected by hydrogen bonds"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>DNA methylation</strong> usually occurs between <strong>cytosine and guanine residues connected by phosphodiester bond(CpG) island</strong> on the <strong>same strand.</strong></p>\n<p><strong>Epigenetics </strong>is defined as <strong>heritable chemical changes in gene expression </strong>that are <strong>not </strong>caused by the&nbsp;<strong>alteration in the gene sequence</strong>. It alters<strong> gene expression without the mutation</strong>. Epigenetic modification can <strong>cause both</strong> gene activation and inactivation. If it causes <strong>gene inactivation</strong>, it is known as <strong>Genomic imprinting</strong>. &nbsp;</p>\n<p>The epigenetic modification includes:</p>\n<ul>\n<li><strong>DNA methylation</strong> is usually restricted to cytosines of CpG dinucleotides, which are abundant throughout the genome. CpG islands in promoter regions are typically unmethylated, and the lack of methylation facilitates transcription.</li>\n<li><strong>Acetylation and deacetylation of lysine residues in core histones</strong> which activates and deactivates gene expression respectively. Acetylation of histone favors active transcription.</li>\n<li><strong>Methylation of histones</strong>: Histone <strong>M</strong>ethylation Mostly Makes DNA <strong>M</strong>ute.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-year-old girl is brought with a history of impaired vision. On examination, she has light hair, light skin color, and pale blue iris. The child has a normal IQ. Which of the following are not derived from the precursor amino acid, whose metabolism is impaired in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Epinephrine"
      },
      {
        "id": 2,
        "text": "DOPA"
      },
      {
        "id": 3,
        "text": "Thyroxine"
      },
      {
        "id": 4,
        "text": "GABA"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario of a child with<strong> impaired vision</strong>, <strong>light hair, light skin color</strong>, and <strong>pale blue iris</strong> with a <strong>normal IQ</strong> is suggestive of <strong>albinism</strong>, which is a disorder of <strong>tyrosine</strong> metabolism where there is a <strong>defect</strong> in <strong>melanin</strong> synthesis.<strong> Tyrosine</strong> is not the precursor amino acid of <strong>GABA</strong> (\u03b3-aminobutyric acid); it is <strong>glutamate.</strong></p>\n<p><strong>Tyrosine</strong> is a precursor of <strong>melanin</strong>, <strong>thyroxin</strong>, <strong>epinephrine</strong>, <strong>norepinephrine</strong>, and <strong>dihydroxyphenylalanine</strong> (<strong>DOPA</strong>).</p>\n<div class=\"page\" title=\"Page 29\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 219\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Formation of<strong> DOPA</strong>: Tyrosine is hydroxylated by <strong>tyrosinase</strong> to form <strong>dihydroxy phenylalanine</strong> or <strong>DOPA</strong>. Tyrosinase is a monooxygenase that contains copper.</li>\n<li>Formation of <strong>melanin</strong>: Tyrosinase acts on DOPA to form dopaquinone, which is then converted to indolequinone. The indolequinone is polymerized to form melanin.</li>\n<li>Formation of <strong>catecholamines</strong>: Epinephrine, norepinephrine, and dopamine. They are produced by the adrenal medulla and sympathetic ganglia.</li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Formation of</span><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">thyroid hormones</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">: Tyrosine residues are iodinated to form 3-mono-iodo-tyrosine (MIT) and 3,5-di-iodo-tyrosine (DIT). These are coupled to give rise to </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">triiodothyronine (T3)</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> and </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">tetraiodothyronine</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0(</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">thyroxine or T4</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">).</span></li>\n</ul>\n<p>The series of reactions involving the production of catecholamines is shown in the image below.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/971e1b0e892947d9b0b1ad58cd92037ax1280x2161.JPEG"
    ]
  },
  {
    "text": "Which of the following steps in the metabolism of Vitamin D requires sunlight?",
    "choices": [
      {
        "id": 1,
        "text": "1,25 dihydroxycholecalciferol to 7-dehydrocholesterol"
      },
      {
        "id": 2,
        "text": "7-dehydrocholesterol to cholecalciferol"
      },
      {
        "id": 3,
        "text": "Cholecalciferol to 25-hydroxycholecalciferol"
      },
      {
        "id": 4,
        "text": "25-hydroxycholecalciferol to 1,25 dihydroxycholecalciferol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the metabolism of vitamin D, the conversion of <strong>7-dehydrocholesterol\u00a0</strong>to<strong> cholecalciferol </strong>requires <strong>sunlight.</strong></p>\n<p><strong>Vitamin D metabolism</strong> occurs in 3 steps:</p>\n<p><strong>Step 1-</strong>\u00a0<strong>S</strong><strong>kin</strong>: <strong>7-dehydrocholesterol</strong> (an intermediate in cholesterol synthesis that accumulates in the skin) undergoes a nonenzymic reaction on exposure to ultraviolet light, yielding\u00a0<strong>cholecalciferol</strong>, which is absorbed into the bloodstream. Note that\u00a07-Dehydrocholesterol\u00a0and cholecalciferol <strong>already contain one hydroxy group.</strong></p>\n<p><strong>Step 2-</strong><strong>\u00a0Liver:\u00a0</strong>\u00a0<strong>Cholecalciferol</strong> is hydroxylated to\u00a0<strong>25-hydroxycholecalciferol</strong>.\u00a0This is released into the circulation bound to a vitamin D\u2013binding globulin, which is the main storage form of the vitamin.</p>\n<p><strong>Step 3- K</strong><strong>idney:</strong>\u00a0<strong>25-hydroxycholecalciferol</strong>\u00a0is converted to\u00a0<strong>1,25 dihydroxycholecalciferol</strong>, the biologically <strong>active form\u00a0</strong>by the enzyme\u00a0<strong>1\u03b1-hydroxylase.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/244b924e584d4ff0905febc9f244cab4x600x764.JPEG"
    ]
  },
  {
    "text": "Which of the following is not associated with G6PD deficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Equal incidence in males and females"
      },
      {
        "id": 2,
        "text": "Defective NAPDH synthesis"
      },
      {
        "id": 3,
        "text": "Predisposes the patient to oxidative stress"
      },
      {
        "id": 4,
        "text": "Patient presents with hemolysis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>G6PD Deficiency does not have an equal incidence in males and females. It is an <strong>X-linked recessive (XLR) disorder,</strong> hence<strong> males are more affected</strong> than females.</p>\n<p>Glucose-6-phosphate dehydrogenase (G6PD) deficiency causes <strong>congenital hemolytic anemia </strong>due to enzyme deficiency.\u00a0G6PD is required to generate NADPH while oxidizing glucose-6-phosphate in the<strong> hexose monophosphate pathway (HMP)</strong>. G6PD deficiency leads to <strong>reduced NADPH levels</strong> (option B) which then <strong>reduces</strong> the level of <strong>reduced glutathione.</strong> Reduced glutathione is required to protect the cells against <strong>oxidative stress</strong> to RBCs and <strong>hemolysis.</strong>\u00a0</p>\n<p>Clinically, most patients are asymptomatic. When exposed to triggers like <strong>fava beans, infections,</strong> drugs such as <strong>primaquine,</strong> chloroquine, <strong>sulfonamides/sulfones,</strong> dapsone, and nitrofurantoin patient develops:</p>\n<ul>\n<li><strong>Episodic hemolysis,</strong> both intravascular and extravascular</li>\n<li><strong>Hemolytic anaemia</strong></li>\n<li>Hemoglobinemia</li>\n<li>Hemoglobinuria</li>\n</ul>\n<p>Increased oxidative damage to RBCs leads to the formation of denatured precipitates known as <strong>Heinz bodies.</strong> These bodies can damage the RBC membrane leading to <strong>intravascular hemolysis.</strong> Additionally, when such RBCs pass through the splenic cords, macrophages pluck out these precipitates, giving them the characteristic appearance of<strong> bite cells.\u00a0</strong></p>\n<p>The images below show the presence of Heinz bodies and bite cells.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4dc646e0a7344b62b2f3ad958aed8038x1279x914.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fed3123012943dd8852893c0cf05c83x1279x914.JPEG"
    ]
  },
  {
    "text": "A 32-year-old man is found to have right-sided colon cancer. His father had similar colon cancer and died at the age of 40. His paternal aunt suffers from endometrial cancer and his paternal uncle also suffers from urothelial cancer. There is no history of familial adenomatous polyposis. Abnormality in which of the following DNA repair mechanisms is responsible for this patient's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Nucleotide excision repair"
      },
      {
        "id": 2,
        "text": "Homologous recombination"
      },
      {
        "id": 3,
        "text": "Base excision repair"
      },
      {
        "id": 4,
        "text": "Mismatch repair"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Lynch syndrome </strong>or<strong>\u00a0hereditary nonpolyposis colorectal cancer</strong> (HNPCC) and <strong>mismatch repair </strong>is\u00a0the defective DNA repair mechanism here.\u00a0</p>\n<p><strong>HNPCC</strong> is an <strong>autosomal dominant</strong> genetic condition that is associated with a high risk of <strong>colon cancer</strong><sup id=\"cite_ref-1\" class=\"reference\"></sup>\u00a0as well as other cancers including endometrial cancer (second most common), cancers of the stomach, ovary, ureters, etc. It is the most common cause of the syndromic form of colon cancer. Colon cancers are seen at <strong>younger</strong> ages and usually on the <strong>right</strong> side.</p>\n<p>DNA mismatch repair proteins<strong>\u00a0function as spell checkers</strong>\u00a0during DNA replication by correcting the\u00a0<strong>incorrect pairing.</strong>\u00a0In HNPCC, the proofreading function of the mismatch repair systems (majorly\u00a0<strong><em>MLH1\u00a0</em></strong><em>and</em><strong>\u00a0<em>MSH2</em></strong><em>)</em>\u00a0is lost leading to the accumulation of errors throughout the genome.\u00a0The genomes of these patients show <strong>microsatellite instability</strong>,\u00a0which is characterized by changes in the length of short repeats.</p>\n<p>Other options:</p>\n<p>Option A: Defects in the\u00a0<strong>nucleotide excision repair</strong>\u00a0pathway are seen in patients with\u00a0<strong>xeroderma pigmentosum.</strong></p>\n<p>Option B: Defects in\u00a0<strong>non-homologous end-joining</strong> are seen in patients with subacute combined immunodeficiency syndrome\u00a0<strong>(SCID).</strong></p>\n<p>Option C: Defects in <strong>DNA base excision repair</strong> are seen in patients with MUTYH-associated polyposis (MAP) syndromes.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about lipogenesis stimulated by Insulin?",
    "choices": [
      {
        "id": 1,
        "text": "Decreases acetyl CoA carboxylase activity"
      },
      {
        "id": 2,
        "text": "Decreases the transport of  glucose into the cells"
      },
      {
        "id": 3,
        "text": "Decreases intracellular cAMP level"
      },
      {
        "id": 4,
        "text": "Inhibits  PDH"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Insulin&nbsp;</strong>decreases intracellular cAMP level to stimulate lipogenesis.</p>\n<p><strong>Insulin stimulates lipogenesis</strong> by</p>\n<ul>\n<li>Increasing acetyl-CoA carboxylase.</li>\n<li>Increases the transport of glucose into the cell.</li>\n<li>Activates pyruvate dehydrogenase<strong>&nbsp;</strong>in the adipose tissue (fatty acid synthesis and glycerol-3-phosphate for triacylglycerol synthesis via esterification of the newly formed fatty acids)</li>\n<li><strong>Decreasing&nbsp;the level of intracellular cAMP&nbsp;</strong>(this inhibits lipolysis in adipose tissue, reducing the concentration of plasma-free fatty acids and, therefore, long-chain acyl-CoA, which are inhibitors of lipogenesis)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a substrate for glucose formation?",
    "choices": [
      {
        "id": 1,
        "text": "Acetyl coenzyme A"
      },
      {
        "id": 2,
        "text": "Glycerol"
      },
      {
        "id": 3,
        "text": "Alanine"
      },
      {
        "id": 4,
        "text": "Lactate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Acetyl coenzyme A (CoA)</strong> is not a substrate for glucose formation.</p>\n<p>Acetyl CoA and compounds that give rise to acetyl CoA alone like acetoacetate, lysine, and leucine cannot give rise to a net synthesis of glucose. This is because of the <strong>irreversible </strong>nature of the <strong>pyruvate dehydrogenase </strong>complex, which converts pyruvate to acetyl CoA. These compounds give rise to ketone bodies instead.</p>\n<p>The synthesis of glucose in the body, in the absence of dietary carbohydrates, occurs in two ways:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">From liver <strong>glycogen</strong>, by a process known as&nbsp;<strong>glycogenolysis</strong> in the absence of dietary carbohydrates, for up to 24 hours.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">De novo, from <strong>non-carbohydrate</strong> <strong>sources</strong>, by a process known as <strong>gluconeogenesis</strong>, when glycogen stores have depleted. This occurs primarily in the liver and to a lesser extent in the kidneys.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0dad2a1711c84079994e8716700ebb8bx942x1199.JPEG"
    ]
  },
  {
    "text": "A baby was brought to the clinic with symptoms of diarrhea, failure to thrive, and hair loss. On examination, the following findings are noted. Identify the mineral deficiency leading to this condition.",
    "choices": [
      {
        "id": 1,
        "text": "Niacin deficiency"
      },
      {
        "id": 2,
        "text": "Zinc deficiency"
      },
      {
        "id": 3,
        "text": "Riboflavin deficiency"
      },
      {
        "id": 4,
        "text": "Copper deficiency"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features shown in the images are <strong>periorificial dermatitis and alopecia. </strong>These features&nbsp;in a young child are suggestive of<strong> acrodermatitis enteropathica </strong>seen with <strong>zinc deficiency.</strong></p>\n<p><strong>Acrodermatitis enteropathica</strong>&nbsp;is a condition<strong>&nbsp;</strong>that occurs due to zinc deficiency and presents after weaning.&nbsp;Clinical features include failure to thrive, anorexia, <strong>diarrhea,</strong> recurrent infections, <strong>alopecia,</strong> male hypogonadism, and neurological manifestations like <strong>tremor,</strong> nystagmus, photophobia, hypogeusia, irritability, etc.</p>\n<p>Skin manifestations such as <strong>vesiculobullous dermatitis</strong> on the extremities and periorificial(perianal, perigenital, perioral) regions are commonly seen as shown below. Affected infants require long-term supplementation with zinc.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/148a24e8057044dc886b485251954cd8.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/21f51e566c0f4c5bacbf305c8b2cbb66x1280x1610.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/855977aa7f1d4fe6929c5112960e7ae5x720x521.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e24a8b1d3ff4634b257c3331b333f33x720x678.JPEG"
    ]
  },
  {
    "text": "A non-essential amino acid is involved in the first step of heme synthesis. Which of the following is not a derivative of this amino acid?",
    "choices": [
      {
        "id": 1,
        "text": "Serine"
      },
      {
        "id": 2,
        "text": "Collagen"
      },
      {
        "id": 3,
        "text": "Creatinine"
      },
      {
        "id": 4,
        "text": "Melanin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The non-essential amino acid involved in the first step of <strong>heme synthesis</strong> is <strong>glycine</strong>. Among the given options<strong> Melanin </strong>is a derivative of <strong>tyrosine</strong> and not glycine.\u00a0</p>\n<p><strong>Glycine</strong> is the simplest amino acid. It is <strong>non-essential </strong>and is<strong> glucogenic</strong>. It is involved in <strong>Heme biosynthesis</strong>, which is initiated by the condensation of succinyl-CoA and glycine in the presence of pyridoxal phosphate and \u03b4-aminolevulinate synthase (ALA synthase) to produce <strong>\u03b4-aminolevulinate.</strong> The Other products obtained from glycine are:</p>\n<ul>\n<li><strong>Creatine </strong>(from glycine, arginine, and methionine)</li>\n<li><strong>Serine</strong> (by reversal of serine hydroxymethyl transferase reaction)</li>\n<li><strong>Collagen</strong> (every third residue is glycine)</li>\n<li>Glutathione (from glutamic acid, cysteine, and glycine)</li>\n<li>C4, C5, and N7 of the purine ring structure</li>\n</ul>\n<p><strong>Tyrosine </strong>is a precursor of <strong>melanin</strong>, <strong>thyroxine</strong>, epinephrine, norepinephrine, and dihydroxyphenylalanine (DOPA).</p>\n<ul>\n<li>Formation of <strong>DOPA</strong>: Tyrosine is hydroxylated by <strong>tyrosinase</strong> to form dihydroxy phenylalanine or DOPA. Tyrosinase is a copper-containing monooxygenase enzyme.</li>\n<li>Formation of <strong>melanin</strong>: Tyrosinase acts on DOPA to form dopaquinone, which is then converted to indolequinone. The indolequinone is polymerized to form melanin.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4e2672093f1a4d4f842df338d172c528x1279x2161.JPEG"
    ]
  },
  {
    "text": "A patient on anti-tubercular treatment presents with a tingling sensation and paresthesia in the lower limbs. Her peripheral blood smear examination shows microcytic anemia. Which of the following enzyme assay is used to diagnose the deficient vitamin in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "RBC glutathione reductase"
      },
      {
        "id": 2,
        "text": "RBC transketolase"
      },
      {
        "id": 3,
        "text": "Histidine load test"
      },
      {
        "id": 4,
        "text": "RBC transaminase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"ng-scope\">\n<p class=\"ng-binding\">The clinical features of <strong>tingling sensation</strong>,&nbsp;<strong>paresthesias&nbsp;</strong>, and&nbsp;<strong>microcytic anemia</strong> in a patient on anti-tubercular treatment are suggestive of the adverse effect of <strong>isoniazid</strong>. The vitamin deficient in this patient is <strong>pyridoxine/vitamin B6.&nbsp;</strong>Therefore, the <strong>RBC transaminase </strong>enzyme assay is used to diagnose<strong> vitamin B6</strong> deficiency.&nbsp;</p>\n<p><strong>Isoniazid</strong> is the first-line antitubercular drug that inhibits the production of <strong>mycolic acid</strong>. It is a bactericidal drug against tubercle bacilli.</p>\n<p><strong>Peripheral neuritis</strong> occurs due to interference with the production of active coenzyme <strong>pyridoxal phosphate</strong> from pyridoxine. Patients present with clinical features of&nbsp;<strong>pyridoxine/vitamin B6</strong>&nbsp;deficiency, which include <strong>paresthesias</strong>, numbness, and<strong> tingling sensation</strong>. other features include&nbsp;seborrhea, glossitis, convulsions, neuropathy, depression, confusion, and&nbsp;<strong>microcytic anemia</strong>.</p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p>The most widely used method to know <strong>the vitamin B6 nutritional status</strong>&nbsp;is by <strong>measuring</strong> the&nbsp;<strong>RBC transaminase activity</strong>.</p>\n<p>Therefore, <strong>pyridoxine 10 mg/day (vitamin B6)</strong> is given prophylactically along with isoniazid to prevent neurotoxicity.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following blot transfer techniques is used to detect specific sequences of DNA?",
    "choices": [
      {
        "id": 1,
        "text": "Southwestern blot"
      },
      {
        "id": 2,
        "text": "Western blot"
      },
      {
        "id": 3,
        "text": "Northern blot"
      },
      {
        "id": 4,
        "text": "Southern blot"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Southern blot</strong> transfer technique can be used to detect specific sequences of DNA. It involves the following steps.</p>\n<ul>\n<li>DNA from a cell line or tissue is digested into fragments by<strong> restriction enzymes</strong></li>\n<li>The fragments are embedded in <strong>agarose or polyacrylamide gel</strong> and subjected to electrophoresis. This separates the fragments based on their charge and size</li>\n<li>The electrophoresed fragments are then denatured with a mild alkali and transferred to <strong>nitrocellulose or nylon paper</strong></li>\n<li>A labelled DNA probe is added, which hybridizes with complementary strands of DNA</li>\n<li>The hybridisation is visualised by X-raying the film or using an image screen</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which anticoagulant present in the light blue vacutainer is used for plasma glucose estimation?",
    "choices": [
      {
        "id": 1,
        "text": "Sodium fluoride"
      },
      {
        "id": 2,
        "text": "Heparin"
      },
      {
        "id": 3,
        "text": "Sodium citrate"
      },
      {
        "id": 4,
        "text": "Potassium oxalate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Light blue</strong> vacutainers contain the anticoagulant<strong> sodium citrate</strong>.</p>\n<table style=\"border-collapse: collapse; width: 76.225%; height: 134.391px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3333%; text-align: center; height: 22.3984px;\">Vacutainer</td>\n<td style=\"width: 33.3333%; text-align: center; height: 22.3984px;\">Additive</td>\n<td style=\"width: 33.3333%; text-align: center; height: 22.3984px;\">Uses</td>\n</tr>\n<tr style=\"height: 44.7969px;\">\n<td style=\"width: 33.3333%; height: 44.7969px;\">Light <strong>grey</strong></td>\n<td style=\"width: 33.3333%; height: 44.7969px;\"><strong>Sodium</strong> <strong>fluoride</strong> and potassium oxalate</td>\n<td style=\"width: 33.3333%; height: 44.7969px;\">Blood glucose estimation</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 33.3333%; height: 22.3984px;\">Light green</td>\n<td style=\"width: 33.3333%; height: 22.3984px;\"><strong>Lithium Heparin</strong></td>\n<td style=\"width: 33.3333%; height: 22.3984px;\">Plasma testing</td>\n</tr>\n<tr style=\"height: 44.7969px;\">\n<td style=\"width: 33.3333%; height: 44.7969px;\"><strong>Light blue</strong></td>\n<td style=\"width: 33.3333%; height: 44.7969px;\"><strong>Sodium citrate</strong></td>\n<td style=\"width: 33.3333%; height: 44.7969px;\">Coagulation tests (APTT and<br />prothrombin time)</td>\n</tr>\n</tbody>\n</table>\n<p><strong>Citrated</strong> <strong>plasma</strong> generated from whole blood is commonly utilized in laboratory testing for <strong>hemostasis</strong>. The recommended procedure involves the collection of specimens in tubes that are filled with a solution containing 3.2% sodium citrate (109 mM). The appropriate ratio for this collection is 9 parts blood to 1 part anticoagulant. The primary objective of citrate is to effectively <strong>eliminate</strong> <strong>calcium</strong> ions, which play a crucial role in the process of <strong>blood</strong> <strong>coagulation</strong>.</p>\n<p>The following image shows color coding of vacutainers with the anticoagulant used and their practical uses:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa45738ccaa3491cac55716a14949d5bx1279x1209.JPEG"
    ]
  },
  {
    "text": "Where does the Krebs\u2013Henseleit cycle cycle take place?",
    "choices": [
      {
        "id": 1,
        "text": "Cytoplasm"
      },
      {
        "id": 2,
        "text": "Mitochondria"
      },
      {
        "id": 3,
        "text": "Cytoplasm and mitochondria"
      },
      {
        "id": 4,
        "text": "Nucleus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Ornithine cycle/Krebs\u2013Henseleit cycle/Urea cycle</strong> occurs in both the\u00a0<strong>cytoplasm</strong> and <strong>mitochondria.</strong></p>\n<p>The reactions that take place both in the cytoplasm and mitochondria are:</p>\n<ul>\n<li><strong>H</strong>: Heme synthesis</li>\n<li><strong>U</strong>: Urea cycle</li>\n<li><strong>G</strong>: Gluconeogenesis</li>\n<li><strong>P</strong>athway:\u00a0Pyrimidine synthesis</li>\n</ul>\n<p><strong>Urea cycle disorders</strong> are all characterized by hyperammonemia, encephalopathy, and respiratory alkalosis. This is due to an accumulation of the precursors of urea, namely ammonia and glutamine.</p>\n<p>The enzymes involved in the urea cycle with their related disorders are given below:</p>\n<ul>\n<li><strong>Carbamoyl-phosphate synthetase</strong> (CPS) 1 deficiency (hyperammonemia type 1) - rare and characterized by severe hyperammonemia.</li>\n<li><strong>Ornithine transporter</strong> deficiency (HHH syndrome) - is characterized by hyperornithinemia, hyperammonemia, and homocitrullinuria.</li>\n<li><strong>Ornithine transcarbamylase</strong> (OTC) deficiency (hyperammonemia type 2) - is inherited as an X-linked trait. Characterized by hyperammonemia and elevated glutamine levels in blood and CSF.</li>\n<li><strong>Argininosuccinate synthetase</strong> deficiency - is characterized by increased citrulline, citrullinuria, and hyperammonemia.</li>\n<li><strong>Argininosuccinate lyase </strong>deficiency- leads to argininosuccinic acidemia and metabolic acidosis. Hyperammonemia is less severe, and argininosuccinate is found in urine and CSF.</li>\n<li><strong>Arginase</strong> deficiency- mild variety. Characterized by hyperargininemia and argininuria.</li>\n</ul>\n<p>Clinical features of urea cycle disorders are common to all and include vomiting, avoidance of high-protein foods, intermittent ataxia, irritability, lethargy, and severe mental retardation.\u00a0</p>\n<p>Long terms treatment consists of a protein-restricted diet.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following amino acid is likely to be most abundant in collagen?",
    "choices": [
      {
        "id": 1,
        "text": "Alanine"
      },
      {
        "id": 2,
        "text": "Proline"
      },
      {
        "id": 3,
        "text": "Lysine"
      },
      {
        "id": 4,
        "text": "Glycine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most abundant amino acid in collagen is <strong>glycine</strong>.</p>\n<p>Collagen is the most abundant protein in the animal world. It consists of three alpha chains held together by hydrogen bonds forming a&nbsp;<strong>triple helical</strong> structure.</p>\n<p>A striking characteristic of collagen is the occurrence of <strong>glycine residues</strong> at every<strong> third position, (Gly-X-Y) repeats.</strong></p>\n<p><strong>Proline </strong>and<strong> hydroxyproline</strong> confer<strong> rigidity</strong> on the collagen molecule. Hydroxyproline and hydroxylysine are formed by the <strong>post-translational hydroxylation</strong> of proline and lysine residues. This hydroxylation is catalyzed by the <strong>enzyme prolyl </strong>and<strong> lysyl hydroxylase</strong>, and <strong>cofactors</strong> are<strong> ascorbic acid </strong>(<strong>vitamin C</strong>) and<strong> &alpha;-ketoglutarate</strong>.</p>\n<p><strong>Intracellular</strong>&nbsp;steps in the synthesis of collagen:</p>\n<ul>\n<li>Signal peptide cleavage</li>\n<li>Hydroxylation of prolyl residues and some lysyl residues, glycosylation of some hydroxylysyl residues</li>\n<li>Intrachain and interchain S&ndash;S bonds formation in extension peptides</li>\n<li><strong>Triple helix formation</strong></li>\n</ul>\n<p><strong>Extracellular</strong>&nbsp;steps in the synthesis of collagen:</p>\n<ul>\n<li>Amino- and carboxyl-terminal propeptides<strong> cleavage</strong></li>\n<li>Collagen fibers assembly in<strong> quarter-staggered alignment</strong></li>\n<li>Oxidative deamination of h -amino groups of lysyl and hydroxylysyl residues to aldehydes</li>\n<li><strong>Intra- and interchain cross-links formation</strong> via Schiff bases and aldol condensation products</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "If the percentage of thymine residues in DNA is 28%. What is the percentage of cytosine?",
    "choices": [
      {
        "id": 1,
        "text": "28%"
      },
      {
        "id": 2,
        "text": "44%"
      },
      {
        "id": 3,
        "text": "36%"
      },
      {
        "id": 4,
        "text": "22%"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The percentage of cytosine in the DNA is <strong>22%</strong>.</p>\n<p>As per the <strong>Chargaff's</strong> <strong>rule</strong>, in the DNA molecules, the concentration of deoxyadenosine (A) equals that of thymidine (T), and the concentration of deoxyguanosine (G) equals that of deoxycytidine (C).&nbsp;Therefore,&nbsp;<strong>A=T </strong>and<strong> G=C</strong>.</p>\n<p>In the question, the concentration of thymine is given as 28%, therefore the concentration of adenine is also 28%, both of which add up to 56%.&nbsp;The remaining 44% (100-56) of the DNA consists of G-C base pairs. Of which the guanine constitutes 22% and the cytosine constitutes another 22%.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the earliest feature in vitamin A deficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Loss of sensitivity to green light"
      },
      {
        "id": 2,
        "text": "Keratomalacia"
      },
      {
        "id": 3,
        "text": "Night blindness"
      },
      {
        "id": 4,
        "text": "Xerophthalmia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Loss of sensitivity to green light</strong> is the earliest feature of <strong>vitamin A deficiency</strong>.</p>\n<p>Vitamin A is a\u00a0<strong>fat-soluble</strong>\u00a0vitamin that can occur as<strong>\u00a0carotenoids</strong>\u00a0(most common - beta carotene from plant sources) or\u00a0<strong>retinoids</strong> (from animal sources). Dietary sources of vitamin A are liver, fish, eggs, dark green, and deeply coloured fruits and vegetables.</p>\n<p>3 forms of retinoids are:</p>\n<ul>\n<li aria-level=\"1\"><strong>Retinal</strong>\u00a0is required mainly for normal vision (present in the visual pigment rhodopsin).</li>\n<li aria-level=\"1\"><strong>Retinol</strong>\u00a0is important for the normal functioning of the reproductive system.</li>\n<li aria-level=\"1\"><strong>Retinoic acid</strong>\u00a0has a role in the regulation of gene expression and tissue differentiation.</li>\n</ul>\n<p>The sequence of visual defects in vitamin A deficiency:</p>\n<ol>\n<li>Impairment of the eye to adapt to dim light</li>\n<li><strong>Night blindness</strong></li>\n<li><strong>Bitot</strong> <strong>spots</strong> on the conjunctiva -\u00a0white patches of keratinized epithelium on the sclera</li>\n<li>Prolonged deficiency of vitamin A \u2192 <strong>x</strong><strong>erophthalmia </strong>(dryness of the conjunctiva and cornea)</li>\n<li>If xerophthalmia is not treated, it results in <strong>keratomalacia</strong> (softening of the cornea),\u00a0<strong>corneal ulceration, </strong>corneal <strong>scarring\u00a0</strong>and ultimately <strong>complete blindness.</strong></li>\n</ol>\n<p>The image below shows a <strong>Bitot's spot</strong> which is <strong>pathognomic</strong>\u00a0of vitamin A deficiency.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f071771e2cc241d997cb209ce54f2d3dx720x472.JPEG"
    ]
  },
  {
    "text": "Which of the following lipid metabolic pathways is correctly matched with their rate-limiting enzyme?",
    "choices": [
      {
        "id": 1,
        "text": "Cholesterol synthesis - HMG CoA synthase"
      },
      {
        "id": 2,
        "text": "Ketone body synthesis - cytosolic HMG CoA synthase"
      },
      {
        "id": 3,
        "text": "Bile acid synthesis - 7\u03b1 hydroxylase"
      },
      {
        "id": 4,
        "text": "Fatty acid \u03b2 oxidation - Acetyl CoA carboxylase"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The correctly matched lipid metabolic pathway with its rate-limiting enzyme is <strong>bile-acid synthesis - 7\u03b1 hydroxylase</strong>. It converts <strong>cholesterol</strong> into<strong> 7\u03b1 hydroxycholesterol. </strong></p>\n<p>The activity of the enzyme is regulated by <strong>negative feedback</strong> mainly via the nuclear bile acid\u2013binding receptor, <strong>farnesoid X receptor</strong> (FXR). When the size of the bile acid pool(mainly <strong>chenodeoxycholic acid</strong>) in the enterohepatic circulation<strong> increases</strong>, <strong>FXR</strong> is <strong>activated</strong> and <strong>transcription</strong> of <strong>7\u03b1 hydroxylase</strong> is <strong>suppressed</strong>. Whereas, 7\u03b1 hydroxylase activity is enhanced by endogenous and dietary cholesterol.\u00a0</p>\n<p>The rate-limiting enzyme in <strong>cholesterol synthesis</strong> is <strong>HMG CoA reductase</strong>. <strong>Cytosolic</strong> HMG CoA synthase is involved in <strong>cholesterol synthesis</strong> whereas <strong>mitochondrial HMG CoA synthase</strong> is the rate-limiting enzyme of<strong> ketone body synthesis</strong>. (Options A and B)</p>\n<p>The fatty acid oxidation in our body predominantly occurs by <strong>\u03b2 oxidation</strong> and the rate-limiting step is <strong>carnitine palmitoyl-transferase-I (CPT-I)</strong> present in the <strong>outer mitochondrial membrane</strong>. It helps transport an activated fatty acid (Acyl CoA) inside the mitochondria from the cytosol by binding to <strong>carnitine</strong>. (Option D)\u00a0 \u00a0 \u00a0 \u00a0</p>\n<p><strong>Acetyl CoA carboxylase</strong> is the rate-limiting step of <strong>fatty acid synthesis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young chemist notices a reaction system in which the rate of conversion of substrates to product is equal to the rate at which products are converted back to substrates. Which of the following properties regarding this reaction system is true?",
    "choices": [
      {
        "id": 1,
        "text": "The equilibrium constant is a ratio of the reaction rates"
      },
      {
        "id": 2,
        "text": "The rate constants  of the forward and backward reactions are equal"
      },
      {
        "id": 3,
        "text": "Equilibrium is a dynamic state"
      },
      {
        "id": 4,
        "text": "The value of equilibrium constant increases with increase in catalyst or enzyme concentration"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Among the given options, <strong>Equilibrium is a dynamic state</strong>&nbsp;is the correct option.</p>\n<p>In an equilibrium state, Although there is no net change in the concentration of substrates or products, individual substrate, and product molecules are continually being interconverted and <strong>hence it is said to be dynamic.</strong></p>\n<p>Some important properties of a system at equilibrium are:</p>\n<ul>\n<li>The <strong>equilibrium constant (Keq)</strong> is a <strong>ratio</strong> of the reaction <strong>rate constants</strong> (not the reaction rates).&nbsp;</li>\n<li>At equilibrium, the <strong>reaction rates</strong> (not the rate constants) of the forward and back reactions <strong>are equal.</strong>&nbsp;</li>\n<li>The numerical value of the constant can be calculated by finding the concentrations of substrates and products.</li>\n<li>If Keq is more than 1, the forward reaction is favoured. In such instances, the reaction is spontaneous and exothermic.</li>\n<li>The <strong>concentration</strong> of <strong>the enzyme</strong> does not affect the Keq. The concentration of enzyme certainly increases the rate of reaction; but not the Keq or the ultimate state. Catalysts increase the rate of reaction but do not alter the equilibrium.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-month-old infant is brought with hypotonia and loss of motor milestones. On examination, hepatosplenomegaly and macular cherry-red spot are noted. Foam cells are seen on bone marrow biopsy. Which is the most likely deficient enzyme in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Sphingomyelinase"
      },
      {
        "id": 2,
        "text": "Hexosaminidase A"
      },
      {
        "id": 3,
        "text": "Glucocerebrosidase"
      },
      {
        "id": 4,
        "text": "Galactocerebrosidase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of <strong>progressive neurodegeneration </strong>(loss of motor milestones, hypotonia) along with <strong>hepatosplenomegaly</strong>, <strong>macular cherry-red spot</strong>, and <strong>foam cells</strong> <strong>on bone marrow biopsy</strong> point to a diagnosis of <strong>Niemann-Pick disease</strong>. The <strong>enzyme</strong> <strong>deficient</strong> in this disease is <strong>sphingomyelinase</strong>.</p>\n<p>Niemann-Pick disease is disorder of infancy which is almost always fatal by 2-3 years of age. Although the affected <strong>infants</strong> are <strong>normal at birth</strong>, they <strong>soon</strong> <strong>present</strong> <strong>with</strong> failure to thrive, <strong>hepatosplenomegaly</strong>, and rapid <strong>psychomotor</strong> <strong>retardation</strong>. Over time, there is severe loss of motor function and deterioration of intellect and death occurs by 3 years of age.</p>\n<p>Niemann-Pick disease occurs due to the <strong>deficient activity</strong> <strong>of</strong> <strong>acid sphingomyelinase </strong>enzyme. There is extensive <strong>accumulation</strong> <strong>of</strong> <strong>sphingomyelin</strong> <strong>in</strong> the <strong>monocyte-macrophage</strong> system. Lipid laden <strong>foam cells </strong>are observed <strong>in bone marrow</strong> and lymph nodes. The <strong>diagnosis</strong> is <strong>confirmed by</strong> measuring the <strong>sphingomyelinase</strong> <strong>levels</strong> in the peripheral leucocytes.\u00a0</p>\n<p>The <strong>management</strong> of Niemann-Pick disease is mostly <strong>supportive</strong>, such as physical therapy and a feeding tube for nutrition. <strong>Olipudase alfa</strong> has been <strong>recently approved </strong>for non-CNS manifestations of Niemann-Pick disease.\u00a0</p>\n<p>Other options:</p>\n<p>Option B: <strong>Hexoseaminidase A deficiency</strong> is seen in <strong>Tay-Sachs disease</strong>. While it also <strong>presents with</strong> progressive <strong>neurodegeneration</strong> and macular <strong>cherry-red spot</strong>, there is <strong>no organomegaly</strong> and lysosomes with onion skin are seen.\u00a0</p>\n<p>Option C: <strong>Glucocerebrosidase</strong> <strong>deficiency</strong> is seen in <strong>Gaucher disease</strong>. The patients present with <strong>hematological</strong> <strong>abnormalities</strong>, <strong>organomegaly</strong>, and <strong>skeletal manifestations</strong> in the form of bone pain and <strong>pathological fractures</strong>. Bone marrow examination shows <strong>macrophages with</strong> characteristic<strong> crumbled tissue paper appearance</strong>.</p>\n<p>Option D: <strong>Galactocerebrosidase</strong> <strong>deficiency</strong> is seen in <strong>Krabbe disease</strong>. Both <strong>peripheral</strong> and <strong>central</strong> <strong>myelin</strong> is <strong>affected</strong> in this disease. The patients present with <strong>spasticity</strong> and <strong>intellectual impairment</strong> (destruction of central myelin) and <strong>peripheral neuropathy</strong> and <strong>absent deep tendon reflexes</strong> (destruction of peripheral myelin). <strong>Optic atrophy</strong> may also be seen.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conversions requires pantothenic acid as an essential cofactor?",
    "choices": [
      {
        "id": 1,
        "text": "Glucose to pyruvate"
      },
      {
        "id": 2,
        "text": "Glutamate to alpha-ketoglutarate"
      },
      {
        "id": 3,
        "text": "Glucose to ribose-5-phosphate"
      },
      {
        "id": 4,
        "text": "Oxaloacetate to citrate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Pantothenic acid</strong> is an <strong>essential cofactor</strong> of <strong>coenzyme A </strong>which is required for the reaction involving the <strong>transfer of acyl group</strong> such as <strong>oxaloacetate</strong> <strong>to</strong> <strong>citrate</strong>.</p>\n<p>In the first step of the TCA cycle, acetyl CoA combines with oxaloacetate to form citrate involving the transfer of acetyl group to oxaloacetate. Also in the same cycle, <strong>succinyl CoA synthesis</strong> from <strong>alpha-ketoglutarate</strong> requires <strong>coenzyme A.</strong></p>\n<p>There are a variety of biochemical reactions that require CoA such as <strong>fatty acid synthesis</strong> and <strong>beta-oxidation</strong>.</p>\n<p><strong>Deficiency</strong> of pantothenic acid <strong>(vitamin B5)</strong> causes <strong>peripheral nerve damage</strong> also known as <strong>burning foot syndrome</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3bef12aad0dc4af995b30df12c8a9862x1280x1502.JPEG"
    ]
  },
  {
    "text": "Which of the following is false about the given graph?",
    "choices": [
      {
        "id": 1,
        "text": "Inhibitor binds to the active site"
      },
      {
        "id": 2,
        "text": "Inhibitor does not change the shape of the active site"
      },
      {
        "id": 3,
        "text": "Increase in substrate concentration reduces the inhibition"
      },
      {
        "id": 4,
        "text": "Vmax decreases and Kmax is unchanged"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given graph shows <strong>competitive inhibition </strong>in which the value of Vmax remains constant and the Km value increases.</p>\n<p>When the <strong>active site or catalytic site </strong>of an enzyme is occupied by a <strong>substance other than the substrate of that enzyme</strong>, this type of inhibition is known as <strong>Competitive inhibition</strong>. eg: succinate dehydrogenase reaction is inhibited by malonate. The inhibitor binds to the <strong>active site</strong>. The inhibitor <strong>does not change</strong> the <strong>shape</strong> of the <strong>active site</strong>. Competitive Inhibition is <strong>reversible.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d4cfe80419de465baf2ddeeb562b292f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f64189763e754b77bf600a9af5eacd70x468x412.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/816a6646e03a4510a014292ce1b43ae8x1280x2317.JPEG"
    ]
  },
  {
    "text": "Which of the following is associated with a defect in collagen maturity?",
    "choices": [
      {
        "id": 1,
        "text": "Scurvy"
      },
      {
        "id": 2,
        "text": "Rickets"
      },
      {
        "id": 3,
        "text": "Beri-beri"
      },
      {
        "id": 4,
        "text": "Night blindness"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Scurvy</strong> is associated with a defect in collagen maturity.</p>\n<p>Scurvy results from <strong>ascorbic acid</strong>\u00a0or <strong>vitamin C</strong> <strong>deficiency.</strong>\u00a0Vitamin C is an essential cofactor for the enzyme <strong>prolyl hydroxylase</strong>, required for the\u00a0<strong>hydroxylation</strong> of <strong>prolyl</strong> residues in collagen. This enables each collagen fibril to form a uniform and flexible triple helix configuration in the body\u2019s connective tissues.</p>\n<p>Its deficiency results in a <strong>defective</strong> prolyl hydroxylase activity, thereby resulting in the impaired formation of <strong>mature connective tissue</strong>; the clinical manifestations of this deficiency include\u00a0petechiae, ecchymosis, coiled hairs, inflamed and bleeding gums, joint effusion, tooth loss, bone fracture,\u00a0 poor wound healing, and fatigue which can be attributed to impaired collagen synthesis all of which are typical of scurvy.</p>\n<p>Risk factors include chronic alcoholism, diseases such as celiac disease and Crohn\u2019s disease, associated with malabsorption and <strong>poor nutrition</strong>.</p>\n<p>It is treated with vitamin C supplementation.\u00a0</p>\n<p>Other options:</p>\n<p>Option B- <strong>Rickets</strong> is caused due to deficiency of <strong>vitamin D</strong> in children which is characterized by the continued formation of the collagen matrix of bone but its incomplete mineralization or demineralization. Children have soft, pliable bones.\u00a0</p>\n<p>Option C- <strong>Beriberi</strong> is caused due to deficiency of <strong>thiamine. </strong>It can\u00a0either be dry beriberi characterized by peripheral neuropathy or wet beriberi characterized by edema due to dilated cardiomyopathy.</p>\n<p>Option D- <strong>Night blindness</strong> is caused by a deficiency of <strong>vitamin A</strong>. Deficiency can also lead to pancreatic insufficiency, repeated gastrointestinal, pulmonary, and urinary infections, and xeropthalmia.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following has the highest glycemic index?",
    "choices": [
      {
        "id": 1,
        "text": "Glucose"
      },
      {
        "id": 2,
        "text": "Fructose"
      },
      {
        "id": 3,
        "text": "Sucrose"
      },
      {
        "id": 4,
        "text": "Sugar alcohols"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> Glycemic index </strong>is <strong>highest</strong> for <strong>glucose</strong>.</p>\n<p>The increase in blood glucose after a test dose of carbohydrate compared with that after an equivalent amount of glucose (as glucose or from a reference starchy food) is known as the glycemic index.</p>\n<p>Glycemic Index:</p>\n<ul>\n<li>Glucose and galactose: 1</li>\n<li>Dietary fibers: 0</li>\n</ul>\n<p>Low glycemic index:</p>\n<ul>\n<li>Fructose</li>\n<li>Sucrose</li>\n<li>Starch</li>\n<li>Sugar alcohol</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A neonate presents with feeding difficulty and failure to thrive. Her urine has a peculiar burnt sugar odor due to an excess of branched-chain amino acids. Which of the following is unlikely to be elevated?",
    "choices": [
      {
        "id": 1,
        "text": "Valine"
      },
      {
        "id": 2,
        "text": "Isoleucine"
      },
      {
        "id": 3,
        "text": "Leucine"
      },
      {
        "id": 4,
        "text": "Lysine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario is suggestive of <strong>maple syrup urine disease</strong> (MSUD). <strong>Lysine</strong> is not a branched-chain amino acid and hence is <strong>unlikely to be elevated.</strong></p>\n<p>Branched-chain amino acids are:</p>\n<ul>\n<li><strong>Valine </strong>(V)</li>\n<li><strong>Isoleucine </strong>(I)</li>\n<li><strong>Leucine</strong> (L)</li>\n</ul>\n<p><strong>MSUD</strong>&nbsp;is due to<strong>&nbsp;</strong>the <strong>deficiency</strong>&nbsp;of branched-chain alpha-keto acid dehydrogenase complex\u202f(<strong>BCKDC</strong>), leading to the formation of branched-chain amino acids\u202fand their toxic by-products (ketoacids) in the blood and urine. There is a peculiar odor of&nbsp;<strong>burnt sugar</strong>&nbsp;found in&nbsp;<strong>urine</strong>,&nbsp;<strong>sweat</strong>, and&nbsp;<strong>cerumen</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following mucopolysaccharidoses with the defective enzyme in each case:",
    "choices": [
      {
        "id": 1,
        "text": "1-C, 2-B, 3-D, 4-A"
      },
      {
        "id": 2,
        "text": "1-B, 2-D, 3-A, 4-C"
      },
      {
        "id": 3,
        "text": "1-A, 2-D, 3-C, 4-B"
      },
      {
        "id": 4,
        "text": "1-B, 2-A, 3-C, 4-D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The option showing&nbsp;<strong>1-B, 2-D 3-A, 4-C&nbsp;</strong>&nbsp;is correctly matched.</p>\n<table>\n<tbody>\n<tr>\n<td><strong>Mucopolysaccharidosis</strong></td>\n<td><strong>Defective enzyme</strong></td>\n</tr>\n<tr>\n<td>1. Hunter syndrome</td>\n<td>B. Iduronate sulfatase</td>\n</tr>\n<tr>\n<td>2. Morquio syndrome B</td>\n<td>D. &beta;-galactosidase</td>\n</tr>\n<tr>\n<td>3. Hurler syndrome</td>\n<td>A. &alpha;-l-Iduronidase</td>\n</tr>\n<tr>\n<td>4. Sanfilippo syndrome A</td>\n<td>C. Heparan sulfate-N-sulfatase</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>Glycosaminoglycans (GAGs) or mucopolysaccharides are complex carbohydrates made up of&nbsp;<strong>amino sugars and uronic acids</strong>. When they are attached to a protein they are referred to as proteoglycans. These proteoglycans make up a large part of the extracellular matrix and connective tissue.</p>\n<p><strong>Defects </strong>in the <strong>enzymes</strong> <strong>that degrade GAGs</strong> result in the <strong>mucopolysaccharidoses</strong> mentioned above. These defects are <strong>commonly inherited</strong>&nbsp;in an <strong>autosomal recessive</strong> pattern. Accumulation of GAGs in the tissue can result in organomegaly, cartilage and bone abnormalities, facial abnormalities, problems with mental development, etc.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Biochemistry Test';
        const quizFilename = 'biochemistry-test-1aad3e28.html';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>