<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paediatrics Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Test Series Subject / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following drugs are used in the closure of patent ductus arteriosus?",
    "choices": [
      {
        "id": 1,
        "text": "Magnesium Sulfate"
      },
      {
        "id": 2,
        "text": "Alprostadil"
      },
      {
        "id": 3,
        "text": "Indomethacin"
      },
      {
        "id": 4,
        "text": "Aspirin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>NSAID's like <strong>ibuprofen\u00a0and indomethacin</strong> are used in the medical management to <strong>induce closure of a patent ductus arteriosus (PDA).</strong></p>\n<p>Patent ductus arteriosus is the failure of the closure of ductus arteriosus. It usually connects the pulmonary trunk to the aorta distal to left subclavian artery branching. It gives rise to a continuous murmur, which is heard throughout the cardiac cycle. It results in decreased oxygenated blood supply to the lower half of the body. It closes by itself in 2-4 weeks, unless it is large.</p>\n<p><strong>Medical management</strong> involves ruling out other causes of continuous murmur and any other duct dependent lesion. In the absence of either, prostaglandin inhibitor like <strong>Indomethacin</strong> or <strong>Ibuprofen</strong> may be given. But these are <strong>contraindicated in Necrotising enterocolitis</strong> (NEC).\u00a0</p>\n<p>A <strong>recent edition</strong> of AIIMS neonatology protocol book says that paracetamol is equally effective as Ibuprofen and can be given in case NSAIDs are contraindicated.</p>\n<p>Note:</p>\n<ul>\n<li><strong>Prostaglandin E1</strong> is a ductal smooth muscle relaxant and is used to <strong>maintain an open ductus arteriosus</strong> in the newborn with ductal-dependent congenital heart disease.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a287415cc2c242a3ad7af1e8bca1a9b9x1280x2559.JPEG"
    ]
  },
  {
    "text": "A newborn baby presents with irritability and cyanosis which subsides on crying. On examination, you are unable to pass a nasogastric tube and no mist formation is noted on the laryngeal mirror test. Which of the following is the best next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Endotracheal intubation"
      },
      {
        "id": 2,
        "text": "Oropharyngeal airway"
      },
      {
        "id": 3,
        "text": "Oxygen inhalation"
      },
      {
        "id": 4,
        "text": "Epinephrine nebulisation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>choanal atresia</strong>, the best next step would be to provide an&nbsp;<strong>oropharyngeal airway</strong>.</p>\n<p>Choanal atresia is the persistence of<strong>&nbsp;the bucconasal membrane,</strong> unilateral is more common and may remain undiagnosed until adult life, bilateral atresia will present as a respiratory obstruction in the newborn. The initial clinical evaluation consists of placing a large laryngeal mirror under each nostril and checking for fogging, this is known as the laryngeal mirror test.</p>\n<p><strong>Diagnosis</strong> can be made by:</p>\n<ul>\n<li>Presence of mucoid discharge in the nose</li>\n<li>Absence of air bubbles in the nasal discharge</li>\n<li>Failure to pass a catheter from the nose to the pharynx</li>\n<li>Putting methylene blue dye into the nose and checking its passage to the pharynx</li>\n<li>Putting a radio-opaque dye into the nose and taking a lateral radiograph</li>\n<li>CT in the axial plane&nbsp;</li>\n</ul>\n<p><strong>Management:</strong> In bilateral atresia, emergency treatment is to provide an airway, which is done by<strong> McGovern's</strong> technique- (a feeding tube with a large hole that provides a good oral airway), this removes the need for tracheostomy. Definitive treatment is correcting the atresia either by transpalatal or transnasal approach, which is usually done at one and a half years of age.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c77a33f55e1648078e0f4accc9574bacx1280x1343.JPEG"
    ]
  },
  {
    "text": "A 5-year-old boy presents with a short history of facial oedema that has now progressed to total body swelling involving the face, abdomen, scrotum, and feet. Urinalysis revealed protein 4+ with no hematuria and a urine protein:creatinine ratio of 3. What is the initial treatment of choice for this child?",
    "choices": [
      {
        "id": 1,
        "text": "Prednisolone"
      },
      {
        "id": 2,
        "text": "Cyclophosphamide"
      },
      {
        "id": 3,
        "text": "Levamisole"
      },
      {
        "id": 4,
        "text": "Cyclosporine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical picture and investigations are suggestive of <strong>minimal change nephrotic syndrome</strong> and the initial treatment of choice is corticosteroids such as <strong>prednisolone.</strong></p>\n<p>Minimal change nephrotic syndrome is the <strong>most common cause of nephrotic syndrome</strong>. It is seen in <strong>ages 2-6 years</strong> with a clinical picture of nephrotic syndrome with</p>\n<ul>\n<li>heavy proteinuria</li>\n<li>oedema</li>\n<li>hypoalbuminemia</li>\n<li>hyperlipidemia.</li>\n</ul>\n<p>They show <strong>excellent response to steroid</strong> therapy. A daily dose of 2mg/kg (max 60mg) for 6 weeks followed by an alternate day dose of 1.5mg/kg (max 40mg) for the next 6-8 weeks is recommended.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5-day-old baby, born at 35 weeks gestation and weighing 1700 grams, is being evaluated for nutritional needs in the neonatal intensive care unit. What will be the recommended daily fluid intake for this baby?",
    "choices": [
      {
        "id": 1,
        "text": "120  ml/kg/day"
      },
      {
        "id": 2,
        "text": "140  ml/kg/day"
      },
      {
        "id": 3,
        "text": "170  ml/kg/day"
      },
      {
        "id": 4,
        "text": "100  ml/kg/day"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The daily fluid requirement for this <strong>5-day-old </strong>child weighing <strong>1700 g </strong>is 140 ml/kg/day <strong>(140\u2013160 ml/kg/day).</strong></p>\n<p>Parenteral fluid in <strong>ml/kg/day</strong>: For <strong>neonates with a birthweight &gt;1500 gm:</strong></p>\n<table style=\"border-collapse: collapse; width: 47.2777%; height: 156.789px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\"><strong>Body weight &gt; 1500 g</strong></td>\n<td style=\"width: 49.9215%; height: 22.3984px;\"><strong>Fluid required per day</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\">Day 1</td>\n<td style=\"width: 49.9215%; height: 22.3984px;\">60-80</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\">Day 2</td>\n<td style=\"width: 49.9215%; height: 22.3984px;\">80-100</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\">Day 3</td>\n<td style=\"width: 49.9215%; height: 22.3984px;\">100-120</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\">Day 4</td>\n<td style=\"width: 49.9215%; height: 22.3984px;\">120-140</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\"><strong>Day 5</strong></td>\n<td style=\"width: 49.9215%; height: 22.3984px;\"><strong>140-160</strong></td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 50.0785%; height: 22.3984px;\">Day 6</td>\n<td style=\"width: 49.9215%; height: 22.3984px;\">140-160</td>\n</tr>\n</tbody>\n</table>\n<p>Parenteral fluid in ml/kg/day: For neonates with a <strong>birthweight &lt;1500 gm:</strong></p>\n<table style=\"border-collapse: collapse; width: 47.5499%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50.0454%;\"><strong>Body weight &lt; 1500 g</strong></td>\n<td style=\"width: 50.0454%;\"><strong>Fluid required per day</strong></td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 1</td>\n<td style=\"width: 50.0454%;\">80-90</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 2</td>\n<td style=\"width: 50.0454%;\">100-110</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 3</td>\n<td style=\"width: 50.0454%;\">120-130</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 4</td>\n<td style=\"width: 50.0454%;\">130-150</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 5</td>\n<td style=\"width: 50.0454%;\">140-160</td>\n</tr>\n<tr>\n<td style=\"width: 50.0454%;\">Day 6</td>\n<td style=\"width: 50.0454%;\">150-170</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old primigravida delivers a preterm baby at 33 weeks of gestation with a birth weight of 2 kg. She is advised to hold her child as shown below.  Which of the following statements about this method is false?",
    "choices": [
      {
        "id": 1,
        "text": "Can be continued at home"
      },
      {
        "id": 2,
        "text": "Safety and thermal protection provided by this method is comparable to incubators"
      },
      {
        "id": 3,
        "text": "Decreases morbidity in newborns"
      },
      {
        "id": 4,
        "text": "Should be performed only by the mother"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Kangaroo Mother Care&nbsp;</strong>(KMC) can be carried out by the<strong>&nbsp;</strong>mother&nbsp;or <strong>any other caregiver.</strong></p>\n<p>KMC was introduced for the <strong>prevention</strong> of neonatal <strong>hypothermia</strong> in <strong>low birth weight/ premature newborns.</strong> It has <strong>4 components&mdash;</strong></p>\n<ul>\n<li><strong>Skin-to-skin positioning</strong> of the newborn on the mother&rsquo;s chest.</li>\n<li>Adequate nutrition through <strong>breastfeeding</strong>.</li>\n<li><strong>Early discharge</strong> and <strong>ambulatory care.</strong></li>\n<li>Support for mother and family for child care.</li>\n</ul>\n<p>Evidence shows that-</p>\n<ul>\n<li>It is at least<strong> equivalent</strong> to <strong>incubators,</strong> in terms of <strong>safety</strong> and <strong>thermal protection</strong> (measured by mortality)</li>\n<li><strong>Reduces severe morbidity</strong> by way of facilitating breastfeeding</li>\n<li><strong>Humanization</strong> of neonatal care</li>\n<li>Promoted <strong>bonding</strong> between <strong>mother</strong> and <strong>child</strong></li>\n</ul>\n<p>Eligibiilty criteria for KMC:</p>\n<p>It is indicated for all <strong>hemodynamically stable low birthweight babies.</strong> Short sessions of KMC can be initiated in babies on medical treatment like IV fluids or oxygen therapy. Initiation of KMC can vary with the birth weight of the baby.</p>\n<ul>\n<li>Birthweight &lt;1200 g - It may take days to weeks for initiation of KMC</li>\n<li>Birthweight 1200-1800 g - Only a few days may be taken before KMC initiation</li>\n<li>Birthweight &gt;1800 g - KMC can be initiated immediately after birth</li>\n</ul>\n<p>All mothers without any serious illness can provide KMC</p>\n<p>Positioning for KMC: The baby is placed between the mother's breast in an upright position. The hips are abducted and flexed in the frog position and the arms are also flexed. The abdomen of the baby should be at the level of the mother's epigastrium. In this position, the mother's breathing would stimulate the baby and prevent the development of apnea.</p>\n<p>The duration of KMC should be gradually increased from short sessions of more than one hour to 24 hours a day.</p>\n<p>KMC is not necessary once the baby attains<strong> 2500 g of weight</strong> or<strong> 37 weeks of gestation</strong>.</p>\n<p>Note:&nbsp;</p>\n<p>Incubatory care, feeding via nasal catheter, and prevention of infection are part of intensive care for low birthweight babies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1dd6d58139e345eb88e41def2670d35a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The most common leukemia in children with Down syndrome is _____.",
    "choices": [
      {
        "id": 1,
        "text": "Acute myeloid leukemia"
      },
      {
        "id": 2,
        "text": "Acute lymphoblastic leukemia"
      },
      {
        "id": 3,
        "text": "Chronic myeloid leukemia"
      },
      {
        "id": 4,
        "text": "Chronic lymphoid leukemia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common <strong>leukemia</strong> in children with <strong>Down\u2019s syndrome</strong> is <strong>acute lymphoblastic leukemia (ALL)</strong>.</p>\n<p>Children with Down syndrome are at increased risk of both <strong>acute lymphoid leukemia (ALL)</strong> and <strong>acute myeloid leukemia (AML).</strong></p>\n<p><strong>Note</strong>:</p>\n<ul>\n<li>The most common leukemia in Down's syndrome: is B-cell Acute lymphoblastic leukemia (<strong>B-ALL</strong>)</li>\n<li>The most common AML in Down's syndrome: is <strong>M7/megakaryoblastic</strong></li>\n</ul>\n<p>10% of neonates with Down's syndrome develop <strong>transient leukemia or myeloproliferative disorder</strong>. These features usually resolve within the 1<sup>st</sup> 3 months of life. However, they require close follow-up, because 20\u201330% will develop typical leukemia (often acute megakaryocytic leukemia) by 3 years of life (AML is more common during the first 3 years of life )</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child suffering from steroid-dependent nephrotic syndrome is brought to the OPD for vaccination. Which of the following is true about vaccination in this child?",
    "choices": [
      {
        "id": 1,
        "text": "All live vaccines under NIS can be given as per schedule"
      },
      {
        "id": 2,
        "text": "All killed vaccines under NIS can be given"
      },
      {
        "id": 3,
        "text": "Only pneumococcal vaccine should be given to the child in acute phase"
      },
      {
        "id": 4,
        "text": "Live vaccines are contraindicated in the child\u2019s sibling"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All <strong>killed vaccines</strong> can be given.</p>\n<p><strong>Live virus</strong> vaccines are <strong>administered with caution</strong> in children receiving <strong>corticosteroid therapy</strong>. They can be given to patients in whom the prednisone dose is below 1mg/kg daily or 2mg/kg on alternate days. If the patient is receiving corticosteroid-sparing agents (cyclophosphamide, cyclosporine), live virus vaccines are contraindicated.</p>\n<p>Immunization of siblings/healthy household contacts with live vaccines is necessary to reduce the risk of infection transmission to the immunosuppressed child.&nbsp;Direct exposure to the gastrointestinal/respiratory secretions of the household contacts is avoided for about 3-6 weeks after vaccination.&nbsp;</p>\n<p>Minimal change nephrotic syndrome is the&nbsp;<strong>most common cause of the nephrotic syndrome</strong>. It is seen in&nbsp;<strong>ages 2-6 years</strong>&nbsp;and is characterized by heavy proteinuria, edema, hypoalbuminemia, and hyperlipidemia. Patients are either asymptomatic or present with&nbsp;<strong>peripheral edema</strong>. Renal biopsy is not required for confirmation and treatment can be initiated if the child fits the standard clinical picture of nephrotic syndrome.</p>\n<p>They show&nbsp;<strong>excellent response to steroid</strong>&nbsp;therapy with prednisone or prednisolone. A daily dose of 2mg/kg (max 60mg) for 6 weeks followed by an alternate dose of 1.5mg/kg (max 40mg) for the next 6-8 weeks is recommended.</p>\n<p>Alternative drugs used in steroid-dependent patients, frequent relapsers, steroid-resistant patients, and those with severe corticosteroid toxicity are as follows:</p>\n<ul>\n<li>Cyclophosphamide</li>\n<li>Calcineurin inhibitors: Cyclosporine and Tacrolimus</li>\n<li>Mycophenolate</li>\n<li>Levamisole</li>\n<li>Rituximab (a chimeric monoclonal antibody against CD20)&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-week-old infant presents with a cough and sore throat. The mother reports that the infant develops a paroxysm of cough followed by apnea. The total leucocyte count is >50,000 cells/\u03bcL. Which of the following drugs will you prescribe for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin"
      },
      {
        "id": 2,
        "text": "Amoxicillin"
      },
      {
        "id": 3,
        "text": "Cotrimoxazole"
      },
      {
        "id": 4,
        "text": "Clarithromycin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of <strong>paroxysm of cough,</strong>\u00a0<strong>apnea</strong>, and <strong>leukocytosis </strong>(&gt;50,000 cells/\u03bcL)\u00a0in a neonate is suggestive of <strong>pertussis. Azithromycin </strong>is<strong>\u00a0</strong>the <strong>recommended drug of choice</strong> for the treatment of pertussis in<strong> neonates </strong>(&lt; 1 month of age).</p>\n<div class=\"page\" title=\"Page 6036\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Macrolides are recommended for the treatment of pertussis. <strong>Azithromycin</strong>\u00a0is the drug of choice in all age groups, for treatment or postexposure prophylaxis.\u00a0Post-exposure prophylaxis is given to household close contacts and high-risk contacts (infants, immunocompromised, pregnancy).</p>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n<p>Option B: <strong>Amoxicillin</strong> is not used for the treatment of pertussis due to its inefficiency in the nasopharynx.</p>\n<p>Option C:\u00a0Trimethoprim-sulfamethoxazole <strong>(cotrimoxazole)</strong> is recommended\u00a0as an <strong>alternative</strong> for infants &gt;2 months old and children who are allergic to macrolides.</p>\n<p>Option D: Clarithromycin is an alternative drug that can be used in infants aged\u00a0<strong>&gt;2 months</strong>. In children less than 2 months of age, it is contraindicated due to the risk of kernicterus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 2-day-old neonate was admitted to the NICU after he was observed to have movements as shown in the clip. His APGAR scores were 8 and 9 at 1 and 5 minutes, respectively. His blood sugar was within the normal range in the first 24 hours. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Focal tonic seizure"
      },
      {
        "id": 2,
        "text": "Focal clonic seizure"
      },
      {
        "id": 3,
        "text": "Spasms"
      },
      {
        "id": 4,
        "text": "Subtle seizure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clip depicts <strong>neonatal seizure</strong> of focal clonic type.</p>\n<p>A <strong>focal clonic seizure</strong> is characterized by multiple,&nbsp;repetitive, rhythmic contractions of muscle groups of the limbs, face, or trunk, and-</p>\n<ul>\n<li>Maybe unifocal or multifocal</li>\n<li>May occur synchronously or asynchronously in muscle groups on <strong>one side</strong> of the body</li>\n<li>May occur simultaneously but asynchronously on both sides</li>\n<li>It cannot be suppressed by restraint</li>\n</ul>\n<p>A<strong> focal tonic seizure</strong> is characterized by sustained posturing of single limbs, sustained asymmetrical posturing of the trunk, sustained eye deviation, cannot be provoked by stimulation or suppressed by restraint.</p>\n<p><strong>Spasms</strong> are sudden generalized jerks lasting 1-2 sec and are usually associated with a single, very brief, generalized discharge. They may be flexor, extensor, or mixed extensor/flexor and can occur in clusters. It cannot be provoked by stimulation or suppressed by restraint.</p>\n<p><strong>Subtle seizures</strong> include transient eye deviations, nystagmus, blinking, mouthing, abnormal extremity movements&nbsp;(rowing, swimming, cycling, pedaling),&nbsp;fluctuations in heart rate, hypertension episodes, and apnea. They are more common in <strong>premature</strong> than in term babies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c6758142d393441aac58a662e3769405.GIF"
    ],
    "explanation_images": []
  },
  {
    "text": "The true statement regarding the trajectory of the growth curve of a neonate is:",
    "choices": [
      {
        "id": 1,
        "text": "10% of birth weight is lost in the 1st week of life"
      },
      {
        "id": 2,
        "text": "Regains birth weight in 3 weeks"
      },
      {
        "id": 3,
        "text": "10% of birth weight increases in the 1st week"
      },
      {
        "id": 4,
        "text": "10% of birth weight is lost in the 1st 2 weeks of life"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The true statement regarding the trajectory of the growth curve of a neonate is that \"<strong>10% </strong>of <strong>birth weight</strong> is <strong>lost</strong> in the <strong>1st week </strong>of life\".</p>\n<p>In the <strong>first week</strong> after birth, newborns typically experience a temporary <strong>weight loss</strong> of around <strong>10%</strong> after <strong>vaginal delivery</strong> and up to <strong>12% </strong>after <strong>cesarean section</strong>. This initial decrease is primarily due to the elimination of excess fluid and <strong>limited early nutritional intake</strong>. As feeding progresses, colostrum gives way to higher-fat breast milk, and infants improve their ability to latch and suck effectively. Consequently, mothers become more adept at feeding techniques.</p>\n<p>By the <strong>second week</strong> of life, most infants <strong>regain</strong> their birth weight or surpass it. Throughout the <strong>first month</strong>, infants typically gain about <strong>30 grams</strong> (approximately 1 ounce) <strong>per day</strong>. This period marks the fastest phase of postnatal growth. Approximate daily weight gain is that : 0-3 months: 30 g/day; 3-6 months: 20 g/day; 6-9 months: 15 g/day; 9-12 months: 12 g/day.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 11-year-old boy was brought to the outpatient clinic with intentional tremors and poor scholastic performance. His sister has similar complaints. On examination, hepatomegaly is seen. The eye finding is shown in the image. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Wilson's disease"
      },
      {
        "id": 2,
        "text": "Huntington's chorea"
      },
      {
        "id": 3,
        "text": "Glutaric aciduria"
      },
      {
        "id": 4,
        "text": "Hepatitis A"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of a <strong>child</strong> with\u00a0<strong>neurological</strong> symptoms (intentional tremors and\u00a0poor scholastic performance) and <strong>liver disease </strong>(icterus and hepatomegaly)\u00a0is suggestive of <strong>Wilson's disease</strong>.\u00a0</p>\n<p>Wilson's disease is an<strong>\u00a0</strong><strong><span data-preserver-spaces=\"true\">autosomal-recessive</span></strong><span data-preserver-spaces=\"true\">\u00a0condition caused by mutations in the\u00a0</span><strong><em>ATP7B</em>\u00a0gene</strong><span data-preserver-spaces=\"true\">, which encodes for the ATPase that removes copper, preventing its accumulation in the liver and brain.</span></p>\n<p><span data-preserver-spaces=\"true\">Clinical features:</span></p>\n<ul>\n<li><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Liver disease</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> is the most common manifestation in children which can present as\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">hepatomegaly\u00a0</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">(cirrhosis in advanced stages) with or without splenomegaly, subacute or chronic </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">hepatitis</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, and acute </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">liver failure</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">.</span></li>\n<li>Neurologic features consist of <strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">dysarthria</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, dystonia, rigidity, </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">tremors</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, and </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">choreiform</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> movements due to copper deposition in the </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">basal ganglia</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">. </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Psychiatric symptoms</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> encompass personality changes, such as irritability and anger, as well as depression and anxiety. </span>Kayser\u2013Fleischer (KF) rings (deposition of <strong>copper</strong> in <strong>Descement's</strong> membrane) are present in <strong>95% of</strong> patients with <strong>neurological symptoms\u00a0</strong>and\u00a0absent in half of the young patients with liver-related Wilson disease. After treatment KF ring resolves.\u00a0<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\" data-preserver-spaces=\"true\">Coomb's negative <strong>hemolytic anemia</strong> may also be seen. </span></li>\n<li><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Hemolytic anemia</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> can result from the release of copper into the circulation from the liver. Additional manifestations of Wilson's disease comprise </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">renal tubular acidosis</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">, delayed puberty, and osteoarthritis.</span></li>\n</ul>\n<p><span data-preserver-spaces=\"true\">Diagnosis is made by the p</span><span data-preserver-spaces=\"true\">resence of a\u00a0<strong>KF</strong> <strong>ring </strong>and\u00a0<strong>d</strong></span><strong>ecreased </strong>levels of\u00a0<strong>serum copper</strong> and <strong>ceruloplasmin</strong>.\u00a0<strong>Increased</strong> <strong>24-hour urine copper </strong>excretion is seen. Hepatic copper content greater than 250 \u03bcg/g dry weight measured by <strong>liver biopsy</strong> is the<strong> gold standard</strong>.\u00a0</p>\n<p><span data-preserver-spaces=\"true\">Copper intake should be restricted to &lt;1 mg/day. Initial treatment involves copper-chelating agents <strong>D-penicillamine</strong> and <strong>trientine</strong> with concurrent use of pyridoxine.\u00a0Penicillamine may worsen neurologic symptoms, so trientine is an alternative.\u00a0</span><strong>Ammonium tetrathiomolybdate</strong> is another chelating agent being investigated for patients with neurologic disease.\u00a0</p>\n<p><strong>Zinc</strong> is used in presymptomatic patients\u00a0due to its ability to impair the absorption of copper.\u00a0<strong>Liver</strong> <strong>transplantation</strong> is considered in <strong>advanced</strong> stages.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8a0e259bb49b4a7cb743fe156e6967eb.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 1-month-old infant was brought to you with hypotonia, a weak cough, and tongue fasciculations. A diagnosis of spinal muscular atrophy was made. Which of the following marked regions is affected in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>region marked 1</strong> which shows the <strong>anterior horn</strong> of the <strong>spinal cord</strong> is affected in <strong>spinal muscular atrophy</strong>.</p>\n<p>Spinal muscular atrophy (SMA) is an <strong>autosomal recessive pattern</strong> disease characterized by<strong> progressive degeneration</strong> of the motor neurons. It results from a continuation of <strong>apoptosis</strong> that normally occurs in the embryonal period. This results in <strong>extensive neuronal degeneration</strong> and <strong>gliosis</strong> of the anterior horns of the spinal cord and brainstem motor nuclei.</p>\n<p>Clinically SMA is classified into four types:</p>\n<ul>\n<li>SMA type I/ Werdnig-Hoffmann disease</li>\n<li>SMA type II</li>\n<li>SMA type III/ Kugelberg-Welander disease</li>\n<li>SMA type IV</li>\n</ul>\n<p><strong>SMA type I</strong> is seen before the age of <strong>six months.</strong> Children present with<strong> hypotonia</strong>, <strong>proximal muscle weakness</strong>, frog-leg posture, and<strong> tongue fasciculations</strong>. Involvement of the intercostal respiratory muscles causes a paradoxical abdominal breathing pattern and <strong>weak cough</strong>. Deep tendon reflexes are usually absent. It should be kept as one of the differential diagnoses for <strong>floppy infant syndrome</strong>.</p>\n<p><strong>SMA type II</strong> is seen between the age of <strong>6-18 months</strong>. Children present with <strong>developmental delay</strong>, scoliosis, speech, and deglutition problems.</p>\n<p>The proximal muscles involving the <strong>shoulder girdle</strong> are affected in <strong>SMA type III</strong>. <strong>Muscle hypertrophy</strong> might be present rather than atrophy.</p>\n<p><strong>SMA type IV</strong> (adult phenotype) presents with mild muscle weakness in the second or <strong>third decade</strong> of life.\u00a0</p>\n<p>The <strong>gold standard</strong> for diagnosis is testing for <strong>SMN1</strong> (survival motor neuron) <strong>gene deletion</strong>/ mutation. <strong>Supportive therapy</strong> enabling the patient to be maximally functionally independent is the mainstay in management.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d4031e8df85545a88e7c9c451736c9ce.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 1.5-year-old child is brought to the hospital with a history of breathlessness, body temperature of less than 37 degrees, cough, and cold. On examination, the respiratory rate was 46/min, and there were no chest retractions. Which is the most appropriate management?",
    "choices": [
      {
        "id": 1,
        "text": "Administer IV antibiotics and observe"
      },
      {
        "id": 2,
        "text": "Administer IV antibiotics and refer to higher centre"
      },
      {
        "id": 3,
        "text": "Administer oral antibiotics, warn of danger signs, and send home"
      },
      {
        "id": 4,
        "text": "Administer only home remedies"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This child with a respiratory rate of 46 breaths/min has <strong>tachypnea</strong>/<strong>fast breathing</strong> without any danger signs has <strong>pneumonia </strong>according to<strong> IMNCI guidelines</strong>. The next best step of management is to <strong>administer oral antibiotics, warn of danger signs, and send home.</strong></p>\n<p>The treatment for pneumonia for a child between <strong>2 months and 5 years of age</strong> is <strong>oral amoxicillin</strong> and <strong>home care advice.</strong></p>\n<p>The revised classification of acute respiratory\u00a0infections is simplified to include only two categories of pneumonia:</p>\n<ul>\n<li>Cough and cold, no pneumonia - requires home remedy</li>\n<li>Pneumonia - with <strong>fast breathing </strong>and/or <strong>chest indrawing</strong>, which requires <strong>home therapy</strong> with <strong>oral amoxicillin</strong>.</li>\n<li>Severe pneumonia - pneumonia with any general<strong> danger sign</strong>, which <strong>requires</strong> a <strong>referral</strong> and <strong>injectable therapy</strong>.\u00a0</li>\n</ul>\n<p>\u00a0Danger signs:</p>\n<ul>\n<li>Not able to drink</li>\n<li>Persistent vomiting</li>\n<li>Convulsions, lethargic or unconscious</li>\n<li>Stridor in a calm child</li>\n<li>Severe malnutrition</li>\n</ul>\n<p><strong>Tachypnea</strong> or <strong>Fast breathing\u00a0</strong>is defined based on the age and respiratory rate:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Age of child</strong></td>\n<td><strong>Rate</strong></td>\n</tr>\n<tr>\n<td>&lt;2 months</td>\n<td>60 breaths/min</td>\n</tr>\n<tr>\n<td>2-12 months</td>\n<td>50 breaths/min</td>\n</tr>\n<tr>\n<td>1-5 years</td>\n<td>40 breaths/min</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f6e335a2f12f4b618a06cd6ce23af7bdx289x320.PNG"
    ]
  },
  {
    "text": "An 8-month-old child with acute diarrhea is being treated with oral rehydration solution (ORS).  Which of the following is correct regarding zinc supplementation in this child?",
    "choices": [
      {
        "id": 1,
        "text": "10 mg/day for 7 days"
      },
      {
        "id": 2,
        "text": "10 mg/day for 14 days"
      },
      {
        "id": 3,
        "text": "20 mg/day for 7 days"
      },
      {
        "id": 4,
        "text": "20 mg/day for 14 days"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>An 8-month-old child being treated for acute diarrhea should be supplemented with<strong>\u00a0oral zinc</strong>\u00a0at <strong>20 mg/day </strong>for<strong> 10-14 days.</strong></p>\n<p>Zinc administration for diarrhea management can significantly <strong>reduce mortality </strong>and hospital admission. In addition, it improves diarrhea recovery rates and reduces the inappropriate use of <strong>antimicrobials.</strong></p>\n<p><strong>Zinc supplementation</strong>\u00a0is usually done for 10 to 14 days. The dosage is age-dependent as follows:</p>\n<p>Age &lt;6 months: 10 mg/day</p>\n<p>Age &gt;6 months:\u00a0 20 mg/day</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following has the least risk of perinatal transmission?",
    "choices": [
      {
        "id": 1,
        "text": "HSV"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "Rubella"
      },
      {
        "id": 4,
        "text": "Hepatitis B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rubella\u00a0</strong>has the <strong>least risk</strong> of <strong>perinatal transmission</strong>.\u00a0</p>\n<p>Rubella or <strong>German measles</strong> has an <strong>intrauterine transmission</strong> that causes serious infection in pregnancy which results in\u00a0<strong>abortions</strong>\u00a0or\u00a0<strong>severe fetal defects</strong>\u00a0if infection occurs in the\u00a0<strong>first trimester.\u00a0</strong>The classical triad of congenital rubella syndrome is\u00a0<strong>deafness, cataract</strong>,\u00a0and\u00a0<strong>congenital heart disease</strong>.</p>\n<p>Other options-\u00a0</p>\n<p>Option A: <strong>Herpes simplex infection</strong> can be acquired\u00a0<strong>in utero, intrapartum/perinatally, </strong>or during the <strong>neonatal period</strong>. The\u00a0<strong>intrauterine</strong>\u00a0infection causes\u00a0<strong>skin vesicles, eye findings</strong>\u00a0(chorioretinitis, keratoconjunctivitis)<strong>,\u00a0</strong>and\u00a0<strong>microcephaly/hydranencephaly. Intrapartum\u00a0</strong>infection presents with either:</p>\n<ul>\n<li>Skin, eye, and mouth disease</li>\n<li>Encephalitis</li>\n<li>Disseminated disease with sepsis-like presentation</li>\n</ul>\n<p>Option B:<strong> Cytomegalovirus</strong>, the <strong>most common congenital infection with perinatal transmission</strong> presents with hepatosplenomegaly,\u00a0<strong>petechial</strong>\u00a0<strong>rashes</strong>,\u00a0<strong>jaundice</strong>,\u00a0<strong>chorioretinitis</strong>, and microcephaly. One of the long-term sequelae is<strong>\u00a0hearing loss.\u00a0</strong></p>\n<p>Option D:<strong> Hepatitis B</strong> virus is associated with <strong>significant perinatal transmission</strong>.\u00a0The most important <strong>risk factor</strong> that determines perinatal transmission is <strong>HBeAg</strong>.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-month-old child is brought to the clinic with a common cold and the parents give a  history of stridor, dyspnea, and intercostal retractions shortly after birth. On examination, you notice that he has biphasic stridor.   What is the most probable etiology of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Laryngomalacia"
      },
      {
        "id": 2,
        "text": "Croup"
      },
      {
        "id": 3,
        "text": "Bilateral vocal cord paralysis"
      },
      {
        "id": 4,
        "text": "Congenital subglottic stenosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The\u00a0finding of biphasic stridor in this scenario is highly suggestive of <strong>congenital subglottic stenosis</strong>.</p>\n<p><strong>Congenital subglottic stenosis</strong> is the most common cause of <strong>biphasic stridor</strong> in children. The subglottis is the narrowest part of the upper airway in a child. The symptoms of congenital subglottic stenosis usually present shortly after birth and include <strong>biphasic stridor</strong>, <strong>dyspnea</strong>, and suprasternal, intercostal, and diaphragmatic retractions. In this child, edema, and secretions caused by the common cold further narrow the subglottic region, leading to the symptoms.\u00a0 Abnormal cry, aphonia, or hoarseness occur when the vocal cords are affected. In <strong>acquired subglottic stenosis</strong>, there is a history of laryngeal insult or prior intubation and symptoms appear 3-4 weeks after the same..</p>\n<p>Management includes dilatation and endoscopic laser surgery for grades 1 and 2 subglottic stenosis, and laryngotracheal reconstruction with cartilage graft augmentation in grades III and IV subglottic stenosis.\u00a0<strong>Mitomycin C</strong> is used in the management of subglottic stenosis post-operatively, in order to prevent re-stenosis.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Laryngomalacia</strong> is the most common congenital anomaly causing stridor in a child. which typically presents with low-pitched, <strong>inspiratory stridor</strong> which is exacerbated by crying and agitation.</p>\n<p>Option C- <strong>Croup</strong> is caused by the <strong>parainfluenza</strong> virus, and typically presents with symptoms of fever, barking cough, <strong>inspiratory stridor</strong>, and hoarseness of voice. In severe cases, the child might develop respiratory distress with hypoxia and cyanosis.</p>\n<p>Option D- <strong>Bilateral</strong> <strong>vocal cord paralysis</strong> can also cause stridor in infants and children. Congenital central nervous system lesions such as Chiari malformations and myelomeningoceles can cause bilateral vocal cord paralysis which leads to respiratory distress, high-pitched<strong> inspiratory stridor</strong>, and a weak cry.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74b4c98abb59427c8564c3236d75b224x1280x1826.JPEG"
    ]
  },
  {
    "text": "Which one of the following is not a feature in cerebral palsy?",
    "choices": [
      {
        "id": 1,
        "text": "Hypotonia"
      },
      {
        "id": 2,
        "text": "Microcephaly"
      },
      {
        "id": 3,
        "text": "Ataxia"
      },
      {
        "id": 4,
        "text": "Flaccid paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Flaccid paralysis </strong>is <strong>not</strong> a feature of cerebral palsy (CP). It is a feature of <strong>lower motor neuron disease</strong>.</p>\n<p>CP is a <strong>static encephalopathy</strong> and a disorder of posture and movement often associated with:</p>\n<ul>\n<li>A deficit in the motor, language, and social milestones</li>\n<li><strong>Microcephaly</strong> is a feature of cerebral palsy because of the insult to the developing brain.</li>\n<li>Dystonic CP is associated with <strong>hypotonia</strong></li>\n<li>Extrapyramidal CP is associated with <strong>ataxia</strong></li>\n<li>It is an <strong>upper motor neuron disease </strong>characterized by rigidity and scissoring gait.</li>\n<li>Spastic CP is the<strong> commonest</strong> type (65%)</li>\n</ul>\n<p>Scissoring gait is a characteristic feature of cerebral palsy as shown in the GIF below-</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd480ee47cc947ccb1c31d18bad0e6aax510x520.GIF"
    ]
  },
  {
    "text": "A 7-year-old child presented with complaints of bed-wetting almost twice a week for the past 1 year. A detailed investigation was done to rule out an organic cause. What will be the most effective treatment plan for this child?",
    "choices": [
      {
        "id": 1,
        "text": "Pharmacotherapy with imipramine"
      },
      {
        "id": 2,
        "text": "Psychodynamic psychotherapy"
      },
      {
        "id": 3,
        "text": "Bladder training, with reward for delaying micturition during daytime"
      },
      {
        "id": 4,
        "text": "Bell and pad based classical conditioning"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical features are suggestive of <strong>nocturnal enuresis</strong>.\u00a0<strong>Bell </strong>and<strong> pad-based classical conditioning</strong> is the most effective treatment.</p>\n<p><strong>Nocturnal enuresis</strong> refers to the\u00a0occurrence of involuntary urination at night <strong>after 5 years of age</strong>. It may be a normal phenomenon in children up to 5 years of age.</p>\n<p>Treatment for nocturnal enuresis may include:</p>\n<p><strong>Behavioral therapy:</strong></p>\n<ul>\n<li>Classic conditioning with the <strong>bell</strong> (or buzzer) and <strong>pad</strong> (alarm) apparatus is the <strong>most effective</strong> treatment for enuresis.</li>\n<li>Dryness is achieved in 50% of the cases.</li>\n<li><strong>Bladder training</strong> with encouragement or reward for delaying micturition for increasing times during waking hours is useful but considered <strong>inferior</strong>\u00a0to bell and pad.</li>\n</ul>\n<p><strong>Pharmacotherapy:</strong></p>\n<ul>\n<li>Medications should be considered if behavioral therapy has failed<strong>,</strong> and if enuresis is causing impairment in social, family, and school function.</li>\n<li>Desmopressin (an antidiuretic) and\u00a0Reboxetine (a norepinephrine reuptake inhibitor) are commonly used drugs. Reboxetine is considered a <strong>safer alternative to imipramine.</strong></li>\n</ul>\n<p><strong>Psychotherapy:</strong></p>\n<ul>\n<li>It is indicated in cases with chronic enuresis, to deal with any coexisting psy\u00adchiatric problems and emotional and family difficulties.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Breast milk is superior to cow\u2019s milk because ________",
    "choices": [
      {
        "id": 1,
        "text": "Saturated fat content is high"
      },
      {
        "id": 2,
        "text": "Sodium concentration is high"
      },
      {
        "id": 3,
        "text": "Casein is 60% of the protein content"
      },
      {
        "id": 4,
        "text": "Whey is 70% of the protein content"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Whey constitutes <strong>70-80%</strong> of breast milk's protein content. The<strong> Whey: Casein</strong>\u00a0ratio in human milk fluctuates between 70:30 and 80:20. This ratio is 20:80 in cow's milk. The high fraction of soluble whey protein in breast milk makes it easily digestible.</p>\n<p>The predominant whey protein is <strong>\u03b1-lactalbumin</strong> in human milk and<strong> \u03b2-globulin</strong> in<strong> cow milk</strong>. Human milk contains amino acids like <strong>taurine</strong> and <strong>cysteine</strong> (lacking in cow\u2019s milk), which are necessary for neurotransmission and neuromodulation.</p>\n<p>Breast milk is rich in <strong>polyunsaturated fat</strong> (not saturated fat), which is necessary for <strong>myelination</strong>.\u00a0Human breast milk is generally rich in <strong>oleic acid</strong> and<strong> linoleic acid</strong>.</p>\n<p>Sodium concentration is <strong>not</strong>\u00a0high in breast milk. It has a <strong>low osmolality,</strong>\u00a0and hence, the solute load on the kidneys is low.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An anxious mother brings her otherwise healthy neonate with the lesion show in image. What would you do?",
    "choices": [
      {
        "id": 1,
        "text": "Scrape Culture of the lesion"
      },
      {
        "id": 2,
        "text": "Biopsy of the lesion"
      },
      {
        "id": 3,
        "text": "Low dose broad spectrum antibiotic prophylaxis"
      },
      {
        "id": 4,
        "text": "Reassure that it is benign"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Reassure</strong> the mother that it is benign as the image shows <strong>Epstein Pearls.</strong></p>\n<p>Epstein Pearls</p>\n<ul>\n<li>Are <strong>nests of epithelial cells</strong>.</li>\n<li>Appear as <strong>whitish/yellowish spots on the hard palate.</strong></li>\n<li>It may also occur over the tip of Prepuce at 6 o'clock position.</li>\n<li><strong>Usually, resolve in 3 months</strong>.</li>\n</ul>\n<p>\u00a0No intervention is necessary as it resolves spontaneously and is a <strong>benign</strong> condition.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e7ca2c5421f24714a18901b117d6a6b9.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "All of the following are the features of Kawasaki disease except:",
    "choices": [
      {
        "id": 1,
        "text": "Purulent conjunctivitis"
      },
      {
        "id": 2,
        "text": "Cervical lymphadenopathy"
      },
      {
        "id": 3,
        "text": "Acral edema and desquamation"
      },
      {
        "id": 4,
        "text": "Polymorphous rash"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Purulent conjunctivitis is not a feature of Kawasaki disease.</p>\n<p>Kawasaki disease is also known as mucocutaneous lymph node syndrome and is commonly seen in <strong>children</strong> between <strong>3 months to 5 years</strong> of age.</p>\n<p>Diagnosis of typical Kawasaki disease is made by fever for 5 or more days along with four of the symptoms listed below:</p>\n<ul>\n<li>Bilateral conjunctival congestion (<strong>non purulent conjunctivitis</strong>)</li>\n<li>Oral changes: erythematous, cracked lips and <strong>strawberry tongue</strong></li>\n<li>Non-suppurative cervical lymphadenopathy</li>\n<li>Polymorphous rash</li>\n<li>Changes in extremities: erythema and edema, desquamation of palms and soles.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10-month-old child undergoes treatment for diarrhoea with hypokalemia but the child does not respond to the treatment appropriately and on examination muscular weakness is noted, What is the most likely cause of treatment failure?",
    "choices": [
      {
        "id": 1,
        "text": "Hypomagnesemia"
      },
      {
        "id": 2,
        "text": "Hyponatremia"
      },
      {
        "id": 3,
        "text": "Hypermagnesemia"
      },
      {
        "id": 4,
        "text": "Hypernatremia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of a child with diarrhea, muscular weakness, and hypokalemia not responding to treatment is most likely due to <strong>hypomagnesemia.</strong></p>\n<p>The major cause of hypomagnesemia in this scenario is severe <strong>diarrhoea/gastrointestinal loss</strong> which in turn worsens the hypokalemia. In such cases, hypokalemia can not be corrected unless the underlying hypomagnesemia is addressed.\u00a0</p>\n<p>Treatment failure in hypokalemia due to hypomagnesemia is mediated by two mechanisms:</p>\n<ul>\n<li>\u2193 Magnesium \u2192 <strong>inhibits Na+/ K+ - ATPase</strong> activity \u2192 <strong>\u2193 influx of potassium into the cell\u00a0</strong>\u2192 secondary <strong>kaliuresis</strong>.</li>\n<li>\u2193 Magnesium \u2192 <strong>decreased block </strong>of<strong> ROMK </strong>(renal outer medullary K+ channel)<strong> potassium efflux channels</strong> \u2192 increased <strong>potassium secretion </strong>by<strong> distal nephron</strong></li>\n</ul>\n<p>Therefore in the presence of\u00a0<strong>hypomagnesemia</strong>, hypokalemic patients are clinically <strong>refractory</strong> to <strong>potassium supplementation</strong> therapy.</p>\n<p><strong>Hypokalemia</strong> is defined as a plasma concentration of K<sup>+</sup> <strong>&lt;3.5 meq/L</strong>.\u00a0The following are various causes of hypokalemia:</p>\n<ul>\n<li><strong>Inadequate intake</strong>\n<ul>\n<li>Diet, potassium-free intravenous fluids, potassium deficient TPN</li>\n</ul>\n</li>\n<li><strong>Excessive potassium excretion</strong>\n<ul>\n<li>Hyperaldosteronism</li>\n<li>Medications\u00a0</li>\n</ul>\n</li>\n<li><strong>Potassium losses</strong>\n<ul>\n<li>Direct loss of potassium from GI fluid (diarrhea)</li>\n<li>Renal loss of potassium (to conserve sodium in response to gastric losses)\u00a0</li>\n</ul>\n</li>\n<li><strong>Metabolic</strong>\n<ul>\n<li>Intracellular potassium shifts from <strong>metabolic alkalosis </strong>or<strong> insulin therapy</strong></li>\n</ul>\n</li>\n</ul>\n<p>Clinical features\u00a0</p>\n<ul>\n<li><strong>Weakness </strong>and<strong> paralysis</strong></li>\n<li><strong>Intestinal ileus </strong></li>\n<li>Risk of atrial and ventricular\u00a0<strong>arrhythmias</strong></li>\n<li>Broad <strong>flat T waves</strong>, <strong>ST depression,</strong> and <strong>QT prolongation</strong>\u00a0are most marked when serum K+ <strong>&lt;2.7 mmol/L</strong></li>\n<li>Sodium chloride and bicarbonate retention lead to\u00a0<strong>metabolic alkalosis</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4d9e8473516241d69ff4a08b5b764be4x1280x2207.JPEG"
    ]
  },
  {
    "text": "A 10-year-old female presents for a routine growth evaluation. Her parents express concerns about her height, noting that she seems shorter than her peers. The father\u2019s height is 180 cm, and the mother\u2019s height is 160 cm.  What will be the mid-parental height for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "170 cm"
      },
      {
        "id": 2,
        "text": "176.5 cm"
      },
      {
        "id": 3,
        "text": "163.5 cm"
      },
      {
        "id": 4,
        "text": "175 cm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The mid-parental height for a <strong>female child</strong> with a father who is 180 cm and a mother who is 160 cm tall will be <strong>163.5 cm</strong>.</p>\n<p><strong>Mid-parental height </strong>for a<strong> female child</strong> = <strong>(Mother's height + Father's height) / 2 - 6.5</strong></p>\n<p>Calculation :</p>\n<p>Mother's height = 160 cm \u00a0<br />Father's height = 180 cm \u00a0</p>\n<p>Mid-parental height = (160 + 180) / 2 - 6.5 = <strong>163.5 cm</strong></p>\n<p>Note: Mid-parental height for a <strong>male </strong>child = <strong>(Mother's height + Father's height) / 2 + 6.5.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Riya was found to have a height of more than 95 percentile for her age and an arm-span to height ratio of more than 1.05. On further examination, she had flat feet, mild scoliosis, and long slender fingers. An image of her hands showing two characteristic signs is provided below. What other complications can be expected in this child?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary hypertension"
      },
      {
        "id": 2,
        "text": "Mental retardation"
      },
      {
        "id": 3,
        "text": "Emphysema"
      },
      {
        "id": 4,
        "text": "Subluxation of lens"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given features are suggestive of a diagnosis of&nbsp;<strong>Marfan's syndrome</strong>. <strong>Subluxation of the lens</strong> is a known complication.&nbsp;</p>\n<p>Image (a) shows <strong>Walker-Murdoch (wrist) sign</strong> - the&nbsp;ability to join the thumb and fifth finger around the wrist.</p>\n<p>Image (b) shows&nbsp;<strong>Steinberg (thumb) sign </strong>-&nbsp;thumb tip extends from the palm of the hand in a closed fist</p>\n<p><strong>Features of Marfan's syndrome&nbsp;</strong>(Mnemonic: <strong>MARFAN&rsquo;S</strong>)</p>\n<ul>\n<li><strong>M</strong>itral valve prolapse</li>\n<li><strong>M</strong>yopia due to upward dislocation of the lens (bilateral ectopic lentis)</li>\n<li><strong>A</strong>ortic root dilatation, <strong>A</strong>ortic regurgitation</li>\n<li><strong>R</strong>etinal detachment</li>\n<li><strong>F</strong>ibrillin 1 gene defect: Reduced fibrillin 1 production causing joint laxity</li>\n<li><strong>F</strong>ifteen (Chromosome 15 is involved)</li>\n<li><strong>F</strong>lat feet</li>\n<li><strong>A</strong>rachnodactyly, <strong>A</strong>stigmatism, <strong>A</strong>ir in lungs (Pneumothorax)</li>\n<li><strong>N</strong>earsightedness</li>\n<li><strong>S</strong>ubluxation of lens, <strong>S</strong>coliosis, <strong>S</strong>peech disorders, <strong>S</strong>leep apnea</li>\n</ul>\n<p>The image given below shows the&nbsp;<strong>Steinberg (thumb) sign:</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4155b9d555804c819d9e98b83a187666.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c890bf6d336f495c86e072e960240c11x1280x2175.JPEG"
    ]
  },
  {
    "text": "An 8 month-old-child with developmental regression, was brought with repeated epileptic spasms upon arousal. The EEG showed irregular multifocal high-voltage spike and wave activity with a chaotic high-voltage slow background. What does the presentation associate with?",
    "choices": [
      {
        "id": 1,
        "text": "Lennox gastaut syndrome"
      },
      {
        "id": 2,
        "text": "Juvenile myoclonic epilepsy"
      },
      {
        "id": 3,
        "text": "West syndrome"
      },
      {
        "id": 4,
        "text": "Absence seizures"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical presentation and EEG interpretation referred to as<strong> hypsarrythmia</strong> is seen in i<strong>nfantile spasms (West syndrome)</strong>.</p>\n<p>West syndrome starts between the ages of<strong> 2 and 12 months</strong> and consists of a<strong> triad</strong> of:</p>\n<ul>\n<li>Infantile spasms (salaam attacks)</li>\n<li>Developmental regression</li>\n<li>Hypsarrythmia (abnormal EEG)</li>\n</ul>\n<p>West syndrome is best treated with</p>\n<ul>\n<li>First-line agents: ACTH injections</li>\n<li>Second-line agents: Vigabatrin</li>\n</ul>\n<table style=\"width: 381px;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 130px;\"><strong>Disease</strong></td>\n<td style=\"width: 241px;\"><strong>Typical EEG feature</strong></td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Lennox-Gastaut syndrome</td>\n<td style=\"width: 241px;\">1-2 Hz spike and polyspike bursts in sleep</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Absence seizures</td>\n<td style=\"width: 241px;\">3 Hz spike and slow-wave (spike and dome pattern)</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">Juvenile myoclonic epilepsy</td>\n<td style=\"width: 241px;\">4-5 Hz spike</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\">West syndrome</td>\n<td style=\"width: 241px;\">Hypsarrhythmia (high-voltage waves with chaotic background)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 12-year-old girl presents with short stature and mental retardation. She also has coarse facial features and delayed skeletal maturation and sexual development. Evaluation of the thyroid reveals elevated TSH, low T4, and atrophic thyroid on ultrasonography. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Myxedematous endemic cretinism"
      },
      {
        "id": 2,
        "text": "Neurological endemic cretinism"
      },
      {
        "id": 3,
        "text": "Grave's disease"
      },
      {
        "id": 4,
        "text": "Pendred syndrome"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Myxedematous endemic cretinism</strong> is the most likely diagnosis in this patient.</p>\n<p>Children with myxedematous endemic cretinism present with <strong>mental retardation</strong>, <strong>short stature</strong>, <strong>coarse facial features</strong>, deafness,\u00a0<strong>delayed skeletal</strong> maturation, <strong>delayed sexual development</strong>, and <strong>no goiter</strong>. Serum TSH is elevated while serum T4 levels are low and ultrasonography shows\u00a0<strong>atrophic\u00a0thyroid</strong>.</p>\n<p>Endemic cretinism\u00a0occurs due to the <strong>nutritional</strong> <strong>deficiency of iodine</strong>. It\u00a0can be neurological cretinism or myxedematous cretinism.<strong>\u00a0</strong>Both neurologic and myxedematous types can manifest neurologic symptoms.\u00a0<strong>Cretinism</strong> is a condition characterized by <strong>irreversible abnormalities in intellectual development.\u00a0</strong>Iodine deficiency is also associated with poor school performance in children and recurrent pregnancy loss in women.</p>\n<div class=\"page\" title=\"Page 521\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Iodine deficiency can be best prevented by using <strong>iodized salt and oils</strong>. The recommended daily intake of iodine is 40-120 \u03bcg for children up to the age of 10 years, and 150 \u03bcg for older children and adults. An additional intake of 25 \u03bcg and 50 \u03bcg is recommended during pregnancy and lactation, respectively.</p>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n<p>Option B: Neurological cretinism is characterized by <strong>deaf-mutism, squint, proximal spasticity </strong>and<strong> rigidity.</strong> <strong>Goiter is seen </strong>in neurological cretinism. In neurological cretinism <strong>skeletal and sexual maturation remains unaffected.</strong> Disorders of <strong>stance and gait </strong>with preservation of vegetative functions, signs of <strong>cerebellar or oculomotor disturbance</strong> and <strong>severe mental deficiency</strong>.\u00a0Myxedematous cretinism is characterized by retarded psychomotor development, severe short stature, coarse facial features and myxedema <strong>without deaf-mutism.</strong></p>\n<p>Option C: <strong>Graves</strong> <strong>disease</strong>\u00a0includes a\u00a0triad of hyperthyroidism with <strong>goiter</strong>, ophthalmopathy, and dermopathy (no mental retardation).</p>\n<p>Option D: <strong>Pendred syndrome</strong>\u00a0is caused by a mutation in chloride\u2013iodide transporter in the thyroid and cochlea resulting in euthyroid/hypothyroid <strong>goiter</strong> and <strong>sensorineural hearing loss.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the sodium content in oral rehydration solution as per WHO?",
    "choices": [
      {
        "id": 1,
        "text": "75 mmol/L"
      },
      {
        "id": 2,
        "text": "100 mmol/L"
      },
      {
        "id": 3,
        "text": "125 mmol/L"
      },
      {
        "id": 4,
        "text": "150 mmol/L"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The sodium<strong>\u00a0</strong>content<strong>\u00a0</strong>in WHO\u00a0ORS\u00a0is<strong>\u00a075 mmol/L.\u00a0</strong></p>\n<p><strong>Oral rehydration solution</strong>\u00a0(ORS): It is a solution designed to replace fluids and electrolytes in patients with diarrhoea. The 1:1 molar ratio of glucose and sodium in the\u00a0<span class=\"s5\">WHO\u00a0</span>ORS is based on the principle of\u00a0glucose-dependent sodium and\u00a0<span class=\"s1\">water\u00a0</span>absorption in the gut.</p>\n<table style=\"height: 300px; width: 324px;\">\n<tbody>\n<tr>\n<td style=\"width: 120px;\">Component (Mmol/L)</td>\n<td style=\"width: 88px;\">Standard ORS</td>\n<td style=\"width: 98px;\">ReSoMal</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Glucose</td>\n<td style=\"width: 88px;\">75 (anhydrous)</td>\n<td style=\"width: 98px;\">125</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Sodium</td>\n<td style=\"width: 88px;\">75</td>\n<td style=\"width: 98px;\">45</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Potassium</td>\n<td style=\"width: 88px;\">20</td>\n<td style=\"width: 98px;\">40</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Chloride</td>\n<td style=\"width: 88px;\">65</td>\n<td style=\"width: 98px;\">76</td>\n</tr>\n<tr>\n<td style=\"width: 120px;\">Osmolarity (mosm/L)</td>\n<td style=\"width: 88px;\">245</td>\n<td style=\"width: 98px;\">300</td>\n</tr>\n</tbody>\n</table>\n<p><strong>ReSoMa</strong>l is oral rehydration salt or ORS for<strong>\u00a0severely malnourished children</strong>. It is used in in-patient centres for the treatment of children with severe acute malnutrition.\u00a0<strong>ReSoMal</strong>\u00a0contains more<strong>\u00a0glucose</strong>\u00a0(125 mmol/L) and a<strong>\u00a0lower</strong>\u00a0amount of\u00a0<strong>sodium</strong>\u00a0(45 mmol/L)\u00a0than the standard WHO-ORS.\u00a0Other\u00a0<strong>homemade fluids containing salt\u00a0</strong>are also recommended to improve hydration in children.</p>\n<p class=\"p1\">Drinks sweetened with sugar, carbonated beverages, commercial fruit juices, and sweetened tea\u00a0cause osmotic diarrhea and hypernatremia and are dangerous in patients with diarrhoea. Fluids with stimulant diuretic or purgative effects such as coffee, medicinal tea with infusions, etc. should also be avoided.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15 year old boy presents with short stature. On examination, his upper segment/lower segment ratio is 0.8:1. Which of the following is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spondyloepiphyseal dysplasia"
      },
      {
        "id": 2,
        "text": "Achondroplasia"
      },
      {
        "id": 3,
        "text": "Growth hormone deficiency"
      },
      {
        "id": 4,
        "text": "Hypothyroidism"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Upper segment to lower segment ratio (U/L) less than 1 indicates <strong>spondyloepiphyseal dysplasia.</strong></p>\n<p>The upper segment to lower segment (U/L) ratio in this child is 0.8. In normal development, the U/L ratio is<strong> 1</strong> in children <strong>more than 7 years</strong>.</p>\n<p>The <strong>lower segment(L)</strong> is defined as the length from the symphysis pubis to the floor. The <strong>upper segment(U)</strong> is measured by subtracting the lower segment from the height.</p>\n<p>The U/L ratio is</p>\n<ul>\n<li>1.7 at birth</li>\n<li>1.3 at 3 years</li>\n<li><strong>1 after 7 years</strong></li>\n<li>0.9 in adults</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f96c1801a72240a68cc1a424b15d8276x1279x1001.JPEG"
    ]
  },
  {
    "text": "By what age is the milestone shown in the image typically attained?",
    "choices": [
      {
        "id": 1,
        "text": "4 months"
      },
      {
        "id": 2,
        "text": "6 months"
      },
      {
        "id": 3,
        "text": "9 months"
      },
      {
        "id": 4,
        "text": "12 months"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The milestone shown in the image is a&nbsp;<strong>mature pincer grasp,</strong> which is seen at the age of <strong>12 months.</strong>&nbsp;It is identified as a mature pincer grasp as the object is secured between the opposed thumb and the tip of the index finger.</p>\n<p><strong>Developmental progression of the grasp:</strong></p>\n<ul>\n<li>At 6 months, the infant reaches and holds a larger object in a crude manner using the ulnar aspect of his hand&nbsp;<strong>(Ulnar palmar grasp)</strong>.<strong>&nbsp;</strong>At 8-9 months, the&nbsp;object is grasped by the radial side of the palm&nbsp;<strong>(radial palmar grasp).</strong></li>\n<li>At 9 months, the&nbsp;<strong>immature pincer grasp </strong>develops. The object is secured between the adducted thumb and the extended index finger.</li>\n<li>At&nbsp;12 months,<strong>&nbsp;the mature pincer grasp</strong> develops. The object is secured between the opposed thumb and the tip of the index finger.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8aa17a0d760c4e68b5475d6b7b04e16a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66c1693be8364afc8477c6d505057dd2x1280x955.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/94c6c5438f6a4354b55f309e1c4cfed5x1280x1107.JPEG"
    ]
  },
  {
    "text": "A 6-year-old child was brought to her paediatrician for routine well-child care. Her physical examination is normal except for a systolic murmur and a widely split second heart sound that does not vary with respiration. Which among the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ventricular septal defect"
      },
      {
        "id": 2,
        "text": "Patent ductus arteriosus"
      },
      {
        "id": 3,
        "text": "Atrial septal defect"
      },
      {
        "id": 4,
        "text": "Coarctation of aorta"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>An atrial septal defect</strong> (ASD) is the most likely diagnosis due to the characteristic finding of the <strong>widely split\u00a0second heart sound </strong>that is<strong> fixed </strong>during all phases of respiration.</p>\n<p>Most ASDs are asymptomatic and are picked up during routine physical examinations. A soft <strong>ejection systolic murmur</strong> best heard over the <strong>left upper sternal border</strong> is also commonly found.</p>\n<p>Other options:</p>\n<ul>\n<li>In ventricular septal defect (<strong>VSD</strong>) \u2013 <strong>Wide variable splitting </strong>of <strong>S2</strong> which is masked by the pansystolic murmur.</li>\n<li>In patent ductus arteriosus (<strong>PDA</strong>) \u2013 first sound is accentuated and <strong>S2\u00a0is narrowly or paradoxically split.</strong></li>\n<li>In <strong>coarctation of aorta</strong> \u2013 first sound is accentuated, <strong>S2</strong>\u00a0<strong>is normally split</strong> with a loud aortic component.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Paediatrics Test';
        const quizFilename = 'paediatrics-test-3eaa67c4.html';
        let hierarchy = ["Marrow", "FMGE Test Series Subject", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>