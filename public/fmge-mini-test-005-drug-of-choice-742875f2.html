<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 005 (Drug Of Choice) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2023
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A patient presenting with high-grade fever and altered sensorium was diagnosed with meningococcal meningitis. Which of the following is the most appropriate empirical treatment option?",
    "choices": [
      {
        "id": 1,
        "text": "Penicillin G"
      },
      {
        "id": 2,
        "text": "Ceftriaxone"
      },
      {
        "id": 3,
        "text": "Cefotetan"
      },
      {
        "id": 4,
        "text": "Cefoxitin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ceftriaxone </strong>or<strong> cefotaxime</strong>\u00a0is the drug of choice for <strong>empirical treatment </strong>of <strong><em>Meningococcal meningitis</em></strong> but <strong>Penicillin G</strong> remains the antibiotic of choice for<strong> </strong><em>M</em><em>eningococcal\u00a0</em><em>meningitis</em><strong> </strong>caused by susceptible strains.</p>\n<ul>\n<li>Empirical antimicrobial therapy is initiated in patients with suspected bacterial meningitis before the results of CSF Gram stain and culture are known.</li>\n<li><strong>Pneumoniae </strong>and <strong><em>N. meningitidis</em></strong> are the <strong>most common </strong>etiologic organisms of<strong> community-acquired bacterial meningitis.</strong></li>\n<li>Due to the emergence of penicillin- and cephalosporin-resistant S. pneumoniae, <strong>empirical therapy </strong>of community-acquired suspected bacterial meningitis in<strong> children and adults</strong> should include a combination of <strong>dexamethasone, a third- or fourth-generation cephalosporin </strong>(e.g., ceftriaxone, cefotaxime, or cefepime), and <strong>vancomycin,</strong> plus<strong> acyclovir</strong>, as HSV encephalitis is the leading disease in the differential diagnosis, and <strong>doxycycline during tick season</strong> to treat tick-borne bacterial infections.</li>\n</ul>\n<p><strong>Antimicrobial Therapy of Central Nervous System Bacterial Infections Based on Pathogen</strong>:</p>\n<table style=\"width: 50.6912%; height: 1011.56px;\">\n<tbody>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 43.1709%; height: 54.3984px;\" width=\"312\">\n<p><strong>Organism</strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 54.3984px;\" width=\"319\">\n<p><strong>Antibiotic</strong></p>\n</td>\n</tr>\n<tr style=\"height: 131.195px;\">\n<td style=\"width: 43.1709%; height: 131.195px;\" width=\"312\">\n<p><em>Neisseria meningitides</em></p>\n<p><strong>Penicillin-sensitive </strong></p>\n<p><strong>Penicillin-resistant </strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 131.195px;\" width=\"319\">\n<p><strong>Penicillin G</strong> or ampicillin</p>\n<p><strong>Ceftriaxone</strong> or cefotaxime</p>\n</td>\n</tr>\n<tr style=\"height: 207.992px;\">\n<td style=\"width: 43.1709%; height: 207.992px;\" width=\"312\">\n<p><em>Streptococcus pneumoniae</em></p>\n<p><strong>Penicillin-sensitive </strong></p>\n<p><strong>Penicillin-intermediate </strong></p>\n<p><strong>Penicillin-resistant </strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 207.992px;\" width=\"319\">\n<p><strong>Penicillin G</strong></p>\n<p><strong>Ceftriaxone</strong> or cefotaxime or cefepime</p>\n<p><strong>Ceftriaxone</strong> (or cefotaxime or cefepime)</p>\n<p>+ <strong>vancomycin</strong></p>\n<p>\u00a0</p>\n</td>\n</tr>\n<tr style=\"height: 115.195px;\">\n<td style=\"width: 43.1709%; height: 115.195px;\" width=\"312\">\n<p><strong>Gram-negative bacilli (except</strong></p>\n<p><strong>Pseudomonas spp.)</strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 115.195px;\" width=\"319\">\n<p><strong>Ceftriaxone</strong> or cefotaxime</p>\n<p>\u00a0</p>\n</td>\n</tr>\n<tr style=\"height: 56.7969px;\">\n<td style=\"width: 43.1709%; height: 56.7969px;\" width=\"312\">\n<p><em>Pseudomonas aeruginosa </em></p>\n</td>\n<td style=\"width: 56.7795%; height: 56.7969px;\" width=\"319\">\n<p><strong>Ceftazidime</strong> or cefepime or meropenem</p>\n</td>\n</tr>\n<tr style=\"height: 131.195px;\">\n<td style=\"width: 43.1709%; height: 131.195px;\" width=\"312\">\n<p><strong>Staphylococci spp.</strong></p>\n<p><strong>Methicillin-sensitive </strong></p>\n<p><strong>Methicillin-resistant</strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 131.195px;\" width=\"319\">\n<p>\u00a0</p>\n<p><strong>Nafcillin</strong></p>\n<p>Vancomycin</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 43.1709%; height: 54.3984px;\" width=\"312\">\n<p><em>Listeria monocytogenes</em></p>\n</td>\n<td style=\"width: 56.7795%; height: 54.3984px;\" width=\"319\">\n<p>Ampicillin + gentamicin</p>\n</td>\n</tr>\n<tr style=\"height: 131.195px;\">\n<td style=\"width: 43.1709%; height: 131.195px;\" width=\"312\">\n<p><em>Haemophilus influenza</em></p>\n</td>\n<td style=\"width: 56.7795%; height: 131.195px;\" width=\"319\">\n<p>\u00a0</p>\n<p>Ceftriaxone or cefotaxime or cefepime</p>\n<p>\u00a0</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 43.1709%; height: 54.3984px;\" width=\"312\">\n<p><strong><em>Streptococcus agalactiae </em></strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 54.3984px;\" width=\"319\">\n<p>Penicillin G or ampicillin</p>\n</td>\n</tr>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 43.1709%; height: 54.3984px;\" width=\"312\">\n<p><em>Bacteroides fragilis</em></p>\n</td>\n<td style=\"width: 56.7795%; height: 54.3984px;\" width=\"319\">\n<p>Metronidazole</p>\n</td>\n</tr>\n<tr style=\"height: 20.3984px;\">\n<td style=\"width: 43.1709%; height: 20.3984px;\" width=\"312\">\n<p><strong>Fusobacterium spp.</strong></p>\n</td>\n<td style=\"width: 56.7795%; height: 20.3984px;\" width=\"319\">\n<p><strong>Metronidazole</strong></p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The drug of choice for treatment of thyrotoxicosis during 1st trimester of pregnancy is______",
    "choices": [
      {
        "id": 1,
        "text": "Methimazole"
      },
      {
        "id": 2,
        "text": "Carbimazole"
      },
      {
        "id": 3,
        "text": "Propylthiouracil"
      },
      {
        "id": 4,
        "text": "Radioactive iodine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>drug of choice</strong> for treatment of thyrotoxicosis during <strong>1st trimester of pregnancy</strong> is <strong>propylthiouracil.</strong></p>\n<p>Hyperthyroidism in pregnancy:</p>\n<p><strong>Pre-pregnancy</strong> and <strong>first trimester:</strong> <strong>Propylthiouracil&nbsp;</strong></p>\n<p><strong>2nd, 3rd trimester</strong> + <strong>post-pregnancy: </strong></p>\n<ul>\n<li><strong>Methimazole</strong></li>\n<li>Partial thyroidectomy (in 2nd trimester if&nbsp;methimazole is not effective)</li>\n</ul>\n<p>Methimazole and its prodrug (carbimazole) are usually avoided in the first trimester due to&nbsp;<strong>teratogenic risk.</strong>&nbsp;However, methimazole is used for the remainder of the pregnancy due to the concern for&nbsp;<strong>PTU-associated liver failure.</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug of choice for cyanide toxicity?",
    "choices": [
      {
        "id": 1,
        "text": "Amyl nitrite"
      },
      {
        "id": 2,
        "text": "Sodium nitrite"
      },
      {
        "id": 3,
        "text": "Dicobalt EDTA"
      },
      {
        "id": 4,
        "text": "Hydroxocobalamin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Hydroxocobalamin </strong>and<strong> sodium thiosulfate</strong>&nbsp;are the preferred antidotes in cyanide toxicity.</p>\n<ul>\n<li>If hydroxocobalamin is available,&nbsp; give <strong>hydroxocobalamin </strong>and<strong> sodium thiosulfate.&nbsp;</strong></li>\n<li>If hydroxocobalamin is not available,<strong>&nbsp;</strong>give<strong>&nbsp;amyl nitrite </strong>and<strong> sodium nitrite </strong>and<strong> sodium thiosulfate.&nbsp;</strong>Avoid nitrites if the patient has contraindications to nitrites.</li>\n</ul>\n<p>Hydroxocobalamin is preferred over sodium nitrite as it does not interfere with the oxygen-carrying capacity of the blood. Also, sodium nitrite can induce fatal methemoglobinemia in patients who are critically ill from another cause.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drug is used as an antagonist in opioid poisoning?",
    "choices": [
      {
        "id": 1,
        "text": "Naloxone"
      },
      {
        "id": 2,
        "text": "Pethidine"
      },
      {
        "id": 3,
        "text": "Flumazenil"
      },
      {
        "id": 4,
        "text": "Physostigmine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Naloxone</strong> drug is used as an antagonist in <strong>opioid poisoning.</strong></p>\n<p><strong>Naloxone </strong>is a<strong> competitive pure opioid antagonist </strong>which reverses all effects of an opioid overdose except sedation. It is a pan antagonist with an affinity for all known opioid receptors. It stimulates the release of prolactin in women.</p>\n<p>Opioid-induced respiratory depression is mediated by the action of <strong>&micro; receptors (&micro;2) </strong>in the brainstem respiratory centres.&nbsp;Naloxone is an <strong>opioid antagonist,</strong> which can <strong>reverse</strong> the respiratory depression induced by opioids.</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Opioid Overdose:</strong></p>\n<p>Symptoms:</p>\n<ul>\n<li>Triad of coma, <strong>respiratory depression, and pinpoint pupils(miosis)</strong></li>\n<li>Hypotension</li>\n<li>Bradycardia</li>\n<li>Shallow breathing</li>\n<li>Hypothermia</li>\n</ul>\n<p>Characteristics of opioid toxicity:</p>\n<ul>\n<li>Opioid intoxication toxidrome -&nbsp;respiratory and mental status depression, analgesia, miosis, orthostatic hypotension, nausea and vomiting,&nbsp;<strong>histamine release resulting in localized urticaria and bronchospasm</strong>, ileus secondary to decreased GI motility, and urinary retention secondary to increased vesical sphincter tone.</li>\n<li><strong>Miosis is not universally present from intoxication with every opioid</strong>; normal or even enlarged pupils have been documented secondary to diphenoxylate, meperidine, morphine, pentazocine, and propoxyphene toxicity.</li>\n<li><strong>Opioid-induced acute lung injury</strong>, previously known as non-cardiogenic pulmonary edema, is an uncommon complication associated with heroin overdose.</li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>Airway protection and ventilatory maintenance</strong>&nbsp;are the most important treatment steps for opioid intoxications, because respiratory depression is the major morbidity and the cause of essentially all the mortality.</p>\n<ul>\n<li>After adequate ventilation is ensured, administer&nbsp;<strong>naloxone.</strong></li>\n<li><strong>Single-dose activated charcoal</strong>&nbsp;can be administered in case opioid ingestion occured within one hour.&nbsp;</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p><strong>O</strong>pioid<strong>&nbsp;</strong>withdrawal symptoms (mnemonic- O MY WITHDRAWALS):</p>\n<ul>\n<li><strong>My</strong>driasis</li>\n<li><strong>Y</strong>awning</li>\n<li><strong>W</strong>eakness</li>\n<li><strong>I</strong>nsomnia, irritability</li>\n<li><strong>T</strong>remors, tachycardia</li>\n<li><strong>H</strong>yperthermia, hypertension</li>\n<li><strong>D</strong>iarrhoea</li>\n<li><strong>R</strong>hinorrhoea</li>\n<li><strong>A</strong>pnoeic attacks</li>\n<li><strong>W</strong>eight loss</li>\n<li><strong>A</strong>nxiety</li>\n<li><strong>L</strong>acrimation</li>\n<li><strong>S</strong>weating</li>\n</ul>\n<p>&nbsp;</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 2-year-old child with fever and barking cough for the last 2 days presented to the pediatric emergency at 2.30 am. On examination, respiratory rate is 36/ min, the temperature of 39 \u00b0C and stridor heard only on crying. No other abnormality is found. What is the treatment of choice?",
    "choices": [
      {
        "id": 1,
        "text": "High-dose dexamethasone"
      },
      {
        "id": 2,
        "text": "Racemic epinephrine nebulization"
      },
      {
        "id": 3,
        "text": "Salbutamol nebulization"
      },
      {
        "id": 4,
        "text": "Intravenous ceftriaxone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical vignette is suggestive of <strong>acute laryngotracheobronchitis</strong> (croup) of <strong>mild severity</strong>. The treatment of choice for this child is&nbsp;<strong>High-dose dexamethasone.</strong></p>\n<div class=\"page\" title=\"Page 3782\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Laryngotracheobronchitis </strong>in a child is characterized by a&nbsp;<strong>barking cough</strong>, <strong>hoarseness</strong>, and <strong>inspiratory stridor</strong>. Agitation and crying aggravate the symptoms and signs. A hoarse voice, coryza, normal to the moderately inflamed pharynx, and a slightly increased respiratory rate can be revealed in the physical examination. The upper airway obstruction may progress and the child can present with an increased respiratory rate, nasal flaring; suprasternal, infrasternal, and intercostal retractions; and continuous stridor.</p>\n<div class=\"page\" title=\"Page 3784\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The severity of croup is determined by the Westley croup score.</p>\n<p><strong>Mild croup</strong>&nbsp;&ndash; Stridor may be present when upset or crying but it is not present at rest. Barking cough, hoarse cry, and either no or only mild chest wall/subcostal retractions are seen.</p>\n<p><strong>Moderate croup</strong>- Stridor is present at rest. Mild retractions are at least present. Children may have other symptoms or signs of respiratory distress. The child does not appear agitated.</p>\n<p><strong>Severe croup</strong>&nbsp;&ndash; Stridor is present at rest. Retractions are severe that include indrawing of the sternum. The child may appear anxious, and agitated.</p>\n<p><strong>Hospitalization</strong> is done in a child for any of the following:</p>\n<ul>\n<li>progressive stridor,</li>\n<li>severe stridor at rest,</li>\n<li>respiratory distress,</li>\n<li>hypoxia,</li>\n<li>cyanosis,</li>\n<li>depressed mental status,</li>\n<li>poor oral intake,</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 3784\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Treatment: Oral corticosteroids</strong> are beneficial in <strong>mild croup</strong>. It decreases the edema in the laryngeal mucosa through its anti-inflammatory action and reduces hospitalization, shorter the duration of hospitalization. It also reduces the need for subsequent interventions such as epinephrine administration.</p>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 3784\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 3784\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Nebulized racemic epinephrine is the choice of treatment for <strong>moderate or severe croup </strong>which is characterized by <strong>moderate to severe croup at rest.&nbsp;</strong>Antibiotics are not indicated in children who present with croup.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old woman comes to the physician because of generalized weakness for 6 months. She has also had frequent headaches, mild fever and severe jaw pain. She does not complain of any vision abnormality.  She appears pale. Laboratory tests show elevated levels of ESR. Peripheral smear shows normochromic anemia. What is the next best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Prednisone"
      },
      {
        "id": 2,
        "text": "Methotrexate"
      },
      {
        "id": 3,
        "text": "Paracetamol"
      },
      {
        "id": 4,
        "text": "Sumatriptan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario of a patient &gt;50 years with fever, weakness, anemia, jaw claudication, and high ESR and CRP levels is suggestive of a diagnosis of <strong>giant cell arteritis</strong>. <br />The drug of choice is <strong>prednisone</strong>.</p>\n<p><span data-preserver-spaces=\"true\">Giant cell arteritis (GCA), also known as&nbsp;</span><strong><span data-preserver-spaces=\"true\">temporal arteritis</span></strong>,<span data-preserver-spaces=\"true\">&nbsp;is an inflammation of medium and large-sized vessels. It is more common in&nbsp;</span><strong><span data-preserver-spaces=\"true\">women</span></strong><span data-preserver-spaces=\"true\">&nbsp;and people aged&nbsp;</span><strong><span data-preserver-spaces=\"true\">&gt;50 years</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\">The clinical features include&nbsp;</span><strong><span data-preserver-spaces=\"true\">headache</span></strong><span data-preserver-spaces=\"true\">&nbsp;associated with&nbsp;</span><strong><span data-preserver-spaces=\"true\">scalp pain</span></strong><span data-preserver-spaces=\"true\">&nbsp;and&nbsp;</span><strong><span data-preserver-spaces=\"true\">jaw claudication</span></strong><span data-preserver-spaces=\"true\">, fever, fatigue, malaise, and weight loss. Half of the patients have temporal artery abnormalities such as enlargement, tenderness, nodular swelling, and loss of pulse of the temporal artery, either unilateral or bilateral. Gentle pressure on the scalp may elicit focal or generalized tenderness.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">GCA is very commonly associated with&nbsp;<strong>polymyalgia rheumatica</strong>&nbsp;characterized by morning stiffness and pain around the shoulders and hip.&nbsp;Mononeuropathies or peripheral neuropathies can also be seen.&nbsp;</span><span data-preserver-spaces=\"true\">A dreaded complication is&nbsp;</span><strong><span data-preserver-spaces=\"true\">ischemic optic neuropathy</span></strong><span data-preserver-spaces=\"true\">, which can lead to&nbsp;</span><strong><span data-preserver-spaces=\"true\">sudden blindness</span></strong><span data-preserver-spaces=\"true\">. Therefore</span><span data-preserver-spaces=\"true\">&nbsp;treatment with <strong>oral steroids</strong>&nbsp;is given first and then a <strong>temporal artery biopsy</strong>&nbsp;is done for confirming the diagnosis. As the diagnosis may be done clinically, treatment is started immediately rather than delaying it after the biopsy.</span></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A hypertensive patient who is on treatment develops a HBA1c level of 8.1%. Which of the following is the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Amlodipine"
      },
      {
        "id": 2,
        "text": "Telmisartan"
      },
      {
        "id": 3,
        "text": "Metoprolol"
      },
      {
        "id": 4,
        "text": "Olmesartan"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A hypertensive patient developing diabetes should be switched to <strong>telmisartan.</strong></p>\n<p><strong>Telmisartan, an angiotensin receptor blocker (ARB)</strong>,<strong>&nbsp;</strong>has shown evidence of having<strong> PPAR-gamma agonist action.&nbsp;</strong>It is very useful in <strong>hypertensive patients with diabetes.&nbsp;</strong>PPAR-gamma agonists are the thiazolidinedione group of drugs that act by inducing several insulins sensitizing genes, thereby reducing overall insulin resistance.</p>\n<p>ACE inhibitors or ARBs are the first-line treatment of choice for hypertension in a diabetic patient. They reduce proteinuria and delay diabetic nephropathy, a benefit that is not seen with beta-blockers or calcium channel blockers.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug of choice for preoperative antibiotic prophylaxis in a patient undergoing cardiac surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Penicillin G"
      },
      {
        "id": 2,
        "text": "Erythromycin"
      },
      {
        "id": 3,
        "text": "Azithromycin"
      },
      {
        "id": 4,
        "text": "Cefazolin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>First- and second-generation cephalosporins</strong> (cefazolin) are the drugs of choice for preoperative prophylaxis for cardiac surgery. <strong>Clindamycin</strong> is reserved for cases of <strong>allergy to beta-lactams</strong> and <strong>vancomycin</strong> is recommended for <strong>methicillin-resistant <em>Staphylococcus aureus</em> (MRSA).</strong></p>\n<p><strong>Preoperative antibiotic prophylaxis</strong> is essential in <strong>reducing the risk of surgical site infections</strong>, particularly in cardiac surgery, where the consequences of infection can be severe. The choice of antibiotic depends on the patient's medical history, allergies, and the most common pathogens involved in surgical site infections for the specific surgery. In addition to cefazolin, other cephalosporins, such as cefuroxime, can also be used for prophylaxis in cardiac surgery. The <strong>timing of antibiotic administration is crucial</strong>, with the <strong>first dose</strong> typically given <strong>within 60 minutes before the incision.</strong></p>\n<p>Other Options:</p>\n<p>Option A: Penicillin G is not the drug of choice for preoperative antibiotic prophylaxis in cardiac surgery. It is mainly used to treat infections caused by susceptible gram-positive bacteria, such as <em>Streptococcus pyogenes</em>, <em>Streptococcus pneumoniae</em>, and some strains of <em>Staphylococcus aureus</em>.</p>\n<p>Option B: Erythromycin is a macrolide antibiotic and is not the drug of choice for preoperative prophylaxis in cardiac surgery. It is typically used to treat respiratory tract infections, skin infections, and other infections caused by susceptible gram-positive bacteria.</p>\n<p>Option C: Azithromycin, another macrolide antibiotic, is also not the drug of choice for preoperative prophylaxis in cardiac surgery. It is commonly used to treat respiratory tract infections, sexually transmitted infections, and other infections caused by susceptible gram-positive and gram-negative bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 53-year-old man comes with severe headache and difficulty in moving his right hand and leg. CT Angiogram showed a ruptured aneurysm in the Circle of Willis area. Which of the following drug is indicated to prevent neurological sequelae for this patient's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Nifedipine"
      },
      {
        "id": 2,
        "text": "Amlodipine"
      },
      {
        "id": 3,
        "text": "Nicardipine"
      },
      {
        "id": 4,
        "text": "Nimodipine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The drug indicated to prevent neurological sequelae for this patient is <strong>nimodipine.</strong></p>\n<p><span class=\"fontstyle0\">It is a short-acting <strong>Dihyro Pyridine calcium channel blocker</strong> that penetrates the blood-brain barrier&nbsp;</span><span class=\"fontstyle0\">and has a high affinity for the cerebral blood vessels. It is believed to</span><span class=\"fontstyle2\">&nbsp;</span><span class=\"fontstyle0\">selectively relax cerebral vasculature and is approved for the<strong> prevention </strong>and<strong> treatment </strong>of<strong> neurological deficits </strong>due </span><span class=\"fontstyle2\">to</span><strong><span class=\"fontstyle2\">&nbsp;</span></strong><span class=\"fontstyle0\"><strong>cerebral vasospasm</strong> following subarachnoid hemorrhage or ruptured congenital intracranial aneurysms.</span></p>\n<p>Nimodipine can significantly improve clinical outcomes, and it can reduce the occurrence of symptomatic cerebral vasospasm and delayed neurological function deficits. It also reduces mortality after subarachnoid hemorrhage.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with photophobia and blurring of vision. On examination, the eye appears as shown below.  What is the mainstay of treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Antibiotics and cycloplegics"
      },
      {
        "id": 2,
        "text": "Steroids and cycloplegics"
      },
      {
        "id": 3,
        "text": "Antibiotics and steroids"
      },
      {
        "id": 4,
        "text": "Immunosuppressants"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical scenario of photophobia and blurring of vision along with red-eye and irregularly shaped pupil (image) suggest a diagnosis of <strong>uveitis.</strong>&nbsp;<strong>Steroids and cycloplegics</strong> are the mainstay of the treatment of uveitis.</p>\n<p>Steroids<strong>&nbsp;</strong>are the <strong>drug of choice</strong> in <strong>anterior</strong> uveitis. They reduce inflammation by their anti-inflammatory effect<strong>.&nbsp;</strong></p>\n<p>Cycloplegics<strong>&nbsp;</strong>like&nbsp;1% <strong>atropine, r</strong><strong>elieve spasm</strong> of the iris sphincter and ciliary muscles. They prevent the formation of synechiae and reduce exudation.</p>\n<p><strong>Systemic therapy</strong><strong>&nbsp;</strong>includes steroids, NSAIDs, and immunosuppressants.&nbsp;</p>\n<p>Immunosuppressants&nbsp;like voclosporin (calcineurin inhibitor),&nbsp;are used in severe cases. They are being studied under a program called LUMINATE.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7f2a34ffcc2c49f2970af4750979d8d0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A highway truck driver has profuse rhinorrhea and sneezing. Which among the following drugs will you prescribe him?",
    "choices": [
      {
        "id": 1,
        "text": "Pheniramine"
      },
      {
        "id": 2,
        "text": "Promethazine"
      },
      {
        "id": 3,
        "text": "Hydroxyzine"
      },
      {
        "id": 4,
        "text": "Fexofenadine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The truck driver is suffering from allergic rhinitis and <strong>fexofenadine</strong> can be prescribed to him. This is preferred as it is a <strong>second-generation antihistamine </strong>having<strong>&nbsp;</strong><strong>minimal/no sedative effects</strong> as it cannot cross the blood-brain barrier easily.</p>\n<p>Pheniramine, promethazine, hydroxyzine are<strong> first-generation antihistamines</strong>&nbsp;which&nbsp;<strong>should not be prescribed </strong>to<strong> drivers and heavy machine workers </strong>because they<strong>&nbsp;</strong>are <strong>lipophilic</strong>&nbsp;and <strong>cross&nbsp;the blood-brain barrier </strong>easily and causes <strong>sedation.&nbsp;</strong></p>\n<p>Highly sedative first-generation antihistamines:</p>\n<ul>\n<li>Diphenhydramine</li>\n<li>Dimenhydrinate</li>\n<li>Promethazine</li>\n<li>Hydroxyzine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old female patient was posted for unilateral mastectomy for breast carcinoma. Halothane was used as the inhalational agent. Intraoperatively she develops fever and tachycardia. On physical examination, rigidity was noted in the masseter muscle. What is the drug of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Succinylcholine"
      },
      {
        "id": 2,
        "text": "Dantrolene"
      },
      {
        "id": 3,
        "text": "Isoflurane"
      },
      {
        "id": 4,
        "text": "Vecuronium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above clinical scenario is suggestive of <strong>malignant hyperthermia.\u00a0</strong>The drug of choice for the condition is<strong> dantrolene</strong>.</p>\n<p><strong>Dantrolene</strong> is a <strong>direct-acting</strong> skeletal muscle <strong>relaxant</strong> that acts on the <strong>RyR1</strong> (ryanodine receptor) calcium channels in the sarcoplasmic reticulum of skeletal muscles and <strong>inhibits calcium-induced calcium release</strong>. This results in the\u00a0uncoupling of membrane depolarization and muscle contraction, thus inhibiting muscle contraction.</p>\n<p><strong>Malignant hyperthermia</strong> is a genetic condition in which <strong>mutated</strong> <strong>RyR1</strong><strong>\u00a0receptors</strong> are present in the skeletal muscles. In the presence of certain triggers, this mutated RyR1 causes severe dysfunction in the RyR1 channels. This leads to the accumulation of calcium ions in the sarcoplasmic reticulum resulting in sustained muscle contraction, rigidity, increased heat production, acidosis, hyperkalemia, and increased end-tidal CO<sub>2</sub>.</p>\n<p>Drugs triggering malignant hyperthermia:</p>\n<ul>\n<li><strong>Succinylcholine</strong></li>\n<li><strong>Halothane</strong></li>\n<li><strong>Isoflurane</strong></li>\n<li><strong>Sevoflurane</strong></li>\n</ul>\n<p>Susceptible patients:</p>\n<ul>\n<li>Patients with a positive family history. It can be inherited as an autosomal dominant trait.</li>\n<li>Patients with congenital myopathies.</li>\n</ul>\n<p>Treatment:\u00a0</p>\n<p><strong>Dantrolene sodium</strong> is the drug of choice for malignant hyperthermia. Once the diagnosis is made, the causative inhalational agent should be\u00a0stopped immediately. Supportive treatment with rapid cooling, inhalation of 100% oxygen, control of acidosis, and treatment of hyperkalemia should be given</p>\n<p>Other options:</p>\n<p>Options A and C: Succinylcholine and isoflurane are known to cause malignant hyperthermia, and hence cannot be used for the management.</p>\n<p>Option D: <strong>Vecuronium</strong> is a non-depolarizing skeletal muscle relaxant.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 20-year-old college student comes to the emergency room with a history of palpitations, sweating and a feeling of impending doom for the past 45 minutes while preparing for his exam. He gives a previous history of similar complaints. There is no history of medical illness or substance abuse. Which of the following should be given in the acute management of his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Haloperidol"
      },
      {
        "id": 2,
        "text": "Alprazolam"
      },
      {
        "id": 3,
        "text": "Flumazenil"
      },
      {
        "id": 4,
        "text": "Amitriptyline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of a <strong>panic attack</strong>.&nbsp;Benzodiazepines such as <strong>alprazolam</strong> are used to treat panic attacks.</p>\n<div class=\"page\" title=\"Page 410\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>A panic attack is a<strong> sudden period</strong> of<strong> intense fear</strong> or <strong>apprehen&shy;sion</strong> that may last from minutes to hours. Panic attacks can occur in panic disorders, specific phobia, social phobia and post-traumatic stress disorder. They may occur at any time and are not associated with any identifiable stimulus.</p>\n<p>Some habits predispose a patient to panic attacks. These include use of <strong>caffeine, alcohol, nicotine,</strong> or other substances, and unusual patterns of sleeping or eating.&nbsp;</p>\n<p>&nbsp;The first panic attack is often spontaneous, although panic attacks occasionally follow excitement, physical exertion, sexual activity, or moderate emotional trauma.&nbsp;</p>\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 412\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The major symptoms are extreme fear and a sense of impending death and doom. Physi&shy;cal signs often include <strong>tachycardia,&nbsp;palpitations, dyspnea</strong> or <strong>hyperventilation,</strong> and sweating. Patients often try to leave whatever situation they are in to seek help. The attack generally lasts 20 to 30 minutes and rarely more than an hour. Hyperventilation can produce <strong>respiratory alkalosis</strong> and other symptoms.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>For rapid control of symptoms, <strong>alprazolam</strong>&nbsp;is the drug of choice. <strong>Selective serotonin reuptake inhibitors</strong> such as <strong>paroxetine</strong>&nbsp;are started concurrently and alprazolam is slowly tapered. <strong>Fluoxetine</strong>&nbsp;is used for panic attacks with <strong>co-morbid depression.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The drug of choice in the SAFE strategy of trachoma treatment is _______.",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin"
      },
      {
        "id": 2,
        "text": "Tetracycline"
      },
      {
        "id": 3,
        "text": "Doxycycline"
      },
      {
        "id": 4,
        "text": "Penicillin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Oral azithromycin</strong>&nbsp;is given as part of the SAFE strategy for trachoma management.</p>\n<ul>\n<li><strong>1 g</strong>&nbsp;for adults</li>\n<li><strong>20 mg/kg</strong> body weight for children</li>\n</ul>\n<p>The drug of choice in trachoma is <strong>azithromycin.</strong></p>\n<p>A <strong>single dose</strong> of oral azithromycin is as effective in a as six weeks of daily tetracycline ointment. Because of the difficulty of using the ointment and its unpopularity, a single dose oral drug would be far superior.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with urinary symptoms due to benign prostatic hyperplasia. Which of the following is used to manage the urinary symptoms in the initial stage of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Atropine"
      },
      {
        "id": 2,
        "text": "Tamsulosin"
      },
      {
        "id": 3,
        "text": "Finasteride"
      },
      {
        "id": 4,
        "text": "Danazole"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tamsulosin</strong> is used for the management of urinary symptoms in the <strong>initial stages </strong>of<strong> Benign prostatic hyperplasia(BPH)</strong>. It improves the urinary flow by inhibiting the smooth muscle contraction of the prostate thereby reducing the resistance at the bladder neck.</p>\n<p><strong>BPH</strong> is characterized by <strong>symptoms</strong> of&nbsp;urinary <strong>frequency, urgency, nocturia, incontinence,</strong> slow urinary stream, straining to void, urinary intermittency (stream starting and stopping during micturition), or hesitancy, splitting of the voiding stream, and terminal dribbling. Physical examination reveals a <strong>smooth enlarged</strong> and <strong>non-tender</strong> <strong>prostate</strong>. Lab investigations reveal a <strong>normal PSA&nbsp;</strong>(prostate-specific antigen).&nbsp;Diagnosis is made based on clinical presentation and a lack of lab findings suggestive of malignancy (elevated PSA). A biopsy is rarely indicated.</p>\n<p><strong>Conservative treatment </strong>is recommended for men with<strong> mild symptoms, flow rate &gt;10ml/s, </strong>and<strong> good bladder emptying</strong> with residual urine &lt;100ml.&nbsp;</p>\n<p><strong>Medical management</strong> includes <strong>alpha-adrenergic blocking</strong> agents that inhibit the contraction of smooth muscle that is found in the prostate. Tamsulosin is an adrenoreceptor&nbsp;<strong>antagonist</strong>&nbsp;with receptor selectivity at&nbsp;<strong>&alpha;<sub>1A</sub>.</strong>&nbsp;It is used in the treatment of benign prostatic hyperplasia<strong>. </strong></p>\n<p>The other class of drugs is the <strong>5&alpha;-reductase inhibitors,</strong> which inhibit the conversion of testosterone to DHT, the most active form of androgen. Finasteride is a <strong>5&alpha;-reductase enzyme&nbsp;inhibitor.&nbsp;</strong>It is effective in the treatment of<strong>&nbsp;palpable enlarged prostate</strong>. These drugs result in a 25% shrinkage of the prostate gland.</p>\n<p><strong>Indications</strong> for <strong>surgical</strong> management:</p>\n<ul>\n<li>Lower urinary tract symptoms that are refractory to medical therapy</li>\n<li>Refractory urinary retention</li>\n<li>Recurrent urinary tract infection (UTI)</li>\n<li>Hematuria</li>\n<li>Stone formation</li>\n<li>Hydronephrosis, hydroureter with renal functional impairment</li>\n</ul>\n<p><strong>Surgical management</strong> involves the use of the transurethral resection of the prostate <strong>(TURP).&nbsp;</strong>Laser ablative techniques using holmium YAG can also be done.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old pregnant lady at 32 weeks of gestation presents with vaginal discharge associated with itching and burning. On examination, the following finding is seen. Which of the following can be used in the treatment of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Tab. Metronidazole 500 mg twice daily for 7 days"
      },
      {
        "id": 2,
        "text": "Tab. Azithromycin 1 g single dose"
      },
      {
        "id": 3,
        "text": "Tab. Fluconazole 150 mg single dose"
      },
      {
        "id": 4,
        "text": "Tab. Metronidazole 2 g single dose"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical features and the image showing <strong>curdy white vaginal</strong> discharge is suggestive of monilial vaginitis/<strong>vaginal candidiasis</strong>. A <strong>single dose</strong> of <strong>fluconazole 150 mg</strong> can be used in the treatment of this condition.</p>\n<p><strong>Local intravaginal</strong> application of antifungal agents such as imidazole, miconazole, clotrimazole, butoconazole or ter\u00adconazole vaginal pessaries or creams used for <strong>3\u20136 days</strong> is also very effective.\u00a0Since the use of\u00a0<strong>fluconazole</strong>\u00a0has been associated with embryotoxicity and increased risk of cardiac malformations, it is recommended to be\u00a0<strong>avoided</strong>\u00a0during the<strong> first trimester.</strong></p>\n<p>Risk factors for candidal infection include <strong>pregnancy</strong>, medications such as oral contraceptive pills, steroids, HIV, and diabetes mellitus. Clinical features include<strong> itching, curdy-white discharge, burning,</strong> and dysuria\u00a0with\u00a0<strong>vaginal pH &lt;4.5</strong>.\u00a0</p>\n<p>The diagnosis can be confirmed by microscopic examination of the smear of vaginal discharge with <strong>10% KOH solution.</strong> The smear shows\u00a0<strong>budding yeast cells and pseudohyphae</strong>. Culture can be done on Sabouraud's agar and Nickerson's medium.</p>\n<p>Treatment includes control and elimination of risk factors including maintaining personal hygiene, adequate control of diabetes, and stopping contributing medications, in addition to pharmacotherapy as mentioned above. Routine treatment of the partner is not recommended unless the partner is symptomatic.</p>\n<p>Other options:</p>\n<p>Option A- <strong>Metronidazole</strong> 500 mg twice daily for 7 days is used in the treatment of <strong>vaginosis</strong>/bacterial vaginitis/nonspecific vaginitis.</p>\n<p>Option B- <strong>Azithromycin</strong> 1 g single dose is used in the treatment of <strong>chlamydial</strong> infections and <strong>chancroid</strong> caused by <em>Haemophilus ducreyi</em>.</p>\n<p>Option D- <strong>Metronidazole</strong> 2 g single dose is used in the treatment of <strong>vaginosis</strong>/bacterial vaginitis/nonspecific vaginitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb455251f45b4d88883114f883c96e6c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old pregnant woman in her third trimester was found to be positive for plasmodium falciparum malaria. What treatment would she be started on?",
    "choices": [
      {
        "id": 1,
        "text": "ACT"
      },
      {
        "id": 2,
        "text": "Quinine"
      },
      {
        "id": 3,
        "text": "Chloroquine"
      },
      {
        "id": 4,
        "text": "Primaquine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Falciparum malaria</strong> during the <strong>second and third trimester</strong> of pregnancy should be treated with<strong> ACT.</strong></p>\n<p><strong>Treatment of falciparum malaria during pregnancy:</strong></p>\n<ul>\n<li>1<sup>st</sup> trimester: <strong>Quinine </strong></li>\n<li>2<sup>nd</sup> and 3<sup>rd</sup> trimester<strong>: ACT-AL </strong>in north eastern states and <strong>ACT-SP </strong>in other states.</li>\n</ul>\n<p><strong>Treatment of vivax malaria during pregnancy:</strong></p>\n<ul>\n<li><strong>DOC: </strong>Chloroquine</li>\n</ul>\n<p><strong>Primaquine is contraindicated in pregnancy.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Treatment of choice for Kawasaki disease is:",
    "choices": [
      {
        "id": 1,
        "text": "IV Immunoglobulins"
      },
      {
        "id": 2,
        "text": "Steroids"
      },
      {
        "id": 3,
        "text": "Tocilizumab"
      },
      {
        "id": 4,
        "text": "Methotrexate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Treatment of choice in Kawaski disease is&nbsp;<strong>IV immunoglobulins</strong>. IV immunoglobulins along with aspirin have proven beneficial in preventing coronary artery abnormalities.</p>\n<p>Tocilizumab is used in the treatment of giant cell arteritis and rheumatoid arthritis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-month-old boy with a known diagnosis of sickle cell disease presents with fever and painful swelling of hands and feet. Which of the following is the drug of choice to prevent painful crises in sickle cell anaemia?",
    "choices": [
      {
        "id": 1,
        "text": "Hydrocodone"
      },
      {
        "id": 2,
        "text": "Hydroxyurea"
      },
      {
        "id": 3,
        "text": "Corticosteroids"
      },
      {
        "id": 4,
        "text": "Ruxolitinib"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Hydroxyurea</strong> is the\u00a0drug of choice for the prevention of painful crises in sickle cell anaemia.</p>\n<p>Hydroxyurea is a\u00a0<strong>m</strong><strong>yelosuppressive agent\u00a0</strong>that is effective in <strong>reducing the frequency of painful episodes</strong>,\u00a0decreasing the rate of hospitalization and requirement for blood transfusion.\u00a0It is\u00a0safe and well-tolerated in children and infants.</p>\n<p><strong>Other options</strong>:</p>\n<ul>\n<li>Hydrocodone is used in the treatment of pain crisis in sickle cell anaemia.</li>\n<li>Corticosteroids is one of the first-line therapies for acute idiopathic thrombocytic purpura (ITP) with risk factors for bleeding.</li>\n<li>Ruxolitinib is the drug of choice for treatment of polycythemia vera.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A newborn infant developed respiratory distress 2 days after birth. On examination, she is mottled and has weak upper extremity pulses and absent femoral pulses. Investigations revealed coarctation of the aorta. Which of the following drugs can be used to keep the ductus open medically before surgical repair?",
    "choices": [
      {
        "id": 1,
        "text": "Ibuprofen"
      },
      {
        "id": 2,
        "text": "Indomethacin"
      },
      {
        "id": 3,
        "text": "Alprostadil"
      },
      {
        "id": 4,
        "text": "Mifepristone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Alprostadil</strong>, a prostaglandin E1 <strong>(PGE1) analogue</strong>, can be used to keep the <strong>ductus open</strong> medically in the coarctation of aorta.</p>\n<p>Survival of newborns with certain heart lesions such as coarctation of the aorta, hypoplastic left heart syndrome and transposition of great vessels depends on the ductus arteriosus patency&nbsp;<strong>(ductal-dependant lesions)</strong>. Closure of PDA in such conditions can lead to hypoperfusion, severe hypoxia and cyanosis.</p>\n<p>PGE1 is a potent and specific relaxant of ductal smooth muscle. PGE1 analogues like <strong>alprostadil, misoprostol and rioprostil</strong> can keep the ductus open and support systemic blood supply.</p>\n<p><strong>Ibuprofen and indomethacin </strong>are used in patent ductus arteriosus to close the ductus medically.</p>\n<p><strong>Mifepristone</strong>, also known as<strong> RU-486</strong>, is used in combination with misoprostol to bring about&nbsp;<strong>abortion</strong> during pregnancy and manage early miscarriage.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the drug of choice for prophylaxis of chronic cluster headaches?",
    "choices": [
      {
        "id": 1,
        "text": "Oral sumatriptan"
      },
      {
        "id": 2,
        "text": "Oral Verapamil"
      },
      {
        "id": 3,
        "text": "Sumatriptan nasal spray"
      },
      {
        "id": 4,
        "text": "Gabapentin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The drugs used in the <strong>prophylaxis</strong> of chronic cluster headaches are:</p>\n<ul>\n<li><strong>Verapamil - drug of choice</strong></li>\n<li>Prednisone</li>\n<li>Lithium</li>\n<li>Topiramate</li>\n<li>Gabapentin</li>\n<li>Melatonin</li>\n<li>Greater occipital nerve injection with lidocaine and glucocorticoids</li>\n</ul>\n<p><strong>Cluster headache</strong> is a <strong>periodic</strong> headache characterized by daily attacks of short-duration unilateral headache lasting 8-10 weeks a year. It presents as severe,&nbsp;<strong>unilateral retro-orbital pain</strong>&nbsp;with&nbsp;<strong>autonomic features</strong>, such as unilateral lacrimation, nasal congestion, and conjunctival injection. The pain, though severe, is characteristically brief (15-180 minutes).&nbsp;Patients are usually perfectly well in between episodes.</p>\n<p>The most suitable treatment is pharmacologic prevention of future bouts of headaches. An acute episode can be treated with<strong>&nbsp;</strong></p>\n<ul>\n<li><strong>Sumatriptan&nbsp;</strong>6 mg <strong>subcutaneous </strong>injection</li>\n<li><strong>100% O2&nbsp;</strong>at<strong> 10 -12 L/min </strong>for 15 - 20 mins</li>\n<li>Sumatriptan (20 mg) and zolmitriptan (5 mg)<strong> nasal spray.</strong></li>\n<li>Noninvasive vagus nerve stimulation (nVNS) is also approved by the FDA for the treatment of acute episodes of cluster headaches.</li>\n</ul>\n<p>Other options:</p>\n<p><strong>Oral</strong> sumatriptan is <strong>not effective</strong> for the treatment or prevention of acute cluster headaches. The <strong>nasal spray</strong> form of <strong>sumatriptan</strong> is used in the <strong>management of acute attacks.&nbsp;</strong>Gabapentin is not the drug of choice, though it has a role in prophylaxis of cluster headaches.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A postmenopausal woman presents with episodes of a sudden sensation of intense heat involving the face and upper chest which rapidly spreads across the entire body. The episodes last about 2-4 minutes and are associated with profuse sweating, palpitations, and anxiety. What is the most effective treatment for her symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Clonidine"
      },
      {
        "id": 2,
        "text": "Isoflavones"
      },
      {
        "id": 3,
        "text": "Estrogen therapy"
      },
      {
        "id": 4,
        "text": "Vitamin E"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical features are suggestive of <strong>vasomotor symptoms</strong> (<strong>hot flushes</strong>) in a postmenopausal woman. <strong>Estrogen therapy</strong> is found to be the most effective to treat it.</p>\n<div class=\"page\" title=\"Page 81\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Hot flushes</strong> are episodes of vasodilation affecting the<strong> face</strong> and the neck. The episode lasts for<strong> 2&ndash;5 min</strong> each. These are followed by <strong>severe sweating, palpitations, anxiety</strong>, and anginal pains may be felt. <strong>Multiple episodes</strong> occur during the day, but are more <strong>severe at night</strong> and can disturb sleep. Sometimes they can be preceded by headaches.</p>\n<p>Hormone therapy in postmenopausal women is only indicated for the treatment of:</p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>vasomotor symptoms</strong></li>\n<li>osteoporosis (prevention&nbsp;and treatment)</li>\n<li>vaginal atrophy</li>\n<li>urethral syndrome</li>\n<li>dyspareunia</li>\n</ul>\n<p>Estrogen can be given as&nbsp;<strong>oral</strong> estrogen formulations, <strong>transdermal</strong> patches, <strong>topical</strong> gel, or <strong>intravaginal</strong> formulations. For Dyspareunia, urethral syndrome, and senile vaginitis <strong>local estrogen cream</strong> is preferred over oral therapy.&nbsp;<strong>Short-term</strong> therapy is recommended for <strong>vasomotor symptoms</strong> whereas <strong>osteoporosis</strong> requires <strong>long-term therapy</strong>. Estrogen should be given in the smallest effective dose for the shortest duration possible.&nbsp;</p>\n<p>&nbsp;Other treatments:&nbsp;</p>\n<table style=\"width: 391px; height: 275px;\">\n<tbody>\n<tr style=\"height: 38.9062px;\">\n<td style=\"width: 98.0781px; height: 38.9062px;\"><strong>Hormonal</strong></td>\n<td style=\"width: 171.922px; height: 38.9062px;\"><strong>Non-Hormonal</strong></td>\n<td style=\"width: 97px; height: 38.9062px;\"><strong>Non-prescriptive</strong></td>\n</tr>\n<tr style=\"height: 198px;\">\n<td style=\"width: 98.0781px; height: 198px;\">\n<p>Estrogen therapy (Most effective)</p>\n<div class=\"page\" title=\"Page 3\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Progestin</p>\n</div>\n</div>\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 3\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Combination preparations</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>Tibolone</p>\n</td>\n<td style=\"width: 171.922px; height: 198px;\">\n<p>Clonidine&nbsp;</p>\n<p>Selective serotonin reuptake inhibitors (like Fluoxetine)</p>\n<div class=\"page\" title=\"Page 524\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 524\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>selective norepinephrine- reuptake inhibitor(like desvenlafaxine)</p>\n</div>\n</div>\n</div>\n</div>\n<p>Gabapentin</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 97px; height: 198px;\">\n<p>Vitamin E</p>\n<p>Soya&nbsp;</p>\n<p>Isoflavones</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Contraindications of HRT:</p>\n<div class=\"page\" title=\"Page 2\">\n<ul>\n<li>Undiagnosed&nbsp;<strong>abnormal genital bleeding</strong></li>\n<li>Known, suspected, or history of&nbsp;<strong>breast cancer</strong></li>\n<li>Known or suspected&nbsp;<strong>estrogen-dependent neoplasia</strong></li>\n<li>Active or prior&nbsp;<strong>venous thromboembolism</strong></li>\n<li>Active or recent (e.g., within the past year)&nbsp;<strong>arterial thromboembolic disease</strong></li>\n<li><strong>Liver</strong>&nbsp;<strong>dysfunction</strong>&nbsp;or gall bladder disease</li>\n<li>Known&nbsp;<strong>hypersensitivity</strong>&nbsp;to the ingredients of the estrogen preparation</li>\n<li>Known or suspected&nbsp;<strong>pregnancy</strong></li>\n<li><strong>Uterine</strong>&nbsp;<strong>fibroids</strong>&nbsp;as these may enlarge in size.</li>\n</ul>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with scaly lesions as shown in the image below. He later developed arthritis and nail changes.  What is the treatment of choice for this?",
    "choices": [
      {
        "id": 1,
        "text": "PUVA"
      },
      {
        "id": 2,
        "text": "Steroids"
      },
      {
        "id": 3,
        "text": "Methotrexate"
      },
      {
        "id": 4,
        "text": "Clobetasol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient<strong>\u00a0</strong>has<strong> right knee effusion</strong>,<strong> dactylitis</strong> of multiple digits, and sharply demarcated scaly red <strong>papulosquamous lesions</strong> on both knees all of which point toward a diagnosis of<strong> psoriatic arthritis.\u00a0</strong></p>\n<p><strong>Methotrexate</strong>\u00a0and <strong>apremilast</strong>\u00a0are the <strong>first-line</strong> drugs for the treatment of moderate to severe psoriasis associated with psoriatic\u00a0arthritis.</p>\n<p>Features of psoriatic arthritis are :</p>\n<ul>\n<li>Asymmetrical oligoarthritis</li>\n<li>associated with nail pitting/ onycholysis, or</li>\n<li>dactylitis, enthesitis\u00a0</li>\n<li>Inflammation is prominent in the distal interphalangeal joints\u00a0</li>\n<li>There is dactylitis with pronounced telescoping.</li>\n<li>Nail dystrophy (hyperkeratosis and onycholysis) affects each of the fingers</li>\n<li>Axial involvement may occur</li>\n</ul>\n<p>Radiological features:</p>\n<ul>\n<li>Pencil-in-cup deformity of DIP joint</li>\n<li>marginal erosions with adjacent bony proliferation \"whiskering\"</li>\n<li>small joint ankylosis</li>\n<li>Ray distribution of lesions</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/07930b60305f46a499bc1b2f85e98e50.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following antibiotics have a role in the treatment of hepatic encephalopathy?",
    "choices": [
      {
        "id": 1,
        "text": "Rifaximin"
      },
      {
        "id": 2,
        "text": "Azithromycin"
      },
      {
        "id": 3,
        "text": "Doxycycline"
      },
      {
        "id": 4,
        "text": "Vancomycin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Rifaximin is used in the treatment of hepatic encephalopathy. It lowers the blood ammonia levels by reducing ammonia production in the gut by eliminating ammonia-producing bacteria in the gut.</p>\n<p>Treatment of hepatic encephalopathy includes:</p>\n<ul>\n<li>Correction of precipitating factors</li>\n<li><strong>Lactulose</strong> - decreases the absorption of ammonia in the gut by converting NH3 into NH4+</li>\n<li><strong>Rifaximin</strong> - lowers the blood ammonia levels</li>\n<li><strong>L-ornithine L-aspartate</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with continuing seizures for the past 30 minutes. The relatives say that there had been no seizure-free intervals in the past 30 minutes. After stabilizing the vitals of the patient, the first drug the patient should be started on is:",
    "choices": [
      {
        "id": 1,
        "text": "Diazepam"
      },
      {
        "id": 2,
        "text": "Phenytoin"
      },
      {
        "id": 3,
        "text": "Phenobarbitone"
      },
      {
        "id": 4,
        "text": "Thiopentone sodium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This scenario described above is of&nbsp;<strong>status epilepticus</strong>. The first line drug used is <strong>Diazepam</strong>/<strong>Lorazepam.</strong></p>\n<p>Status epilepticus refers to continuous or repetitive, discrete seizures with impaired consciousness which lasts for <strong>more than 5 minutes</strong>.</p>\n<p>The <strong>duration</strong> of seizure activity to meet the definition of status epilepticus has traditionally been specified as <strong>15&ndash;30 min. </strong>However, a more <strong>practical</strong> definition is to consider status epilepticus as a situation in which the duration of seizures <strong>prompts</strong> the <strong>acute</strong> use of anticonvulsant <strong>therapy</strong>, i.e., more than <strong>5 minutes</strong>.</p>\n<p>Management of status epilepticus:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3f2f86218c6f42c7b3fc299a5c33127fx1280x2558.JPEG"
    ]
  },
  {
    "text": "A patient with hyperkalemia and elevated urea levels underwent dialysis. Towards the end of the session, she developed dialysis disequilibrium syndrome. What is the treatment for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Bumetanide"
      },
      {
        "id": 2,
        "text": "Ethacrynic acid"
      },
      {
        "id": 3,
        "text": "Nesiritide"
      },
      {
        "id": 4,
        "text": "IV Mannitol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The treatment for this patients with&nbsp;<strong>dialysis disequilibrium syndrome (DDS)</strong> or the <strong>reverse urea effect </strong>is <strong>IV mannitol&nbsp;</strong></p>\n<p>It is an acute complication that occurs especially in patients undergoing dialysis for the first time.</p>\n<p>During dialysis, urea in blood vessels is rapidly removed as compared to that in the interstitium. This decreases the osmolality of blood. This results in a fluid shift from the blood vessels into the interstitium and brain parenchyma, causing cerebral edema.</p>\n<p>DDS can present as&nbsp;headache, nausea, blurred vision, restlessness, <strong>confusion,</strong> and severe manifestations like <strong>coma</strong> and <strong>seizures</strong> in rare cases.</p>\n<p>The most common risk factors include</p>\n<ul>\n<li>First hemodialysis treatment</li>\n<li><strong>High blood urea nitrogen (BUN) (above 175 mg/dL or 60 mmol/L)</strong> before initiation of dialysis</li>\n<li>Children and elderly</li>\n<li>Sudden change in dialysis regimen</li>\n<li>Hyponatremia, hepatic encephalopathy</li>\n<li>Sepsis, meningitis, encephalitis, hemolytic uremic syndrome, vasculitis</li>\n<li class=\"half_rhythm\">\n<div>History of stroke, malignant hypertension, head trauma, or seizure disorder</div>\n</li>\n</ul>\n<p>Management includes changing the <strong>sodium dialysate bath</strong> or engaging the <strong>changed prescription on the dialysis machine.</strong>&nbsp;<strong>Intravenous mannitol</strong> can be used to reduce intracerebral pressure in severe symptoms of DDS.</p>\n<p>DDS can be prevented by&nbsp;</p>\n<ul>\n<li>Slow and gentle initial hemodialysis</li>\n<li>Limiting the clearance of urea to prevent the development of an osmotic gradient</li>\n<li>Administration of <strong>osmotically active substance</strong></li>\n</ul>\n<div id=\"article-98826.s4\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the drug of choice for drug induced Parkinson\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "Levodopa"
      },
      {
        "id": 2,
        "text": "Benzhexol"
      },
      {
        "id": 3,
        "text": "Amantidine"
      },
      {
        "id": 4,
        "text": "Selegilline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> drug of choice </strong>for <strong>drug-induced Parkinson&rsquo;s</strong> disease is<strong> benzhexol.</strong></p>\n<p>Benzhexol is an <strong>antimuscarinic agent</strong>. Drug-induced parkinsonism is a condition that is caused by certain drugs that have <strong>D<sub>2</sub> antagonistic action</strong> like <strong>typical antipsychotics</strong>. Due to the decrease in dopaminergic activity, they result in an unbalanced cholinergic activity. Benzhexol is a&nbsp;<strong>centrally-acting&nbsp;</strong>antimuscarinic agent. It acts by restoring the cholinergic balance in the striatal interneurons.&nbsp;</p>\n<p>The following drugs are implicated in drug-induced parkinsonism:</p>\n<table width=\"308\">\n<tbody>\n<tr>\n<td><strong>Drug class</strong></td>\n<td>\n<p><strong>Examples&nbsp;</strong></p>\n</td>\n</tr>\n<tr>\n<td><strong>Typical antipsychotics</strong></td>\n<td>\n<p>Phenothiazines, haloperidol</p>\n</td>\n</tr>\n<tr>\n<td><strong>Atypical antipsychotics</strong></td>\n<td>Risperidone, olanzapine</td>\n</tr>\n<tr>\n<td><strong>Dopamine depleters</strong></td>\n<td>Reserpine, tetrabenazine</td>\n</tr>\n<tr>\n<td><strong>Antiemetics</strong></td>\n<td>Metoclopramide, levosulpiride</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 55-year old man presents with an inability to hold his head up, progressive atrophy and weakness of his hands and forearms over the past few months. On examination, he is found to have spasticity of the legs and brisk jaw jerk. What is the drug that can be given to improve his survival and slow down the progression of this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Baclofen"
      },
      {
        "id": 2,
        "text": "Riluzole"
      },
      {
        "id": 3,
        "text": "Tizanidine"
      },
      {
        "id": 4,
        "text": "Dantrolene"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above scenario with both upper motor and lower motor lesions is suggestive of <strong>amyotrophic lateral sclerosis (ALS)</strong>. <strong>Riluzole</strong> is the drug that can be given\u00a0to <strong>improve his survival</strong> and <strong>slow</strong> down the <strong>progression</strong> of this disease.</p>\n<p><strong><span class=\"notion-enable-hover\" data-token-index=\"0\" data-reactroot=\"\">Riluzole</span></strong>\u00a0is absorbed orally and is highly protein-bound. It works by <strong>reducing excitotoxicity</strong> by blocking voltage-dependent sodium channels and by <strong><span class=\"notion-enable-hover\" data-token-index=\"2\" data-reactroot=\"\">diminishing glutamate </span>release</strong>. Riluzole extended the survival of ALS patients by <strong>2-3 months</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A known alcoholic patient is brought to the emergency in a disoriented state. He complains of seeing snakes and insects crawling on his skin. Which of the following should be given to this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Haloperidol + thiamine"
      },
      {
        "id": 2,
        "text": "Lorazepam only"
      },
      {
        "id": 3,
        "text": "Lorazepam + thiamine"
      },
      {
        "id": 4,
        "text": "Haloperidol only"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario points towards&nbsp;<strong>delirium tremens likely due to acute alcohol withdrawal</strong>.&nbsp;<strong>Lorazepam + thiamine</strong> should be given to this patient.</p>\n<p>Delirium tremens occurs after 2-4 days of abstinence in a heavy or chronic drinker. It is characterized by autonomic hyperactivity, tremors, delusions, and hallucinations. It usually resolves spontaneously in 7 days but may cause the death of the patient due to cardiovascular collapse or infections or self-injury.</p>\n<p>Delirium tremens is treated using benzodiazepines starting with a higher dosage which is gradually tapered as withdrawal symptoms disappear. In cases of chronic alcohol use, vitamin deficiency (especially thiamine) may be co-existing and hence bolus doses of thiamine are given to prevent/treat Wernicke encephalopathy.</p>\n<p>Haloperidol is generally not the first-line drug in case of alcoholic withdrawal. It might be used as an add-on in agitated patients. It decreases the seizure threshold and its use would be appropriate in a case of co-existing psychotic disorder like schizophrenia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old female presents with hepatitis and personality changes. A picture of her eye has been provided below. Which of the following is the drug of choice for pregnant women and maintenance therapy for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Zinc"
      },
      {
        "id": 2,
        "text": "Trientine"
      },
      {
        "id": 3,
        "text": "Penicillamine"
      },
      {
        "id": 4,
        "text": "Pyridoxine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">The image provided above represents</span><strong><span data-preserver-spaces=\"true\">\u00a0the Kayser-Fleischer ring\u00a0</span></strong><span data-preserver-spaces=\"true\">which is seen in</span><strong><span data-preserver-spaces=\"true\">\u00a0Wilson's disease.\u00a0</span></strong><span data-preserver-spaces=\"true\">The drug of choice for maintenance therapy in this condition is\u00a0</span><strong><span data-preserver-spaces=\"true\">Zinc.</span></strong></p>\n<p><span data-preserver-spaces=\"true\"><strong>Wilsons disease</strong> is an\u00a0<strong>autosomal-recessive</strong>\u00a0disease caused by mutations in the\u00a0<strong><em>ATP7B\u00a0</em>gene</strong>, which encodes a membrane-bound, copper-transporting ATPase.</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Kayser-Fleischer ring </span></strong>(<span data-preserver-spaces=\"true\">KF) ring\u00a0</span><span data-preserver-spaces=\"true\">is a golden-brown ring formed due to the\u00a0</span><strong><span data-preserver-spaces=\"true\">deposition of copper in Descemet\u2019s membrane of the cornea.</span></strong> It is c<span data-preserver-spaces=\"true\">haracteristically observed in Wilson's disease but is not pathognomic. It d</span><span data-preserver-spaces=\"true\">oes not interfere with vision. It is p</span><span data-preserver-spaces=\"true\">resent in almost all patients of Wilson's disease with neurological/psychiatric symptoms. However, the a</span><span data-preserver-spaces=\"true\">bsence of KF rings does not exclude the diagnosis of Wilson's disease</span></p>\n<p><span data-preserver-spaces=\"true\">Clinical symptoms:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\"><strong>Hepatitis</strong> and cirrhosis</span></li>\n<li><span data-preserver-spaces=\"true\"><span data-preserver-spaces=\"true\"><strong>Neurological</strong>: D</span></span>ystonia, rigidity, tremor or choreiform movements, abnormal gait due to <strong>basal ganglia</strong> (e.g., caudate, putamen) involvement.</li>\n<li><span data-preserver-spaces=\"true\"><span data-preserver-spaces=\"true\"><strong>Behavioural</strong> disturbances</span></span>Occular characteristics:</li>\n<ul>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Deposition of copper in the posterior capsule of the lens resulting in\u00a0</span><strong><span data-preserver-spaces=\"true\">sunflower cataract</span></strong></li>\n<li class=\"ql-indent-1\"><strong>KF ring\u00a0</strong></li>\n</ul>\n</ul>\n<p><span data-preserver-spaces=\"true\">Diagnosis:</span></p>\n<ul>\n<ul>\n<li class=\"ql-indent-1\"><strong><span data-preserver-spaces=\"true\">Sternlieb's criteria:</span></strong><span data-preserver-spaces=\"true\">\u00a0Presence of KF rings</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Decreased serum ceruloplasmin (copper-containing enzyme/ferroxidase) levels</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Measured hepatic copper levels in liver biopsy</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Increased 24-hour urine copper excretion</span></li>\n</ul>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">The gold standard</span></strong><span data-preserver-spaces=\"true\">\u00a0for diagnosis:\u00a0</span><strong><span data-preserver-spaces=\"true\">Liver biopsy</span></strong><span data-preserver-spaces=\"true\">\u00a0with quantitative copper assays</span></p>\n<div class=\"page\" title=\"Page 3591\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The initial treatment in symptomatic patients is the administration of <strong>copper-chelating</strong> agents, which leads to the rapid excretion of excess deposited copper.</p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>D-penicillamine</strong>: It increases urinary excretion of copper and prevents copper overload. Pyridoxine (vitamin B6 ) is administered along with it to counter pyridoxine deficiency that occurs due to penicillamine.</li>\n<li><strong>Triethylenetetramine dihydrochloride</strong>: This chelating agent is given in patients intolerant to D-penicillamine and those with severe neurologic manifestations (D-penicillamine worsens neurological status).</li>\n<li><strong>Zinc acetate</strong>: This is used due to its unique ability to <strong>impair</strong> the gastrointestinal <strong>absorption</strong> of copper.\u00a0Zinc is beneficial in <strong>pregnancy</strong> (lower teratogenic effects) and as a\u00a0<strong>maintenance therapy</strong>.</li>\n<li><strong>Liver</strong><strong> transplantation</strong>: This is considered in advanced stages of irreversible hepatic damage or poor compliance to medical therapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/adb4f85f0604444ca1f8a7b06bb134bb.PNG"
    ],
    "explanation_images": []
  }
];
        let quizName = 'Fmge Mini Test - 005 (Drug Of Choice)';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2023"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>