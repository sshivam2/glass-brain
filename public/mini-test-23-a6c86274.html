<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 23 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A defect in which of the following forms the structure marked below?",
    "choices": [
      {
        "id": 1,
        "text": "Internal oblique"
      },
      {
        "id": 2,
        "text": "External oblique"
      },
      {
        "id": 3,
        "text": "Parietal peritoneum"
      },
      {
        "id": 4,
        "text": "Fascia transversalis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The structure marked<span data-preserver-spaces=\"true\">&nbsp;is the <strong>deep inguinal ring,</strong> which is formed by a defect in <strong>fascia transversalis.</strong></span></p>\n<div class=\"page\" title=\"Page 1500\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The<strong> deep inguinal ring</strong> is an opening in the transversalis fascia present 1 cm above the inguinal ligament, midway between the anterior superior iliac spine and the pubic symphysis. An<strong> indirect inguinal hernia</strong> arises through the deep inguinal ring<strong> lateral to the inferior epigastric vessel.</strong></p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7ca41a26af8549fab42a0854ad94bddd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0f3143fe76054c1e890bc0d5083b3f37x1280x1123.JPEG"
    ]
  },
  {
    "text": "A 32 year old female who is a  known case of Crohn's disease underwent ileal resection for the presence of stricture. She became a strict vegan post surgery and several months later presents to the clinic with a history of a tingling sensation of hands. Which is the most likely reason for her symptom?",
    "choices": [
      {
        "id": 1,
        "text": "Folic acid deficiency"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Carpel tunnel syndrome"
      },
      {
        "id": 4,
        "text": "Intestinal obstruction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>After complete ileal and partial jejunal resection, the patient is likely to have <strong>vitamin B12 deficiency.</strong></p>\n<p><strong>Vitamin B12 is absorbed in the ileum</strong>. Vitamin B12 binds to intrinsic factor, a protein secreted by the parietal cells of the stomach, and the complex is absorbed across the ileal mucosa. Hence after ileal resection, there is impaired absorption of vitamin B12.</p>\n<p>In addition to this, a <strong>strict vegan diet</strong> also leads to <strong>vitamin B12 deficiency</strong> as meat and dairy products are avoided which are rich sources of vitamin B12.</p>\n<p><strong>B12 deficiency :</strong></p>\n<p>Clinical features of cyanocobalamin(Vit B12) deficiency (megaloblastic anemia) include:</p>\n<ul>\n<li>Anorexia, weight loss, diarrhea, or constipation</li>\n<li>Oral manifestations:\u00a0<strong>g</strong><strong>lossitis,</strong>\u00a0angular cheilosis</li>\n<li>Mild fever in more severely anaemic patients</li>\n<li><strong>Jaundice (unconjugated)</strong></li>\n<li>Reversible melanin\u00a0<strong>skin hyperpigmentation</strong></li>\n<li>Bruising (thrombocytopenia) and infections (low leucocyte count)</li>\n<li>Complications in pregnancy: recurrent fetal loss and neural tube defects</li>\n<li>Cardiovascular disease: cerebrovascular, peripheral vascular, and coronary heart disease with deep vein thrombosis</li>\n<li>Neurologic manifestations: Bilateral peripheral neuropathy or degeneration of the posterior and pyramidal tracts of the spinal cord <strong>(subacute combined degeneration)</strong>.\u00a0</li>\n<li>Psychiatric disturbances</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year old man who was a chronic alcoholic presented with confusion, ataxia, and diplopia. What is the treatment protocol?",
    "choices": [
      {
        "id": 1,
        "text": "Vitamin B1 injection followed by glucose infusion"
      },
      {
        "id": 2,
        "text": "Glucose infusion followed thiamine injection"
      },
      {
        "id": 3,
        "text": "Glucose infusion alone"
      },
      {
        "id": 4,
        "text": "Thiamine infusion alone"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical history is suggestive of <strong>Wernicke's&nbsp;encephalopathy.</strong></p>\n<p>The current standard of treatment for patients with symptoms of Wernicke's encephalopathy is to give<strong>&nbsp;thiamine 100 mg intravenously before administering glucose-containing&nbsp;IV fl</strong>uids.</p>\n<p>Thiamine deficiency&nbsp;leads to the following:</p>\n<p><strong>&nbsp; &nbsp; 1. Wernicke&rsquo;s encephalopathy:&nbsp;</strong>It is more commonly seen in alcoholics with chronic thiamine deficiency. It is characterized by :</p>\n<ul>\n<li>Global confusion</li>\n<li>Truncal ataxia</li>\n<li>Ophthalmoplegia</li>\n<li>Horizontal nystagmus&nbsp;</li>\n</ul>\n<p>&nbsp; &nbsp; <strong>2. Korsakoff psychosis:</strong>&nbsp;symptoms in addition to those of Wernicke's encephalopathy include:</p>\n<ul>\n<li>Memory loss</li>\n<li><strong>Confabulation</strong></li>\n</ul>\n<p>&nbsp; &nbsp; 3. <strong>Beriberi:&nbsp;</strong>It can present with sensorimotor peripheral neuropathy, and muscle weakness <strong>(dry beriberi)</strong> or tachycardia, cardiomegaly, high-output cardiac failure <strong>(wet beriberi).</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10-year-old male child presents with a history of easy bruisiability and hemarthrosis. Investigations revealed normal platelet count and bleeding time, normal PT, and prolonged PTT. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Von Willebrand disease"
      },
      {
        "id": 2,
        "text": "Hemophilia A"
      },
      {
        "id": 3,
        "text": "Bernard-Soulier syndrome"
      },
      {
        "id": 4,
        "text": "Glanzmann thrombasthenia"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The symptom of hemarthrosis and the investigations are suggestive of a coagulation disorder. Among the given options,&nbsp;<strong>hemophilia A </strong>is a coagulation disorder, while all the other conditions are platelet disorders.</p>\n<p>Bleeding into joints (hemarthrosis) and deep tissues is a feature of coagulation disorders, whereas platelet disorders usually present with mucocutaneous bleeding such as petechiae, purpura, epistaxis, or GI bleed. Prolonged PT/aPTT is a feature of coagulation disorders, while prolonged bleeding time is a feature of platelet disorders.</p>\n<p>In the given scenario, normal platelet count and bleeding time exclude platelet disorders. Normal PT indicates normal functioning of the extrinsic pathway of the coagulation cascade, and prolonged PTT indicates a defect in the intrinsic pathway.</p>\n<p>Hemophilia is an <strong>X-linked </strong>(recessive) coagulation disorder associated with <strong>mutations in&nbsp;factor VIII</strong>, affecting the&nbsp;<strong>intrinsic pathway</strong>.&nbsp;The patients present with <strong>easy bruising</strong>, significant <strong>hemorrhage following trauma</strong> and operative procedures, and&nbsp;<strong>hemarthroses</strong>, but&nbsp;no petechiae. The&nbsp;diagnosis is confirmed by carrying out factor VIII-specific assays. Infusions of recombinant factor VIII are used for treatment.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/063b99cd019049389f1b51dcaba83160x1280x2324.JPEG"
    ]
  },
  {
    "text": "A 16-year-old boy is admitted with fever, icterus, conjunctival suffusion and hematuria for 15 days. Which serological test should be done for diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Widal test"
      },
      {
        "id": 2,
        "text": "Microscopic agglutination test"
      },
      {
        "id": 3,
        "text": "Weil felix reaction"
      },
      {
        "id": 4,
        "text": "Paul Bunnell test"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Microscopic agglutination test</strong> is used for the diagnosis of <strong>Leptospirosis</strong>.</p>\n<p>A history of fever with liver(icterus) and kidney(hematuria) involvement should arouse suspicion for <strong>leptospirosis (Weil's disease)</strong>.</p>\n<p>Other Options</p>\n<p>Option A: <strong>Widal test</strong> is used to diagnose typhoid fever caused by Salmonella Typhi and Paratyphi. The clinical presentation of typhoid fever includes a stepwise increase in fever, abdominal pain, and constipation, which is different from the clinical scenario described.</p>\n<p>Option C: <strong>Weil-Felix reaction</strong> is a serological test used to diagnose rickettsial infections like typhus fever, which is caused by Rickettsia species. The clinical manifestations of typhus fever include fever, rash, and headache, which are not consistent with the clinical scenario described.</p>\n<p>Option D: <strong>Paul-Bunnell test, also known as the Monospot test,</strong> is used for the detection of heterophile antibodies in infectious mononucleosis, which is caused by the Epstein-Barr virus (EBV). The clinical features of infectious mononucleosis include fever, sore throat, and swollen lymph nodes, which are not consistent with the present case.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 53-year-old male with diabetes mellitus presented to the clinic. Which of the following anti-diabetic drugs causes glycosuria?",
    "choices": [
      {
        "id": 1,
        "text": "Glipizide"
      },
      {
        "id": 2,
        "text": "Empagliflozin"
      },
      {
        "id": 3,
        "text": "Exenatide"
      },
      {
        "id": 4,
        "text": "Acarbose"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Empagliflozin </strong>acts by <strong>inhibiting sodium-glucose co-transporter 2 (SGLT2)</strong> transporter, which is present on the proximal segment of the renal tubule and responsible for the reabsorption of 80-90% of filtered glucose. It inhibits glucose reabsorption resulting in <strong>glycosuria</strong> and a <strong>decrease</strong> in <strong>blood glucose </strong>level. It is effective<strong> orally.</strong></p>\n<p>Additionally, the increased urinary glucose excretion leads to osmotic diuresis, resulting in the removal of excess fluid from the body. Common side effects of empagliflozin include genital mycotic infections, and volume depletion-related adverse events such as hypotension and dizziness.</p>\n<p>Additionally, the notable side effects include<strong> urinary tract infections </strong>and genital mycotic infections due to the high glucose content of the urine and also<strong> increases the risk of fractures</strong>.</p>\n<p>Other SGLT2 inhibitors include canagliflozin and ertugliflozin.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>(a) Glipizide: </strong>Glipizide belongs to the sulfonylurea class of antidiabetic drugs. It works by stimulating insulin release from the pancreas, thereby lowering blood sugar levels. However, glipizide does not directly affect the excretion of glucose in the urine or fluid removal from the body. Common side effects of glipizide include hypoglycemia (low blood sugar), weight gain, and gastrointestinal disturbances.</p>\n<p><strong>(c) Exenatide: </strong>Exenatide is a glucagon-like peptide-1 (GLP-1) receptor agonist. It works by stimulating insulin secretion, inhibiting glucagon release, and slowing gastric emptying, leading to improved glycemic control. Exenatide does not directly affect glucose excretion in the urine or fluid removal from the body. Common side effects of exenatide include nausea, vomiting, diarrhea, and injection site reactions.</p>\n<p><strong>(d) Acarbose: </strong>Acarbose is an alpha-glucosidase inhibitor that delays the digestion and absorption of carbohydrates in the intestines. It does not directly affect glucose excretion in the urine or fluid removal from the body. Common side effects of acarbose include gastrointestinal disturbances such as flatulence, diarrhea, and abdominal discomfort.</p>\n<p>Conclusion: The correct answer is (b) Empagliflozin. It promotes the excretion of glucose in the urine (glycosuria) and facilitates fluid removal from the body through osmotic diuresis. This is achieved by inhibiting the SGLT2 transporter in the kidneys.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The image shown below represents which type of mechanical asphyxia?",
    "choices": [
      {
        "id": 1,
        "text": "Mugging"
      },
      {
        "id": 2,
        "text": "Garroting"
      },
      {
        "id": 3,
        "text": "Burking"
      },
      {
        "id": 4,
        "text": "Bansdola"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The type of strangulation shown in the image is <strong>Burking.</strong>&nbsp;</p>\n<p><strong>Burking</strong> is a type of homicidal asphyxial death comprising of <strong>smothering and traumatic asphyxia</strong>. In burking, the assaulter throws the victim to the ground and kneels or sits on the chest of the victim preventing chest movements. He/she then covers the nose and mouth of the victim with his/her hands.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A:&nbsp;<strong>Mugging</strong> is a type of strangulation caused by <strong>holding the neck of the victim&nbsp;in the crook of the elbow</strong>.&nbsp; Pressure is then exerted either on the front of the larynx or at one or both sides by the forearm and upper arm. In mugging, the attack is&nbsp;usually made <strong>from behind</strong>.</p>\n<p>The below image show strangulation by mugging.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a0638e09342244a1b3056ca4e018a8c2.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4e7d53599a8b48168b62ba588dc8d9dex1280x1713.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/831dc072d10745629c267bfa6499a5f6x890x746.PNG"
    ]
  },
  {
    "text": "A 12-month-old child was brought to the hospital with complaints of fever and difficulty in breathing. On examination, the child had biphasic stridor. The lesion in which of the following level will produce this type of stridor?",
    "choices": [
      {
        "id": 1,
        "text": "D"
      },
      {
        "id": 2,
        "text": "A"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "B"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Obstructive lesions at the level of<strong> glottis, subglottis (B), and cervical trachea&nbsp;</strong>will cause <strong>Biphasic</strong><strong>&nbsp;stridor</strong>.</p>\n<p>Stridor is a noisy respiration produced by turbulent airflow&nbsp;through the narrowed air passages. It may be heard during&nbsp;inspiration, expiration or both.</p>\n<ul>\n<li>Inspiratory stridor is often produced in obstructive lesions of supraglottis or pharynx, e.g. laryngomalacia or retropharyngeal abscess.</li>\n<li><strong>Biphasic stridor </strong>is seen in lesions of glottis, subglottis, and cervical trachea, e.g. laryngeal papillomas, vocal cord paralysis, and subglottic stenosis.</li>\n<li>Expiratory stridor is produced in lesions of thoracic trachea,&nbsp;primary and secondary bronchi, e.g. bronchial&nbsp;foreign body, and tracheal stenosis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7477f8ccd5524b71a91299fb7d866c77.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74b4c98abb59427c8564c3236d75b224x1280x1826.JPEG"
    ]
  },
  {
    "text": "A 21-year-old man presented with the following lesion in his eye. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bitot's spots"
      },
      {
        "id": 2,
        "text": "Pterygium"
      },
      {
        "id": 3,
        "text": "Phlyctenular conjunctivitis"
      },
      {
        "id": 4,
        "text": "Membranous conjunctivitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image depicts <strong>Bitot's spot</strong>,<strong>&nbsp;</strong>a pathognomonic feature of <strong>xerophthalmia</strong>. Hence, the likely diagnosis in this patient presenting with the above lesion is<strong> xerophthalmia.</strong></p>\n<p>Bitot's spot is a t<strong>riangular, silvery-white, foamy patch</strong> on the bulbar conjunctiva which is usually bilateral. The most common site is&nbsp;<strong>t</strong><strong>emporal.</strong></p>\n<p>Ocular manifestations&nbsp;of <strong>vitamin A deficiency</strong> include loss of sensitivity to green light (earliest to appear), nyctalopia (night blindness), and <strong>xerophthalmia</strong>.</p>\n<p><strong>Xerophthalmia</strong>&nbsp;includes conjunctival xerosis (dryness) with<strong> Bitot&rsquo;s spots</strong> (white patches of keratinized epithelium appearing on the sclera), corneal ulcers, and<strong>&nbsp;keratomalacia</strong>&nbsp;(softening of the cornea) that leads to corneal scarring and ultimately,&nbsp;<strong>blindness.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d41209b4ea284a9286fd85ce1b43ad1f.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is incorrect about systematic reviews?",
    "choices": [
      {
        "id": 1,
        "text": "Meta-analysis is always performed."
      },
      {
        "id": 2,
        "text": "Search for literature is compulsory."
      },
      {
        "id": 3,
        "text": "Critical appraisal is criteria based."
      },
      {
        "id": 4,
        "text": "Research question is always focused."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Meta-analysis is not always performed in systematic reviews.\u00a0</p>\n<p><strong>Steps of a Systematic Review:</strong></p>\n<ul>\n<li>A <strong>systematic review</strong> is the process of <strong>locating and synthesizing</strong> the research on a <strong>particular question</strong> using organized, transparent, and replicable procedures.</li>\n<li>It ranks <strong>high</strong> in the hierarchy of <strong>evidence</strong> in medicine.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e89ff57be7cc4eeb81732696a8307b88x1280x2148.JPEG"
    ]
  },
  {
    "text": "An auxiliary nurse midwife conducting a vaccination camp received 2 vaccine vials. One is a pentavalent vaccine and the other is an MR vaccine, which she opened on the day of the camp. She intends to reuse these vials by storing them in proper condition, at her next vaccination camp to be conducted in 2 weeks. What would you advise her regarding the re-utilization of these vials?",
    "choices": [
      {
        "id": 1,
        "text": "Use MR vaccine and discard pentavalent vaccine"
      },
      {
        "id": 2,
        "text": "Use pentavalent vaccine and discard MR vaccine"
      },
      {
        "id": 3,
        "text": "Use both"
      },
      {
        "id": 4,
        "text": "Discard both"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>She can <strong>use </strong>the <strong>pentavalent vaccine </strong>and<strong> discard </strong>the <strong>MR vaccine.\u00a0\u00a0</strong>According to the <strong>open vial policy</strong>, the<strong>\u00a0pentavalent</strong> vaccine can be<strong> reused</strong>, whereas MR can not be reused.\u00a0</p>\n<div class=\"panel-body ng-scope\">\n<p>Open vial policy allows for the reuse of partially used\u00a0<strong>multidose vials</strong>\u00a0of applicable vaccines under the Universal Immunization Programme in subsequent sessions for up to\u00a0<strong>4\u00a0weeks</strong>\u00a0subject to <strong>certain conditions</strong> and thereby reducing vaccine wastage.</p>\n<p>It is applicable only for\u00a0<strong>DPT, TT, hepatitis B vaccine, OPV and liquid pentavalent vaccine.</strong></p>\n<p>It is not applicable for\u00a0<strong>BCG, measles, rotavirus vaccines and JE vaccines.</strong></p>\n<p>Vaccine vials opened in session-site can be use in more than one session up to four weeks if\u00a0<strong>expiry date has not passed, if storage and transport was appropriate, no contamination has occurred in vial septum, asepsis in withdrawing was practiced and if vaccine vial monitor has not reached discard point.</strong></p>\n<p>Open vials should not be submerged in water.</p>\n<p>Ensure all opened vials have recorded\u00a0<strong>date and time of opening</strong>.</p>\n<p>At the end of a session, all vaccines should be returned to the cold chain point and segregated as re-usable and non-reusable.</p>\n<p>All open vials of BCG, measles and JE must be destroyed after 48 hours or before next session, whichever is earlier.</p>\n<p>In case of any\u00a0<strong>adverse events following immunization</strong>, all open vials should not be discarded until investigation is complete.</p>\n<p>All vials must be transported in zipper bags in the vaccine carrier and recorded in stock register.</p>\n<p>Ice packs used should be well sealed.</p>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 30-year-old male presents to the emergency department with a crush injury on his hand. He says that he received his last dose of TT vaccination at the age of 23. What is the treatment of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Wound care only"
      },
      {
        "id": 2,
        "text": "Wound care with single dose tetanus toxoid"
      },
      {
        "id": 3,
        "text": "Wound care with full course of TT vaccine"
      },
      {
        "id": 4,
        "text": "Wound care with tetanus Ig and TT vaccine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>W</strong><strong>ound</strong> <strong>care</strong> with a\u00a0<strong>single dose\u00a0</strong>of<strong> tetanus toxoid</strong> is given as the patient is category B, with the\u00a0<strong>last dose</strong><strong>\u00a0</strong>received\u00a0more than<strong>\u00a05 years ago</strong> but <strong>less </strong>than<strong> 10 years.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 49-year-old man presents with flu-like symptoms and a palmoplantar rash as seen below. On examination, he has epitrochlear lymphadenopathy. Which of the following is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Primary syphilis"
      },
      {
        "id": 2,
        "text": "Secondary syphilis"
      },
      {
        "id": 3,
        "text": "Endemic disease"
      },
      {
        "id": 4,
        "text": "Steven Johnson syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario of maculopapular rash with flu-like symptoms and epitrochlear lymphadenopathy points to <strong>secondary syphilis</strong>.</p>\n<ul>\n<li>Secondary syphilis occurs&nbsp;<strong>within 6 weeks to 8 weeks of onset of primary chancre</strong>.</li>\n<li>It is characterized by the following:\n<ul>\n<li>Onset of&nbsp;<strong>systemic manifestations</strong>&nbsp;includes symptoms such as malaise, headache, loss of appetite, sore throat</li>\n<li>Generalized&nbsp;<strong>symmetric, asymptomatic maculopapular rash on the palms and soles</strong>&nbsp;of the feet</li>\n<li><strong>Generalized adenopathy</strong>&nbsp;in 50% cases</li>\n<li><strong>Condyloma lata</strong>&nbsp;are the classic findings; these are&nbsp;<strong>highly contagious exophytic broad excrescences that ulcer&shy;ate</strong>. These are commonly seen on the vulva, perianal area and upper thighs.</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0b87f06b32a64b72ae30839a6d247c17.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d385d191445d49d6b31c035899620be4x559x788.JPEG"
    ]
  },
  {
    "text": "The ECG wave as shown in the image below is commonly seen in",
    "choices": [
      {
        "id": 1,
        "text": "Myocardial infarction"
      },
      {
        "id": 2,
        "text": "Hyperkalemia"
      },
      {
        "id": 3,
        "text": "Digoxin treatment"
      },
      {
        "id": 4,
        "text": "Hypokalemia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above ECG wave characteristically depicts <strong>Digoxin</strong> <strong>effect</strong>.</p>\n<p><strong>Digoxin effect</strong> refers to the presence on the ECG of:</p>\n<ul>\n<li><strong>Downsloping</strong> <strong>ST depression</strong> with a characteristic \u201c<strong>Salvador Dali sagging</strong>\u201d or \u201c<strong>Hockey Stick</strong>\u201d appearance.</li>\n<li>Flattened, inverted, or biphasic T waves.</li>\n<li>Shortened QT interval.</li>\n</ul>\n<p><strong>Additional ECG Features:</strong></p>\n<ul>\n<li>Mild PR interval prolongation of up to 240ms (due to increased vagal tone).</li>\n<li>Prominent <strong>U waves</strong>.</li>\n<li>Peaking of the terminal portion of the <strong>T waves</strong>.</li>\n<li><strong>J point depression</strong> (usually in leads with tall R waves).</li>\n</ul>\n<p><strong>QRS complex / ST segment changes:</strong></p>\n<ul>\n<li>The morphology of the QRS complex / ST segment is variously described as either \u201cslurred\u201d, \u201csagging\u201d or \u201cscooped\u201d and resembling either a \u201creverse tick\u201d, \u201chockey stick\u201d or \u201cSalvador Dali\u2019s moustache\u201d.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2a1acd6e9d4e4e7582a7802848589e94.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 38-year-old woman presented with chest pain that was unrelated to physical exertion. ECG showed ST-segment elevation. Intracoronary acetylcholine provocation testing revealed a transient spasm of the right coronary artery. What is the drug of choice in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Dopamine"
      },
      {
        "id": 2,
        "text": "Diltiazem"
      },
      {
        "id": 3,
        "text": "Propranolol"
      },
      {
        "id": 4,
        "text": "Digoxin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above scenario in which rest pain is associated with ST-segment elevation and transient coronary vasospasm is suggestive of&nbsp;<strong>Prinzmetal's angina.</strong> The drug of choice&nbsp;is a <strong>calcium channel blocker</strong>.</p>\n<p>Prinzmetal variant angina<strong>&nbsp;</strong>(PVA) is a clinical syndrome in which chest pain occurs <strong>without</strong> the usual <strong>precipitating</strong> factors. It usually results from coronary vasoconstriction (<strong>vasospasm</strong>) and tends to involve the right coronary artery.</p>\n<p>It is a <strong>supply</strong> <strong>ischemia</strong> and usually causes transmural ischemia (subendocardial in classic angina pectoris).</p>\n<p>It often affects women under 50 years of age. It characteristically occurs in the early morning, awakening patients from sleep, and may be associated with arrhythmias or conduction defects.</p>\n<p>The clinical diagnosis of PVA is made by the detection of transient <strong>ST-segment elevation</strong> with rest pain. Coronary angiography demonstrates transient <strong>coronary spasm</strong> which is the diagnostic hallmark of PVA.</p>\n<p>Nitrates and calcium channel blockers both can be used in alleviating symptoms in Prinzmetal's angina. However due to the development of nitrate tolerance in some individuals, they are less preferred and calcium channel blockers such as verapamil, diltiazem are used as first-line agents.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Following feature (Image A) is characteristic of a certain disease. On investigation, the lady was found to have the following immunofluorescence pattern (Image B). Positivity of which of the given antibody would predict a higher risk of interstitial lung disease in her?",
    "choices": [
      {
        "id": 1,
        "text": "Anti U3-RNP"
      },
      {
        "id": 2,
        "text": "Anti centromere"
      },
      {
        "id": 3,
        "text": "Anti-scl-70"
      },
      {
        "id": 4,
        "text": "Anti U1-RNP"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Image A is a classical <strong>fish mouth (microstomia) appearance</strong> seen in <strong>systemic sclerosis/scleroderma.</strong> Image B shows the&nbsp;<strong>nucleolar pattern</strong>&nbsp;(some spots of fluorescence within the nucleus and it represents antibodies to RNA). The pattern is most often seen in&nbsp;systemic sclerosis.&nbsp;<strong>Anti-scl-70</strong> positivity in this disease is useful in predicting those at higher risk for interstitial lung disease.</p>\n<p>Scleroderma or Systemic Sclerosis (SSc) is an autoimmune rheumatic disease in which there is a&nbsp;4:1 female predominance.</p>\n<p>A wide spectrum of clinical features are seen in Scleroderma:</p>\n<ul>\n<li>Severe pruritus</li>\n<li>Initially, scleroderma patients experience puffiness and&nbsp;non-pitting edema&nbsp;of&nbsp;fingers</li>\n<li>The skin later becomes indurated, thickened, and fixed to underlying structures resulting in&nbsp;sclerodactyly</li>\n<li>Vasospasm and&nbsp;Digital ulceration</li>\n<li>Around&nbsp;90% of patients&nbsp;suffering from scleroderma, have&nbsp;dysphagia, and&nbsp;GERD&nbsp;at the level of esophagus</li>\n<li>Mask like facies&nbsp;is seen due to the&nbsp;waxy nature of skin&nbsp;and&nbsp;lack of wrinkles,&nbsp;expressionless facies, mat\u2010like telangiectases, microstomia, perioral furrowing and beak\u2010like nose.The intense sclerosis of organs and primarily the fibrosis of the skin has devastating effects on the affected patients .</li>\n<li>Anti-topoisomerase I&nbsp;<strong>(Scl-70)</strong> and anti RNA polymerase III are seen in Diffuse Cutaneous Systemic sclerosis&nbsp; which can have pulmonary manifestation as interstial lung disease.</li>\n</ul>\n<p>Other options:</p>\n<ul>\n<li><strong>Anti centromere</strong>&nbsp;antibody is most specific for&nbsp;<strong>CREST</strong>&nbsp;syndrome.</li>\n<li><strong>Anti U1-RNP</strong>&nbsp;is seen in&nbsp;<strong>mixed connective tissue disease</strong>.</li>\n<li><strong>Anti U3-RNP&nbsp;</strong>(Antifibrillarin) autoantibodies are associated with patients of Afro-Caribbean origin and can identify patients with SSc who are younger at disease onset and display a higher prevalence of myositis.\n<div class=\"aux\">&nbsp;</div>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/204907aca88341d59718467cf9c6d8bc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young patient is brought to the emergency room following a motorcycle collision. On examination, the patient is drowsy and has decreased blood pressure due to bleeding from multiple injuries. 1 unit of packed RBCs has been obtained from the blood bank. What is the correct procedure for blood transfusion?",
    "choices": [
      {
        "id": 1,
        "text": "The blood should be brought to room temperature before the transfusion"
      },
      {
        "id": 2,
        "text": "Transfusion should be started within one hour of removal from the refrigerator"
      },
      {
        "id": 3,
        "text": "Transfusion of PRBC should be completed within 4 hours"
      },
      {
        "id": 4,
        "text": "The rate of transfusion of PRBC is 50mL per hour"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The transfusion of packed RBCs (PRBC) should be completed within a maximum period of <strong>4 hours</strong> after the removal from the blood fridge.&nbsp;</p>\n<p>There is an increased risk of <strong>bacterial proliferation</strong> and loss of the function of blood components after they are removed from the storage temperatures. Hence, the transfusion should be <strong>started within 30 minutes</strong> of receiving the components from the blood bank.&nbsp;The packed RBCs should be infused at a rate of <strong>100-150mL/hour.</strong> Warming of blood is not needed when the transfusion is at normal rates. The transfusion should be completed within a maximum period of 4 hours.</p>\n<table style=\"height: 93px;\" width=\"671\">\n<tbody>\n<tr>\n<td style=\"width: 216px; text-align: center;\" colspan=\"3\">Duration times for transfusion</td>\n</tr>\n<tr>\n<td style=\"width: 216px;\"><strong>Blood products</strong></td>\n<td style=\"width: 216px;\"><strong>&nbsp;Start transfusion</strong></td>\n<td style=\"width: 217px;\"><strong>&nbsp;Complete transfusion</strong></td>\n</tr>\n<tr>\n<td style=\"width: 216px;\">Whole blood / PRBC</td>\n<td style=\"width: 216px;\">Within 30 minutes of removing from refrigerator</td>\n<td style=\"width: 217px;\">\n<p>&le; 4 hours&nbsp;</p>\n<p>Discard unit if this period is exceeded</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 216px;\">Platelet concentrate</td>\n<td style=\"width: 216px;\">&nbsp;Immediately</td>\n<td style=\"width: 217px;\">Within 30 minutes</td>\n</tr>\n<tr>\n<td style=\"width: 216px;\">Fresh frozen plasma</td>\n<td style=\"width: 216px;\">As soon as possible</td>\n<td style=\"width: 217px;\">Within 30 minutes</td>\n</tr>\n<tr>\n<td style=\"width: 216px;\">Cryoprecipitate</td>\n<td style=\"width: 216px;\">As soon as possible</td>\n<td style=\"width: 217px;\">Within 30 minutes</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of flap.",
    "choices": [
      {
        "id": 1,
        "text": "Axial flap"
      },
      {
        "id": 2,
        "text": "Islanded flap"
      },
      {
        "id": 3,
        "text": "Free flap"
      },
      {
        "id": 4,
        "text": "Random flap"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The picture shows a radial forearm free flap. In a free flap the <strong>blood supply is isolated</strong>, disconnected and then reconnected using micosurgery at the new site. Other eg: DIEP (Deep inferior epigastric perforators) flap, free fibular flap</p>\n<ul>\n<li>A <strong>random flap</strong> include three sides of a rectangle, bearing no specific relationship to where the blood supply enters.Eg:V-Y plasty, Z plasty, Limberg or rhomboid flap.</li>\n<li><strong>Axial flap</strong> is much longer and is based on known blood vessels. Eg: Latissmus dorsi flap,TRAM (Transverse rectus abdominis myocutaneous) flap</li>\n<li><strong>Islanded flap</strong> are those in which the axial blood supply is swung round on a stalk.</li>\n</ul>\n<p><strong>Note:</strong></p>\n<div class=\"page\" title=\"Page 1968\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Flap defines the tongue of tissue; pedicle is used to describe the base or stem with the vascular supply.</p>\n<p>Skin-bearing flaps are classified according to <strong>three basic characteristics</strong>&mdash;</p>\n<div class=\"page\" title=\"Page 1968\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Composition:&nbsp;</strong>refers to the tissue contained within the flap, such as cutaneous, musculocutaneous, fasciocutaneous etc</li>\n<li><strong>Method of movement</strong>:\n<ul>\n<li>Local transfer, eg. advancement or rotation flaps</li>\n<li>Distant transfer, eg. pedicle flaps from the abdomen to the perineum or micro-vascular free flaps.</li>\n</ul>\n</li>\n<li><strong>Blood supply</strong>\n<ul>\n<li>Musculocutaneous arteries travel perpendicularly through muscle to the overlying skin.</li>\n<li>Septocutaneous arteries travel with intermuscular fascial septa to supply the overlying skin.&nbsp;</li>\n</ul>\n</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ed436a50b684e9eb7bf926a2e28bf75.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/38a465d7aeef48e38e7ebd9b07c4908ex1280x4958.JPEG"
    ]
  },
  {
    "text": "What is the maneuver being performed in the given image?",
    "choices": [
      {
        "id": 1,
        "text": "Head tilt, chin lift"
      },
      {
        "id": 2,
        "text": "Jaw thrust"
      },
      {
        "id": 3,
        "text": "Head extension"
      },
      {
        "id": 4,
        "text": "In line manual stabilisation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The maneuver being performed in the given image is that of <strong>head-tilt chin-lift. </strong>It is an<strong>&nbsp;</strong>important technique in emergency airway management to open up the airway.</p>\n<p>Basic life support involves early recognition and management of emergencies such as&nbsp;heart attack, stroke, and foreign body airway obstruction. The sequence of BLS is&nbsp;<strong>circulation</strong> (chest compression), <strong>airway</strong>, and then <strong>breathing.</strong></p>\n<p>The airway is usually obstructed by posterior displacement of the tongue or epiglottis. One hand (palm) is placed on the patient&rsquo;s forehead applying pressure to tilt the head back. Simultaneously, the chin is lifted with the forefinger and index finger of the opposite hand. This causes cervical flexion with an atlantooccipital extension (sniffing position). This lifts the tongue from the back of the throat.</p>\n<p>Head-tilt chin-lift<strong>&nbsp;</strong>should not be performed in a patient with suspected cervical injury.</p>\n<p>Other options:&nbsp;</p>\n<p>Option B: <strong>Jaw thrust</strong>-&nbsp;Both hands of the clinician are placed on either side of the patient&rsquo;s head and the angles of the jaw are grasped and lifted. It can be performed in a patient with cervical injury but caution must be followed to not hyperextend the neck.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/58a866b2e5d8432d988fdf5bd1369bf0.GIF"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7339e1fa13354a7aafc600098c9b06afx1024x768.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51372811b83143fea81e919fcf94d2c0x394x193.JPEG"
    ]
  },
  {
    "text": "A patient after a motor vehicle accident develops breathing difficulty. On examination, there are decreased breath sounds on the right side, and the trachea is shifted to the left. Heart sounds are normal. There is a dull note on percussion. The chest X-ray is shown below. What will be the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Needle thoracostomy"
      },
      {
        "id": 2,
        "text": "ICD placement"
      },
      {
        "id": 3,
        "text": "Open thoracotomy"
      },
      {
        "id": 4,
        "text": "Pericardiocentesis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Decreased breath</strong> sounds, <strong>tracheal deviation</strong> to the opposite side, <strong>dull note</strong> on percussion, and the chest X-ray showing blunting of the costophrenic angle and <strong>opacification</strong> is suggestive of <strong>massive</strong> <strong>hemothorax</strong>. The next step of management that can be done for this patient is\u00a0<strong>intercostal drainage tube</strong>(ICD) <strong>placement</strong>.</p>\n<p><strong>Massive hemothorax</strong> occurs when <strong>more than 1500 mL of blood</strong>, equivalent to one-third or more of the patient's blood volume, rapidly accumulates in the chest cavity. This condition is typically caused by a <strong>penetrating injury</strong> that damages major blood vessels, although it can also be the result of blunt trauma.</p>\n<p>In patients with massive hemothorax, the <strong>neck veins</strong> may appear <strong>flat</strong> due to severe hypovolemia, or they may be distended if there is a concurrent tension pneumothorax. If a patient is in shock and exhibits an <strong>absence of breath sounds</strong> or <strong>dullness upon percussion</strong> on one side of the chest, it suggests the presence of a massive hemothorax.</p>\n<p>The <strong>initial management</strong> of massive hemothorax involves simultaneous resuscitation to <strong>restore blood volume</strong> and <strong>decompression</strong> of the chest cavity. This is achieved by establishing large-diameter intravenous lines, administering crystalloid fluids, and initiating transfusion of blood at the earliest opportunity. A <strong>single chest tube</strong> with a diameter of 28-32 French is inserted, typically at the <strong>fifth intercostal space</strong>, just <strong>anterior</strong> to the <strong>midaxillary line</strong>. Volume restoration is rapidly continued while the chest cavity is decompressed.</p>\n<p>The <strong>immediate return</strong> of <strong>1500 mL</strong> or <strong>greater</strong> volume of blood typically signifies the urgent requirement for thoracotomy. Patients who initially show an output of less than 1500 mL of fluid but <strong>continue to bleed</strong> may also necessitate <strong>thoracotomy.</strong></p>\n<div class=\"page\" title=\"Page 121\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 121\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 122\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Needle thoracostomy</strong> and <strong>open thoracostomy</strong> are done in cases of <strong>tension pneumothorax</strong>. Here, the patients present with <strong>distended neck veins</strong>, <strong>decreased breath</strong> sounds, <strong>tracheal deviation</strong> to the opposite side, and <strong>hyper-resonant note</strong>\u00a0on percussion.\u00a0</p>\n<p><strong>Pericardiocentesis</strong> is done in cases of<strong> cardiac tamponade</strong>. Here, the patients present with <strong>distended neck</strong> <strong>veins</strong>, normal breath sounds, and <strong>muffled heart sounds</strong>. There is <strong>no mediastinal shift</strong> here.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ff101a6937f64dafb828e24fdc2f3dd5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old female presented with a history of vaginal discharge without itching. On examination, the discharge was milky, foul-smelling, nonviscous, and adherent to the vaginal wall. She is not active sexually. On further testing, it was found that the discharge has very few lactobacilli and there was a presence of clue cells. What is the causative organism for the above condition _______",
    "choices": [
      {
        "id": 1,
        "text": "Viral"
      },
      {
        "id": 2,
        "text": "Fungal"
      },
      {
        "id": 3,
        "text": "Bacterial"
      },
      {
        "id": 4,
        "text": "Protozoan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above case scenario is <strong>Bacterial Vaginosis</strong>.</p>\n<p>Bacterial vaginosis is termed vaginosis rather than vaginitis because it is associated with alteration in the normal vaginal flora rather than due to any specific infection.</p>\n<p>It is not sexually transmitted and has a variable incubation period. About 50% of women are asymptomatic carriers of infection.</p>\n<p>The presence of clue cells is one of the 4 criteria described in Amsel&rsquo;s criteria.</p>\n<p><strong>Amsel&rsquo;s criteria</strong> are used in the diagnosis of bacterial vaginosis which includes:</p>\n<ul>\n<li>Homogenous vaginal discharge</li>\n</ul>\n<ul>\n<li>Vaginal pH &gt; 4.5</li>\n</ul>\n<ul>\n<li>Amine like odor on adding KOH (Whiff test positive)</li>\n</ul>\n<ul>\n<li>Clue cells (&gt;20% of cells)</li>\n</ul>\n<p><strong>At</strong> <strong>least three</strong>&nbsp;of the four criteria should be present to confirm the diagnosis.</p>\n<p>On microscopy, there is <strong>no</strong> abundance of polymorphs in a case of bacterial vaginosis as it is just an alteration of flora and not an inflammation.</p>\n<ul>\n<li>The diagnosis is based on wet smear and culture.</li>\n<li>The smear reveals clean background with <strong>few inflammatory cells and other organ&shy;isms</strong>, but <strong>scanty lactobacilli</strong>. Many epithelial cells present a granular cytoplasm caused by small gram-negative bacilli adhering on their surface, the so-called <strong>clue cells</strong>. Gram stain is 90% sensitive.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A primigravida at 32 weeks of gestation was admitted for management of preterm labour. Which of the following tocolytics would be preferred for this?",
    "choices": [
      {
        "id": 1,
        "text": "Nifedipine"
      },
      {
        "id": 2,
        "text": "Glyceryl trinitrate"
      },
      {
        "id": 3,
        "text": "Ritodrine"
      },
      {
        "id": 4,
        "text": "Magnesium sulphate"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nifedipine</strong> is the <strong>preferred</strong> tocolytic as it has <strong>minimum</strong> maternal <strong>side effects</strong>.</p>\n<p class=\"p1\">According to ACOG guidelines, the use of <strong>tocolytics</strong> in preterm labour does not prolong gestation but may <strong>delay delivery upto 48 hours</strong>. Hence, short-term therapy with tocolytics is given for 1-3 days to delay labour for the action of corticosteroid therapy or to transfer the patient to a tertiary centre (with NICU).&nbsp;</p>\n<p class=\"p1\"><strong>Tocolytics used in preterm labour and their side effects:</strong></p>\n<table style=\"height: 240px;\" width=\"950\">\n<tbody>\n<tr>\n<td style=\"width: 309.34375px;\">Tocolytics</td>\n<td style=\"width: 309.34375px;\">Maternal side effects</td>\n<td style=\"width: 309.34375px;\">Fetal/ neonatal side effects</td>\n</tr>\n<tr>\n<td style=\"width: 309.34375px;\">\n<p>Beta-adrenergic agonists:</p>\n<ul>\n<li>Ritodrine</li>\n<li>Terbutaline</li>\n<li>Isoxsuprine</li>\n</ul>\n</td>\n<td style=\"width: 309.34375px;\">\n<p>Headache, palpitations, tachycardia, hypotension, pulmonary edema, cardiac failure, ARDS</p>\n</td>\n<td style=\"width: 309.34375px;\">\n<p>Fetal heart failure, intrauterine death</p>\n<p>Neonatal hypoglycemia, intraventricular haemorrhage</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 309.34375px;\">\n<p>Calcium channel blockers:</p>\n<ul>\n<li>Nifedipine</li>\n<li>Nicardipine</li>\n<li>Verapamil</li>\n</ul>\n</td>\n<td style=\"width: 309.34375px;\">Hypotension, headache, flushing, nausea</td>\n<td style=\"width: 309.34375px;\">-</td>\n</tr>\n<tr>\n<td style=\"width: 309.34375px;\">\n<p>Oxytocin antagonists:</p>\n<ul>\n<li>Atosiban</li>\n</ul>\n<p>(not approved for use in India)</p>\n</td>\n<td style=\"width: 309.34375px;\">Nausea, vomiting, chest pain</td>\n<td style=\"width: 309.34375px;\">-</td>\n</tr>\n<tr>\n<td style=\"width: 309.34375px;\">Magnesium sulphate</td>\n<td style=\"width: 309.34375px;\">Flushing, perspiration, headache, muscle weakness, respiratory paralysis</td>\n<td style=\"width: 309.34375px;\">Neonatal cardiac arrest, lethargy, hypotonia, respiratory depression</td>\n</tr>\n<tr>\n<td style=\"width: 309.34375px;\">\n<p>COX inhibitors:</p>\n<ul>\n<li>Indomethacin</li>\n<li>Sulindac</li>\n</ul>\n</td>\n<td style=\"width: 309.34375px;\">Heartburn, asthma, GI bleeding, thrombocytopenia, renal injury, platelet dysfunction, oligohydramnios</td>\n<td style=\"width: 309.34375px;\">Constriction of ductus arteriosus, pulmonary hypertension, intrauterine growth restriction</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old woman delivered a healthy baby at 38 weeks of gestation. Twenty minutes later, the mother developed severe shortness of breath and appeared cyanotic. Her ECG and chest X-ray showed no abnormalities. Despite resuscitation, she died after a few hours. Her lab reports revealed the following findings. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Eclampsia"
      },
      {
        "id": 2,
        "text": "Tension pneumothorax"
      },
      {
        "id": 3,
        "text": "Bacterial sepsis"
      },
      {
        "id": 4,
        "text": "Amniotic fluid embolism"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most probable diagnosis is <strong>amniotic fluid embolism</strong>. The given lab evaluation points to <strong>disseminated</strong> <strong>intravascular</strong> <strong>coagulation (DIC).&nbsp;</strong></p>\n<p>Amniotic fluid embolism presents with a classic triad of&nbsp;<strong>hemodynamic</strong>&nbsp;and&nbsp;<strong>respiratory compromise</strong>, along with&nbsp;<strong>DIC</strong>. Usually, it presents during the&nbsp;<strong>late stages</strong>&nbsp;of&nbsp;<strong>labour</strong>&nbsp;or&nbsp;<strong>immediate postpartum (peripartum period)</strong>. Gasping for air,&nbsp;<strong>seizures</strong>, and cardiorespiratory arrest are other features. Other causes for a similar presentation such as myocardial infarction, pulmonary embolism, and anaphylactic shock needs to be ruled out.&nbsp;</p>\n<div class=\"page\" title=\"Page 1\">\n<p>According to the American Society for Maternal-Fetal Medicine, the diagnostic criteria for amniotic fluid embolism include:</p>\n<ul>\n<li>Sudden onset cardiorespiratory arrest, or both hypotension and respiratory compromise</li>\n<li><strong>Overt DIC</strong></li>\n<li>Onset during labour or&nbsp;<strong>within 30 minutes</strong>&nbsp;of delivery of the placenta</li>\n<li><strong>No fever</strong>&nbsp;(&ge;38&deg;C)</li>\n</ul>\n<p>The currently accepted mechanism is the entry of<strong>&nbsp;fetal material</strong>&nbsp;into the&nbsp;<strong>maternal circulation</strong>&nbsp;which leads to the activation of proinflammatory mediator systems. This results in pulmonary vasoconstriction and hypertension. The tissue factor present in fetal material also activates&nbsp;<strong>factor VII</strong>&nbsp;resulting in DIC.</p>\n<p><strong>Risk factors</strong>&nbsp;include&nbsp;rapid labour,&nbsp;meconium-stained liquor,<strong>&nbsp;cesarean delivery,</strong>&nbsp;placenta previa, eclampsia,&nbsp;<strong>placental abruption</strong>, polyhydramnios, uterine tears, post-term pregnancy, and advanced maternal age.</p>\n<p>The condition can be fatal and management includes&nbsp;<strong>cardiopulmonary resuscitation</strong>&nbsp;and advanced cardiac life support.</p>\n<p><strong>Autopsy</strong>&nbsp;<strong>findings</strong>&nbsp;as shown in the image below, include the presence of&nbsp;<strong>squamous cells</strong>&nbsp;shed from the fetal skin, lanugo hair, fat from vernix caseosa, and mucin derived from the fetal respiratory or gastrointestinal tract in the<strong>&nbsp;maternal pulmonary microvasculature.</strong></p>\n</div>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/61213736d22f44f39b4aa49d56199d7ax1279x1187.JPEG"
    ]
  },
  {
    "text": "Which one of the following is not a feature in cerebral palsy?",
    "choices": [
      {
        "id": 1,
        "text": "Hypotonia"
      },
      {
        "id": 2,
        "text": "Microcephaly"
      },
      {
        "id": 3,
        "text": "Ataxia"
      },
      {
        "id": 4,
        "text": "Flaccid paralysis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Flaccid paralysis </strong>is <strong>not</strong> a feature of cerebral palsy (CP). It is a feature of <strong>lower motor neuron disease</strong>.</p>\n<p>CP is a <strong>static encephalopathy</strong> and a disorder of posture and movement often associated with:</p>\n<ul>\n<li>A deficit in the motor, language, and social milestones</li>\n<li><strong>Microcephaly</strong> is a feature of cerebral palsy because of the insult to the developing brain.</li>\n<li>Dystonic CP is associated with <strong>hypotonia</strong></li>\n<li>Extrapyramidal CP is associated with <strong>ataxia</strong></li>\n<li>It is an <strong>upper motor neuron disease </strong>characterized by rigidity and scissoring gait.</li>\n<li>Spastic CP is the<strong> commonest</strong> type (65%)</li>\n</ul>\n<p>Scissoring gait is a characteristic feature of cerebral palsy as shown in the GIF below-</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cd480ee47cc947ccb1c31d18bad0e6aax510x520.GIF"
    ]
  },
  {
    "text": "A 45-year-old patient presents to your clinic with complaints of stiffness of the joints in their fingers for the past 6 years that has progressively worsened over time. On examination, the following deformity is noted. What is the diagnosis in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Osteoarthritis"
      },
      {
        "id": 2,
        "text": "Gout"
      },
      {
        "id": 3,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 4,
        "text": "Psoriatic arthritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows a <strong>swan-neck deformity</strong> seen in a patient with established <strong>rheumatoid arthritis </strong>(RA). Swan neck deformity is hyperextension at the proximal interphalangeal (PIP) joint and flexion at the distal interphalangeal (DIP) joint.</p>\n<div class=\"page\" title=\"Page 2792\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Rheumatoid arthritis (RA) is a chronic inflammatory disease of unknown etiology characterized by a symmetric polyarthritis and is the most common form of chronic inflammatory arthritis.&nbsp;A variation in the the HLA-DRB1 gene is known to cause RA. Cigarette smoking is known to increase the risk five to six fold.</p>\n<div class=\"page\" title=\"Page 2792\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 2792\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Histopathological features include&nbsp;synovial cell hyperplasia and proliferation&nbsp;with&nbsp;inflammatory infiltrates<strong>&nbsp;</strong>and<strong>&nbsp;rheumatoid nodules.&nbsp;</strong>These are<strong>&nbsp;necrotizing granulomas</strong>&nbsp;surrounded by&nbsp;<strong>fibrinoid necrosis.&nbsp;</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 2792\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>RA is a systemic disease, which potentially leads to a variety of extraarticular manifestations, including fatigue, subcutaneous nodules, interstitial lung disease and pulmonary nodules, pericarditis, peripheral neuropathy, vasculitis, and hematologic abnormalities, which must be managed accordingly.<strong>&nbsp;</strong></p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Clinically</strong>, patients present with early morning joint pain and stiffness that relieves with activity. It mainly involves the metacarpophalangeal (MCP) and proximal interphalangeal (PIP) joints. Other hallmark features include flexor tendon tenosynovitis, <strong>swan</strong> <strong>neck deformity, boutonniere</strong> deformity,&nbsp;<strong>Z-line</strong> deformity, and trigger finger.</p>\n<p>Patients may have&nbsp;<strong>elevated ESR&nbsp;</strong>(erythrocyte sedimentation rate)&nbsp;and&nbsp;<strong>C reactive protein&nbsp;</strong>(CRP)<strong>.</strong>&nbsp;<strong>Rheumatoid factor&nbsp;</strong>and&nbsp;<strong>anti-CCP&nbsp;</strong>(cyclic citrullinated peptide) antibodies are helpful in prognosis. Progression of joint damage is assessed by plain X-ray.</p>\n<p>Management comprises of&nbsp;<strong>n</strong><strong>on-steroidal anti-inflammatory drugs</strong>&nbsp;for pain relief, along with disease modifying anti-rheumatoid drugs (DMARD).&nbsp;<strong>Methotrexate</strong>&nbsp;is the DMARD of choice.&nbsp;<strong>Hydroxychloroquine</strong>&nbsp;(HCQ) is given as an adjuvant in combination with other DMARDs.&nbsp;<strong>Biological agents</strong>&nbsp;such as TNF-&alpha; inhibitors, anakinra and rituximab are known to reduce the signs and symptoms of RA, slow radiographic progression of joint damage, and improve physical function and quality of life.</p>\n<p>Other options:</p>\n<p>Option A-&nbsp;<strong>Osteoarthritis(OA)</strong>&nbsp;typically affects the weight-bearing joints like the <strong>knee</strong>, hip, and spine. It presents <strong>bilaterally</strong> with&nbsp;<strong>pain</strong>&nbsp;being the predominant symptom. The pain worsens with use. Other symptoms such as <strong>joint</strong> <strong>stiffness</strong>, <strong>swelling</strong>, giving away or locking can be present.</p>\n<p>Option&nbsp;B-&nbsp;<strong>Gout</strong> has typical features of pain, swelling, and warmth of the <strong>first metatarsophalangeal</strong> joint. The radiograph is normal in the initial stages while it shows&nbsp;erosions<strong>, punched-out lesions,</strong>&nbsp;and<strong>&nbsp;</strong>sclerosis&nbsp;with preservation of joint space in the late stages.</p>\n<p><span class=\"s1\">Option C-&nbsp;</span><strong><span class=\"s1\">Psoriatic arthritis</span></strong>&nbsp;is an&nbsp;<strong>inflammatory musculoskeletal disease&nbsp;</strong>characteristically occurring in&nbsp;individuals<strong>&nbsp;</strong>with<strong>&nbsp;psoriasis.&nbsp;</strong>&nbsp;Psoriatic arthritis&nbsp;of the hands commonly involves proximal and distal interphalangeal joints (PIP,&nbsp;DIP) and metacarpophalangeal joints (MCP).&nbsp;The <strong>distal</strong> <strong>interphalangeal</strong> <strong>joint</strong> (DIP) is the most common joint involved in psoriatic arthritis. X-ray shows a characteristic <strong>pencil-in-cup</strong> appearance.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b1f0480fddc242b78ff24e83eb3858a1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Dependent personality traits are related to which phase:",
    "choices": [
      {
        "id": 1,
        "text": "Oral"
      },
      {
        "id": 2,
        "text": "Anal"
      },
      {
        "id": 3,
        "text": "Phallic"
      },
      {
        "id": 4,
        "text": "Genital"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The development of dependent personality traits is due to fixation in the oral stage of development, according to the psychosexual stages of development proposed by Sigmund Freud.&nbsp;He proposed five stages of development and stated that when the development of a child gets arrested at one stage, called <strong>fixation</strong>, it results in psychiatric disorders.</p>\n<p>The phases are:</p>\n<table style=\"width: 379px;\">\n<tbody>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Phase of sexual development</strong></p>\n</td>\n<td style=\"width: 198px;\">\n<p><strong>Disorders resulting from fixation in this phase</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Oral phase</strong></p>\n<p>(birth- 1.5 years)</p>\n<p>Learning how to eat, mouth is the site of pleasure.</p>\n</td>\n<td style=\"width: 198px;\">\n<p><strong>Alcohol dependence</strong> or drug dependence</p>\n<p><strong>Schizophrenia</strong></p>\n<p>Severe mood disorders</p>\n<p>Dependent personality disorder</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Anal phase</strong></p>\n<p>(1.5-3 years)</p>\n<p>Toilet training, the site of pleasure is the anal region.</p>\n</td>\n<td style=\"width: 198px;\">\n<p><strong>OCD</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Phallic/Oedipal phase</strong></p>\n<p>(3-5 years)</p>\n<p>Site of pleasure is the genital region.</p>\n</td>\n<td style=\"width: 198px;\">\n<p><strong>Oedipus/Electra complex,</strong> which is the primary cause of <strong>hysteria</strong>.</p>\n<p>Also, <strong>castration anxiety</strong> in boys and <strong>penis envy</strong> in girls.</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Latency</strong> <strong>phase</strong></p>\n<p>(5-12 years)</p>\n</td>\n<td style=\"width: 198px;\">\n<p>Neurotic disorder</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 175px;\">\n<p><strong>Genital</strong> <strong>phase</strong></p>\n<p>sexual orientation</p>\n<p>(&gt;12 years)</p>\n</td>\n<td style=\"width: 198px;\">\n<p>Neurotic disorder</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most potent local anaesthetic agent?",
    "choices": [
      {
        "id": 1,
        "text": "Procaine"
      },
      {
        "id": 2,
        "text": "Bupivacaine"
      },
      {
        "id": 3,
        "text": "Lidocaine"
      },
      {
        "id": 4,
        "text": "Mepivacaine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most potent local anaesthetic among the following is <strong>b</strong><strong>upivacaine.</strong></p>\n<p>Potency depends on hydrophobicity. Hydrophobicity can be increased by the addition of alkyl groups to the molecule.</p>\n<p><strong>Note:</strong> <strong>Dibucaine</strong> is the most potent, most toxic and longest acting local anaesthetic agent.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Consider the causes of alopecia. Which among the following cause(s) non-scarring alopecia?",
    "choices": [
      {
        "id": 1,
        "text": "3 and 4"
      },
      {
        "id": 2,
        "text": "1, 2, and 3"
      },
      {
        "id": 3,
        "text": "2, 3, and 4"
      },
      {
        "id": 4,
        "text": "Only 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Non-scarring alopecia is caused by<strong> androgenic alopecia, alopecia areata, and telogen effluvium.</strong></p>\n<p><strong>Alopecia areata</strong></p>\n<p>It is a chronic inflammatory disease that causes&nbsp;<strong>non-scarring hair loss</strong>.&nbsp;It is a&nbsp;<strong>T-cell-mediated inflammatory disease.&nbsp;</strong>It is associated with several autoimmune diseases, including&nbsp;<strong>thyroiditis</strong>, lupus erythematosus<strong>,</strong>&nbsp;vitiligo, and psoriasis.</p>\n<p>It mainly affects the&nbsp;<strong>scalp,&nbsp;</strong>but can also affect the&nbsp;<strong>beard, eyebrows,&nbsp;</strong>and<strong>&nbsp;eyelashes.&nbsp;</strong>In some cases, this progresses to a total loss of scalp hair&nbsp;<strong>(alopecia totalis)</strong>&nbsp;or a loss of all hair on the body<strong>&nbsp;(alopecia universalis)</strong>.</p>\n<p><strong>Telogen effluvium</strong>&nbsp;</p>\n<p>It is a type of<strong>&nbsp;nonscarring alopecia</strong>&nbsp;that is marked by&nbsp;<strong>diffuse</strong>&nbsp;<strong>shedding</strong>&nbsp;of normal hair. This occurs due to&nbsp;<strong>premature termination</strong>&nbsp;of the anagen phase of the hair cycle.&nbsp; It can be either acute or chronic.</p>\n<p><strong>Acute telogen effluvium</strong>&nbsp;occurs<strong>&nbsp;2&ndash;3 months</strong>&nbsp;after a stressful event such as high&nbsp;<strong>fever</strong>,&nbsp;<strong>surgery</strong>, starvation, and hemorrhage. Hormonal fluctuations during the&nbsp;<strong>postpartum</strong>&nbsp;period can trigger it (<strong>telogen gravidarum</strong>). Telogen effluvium can result in a diffuse reduction in hair density but never total baldness. It generally&nbsp;<strong>resolves</strong>&nbsp;<strong>spontaneously</strong>.</p>\n<p>Chronic telogen effluvium is used to describe the diffuse shedding of telogen hair for more than<strong>&nbsp;6 months</strong>. Common causes include&nbsp;<strong>thyroid disorders</strong>, iron-deficiency anemia, and malnutrition.&nbsp;</p>\n<p><strong>Androgenetic alopecia</strong></p>\n<p>It is a disorder characterized by a reduction of hair fiber production by follicles and miniaturization. <strong>Dihydrotestosterone</strong>, an androgenic metabolite, is implicated in the etiology. It is of two types: male-pattern and female-pattern hair loss.&nbsp;Male-pattern hair loss causes <strong>frontal hairline recession</strong> and thinning of the <strong>vertex</strong>.&nbsp;&nbsp;Female-pattern hair loss involves the <strong>mid-frontal scalp</strong> diffusely. There is no or minimal involvement of the temporal region.</p>\n<p><strong>Frontal fibrosing alopecia</strong> is a scalp condition that affects <strong>post-menopausal women</strong> in particular and frequently involves the eyebrows. It is a type of <strong>primary cicatricial (scarring) alopecia.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 51-year-old man complains of abdominal pain and blood stained stools. The barium enema study of his intestines shows the following finding. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Intussusception"
      },
      {
        "id": 2,
        "text": "Volvulus"
      },
      {
        "id": 3,
        "text": "Diverticulitis"
      },
      {
        "id": 4,
        "text": "Ulcerative colitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the radiological image of<strong>&nbsp;</strong>the<strong> claw sign</strong>/pincer sign in barium enema is suggestive of <strong>intussusception</strong>.</p>\n<p>In intussusception, the occluding mass prolapsing into the lumen has been termed the <strong>coiled spring appearance</strong> (barium in the lumen of the intussusceptum and in the intraluminal space). In adults, it develops due to a tumor of the bowel.</p>\n<p>The intussusception appears as a <strong>sausage-shaped mass </strong>in a longitudinal plane&nbsp;or a <strong>target mass </strong>in the transverse plane<strong>&nbsp;</strong>on CT and USG.&nbsp;</p>\n<p>Ultrasound signs include:</p>\n<ul>\n<li><strong>Target sign -</strong>also known as the <strong>doughnut sign</strong></li>\n<li><strong>Pseudokidney sign</strong>: this is seen in the longitudinal section of the bowel:\n<ul>\n<li>the edematous bowel resembles renal parenchyma and</li>\n<li>the mesentery which is dragged into the intussusception resembles the renal hilum.</li>\n</ul>\n</li>\n<li><strong>Crescent in a doughnut sign.</strong></li>\n</ul>\n<p>Other options:</p>\n<p>Option B: <strong>Volvulus</strong> presents with&nbsp;constipation, abdominal bloating, nausea and/or vomiting. It shows a&nbsp;<strong>coffee bean sign.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b713a4d138184d6a9f852d63099c83fb.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d2ce7557d4d346f0a82ac2eb3a95e062x720x840.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c5f96af7ad347a2b7613d989d8469abx720x720.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/950b6dfe71944b27aa7cb8b1bffb47c7x720x879.PNG"
    ]
  },
  {
    "text": "Patient with a metallic foreign body in eye, which of the following investigation is contraindicated?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "USG"
      },
      {
        "id": 3,
        "text": "X-ray"
      },
      {
        "id": 4,
        "text": "CT"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>MRI is contraindicated in:</p>\n<ul>\n<li>Cardiac pacemakers (best response)</li>\n<li>Aneurysmal metallic clips</li>\n<li>Metallic foreign body</li>\n<li>Cochlear implant</li>\n<li>Claustrophobia (relative contraindication)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 23';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>