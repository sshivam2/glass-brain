<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>214 Medicine Aiims 2020 (May And Nov Ini-Cet) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">31</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is the drug of choice for hairy cell leukemia?",
    "choices": [
      {
        "id": 1,
        "text": "Rituximab"
      },
      {
        "id": 2,
        "text": "Vemurafenib"
      },
      {
        "id": 3,
        "text": "Cladribine"
      },
      {
        "id": 4,
        "text": "Interferon-alpha"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cladribine</strong> is the drug of choice in <strong>hairy cell leukemia</strong>.</p>\n<p>Cladribine is a <strong>purine analogue</strong> with potent and curative activity against hairy cell leukemia. </p>\n<p>Other treatment options for hairy cell leukemia include <strong>deoxycoformycin</strong>, <strong>interferon-alpha,</strong> and <strong>splenectomy</strong>. Chemotherapy-refractory patients are treated with <strong>vemurafenib</strong>, a BRAF kinase inhibitor. The addition of <strong>rituximab</strong> results in more durable remissions.</p>\n<p>Cladribine is also used to treat CLL, low-grade lymphomas, Langerhans cell histiocytosis, cutaneous T-cell lymphomas, and Waldenstr&ouml;m macroglobulinemia.</p>\n<p>The major dose-limiting toxicity of cladribine is <strong>myelosuppression</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An intubated patient in the ICU had a chest X-ray taken to evaluate for fever spikes over the last 24-48 hours. The radiograph is shown below. What is the next best step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Suction the ET tube"
      },
      {
        "id": 2,
        "text": "Chest physiotherapy twice daily"
      },
      {
        "id": 3,
        "text": "Start antibiotics and send samples for culture"
      },
      {
        "id": 4,
        "text": "Ultrasound-guided aspiration"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Differential diagnosis in an intubated patient with opacities on CXR might be pneumonitis secondary to gastric acid or food aspiration. But the X-ray would show patchy infiltration unlike the homogenous density seen in pleural effusion.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eb36c4e28e1b4be1893c1244b5398713.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13dd0f1ab9d149ba9c46dd72848559ebx488x422.PNG"
    ]
  },
  {
    "text": "Following is a graphic representation of a patient admitted to the medicine ward with fever. What could be the possible diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Cerebral malaria"
      },
      {
        "id": 2,
        "text": "Brucellosis"
      },
      {
        "id": 3,
        "text": "Leptospirosis"
      },
      {
        "id": 4,
        "text": "Typhoid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given graphical representation of a <strong>biphasic illness</strong> (acute and convalescent phases) and relevant investigations at <strong>different stages</strong> of the disease is consistent with a diagnosis of <strong>leptospirosis.&nbsp;</strong></p>\n<p><strong>Malaria (Option A)</strong> is commonly diagnosed by demonstrating malarial parasites in a peripheral blood smear and not in CSF or urine.</p>\n<p><strong>Brucellosis (Option B)</strong> follows a characteristic pattern of undulating fever.</p>\n<p>The mean incubation period in <strong>typhoid (Option D)</strong> usually ranges from 10 to 14 days and diagnosed based on examination of blood or stool.</p>\n<p><strong>Leptospirosis</strong> is a <strong>zoonotic</strong> disease caused by<strong> gram-negative Leptospira</strong> bacteria (especially L. interrogans). <strong>Direct transmission</strong> to humans occurs when broken skin and mucous membranes come into contact with the urine of infected reservoir hosts such as rodents.&nbsp;</p>\n<p>Illness is classically <strong>biphasic</strong> after an incubation period of up to <strong>1 month,</strong> though the distinction between the first and second phases is not always clear.</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Acute leptospiremic phase-organism can be cultured from blood (within 1 week of onset of symptoms)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Resolving immune phase-organism can be cultured from urine (after 1 week)</li>\n</ul>\n<p>Most cases are characterized by <strong>non-specific</strong> symptoms (e.g fever, headache, myalgia and conjunctival suffusion) and resolve <strong>spontaneously</strong> within a week but a few may progress to a severe form known as<strong> Weil's disease</strong> which typically presents with a triad of <strong>hemorrhage, jaundice, and acute kidney injury.</strong></p>\n<p>Diagnosis includes:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Dark-field microscopy of urine or blood samples</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Serological tests</strong></li>\n</ul>\n<ul>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Four-fold rise in the level of IgM titers within one month of the onset of symptoms</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Microscopic agglutination test (MAT)</li>\n</ul>\n</ul>\n<p>&nbsp;</p>\n<p>&nbsp;</p>\n<ul>\n<li>PCR</li>\n<li>Culture on EMJH or Fletchers media</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li><strong>Mild disease:</strong> Oral doxycycline or azithromycin or ampicillin/ amoxicillin&nbsp;</li>\n<li><strong>Severe disease:</strong> IV penicillin&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a62a38d9ce53455c9f0c99df90613bf3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The laboratory investigations of a 65 year old woman revealed a hemoglobin level of 5.4 g/dl, creatinine level of 6 mg/dl, calcium level of 12 mg/dl, potassium level of 4.4 mmol/L. Her urine output in the last 24 hours was 50 ml. Bone marrow aspiration revealed more than 60% of plasma cells. What would be the next appropriate line of management for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Urgent consultation for dialysis"
      },
      {
        "id": 2,
        "text": "Lenalidomide + Bortezomib + Dexamethasone"
      },
      {
        "id": 3,
        "text": "Dexamethasone + fluids"
      },
      {
        "id": 4,
        "text": "Chemotherapy followed by autologous stem cell transplantation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario shows a patient with a bone marrow finding of <strong>plasma cells &gt;60%</strong> which points to a diagnosis of <strong>multiple myeloma.&nbsp; </strong></p>\n<p><strong>Anemia</strong> (Hb- 5.4 g/dl), <strong>hypercalcemia</strong> (serum calcium-12 mg/dl) and <strong>acute kidney injury</strong> (creatinine-6 mg/dl, reduced urine output) are myeloma-defining events suggesting end-organ damage.</p>\n<p>The most appropriate <strong>next step</strong> in managing this patient would be to administer <strong>fluids</strong> to treat the acute kidney injury and hypercalcemia (hypercalcemia is the most common cause of renal failure in multiple myeloma), and prevent further renal impairment. Therefore, among the given options, <strong>dexamethasone and fuids</strong> would be the best answer.</p>\n<p>Multiple myeloma is a <strong>malignant plasma cell dyscrasia</strong> and its diagnosis requires bone marrow biopsy finding of <strong>&ge; 10% clonal bone marrow plasma cells,</strong> a <strong>serum/urine M component,</strong> and at least <strong>one</strong> of the <strong>myeloma-defining events</strong> (hypercalcemia, renal insufficiency, anemia and bone lesions).</p>\n<p><strong>Dialysis (Option A)</strong> is indicated in the following conditions:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Pulmonary edema not responding to diuretics</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Uremic pericarditis, uremic encephalopathy or uremic syndrome</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Metabolic acidosis not responding to treatment</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Hyperkalemia</li>\n</ul>\n<p><strong>Lenalidomide + Bortezomib + Dexamethasone (Option B)</strong> is the preferred treatment in multiple myeloma and can be initiated after initial management of acute kidney injury.</p>\n<p><strong>Chemotherapy</strong> followed by <strong>autologous stem cell transplantation (Option D)</strong> in transplant-eligible patients prolongs overall survival in multiple myeloma patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/56f896aa6c2b4c449e446165261ce012x458x918.PNG"
    ]
  },
  {
    "text": "A diabetic nephropathy patient is an ideal candidate for renal graft transplant. Which of the following statements is true?",
    "choices": [
      {
        "id": 1,
        "text": "The survival rate of graft is 95% in the first year"
      },
      {
        "id": 2,
        "text": "The transplantation is cost effective after the second transplant year"
      },
      {
        "id": 3,
        "text": "The life expectancy is doubled in a diabetic patient with renal transplant"
      },
      {
        "id": 4,
        "text": "The treatment of chronic rejection has improved over the last 10 years"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Transplantation becomes <strong>cost-effective</strong> after the <strong>second transplant year</strong> in a patient with <strong>diabetic nephropathy,</strong> provided there is <strong>no chronic rejection.</strong></p>\n<p>The cost of transplantation after the second year becomes lesser compared to thrice-weekly dialysis.</p>\n<p><strong>Other options:</strong></p>\n<p><strong>Options A:</strong> Graft survival in the first year is not 95%. It is around 80%&nbsp;</p>\n<p><strong>Option C:</strong> The life expectancy is not doubled in a patient with diabetic nephropathy post-transplantation</p>\n<p>Option D: As chronic rejection is due to so many variables, the treatment is very difficult. Risk factors that predispose a recipient to long-term graft rejection include HLA-mismatching, acute episodes of graft rejection, mismatch in donor-recipient age, and smoking. Better treatment options are still under research.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A diabetic patient enters the OPD and greets you with a namaste. As the doctor, you notice a deformity in his hand which is shown in the image below. Based on your observation, what is the likely cause of this deformity?",
    "choices": [
      {
        "id": 1,
        "text": "Flexor tenosynovitis"
      },
      {
        "id": 2,
        "text": "Cheiroarthropathy"
      },
      {
        "id": 3,
        "text": "Dupuytrens contracture"
      },
      {
        "id": 4,
        "text": "Ankyloses"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D: Ankylosis refers to the <strong>fusion of a joint</strong>, resulting in limited or no movement. It can occur due to various causes such as rheumatoid arthritis, osteoarthritis, trauma, or infection.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a27cb0e287bb413e822d26e645f25c43.png"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7ebf66ac726e4bf1ae40d287b9585d36x720x464.JPEG"
    ]
  },
  {
    "text": "Dialysis will prevent all except?",
    "choices": [
      {
        "id": 1,
        "text": "Seizures"
      },
      {
        "id": 2,
        "text": "Peripheral neuropathy"
      },
      {
        "id": 3,
        "text": "Metabolic acidosis"
      },
      {
        "id": 4,
        "text": "Uremic pericarditis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Dialysis</strong> does not prevent peripheral neuropathy. Complications like <strong>seizures, metabolic acidosis,</strong> and <strong>uremic pericarditis</strong> can be prevented by dialysis.</p>\n<p><strong>Peripheral neuropathy</strong> is postulated to be caused due to <strong>middle molecules (50-200kDa).</strong> Conventionally used dialysis membranes have pore sizes that prevent larger particles (such as middle molecules) from passing through them. </p>\n<p>Suggested methods for the removal of middle molecules include:</p>\n<ul>\n<li><strong>High flux dialysis</strong></li>\n<li>Protein adsorptive membranes&nbsp;</li>\n<li>High-cutoff membranes</li>\n</ul>\n<p>Aggressive removal of middle molecules or larger low-molecular-weight proteins (LMWPs) has been a growing concern since it causes <strong>massive albumin leakage</strong>.</p>\n<p><strong>&beta;2-microglobulin</strong> (B2M),<strong>&alpha;1-microglobulin</strong> (A1M) and albumin leakage during a dialysis session are useful parameters for assessing middle-molecule removal.</p>\n<p><strong>Renal transplantation</strong> is the best treatment option available for peripheral neuropathy in diabetes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a treatment option in Guillain Barre syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Steroids"
      },
      {
        "id": 2,
        "text": "Plasmapheresis"
      },
      {
        "id": 3,
        "text": "IVIG"
      },
      {
        "id": 4,
        "text": "Ventilator support"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Steroids</strong> are <strong>not used</strong> in the treatment of Guillain Barre syndrome (GBS).</p>\n<p>GBS is an acute, fulminant, <strong>ascending polyradiculoneuropathy</strong> that is autoimmune in nature. GBS is caused when immune response/antibodies against external antigens like infections, vaccines, etc target similar proteins present in the person's nervous tissue. Hence the preferred treatment is to neutralize these autoantibodies using<strong> IVIg (I.V. immunoglobulins) or plasmapheresis&nbsp;(Option B and Option C).</strong></p>\n<p>GBS manifests as rapidly evolving<strong> ascending areflexic motor paralysis</strong> with or without sensory disturbance. GBS paralysis can also affect the muscles of <strong>respiration</strong>, possibly leading to death due to <strong>respiratory failure.</strong> In such cases, ventilatory support<strong> (Option D)</strong> is needed.</p>\n<p>&nbsp;Note:&nbsp;Steroid therapy is used in <strong>Chronic inflammatory demyelinating polyneuropathy</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which part of the internal capsule is affected in hemiplegia due to ischaemic stroke?",
    "choices": [
      {
        "id": 1,
        "text": "Retrolentiform"
      },
      {
        "id": 2,
        "text": "Sublentiform"
      },
      {
        "id": 3,
        "text": "Anterior limb"
      },
      {
        "id": 4,
        "text": "Posterior limb"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>posterior limb of the internal capsule</strong> is affected in <strong>hemiplegia</strong> due to ischaemic stroke.</p>\n<p>Motor fibers (cortico-spinal tract) supplying the extremities are present in the posterior limb, hence a lesion in this region may cause hemiplegia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b1deb43b58fa43c896f888afc0c31c4dx1280x1625.JPEG"
    ]
  },
  {
    "text": "Which of the following is false about mycoplasma pneumonia?",
    "choices": [
      {
        "id": 1,
        "text": "Responds well to amoxiclav"
      },
      {
        "id": 2,
        "text": "Antibody are useful in diagnosis"
      },
      {
        "id": 3,
        "text": "Chest X-ray shows bilateral infiltrates"
      },
      {
        "id": 4,
        "text": "Can be cultured in a cell-free medium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Mycoplasma</strong> does <strong>not</strong> respond to amoxicillin-clavulanate (amoxiclav).</p>\n<p>Mycoplasma is a bacteria that <strong>lacks a cell wall.</strong> Since<strong> beta-lactam antibiotics</strong> (amoxiclav) act on the <strong>cell wall</strong> of the bacterium, they can not be used in the treatment of mycoplasma infection.&nbsp;</p>\n<p>The diagnosis of mycoplasma pneumonia (also known as walking pneumonia/ primary atypical pneumonia) can be established by:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>PCR detection</strong> of M. pneumoniae in respiratory secretions</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Serological tests for <strong>IgM and IgG</strong> antibodies to M.pneumoniae in paired serum samples</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Culture:</strong>&nbsp;Mycoplasma can be cultured on PPLO agar, a cell-free medium, and shows a typical <strong>fried egg appearance</strong></li>\n</ul>\n<p>Chest X-ray usually shows <strong>B/L peribronchial and perivascular interstitial infiltrates</strong></p>\n<p>Treatment options for mycoplasma pneumonia&nbsp; include:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;Macrolides (e.g. azithromycin)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;Tetracyclines (e.g. doxycycline)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">&nbsp;Respiratory fluoroquinolones. (e.g. levofloxacin)</li>\n</ul>\n<p><strong>Azithromycin</strong> is the <strong>drug of choice</strong> for the management of mycoplasma pneumonia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old chronic smoker presented with mild recurrent hemoptysis without fever or weight loss. The chest X-ray appears normal and the sputum is negative for AFB. Which of the following is the next best diagnostic investigation?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "CT"
      },
      {
        "id": 3,
        "text": "Fiberoptic bronchoscopy"
      },
      {
        "id": 4,
        "text": "Bronchography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p id=\"idm139695396496384\" class=\"p p-first\">In this case, considering the patient's age of <strong>50 years</strong>, history of <strong>chronic smoking,</strong> and recurrent <strong>hemoptysis</strong>, all of which raise suspicion for <strong>lung malignancy,</strong> the next best diagnostic investigation would be a <strong>CT scan.&nbsp;</strong></p>\n<p class=\"p p-first\">Any patient presenting with recurrent hemoptysis requires chest imaging. The initial imaging modality is a <strong>plain radiograph.</strong> However, patients with&nbsp;<strong>risk factors</strong> for<strong> malignancy</strong> need further evaluation&nbsp;with a<strong> CT scan</strong>.&nbsp;</p>\n<p class=\"p p-first\">CT can identify masses, bronchiectasis, and parenchymal lesions. Further management depends on the CT findings. <strong>Fiberoptic bronchoscopy,</strong> which is an invasive procedure, is done after a mass is seen on a CT scan to enable sample collection for <strong>biopsy</strong>. Also, bronchoscopy has an overall <strong>lower sensitivity</strong> than MDCT in detecting the underlying causes of bleeding.</p>\n<p>Other options:</p>\n<p><strong>Option A:</strong> While <strong>MRI</strong> can be valuable in certain situations, such as evaluating the mediastinum or vascular structures, a chest CT scan is generally the preferred initial diagnostic investigation for assessing lung pathology, especially in cases of hemoptysis. </p>\n<p><strong>Option D:</strong> <strong>Bronchography</strong> is visualizing the tracheobronchial tree on plain radiography by instilling contrast material via the bronchus. It has been replaced by advancements in CT scans.</p>\n<p><strong>Risk factors</strong> for the development of lung cancer:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Tobacco smoking:</strong> Associated with 90% of lung cancers.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Occupational</strong> and <strong>environmental</strong> <strong>exposure</strong> to carcinogens: Includes passive smoking, environmental air pollution, radon, asbestos, arsenic, chromium, nickel, beryllium, and silica.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Family history</strong> (genetic predisposition).</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Other risk factors: Pulmonary scarring, previous radiation, pulmonary fibrosis, and chronic infections (e.g., tuberculosis, HIV).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the factors would suggest a risk for a patient with TIA developing stroke in the future according to ABCD2 scoring?",
    "choices": [
      {
        "id": 1,
        "text": "Age < 60 years"
      },
      {
        "id": 2,
        "text": "SBP >130 mm Hg and DBP > 80 mm Hg"
      },
      {
        "id": 3,
        "text": "Duration of TIA  >5 mins"
      },
      {
        "id": 4,
        "text": "Diabetes"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>According to the <strong>ABCD2</strong> scoring system, which is commonly used to assess the short-term risk of stroke following a <strong>transient ischemic attack (TIA),</strong> <strong>diabetes</strong> would suggest a higher risk factor.</p>\n<p><strong>Age more than 60 years,</strong> <strong>SBP more than 140</strong> or <strong>DBP more than 90</strong> mmHg, and duration of TIA of <strong>10-59 minutes</strong> or <strong>more than 60 minutes</strong> are other criteria included in the ABCD2 scoring system.</p>\n<p>TIA is defined as episodes of stroke symptoms that last for only a brief period of time<strong> (&lt;24 hours).</strong> The ABCD2 scoring system is most frequently used to calculate the short-term risk of stroke after TIA.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The serum electrolyte values of a patient weighing 60kg are given below. Calculate the sodium deficit in the patient. \npH: 7.42, Na+: 120 mEq/L, serum K+: 4 mEq/L, serum Cl-: 90 mEq/L.",
    "choices": [
      {
        "id": 1,
        "text": "20 mEq"
      },
      {
        "id": 2,
        "text": "200 mEq"
      },
      {
        "id": 3,
        "text": "400 mEq"
      },
      {
        "id": 4,
        "text": "720 mEq"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The sodium deficit is calculated as<strong> (target sodium concentration-current sodium concentration) x 0.6 x Body weight</strong> (kg).</p>\n<p>Substituting the values, sodium deficit = (140-120) x 0.6 x 60 = <strong>720 mEq.</strong></p>\n<p>To calculate the<strong> sodium deficit</strong> in the patient, we first need to determine the <strong>target&nbsp;sodium concentration</strong> and compare it to the <strong>current sodium concentration.</strong></p>\n<p>The target sodium concentration can be calculated using the following formula:<br /><strong>Target Na concentration&nbsp; = (Lower limit of serum sodium concentration + upper limit of serum sodium concentration) / 2</strong></p>\n<p>In this case, we assume the lower limit for the serum sodium concentration is 135 mEq/L, and the upper limit is 145 mEq/L.</p>\n<p>Target Na concentration = (135 + 145) / 2=<strong> 140 mEq/L</strong></p>\n<p>Next, the current sodium deficit can be calculated using the following formula:<br /><strong>Sodium Deficit = (Target sodium concentration-current sodium concentration) x Total Body Water (TBW)&nbsp;</strong></p>\n<p>Total Body Water (TBW) = Weight (in kg) &times; 0.6 (assuming 60% of body weight is water); TBW = 60 &times; 0.6= <strong>36 liters</strong></p>\n<p><strong>Sodium Deficit</strong> = (140 - 120) x 36 = 20 x 36 = <strong>720 mEq</strong></p>\n<p>Therefore, the sodium deficit in the patient is 720 mEq.</p>\n<p><strong>Rapid sodium correction</strong> of 4&ndash;6 mEq/L should be achieved in the<strong> first 6 hours</strong> of therapy for patients with<strong> acute hyponatremia.</strong></p>\n<p>The rate of correction should be comparatively <strong>slow</strong> in <strong>chronic hyponatremia:</strong> <strong>&lt;6-8 mEq/L</strong> in the <strong>first 24 h</strong> and &lt;6 mEq/L each subsequent 24h, so as to avoid <strong>osmotic demyelination syndrome.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient with non-ST-elevation myocardial infarction (NSTEMI), all the following can be used for treatment except?",
    "choices": [
      {
        "id": 1,
        "text": "Aspirin"
      },
      {
        "id": 2,
        "text": "Clopidogrel"
      },
      {
        "id": 3,
        "text": "Streptokinase"
      },
      {
        "id": 4,
        "text": "Prasugrel"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Streptokinase</strong> is not used in the management of <strong>non-ST segment elevation MI</strong> (NSTEMI). It is a fibrin non-specific plasminogen activator used as a fibrinolytic agent in the treatment of ST-segment elevation MI (STEMI). <strong>Aspirin, clopidogrel, and prasugrel</strong> are antiplatelet drugs commonly used in the management of NSTEMI.</p>\n<p><strong>Fibrinolytic therapy</strong> is not indicated in patients with <strong>unstable angina</strong> or <strong>NSTEMI</strong>, unlike in STEMI. This is because <strong>STEMI</strong> is almost always caused by <strong>plaque rupture</strong> leading to the formation of an <strong>occluding thrombus</strong>, whereas, <strong>NSTEMI</strong> can be caused by a stable <strong>non-occluding plaque</strong> with some amount of lumen still patent. Fibrinolytic therapy may lead to the rupture of the stable plaque causing more damage.</p>\n<p><strong>Acute coronary syndrome</strong> is classified into 2 groups:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">ST-segment Elevation Myocardial Infarction (STEMI)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">NSTE-ACS</li>\n</ul>\n<p><strong>NSTE-ACS</strong> further includes:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">NSTEMI (myocyte necrosis present and cardiac troponins elevated)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Unstable Angina (myocyte necrosis absent and cardiac troponins not elevated)</li>\n</ul>\n<p>The treatment of NSTEMI is as follows:</p>\n<ul>\n<li>Admission to a specialized cardiac unit</li>\n<li>Inhaled <strong>oxygen</strong></li>\n<li>Bed rest with <strong>continuous ECG monitoring</strong></li>\n<li>Monitoring cardiac biomarkers</li>\n<li>Morphine or opioid analgesics</li>\n<li><strong>Nitrates</strong></li>\n<li><strong>Beta-blockers</strong></li>\n<li>Antiplatelet drugs like <strong>aspirin</strong>,&nbsp;<strong>clopidogrel, prasugrel</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with vertigo,  diplopia, hoarseness,  dysphagia, and left Horner\u2019s syndrome associated with numbness of the left face and right side limbs. Which artery is affected in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior inferior cerebellar artery"
      },
      {
        "id": 2,
        "text": "Superior cerebellar artery"
      },
      {
        "id": 3,
        "text": "Anterior inferior cerebellar artery"
      },
      {
        "id": 4,
        "text": "Basillar artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>These given features collectively indicate a diagnosis of <strong>Wallenberg or lateral medullary syndrome,</strong> which is typically caused by a lesion of the <strong>posterior inferior cerebellar artery.&nbsp;</strong></p>\n<p>The patient presents with hoarseness and dysphagia, suggesting the involvement of cranial nerves<strong> IX and X,</strong> which helps localize the lesion to the <strong>medulla</strong>. Additionally, the presence of vertigo and diplopia (involving the <strong>vestibular nerve</strong>), left-sided Horner's syndrome (involving the <strong>descending sympathetic tract</strong>), numbness on the left side of the face (involving the sensory tract of <strong>trigeminal nucleus</strong>), and numbness in the right side limbs (involving the <strong>lateral spinothalamic tract</strong>) further aids in localizing the lesion to the lateral part of the medulla.</p>\n<p>The absence of motor symptoms suggests that the pyramidal tracts in the medial aspect of the medulla are not involved, ruling out medial medullary syndrome.</p>\n<p>Wallenberg/lateral medullary syndrome&nbsp;affects:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Descending tract and nucleus of <strong>CN V-</strong> loss of pain and sensation over the ipsilateral half of the face.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Inferior cerebellar peduncle</strong> &ndash; ipsilateral ataxia&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Lateral spinothalamic tract</strong> &ndash; loss of pain and temperature sensation over the contralateral half of the body.&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">CN<strong> IX and X</strong> - ipsilateral paralysis of palate, vocal cord, diminished gag reflex giving rise to dysphagia, dysarthria.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Vestibular nucleus - Nystagmus, diplopia, vertigo, nausea</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Descending sympathetic tract</strong> &ndash; ipsilateral Horner&rsquo;s syndrome (miosis, ptosis, and anhidrosis).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/58105eba00354e34b9271a088ec2e5f1x1280x1530.PNG"
    ]
  },
  {
    "text": "Resistant hypertension is defined as?",
    "choices": [
      {
        "id": 1,
        "text": "BP >160/90 mmHg with one anti-hypertensive"
      },
      {
        "id": 2,
        "text": "BP >140/90 mmHg with one anti-hypertensive"
      },
      {
        "id": 3,
        "text": "BP >160/90 mmHg with three or more anti-hypertensives"
      },
      {
        "id": 4,
        "text": "BP >140/90 mmHg with three or more anti-hypertensives"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Resistant hypertension</strong> is defined as blood pressure being persistently <strong>&gt;140/90 mmHg</strong> despite taking <strong>three or more antihypertensive agents,</strong> including a <strong>diuretic</strong>.</p>\n<p>Resistant hypertension is more common in patients aged <strong>&gt;60 years</strong> than in younger patients.</p>\n<p>Resistant hypertension may be related to <strong>pseudohypertension</strong> (high office blood pressure and lower home blood pressure measurements), no<strong>n</strong>adherence to therapy, and <strong>secondary</strong> <strong>causes</strong> of hypertension including obesity, excessive alcohol intake, and primary aldosteronism.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Components of the MELD (2016) score are all except?",
    "choices": [
      {
        "id": 1,
        "text": "Bilirubin"
      },
      {
        "id": 2,
        "text": "INR"
      },
      {
        "id": 3,
        "text": "Albumin"
      },
      {
        "id": 4,
        "text": "Creatinine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Albumin is not a component of the MELD (2016) score.</p>\n<p>The <strong>Model for End-Stage Liver Disease</strong> (MELD) is used as an indicator of short-term survival in patients with end-stage liver disease and to determine organ allocation priorities for liver transplantation. The components of the original MELD model were:</p>\n<ul>\n<li><strong>Serum creatinine</strong></li>\n<li><strong>Serum bilirubin</strong></li>\n<li><strong>INR </strong>(international normalized ratio)</li>\n</ul>\n<p><strong>In 2016</strong>, it was modified to incorporate serum <strong>sodium</strong> (the MELD-Na score).</p>\n<p>The latest MELD 3.0 scoring system has added two additional components:</p>\n<ul>\n<li><strong>Serum albumin</strong></li>\n<li><strong>Female gender</strong></li>\n</ul>\n<p>Patients with <strong>high scores</strong> have <strong>poor prognoses</strong> <strong>without intervention</strong> and should therefore be prioritized for transplantation if eligible.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman with Grave's disease was taking antithyroid medication throughout her pregnancy. The baby was born with aplasia cutis congenita. Which drug could have caused this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Carbimazole"
      },
      {
        "id": 2,
        "text": "Levothyroxine"
      },
      {
        "id": 3,
        "text": "Methylthiouracil"
      },
      {
        "id": 4,
        "text": "Hydrouracil"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Carbimazole</strong> intake during the<strong> first trimester</strong> of pregnancy is associated with<strong> aplasia cutis congenita.</strong></p>\n<p><strong>Carbimazole</strong> and <strong>methimazole</strong> are associated with teratogenic effects such as:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Aplasia cutis congenita:</strong> Congenital absence of scalp hair and skin along with calvarial defects</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Choanal atresia</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Tracheoesophageal fistula</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Fetal goiter</li>\n</ul>\n<p>The <strong>drug of choice</strong> for the treatment of hyperthyroidism during the <strong>first trimester</strong> of pregnancy is <strong>propylthiouracil</strong> (PTU). It is because it has lower teratogenic effects than carbimazole or methimazole.</p>\n<p>However, propylthiouracil use is limited to the first trimester due to the risk of <strong>hepatotoxicity</strong>. It is replaced with methimazole (or carbimazole) in the <strong>second</strong> and <strong>third</strong> <strong>trimesters</strong> of the pregnancy.</p>\n<p><strong>Radioiodine</strong> therapy is <strong>contraindicated</strong> during pregnancy and lactation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the given acid-base nomogram diagram, areas marked A and D indicate which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Chronic respiratory acidosis, acute metabolic alkalosis"
      },
      {
        "id": 2,
        "text": "Acute Metabolic alkalosis, acute respiratory acidosis"
      },
      {
        "id": 3,
        "text": "Acute respiratory acidosis, acute respiratory alkalosis"
      },
      {
        "id": 4,
        "text": "Acute respiratory acidosis, acute metabolic alkalosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>y-axis</strong> of the acid-base nomogram represents the <strong>arterial bicarbonate (HCO3-) levels,</strong> and the <strong>x-axis</strong> represents the<strong> arterial pH</strong> values. The <strong>shaded</strong> areas are the <strong>range</strong> of values of the <strong>normal respiratory and metabolic compensations</strong> for primary acid-base disturbances.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1642dd51e16b485aa9ff24c7a6d6ca59.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e5b3a554c29d42aab8be74cc471cb156x1280x1555.JPEG"
    ]
  },
  {
    "text": "A patient presented with the complaints of chest pain. Which among the following is the best investigation to diagnose MI within 2-4 hours?",
    "choices": [
      {
        "id": 1,
        "text": "LDH"
      },
      {
        "id": 2,
        "text": "CKMB"
      },
      {
        "id": 3,
        "text": "Troponin-T"
      },
      {
        "id": 4,
        "text": "BNP"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Troponin T/I:</strong></p>\n<ul>\n<li><strong>Highly specific\u00a0</strong>for MI</li>\n<li>Troponin I is more important than troponin T.</li>\n<li>Troponins will remain elevated longer than creatine kinase (CK), for\u00a0up to 14 days.</li>\n<li>This makes troponins a superior marker for diagnosing MI in the recent past\u00a0(late diagnosis).</li>\n<li><strong>Reinfarction:\u00a0</strong>It is now clear that cardiac troponin (cTn) increases rapidly, even if it is from an abnormal baseline\u00a0in patients with reinfarction.</li>\n<li>Sometimes <strong>cTn concentration</strong> is elevated, but stable or decreasing at the time of suspected reinfarction. In this case, the diagnosis of reinfarction requires a <strong>20% or greater</strong> increase in the cTn measurement</li>\n</ul>\n<p><strong>Creatine kinase (CK):</strong></p>\n<ul>\n<li><strong>Less sensitive </strong>and<strong> specific</strong> than troponins</li>\n<li>When cTn is available, CK-MB should not be used for the initial diagnosis of acute MI</li>\n</ul>\n<p><strong>Lactate dehydrogenase (LDH):</strong></p>\n<ul>\n<li>Normally, LDH2&gt;LDH1; but, in MI, LDH1&gt;LDH2. This is called\u00a0<strong>flipping of the LDH ratio</strong>.</li>\n<li>Current recommendations suggest that LDH no longer has a role in the diagnosis of MI.</li>\n</ul>\n<p><strong>Myoglobin:</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Earliest enzyme</strong> to increase after MI.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Not specific to cardiac muscle and can be elevated to any form of injury to skeletal muscle.</li>\n</ul>\n<p><span data-sheets-value=\"{&quot;1&quot;:2,&quot;2&quot;:&quot;Heart-type fatty acid-binding protein (H-FABP), which mainly exists inside cardiomyocytes, has recently emerged as a potentially promising biomarker, which was found to be sensitive for the early diagnosis of acute myocardial infarction. H-FABP as an early marker and cTnI as a late marker would be the ideal combination to cover the complete diagnostic window for AMI&quot;}\" data-sheets-userformat=\"{&quot;2&quot;:33563519,&quot;3&quot;:{&quot;1&quot;:0},&quot;4&quot;:{&quot;1&quot;:2,&quot;2&quot;:6989903},&quot;5&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;6&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;7&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;8&quot;:{&quot;1&quot;:[{&quot;1&quot;:2,&quot;2&quot;:0,&quot;5&quot;:{&quot;1&quot;:2,&quot;2&quot;:0}},{&quot;1&quot;:0,&quot;2&quot;:0,&quot;3&quot;:3},{&quot;1&quot;:1,&quot;2&quot;:0,&quot;4&quot;:1}]},&quot;9&quot;:0,&quot;11&quot;:4,&quot;12&quot;:0,&quot;16&quot;:10,&quot;28&quot;:1}\"><strong>Heart-type fatty acid-binding protein</strong> (H-FABP), which mainly exists in cardiomyocytes, has recently emerged as a potential biomarker, which was found to be sensitive for the early diagnosis of acute myocardial infarction. H-FABP as an early marker and cTnI as a late marker would be the ideal combination to cover the complete diagnostic window for AMI</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4ed64afdfd20483f9ce84324d54c018bx1280x1171.JPEG"
    ]
  },
  {
    "text": "A patient comes with palpitation to ER. His Pulse-180/min and BP-70mm of Hg systolic. ECG shows narrow QRS complex tachycardia with regular heart rate. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "DC Cardioversion"
      },
      {
        "id": 2,
        "text": "Adenosine"
      },
      {
        "id": 3,
        "text": "Valsalva Maneuver"
      },
      {
        "id": 4,
        "text": "Verapamil"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Management of PSVT is as follows:</p>\n<p>1) When the patient is <strong>hemodynamically stable:</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Carotid sinus massage</strong> is attempted. It is avoided if carotid bruit is present and if a prior history of stroke is present</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Valsalva maneuver</strong> is done when the patient is cooperative</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Intravenous<strong> adenosine</strong> is useful in most cases. It is usually given in a bolus dose of 6 mg (IV bolus over 2-3 seconds followed by a rapid flush with 20 mL NS followed by a dose of 12 mg if required. However, its usage is contraindicated in patients with prior cardiac transplantation as it can aggravate bronchospasm and atrial fibrillation.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Intravenous<strong> calcium channel blockers</strong> such as verapamil or diltiazem and beta-blockers are helpful but can cause hypotension.</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">If there is no termination of the PSVT, then the next step is <strong>IV ibutilide + AV nodal&ndash;blocking agent </strong>(or) <strong>IV procainamide + AV nodal&ndash;blocking agent</strong> (or)<strong> cardioversion.</strong></li>\n</ul>\n<p>2) When the patient is<strong> hemodynamically unstable,</strong> i.e. when the patient has hypotension (BP&lt;90/60) with unconsciousness or respiratory distress, QRS-synchronous <strong>DC cardioversion</strong> is done.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2fbcf5dbbd664b00b0670113380120dfx720x363.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74fdb0fbf87c4ba3af78ce55dd0c7864x530x614.PNG"
    ]
  },
  {
    "text": "High anion gap acidosis with low bicarbonate levels is seen in all the following conditions except:",
    "choices": [
      {
        "id": 1,
        "text": "Renal tubular acidosis"
      },
      {
        "id": 2,
        "text": "Diabetic ketoacidosis"
      },
      {
        "id": 3,
        "text": "Lactic acidosis"
      },
      {
        "id": 4,
        "text": "Salicylate poisoning"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Renal tubular acidosis</strong> causes <strong>normal anion gap</strong> metabolic acidosis, not high anion gap acidosis.&nbsp;</p>\n<p>Normally, in the serum, the total number of cations is equal to the total number of anions. But, a few of the <strong>anionic proteins (e.g., albumin), phosphates, sulfates, and organic anions</strong> are not measured and this is called an <strong>anion gap</strong>. It is the difference between measured cations and measured anions and is estimated as:</p>\n<p><strong>Plasma anion gap = [Na+] &minus;([Cl-]+[HCO3-])</strong></p>\n<p>The normal anion gap ranges between <strong>6-12 mEq/L.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes to the hospital with chest pain for the last 3 hours. Vitals are stable. ECG revealed ST depression and T wave inversion in anterior chest leads. Which of the following would be the most appropriate line of management in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "PCI"
      },
      {
        "id": 2,
        "text": "Thrombolysis with alteplase"
      },
      {
        "id": 3,
        "text": "Prophylaxis for arrhythmia"
      },
      {
        "id": 4,
        "text": "Aspirin with heparin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Based on the given clinical scenario of a patient presenting with<strong> sudden onset of chest pain,</strong> with ECG findings of<strong> ST depression</strong> in the anterior chest leads and<strong> T wave inversion,</strong> the most likely diagnosis is a <strong>non-ST-segment elevation-acute coronary syndrome (NSTE-ACS).</strong>\u00a0 The most appropriate line of management in this patient would be to administer<strong> aspirin with heparin.</strong></p>\n<p>Percutaneous coronary intervention is indicated after coronary angiography in high-risk patients.</p>\n<p>Fibrinolytic therapy is not indicated in patients with NSTE-ACS.</p>\n<p>Arrhythmia prophylaxis is generally not routinely recommended in all patients with NSTE-ACS.</p>\n<p><strong>Acute coronary syndrome</strong> is classified into 2 groups:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">ST-segment Elevation Myocardial Infarction <strong>(STEMI)</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>NSTE-ACS</strong></li>\n</ul>\n<p>NSTE-ACS further includes:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>NSTEMI</strong> (myocyte necrosis present and cardiac troponins elevated)</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Unstable Angina</strong> (myocyte necrosis absent and cardiac troponins not elevated)</li>\n</ul>\n<p>The diagnosis of NSTE-ACS is based on the following:</p>\n<p><strong>Severe chest discomfort</strong> with at least <strong>one of 3</strong> features:</p>\n<ul>\n<li>Occurring at rest or minimal exertion and lasting for more than 10 minutes</li>\n<li>Recent onset</li>\n<li>Crescendo pattern</li>\n</ul>\n<p><strong>ECG</strong> showing:</p>\n<ul>\n<li aria-level=\"1\"><strong>ST segment depression</strong></li>\n<li aria-level=\"1\"><strong>T wave inversion</strong></li>\n</ul>\n<p>\u00a0</p>\n<p><strong>Elevated cardiac troponins</strong> in case of NSTEMI.</p>\n<p>Management of NSTE-ACS:</p>\n<p>To provide relief of pain and discomfort, initial treatment includes bed rest, <strong>nitrates</strong>, <strong>beta blockers,</strong> and inhaled <strong>oxygen</strong> (only if arterial O2 saturation &lt;90%).</p>\n<p><strong>Antithrombotic therapy</strong> consisting of antiplatelet and anticoagulant drugs:</p>\n<ul>\n<li><strong>Dual antiplatelet therapy</strong> (DAPT): Aspirin (162-325 mg) AND one ADP receptor inhibitor (Ticagrelor, clopidogrel or prasugrel)</li>\n<li><strong>Anticoagulation:</strong> Enoxaparin, unfractionated heparin, fondaparinux or bivalirudin</li>\n<li>An early invasive strategy including <strong>diagnostic coronary angiography</strong> (within 2\u201372 hours of presentation) followed by <strong>revascularization (</strong>percutaneous coronary intervention/ coronary artery bypass grafting) is indicated for stabilized patients who are at high risk of coronary events (Based on TIMI, GRACE or HEART score).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following is the most life-threatening manifestation of CKD?",
    "choices": [
      {
        "id": 1,
        "text": "Decreased GFR"
      },
      {
        "id": 2,
        "text": "Increased creatinine"
      },
      {
        "id": 3,
        "text": "Hyperkalemia"
      },
      {
        "id": 4,
        "text": "Proteinuria"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Of the given options, <strong>hyperkalemia</strong> is the <strong>most life-threatening</strong> complication of chronic kidney disease (CKD) as it can result in <strong>cardiac arrhythmias</strong> and <strong>sudden death.</strong></p>\n<p>CKD is staged based on&nbsp;<strong>declining</strong>&nbsp;glomerular filtration rate (<strong>GFR</strong>) and <strong>albuminuria</strong>. The various clinical manifestations occur due to loss of kidney function and <strong>accumulation</strong> of various uremic toxins (<strong>urea</strong>, <strong>creatinine</strong>, and other products of protein metabolism).</p>\n<p>Complications of declining kidney function include:</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Volume overload</li>\n<li><strong>Hyperkalemia</strong></li>\n<li>Metabolic acidosis</li>\n<li>Hyperphosphatemia</li>\n<li>Mineral and bone disorders</li>\n<li>Hypertension</li>\n<li>Anemia</li>\n<li>Dyslipidemia</li>\n</ul>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with massive abdominal swelling. Paracentesis fluid was sent for lab analysis and results show serum protein to be 3g/dL and ascitic fluid protein to be 1g/dL. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Congestive heart failure"
      },
      {
        "id": 2,
        "text": "Early Budd Chiari syndrome"
      },
      {
        "id": 3,
        "text": "Late Budd Chiari syndrome"
      },
      {
        "id": 4,
        "text": "Tuberculosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The likely diagnosis in the given clinical scenario with <strong>serum-ascites albumin gradient (SAAG)</strong> <strong>&gt;1.1g/dL</strong> [calculated as serum albumin level - ascitic fluid albumin level, which in this case is 3-1=2g/dL] and <strong>ascitic fluid protein &lt;2.5 g/dL</strong> is<strong> late Budd Chiari syndrome.</strong></p>\n<p>Serum-ascites albumin gradient (SAAG) can be used to differentiate between ascites due to <strong>portal hypertension</strong> and <strong>non-portal hypertensive ascites.</strong> It represents the pressure within the hepatic sinusoids and correlates with the <strong>hepatic venous pressure gradient.</strong></p>\n<p>It is given by the formula:&nbsp;SAAG = Serum albumin level - Ascitic fluid albumin level</p>\n<p>Interpretation of SAAG:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">SAAG <strong>&ge;1.1</strong> g/dL indicates that the ascites is due to increased pressure in the hepatic sinusoids. It reflects the presence of<strong> portal hypertension.</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">SAAG <strong>&lt;1.1</strong> g/dL indicates that the ascites is not related to portal hypertension. It may be due to i<strong>nfection or malignancy.</strong></li>\n</ul>\n<p>In cases with high-SAAG (&ge;1.1), <strong>ascitic protein level analysis</strong> further helps in identifying the etiology:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>&ge;2.5 g/dL</strong> indicates that the hepatic sinusoids are normal and are allowing the passage of protein into the ascites as in <strong>early Budd-Chiari syndrome.</strong></li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>&lt;2.5 g/dL</strong> indicates that the hepatic sinusoids have been damaged and scarred and no longer allow passage of protein as in <strong>late Budd-Chiari syndrome</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Iritis is seen in all except:",
    "choices": [
      {
        "id": 1,
        "text": "SLE"
      },
      {
        "id": 2,
        "text": "Behcet's disease"
      },
      {
        "id": 3,
        "text": "Ulcerative colitis"
      },
      {
        "id": 4,
        "text": "Rheumatoid arthritis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Iritis is seen in all the above conditions except rheumatoid arthritis.</p>\n<p><strong>Iritis</strong> or iridocyclitis is also known as <strong>anterior uveitis.&nbsp;</strong></p>\n<p>Anterior uveitis is seen in:</p>\n<ul>\n<li>Ankylosing spondylitis</li>\n<li>Juvenile rheumatoid arthritis</li>\n<li>Psoriasis</li>\n<li>Reactive arthritis</li>\n<li><strong>Systemic lupus erythematosus</strong></li>\n<li>Leprosy</li>\n</ul>\n<p><strong>Posterior uveitis&nbsp;</strong>is seen in:</p>\n<ul>\n<li>Vogt-Koyanagi Harada syndrome</li>\n<li>Diseases like toxoplasmosis, cysticercosis, coccidioidomycosis, toxocariasis, histoplasmosis</li>\n<li>Infections- Candida, Pneumocystis carinii, Cryptococcus, Aspergillus, and Cytomegalovirus</li>\n<li>Cat-scratch disease, Whipple&rsquo;s disease, and brucellosis</li>\n</ul>\n<p><strong>Both</strong> anterior and posterior uveitis is seen in:</p>\n<ul>\n<li>Sarcoidosis</li>\n<li>Behcet's disease</li>\n<li>Inflammatory bowel disease</li>\n<li>Herpes infections, Syphilis, Lyme disease, TB, onchocerciasis</li>\n</ul>\n<p><strong>Intermediate uveitis/pars planitis</strong>&nbsp;is seen in multiple sclerosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 13-year-old boy collapsed while playing football. ECG showed V5, V6 inversion and prominent inverted T-waves. 2D echocardiography showed systolic anterior motion of the mitral valve leaflet. Which of the following features will be seen on clinical examination and which of the following are true regarding the management?",
    "choices": [
      {
        "id": 1,
        "text": "1 & 3, a, c, d"
      },
      {
        "id": 2,
        "text": "2 & 4, b,  c,  e"
      },
      {
        "id": 3,
        "text": "1 & 3, a, d"
      },
      {
        "id": 4,
        "text": "2 & 4, b, e"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario of a <strong>young</strong> patient with a history of <strong>sudden collapse</strong> following <strong>physical activity</strong> along with ECG findings of <strong>V5, V6 inversion,</strong> and <strong>prominent inverted T-waves,</strong> and 2D echocardiography showing the <strong>systolic anterior motion</strong> of the <strong>mitral</strong> valve leaflet point toward a diagnosis of <strong>hypertrophic obstructive cardiomyopathy (HCM).</strong></p>\n<p>In HCM, clinical examination may reveal <strong>pulsus bisferiens</strong> and an<strong> ejection systolic murmur</strong> that increases on <strong>standing</strong>.</p>\n<p>Beta-blockers and implantable cardioverter-defibrillators (ICD) are used in the management.</p>\n<p>HCM is a<strong> leading cause of sudden death in young.</strong> It is inherited in an <strong>autosomal dominant</strong> pattern with variable penetrance. HCM is characterized by the <strong>thickening</strong> of the septal myocardium below the aortic valve leading to <strong>obstruction</strong> of the<strong> left ventricular outflow tract.</strong></p>\n<p><strong>Symptoms:</strong></p>\n<ul>\n<li>Exertional dyspnea</li>\n<li>Syncope</li>\n<li>Angina, palpitations, cardiac arrhythmias</li>\n<li><strong>Sudden cardiac death </strong>(particularly during or after intense physical activity)</li>\n</ul>\n<p>\u00a0</p>\n<p>\u00a0</p>\n<p><strong>Examination:</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Systolic ejection murmur</strong> best heard at the <strong>apex</strong> or lower left sternal border</li>\n</ul>\n<table>\n<tbody>\n<tr>\n<td>Parameters\u00a0</td>\n<td>\u00a0Murmur intensity increased</td>\n<td>Murmur intensity decreased</td>\n</tr>\n<tr>\n<td>\n<p>Preload\u00a0</p>\n<p>\u00a0</p>\n</td>\n<td>\n<p>Valsalva</p>\n<p>Standing</p>\n<p>(\u2193preload = \u2191obstruction)</p>\n</td>\n<td>\n<p>Squatting \u00a0</p>\n<p>Passive leg raising</p>\n<p>(\u2191preload = \u2193obstruction)</p>\n</td>\n</tr>\n<tr>\n<td>\n<p>Force of contraction</p>\n</td>\n<td>\n<p>Exercise</p>\n<p>(\u2191force = \u2191obstruction)</p>\n</td>\n<td>\u00a0</td>\n</tr>\n<tr>\n<td>\n<p>Afterload</p>\n<p>\u00a0</p>\n</td>\n<td>\n<p>Vasodilators\u00a0</p>\n<p>(\u2193afterload = \u2191obstruction)</p>\n</td>\n<td>\n<p>Isotonic handgrip</p>\n<p>Squatting</p>\n<p>(\u2191afterload = \u2193obstruction)</p>\n</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Holosystolic murmur from mitral regurgitation</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Sustained apex beat</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>S4</strong> gallop</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Paradoxical split of S2\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Pulsus bisferiens</strong>: LV outflow obstruction causes a sudden quick rise of the pulse followed by a slower longer rise.</li>\n</ul>\n<p>ECG findings:</p>\n<p>\u00a0</p>\n<ul>\n<li><strong>Left axis deviation</strong></li>\n<li>P wave abnormalities\u00a0</li>\n<li>Prominent abnormal Q waves</li>\n<li>Deeply inverted T waves\u00a0</li>\n</ul>\n<p>Echocardiography findings:</p>\n<p>\u00a0</p>\n<ul>\n<li aria-level=\"1\"><strong>LV wall thickness \u226515 mm</strong></li>\n<li aria-level=\"1\"><strong>Systolic anterior motion</strong> of the mitral valve leaflet</li>\n<li aria-level=\"1\">Mitral regurgitation</li>\n</ul>\n<p>\u00a0</p>\n<p>Treatment:\u00a0</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Beta-blockers</strong> and <strong>calcium channel blockers</strong> are the first-line treatment\u00a0</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\"><strong>Implantable cardioverter-defibrillator (ICD)</strong> - indicated when the history of cardiac arrest or sustained ventricular tachycardia is present</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are posted as an intern in casualty. An elderly 60-year-old man is brought to you with complaints of chest pain. He has tested positive for COVID. Which of the following features will prompt you to get this patient admitted to dedicated COVID Health Centre?",
    "choices": [
      {
        "id": 1,
        "text": "A & B only"
      },
      {
        "id": 2,
        "text": "A, B, C, & E only"
      },
      {
        "id": 3,
        "text": "A, B & C only"
      },
      {
        "id": 4,
        "text": "A, B, C, D & E"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>A, B, C &amp; E</strong> are clinical criteria of admission under COVID-19 ward.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/43d094ce4619426698ff0444460bf1f9x1280x4371.JPEG"
    ]
  },
  {
    "text": "Correct sequence after p wave:\nA- 'a' wave\nB- 1st heart sound\nC- Rapid filling of ventricles\nD- 't' wave",
    "choices": [
      {
        "id": 1,
        "text": "ABCD"
      },
      {
        "id": 2,
        "text": "ABDC"
      },
      {
        "id": 3,
        "text": "CABD"
      },
      {
        "id": 4,
        "text": "ACBD"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct sequence is <strong>ABDC</strong>.</p>\n<p>A - '<strong>a' wave</strong>: The 'a' wave in the JVP waveform corresponds to <strong>atrial contraction</strong> and<strong> occurs just after the P wave </strong>on the ECG (which corresponds to atrial depolarization)&nbsp;and just before the first heart sound.</p>\n<p>B- <strong>1st heart sound</strong>: The <strong>closure of the mitral and tricuspid valves</strong> at the beginning of <strong>ventricular systole</strong> produces the 1st heart sound (S1) as the change in pressure across the AV valves causes them to close. This sound occurs soon after the QRS complex on the ECG waveform representing <strong>ventricular depolarization</strong>.</p>\n<p>The <strong>x-descent</strong> of the JVP waveform is associated with the <strong>ventricular systole.</strong> The <strong>c-wave</strong> occurs due to the bulging of the <strong>tricuspid</strong> valve into the <strong>atrium</strong> until the <strong>semilunar valves open.</strong></p>\n<p>D - <strong>'T' wave</strong>: Following ventricular depolarization, the <strong>ventricles</strong> start to <strong>repolarize</strong> represented by the 'T' wave on &nbsp;ECG. The <strong>2nd heart sound</strong> (S2) occurs due to the <strong>closure of the semilunar valves.</strong></p>\n<p>C- <strong>Rapid filling of ventricles</strong>: Ventricular repolarization triggers the <strong>ventricles</strong> to enter <strong>diastole</strong>. During early diastole, there is a phase of <strong>rapid filling</strong> of the ventricles. This occurs as the atrial pressure exceeds the ventricular pressure, allowing blood to passively flow from the atria to the ventricles.</p>\n<p>The <strong>3rd heart sound</strong> (S3) may be heard here. This event is associated with the <strong>v-wave </strong>and the<strong> y-descent </strong>on the JVP waveform as the ventricle relaxes further.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4dc1acd358c34e4fa932bc171e0f44edx1279x1280.JPEG"
    ]
  },
  {
    "text": "A 23-year-old medical student diagnosed with dengue developed epistaxis that resolved spontaneously. He has been afebrile for the last 24 hours, and his platelet count is 14,000/\u03bcL. His BP is 110/70 mmHg and there is a 28% rise in hematocrit. What should be the management?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "1, 2, and 4"
      },
      {
        "id": 3,
        "text": "2, 3, and 4"
      },
      {
        "id": 4,
        "text": "2 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical picture of a student diagnosed with <strong>dengue</strong> with history of an afebrile period, epistaxis, reduced platelet count and elevated hematocrit strongly suggests <strong>dengue hemorrhagic fever.</strong></p>\n<p>He should be kept under <strong>observation</strong> and given adequate<strong> oral and intravenous fluids</strong> <strong>(Statements 2,3 and 4).</strong>&nbsp;&nbsp;</p>\n<p><strong>Clinical criterion</strong> for dengue hemorrhagic fever is:</p>\n<ul>\n<li>Acute onset fever lasting 2-7 days.</li>\n<li>Hemorrhagic manifestations: positive tourniquet test, petechiae, ecchymoses, purpura, or <strong>bleeding from the mucosa,</strong> gastrointestinal tract, injection sites, or other locations.</li>\n<li>Platelet count <strong>&le; 100,000 cells/mm.</strong></li>\n<li>Objective evidence of plasma leakage: <strong>rising hematocrit</strong>/ haemoconcentration of &ge;20% from baseline or signs of plasma leakage (e.g., pleural effusion, ascites, hypoproteinemia/ albuminemia).</li>\n</ul>\n<p><strong>Severe</strong> dengue symptoms often come after the fever has <strong>subsided</strong>, when the capillary permeability may increase along with <strong>rising hematocrit</strong> levels. Progressive leukopenia, followed by a rapid decrease in platelet count, often precedes plasma leakage.</p>\n<p>The main pathology in dengue is plasma leakage, resulting in intravascular volume depletion and thereby shock. So, supportive management with <strong>oral or intravenous rehydration</strong> is the mainstay of treatment. If the patient is febrile, <strong>paracetamol</strong> is administered to maintain body temperature. NSAIDs should be avoided since they can cause gastritis, platelet dysfunction, and severe bleeding.</p>\n<p>Patients should be kept under <strong>observation</strong> and vital parameters like blood pressure, urine output, platelet count, and rise or fall in hematocrit should be monitored.</p>\n<p>Indications for <strong>platelet transfusion</strong> in dengue:</p>\n<p>&nbsp;</p>\n<ul>\n<li>Platelet count &lt; 10,000/cu.mm.</li>\n<li>Prolonged shock with coagulopathy and abnormal coagulogram</li>\n<li>Systemic massive bleeding</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following are true regarding KF ring?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2 and 5 only"
      },
      {
        "id": 2,
        "text": "1 and 5 only"
      },
      {
        "id": 3,
        "text": "1, 2, 3, 4 and 5"
      },
      {
        "id": 4,
        "text": "2, 3, 4 and 5 only"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>While it is a characteristic sign of Wilson&rsquo;s disease (<strong>statement 2</strong>), it can also be seen in:&nbsp;</p>\n<ul>\n<li>Primary biliary cholangitis</li>\n<li>Primary sclerosing cholangitis</li>\n<li>Cholestasis</li>\n</ul>\n<p>KF rings are present in almost <strong>95% </strong>of patients of Wilson's disease with neurological/psychiatric symptoms compared to around 65% of those with hepatic presentations<strong> (statement 4).</strong></p>\n<p>They <strong>disappear</strong> on treatment with <strong>copper-chelating agents</strong> like <strong>d-penicillamine </strong>(while desferrioxamine is an iron chelating agent) and <strong>reappear</strong> with disease progression<strong> (statement 3).</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/af5e1b00249b45648917b1cc46d266bfx720x632.PNG"
    ]
  }
];
        let quizName = '214 Medicine Aiims 2020 (May And Nov Ini-Cet)';
        let hierarchy = ["Marrow", "PYQs", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>