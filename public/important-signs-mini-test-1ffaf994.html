<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Important Signs Mini Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2025
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The spinal X-ray of a patient with chronic back pain is shown below. What could be the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Osteosarcoma"
      },
      {
        "id": 2,
        "text": "Osteoid osteoma"
      },
      {
        "id": 3,
        "text": "Chondrosarcoma"
      },
      {
        "id": 4,
        "text": "Metastases"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given X-ray shows the\u00a0<strong>winking owl sign</strong>, which\u00a0is seen in<strong> spinal metastases. </strong>It\u00a0refers to the appearance of the spine when a <strong>pedicle</strong> is <strong>absent</strong>.\u00a0</p>\n<p>The usual appearance of the pedicle representing two eyes on the AP projection is lost, as one pedicle is destroyed. It then appears like one eye is open and the other is winking or shut.\u00a0Potentially, all bony metastasis can do this. However, <strong>breast</strong> <strong>cancer</strong> and <strong>lung cancer</strong> are <strong>commonly associated</strong> with this condition.</p>\n<p>The 2 images given below show X-rays with a winking owl signs on different sides.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fe13a01bde414acea70a36a692b6c064.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5b117a4b60ad4a0bbbef124066d8f14ax1279x1198.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6a4d2be9642140c99db7f2ab13d0b1efx986x530.PNG"
    ]
  },
  {
    "text": "A 10-year-old girl was brought to the OPD by her mother, who was concerned that her daughter was shorter than her classmates. On examination, you notice that the girl has a webbed neck, shield-shaped chest and low posterior hairline. Suspecting a genetic disorder, you get a chest X-ray done. Which of the following signs will be seen on the X-ray?",
    "choices": [
      {
        "id": 1,
        "text": "Egg-on-a-string sign"
      },
      {
        "id": 2,
        "text": "Figure of 3 sign"
      },
      {
        "id": 3,
        "text": "Snowman\u2019s sign"
      },
      {
        "id": 4,
        "text": "Gooseneck sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the given clinical scenario, the symptoms of <strong>short stature, webbed neck, shield-shaped chest</strong> and<strong> low posterior hairline </strong>in the 10-year-old girl are highly suggestive of <strong>Turner's syndrome.</strong> The cardiovascular lesion associated with Turner's syndrome is <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"><strong>coarctation of the aorta</strong> which shows the <strong>figure 3 sign </strong>on X-ray.</span></p>\n<p><strong>Figure 3 sign</strong> is <strong>pathognomonic</strong> of coarctation of the aorta and occurs due to indentation of the aorta at the site of coarctation and pre and post-stenotic dilatation along the left paramediastinum.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a93e28716f64f16b97f844cdf7c744ax510x688.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1af074e02bed4c1d9b6724fca4e566dfx600x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/154bdf156ec448e4a05b1f24d6a63205x1024x667.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/727d97fe270845d2806d602ed3ab2949x1280x1561.GIF"
    ]
  },
  {
    "text": "A young man presents to the emergency department with complaints of severe abdominal pain and 3 episodes of vomiting in the past 9 hours. He says that the pain radiates to the back and is partially relieved by bending forwards. The abdominal radiograph of the patient is given below. What is the sign that is seen in the radiograph?",
    "choices": [
      {
        "id": 1,
        "text": "Sentinel loop sign"
      },
      {
        "id": 2,
        "text": "Colon cut-off sign"
      },
      {
        "id": 3,
        "text": "Renal halo sign"
      },
      {
        "id": 4,
        "text": "Obliteration of psoas shadow"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given erect abdominal x-ray shows the <strong>colon cut-off sign</strong>, which is seen in <strong>acute pancreatitis.</strong></p>\n<p>The<strong> colon cut-off sign </strong>describes gaseous distension seen in the<strong> proximal colon </strong>associated with the narrowing of the <strong>splenic flexure</strong>. Though originally described in abdominal radiographs, this sign has also been demonstrated in contrast enema and computed tomography.</p>\n<p>This appearance results from an <strong>inflammatory process </strong>extending from the pancreas into the<strong> phrenico-colic ligament</strong> via the <strong>transverse mesocolon</strong>. This causes <strong>functional spasm</strong> of the splenic flexure, resulting in the colon cut-off sign.</p>\n<p>Other options:</p>\n<p>Option A: <strong>Sentinel loop sign </strong>refers to the generalized or localized ileus of the intestine adjacent to the pancreas. A sentinel loop refers to a short segment of <strong>adynamic ileus</strong> adjacent to an intra-abdominal inflammatory process. It is seen in <strong>acute pancreatitis.</strong></p>\n<p>Option C: <strong>Renal halo sign</strong> is produced by the apparent enhancement of the perirenal fat by an adjacent retroperitoneal exudate in the pararenal space. It is seen in acute pancreatitis.</p>\n<p>Option D: <strong>Obliteration of the psoas shadow</strong> on imaging often indicates <strong>retroperitoneal pathology</strong>, such as infection, haemorrhage, or malignancy. It can suggest<strong> psoas abscess </strong>or<strong> inflammation</strong> in adjacent structures.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/12e23350719e4306964902fa91bb5171.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old primigravida has come for an antenatal ultrasound examination. The sonographic image appears as shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spina bifida"
      },
      {
        "id": 2,
        "text": "Anencephaly"
      },
      {
        "id": 3,
        "text": "Holoprosencephaly"
      },
      {
        "id": 4,
        "text": "Omphalocele"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows the <strong>lemon sign</strong>, which is seen in <strong>spina bifida.</strong></p>\n<p><strong>Spina bifida</strong>\u00a0is the common\u00a0<strong>open neural tube defect</strong>\u00a0associated with hydrocephalus and<strong> Arnold-Chiari II </strong>malformation. It is the most common open neural tube disorder.</p>\n<p>Spina bifida is characterized by a cleft in the vertebral column with a corresponding defect in the skin so that the<strong> meninges and spinal cord are exposed.</strong></p>\n<p><strong>The lemon sign</strong> is related to changes in the configuration of the <strong>fetal frontal bone</strong> that loses convexity, becoming concave or linear at ultrasonography, and can be found during the <strong>first six months of gestation.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/280bbf1f2f154b0e9b4d202758f10ad2.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d1942720aaa54f17aff0720e1f27f6adx510x548.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c1d5ea08e2e14850b4b08465ddddd40ex510x785.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d4a41a85c34b46ed8a5b6d1cc0c85e6ax510x739.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa48c86d5f874668b54996c4516d9cd0x512x392.PNG"
    ]
  },
  {
    "text": "A 45-year-old man with a history of tuberculosis presents to the OPD with chronic cough, occasional hemoptysis, and persistent chest pain. A chest X-ray reveals a lesion, where the air inside shifts with changes in the patient\u2019s position. What is the radiographic sign observed in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Signet ring sign"
      },
      {
        "id": 2,
        "text": "Finger in glove sign"
      },
      {
        "id": 3,
        "text": "Monod's sign"
      },
      {
        "id": 4,
        "text": "Halo sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The chest X-ray reveals a <strong>crescent-shaped radiolucent</strong> area surrounding a<strong> fungal ball</strong>, known as <strong>Monod's sign</strong>, commonly observed in <strong>aspergilloma</strong> within a pre-existing lung cavity.</p>\n<p><strong>Aspergilloma </strong>or <strong>fungal ball</strong> is a late manifestation of chronic <strong>cavitary pulmonary aspergillosis </strong>(CPA) caused by <strong>Aspergillus</strong> species. A fungal ball is formed within the pulmonary cavity of CPA by the peeled-off inner layer of the cavity.\u00a0</p>\n<p>Patients present with chronic features of fatigue<strong>, weight loss, </strong>cough, hemoptysis, and <strong>wheezing</strong>. However, clinical features such as foul-smelling sputum and night sweats are more commonly observed in Tuberculosis which helps in differentiating the two conditions.</p>\n<p><strong>Chest X-ray</strong> shows a spherical or ovoid mass within a cavity. The mass is <strong>mobile</strong>. CT demonstrates a rounded mass within a cavity.</p>\n<p>Images below show chest x-ray and CT findings in <strong>aspergilloma.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f0ca7102ebb8435dbaa7c4242dea1722.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b19d56e7922246ff8b34487efc004224x704x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3842f833af034fe7a60cd266d7f20d3bx400x400.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0fcb4672377844b1b8a77e9acd66922ex720x550.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/396f18ec2268436696c79ee7bd27d2abx1212x1140.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/602db6445753497ab36486f5a3b119e0x850x1146.PNG"
    ]
  },
  {
    "text": "A 24-year-old female visits the OPD with complaints of irregular menstruation, with her last menstrual period being two months back. On per-speculum examination, you find a bluish hue of the vagina and vestibule. Which of the following signs may additionally be observed on per speculum examination?",
    "choices": [
      {
        "id": 1,
        "text": "Hegar\u2019s sign"
      },
      {
        "id": 2,
        "text": "Goodell's sign"
      },
      {
        "id": 3,
        "text": "Palmer\u2019s sign"
      },
      {
        "id": 4,
        "text": "Piskacek\u2019s sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient with irregular menstruation and an LMP of 2 months back with a <strong>bluish hue</strong> in the vagina (<strong>Chadwick sign</strong>) is exhibiting signs of early pregnancy. Out of the given signs of pregnancy, <strong>Goodell's sign</strong> is a<strong> cervical change,</strong> i.e. <strong>softening</strong> of the cervix, which can be observed on <strong>per speculum examination</strong>. <strong>Hegar's</strong>,<strong> Piscaceks </strong>and<strong> Palmer's</strong> are<strong> uterine signs</strong>\u00a0elicited by bimanual examination.\u00a0</p>\n<p>The objective signs of early pregnancy in the cervix and uterus are:</p>\n<table style=\"width: 465px;\">\n<tbody>\n<tr>\n<td style=\"width: 79px;\">Sign</td>\n<td style=\"width: 286px;\">Feature</td>\n<td style=\"width: 86px;\">Seen in</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\">Jacquemier's/Chadwick</td>\n<td style=\"width: 286px;\">The dusky hue of the vaginal wall</td>\n<td style=\"width: 86px;\">8th week</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\">Osiander's</td>\n<td style=\"width: 286px;\">Increased pulsation felt through the lateral fornices</td>\n<td style=\"width: 86px;\">8th week</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\"><strong>Goodell's</strong></td>\n<td style=\"width: 286px;\">Softening of cervix</td>\n<td style=\"width: 86px;\">6th week</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\"><strong>Hegar's</strong></td>\n<td style=\"width: 286px;\">Bimanual examination with two fingers in the anterior fornix and fingers of the other hand behind uterus, abdominal and vaginal fingers seem to oppose below the body of the uterus, which is due to softening of the isthmus.</td>\n<td style=\"width: 86px;\">6-10 weeks</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\"><strong>Palmer's</strong></td>\n<td style=\"width: 286px;\">Rhythmic uterine contraction on bimanual examination</td>\n<td style=\"width: 86px;\">4-8 weeks</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\">Von Braun-fernwald's</td>\n<td style=\"width: 286px;\">Irregular softening and enlargement of uterine fundus</td>\n<td style=\"width: 86px;\">5-8 weeks</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\"><strong>Piskacek's</strong></td>\n<td style=\"width: 286px;\">One half of the uterus is firmer than the other half in case of lateral implantation</td>\n<td style=\"width: 86px;\">7-8 weeks</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\">Ladin's</td>\n<td style=\"width: 286px;\">Softening in the midpoint of the isthmus anteriorly</td>\n<td style=\"width: 86px;\">6th week</td>\n</tr>\n<tr>\n<td style=\"width: 79px;\">Placental/Hartman's</td>\n<td style=\"width: 286px;\">Cyclical bleeding at the time of implantation</td>\n<td style=\"width: 86px;\">up to 12 weeks</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fa74bc9dd5dd42c9b5bc45ab5d942019x400x797.PNG"
    ]
  },
  {
    "text": "The following findings are noted when patient A attempts to make a fist and patient B tries to extend his fingers. What are the nerve injuries seen in patients A and B respectively?",
    "choices": [
      {
        "id": 1,
        "text": "Proximal ulnar nerve, Distal median nerve"
      },
      {
        "id": 2,
        "text": "Distal median nerve, Proximal ulnar nerve"
      },
      {
        "id": 3,
        "text": "Proximal median nerve, Distal ulnar nerve"
      },
      {
        "id": 4,
        "text": "Distal ulnar nerve, Proximal median nerve"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In patient <strong>A</strong>, the hand's attitude while attempting to make a fist is called the<strong> Benediction hand sign</strong> and is seen in <strong>proximal median nerve injury</strong>. In patient <strong>B</strong>, a similar attitude seen at rest or while extending the fingers is called the<strong> partial claw hand</strong> and is seen in <strong>distal ulnar nerve injury.\u00a0</strong></p>\n<p>The 2 main muscles that are paralyzed in ulnar and median nerve injuries leading to characteristic hand deformities are the<strong> lumbricals </strong>and the <strong>flexor digitorum profundus</strong>. <strong>Distal</strong> <strong>nerve lesions </strong>affect only the<strong> lumbricals</strong> while <strong>proximal nerve injuries</strong> affect<strong> both muscles</strong>. This forms the basis of the different deformities of the hand seen.</p>\n<p>The lumbricals are small muscles of the hand and are<strong> 4</strong> in number. The function of the lumbricals is to<strong> flex metacarpophalangeal joints </strong>and<strong> extend</strong> the<strong> interphalangeal joints</strong> of <strong>2nd\u20135th </strong>digits. The <strong>first</strong> and <strong>second lumbrical</strong> (lateral 2) are supplied by the <strong>median nerve</strong> while the<strong> third</strong> and<strong> fourth lumbrical</strong> (medial 2) are supplied by the <strong>deep branch</strong> of the <strong>ulnar nerve.</strong></p>\n<p>In the forearm, the <strong>flexor digitorum profundus</strong> is a flexor of the distal phalanges after the <strong>flexor digitorum superficialis</strong> has flexed the middle phalanges. It secondarily flexes the other joints of the fingers and the wrist. The <strong>medial half</strong> of this muscle is supplied by the<strong> ulnar nerve </strong>while the<strong> lateral half</strong> is supplied by the <strong>anterior interosseous nerve </strong>(branch of median nerve).</p>\n<p><strong>Ulnar nerve injuries:</strong></p>\n<p><strong>Distal injury</strong>: Thus an injury to the <strong>distal ulnar nerve </strong>affects the<strong> 3rd and 4th lumbricals</strong> sparing the flexor digitorum profundus. This causes <strong>hyperextensio</strong>n at the <strong>metacarpophalangeal joints</strong> and<strong> flexion</strong> at the <strong>interphalangeal joints</strong>, involving the ring and little fingers. This attitude of the hand known as the<strong> ulnar claw hand </strong>may be seen at rest and is more pronounced on attempting to extend the fingers as seen in <strong>patient B</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4deb55bef1cd42799fa00d1332973b59.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c1d8773435744cefb28b49533fe26abax720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/314c57115f204ebfb1d5c1314b944758x1279x1442.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/317bd8b74bcb45bca4dfa3c9f3917542x1279x1225.JPEG"
    ]
  },
  {
    "text": "A 35-year-old patient with chronic low-back ache underwent an oblique X-ray of the LS spine. The X-ray is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Normal Spine"
      },
      {
        "id": 2,
        "text": "Spondylolisthesis"
      },
      {
        "id": 3,
        "text": "Spondylolysis"
      },
      {
        "id": 4,
        "text": "Spinal tuberculosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In the X-ray given, there is a <strong>break</strong> in the region of <strong>pars interarticularlis</strong> of the L4 vertebra, which appears like a <strong>beheaded\u00a0Scottish terrier sign</strong>. This is diagnostic of <strong>spondylolisthesis.</strong>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4edb0ebd268142a8bd129218f0b3a42c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2e117da7ba14b1d84b4f94f2626c13ex319x356.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cb396db3386143b7a7578f0e22803c28x940x1600.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/089716fbc8e74850a1f332a1231615c0x1280x1361.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8529954640e249a4839074ae5d958b7bx1280x3636.JPEG"
    ]
  },
  {
    "text": "A young boy was brought to the casualty with a history of fever and abdominal pain. On examination, he was febrile,pulse rate was 104 beats/min and there was right iliac fossa tenderness.The CT scan image is shown below. Which of the following  signs is not seen in this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Aaron sign"
      },
      {
        "id": 2,
        "text": "Rovsing\u2019s  sign"
      },
      {
        "id": 3,
        "text": "Psoas sign"
      },
      {
        "id": 4,
        "text": "Ballance sign"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The patient is diagnosed with <strong>acute appendicitis</strong> based on the clinical presentation and a CT scan revealing an appendix measuring <strong>more than 6 mm. Ballance's sign</strong> is not associated with appendicitis but is observed in cases of a <strong>ruptured spleen.</strong></p>\n<p>Ballance sign is positive if there is a <strong>fixed dullness</strong> to\u00a0percussion\u00a0in the <strong>left flank</strong> and <strong>shifting dullness</strong> to percussion in the <strong>right flank.</strong> The fixed dullness is \u00a0due to the presence of coagulated blood near the lacerated spleen while the shifting dullness is due to the presence of blood in the peritoneal cavity.</p>\n<p>CT signs of appendicitis include <strong>an appendix measuring greater than 6 mm</strong> in diameter, appendicolith and enhancement of its wall with intravenous contrast medium\u00a0 Surrounding inflammatory changes include increased fat attenuation, fluid, phlegmon, caecal thickening, abscess and extraluminal gas.</p>\n<p>Other options:</p>\n<p>Option A:<strong> Aaron sign</strong> is pain or pressure in epigastrium or anterior chest with persistent firm pressure applied to Mcburney point.</p>\n<p>Option B:\u00a0<strong>Rovsing</strong> sign is seen in appendicitis. Deep palpation of the left iliac fossa may cause pain in the right iliac fossa.</p>\n<p>Option C: The <strong>Psoas sign</strong> is seen in appendicitis. Occasionally, an in\ufb02amed appendix lies on the psoas muscle, and the patient, often a young adult, will lie with the right hip \ufb02exed, for pain relief.</p>\n<p>Note: CT axial cuts are viewed from below to top and thus appendix is on the left of the CT image.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/992cfa7ecc2b46b38035da154c322cb6.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3379a845a6994da684dbd79ac2c0e907x1280x1564.JPEG"
    ]
  },
  {
    "text": "Sonographic evaluation of a 26-year-old woman, who presented with complaints of amenorrhea for 12 weeks revealed the twin gestation as shown in the image below.  The type of gestation seen here is which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Monochorionic Diamniotic (MCDA)"
      },
      {
        "id": 2,
        "text": "Dichorionic diamniotic (DCDA)"
      },
      {
        "id": 3,
        "text": "Monochorionic monoamniotic (MCMA)"
      },
      {
        "id": 4,
        "text": "Conjoined twins"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image shows<strong>\u00a0</strong>the<strong> lambda sign</strong> or <strong>twin peak sign</strong> seen in dichorionic diamniotic pregnancy.</p>\n<p>If the division of the inner cell mass occurs <strong>within 3 days,</strong> it results in\u00a0<strong>dichorionic diamniotic twins (DCDA)</strong></p>\n<p><span class=\"s1\">Chorionicity of the placenta </span>is best diagnosed by ultrasound at 10\u201313 weeks of gestation.\u00a0In dichorionic twins, there is a <span class=\"s1\">thick septum </span>between the two gestational sacs.</p>\n<p>A triangular projection is seen\u00a0at the base of the membrane. This is known as <span class=\"s1\">lambda or twin peak\u00a0</span>sign. The presence of lambda or twin peak sign indicates a dichorionic placenta.</p>\n<p><strong>Twinning and Time of division</strong>:</p>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<table>\n<tbody>\n<tr>\n<td>Time of division</td>\n<td>Type of twin</td>\n</tr>\n<tr>\n<td>&lt;3 days\u00a0</td>\n<td>Dichorionic diamniotic (DCDA)\u00a0</td>\n</tr>\n<tr>\n<td>4-8 days</td>\n<td>Monochorionic diamniotic (MCDA)</td>\n</tr>\n<tr>\n<td>&gt;8 days</td>\n<td>Monochorionic monoamniotic (MCMA)</td>\n</tr>\n<tr>\n<td>&gt;13 days\u00a0</td>\n<td>Conjoint twins</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b0812408981f4b5da99d104afa569dd1.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a4770773c0494d2f91d8a01c055a7873x1000x864.GIF",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3c39b06d094a4816a110e66ee04ea31ax720x548.JPEG"
    ]
  },
  {
    "text": "A person who met with an accident, and suffered from a skull fracture presents with the following finding. Identify this clinical finding.",
    "choices": [
      {
        "id": 1,
        "text": "Battle sign"
      },
      {
        "id": 2,
        "text": "Bezold abscess"
      },
      {
        "id": 3,
        "text": "Acute mastoiditis"
      },
      {
        "id": 4,
        "text": "Griesinger sign"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows <strong>Battle's sign.</strong></p>\n<p>It is <strong>retroauricular</strong> or <strong>mastoid ecchymosis</strong> that typically results from fracture of\u00a0middle cranial fossa following head trauma. <strong>Battle sign</strong> is prominent when there is a fracture of the <strong>petrous temporal bone.</strong>\u00a0</p>\n<p><strong>Signs\u00a0</strong>in basilar skull fractures:</p>\n<ul>\n<li><strong>Hemotympanum:</strong>\u00a0Pooling of blood behind the tympanic membrane, associated with fracture of the<strong>\u00a0temporal bone.</strong>\u00a0It is one of the\u00a0<strong>earliest signs</strong>\u00a0of basilar fracture.</li>\n<li><strong>Periorbital ecchymosis (raccoon eyes):</strong>\u00a0Pooling of blood surrounding the eyes, associated with fractures of the<strong>\u00a0anterior cranial fossa.</strong>\u00a0</li>\n<li><strong>Retroauricular or mastoid ecchymosis (Battle sign):</strong>\u00a0Pooled blood behind the ears in the mastoid region is associated with fractures to the<strong>\u00a0middle cranial fossa</strong>.\u00a0</li>\n<li><strong>CSF rhinorrhea or otorrhea:</strong>\u00a0<strong>Double target sign</strong><strong>,\u00a0</strong>a\u00a0double-ring pattern described with CSF-containing bloody fluid from the ear or nose, when dripped onto paper or linen.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/257ea445d6bb49d6b235fed5a5b64266.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9e450aebae6246d397bc50e97c9102e5x1280x2362.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/394c910c1cb140c387008fd998ae7de4x1279x1597.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7d18870aaee948af99142511a6a608e1x502x599.JPEG"
    ]
  },
  {
    "text": "A elderly hypertensive man presented with unilateral weakness of upper limbs and slurring of speech. NCCT scan was done to reveal the following sign. What is the name of the sign?",
    "choices": [
      {
        "id": 1,
        "text": "String sign of Kantor"
      },
      {
        "id": 2,
        "text": "Eye of tiger sign"
      },
      {
        "id": 3,
        "text": "Hyperdense MCA sign"
      },
      {
        "id": 4,
        "text": "Dural tail sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of<strong>&nbsp;unilateral weakness</strong> of <strong>upper limbs</strong> and<strong> slurring</strong> of <strong>speech</strong> in a&nbsp;<strong>hypertensive</strong> man is suggestive of <strong>stroke</strong>. The NCCT image is showing&nbsp;<strong>hyperdense MCA sign&nbsp;</strong>i.e. occlusion of middle cerebral artery (<strong>MCA</strong>) due to a <strong>hyperdense</strong> <strong>embolus. </strong>This sign is<strong>&nbsp;</strong>indicative of <strong>ischemic stroke.&nbsp;</strong></p>\n<div class=\"page\" title=\"Page 12128\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>After the clinical diagnosis of stroke is made, an emergency evaluation should be made to check patient&rsquo;s airway, breathing, and circulation (ABCs), hypoglycemia/ hyperglycemia. The main goal is to distinguish it as either an <strong>ischemic stroke</strong> <strong>or hemorrhagic stroke</strong> with the help of an emergency <strong>noncontrast head CT</strong>.&nbsp;</p>\n<div class=\"page\" title=\"Page 542\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The following signs of <strong>acute ischemia</strong> can be seen on<strong> CT</strong>:</p>\n<ul>\n<li><strong>Blurring of the gray/white junction</strong> and effacement of the sulci due to ischemic swelling of the tissues.</li>\n<li>Blurring of the margins of the gray matter structures</li>\n<li>In cases of internal carotid artery occlusion or middle cerebral artery main segment (M1) occlusion, <strong>intraluminal clot</strong> may be seen as a <strong>focal hyperdensity</strong>, known as the <strong>hyperdense MCA sign</strong>&nbsp;or <strong>hyperdense dot sign</strong>.</li>\n</ul>\n<p>Management includes:</p>\n<ul>\n<li>Reduction of blood pressure when: BP &gt;220/120 mmHg, presence of malignant hypertension or concomitant myocardial ischemia, or if blood pressure is &gt;185/110 mmHg in a patient planned for intravenous thrombolysis.</li>\n<li>Serum glucose maintained between&nbsp;<strong>60&nbsp;mg/dL and 180 mg/dL.</strong></li>\n<li><strong>IV mannitol</strong> and <strong>water restriction</strong>&nbsp;may be required to reduce edema which can lead to a mass effect.</li>\n<li><strong>Intravenous thrombolysis&nbsp;</strong>with recombinant tissue plasminogen activator (rTPA),&nbsp;<strong>alteplase</strong>&nbsp;(0.9 mg/kg), tenecteplase (0.25 mg/kg) should be immediately administered to patients with ischemic stroke who arrive in the window period (within 4.5 hours of symptom onset).</li>\n<li><strong>Endovascular mechanical thrombectomy</strong>&nbsp;is done in patients who not respond to thrombolytic therapy or in whom thrombolysis is contraindicated.</li>\n<li><strong>Oral aspirin</strong>&nbsp;with an&nbsp;<strong>initial dose of 300 mg</strong>&nbsp;should be started within 48 hours of acute ischemic stroke.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<p>Other options:</p>\n</div>\n</div>\n</div>\n</div>\n<p>Option A:<strong> String sign of Kantor</strong> is seen in <strong>Crohn's disease</strong>. It&nbsp;refers to the string like appearance of a contrast filled bowel loop due to luminal narrowing.</p>\n<p>Option B:<strong> Eye of tiger sign</strong> is seen due to T2 hypointensity in the globus pallidus with a longitudinal stripe of high intensity. It is commonly seen in <strong>pantothenate kinase-associated neurodegeneration (PKAN)</strong> but is not pathognomic of the condition. It can be seen in Wilson's disease, atypical parkinsonism and organophosphate poisoning.</p>\n<p>Option D: The <strong>dural tail sign</strong> is seen in <strong>meningioma</strong>&nbsp;due to thickening and enhancement of dura.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ba3b736cd6904cf38aaada5a8dbd622c.png"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is this finding characteristically seen?",
    "choices": [
      {
        "id": 1,
        "text": "Early onset of facial rash"
      },
      {
        "id": 2,
        "text": "Cutaneous scleroderma"
      },
      {
        "id": 3,
        "text": "Systemic Lupus Erythematosus"
      },
      {
        "id": 4,
        "text": "Dermatomyositis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows a confluent <strong>macular violaceous erythema </strong>called the <strong>V sign</strong> seen in patients with <strong>dermatomyositis.</strong></p>\n<p><strong>Dermatomyositis</strong> is an autoimmune disorder affecting, predominantly, the skin and skeletal muscle and usually presents initially with a<strong> facial rash</strong>, especially around eyelids, which can be pruritic and sore. Myositis symptoms are usually weakness and fatigue especially while climbing stairs, raising arms, and standing from sitting due to proximal muscle weakness. The presence of<strong> dysphagia</strong> points to a <strong>poorer prognosis.</strong></p>\n<p>The <strong>clinical signs</strong> seen in dermatomyositis are as follows:</p>\n<ul>\n<li><strong>Heliotrope rash</strong> around eyelids with a lilac hue.</li>\n<li><strong>Gottron papules</strong> - flat-topped lichenoid eruption on the proximal and distal interphalangeal joint.</li>\n<li><strong>Shawl sign or V sign</strong> - fixed erythematous macular erythema.</li>\n<li>Nail fold changes with <strong>periungual erythema</strong> with visible<strong> dilated capillary loops </strong>in the proximal nail fold.</li>\n<li>Proximal myopathy.</li>\n<li><strong>Poikiloderma atrophicans vascular.</strong></li>\n<li>Calcinosis cutis.</li>\n</ul>\n<p><strong>Anti\u2010Jo\u20101 antibody</strong> is commonly associated with this condition. Serum creatinine kinase levels are <strong>elevated</strong> in the majority of the patients. Management includes<strong> systemic</strong> <strong>corticosteroids </strong>which are usually effective. \u00a0</p>\n<p>The cutaneous signs of dermatomyositis are given in the image below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4a3faf9f76134657a4853d187f883fca.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c87664995b68426abc31fdb28dda9a95x1092x1390.PNG"
    ]
  },
  {
    "text": "This is the radiograph of a child with a foreign body in the oesophagus. What is the sign seen in this?",
    "choices": [
      {
        "id": 1,
        "text": "Thumb sign"
      },
      {
        "id": 2,
        "text": "Steeple sign"
      },
      {
        "id": 3,
        "text": "Double ring sign"
      },
      {
        "id": 4,
        "text": "String sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The presence of a <strong>halo</strong> <strong>sign</strong> or <strong>double</strong> <strong>ring sign</strong> is indicative of the foreign body being a <strong>button</strong> <strong>battery</strong>.</p>\n<p><strong>Button batteries</strong> and sharp objects in the oesophagus and foreign bodies associated with <strong>respiratory</strong> <strong>symptoms</strong> all mandate urgent endoscopic removal.</p>\n<p>Button batteries, in particular, are very dangerous foreign bodies, which must be expediently removed because they can cause:</p>\n<ul>\n<li><strong>Mucosal</strong> <strong>injury</strong> in 1-hour contact time</li>\n<li>Involve <strong>all</strong> <strong>layers</strong> of the <strong>oesophagus</strong> in 4 hours</li>\n</ul>\n<p>Injury is thought to be secondary to electrochemical burns from electrical discharge. <strong>Chemical</strong> <strong>burns</strong> from electrolyte alkali leakage and pressure necrosis also may contribute to mucosal injury.</p>\n<p><strong>Asymptomatic</strong> blunt objects and coins lodged in the oesophagus can be observed for up to 24 hr in anticipation of passage into the stomach.</p>\n<p>Another AP and lateral X-ray demonstrating the presence of a button battery in the oesophagus is as shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/58a8434c558740b7aec240fbba7ddeea.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/afeef29f51d64338b80e1541d4904155x1183x763.PNG",
      "https://cdn1.dailyrounds.org/uploads/c098a92de31d410287128ef8d34ede72.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ac93c3e532304e53be32f891c3915853x426x429.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9a54fa0a07cf4fce9313300fcdcddd4dx1200x1493.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f6d749d25dc9401f994415cbf015b26bx1278x416.PNG"
    ]
  },
  {
    "text": "A  patient comes with a history of difficulty in closing his eyes for the past 1 month. On examination, you note lid retraction in the right eye as shown below. What did you note on examination?",
    "choices": [
      {
        "id": 1,
        "text": "Enroth\u2019s sign"
      },
      {
        "id": 2,
        "text": "Stellwag\u2019s sign"
      },
      {
        "id": 3,
        "text": "Dalrymple\u2019s sign"
      },
      {
        "id": 4,
        "text": "Von Graefe\u2019s sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The examination finding and image show\u00a0<strong>Dalrymple's sign.</strong></p>\n<p>It is the <strong>commonest</strong> and <strong>earliest sign</strong> of <strong>Grave's ophthalmopathy</strong>. Here there is lid retraction and scleral show. The scleral show occurs due to the lid margin being level with or above the superior limbus, causing the upper sclera to become visible. The cause of lid retraction is thought to be the overactivity of levator aponeurosis and M\u00fcller muscle.</p>\n<p><strong>Grave's disease</strong> is an<strong> autoimmune</strong> disorder that results in <strong>hyperthyroidism.</strong>\u00a0In this condition, autoantibodies bind to thyroid-stimulating hormone (TSH) receptors and stimulate the secretion of thyroid hormone.\u00a0</p>\n<p>Thyroid ophthalmopathy or thyroid eye disease can be seen in Graves disease or even in euthyroid/hypothyroid patients.\u00a0<strong>Women </strong>and <strong>smokers</strong> are at higher risk of developing Grave's ophthalmopathy (otherwise known as<strong>\u00a0</strong>thyroid eye disease).\u00a0</p>\n<p><strong>Thyroid function tests\u00a0</strong>and a\u00a0<strong>thyroid autoantibody assay\u00a0</strong>should be done to assess thyroid hormone status.\u00a0</p>\n<p>Control of hyperthyroidism is effective in management. Injecting botulinum toxin to levator aponeurosis and M\u00fcller muscle may be done as a temporary measure.</p>\n<p>The other options are all signs associated with Grave's disease but do not correlate with the given image.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c9e50d739fb9488bb0f635befa194b58.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "While examining a stroke patient with UMN signs, the clinician performed the test given below and elicited a sign, which is equivalent to the babinski sign. Which is the sign elicited by the clinician?",
    "choices": [
      {
        "id": 1,
        "text": "Hoffman\u2019s sign"
      },
      {
        "id": 2,
        "text": "Bastian burns sign"
      },
      {
        "id": 3,
        "text": "Wartenberg sign"
      },
      {
        "id": 4,
        "text": "Clasp knife sign"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The sign elicited by the clinician which is equivalent to the Babinski sign is <strong>Hoffman\u2019s sign</strong>.</p>\n<p>To carry out this reflex after positioning your right index finger beneath the patient's middle finger's distal interphalangeal joint, apply a sudden downward flick to the nail. Check for any <strong>thumb reflex flexion</strong> in the patient.</p>\n<p>Other options:</p>\n<p>Option B:<strong> Bastian Burns sign</strong> is the<strong> loss of tone and deep tendon reflexes</strong> in the <strong>lower limbs </strong>with <strong>preserved sensation i</strong>n the presence of complete transection of the spinal cord <strong>above the level of conus medullaris.</strong></p>\n<p>Option C:<strong> Wartenberg sign </strong>refers to the i<strong>nvoluntary abduction of the fifth finger </strong>due to ulnar nerve palsy, often seen in cases of<strong> ulnar neuropathy,\u00a0</strong></p>\n<p>Option D: <strong>Clasp\u00a0knife sign </strong>is characterized by<strong> initial resistance to passive movement of a spastic limb</strong>, followed by a <strong>sudden release, </strong>commonly seen in <strong>upper motor neuron</strong> <strong>lesions </strong>due to corticospinal tract damage.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dafa7e620b12455bbf4ff3487918b000.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient was brought dead to the casualty. Fundoscopy exhibits the sign as shown in the image given below. Which of the following is the most accurate inference regarding the time of death?",
    "choices": [
      {
        "id": 1,
        "text": "More than 3 hours"
      },
      {
        "id": 2,
        "text": "Less than 1 hour"
      },
      {
        "id": 3,
        "text": "Less than 4 hours"
      },
      {
        "id": 4,
        "text": "More than 2 hours"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image in the above clinical scenario shows the<strong> Kevorkian sign</strong>. Hence, the most accurate time of death is <strong>less than</strong> <strong>1 hour</strong>.</p>\n<p><strong>Kevorkian sign</strong> is a postmortem change that occurs in the retinal vessels and lasts for about <strong>1 hour</strong>. This means that the patient had died within the preceding hour.\u00a0</p>\n<p>It is characterized by <strong>fragmentation </strong>of the<strong> blood column</strong> in the retinal vessels and occurs due to loss of blood pressure. It <strong>appears</strong> <strong>within minutes</strong> after death and <strong>lasts</strong> for about <strong>1</strong> <strong>hour.</strong> It can be visualized using an ophthalmoscope.</p>\n<p>Other postmortem changes occurring in the eye:</p>\n<ul>\n<li>Cornea: Dull, hazy, opaque, wrinkled.</li>\n<li><strong>Flaccidity of eyeballs</strong> occurs due to a fall in intraocular pressure (IOP). IOP reaches zero at the <strong>end of 2 hours after death</strong>.</li>\n<li><strong>Increase in potassium concentration in vitreous:\u00a0</strong> Linear increase up to 100 hours following death.</li>\n<li><strong>Tache noir:</strong> One of the post-mortem ocular signs. A film of cell debris and mucus forms <strong>two yellow triangles </strong>on the sclera on either side of the cornea, with the base towards the margin of the cornea and the apex towards the medial or lateral canthus of the eye which becomes brown and then <strong>black.</strong> It appears <strong>within 3-4 hours of death</strong>.</li>\n</ul>\n<p>The image given below shows Tache Noir:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2419dc6914414970bbc36e5e8daaa5f7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/54e688df8580409288590338bc56fbbcx736x519.PNG"
    ]
  },
  {
    "text": "You are evaluating a patient with a glomus tumor and on otoscopy you see the following image. Which of the following sign is seen here?",
    "choices": [
      {
        "id": 1,
        "text": "Cartwheel appearance"
      },
      {
        "id": 2,
        "text": "Lighthouse sign"
      },
      {
        "id": 3,
        "text": "Rising sun sign"
      },
      {
        "id": 4,
        "text": "Schwartze sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> rising sun sign</strong> is seen here, as it is a case of a <strong>glomus tumour</strong>. The rising sun appearance is seen when a tumour arises from the <strong>floor</strong> of the middle ear.\u00a0</p>\n<p><strong>Glomus tumours</strong> are the most common <strong>benign</strong> tumours of the middle ear. The tumors comprise <strong>paraganglionic cells</strong> and arise from<strong> glomus bodies </strong>which resemble carotid bodies. Glomus bodies are present in the dome of the jugular bulb and on the promontory along the course of the tympanic branch of the <strong>IXth cranial nerve.\u00a0</strong></p>\n<p>Signs seen in intratympanic glomus tumour are -</p>\n<ul>\n<li>A <strong>rising sun sign</strong> when a tumour arises from the floor of the middle ear.</li>\n<li><strong>Pulsation or Brown sign</strong>: when the ear canal pressure is raised with <strong>Siegel's speculum, </strong>the tumour pulsates and blanches, this reverses when pressure is released.</li>\n</ul>\n<p>Other presentations of glomus tumour include bleeding polyp if the tympanic membrane is breached, and pressure symptoms causing cranial nerve palsies. These are -</p>\n<ul>\n<li><strong>Dysphagia</strong> and <strong>hoarseness </strong>with unilateral paralysis of the soft palate, due to<strong> IX and X nerve.</strong></li>\n<li>Vocal cord paralysis due to X nerve.</li>\n<li>Weakness of the trapezius and sternomastoid muscles - <strong>XI nerve.</strong></li>\n<li>Atrophy of half of the tongue - <strong>XII nerve.</strong></li>\n</ul>\n<p>They are diagnosed by<strong> CT</strong> scan, <strong>MRI,</strong> and four-vessel angiography mainly. It is treated by surgery, radiation, embolization, or a combination of them.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8b7c1b7286fa42aea0c89a4a1e0ea5bb.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/13d81baadd69456bb1eb28a2005c592ax1280x1268.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e778e316fca3417f8aeb1a300bfb79b7x277x256.JPEG"
    ]
  },
  {
    "text": "Amsler sign is seen in _______.",
    "choices": [
      {
        "id": 1,
        "text": "Fuchs heterochromic iridocyclitis"
      },
      {
        "id": 2,
        "text": "Posner-Schlossman syndrome"
      },
      {
        "id": 3,
        "text": "Uveal effusion syndrome"
      },
      {
        "id": 4,
        "text": "Cystoid macular edema"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Amsler sign </strong>is seen in <strong>Fuchs heterochromic iridocyclitis (FHI).</strong></p>\n<p>Amsler sign is the <strong>hemorrhage</strong> caused by <strong>cataract surgery</strong> in FHI. During cataract surgery, fine filiform hemorrhages from the opposite angle are seen to occur as soon as the anterior chamber is opened. This is due to <strong>neovascularization.</strong></p>\n<p>Fuchs heterochromic iridocyclitis is an insidiously progressive, <strong>non-granulomatous anterior uveitis,</strong> that is usually unilateral. Stellate <strong>keratic precipitates (KPs)</strong> are seen and tiny crystals <strong>(Russell bodies)</strong> may be present on the iris surface. There are no posterior synechiae. Rubeosis iridis may be present.\u00a0</p>\n<p>Features of <strong>Fuchs heterochromic iridocyclitis</strong>:</p>\n<ul>\n<li><strong>Insidious</strong></li>\n<li>Non-granulomatous</li>\n<li><strong>Anterior</strong> uveitis</li>\n<li><strong>Unilateral</strong></li>\n<li><strong>Stellate</strong>\u00a0<strong>keratic\u00a0precipitates (KPs)</strong></li>\n<li>Tiny crystals (<strong>Russell bodies)</strong> may be present on the iris surface</li>\n<li>Absence of posterior synechiae</li>\n<li><strong>Rubeosis iridis</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-month-old child is brought by his parents with the following lesions for one week. On examination, Darier's sign is positive. Lesions are not seen in the palms, soles and face. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Caf\u00e9\u2010au\u2010lait macules"
      },
      {
        "id": 2,
        "text": "Tinea corporis"
      },
      {
        "id": 3,
        "text": "Urticaria pigmentosa"
      },
      {
        "id": 4,
        "text": "Linear Ig A dermatosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most probable diagnosis in this patient with positive Darier's sign and reddish\u2010brown maculopapular lesions on the trunk is\u00a0<strong>urticaria pigmentosa</strong>.<strong>\u00a0</strong></p>\n<p><strong>Urticaria pigmentosa\u00a0</strong>is the most common type of<strong>\u00a0cutaneous mastocytosis.\u00a0</strong>It occurs due to an increased number of mast cells in the skin.\u00a0The symptoms occur due to the release of mast cell-derived mediators.<strong>\u00a0</strong>The age of onset is in the <strong>first year</strong> in the childhood type and <strong>20\u201340 years</strong> in the adult type.</p>\n<p>It presents with numerous reddish\u2010brown or pale <strong>monomorphic</strong> maculopapules, plaques, or nodules in a<strong> symmetrical </strong>distribution. Lesions can occur anywhere but are common over the\u00a0<strong>trunk</strong> and <strong>thighs</strong>. The<strong>\u00a0palms</strong> and<strong> soles </strong>are usually <strong>spared</strong>. Even though the neck and the hairline can be affected, the\u00a0<strong>face is usually spared</strong>. It can also present with bullous lesions that heal without scarring.</p>\n<p>Other features :</p>\n<ul>\n<li>Flushing</li>\n<li>Pruritus</li>\n<li>Heat or cold intolerance</li>\n<li>Recurrent diarrhea</li>\n<li>Dyspepsia</li>\n<li>Depression</li>\n<li>Headache</li>\n</ul>\n<p><strong>Darier's</strong> sign is seen in\u00a0urticaria pigmentosa. It\u00a0refers to the development of urticaria and erythema around the lesions after mild trauma, including scratching or rubbing of the lesion. Darier's sign is<strong> not specific</strong> to mastocytosis as it is also rarely seen in <strong>juvenile xanthogranuloma</strong> and <strong>acute</strong> <strong>lymphoblastic leukemia</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aa210ee15c084bd4af42de620109929a.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/34d331505ae847c0ae02d0d6cd8e2906x1280x2310.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/98e5f258f92044849f921a9f67e16267x436x378.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b10a9129ba1e47268500a7e61b05a7fcx720x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fc01f03d0616473084a9fc73ef922112x1278x695.JPEG"
    ]
  }
];
        let quizName = 'Important Signs Mini Test';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2025"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>