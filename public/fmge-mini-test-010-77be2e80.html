<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 010 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2022
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Ethosuximide is the drug of choice in ______",
    "choices": [
      {
        "id": 1,
        "text": "GTCS"
      },
      {
        "id": 2,
        "text": "Focal seizures"
      },
      {
        "id": 3,
        "text": "Myoclonic seizures"
      },
      {
        "id": 4,
        "text": "Typical Absence seizures"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Ethosuximide is the drug of choice in Typical absence seizures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Blood spill in the operation theatre is cleaned with _____.",
    "choices": [
      {
        "id": 1,
        "text": "Chlorine compound"
      },
      {
        "id": 2,
        "text": "Phenolic compound"
      },
      {
        "id": 3,
        "text": "Quarternary ammonium compounds"
      },
      {
        "id": 4,
        "text": "Alcoholic compounds"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Sodium hypochlorite, a compound of chlorine,</strong> is the best disinfectant for surface blood spills; it is used with a concentration of <strong>0.5-5%.</strong></p>\n<p>If the spill contains large amounts of blood or body fluids, clean the visible matter with disposable absorbent material and discard the contaminated materials in appropriate, labeled containment.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You notice an obstetrics resident performing the following manoeuvres on a 37-week primigravida. Choose the correctly matched set.",
    "choices": [
      {
        "id": 1,
        "text": "1-a, 2-c, 3-b, 4-d"
      },
      {
        "id": 2,
        "text": "1-a, 2-b, 3-c, 4-d"
      },
      {
        "id": 3,
        "text": "1-b, 2-a, 3-d, 4-c"
      },
      {
        "id": 4,
        "text": "1-c, 2-b, 3-a, 4-d"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Fetal pole, lie, presenting part, engagement, and attitude of fetal head are assessed by&nbsp;<strong>Leopold's manoeuvres:</strong></p>\n<ol>\n<li><strong>Fundal grip&nbsp;</strong>(first Leopold):\n<ul>\n<li>Assesses the uterine&nbsp;<strong>fundus</strong>.</li>\n<li>Helps in identification of&nbsp;<strong>fetal lie</strong>&nbsp;and determination of <strong>fetal pole</strong> at the <strong>fundus</strong>.</li>\n<li>The<strong>&nbsp;</strong>breech<strong>&nbsp;</strong>gives the sensation of a<strong>&nbsp;</strong>large, irregular mass.&nbsp;</li>\n<li>The<strong>&nbsp;</strong>head<strong>&nbsp;</strong>feels<strong>&nbsp;</strong>hard and round<strong>&nbsp;</strong>and is<strong>&nbsp;</strong>more mobile.<strong><br /><br /></strong></li>\n</ul>\n</li>\n<li><strong>Lateral grip&nbsp;</strong>(second Leopold):&nbsp;\n<ul>\n<li>Assesses the fetal<strong>&nbsp;orientation</strong>.</li>\n<li>The palms are placed on either side of the maternal abdomen, and gentle but deep pressure is exerted.</li>\n<li>The&nbsp;<strong>back</strong>&nbsp;is felt on one side as a&nbsp;<strong>hard</strong>, resistant structure.</li>\n<li>The&nbsp;<strong>fetal extremities</strong>&nbsp;are felt on the other side as&nbsp;<strong>numerous</strong>&nbsp;small, irregular,&nbsp;<strong>mobile parts</strong>&nbsp;are felt.</li>\n<li>Fetal orientation can be determined by noting whether the back is directed anteriorly, transversely, or posteriorly.</li>\n<li>The&nbsp;<strong>position&nbsp;</strong>of the<strong>&nbsp;anterior shoulder</strong>&nbsp;is mainly assessed by this grip.<br /><br /></li>\n</ul>\n</li>\n<li><strong>Pawlik's grip&nbsp;</strong>/ 1st pelvic grip (third Leopold):\n<ul>\n<li>Assesses the&nbsp;<strong>presenting</strong>&nbsp;<strong>part</strong>&nbsp;in respect to the true pelvis.</li>\n<li>The thumb and fingers of one hand grasp the lower portion of the maternal abdomen just above the symphysis pubis.</li>\n<li>If the presenting part is not engaged, a movable mass will be felt,&nbsp;usually the head.<br /><br /></li>\n</ul>\n</li>\n<li><strong>Deep pelvic grip&nbsp;</strong>/ 2nd pelvic grip (fourth Leopold):\n<ul>\n<li>Assesses the&nbsp;<strong>engagement,</strong>&nbsp;attitude of the fetal head and determine the <strong>degree of descent</strong>.</li>\n<li>The examiner faces the mother's feet, and the fingertips of both hands are positioned on either side of the presenting part.</li>\n<li>They exert inward pressure and then slide along the axis of the pelvic inlet.</li>\n<li>If the head has already descended into the pelvis, the anterior shoulder or the space created by the neck may be differentiated readily from the head.</li>\n<li>It is the only grip performed&nbsp;<strong>facing</strong> the <strong>feet</strong>.</li>\n</ul>\n</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5497df7f61c54a6f9216c8f5173b710c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e215ce79339c433da605c48ea10b4cc7x600x3241.JPEG"
    ]
  },
  {
    "text": "A young man was rushed to the casualty with multiple rib fractures. On examination, you notice a paradoxical movement of the chest, and the patient is diagnosed with respiratory failure. How would you manage him?",
    "choices": [
      {
        "id": 1,
        "text": "Chest tube drainage"
      },
      {
        "id": 2,
        "text": "Oxygen administration"
      },
      {
        "id": 3,
        "text": "Intermittent positive pressure ventilation"
      },
      {
        "id": 4,
        "text": "Internal operative fixation of the fractures segments"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario is suggestive of <strong>flail chest with respiratory failure.</strong> Management of this condition is\u00a0<strong>IPPV\u00a0</strong>(intermittent positive pressure ventilation).</p>\n<p>A flail chest occurs when a segment of the chest wall does not have bony continuity with the rest of the thoracic cage.\u00a0This condition results from blunt trauma associated with multiple rib fractures i.e.,\u00a0<strong>2 adjacent ribs or</strong>\u00a0<strong>3\u00a0or more ribs fractured in two or more places</strong>.\u00a0</p>\n<p>On<strong> inspiration,\u00a0</strong>the <strong>loose segment </strong>of the chest wall is <strong>displaced inwards,\u00a0</strong>and therefore, less air moves into the lungs. On <strong>expiration,</strong> the segment moves <strong>outwards</strong>. This is known as\u00a0<strong>paradoxical respiration</strong>.</p>\n<p>The <strong>diagnosis</strong> is made\u00a0<strong>clinically</strong>, not by radiography.\u00a0</p>\n<p>Treatment:</p>\n<ul>\n<li><strong>Chest strapping </strong>or splinting should be<strong> avoided.</strong></li>\n<li>Currently, treatment consists of <strong>oxygen administration</strong>, adequate<strong> analgesia </strong>(including opiates) or <strong>epidural</strong> analgesia,<strong>\u00a0</strong>and <strong>physiotherapy.</strong></li>\n<li><strong>IPPV</strong> (Intermittent Positive Pressure Ventilation) is reserved for patients developing <strong>respiratory failure</strong> despite adequate analgesia and oxygen.</li>\n</ul>\n<p>Treatment algorithm of treatment of flail chest with respiratory failure:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eb06c37ba5c841a889511b6eca3a0459x1280x1736.JPEG"
    ]
  },
  {
    "text": "A gynaecology resident noted a frothy, greenish, offensive-smelling vaginal discharge in a young lady. Whiff test was positive. Which organism is most likely implicated?",
    "choices": [
      {
        "id": 1,
        "text": "Trichomonas"
      },
      {
        "id": 2,
        "text": "Candidia"
      },
      {
        "id": 3,
        "text": "Gardnerella"
      },
      {
        "id": 4,
        "text": "Chlamydia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong><em>Trichomonas vaginalis</em></strong> is the likely organism implicated&nbsp;in this patient, causing trichomonas vaginitis.</p>\n<p>The whiff test can be positive in both <em>Trichomonas</em> and <em>Gardnerella</em> infections. However, <strong>greenish frothy discharge</strong> is seen in trichomonas vaginitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old hypertensive patient presents with dizziness and palpitations following an alcohol binge. His ECG is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Ventricular tachycardia"
      },
      {
        "id": 2,
        "text": "Focal atrial tachycardia"
      },
      {
        "id": 3,
        "text": "Ventricular fibrillation"
      },
      {
        "id": 4,
        "text": "Atrial fibrillation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario and the ECG are suggestive of&nbsp;<strong>atrial fibrillation.</strong></p>\n<p>The ECG shows narrow QRS complexes with <strong>irregular RR intervals</strong> and <strong>no distinct P waves</strong> which are the features suggestive of atrial fibrillation.</p>\n<p><strong>Atrial fibrillation</strong> is a supraventricular tachycardia caused by ectopic foci or small reentry circuits within the atria. It has an atrial rate of 400-600/min and a ventricular rate of 100-160/min. The incidence of AF <strong>increases with age</strong> and is usually associated with an acute <strong>precipitating factor</strong> such as <strong>acute alcohol intoxication</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/43b4d71a9a2441529b96fbd0a7e1e6f4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A medicine resident refers a patient with uncontrolled diabetes. Which of the following findings on a fundus examination would suggest a severe, non-proliferative diabetic retinopathy?",
    "choices": [
      {
        "id": 1,
        "text": "Significant Venous beading in any of the 4 quadrants"
      },
      {
        "id": 2,
        "text": "Micro-aneurysms in any 2 quadrants"
      },
      {
        "id": 3,
        "text": "Severe hemorrhages in all 4 quadrants"
      },
      {
        "id": 4,
        "text": "Macular star"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Severe hemorrhages in all 4 quadrants</strong> are a feature of<strong> severe NPDR.</strong></p>\n<p><span style=\"text-decoration: underline;\"><strong><em>Early Treatment of Diabetic Retinopathy Study classification:</em></strong></span></p>\n<p><span style=\"text-decoration: underline;\"><em><strong>Nonproliferative diabetic retinopathy (NPDR)-&nbsp;</strong></em></span></p>\n<ol style=\"list-style-type: upper-alpha;\">\n<li><strong>Very mild NPDR:</strong>\n<ul style=\"list-style-type: disc;\">\n<li>Microaneurysms only</li>\n<li>Management- Review in 12 months</li>\n</ul>\n</li>\n<li><strong>Mild NPDR:&nbsp;&nbsp;</strong> &nbsp;\n<ul style=\"list-style-type: disc;\">\n<li>Any or all of - microaneurysms, retinal hemorrhages, exudates, cotton wool spots, up to the level of moderate NPDR. No intraretinal microvascular anomalies (IRMA) or significant beading&nbsp;</li>\n<li>Management- Medical control of diabetes with follow-up in 9-12 months.&nbsp; &nbsp;</li>\n</ul>\n</li>\n<li><strong>Moderate NPDR:&nbsp;</strong> &nbsp; &nbsp;\n<ul style=\"list-style-type: disc;\">\n<li>Severe retinal hemorrhages (about 20 medium-large per quadrant) in 1&ndash;3 quadrants or mild IRMA&nbsp;</li>\n<li>Significant venous beading can be present in no more than 1 quadrant</li>\n<li>&nbsp;Cotton wool spots commonly present</li>\n<li>Management- Review in approximately 6 months.&nbsp;</li>\n</ul>\n</li>\n<li><strong>Severe NPDR:</strong>\n<ol style=\"list-style-type: lower-greek;\">\n<li><strong>The 4&ndash;2&ndash;1 rule; one or more of:</strong><strong><br />&bull; Severe hemorrhages in all 4 quadrants<br />&bull; Significant venous beading in 2 or more quadrants<br />&bull; Moderate IRMA in 1 or more quadrants</strong></li>\n<li>Management- Review in 4 months.&nbsp;</li>\n</ol>\n</li>\n<li><strong>Very severe NPDR:</strong>\n<ul style=\"list-style-type: disc;\">\n<li>Two or more of the criteria for severe NPDR</li>\n<li>Review in 2&ndash;3 months.</li>\n</ul>\n</li>\n</ol>\n<p><span style=\"text-decoration: underline;\"><em><strong>Proliferative diabetic retinopathy (PDR)-</strong></em></span></p>\n<ol style=\"list-style-type: upper-alpha;\">\n<li><strong>Mild to moderate PDR:</strong>\n<ul style=\"list-style-type: disc;\">\n<li>New vessels on the disc (NVD) or new vessels elsewhere (NVE), but extent insufficient to meet the high-risk criteria</li>\n<li>Management- Prompt Pan-retinal photocoagulation is done if type 2 DM in a patient &gt;40 years of age, otherwise defer PRP</li>\n</ul>\n</li>\n<li><strong>High-risk PDR:</strong>\n<ul style=\"list-style-type: disc;\">\n<li>New vessels on the disc (NVD)&nbsp;(about 1/3 disc area)</li>\n<li>Any NVD with vitreous hemorrhage</li>\n<li>NVE greater than 1/2 disc area with vitreous hemorrhage</li>\n<li>Management-&nbsp;Prompt pan-retinal photocoagulation.</li>\n</ul>\n</li>\n</ol>\n<p>Note:</p>\n<p><strong>Macular star </strong>is a feature of <strong>malignant hypertensive retinopathy.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/da77b30560f0416d9ceabebdb927294bx1280x1359.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8d9238edd35b4a8e92acdd239c6290e7x512x399.PNG"
    ]
  },
  {
    "text": "Under the MCH programme, the Government of India advocates giving iron and folic acid daily to pregnant women. What is the dose given to them?",
    "choices": [
      {
        "id": 1,
        "text": "100 mg elemental iron + 500 mcg folic acid"
      },
      {
        "id": 2,
        "text": "100 mg elemental iron + 100 mcg folic acid"
      },
      {
        "id": 3,
        "text": "50 mg elemental iron + 500 mcg folic acid"
      },
      {
        "id": 4,
        "text": "60 mg elemental iron + 500 mcg of folic acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Under the MCH program, the government of India advocates giving <strong>60&nbsp;mg</strong> of <strong>elemental iron</strong> and <strong>500 mcg </strong>of<strong> folic acid to pregnant women.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Gestational hypertension is defined as:",
    "choices": [
      {
        "id": 1,
        "text": "BP>130/80 after 22 weeks of gestation"
      },
      {
        "id": 2,
        "text": "BP > 130/80 after 20 weeks of gestation"
      },
      {
        "id": 3,
        "text": "BP >  140/90 after 22 weeks of gestation"
      },
      {
        "id": 4,
        "text": "BP >  140/90 after 20 weeks of gestation"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Gestational hypertension</strong> is defined as&nbsp;<strong>BP &gt;140/90 </strong>after<strong> 20 weeks</strong> of gestation.</p>\n<p>Hypertension in pregnancy is defined as BP of &gt;140/90 mmHg measured 2 times with at least a 4-hour interval.</p>\n<table class=\"t1\" style=\"width: 550px; height: 324px;\" cellspacing=\"0\" cellpadding=\"0\">\n<tbody>\n<tr style=\"height: 48px;\">\n<td class=\"td1\" style=\"width: 110.65625px; height: 48px;\" valign=\"top\">&nbsp;</td>\n<td class=\"td1\" style=\"width: 128.640625px; height: 48px;\" valign=\"top\">\n<p class=\"p1\"><strong>Gestational hypertension</strong></p>\n</td>\n<td class=\"td1\" style=\"width: 171.796875px; height: 48px;\" valign=\"top\">\n<p class=\"p1\"><strong>Pre-eclampsia</strong></p>\n</td>\n<td class=\"td1\" style=\"width: 128.9375px; height: 48px;\" valign=\"top\">\n<p class=\"p1\"><strong>Chronic hypertension in pregnancy</strong></p>\n</td>\n</tr>\n<tr style=\"height: 100px;\">\n<td class=\"td1\" style=\"width: 110.65625px; height: 100px;\" valign=\"top\">\n<p class=\"p1\"><strong>Rise in BP</strong></p>\n</td>\n<td class=\"td1\" style=\"width: 128.640625px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">After 20 weeks of pregnancy</p>\n</td>\n<td class=\"td1\" style=\"width: 171.796875px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">After 20 weeks of pregnancy</p>\n</td>\n<td class=\"td1\" style=\"width: 128.9375px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">Before 20 weeks of gestation</p>\n</td>\n</tr>\n<tr style=\"height: 100px;\">\n<td class=\"td1\" style=\"width: 110.65625px; height: 100px;\" valign=\"top\">\n<p class=\"p1\"><strong>Proteinuria</strong></p>\n</td>\n<td class=\"td1\" style=\"width: 128.640625px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">Absent</p>\n</td>\n<td class=\"td1\" style=\"width: 171.796875px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">May be present:</p>\n<ul>\n<li class=\"p1\">&gt;300 mg in 24 hrs urine&nbsp;</li>\n<li class=\"p1\">&gt;30 mg/dl in a random urine sample</li>\n<li class=\"p1\">Urine dipstick 2+</li>\n</ul>\n</td>\n<td class=\"td1\" style=\"width: 128.9375px; height: 100px;\" valign=\"top\">\n<p class=\"p1\">Absent</p>\n</td>\n</tr>\n<tr style=\"height: 82px;\">\n<td class=\"td1\" style=\"width: 110.65625px; height: 82px;\" valign=\"top\"><strong>Fall in BP to normal levels</strong></td>\n<td class=\"td1\" style=\"width: 128.640625px; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Within 12 weeks of delivery</p>\n</td>\n<td class=\"td1\" style=\"width: 171.796875px; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Within 12 weeks of delivery</p>\n</td>\n<td class=\"td1\" style=\"width: 128.9375px; height: 82px;\" valign=\"top\">\n<p class=\"p1\">Does not return to normal&nbsp;</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Proteinuria is not an essential criterion to define pre-eclampsia.</p>\n<p><strong>Pre-eclampsia</strong> is <strong>hypertension</strong> with <strong>any</strong> of the following features:</p>\n<ul>\n<li>Proteinuria</li>\n<li>Thrombocytopenia</li>\n<li>Renal insufficiency</li>\n<li>Liver involvement</li>\n<li>Cerebral symptoms</li>\n<li>Pulmonary edema.</li>\n</ul>\n<p>Note:&nbsp;A normotensive pregnant woman may have an acute increase in BP from baseline levels and develop eclamptic seizures/HELLP syndrome, despite being normotensive. This condition is known as&nbsp;<strong>delta hypertension.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about a keloid scar?",
    "choices": [
      {
        "id": 1,
        "text": "The extent does not cross the wound margins"
      },
      {
        "id": 2,
        "text": "Wide excision of the keloid scar prevents recurrence"
      },
      {
        "id": 3,
        "text": "Histopathology of a keloid scar shows reduced collagen and increased vascularity"
      },
      {
        "id": 4,
        "text": "A keloid scar forms due to increase in the level of growth factors"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Keloid scars are associated with&nbsp;<strong>elevated levels of</strong>&nbsp;<strong>growth factor.</strong></p>\n<p>A keloid scar is defined as excessive scar tissue&nbsp;<strong>that extends beyond the boundaries&nbsp;</strong>of the original incision or wound. Its etiology is unknown, but is associated with&nbsp;<strong>elevated levels of</strong>&nbsp;<strong>growth factor, </strong>deeply pigmented skin, and inherited tendency and certain areas of the body (<strong>triangle whose points are the xiphisternum and each shoulder tip</strong>).&nbsp;</p>\n<p>The histology of keloid scars shows excess collagen with hypervascularity, and&nbsp;there is more&nbsp;<strong>type 3 collagen</strong>.</p>\n<p>Keloid scars do not improve spontaneously with time and <strong>excision of the keloid scar has a high rate of recurrence</strong>.</p>\n<p>Treatment:&nbsp;</p>\n<ul>\n<li>Pressure - local moulds or elastic garments.</li>\n<li>Silicone gel sheeting.</li>\n<li>Intralesional triamcinolone injection.</li>\n<li>Excision and steroid injections.</li>\n<li>Excision and post operative radiation (external beam or brachytherapy).</li>\n<li>Intralesional excision.</li>\n<li>Laser to reduce redness.</li>\n<li>Vitamin E and palm oil massage.</li>\n</ul>\n<p>Keloid Scar:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/61e40243f86143daacfc9c2ba914eaaax800x534.JPEG"
    ]
  },
  {
    "text": "The muscle marked by the arrow in the image below is innervated by ________",
    "choices": [
      {
        "id": 1,
        "text": "Dorsal scapular nerve"
      },
      {
        "id": 2,
        "text": "Suprascapular nerve"
      },
      {
        "id": 3,
        "text": "From the dorsal rami of C1"
      },
      {
        "id": 4,
        "text": "Subscapular nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The muscle marked in the above image is <strong>levator</strong> <strong>scapulae</strong>, which is innervated by the <strong>dorsal scapular nerve.</strong></p>\n<p>The <strong>appendicular group of back muscles </strong>and their innervations include:</p>\n<table style=\"height: 248px; width: 332px;\">\n<tbody>\n<tr>\n<td style=\"width: 152px;\"><strong>Muscle&nbsp;</strong></td>\n<td style=\"width: 167px;\"><strong>Nerve Supply</strong></td>\n</tr>\n<tr>\n<td style=\"width: 152px;\">\n<p>Trapezius</p>\n</td>\n<td style=\"width: 167px;\">Accessory nerve</td>\n</tr>\n<tr>\n<td style=\"width: 152px;\">\n<p>Latissimus dorsi</p>\n</td>\n<td style=\"width: 167px;\">Thoracodorsal nerve</td>\n</tr>\n<tr>\n<td style=\"width: 152px;\">\n<p>Levator scapulae</p>\n</td>\n<td style=\"width: 167px;\">Dorsal scapular nerve</td>\n</tr>\n<tr>\n<td style=\"width: 152px;\">\n<p>Rhomboid major and minor</p>\n</td>\n<td style=\"width: 167px;\">Dorsal scapular nerve</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>\n<p>Other options:</p>\n<p>The<strong> suprascapular nerve</strong>&nbsp;innervates the <strong>supra- and infraspinatus</strong> muscles.</p>\n<p>The&nbsp;<strong>subscapular nerves&nbsp;</strong>supply the teres major and subscapularis muscles.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/042cffa0cf7146b09686a470a8d8bab3.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1cc7962a39374d419793ce26976b0c05x1280x1652.JPEG"
    ]
  },
  {
    "text": "A 40-year-old female presents to the ER with a history of RTA. On examination, GCS is 15/15, Heart rate = 110/min, BP = 90/60 mmHg, and there is elevated JVP. The right chest is tympanic on percussion with decreased breath sounds. The left chest appears normal. But the patient is dyspneic and ecchymosis is noted over the chest wall. The abdomen was soft. The probable diagnosis is:",
    "choices": [
      {
        "id": 1,
        "text": "Cardiac tamponade"
      },
      {
        "id": 2,
        "text": "Tension pneumothorax"
      },
      {
        "id": 3,
        "text": "Pericardial effusion"
      },
      {
        "id": 4,
        "text": "Massive hemothorax"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The probable diagnosis is <strong>tension pneumothorax.</strong></p>\n<p>Tympanic right&nbsp;chest wall that shows reduced air entry points towards probable pneumothorax. The history of a road traffic accident,&nbsp;tachycardia, raised jugular venous pressure (JVP), and dyspnoea&nbsp;are indicative of&nbsp;tension pneumothorax.</p>\n<p>A tension pneumothorax develops when a <strong>\"one-way valve\"</strong> air leak occurs either from the lung or through the chest wall. Air is sucked into the thoracic cavity without any means of escape, completely collapsing then compressing the affected lung.</p>\n<p>A patient with <strong>pneumothorax&nbsp;</strong>presents with <strong>acute dyspnea</strong> and <strong>pleuritic chest pain</strong>. A physical examination will reveal:</p>\n<ul>\n<li>An enlarged hemithorax</li>\n<li>Decreased chest movements</li>\n<li>Hyper-resonance on percussion</li>\n<li>Absent vocal fremitus</li>\n<li>Diminished breath sounds</li>\n</ul>\n<p>In addition to the above findings, a <strong>tension pneumothorax</strong> would also have the following:</p>\n<ul>\n<li>Deviation of trachea to the opposite side</li>\n<li>Distended neck vein</li>\n<li>Cyanosis</li>\n<li>Sudden onset hemodynamic compromise:\n<ul>\n<li>Hypotension</li>\n<li>Tachycardia</li>\n<li>Low O<sub>2</sub> saturation</li>\n<li>Loss of consciousness</li>\n</ul>\n</li>\n</ul>\n<p>Tension pneumothorax is a<strong> clinical diagnosis, </strong>and treatment should never be delayed waiting for radiological confirmation.</p>\n<p>The management is&nbsp;rapid decompression using a <strong>wide-bore cannula</strong> on the affected side, followed by the <strong>insertion of a chest tube</strong> for definitive management.</p>\n<p>The X-ray below shows tension pneumothorax on the left side. There is a gross<strong> shift of mediastinum,</strong> ET tube, and trachea to the left with hyperlucency of the right hemithorax.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/82b55b3e1d764d968bd972e5fa95bf0ax720x663.JPEG"
    ]
  },
  {
    "text": "A 30-year-old man presented with a history of fever and chest pain for the last 7 days. A chest X-ray was done. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Loculated pleural effusion"
      },
      {
        "id": 2,
        "text": "Pneumothorax"
      },
      {
        "id": 3,
        "text": "Consolidation"
      },
      {
        "id": 4,
        "text": "Fibrosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario and X-ray is suggestive of <strong>loculated pleural effusion</strong>.</p>\n<p>The chest X-ray shows <strong>obliteration </strong>of <strong>right costophrenic angle</strong> with a wide pleural-based dome-shaped opacity projecting into the lung. It tracks along the costphrenic angle and lateral chest wall.</p>\n<p>A pleural lesion can be differentiated from a parenchymal lesion by the angle it makes with the chest wall. <strong>Pleural lesions</strong> makes an <strong>obtuse angle</strong> with the chest wall whereas a <strong>parenchymal lesions</strong>&nbsp;makes an <strong>acute angle</strong> with the chest wall.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1d6b2cceac7c4485bb8633fffcf61b2c.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/68ed1241d4c84862ada8b9cfc1bf4842x1280x2114.JPEG"
    ]
  },
  {
    "text": "A 3-year-old male has the following buccal mucosa finding. After three days, he presents to your OPD with a rash. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Measles"
      },
      {
        "id": 2,
        "text": "Leukoplakia"
      },
      {
        "id": 3,
        "text": "Scarlet fever"
      },
      {
        "id": 4,
        "text": "Kawasaki disease"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The given image shows <strong>Koplik spots</strong> which are small, bluish-white ulcerations on the buccal mucosa opposite the lower molar tooth. The clinical scenario and Koplik&nbsp;spots are suggestive of <strong>measles</strong>.&nbsp;</p>\n<p class=\"p1\">The virus has an incubation period of<strong>&nbsp;</strong>8-12 days, after which&nbsp;the prodrome phase begins with mild fever, conjunctivitis, upper respiratory tract infection, and pathognomic Koplik spots. This follows the appearance of maculopapular rash after 4th day of fever, which begins at the face and spreads to torso and extremities. Lymphadenopathy may be present.</p>\n<p class=\"p1\">Option B: Leukoplakia is a benign condition, not associated with fever and rash.</p>\n<p class=\"p1\">Option C: Scarlet fever presents with URI with sandpaper rash is suggestive of which is caused by&nbsp;beta-hemolytic streptococci.</p>\n<p class=\"p1\">Option D: Kawasaki disease is an acute febrile illness associated with&nbsp;arteritis&nbsp;of&nbsp;medium to large-sized vessels. It presents with fever, rash conjunctivitis but lacks Koplik spots.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d75e0c4a234c42f1bb1040d753b37396.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A colonoscopy of an elderly patient revealed brownish pigmented lesions as shown below. He admitted to chronic laxative abuse. Which of the following laxatives is most likely to cause this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Bran"
      },
      {
        "id": 2,
        "text": "Psyllium"
      },
      {
        "id": 3,
        "text": "Senna"
      },
      {
        "id": 4,
        "text": "Methylcellulose"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above colonoscopy image depicts a <strong>brownish moir&eacute; pattern</strong> that is indicative of <strong>melanosis coli</strong>. Chronic use of anthraquinone laxatives like <strong>senna</strong> and <strong>cascara sagrada</strong> can cause melanosis coli.</p>\n<p><strong>Bisacodyl</strong> is also implicated in causing melanosis coli.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0f275d15e4bd48918cc8ed5fc6e4b361.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A child is brought to the casualty with pain and swelling of the forearm. Her mother gives a history of a fall while running in the playground. Radiograph image is given below. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Monteggia fracture"
      },
      {
        "id": 2,
        "text": "Galeazzi fracture"
      },
      {
        "id": 3,
        "text": "Barton fracture"
      },
      {
        "id": 4,
        "text": "Night stick fracture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given X-ray shows a <strong>fracture </strong>in the<strong>&nbsp;proximal third </strong>of the<strong> ulna</strong> and there is a <strong>dislocation </strong>of the<strong> proximal radioulnar joint</strong>, which points to a diagnosis of&nbsp;<strong>Monteggia fracture-dislocation</strong>.&nbsp;</p>\n<p>Dislocation of the head of the radius can be detected using <strong>McLaughlin&rsquo;s line (radiocapitellar line)</strong>. A line drawn along the center of the shaft of the radius will cut the capitellum of the humerus in the center irrespective of the position of the elbow. In Monteggia fracture this relationship is disturbed.&nbsp;</p>\n<p>The mechanism of injury in these fractures is usually a&nbsp;<strong>fall </strong>on the<strong> outstretched hand</strong>. Clinical features include:</p>\n<ul>\n<li><strong>Deformity</strong> in the proximal forearm - due to ulnar fracture. The dislocation of the head of the radius may be masked by the swelling</li>\n<li><strong>Pain</strong> and <strong>tenderness</strong> on the lateral side of the elbow - due to proximal radioulnar dislocation</li>\n</ul>\n<p>Monteggia fracture is <strong>treated surgically </strong>(fracture of necessity). The ulnar fracture is reduced and bone restored to full length. It is then fixed with a plate and screws. The radial head usually reduces once the ulna is fixed.</p>\n<p>The below image shows radiocapitellar line (McLaughlin&rsquo;s line) in a normal x-ray.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2013503bfde9474ab098b29e9a75a972.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4c2243b564214ef8aaa99e836bbd79a1x314x323.JPEG"
    ]
  },
  {
    "text": "Identify the condition given in the image :",
    "choices": [
      {
        "id": 1,
        "text": "Dermatomyositis"
      },
      {
        "id": 2,
        "text": "Acanthosis nigricans"
      },
      {
        "id": 3,
        "text": "Pityriasis rotunda"
      },
      {
        "id": 4,
        "text": "Melasma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The condition in the given image is <strong>acanthosis nigricans.&nbsp;</strong>It is characterized by <strong>thickened, gray-brown velvety plaques</strong> seen in <strong>flexural</strong> areas such as the back of the neck, axillae, inframammary creases, waist, and groin.</p>\n<p>The causal mechanism is due to the secretion of epidermal growth factors in the region involved. It can be benign or malignancy-associated.&nbsp;</p>\n<ul>\n<li><strong>Benign -&nbsp;</strong>commonly<strong>&nbsp;</strong>associated with <strong>obesity</strong> or<strong> insulin resistance</strong>, usually mild.&nbsp;</li>\n<li><strong>Malignancy -&nbsp;</strong>much less common, associated with <strong>gastric, lung,&nbsp;</strong>and <strong>uterine</strong> cancers.</li>\n</ul>\n<p>Acanthosis nigricans can also be seen in the following:</p>\n<ul>\n<li>Drugs such as nicotinic acid used to treat hyperlipidemia&nbsp;</li>\n<li>Sudden onset of multiple seborrhoeic keratoses</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b82a2d07215b4005a49f321b0d3091b7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Personal monitoring of radiation is done by:",
    "choices": [
      {
        "id": 1,
        "text": "TLD badge"
      },
      {
        "id": 2,
        "text": "Collimators"
      },
      {
        "id": 3,
        "text": "Linear accelerator"
      },
      {
        "id": 4,
        "text": "Grid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Personal monitoring of radiation is done by<strong>&nbsp;</strong>a<strong> TLD badge.</strong></p>\n<p><strong>TLD badge</strong> (thermoluminescent dosimeter) is made up of <strong>thium fluoride</strong> or <strong>dysprosium</strong>.</p>\n<p>The badge should be positioned&nbsp;according to local or national practices. In India, one TLD badge has to be worn at the <strong>chest level inside</strong> the lead <strong>apron,</strong> if the apron is used. An additional <strong>wrist badge</strong> has to be worn for procedures requiring hands close to the primary beam.&nbsp;</p>\n<p>The given image shows a TLD badge.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/218f24956fbb4fae98055edf74168223x240x73.JPEG"
    ]
  },
  {
    "text": "The maneuver depicted in below given diagram is ________",
    "choices": [
      {
        "id": 1,
        "text": "Epley\u2019s maneuvre"
      },
      {
        "id": 2,
        "text": "Trotter\u2019s method"
      },
      {
        "id": 3,
        "text": "McGovern\u2019s technique"
      },
      {
        "id": 4,
        "text": "Valsalva maneuvre"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>The image shows Trotter\u2019s method</strong> in which the patient is made to sit, leaning a little forward over a basin to spit any blood and breathe quietly from the mouth. It is the first step to control epistaxis.</p>\n<p>Option a: <strong>Epley\u2019s maneuver</strong> is used in the treatment of <strong>BPPV</strong> (Benign Paroxysmal Positional Vertigo).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/07a6fb1eb7b2415f8a26dde620bc65e7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/801f73a63aa540acaa97d3733274fcd5x736x543.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/80f182dc0b164d0b85544581ef187d88x289x386.PNG"
    ]
  },
  {
    "text": "Project MONICA is related to",
    "choices": [
      {
        "id": 1,
        "text": "Cardiovascular diseases"
      },
      {
        "id": 2,
        "text": "Cervical Cancer"
      },
      {
        "id": 3,
        "text": "Breast Cancer"
      },
      {
        "id": 4,
        "text": "Road Traffic Accidents"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Project MONICA</strong>&nbsp;is related to cardiovascular diseases. It stands for the multinational monitoring of trends and determinants in <strong>cardiovascular diseases.&nbsp;</strong>It was done to study the reasons for the changes in the trends of cardiovascular diseases in different countries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Diabetes insipidus is characterized by _____.",
    "choices": [
      {
        "id": 1,
        "text": "low plasma osmolality and low urine osmolality"
      },
      {
        "id": 2,
        "text": "high plasma osmolality and high urine osmolality"
      },
      {
        "id": 3,
        "text": "low plasma osmolality and high urine osmolality"
      },
      {
        "id": 4,
        "text": "low urine osmolality and high plasma osmolality"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Diabetes insipidus of both central or nephrogenic origin are characterized by:</p>\n<ul>\n<li><strong>Low</strong> urine osmolality</li>\n<li><strong>High</strong> plasma osmolality</li>\n</ul>\n<table style=\"width: 399px;\">\n<tbody>\n<tr>\n<td style=\"width: 124px;\">\n<p>Condition</p>\n</td>\n<td style=\"width: 80px;\">\n<p>Plasma osmolality</p>\n</td>\n<td style=\"width: 72px;\">\n<p>Urine osmolality</p>\n</td>\n<td style=\"width: 115px;\">\n<p>Sodium concentration</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 124px;\">\n<p>Central DI</p>\n</td>\n<td style=\"width: 80px;\">\n<p>High</p>\n</td>\n<td style=\"width: 72px;\">\n<p>Low</p>\n</td>\n<td style=\"width: 115px;\">\n<p>Relative hypernatremia</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 124px;\">\n<p>Nephrogenic DI</p>\n</td>\n<td style=\"width: 80px;\">\n<p>High</p>\n</td>\n<td style=\"width: 72px;\">\n<p>Low</p>\n</td>\n<td style=\"width: 115px;\">\n<p>Relative hypernatremia</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 124px;\">\n<p>Psychogenic polydipsia</p>\n</td>\n<td style=\"width: 80px;\">\n<p>Low</p>\n</td>\n<td style=\"width: 72px;\">\n<p>Low</p>\n</td>\n<td style=\"width: 115px;\">Hyponatremia</td>\n</tr>\n<tr>\n<td style=\"width: 124px;\">\n<p>SIADH</p>\n</td>\n<td style=\"width: 80px;\">\n<p>Low</p>\n</td>\n<td style=\"width: 72px;\">\n<p>High</p>\n</td>\n<td style=\"width: 115px;\">\n<p>Hyponatremia</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are an intern asked to catheterize a patient using a 16F Foley's catheter. You are unable to catheterize the patient and decide to use a slightly smaller catheter. The ward sister gives you the following four fresh catheters. Which one would you choose instead?",
    "choices": [
      {
        "id": 1,
        "text": "4"
      },
      {
        "id": 2,
        "text": "3"
      },
      {
        "id": 3,
        "text": "2"
      },
      {
        "id": 4,
        "text": "1"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The\u00a0<strong>Foley's catheter</strong>\u00a0having a <strong>green </strong>coloured ring in the ballon port is of size\u00a0<strong>14 F.\u00a0</strong>If there is difficulty in catheterization, then a <strong>lower</strong> French number should be preferred.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/eaf9ffb060844fd38b66a5e531c077e4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 46-year-old male patient comes with complaints of severe left great toe pain. History is significant for similar episodes in the past year. A picture of his left foot is shown below.  Which of the following interventions is best for the long-term treatment of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Probenecid"
      },
      {
        "id": 2,
        "text": "Colchicine"
      },
      {
        "id": 3,
        "text": "Allopurinol"
      },
      {
        "id": 4,
        "text": "NSAIDS"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient's clinical history and examination findings are suggestive of recurrent\u00a0<strong>g</strong><strong>out.</strong>\u00a0<strong>Allopurinol</strong> is the best long-term therapy for this condition.\u00a0</p>\n<p><strong>\u00a0Hypouricemic drugs </strong>that can be used as definitive treatment for chronic gout include-</p>\n<ul>\n<li>Xanthine oxidase inhibitors such as allopurinol, febuxostat</li>\n<li>Uricosuric agents such as probenecid, lesinurad</li>\n<li>Recombinant uricases such as rasburicase and pegloticase.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/1aad758aa662466a9b32aee30d333bdf.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An\u200b 8-year-old child had an unprovoked dog bite. Which of the following measures should be taken?",
    "choices": [
      {
        "id": 1,
        "text": "Withhold the vaccine and observe the dog for 10 days"
      },
      {
        "id": 2,
        "text": "No action needed"
      },
      {
        "id": 3,
        "text": "Kill the dog and send brain for biopsy"
      },
      {
        "id": 4,
        "text": "Give cell culture derived vaccine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>It is appropriate to give post-exposure prophylaxis immediately to reduce the chances of getting rabies by administering cell culture derived vaccine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient experiencing alcohol withdrawal, which of the following is the first symptom that becomes clinically noticeable?",
    "choices": [
      {
        "id": 1,
        "text": "Delirium"
      },
      {
        "id": 2,
        "text": "Seizure"
      },
      {
        "id": 3,
        "text": "Nausea and vomiting"
      },
      {
        "id": 4,
        "text": "Tremulousness"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tremulousness</strong>&nbsp;is the <strong>first</strong> withdrawal symptom of alcohol abuse. It is&nbsp;commonly called shakes or jitters and develops&nbsp;<strong>6 to 8 hours after</strong> the cessation of drinking. It is the classical sign of alcohol withdrawal.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The earliest tooth to erupt in primary dentition is:",
    "choices": [
      {
        "id": 1,
        "text": "Maxillary central incisor"
      },
      {
        "id": 2,
        "text": "Mandibular central incisor"
      },
      {
        "id": 3,
        "text": "Mandibular first molar"
      },
      {
        "id": 4,
        "text": "Maxillary first molar"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The earliest tooth to erupt in primary (temporary) dentition is a mandibular central incisor.</p>\n<p>Primary dentition</p>\n<table style=\"height: 166px;\" width=\"383\">\n<tbody>\n<tr>\n<td style=\"width: 183px;\">Tooth</td>\n<td style=\"width: 184px;\">Emergence</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Mandibular central incisor</td>\n<td style=\"width: 184px;\">6-8 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Maxillary central incisor</td>\n<td style=\"width: 184px;\">7-9 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Maxillary lateral incisor</td>\n<td style=\"width: 184px;\">7-9 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Mandibular lateral incisor</td>\n<td style=\"width: 184px;\">10-12 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">First molar</td>\n<td style=\"width: 184px;\">12-14 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Canine</td>\n<td style=\"width: 184px;\">17-18 mo</td>\n</tr>\n<tr>\n<td style=\"width: 183px;\">Second molar</td>\n<td style=\"width: 184px;\">20-30 mo</td>\n</tr>\n</tbody>\n</table>\n<p>Note :<strong> The decideous teeth all emerge into the mouth latest by 2.5-3 years</strong>.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 3-year-old child was brought to the hospital with complaints of fever, rash and swelling of her hands and feet since past 5 days.  There is desquamative skin rash, oedema of hands and feet, erythema of palms and soles, oral erythema, and cervical lymphadenopathy. What is the likely condition?",
    "choices": [
      {
        "id": 1,
        "text": "Kawasaki disease"
      },
      {
        "id": 2,
        "text": "Measles"
      },
      {
        "id": 3,
        "text": "Scarlet fever"
      },
      {
        "id": 4,
        "text": "HSP"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical features given in the question are most likely to be suggestive of <strong>Kawasaki</strong> <strong>disease</strong> or <strong>mucocutaneous</strong> <strong>lymph</strong> <strong>node</strong> <strong>syndrome</strong>.</p>\n<p>Kawasaki disease is an acute febrile illness associated with <strong>arteritis</strong> of <strong>medium to large-sized vessels.&nbsp;</strong>It is commonly seen in <strong>infants</strong> and <strong>children</strong> <strong>&lt;4 years</strong> of age.</p>\n<p>Clinical features include<strong>:</strong></p>\n<ul>\n<li>Fever</li>\n<li><strong>Conjunctival&nbsp;and oral erythema</strong></li>\n<li>Blistering, erythema of hands and feet</li>\n<li>Edema of palms and soles</li>\n<li><strong>Desquamative</strong> <strong>rash</strong></li>\n<li><strong>Cervical lymphadenopathy</strong></li>\n</ul>\n<p>The disease is usually <strong>self-limiting</strong>. In some cases, the disease may involve coronary artery leading to <strong>thrombosis</strong> and <strong>acute</strong> <strong>myocardial</strong> <strong>infarction</strong>. <strong>Intravenous</strong> <strong>immunoglobulin</strong> and <strong>aspirin</strong> may be given to reduce the risk of coronary artery disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true about DNA replication?",
    "choices": [
      {
        "id": 1,
        "text": "Replication can occur only from a single stranded DNA template"
      },
      {
        "id": 2,
        "text": "Replication can occur only from a double stranded DNA template"
      },
      {
        "id": 3,
        "text": "Deoxynucleotide polymerization is catalyzed by helicases"
      },
      {
        "id": 4,
        "text": "Only DNA polymerase  functions at the replication fork"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In all cells, <strong>replication</strong> can <strong>occur</strong> <strong>only from a single-stranded DNA</strong> (ssDNA) <strong>template</strong>.</p>\n<p>&nbsp;<strong>Steps of DNA replication:</strong></p>\n<ul>\n<li>Identification of the origins of replication</li>\n<li>ATP hydrolysis-driven unwinding of dsDNA to provide an ssDNA template</li>\n<li>Formation of the replication fork; synthesis of RNA primer</li>\n<li>Initiation of DNA synthesis and elongation</li>\n<li>Formation of replication bubbles with ligation of the newly synthesized DNA segments</li>\n<li>Reconstitution of chromatin structure</li>\n</ul>\n<p>Helicase, Primase and Polymerases act at the replication fork.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Capacitation of sperm takes place in______",
    "choices": [
      {
        "id": 1,
        "text": "Seminiferous tubules"
      },
      {
        "id": 2,
        "text": "Uterine tubes"
      },
      {
        "id": 3,
        "text": "Epidydmis"
      },
      {
        "id": 4,
        "text": "Ejaculatory duct"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Capacitation</strong> of sperm takes place in&nbsp;<strong>Uterine tubes</strong>.</p>\n<p>Once ejaculated into the female genital tract, the spermatozoa move up the uterus to the isthmus of the uterine tubes, where they slow down and undergo <strong>capacitation.</strong></p>\n<p>This process involves two components:</p>\n<ul>\n<li>Increasing the motility of the spermatozoa</li>\n<li>Facilitating their preparation for the acrosomal reaction.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You are an intern posted in the ICU. While taking a blood sample for ABG, which of the following steps would you not do?",
    "choices": [
      {
        "id": 1,
        "text": "Normal ph can't rule out acid base disorder"
      },
      {
        "id": 2,
        "text": "Add 0.5 ml Heparin to the syringe before taking blood"
      },
      {
        "id": 3,
        "text": "If modified Allens test is negative, alternate site is chosen"
      },
      {
        "id": 4,
        "text": "Radial artery is the preferred site"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>0.5 ml of Heparin is not added to the syringe before taking blood.</p>\n<p>Very little <strong>heparin</strong> is needed in the sample to prevent clotting;<strong> 0.05 to 0.10 ml of a dilute solution</strong>&nbsp;will help prevent coagulation of 1 ml of blood without affecting its pH. This is achieved by drawing 0.5 ml into the syringe and <strong>flushing it out.</strong> The residue that remains adherent to the syringe is sufficient for the procedure.</p>\n<p>Heparin must be added to the syringe as an <strong>anticoagulant</strong>. Because the pH of heparin is near 7.0, and the P<span class=\"small-caps\">o</span><sub>2</sub> and P<span class=\"small-caps\">co</span><sub>2</sub> of the heparin solution are near room air values, excess heparin can alter ABG measurements. After flushing the syringe with heparin, a sufficient amount usually remains in the dead space of the syringe and needle for anticoagulation without distortion of the ABG determination.</p>\n<p><strong>Note:&nbsp;</strong></p>\n<ul>\n<li>Modified Allen's test positive indicates that the collateral blood flow is normal</li>\n<li>Modified Allen's test negative indicates that the collateral blood flow is abnormal and an alternate site must be chosen.&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3b4dcd64d12046dca29c0776e6e02ae5x1063x2783.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 010';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2022"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>