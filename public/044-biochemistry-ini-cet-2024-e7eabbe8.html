<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>044 Biochemistry Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Biochemistry
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">19</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The following Lineweaver-Burk plots depict enzymatic action in the presence of enzyme inhibitors. The enzyme action without inhibitor is represented by a blue line. What type of inhibitors are depicted in images 1 and 2?",
    "choices": [
      {
        "id": 1,
        "text": "1- Uncompetitive inhibition 2- Competitive inhibition"
      },
      {
        "id": 2,
        "text": "1- Noncompetitive inhibition 2- Competitive inhibition"
      },
      {
        "id": 3,
        "text": "1- Competitive inhibition 2- Uncompetitive inhibition"
      },
      {
        "id": 4,
        "text": "1- Competitive inhibition 2- Noncompetitive inhibition"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In <strong>uncompetitive inhibition</strong>, inhibitors bind with the enzyme-substrate <strong>intermediate complex</strong>\u00a0and inhibit it. This leads to a <strong>decrease in</strong> <strong>both Vmax and Km</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4324791111f74f8d813bf85fda6e4750.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ffd327a25fb045959c699d4ffb05e602x1280x2235.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b2d1c8cc6956485ab5d1c4109e670023x1280x2317.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd485ae9882e43d583801322edf0060bx720x530.PNG"
    ]
  },
  {
    "text": "FISH technique helps to identify all except?",
    "choices": [
      {
        "id": 1,
        "text": "Gene amplification"
      },
      {
        "id": 2,
        "text": "Deletion"
      },
      {
        "id": 3,
        "text": "Point mutation"
      },
      {
        "id": 4,
        "text": "Translocation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Fluorescent in situ hybridization (FISH) is <strong>not useful</strong> in identifying <strong>point mutation</strong>. Point mutations are identified by other means like sequencing studies and restriction fragment length polymorphism.</p>\n<p><strong>FISH</strong> is a method of molecular analysis of <strong>genetic lesions</strong> involving <strong>large deletions</strong>, <strong>duplications</strong>, or more complex <strong>rearrangements</strong> that are not readily amenable to detection using polymerase chain reaction or DNA sequencing approaches.\u00a0</p>\n<p>FISH uses <strong>DNA probes</strong> that <strong>recognize sequences</strong> specific to particular chromosomal regions. To perform FISH, <strong>large fragments</strong> of cloned genomic DNA spanning <strong>up to 200 kb</strong> are labeled with <strong>fluorescent dyes</strong> and applied to metaphase chromosome preparations or interphase nuclei. The probe hybridizes to its homologous genomic sequence and thus labels a specific chromosomal region that can be visualized under a fluorescent microscope.</p>\n<p>FISH can be performed on prenatal samples, peripheral blood cells, touch preparations from cancer biopsies, and even fixed archival tissue sections. It is used to detect <strong>numeric abnormalities</strong> of chromosomes (<strong>aneuploidy</strong>), subtle <strong>microdeletions</strong> and complex <strong>translocations</strong> that are not demonstrable by routine karyotyping, and <strong>gene amplification </strong>(e.g., HER2 in breast cancer or NMYC amplification in neuroblastomas).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/2ecba17c26f241c7bf76c518456d5847.PNG"
    ]
  },
  {
    "text": "Which of the following micronutrients are associated with decreased sexual maturation and hypogonadism?",
    "choices": [
      {
        "id": 1,
        "text": "Zinc"
      },
      {
        "id": 2,
        "text": "Copper"
      },
      {
        "id": 3,
        "text": "Selenium"
      },
      {
        "id": 4,
        "text": "Iron"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Zinc deficiency</strong> is associated with <strong>decreased sexual maturation</strong> and <strong>hypogonadism</strong>.</p>\n<p>Zinc is the second most common trace element in the body after iron. As a component of <strong>zinc finger proteins</strong>, zinc regulates <strong>gene</strong> <strong>transcription</strong> and participates in nucleic acid metabolism, protein synthesis and thereby cell growth. Zinc is a major <strong>antioxidant</strong> being part of the enzyme <strong>superoxide dismutase</strong>.\u00a0</p>\n<p>Zinc is derived mainly from <strong>animal protein</strong>. Diets based on cereals, plants and legumes are associated with zinc deficiency due to dietary phytic acid decreasing the bioavailability of zinc.</p>\n<p>Zinc is absorbed throughout the <strong>small intestine</strong> by a process of facilitated diffusion. Almost 90% of the total body zinc is localized in bone and skeletal muscle.</p>\n<p>Deficiency -\u00a0</p>\n<ul>\n<li><strong>Poor physical growth</strong> is an important feature of zinc depletion in preschool and school-age children. <strong>Delayed sexual maturation</strong> and <strong>hypogonadism</strong> are prominent features of zinc deficiency in adolescents. Other features include <strong>anemia</strong>, anorexia, <strong>diarrhea</strong>, <strong>alopecia</strong>, <strong>impaired immune function</strong> and poor wound healing.</li>\n<li><strong>Acrodermatitis enteropathica</strong> is an autosomal recessive disorder of severe zinc deficiency, caused by impaired intestinal absorption due to a defect in <strong>intestinal zinc transporter</strong> protein. It presents in early infancy with vesiculobullous, dry, scaly, or <strong>eczematous skin lesions</strong> chiefly in the <strong>periorificial</strong> and <strong>acral </strong>areas.</li>\n</ul>\n<p>Normal requirements for children range between <strong>3.5 and 5.0 mg/day</strong>. Acquired zinc deficiency stats can be treated with 0.5 to 1.0 mg/kg/day for several weeks. Malnourished children have much higher requirements of 2-4mg/kg/day.</p>\n<p>Other options :</p>\n<p>Option B - <strong>Copper deficiency</strong> results in <strong>microcytic, hypochromic anemia</strong> unresponsive to iron therapy, <strong>depigmentation of hair</strong>, neutropenia, neurological problems and osteoporosis. Disruption in copper transport is linked to <strong>Wilson's disease</strong> and <strong>Menke's disease</strong>.</p>\n<p>Option C - <strong>Selenium deficiency</strong> is a cause of <strong>Keshan disease</strong>, a form of cardiomyopathy in young children seen in some regions of China. In combination with iodine deficiency, lack of selenium can result in myxedematous endemic cretinism.</p>\n<p>Option D - <strong>Iron deficiency</strong> causes <strong>anemia</strong>, irritability, anorexia,<strong> pica</strong>, angular stomatitis, <strong>leg cramps</strong> and congestive heart failure.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a heme breakdown product?",
    "choices": [
      {
        "id": 1,
        "text": "Carbon Monoxide"
      },
      {
        "id": 2,
        "text": "Ferric / Fe 3+"
      },
      {
        "id": 3,
        "text": "ALA"
      },
      {
        "id": 4,
        "text": "Biliverdin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Aminolevulinic acid</strong> (ALA) is not a product of heme breakdown; rather it is an intermediate in the <strong>synthesis of heme</strong> molecules.</p>\n<p>The process of <strong>heme breakdown </strong>occurs over a series of reactions. In the <strong>reticuloendothelial system</strong> of the liver, spleen and bone marrow, heme is degraded by<strong> microsomal heme oxygenase</strong>. It requires <strong>NADPH </strong>and cytochrome c. In this process, the alpha methenyl bridge of the heme molecule is liberated as <strong>carbon monoxide</strong>. The Fe+ liberated is oxidized to <strong>Fe3+++</strong> and taken up by transferrin.</p>\n<p>The linear tetrapyrrole formed is <strong>biliverdin</strong> (green pigment), which is further reduced to <strong>bilirubin </strong>(red-yellow pigment)\u00a0by an NADPH-dependent <strong>biliverdin reductase</strong>. The bilirubin is transported in the plasma bound to <strong>albumin</strong> and is taken up by the <strong>liver</strong>, where it is <strong>conjugated</strong> with <strong>glucuronic acid</strong> to make it water-soluble, which is finally excreted in the <strong>bile</strong>.</p>\n<p>The intestinal bacteria deconjugate the bilirubin, which is reduced to <strong>urobilinogen</strong>. It is further reduced to <strong>stercobilinogen</strong>, which is excreted through feces.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d91b99726dd490081cf7cf57c982757x1280x2558.JPEG"
    ]
  },
  {
    "text": "Which type of mutation results in the reversal to wild type of phenotype when the mutant gene is suppressed?",
    "choices": [
      {
        "id": 1,
        "text": "Deletion of mutated gene"
      },
      {
        "id": 2,
        "text": "Frameshift of mutated gene"
      },
      {
        "id": 3,
        "text": "Addition of another normal gene"
      },
      {
        "id": 4,
        "text": "Mutations in tRNA"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In the laboratory context, such suppressor tRNAs, coupled with mutated variants of aminoacyl- tRNA synthetases, can be utilized to incorporate unnatural amino acids into defined locations within altered genes that carry engineered nonsense mutations. The resulting labeled proteins can be used for in vivo and in vitro cross-linking and biophysical studies.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5097eab53ac14750a1cc322bf8016a29x1280x1555.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a post-transcriptional modification?",
    "choices": [
      {
        "id": 1,
        "text": "5 prime capping"
      },
      {
        "id": 2,
        "text": "Methylation"
      },
      {
        "id": 3,
        "text": "Glycosylation"
      },
      {
        "id": 4,
        "text": "Endonuclease cleavage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Glycosylation</strong> is not a post-transcriptional modification; it is a <strong>post-translational</strong> modification.</p>\n<p>A <strong>primary transcript</strong> is the initial, linear, RNA copy of a transcription unit. The collection of all the primary transcripts synthesized in the nucleus by RNA polymerase II is known as heterogeneous nuclear RNA (hnRNA). The <strong>pre-mRNA</strong> components of hnRNA undergo extensive co- and <strong>posttranscriptional</strong> modification in the nucleus and become <strong>mature mRNA</strong>. These modifications usually include the following :</p>\n<ul>\n<li><strong>Addition of a 5\u2032 cap - </strong>This is the first of the processing reactions for pre-mRNA. The cap is a <strong>7-methylguanosine</strong> attached to the 5\u2032 terminal end of the mRNA and is <strong>resistant</strong> to most nucleases. Creation of the cap requires the removal of the \u03b3-phosphoryl group from the 5\u2032 triphosphate of the pre-mRNA, followed by the addition of guanosine monophosphate. <strong>Methylation </strong>of this terminal G occurs in the cytosol and is catalyzed by guanine- 7-methyltransferase. Additional methylation steps may occur (options A and B).</li>\n<li><strong>Addition of a 3\u2032-poly-A tail -</strong>\u00a0Most eukaryotic mRNA have a chain of 40 to 250 adenylates (adenosine monophosphates) attached to the 3\u2032 end. This poly-A tail is added by the nuclear enzyme, polyadenylate polymerase. The poly-A tail terminates eukaryotic transcription. In addition, it helps <strong>stabilize</strong> the mRNA, facilitates its exit from the nucleus, and aids in translation.\u00a0</li>\n<li><strong>Splicing -</strong>\u00a0Maturation of eukaryotic mRNA usually involves removal from the primary transcript of RNA sequences (<strong>introns</strong>) that do not code for protein (endonuclease cleavage). The remaining coding (expressed) sequences, the <strong>exons</strong>, are <strong>joined together</strong> to form the <strong>mature mRNA</strong>. The process of removing introns and joining exons is called <strong>s</strong>plicing. The molecular complex that accomplishes these tasks is known as the <strong>spliceosome\u00a0</strong>(option D).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following conditions :",
    "choices": [
      {
        "id": 1,
        "text": "1 - b, 2 -a, 3 -d, 4 -c"
      },
      {
        "id": 2,
        "text": "1 -c, 2 -d, 3 -b, 4 -a"
      },
      {
        "id": 3,
        "text": "1 -b, 2 -d, 3 -a, 4 -c"
      },
      {
        "id": 4,
        "text": "1 -c, 2 - b, 3 -a, 4 -d"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct answer is option B: 1 -c, 2 -d, 3 -b, 4 -a</p>\n<table style=\"border-collapse: collapse; width: 48.0691%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 50.0458%;\">1) Glycogen accumulation in liver and renal cells and lactic acidemia, associated with hypoglycemia</td>\n<td style=\"width: 50.0458%;\">c) Von Gierk disease</td>\n</tr>\n<tr>\n<td style=\"width: 50.0458%;\">2) Glycogen accumulation in lysosomes</td>\n<td style=\"width: 50.0458%;\">d)Pompe disease</td>\n</tr>\n<tr>\n<td style=\"width: 50.0458%;\">3) Exercise intolerance</td>\n<td style=\"width: 50.0458%;\">b)McArdle disease</td>\n</tr>\n<tr>\n<td style=\"width: 50.0458%;\">4) Accumulation of branched structures</td>\n<td style=\"width: 50.0458%;\">a)Cori disease</td>\n</tr>\n</tbody>\n</table>\n<p><strong><br />Von</strong> <strong>Gierke disease</strong> (type I glycogen storage disorder) occurs due to the deficiency of <strong>glucose-6-phosphatase</strong> enzyme in the liver, kidney, and intestinal mucosa. Patients present commonly by <strong>3-4 months </strong>of age with <strong>hypoglycemia</strong> (leading to <strong>seizures</strong>), <strong>lactic acidosis</strong>, and <strong>hepatomegaly</strong>. Affected children often have a <strong>doll-like face</strong> with fat cheeks, relatively thin extremities, short stature, and a protuberant abdomen due to massive hepatomegaly. The <strong>kidneys</strong> are also enlarged, whereas spleen and heart are not involved. Laboratory findings include hypoglycemia, lactic acidosis, <strong>hyperuricemia</strong>, and <strong>hyperlipidemia</strong>.</p>\n<p><strong>Pompe's disease</strong> (type II glycogen storage disorder) occurs due to a mutation in <strong>alpha-1,4-glucosidase</strong> (also known as <strong>acid maltase</strong>), a lysosomal enzyme. A defect in this enzyme leads to the <strong>accumulation of glycogen in the lysosomes </strong>of peripheral, voluntary muscles and progresses to involve the <strong>cardiac muscle</strong> and diaphragm. Clinical features include <strong>hypotonia</strong> (floppy baby syndrome), <strong>cardiomyopathy</strong>, hepatomegaly, and failure to thrive. <strong>Myozyme</strong> can prevent worsening or can reverse cardiac and skeletal abnormalities.</p>\n<p><strong>Cori disease</strong> (type III glycogen storage disorder) occurs due to a deficiency of the <strong>glycogen debranching enzyme</strong>. The features of Cori disease include <strong>hypoglycemia</strong>, <strong>hepatomegaly</strong>, and hyperlipidemia but with normal blood lactate and uric acid levels. Muscle weakness and atrophy can also occur in these patients. Liver biopsy shows the accumulation of glycogen in the form of <strong>limit-dextrins </strong>(branched structures).</p>\n<p><strong>McArdle disease</strong> (type V glycogen storage disorder) typically presents during late childhood or in the second decade of life. The <strong>muscle</strong> <strong>glycogen phosphorylase </strong>enzyme deficiency interferes with <strong>ATP generation</strong> by glycogenolysis in the muscles. This causes muscle glycogen accumulation. Symptoms are <strong>exercise intolerance</strong> associated with <strong>muscle cramps</strong>. This leads to severe muscle damage resulting in a massive release of <strong>myoglobin</strong> in the blood.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All are true statements regarding folate deficiency except",
    "choices": [
      {
        "id": 1,
        "text": "Increased levels of homocysteine and normal methylmalonic acid"
      },
      {
        "id": 2,
        "text": "Folate supplementation on diagnosis of pregnancy prevents neural tube defect"
      },
      {
        "id": 3,
        "text": "It is important to treat co-existing vitamin B12 deficiency before initiating folate therapy"
      },
      {
        "id": 4,
        "text": "Folate deficiency is commonly seen in children with hemolytic anemia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Treatment: In patients with megaloblastic anemia, it is imperative to exclude and treat vitamin B12 deficiency <strong>before treating</strong> with folate. Otherwise the <strong>neurological signs</strong> of vitamin B12 deficiency may develop and progress irreversibly (option C). Deficiency is corrected using folic acid at a dose of 0.5-1mg/day orally for 3-4 weeks.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/deea39cfd1f8459a8e3cedc305ac7a86x1280x1774.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/36396b4889644fa69c1f94a6fc0cf1dbx1280x1090.JPEG"
    ]
  },
  {
    "text": "Congenital lactic acidosis is seen due to a defect in which of the following enzymes?",
    "choices": [
      {
        "id": 1,
        "text": "Pyruvate dehydrogenase"
      },
      {
        "id": 2,
        "text": "Branched chain ketoacid dehydrogenase"
      },
      {
        "id": 3,
        "text": "Transketolase"
      },
      {
        "id": 4,
        "text": "Isocitrate dehydrogenase"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Congenital lactic acidosis</strong> is seen due to a defect in <strong>pyruvate dehydrogenase</strong>.</p>\n<p>The major source of <strong>acetyl CoA</strong> for the <strong>tricarboxylic acid </strong>(TCA)<strong>cycle</strong> is the <strong>oxidative decarboxylation</strong> of <strong>pyruvate</strong> by the multienzyme <strong>pyruvate dehydrogenase complex</strong> (PDHC). The PDHC is a protein aggregate of multiple copies of three enzymes, <strong>pyruvate decarboxylase</strong> (E1), <strong>dihydrolipoyl transacetylase</strong> (E2), and <strong>dihydrolipoyl dehydrogenase</strong> (E3). Each catalyzes a part of the overall reaction.</p>\n<p>A deficiency of the <strong>E1 component</strong> of the PDHC is the most common biochemical cause of <strong>congenital lactic acidosis</strong>. The deficiency results in a decreased ability to convert pyruvate to acetyl CoA, causing pyruvate to be shunted to <strong>lactate</strong> via lactate dehydrogenase. This creates particular problems for the brain, which relies on the TCA cycle for most of its energy and is particularly sensitive to acidosis. Symptoms include <strong>neurodegeneration</strong>, <strong>muscle spasticity</strong>, and, in the neonatal-onset form, early death. The inheritance pattern is <strong>X- linked dominant</strong>, with both males and females affected. Although there is no proven treatment for PDHC deficiency, <strong>dietary restriction of carbohydrates</strong> and supplementation with<strong> thiamine</strong> may reduce symptoms in select patients.\u00a0</p>\n<p>Other options :</p>\n<p>Option B - <strong>Branched-chain ketoacid dehydrogenase </strong>deficiency results in <strong>maple syrup urine disease</strong>. There is defective oxidative decarboxylation of <strong>leucine</strong>, <strong>isoleucine</strong> and <strong>valine</strong>. The disease is characterized by feeding problems, ketoacidosis, changes in muscle tone, and coma.</p>\n<p>Option C -\u00a0 Defective transketolase is a rare disorder of pentose phosphate metabolism with symptoms apparent in infancy including developmental delay and intellectual disability, delayed or absent speech, short stature, and congenital heart defects.\u00a0</p>\n<p>Option D - \u00a0Isocitrate dehydrogenase is an enzyme of the TCA cycle which converts isocitrate to alpha-ketoglutarate. Defects in this enzyme are linked to carcinogenesis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not associated with G6PD deficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Equal incidence in males and females"
      },
      {
        "id": 2,
        "text": "Defective NADPH synthesis"
      },
      {
        "id": 3,
        "text": "Predisposes the patient to oxidative stress"
      },
      {
        "id": 4,
        "text": "Patient presents with hemolysis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>G6PD Deficiency does not have an equal incidence in males and females. It is an <strong>X-linked recessive (XLR) disorder,</strong> hence<strong> males are more affected</strong> than females.</p>\n<p>Glucose-6-phosphate dehydrogenase (G6PD) deficiency causes <strong>congenital hemolytic anemia </strong>due to enzyme deficiency.\u00a0G6PD is required to generate NADPH while oxidizing glucose-6-phosphate in the<strong> hexose monophosphate pathway (HMP)</strong>. G6PD deficiency leads to <strong>reduced NADPH levels</strong> (option B) which then <strong>reduces</strong> the level of <strong>reduced glutathione.</strong> Reduced glutathione is required to protect the cells against <strong>oxidative stress</strong> to RBCs and <strong>hemolysis.</strong>\u00a0</p>\n<p>Clinically, most patients are asymptomatic. When exposed to triggers like <strong>fava beans, infections,</strong> drugs such as <strong>primaquine,</strong> chloroquine, <strong>sulfonamides/sulfones,</strong> dapsone, and nitrofurantoin patient develops:</p>\n<ul>\n<li><strong>Episodic hemolysis,</strong> both intravascular and extravascular</li>\n<li><strong>Hemolytic anaemia</strong></li>\n<li>Hemoglobinemia</li>\n<li>Hemoglobinuria</li>\n</ul>\n<p>Increased oxidative damage to RBCs leads to the formation of denatured precipitates known as <strong>Heinz bodies.</strong> These bodies can damage the RBC membrane leading to <strong>intravascular hemolysis.</strong> Additionally, when such RBCs pass through the splenic cords, macrophages pluck out these precipitates, giving them the characteristic appearance of<strong> bite cells.\u00a0</strong></p>\n<p>The images below show the presence of Heinz bodies and bite cells.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4dc646e0a7344b62b2f3ad958aed8038x1279x914.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1fed3123012943dd8852893c0cf05c83x1279x914.JPEG"
    ]
  },
  {
    "text": "Which of the following is not a neurotransmitter derived from aminoacids ?",
    "choices": [
      {
        "id": 1,
        "text": "Gamma amino butyric acid"
      },
      {
        "id": 2,
        "text": "Dopamine"
      },
      {
        "id": 3,
        "text": "5 hydroxytryptamine"
      },
      {
        "id": 4,
        "text": "Creatine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Creatine</strong> is <strong>not a neurotransmitter </strong>derived from amino acids.</p>\n<p><strong>Creatine</strong> is an intermediate product in the process of formation of <strong>creatinine</strong>. The steps involved in the formation are as follows:</p>\n<ul>\n<li>The amidino group of <strong>arginine</strong> is transferred to <strong>glycine</strong> to form <strong>guanidoacetic acid</strong>. This step occurs in the kidneys and pancreas.</li>\n<li>Guanido acetic acid is methylated by <strong>S-adenosyl methionine</strong> to form creatine. This step occurs in the liver.</li>\n</ul>\n<p>Creatine is phosphorylated to <strong>creatine phosphate</strong> by the enzyme <strong>creatine kinase</strong>, which is present in the muscle, brain and liver. The reaction needs hydrolysis of ATP. The stored creatine phosphate in the muscle serves as an <strong>immediate store of energy in the muscle</strong>. During muscle contraction, the energy is first derived from ATP hydrolysis. Thereafter, the ATP is regenerated by the hydrolysis of creatine phosphate. This is called the <strong>Lohmann's reaction</strong>.</p>\n<p>The creatine phosphate may be converted to its anhydride,<strong> creatinine</strong>, which is excreted in the urine. Creatinine level in the blood is an <strong>indicator of renal function</strong>.</p>\n<p>Other options :</p>\n<p>Option A - <strong>Gamma amino butyric acid</strong> (GABA) functions in brain tissue as an <strong>inhibitory </strong>neurotransmitter. It is formed by decarboxylation of <strong>glutamate </strong>by L-glutamate decarboxylase.</p>\n<p>Option B - <strong>Dopa</strong> is a precursor in the formation of the neurotransmitters<strong> dopamine</strong>, <strong>norepinephrine</strong> and <strong>epinephrine</strong>. It is formed by the hydroxylation of <strong>tyrosine</strong> by tyrosine hydroxylase.\u00a0</p>\n<p>Option C - <strong>5 Hydroxytryptamine</strong> is an important neurotransmitter in the brain, where it functions as an <strong>antidepressant</strong>. It is derived from the amino acid <strong>tryptophan</strong>, in a process of hydroxylation followed by decarboxylation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following methods is used to test the blood taken from a neonate for metabolic disease screening?",
    "choices": [
      {
        "id": 1,
        "text": "Complete blood count"
      },
      {
        "id": 2,
        "text": "Tandem Mass Spectrometry"
      },
      {
        "id": 3,
        "text": "Next Generation Sequencing"
      },
      {
        "id": 4,
        "text": "ELISA"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Tandem mass spectrometry\u00a0</strong>is used to screen a blood sample for metabolic diseases.</p>\n<p><strong>Mass spectrometry</strong> is a very sensitive <strong>quantitative</strong> analytical technique used to measure a wide range of clinically relevant analytes. It identifies molecules based on their <strong>mass</strong> or <strong>molecular size</strong>. A sample is vaporized such that a positive charge is produced on the molecule. An<strong> electric field</strong> is applied so that particles move. At the same time, a <strong>magnetic field</strong> is applied, so the cations are deflected and hit on the detector. For molecules of identical charge, the time required for the molecule to reach the detector is inversely proportional to the mass of the molecule.</p>\n<p>In tandem mass spectrometry, two mass spectrometers (MS) are arranged sequentially. The first MS separates big peptides, based on their mass. From this observation, the parent ion can be directed into the second MS. Here the ions collide with argon gas molecules and are broken into smaller ions. These daughter ions are detected and quantified by their mass spectrum in the second instrument.\u00a0</p>\n<p>Tandem MS is used to screen blood samples from<strong> newborns</strong> for the presence and concentrations of <strong>amino acids</strong>, <strong>fatty acids</strong> and other metabolites. Abnormalities in metabolite levels can serve as diagnostic indicators for a variety of genetic disorders like phenylketonuria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Familial hypercholesterolemia is a result of a defect in which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "LDL receptor"
      },
      {
        "id": 2,
        "text": "Apo E"
      },
      {
        "id": 3,
        "text": "Apo CII"
      },
      {
        "id": 4,
        "text": "Apo B48"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Familial hypercholesterolemia</strong> occurs due to a defect in the<strong> LDL</strong> (low-density lipoprotein) <strong>receptor</strong>.</p>\n<p>The primary function of LDL particles is to provide cholesterol to the peripheral tissues (or return it to the liver). They do so by binding to <strong>plasma membrane LDL receptors</strong> that recognize <strong>apo B-100</strong>.\u00a0</p>\n<p>After binding, the LDL\u2013receptor complex is endocytosed.\u00a0The pH of the endosome falls, which allows the separation of the LDL from its receptor. The <strong>receptors</strong> can be <strong>recycled</strong>, whereas the lipoprotein remnants in the vesicle are transferred to <strong>lysosomes</strong> and degraded by lysosomal acid hydrolases, releasing free cholesterol, amino acids, fatty acids, and phospholipids. These compounds can be reutilized by the cell.\u00a0</p>\n<p><strong>Defects</strong> in the synthesis of functional <strong>LDL receptors</strong> cause a significant elevation in <strong>plasma LDL-C</strong>. Patients with such deficiencies have <strong>type IIa hyperlipidemia /familial hypercholesterolemia </strong>(FH). This <strong>autosomal dominant</strong> condition predisposes individuals to <strong>premature</strong> <strong>atherosclerosis</strong> and coronary artery disease.</p>\n<p>Patients with homozygous FH must be treated aggressively to delay the onset and progression of CVD. Two drugs that reduce the hepatic production of VLDL and thus LDL, a small-molecule inhibitor of the microsomal TG transfer protein (MTP) and an antisense oligonucleotide to apoB, and an antibody that inhibits ANGPLT3 are approved and should be considered in patients who have insufficient response to statins and PCSK9 inhibitors. LDL apheresis should be considered in patients who have persistently elevated LDL-C levels despite drug therapy.\u00a0</p>\n<p>Other options :</p>\n<p>Option B - Defects in <strong>apo-E</strong> lead to <strong>type III</strong> hyperlipoproteinemia / <strong>familial dysbetalipoproteinemia</strong>.\u00a0 It is characterized by defective clearance of <strong>chylomicron remnants</strong> and <strong>intermediate-density lipoproteins </strong>by the liver. This leads to <strong>hypercholesterolemia</strong>, xanthomas, and atherosclerosis.\u00a0</p>\n<p>Option C - Defective <strong>apo-C II</strong> results in <strong>type I</strong> hyperlipoproteinemia/ <strong>familial lipoprotein lipase deficiency</strong>. The resulting inactive <strong>lipoprotein lipase</strong> leads to slow clearance of <strong>chylomicrons</strong> and <strong>VLDL, </strong>and low levels of LDL and HDL. Patients present with <strong>eruptive</strong> <strong>xanthomas</strong> and <strong>acute pancreatitis</strong>.</p>\n<p>Option D - Apo-B 48 is involved in the assembly of chylomicrons. Defects in this protein are not associated with familial hypercholesterolemia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient with Diabetes Mellitus, the liver produces more TG and VLDL. What is the cause of the same?",
    "choices": [
      {
        "id": 1,
        "text": "Decreased action of LPL with increased action of HSL"
      },
      {
        "id": 2,
        "text": "Decreased action of LPL with Decreased action of HSL"
      },
      {
        "id": 3,
        "text": "Increased action of LPL with increased action of HSL"
      },
      {
        "id": 4,
        "text": "Increased action of LPL with decreased action of HSL"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In a patient with Diabetes Mellitus, the liver produces more TG and VLDL, due to decreased action of LPL with increased action of HSL.</p>\n<ul>\n<li><strong>Lipoprotein lipase (LPL)</strong>: Enzyme responsible for hydrolyzing triglycerides (TG) in VLDL and chylomicrons into free fatty acids (FFAs) for storage or energy use in tissues.</li>\n<li><strong>Hormone-sensitive lipase (HSL)</strong>: Enzyme that breaks down stored triglycerides in adipocytes into free fatty acids and glycerol.</li>\n</ul>\n<p>Insulin has an <strong>inhibitory effect on hormone-sensitive lipase (HSL)</strong>. In diabetes, <strong>low insulin</strong> corresponds to an <strong>increase in HSL</strong> activity. This promotes the<strong> breakdown</strong> of <strong>lipids</strong> and a release of TG and free fatty acids from the adipose tissue.</p>\n<p>Insulin <strong>induces</strong> the activity of <strong>lipoprotein lipase (LPL)</strong> which is present on the capillary walls. LPL promotes hydrolysis of TG and the degradation of the transport proteins, VLDL and chylomicrons. In diabetes, <strong>low insulin </strong>leads to <strong>decreased LPL</strong> activity which corresponds to an increase in VLDL and TG.</p>\n<p>This results in increased production of triglycerides and VLDL in the liver.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Nutritional deficiency of Copper, required by lysyl oxidase which is an importent key step for formation for covalent cross linking in collagen synthesis, gives rise to which of the following condition?",
    "choices": [
      {
        "id": 1,
        "text": "Menke's disease"
      },
      {
        "id": 2,
        "text": "Scurvy"
      },
      {
        "id": 3,
        "text": "Ehlers Danlos syndrome"
      },
      {
        "id": 4,
        "text": "Scoliosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Nutritional deficiency of <strong>copper</strong>, required by <strong>lysyl oxidase</strong> for formation for covalent cross linking in collagen synthesis, gives rise to <strong>Menke's disease.</strong></p>\n<p>Menke's disease is an<strong> X-linked recessive condition</strong> caused due to a mutation in the <strong>ATP7A</strong> gene on <strong>chromosome X</strong>. This causes <strong>impaired transport</strong> of dietary copper from the small intestine to the liver leading to low levels of copper-containing enzymes.</p>\n<p>The final step of collagen synthesis involves the formation of covalent cross-links. This is done by the enzyme lysyl oxidase, a copper-containing protein. This is essential for the <strong>strength</strong> and <strong>rigidity </strong>of collagen. As a result of deficiency of copper in Menkes disease, this step of collagen synthesis is affected.\u00a0</p>\n<p>The patients presents with <strong>depigmented kinky hair, failure to thrive, neurodegenerative symptoms </strong>(loss of developmental milestones, truncal hypotonia, epilepsy), <strong>multiple fractures, anaemia </strong>due to ceruloplasmin deficiency, <strong>neutropenia</strong>, and <strong>recurrent infections.</strong></p>\n<p><strong>Other Options:</strong></p>\n<p><strong>Option B: Scurvy:</strong> Caused by <strong>vitamin C deficiency</strong>, leading to defective collagen synthesis due to <strong>impaired hydroxylation</strong> of <strong>proline</strong> and <strong>lysine.</strong></p>\n<p><strong>Option C: Ehlers-Danlos syndrome:</strong> A group of genetic disorders affecting collagen structure or production.</p>\n<p><strong>Option D: Scoliosis: </strong>A structural <strong>deformity </strong>of the <strong>spine.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following with appropriate precursors",
    "choices": [
      {
        "id": 1,
        "text": "i-b, ii-d, iii-a, iv-c"
      },
      {
        "id": 2,
        "text": "i- c, ii-d, iii-a, iv-b"
      },
      {
        "id": 3,
        "text": "i- a, ii-d, iii-b, iv-c"
      },
      {
        "id": 4,
        "text": "i- b, ii-a, iii-d, iv-c"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p style=\"text-align: left;\">The correct matched sequence is : <strong>i-b, ii-d, iii-a, iv-c.</strong></p>\n<table style=\"border-collapse: collapse; width: 68.1488%;\" border=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 48.1429%;\">i. Melatonin</td>\n<td style=\"width: 51.8571%;\">b. Tryptophan</td>\n</tr>\n<tr>\n<td style=\"width: 48.1429%;\">ii. Histamine</td>\n<td style=\"width: 51.8571%;\">d. Histidine</td>\n</tr>\n<tr>\n<td style=\"width: 48.1429%;\">iii. Norepinephrine</td>\n<td style=\"width: 51.8571%;\">a. Tyrosine</td>\n</tr>\n<tr>\n<td style=\"width: 48.1429%;\">iv. Glutathione</td>\n<td style=\"width: 51.8571%;\">c. Cystine</td>\n</tr>\n</tbody>\n</table>\n<p><strong>i. Melatonin \u2013 b. Tryptophan</strong></p>\n<p><strong>Tryptophan</strong> is an essential amino acid and the precursor for the synthesis of melatonin, produced by the pineal gland. The process begins with tryptophan being converted into <strong>serotonin</strong>, and then serotonin is further converted into <strong>melatonin</strong>.</p>\n<p><strong>ii. Histamine \u2013 d. Histidine</strong></p>\n<p><strong>Histamine</strong> is derived from the amino acid histidine. The conversion of<strong> histidine</strong> into histamine is catalyzed by the enzyme <strong>histidine decarboxylase</strong>. Histamine is involved in local immune responses, acts as a neurotransmitter, and plays a role in regulating gastric acid secretion.</p>\n<p><strong>iii. Norepinephrine \u2013 a. Tyrosine</strong></p>\n<p><strong>Norepinephrine</strong> (noradrenaline) is synthesized from tyrosine. Tyrosine is first converted to L-DOPA by the enzyme tyrosine hydroxylase, and then <strong>L-DOPA </strong>is converted into <strong>dopamine</strong>. Finally, dopamine is hydroxylated to form norepinephrine. Norepinephrine is a neurotransmitter involved in the sympathetic nervous system's fight-or-flight response.</p>\n<p><strong>iv. Glutathione \u2013 c. Cystine</strong></p>\n<p><strong>Glutathione</strong> is a tripeptide composed of <strong>glutamate, cystine, and glycine</strong>. The cystine component is crucial because it contains a thiol (-SH) group, which is responsible for the <strong>antioxidant properties</strong> of glutathione.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In the current scenario treatment for urea cycle disorder is available. Administration of amino acid phenylbutyrate can decrease ammonia formation. Which amino acid provides phenylbutyrate?",
    "choices": [
      {
        "id": 1,
        "text": "Arginine"
      },
      {
        "id": 2,
        "text": "Glutamate"
      },
      {
        "id": 3,
        "text": "Aspartate"
      },
      {
        "id": 4,
        "text": "Glycine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The amino acid that provides <strong>phenylbutyrate</strong> in the treatment of urea cycle disorders is <strong>glutamate</strong>.</p>\n<p><strong>Ammonia to Urea cycle</strong>: Ammonia gets converted to glutamate (non toxic form) through <strong>transamination.\u00a0 </strong>Glutamate is <strong>transported</strong> to the liver as <strong>glutamine </strong>(by glutamine synthase). In the liver, <strong>ammonia is released</strong> from glutamine, converting it to alpha keto glutatamte. The released ammonia enters the <strong>urea cycle.</strong></p>\n<p>In <strong>acetylation therapy,</strong> <strong>Phenylbutyrate</strong> (a prodrug) which is metabolized to <strong>phenylacetate</strong>. Phenylacetate <strong>combines </strong>with <strong>glutamine</strong> (a nitrogen-rich amino acid) to form <strong>phenylacetylglutamine.</strong> Phenylacetylglutamine is <strong>water-soluble</strong> and is excreted in the <strong>urine. </strong>This process helps <strong>trap excess nitrogen, bypassing the urea cycle.</strong></p>\n<p>Other drugs that can be used to achieve the same outcome (ammonia scavengers) include:</p>\n<ul>\n<li><strong>Phenylacetate</strong></li>\n<li><strong>Benzoate</strong></li>\n</ul>\n<p>Other Options:</p>\n<p><strong>Option A and C: Arginine </strong>and<strong> Aspartate </strong>do not play a role in this specific reaction.</p>\n<p><strong>Option D: Glycine: </strong>The combination of benzoate and glycine forms <strong>hippuric acid</strong>, a non-toxic compound. When<strong> Benzoate</strong> is administered to the body, it acts as a <strong>nitrogen-scavenging agent</strong>. Hippuric acid is <strong>water-soluble </strong>and is excreted in the urine, effectively removing one nitrogen molecule from the body per molecule of hippuric acid formed. This mechanism is similar to how phenylacetate acts as a scavenger for glutamate.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following are appropriate techniques for chromosomal aneuploidy?",
    "choices": [
      {
        "id": 1,
        "text": "i,ii,iii,iv"
      },
      {
        "id": 2,
        "text": "i,ii"
      },
      {
        "id": 3,
        "text": "ii,iii"
      },
      {
        "id": 4,
        "text": "iii,iv"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In situ hybridization, Conventional cytogenetics, Sanger sequencing and Polymerase chain reaction are appropriate techniques for chromosomal aneuploidy.</p>\n<p>Techniques to detect aneuploidy:</p>\n<ol>\n<li><strong>In situ hybridization: Fluorescent In Situ Hybridisation (FISH)</strong> helps in the detection of specific genetic information using fluorescent probes. FISH is used to detect <strong>chromosomal aneuploidy, </strong>subtle microdeletions and rearrangements, complex translocations, and gene amplification.</li>\n<li><strong>Conventional cytogenetics</strong>: This technique involves the study of chromosomes under a microscope, typically using methods like karyotyping, which arranges chromosomes by size, shape, and number. The analysis allows the identification of <strong>large chromosomal abnormalities</strong>, such as aneuploidy or structural changes.</li>\n<li><strong>Sanger sequencing</strong>: DNA sequencing that uses <strong>chain-termination</strong> to identify the exact sequence of nucleotides in a DNA molecule. Simple Senger sequencing can detect aneuploidy only with <strong>massive parallel sequencing.</strong></li>\n<li><strong>Polymerase chain reaction:</strong> Polymerase chain reaction (PCR) is a rapid automated method for the<strong> amplification</strong> of <strong>specific DNA sequences</strong> (or genes). It can accurately <strong>quantify</strong> the <strong>target nucleic acid sequence </strong>within a sample. It is useful for determining somatic mutation with low allele frequency. <strong>Quantitative Fluorescence (QF) PCR</strong> is a method of <strong>rapid aneuploidy detection</strong>. It is less expensive and allows simultaneous processing of large number of samples of FISH.</li>\n<li><strong>Array Comparitive Genomic Hybridization:</strong> <strong>microarray based </strong>technique which can reveal imbalances across the genome.</li>\n<li><strong>Multiplex Ligation Probe Amplification: </strong>to detect <strong>gene dosage.</strong></li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Enzyme used in recombinant DNA technology are?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3,4"
      },
      {
        "id": 2,
        "text": "1,2,3"
      },
      {
        "id": 3,
        "text": "2,3,4"
      },
      {
        "id": 4,
        "text": "1,3,4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Phosphatase, Terminal transferase</strong> and <strong>Crispr Cas9</strong> are used in <strong>recombinant DNA technology</strong>.</p>\n<p><strong>Recombinant DNA technology</strong> is a technique where DNA from different sources is combined to create new genetic material. Applications of recombinant DNA technology include producing insulin, growth hormones, vaccines, gene therapy, and studying gene functions and disease mechanisms.</p>\n<p><strong>Phosphatase</strong> <strong>dephosphorylates 5\u2032 ends </strong>of <strong>RNA</strong> and <strong>DNA</strong>. It is primarily used for the removal of phosphate groups pror to kinase labelling and it is also used to prevent self ligation.</p>\n<p><strong>Terminal transferase</strong> catalyzes the <strong>addition of nucleotides </strong>to the<strong> 3' terminus</strong> of a <strong>DNA</strong> molecule. It is used in homopolymer tailing.\u00a0</p>\n<p><strong>CRISPR-Cas9</strong> acts as an <strong>RNA-directed nuclease</strong>. It is a DNA editing/gene regulatory system. \u00a0It involves two essential components: <strong>Cas9</strong>, an <strong>endonuclease</strong> that causes a double-stranded DNA break, allowing modifications to the genomic DNA to be made; and a synthetic single-guide RNA, or <strong>sgRNA</strong>, responsible for<strong> guiding Cas9</strong> to its <strong>target.</strong></p>\n<p><strong>Isomerase</strong> is a class of enzymes that catalyze the <strong>structural rearrangement</strong> of molecules, converting one isomer into another. Isomerase is not commonly used directly in recombinant DNA technology, it has broader applications. They are used in <strong>metabolic pathways</strong> and as <strong>biocatalysts</strong> in industrial processes.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '044 Biochemistry Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Biochemistry"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>