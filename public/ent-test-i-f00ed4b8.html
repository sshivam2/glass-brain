<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ent Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The typical location of the mass in the image given below is _____",
    "choices": [
      {
        "id": 1,
        "text": "Anterior 2/3 and posterior 1/3"
      },
      {
        "id": 2,
        "text": "Posterior commissure"
      },
      {
        "id": 3,
        "text": "Anterior 1/3 and posterior 2/3"
      },
      {
        "id": 4,
        "text": "Anterior commissure"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The swollen area in the given image depicts<strong> vocal nodules</strong> also known as<strong>&nbsp;singer&rsquo;s or screamers node</strong>. It is present at&nbsp;<strong>the junction of anterior one-third with the posterior two thirds.</strong>&nbsp;It is the area of maximum vibration of the cord and thus is subjected to maximum trauma.</p>\n<p>Vocal nodules occur due to vocal trauma when <strong>person speaks in unnatural low tones for prolonged periods or at high intensities</strong>. They mostly affect teachers, actors, vendors or pop singers.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fb689d1ee0274a3dbd9dd6f9f416620a.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Apple-jelly nodules on the nasal septum are found in case of__________",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculosis"
      },
      {
        "id": 2,
        "text": "Syphilis"
      },
      {
        "id": 3,
        "text": "Lupus vulgaris"
      },
      {
        "id": 4,
        "text": "Rhinoscleroma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Apple jelly nodules are seen in <strong>Lupus vulgaris</strong>.</p>\n<p><strong>Lupus&nbsp;vulgaris:</strong> It is a <strong>low-grade tuberculous infection</strong> commonly affecting nasal <strong>vestibule or the skin of nose and face</strong>.</p>\n<p>Manifestations - The skin lesions&nbsp;manifest characteristically as brown, gelatinous nodules called <strong>&ldquo;apple-jelly&rdquo; nodules</strong>. In the vestibule it presents as<strong> chronic vestibulitis</strong>.&nbsp;<strong>Perforation </strong>of cartilaginous part can occur.</p>\n<p>Investigation - Biopsy of the lesion</p>\n<p>Treatment - Anti tubercular drugs</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/7c8613286d824e809ed4cc00c8b5a293x619x272.PNG"
    ]
  },
  {
    "text": "Gelle's test was done to diagnose ________",
    "choices": [
      {
        "id": 1,
        "text": "Presbycusis"
      },
      {
        "id": 2,
        "text": "Serous otitis media"
      },
      {
        "id": 3,
        "text": "Otosclerosis"
      },
      {
        "id": 4,
        "text": "Meniere's disease"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Gelle&rsquo;s test</strong> was done to diagnose<strong>&nbsp;</strong>stapes fixation in<strong> Otosclerosis</strong> but has now been superseded by<strong> Tympanometry</strong>.</p>\n<p><strong>Gelle's&nbsp;Test:&nbsp;</strong>It tests the effect of <strong>increased air pressure</strong> <strong>in ear canal on hearing</strong>.The increase&nbsp;in air pressure using&nbsp;siegel's&nbsp;speculum decreases hearing by reducing mobility of tympanic membrane and&nbsp;ossicles&nbsp;and immobility of basilar membrane.</p>\n<ul>\n<li><strong>Positive Gelle's:</strong>\n<ul>\n<li>Normal individuals</li>\n<li>Sensorineural hearing loss</li>\n</ul>\n</li>\n<li><strong> Negative Gelle's: </strong>When ossicular chain is fixed or disconnected<strong>(Otosclerosis)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following is not a part of the triad of Melkersson syndrome:",
    "choices": [
      {
        "id": 1,
        "text": "Facial palsy"
      },
      {
        "id": 2,
        "text": "Swelling of lips"
      },
      {
        "id": 3,
        "text": "Fissured tongue"
      },
      {
        "id": 4,
        "text": "Vesicles in Pinna"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Vesicles in Pinna is <strong>not</strong> a part of the triad of Melkersson syndrome.</p>\n<p><strong>Melkersson Rosenthal Syndrome: </strong>It consists of a <strong>triad</strong> of</p>\n<ul>\n<li>Facial paralysis</li>\n<li>Swelling of lips</li>\n<li>Fissured tongue</li>\n</ul>\n<p>It is an idiopathic disorder. The facial paralysis may be recurrent. Treatment is the same as for Bell palsy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/d5557c53cacf4d3897bffecb750d22d6x300x568.PNG"
    ]
  },
  {
    "text": "Best X-ray view for frontal sinus is ______",
    "choices": [
      {
        "id": 1,
        "text": "Caldwell"
      },
      {
        "id": 2,
        "text": "Towne"
      },
      {
        "id": 3,
        "text": "Water\u2019s"
      },
      {
        "id": 4,
        "text": "Lateral view"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Caldwell view</strong> (Occipitofrontal\u00a0view or nose-forehead position) is the best xray view for frontal sinuses.</p>\n<p>Structures seen are:</p>\n<ul>\n<li><strong>Frontal sinuses (seen best)</strong></li>\n<li>Ethmoid\u00a0sinuses</li>\n<li>Maxillary sinuses</li>\n<li>Frontal process of\u00a0zygoma\u00a0and\u00a0zygomatic\u00a0process of frontal bone</li>\n<li>Superior margin of orbit and lamina\u00a0papyracea</li>\n<li>Superior orbital fissure</li>\n<li>Foramen\u00a0rotundum\u00a0(inferolateral\u00a0to superior orbital fissure)</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/696c483e90b54d4e99b54e3e0cb3c72ex627x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a3b3fb0ac9da48738794a34cfbf3774dx1280x747.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7b5b0a37b75d49e8ab29f9fc4fe2bd4dx448x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/727db066782e47b38f1a3895c279f5dcx512x419.PNG"
    ]
  },
  {
    "text": "Para pharyngeal space extends from________",
    "choices": [
      {
        "id": 1,
        "text": "Base of skull to bifurcation of Trachea"
      },
      {
        "id": 2,
        "text": "Base of skull to the level of hard palate"
      },
      {
        "id": 3,
        "text": "Base of skull to level of C7 vertebra"
      },
      {
        "id": 4,
        "text": "Base of skull to hyoid bone"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Para pharyngeal space extends from<strong> base of skull to hyoid bone.</strong></p>\n<p><strong>Parapharyngeal space:</strong> It is pyramidal in shape with its base at the base of skull and its apex at the hyoid bone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bc893e22029d41a0b6e9a4a822bdf29fx1280x1410.JPEG"
    ]
  },
  {
    "text": "The most common malignancy of the nasal cavity is?",
    "choices": [
      {
        "id": 1,
        "text": "Mucoepidermoid carcinoma"
      },
      {
        "id": 2,
        "text": "Adenocystic Carcinoma"
      },
      {
        "id": 3,
        "text": "Adenocarcinoma"
      },
      {
        "id": 4,
        "text": "Squamous cell carcinoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The most common malignancy of the nasal cavity is<strong> Squamous cell carcinoma </strong>which is seen in about 80% of cases<strong>.\u00a0</strong></p>\n<p>Primary carcinoma of the nasal cavity is rare. Usually, it is an extension of maxillary or ethmoid carcinoma.</p>\n<p>Adenoid and adenocystic\u00a0are the other types of nasal carcinoma.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Thornwaldt's disease is ______",
    "choices": [
      {
        "id": 1,
        "text": "Abscess formation in Pyriform sinus"
      },
      {
        "id": 2,
        "text": "Abscess formation in tonsillar bed"
      },
      {
        "id": 3,
        "text": "Abscess formation in fossa of Rosenmuller"
      },
      {
        "id": 4,
        "text": "Abscess formation in nasopharyngeal bursa"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Thornwaldt's bursitis/ Nasopharyngeal bursitis</strong> is the infection of thornwaldt's bursa(<strong>nasopharyngeal bursa</strong>) which is a remnant of notochord, present as a median recess at the junction of roof and posterior wall of nasopharynx.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/313d3e6d1210469bb90cadca0237dc5bx1280x1406.JPEG"
    ]
  },
  {
    "text": "Ear protectors can give protection from noise intensity up to _______",
    "choices": [
      {
        "id": 1,
        "text": "35 dB"
      },
      {
        "id": 2,
        "text": "20 dB"
      },
      {
        "id": 3,
        "text": "85 dB"
      },
      {
        "id": 4,
        "text": "60 dB"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Ear protectors or ear muffs give noise protection from intensity of <strong>30-40 dB</strong>. Hence, the most appropriate answer in the options is 35 dB.</p>\n<p>Hearing attenuation provided by different devices:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Device&nbsp;</strong>&nbsp;</td>\n<td><strong>Hearing attenuation</strong>&nbsp;&nbsp;</td>\n</tr>\n<tr>\n<td>Cotton wool&nbsp;</td>\n<td>5 dB&nbsp;</td>\n</tr>\n<tr>\n<td>Ear plug&nbsp;&nbsp;</td>\n<td>15-30 dB</td>\n</tr>\n<tr>\n<td>Ear muffs&nbsp;</td>\n<td>30-40 dB</td>\n</tr>\n<tr>\n<td>Ear&nbsp;plugs + muffs&nbsp;</td>\n<td>More than 40 dB</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Mechanism of injury in Chevallet fracture is:",
    "choices": [
      {
        "id": 1,
        "text": "Blow from front"
      },
      {
        "id": 2,
        "text": "Blow from side"
      },
      {
        "id": 3,
        "text": "Blow from below"
      },
      {
        "id": 4,
        "text": "Any of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Mechanism of injury in&nbsp;Chevallet&nbsp;fracture is <strong>blow from side</strong>.</p>\n<p><strong>Chevallet</strong>- A Chevallet&nbsp;fracture is a <strong>Class 1 fracture of nasal septum</strong>. The mechanism of injury is a&nbsp;<strong>blow from side</strong>. The <strong>fracture line is vertical</strong> extending from the anterior nasal spine upwards to the junction of bony and cartilaginous dorsum of nose.</p>\n<p><strong>Jarjaway- </strong>A Jarjaway fracture is&nbsp;a<strong> class 2 fracture,</strong> and it results from a <strong>blow from the front or side. </strong>A frontal impact tends to comminute the nasal bones and cause gross flattening and widening of&nbsp;the dorsum, while a lateral impact produces a high deviation of the nasal skeleton.&nbsp;The perpendicular plate of ethmoid is also involved and it results in a <strong>characteristically C shaped fracture.</strong>&nbsp;</p>\n<p><strong>Note</strong>: Mechanism of injury in&nbsp;Chevallet&nbsp;fracture is a controversial topic. According to some authors (Diseases of Ear, Nose &amp; Throat 6th Edition by Dhingra), Chevallet fracture results from a blow from below. But lateral force is the preferred answer according to other standard textbooks of ENT.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Chromosome involved in Meniere's disease is:",
    "choices": [
      {
        "id": 1,
        "text": "6"
      },
      {
        "id": 2,
        "text": "9"
      },
      {
        "id": 3,
        "text": "12"
      },
      {
        "id": 4,
        "text": "15"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Chromosome involved in Meniere's disease is <strong>short arm of chromosome 6.</strong></p>\n<p><strong>Meniere&rsquo;s disease</strong> can occur due to autoimmune, trauma, viral infections, hypothyroidism, sodium and water retention, and other causes. Most&nbsp;cases&nbsp;are sporadic.&nbsp;Family history is seen in 10-15% cases.&nbsp;</p>\n<p><strong>Note</strong>: No convincing evidence for the association of Meniere's disease with a specific gene has been found, at present. The findings in the literatures indicate a genetic heterogeneity.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Oort's anastomosis is_______",
    "choices": [
      {
        "id": 1,
        "text": "Vestibulo-cochlear artery anastomosis"
      },
      {
        "id": 2,
        "text": "Labyrinthine and anterior inferior cerebellar artery anastomosis"
      },
      {
        "id": 3,
        "text": "Occipital and posterior auricular artery anastomosis"
      },
      {
        "id": 4,
        "text": "Vestibulo-cochlear nerve anastomosis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Oort's anastomosis is <strong>vestibulo-cochlear nerve anastomosis</strong>.</p>\n<p>Anastomosis of Oort is located at the bottom of the internal auditory meatus and<strong> links the saccular nerve to the cochlear nerve</strong>. The vestibulocochlear anastomosis could be the pathway for the nerve fibers of the cochlear efferent system.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Direction of Nasolacrimal duct is:",
    "choices": [
      {
        "id": 1,
        "text": "Downward, Backward, medially"
      },
      {
        "id": 2,
        "text": "Downward, Backward, laterally"
      },
      {
        "id": 3,
        "text": "Downward, Forward, medially"
      },
      {
        "id": 4,
        "text": "Downward, Forward, laterally"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Direction of&nbsp;the NLD is downwards, backwards and laterally.</p>\n<p><strong>Nasolacrimal duct:</strong></p>\n<ul>\n<li>It extends from neck of the&nbsp;lacrimal&nbsp;sac to inferior&nbsp;meatus&nbsp;of the nose.</li>\n<li>It is about <strong>15-18 mm</strong> long and lies in a bony canal formed by the maxilla and the inferior turbinate.</li>\n<li>Direction of the NLD is <strong>downwards, backwards and laterally</strong>.</li>\n<li>Externally, its location is represented by a line joining inner&nbsp;canthus&nbsp;to the ala of nose.</li>\n<li>The narrowest part of the NLD- <strong>upper end</strong>.</li>\n<li>The <strong>Valve of Hasner</strong> is present at the lower end of the duct<strong> prevents reflux from the nose</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/489ea6adbd454f6a9b9548dbd9a77bb6x580x499.PNG"
    ]
  },
  {
    "text": "Turbinate which articulates with the ethmoid bone is_________",
    "choices": [
      {
        "id": 1,
        "text": "Superior turbinate"
      },
      {
        "id": 2,
        "text": "Middle turbinate"
      },
      {
        "id": 3,
        "text": "Inferior turbinate"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Inferior turbinate </strong>is a separate bone and articulates with ethmoid whereas superior and middle turbinates are part of ethmoid bone.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All these structures are seen in the lateral nasal wall except?",
    "choices": [
      {
        "id": 1,
        "text": "Superior turbinate"
      },
      {
        "id": 2,
        "text": "Vomer"
      },
      {
        "id": 3,
        "text": "Aggar nasi"
      },
      {
        "id": 4,
        "text": "Hasner\u2019s valve"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Vomer</strong> bone is seen in the<strong> medial wall or septum</strong> of nose (not lateral wall).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e8fdff9c20054a7e8517b8e4aa66be75x1280x1456.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f416b4893f684b64b6999199dbb50dfbx1280x1410.JPEG"
    ]
  },
  {
    "text": "1 yr old boy presents with biphasic stridor, barking cough and difficulty in breathing and fever. Image given below depicts his Xray findings. All of the following are true about this condition except_____________",
    "choices": [
      {
        "id": 1,
        "text": "Boys are more commonly affected"
      },
      {
        "id": 2,
        "text": "Most common in age group of 6 months to 3 years"
      },
      {
        "id": 3,
        "text": "Most common organism responsible is Parainfluenza virus"
      },
      {
        "id": 4,
        "text": "Condition predominantly involves supraglottis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical picture of <strong>biphasic stridor</strong>, barking cough and difficulty in breathing, and fever in the child along with the <strong>steeple sign</strong> on x ray, is suggestive of <strong>croup or laryngotracheobronchitis</strong>. Biphasic stridor suggests <strong>subglottic involvement </strong>(not supraglottis).</p>\n<p><strong>Croup or laryngotracheobronchitis</strong> is an inflammatory condition of the larynx, trachea, and bronchi caused by the&nbsp;<strong>parainfluenza virus </strong>(Option D). It is characterized by the <strong>subglottic</strong> <strong>swelling</strong> of loose areolar tissue leading to respiratory obstruction and stridor. It commonly affects children between <strong>6 months and 3 years</strong> of age, more often male children. (Option A and B)</p>\n<p><strong>Laryngotracheobronchitis </strong>is characterized by a&nbsp;<strong>barking cough</strong>,&nbsp;<strong>hoarseness</strong>, and&nbsp;<strong>inspiratory stridor</strong>. Agitation and crying aggravate the symptoms and signs. A hoarse voice, coryza, normal to moderately inflamed pharynx, and a slightly increased respiratory rate can be revealed in the physical examination. The upper airway obstruction may progress and the child can present with an increased respiratory rate, nasal flaring; suprasternal, infrasternal, and intercostal retractions; and continuous stridor. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">On X-ray a </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Steeple/Church top/pencil top sign</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> (obstruction in subglottis) is seen.</span></p>\n<p><strong>Biphasic stridor&nbsp;</strong>is seen in lesions of the glottis, <strong>subglottis</strong>, and cervical trachea, e.g. laryngeal papillomas, vocal cord paralysis, and subglottic stenosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/8f0af3f76fba45528701fb9e9ddc65d2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the shortest and narrowest segment of the facial nerve?",
    "choices": [
      {
        "id": 1,
        "text": "Meatal segment"
      },
      {
        "id": 2,
        "text": "Labyrinthine segment"
      },
      {
        "id": 3,
        "text": "Tympanic segment"
      },
      {
        "id": 4,
        "text": "Mastoid segment"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>shortest and narrowest segment</strong> of the facial nerve is the <strong>labyrinthine segment&nbsp;</strong>(length 4.0 mm, diameter 0.61&ndash;0.68 mm).</p>\n<p>The labyrinthine segment is from the fundus of meatus to the geniculate ganglion where the nerve takes a turn posteriorly forming a genu. The nerve in the labyrinthine segment has the narrowest diameter&nbsp; and the bony canal in this segment is also the narrowest. Thus <strong>edema or inflammation</strong> can easily <strong>compress the nerve</strong> and cause paralysis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/420f3175135e46929b2b19e6d9c4162bx1280x4080.JPEG"
    ]
  },
  {
    "text": "Which of the following is the narrowest part of the eustachian tube?",
    "choices": [
      {
        "id": 1,
        "text": "Tympanic end"
      },
      {
        "id": 2,
        "text": "Pharyngeal end"
      },
      {
        "id": 3,
        "text": "Isthmus"
      },
      {
        "id": 4,
        "text": "Infundibulum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>narrowest part</strong> of the eustachian tube is the <strong>isthmus</strong>. It is the junction of the bony and cartilaginous parts.</p>\n<p>Infundibulum is not a part of eustachian tube.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/67b478b238654abc92f4b7b3b1a3c1c4x1280x1550.JPEG"
    ]
  },
  {
    "text": "A  male child presents with unilateral foul smelling blood-stained nasal discharge for 5 days. CT scan is as follows. Diagnosis is_________",
    "choices": [
      {
        "id": 1,
        "text": "Juvenile nasopharyngeal angiofirboma"
      },
      {
        "id": 2,
        "text": "Osteoma"
      },
      {
        "id": 3,
        "text": "Rhinolith"
      },
      {
        "id": 4,
        "text": "Meningoencephalocoele"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is a case of<strong> rhinolith</strong>. The <strong>first differential for a unilateral foul smelling discharge in children is a forgotten/unknown foreign body</strong>. Overtime this foreign body develops a reaction around it giving it a false envelop that calcifies and erodes surrounding structures causing bleeding and discharge.</p>\n<p>Other options:</p>\n<ul>\n<li>JNA is seen in adolescent boys and is a soft tissue mass in the nasopharynx.</li>\n<li>Meningoencephalocoele is a soft tissue mass entering the nose from the skull base.</li>\n<li>Osteoma is not commonly seen on the floor and would be in continuation with a normal bone.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/18a01790b35747989f088290dd67f5b4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Tripod fracture is a fracture of",
    "choices": [
      {
        "id": 1,
        "text": "Nasal bone"
      },
      {
        "id": 2,
        "text": "Maxilla"
      },
      {
        "id": 3,
        "text": "Mandible"
      },
      {
        "id": 4,
        "text": "Zygoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tripod fracture </strong>is a <strong>fracture of zygoma</strong>.</p>\n<p>Tripod fracture: After nasal bones, zygoma is the second most frequently fractured bone. Zygoma is separated at its three processes. Fracture line passes through <strong>zygomaticofrontal</strong> suture, orbital floor, <strong>infraorbital margin</strong> and foramen, anterior wall of maxillary sinus and the <strong>zygomaticotemporal suture</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cde0db13c8304f638a2f5f49f4f194acx673x645.JPEG"
    ]
  },
  {
    "text": "Oral hairy leukoplakia is caused by _________",
    "choices": [
      {
        "id": 1,
        "text": "Cytomegalovirus"
      },
      {
        "id": 2,
        "text": "Epstein barr virus"
      },
      {
        "id": 3,
        "text": "Human papilloma virus"
      },
      {
        "id": 4,
        "text": "Herpes simplex virus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Oral hairy leukoplakia is caused by <strong>Epstein barr virus</strong>.</p>\n<p>WHO defined leukoplakia as a clinical white patch that cannot be characterized clinically or pathologically as any other disease.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b0b27449c25b4a80b34e39e982ba10f7x285x189.JPEG"
    ]
  },
  {
    "text": "Pathognomonic feature of Maxillary sinusitis is:",
    "choices": [
      {
        "id": 1,
        "text": "Mucopus in the middle meatus"
      },
      {
        "id": 2,
        "text": "Inferior turbinate hypertrophy"
      },
      {
        "id": 3,
        "text": "Purulent nasal discharge"
      },
      {
        "id": 4,
        "text": "Atrophic sinusitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Anterior&nbsp;rhinoscopy&nbsp;in chronic maxillary sinusitis shows <strong>discharge in middle meatus which is mucoid or mucopurulent.</strong></p>\n<p>Symptoms of Maxillary sinusitis:</p>\n<ul>\n<li><strong>Pain mainly over upper jaw, aggravated by stooping, coughing &amp; chewing.</strong></li>\n<li>Constitutional symptoms like malaise, fever.</li>\n<li>Headache in frontal region.</li>\n<li>Nasal and post nasal discharge.</li>\n<li>Redness and&nbsp;edema&nbsp;of cheeks.</li>\n<li><strong> Tenderness on pressing over anterior wall of antrum.</strong></li>\n<li>Investigation-<strong> Transillumination test</strong> and <strong>water&rsquo;s view</strong></li>\n<li><strong> Treatment</strong>- Antimicrobial drugs and antral&nbsp;lavage</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Respiratory papillomatosis is caused by?",
    "choices": [
      {
        "id": 1,
        "text": "HPV"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "HSV"
      },
      {
        "id": 4,
        "text": "EBV"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Respiratory or juvenile&nbsp;papillomatosis&nbsp;is caused by HPV.</p>\n<p><strong> Respiratory papillomatosis:</strong></p>\n<ul>\n<li><strong>Juvenile papillomatosis</strong> is the most common benign neoplasm of the larynx in children.</li>\n<li>It is&nbsp;a type of <strong>squamous papilloma</strong> of larynx.</li>\n<li>It is viral in origin&nbsp;caused by <strong>human papilloma DNA virus type 6 and 11</strong>.</li>\n<li>Children who had&nbsp;tracheostomy&nbsp;for respiratory distress due to laryngeal&nbsp;papillomas&nbsp;have higher&nbsp;incidence of tracheal and&nbsp;stomal&nbsp;involvement due to seeding.</li>\n<li><strong> DNA of virus particles</strong> found in the cells of basement membrane of respiratory mucosa account for&nbsp;widespread involvement and recurrence.</li>\n<li><strong>Features:</strong>&nbsp;Child presents with hoarseness or&nbsp;aphonia&nbsp;with respiratory difficulty or&nbsp;stridor.</li>\n<li>Diagnosis: Flexible&nbsp;fibreoptic&nbsp;laryngoscopy&nbsp;and confirmed&nbsp;by <strong>direct laryngoscopy and biopsy</strong>.</li>\n<li>Treatment: <strong>Microlaryngoscopy and CO<sub>2</sub> laser excision</strong> avoiding injury to vocal ligament.</li>\n<li>Investigational treatments:&nbsp;interferon alpha-2a, carbinol, acyclovir and 13-cis-retinoic&nbsp;acid&nbsp;but&nbsp;have <strong>several side effects.</strong></li>\n<li>Others : Cidofovir (post resection), Bevacizumab (adjunct to debulking)</li>\n<li>Prognosis: <strong>Recurrence is common</strong> and procedure needs to be repeated several times.</li>\n<li>Rarely undergo malignant change.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Typical delta sign on contrast enhanced CT is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Otitic Hydrocephalus"
      },
      {
        "id": 2,
        "text": "Sigmoid sinus thrombosis"
      },
      {
        "id": 3,
        "text": "Otogenic brain abscess"
      },
      {
        "id": 4,
        "text": "Perilymph fistula"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Typical delta sign on contrast-enhanced CT is seen in&nbsp;<strong>Sigmoid Sinus Thrombosis </strong>(Lateral sinus thrombophlebitis).</p>\n<p><strong>Sigmoid Sinus Thrombosis:</strong></p>\n<ul>\n<li>It is an inflammation of the inner wall of lateral venous sinus with the formation of an&nbsp;intrasinus&nbsp;thrombus.</li>\n<li>It occurs as a complication of acute coalescent Mastoiditis, masked Mastoiditis&nbsp;or Chronic Suppuration of Middle ear and Cholesteatoma.</li>\n</ul>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li>Blood culture to find out causative organisms.</li>\n<li>CSF analysis is normal except increased CSF pressure and helps ruling out meningitis.</li>\n<li>X-ray mastoid shows\n<ul>\n<li>Clouding of air cells seen in acute&nbsp;mastoiditis</li>\n<li>Destruction of bone seen in&nbsp;cholesteatoma</li>\n</ul>\n</li>\n<li><strong> CECT</strong> shows a <strong>typical delta sign</strong>:\n<ul>\n<li>It is a triangular area with rim enhancement and the central low-density area is seen in the&nbsp;posterior cranial fossa on axial cuts.</li>\n<li>MR venography is useful to assess progression or resolution of thrombus.</li>\n</ul>\n</li>\n<li></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6f57532d52df4ab387718c0c48ec57c7x630x584.PNG"
    ]
  },
  {
    "text": "Surfer's ear is______",
    "choices": [
      {
        "id": 1,
        "text": "Otosclerosis"
      },
      {
        "id": 2,
        "text": "Exostoses"
      },
      {
        "id": 3,
        "text": "Otitis externa"
      },
      {
        "id": 4,
        "text": "Squamous cell carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Surfer's ear is <strong>exostoses.</strong></p>\n<p>Exostoses: They are the<strong> most common</strong> benign tumour of the EAC. They are bilateral, multiple, sessile bony swellings in the deeper (medial) part of bony EAC. They occur due to reactive bone formation in response to exposure to cold water and hence called <strong>Surfer's ear.&nbsp;</strong>If it is large, it can cause conductive hearing loss. If symptomatic it can be removed by a drill.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Type 1 thyroplasty is used for:",
    "choices": [
      {
        "id": 1,
        "text": "Lateralization of vocal cord"
      },
      {
        "id": 2,
        "text": "Medialisation of vocal cord"
      },
      {
        "id": 3,
        "text": "Strengthening of vocal cord"
      },
      {
        "id": 4,
        "text": "Lengthening of vocal cord"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Thyroplasty:</strong></p>\n<p>It is a form of phono-surgery done to improve the quality of voice.&nbsp;<strong>Isshiki</strong> divided&nbsp;thyroplasty&nbsp;procedures into <strong>four categories</strong> to produce functional alteration of vocal cords.</p>\n<ul>\n<li>Type 1-&nbsp;<strong>Medialisation</strong> of vocal cord.</li>\n<li>Type 2-<strong>&nbsp;Lateralisation</strong> of vocal cord to improve the airway.</li>\n<li>Type 3-&nbsp;<strong>Shortening of vocal cord</strong>. This gives <strong>low pitch voice</strong>. Done in<strong> puberphonia</strong> and in those who have undergone transformation from<strong> female to male</strong>.</li>\n<li>Type 4- <strong>Lengthening of vocal cord</strong>. This gives<strong> high pitch voice</strong>. Done in <strong>androphonia</strong>, conversion from<strong> male to female</strong> and age&nbsp;related laxity&nbsp;of vocal cord.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the source of epistaxis after the ligation of the external carotid artery?",
    "choices": [
      {
        "id": 1,
        "text": "Maxillary artery"
      },
      {
        "id": 2,
        "text": "Greater palatine artery"
      },
      {
        "id": 3,
        "text": "Superior labial artery"
      },
      {
        "id": 4,
        "text": "Ethmoidal artery"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ethmoidal artery is a branch of ophthalmic division of Internal Carotid artery</strong>, so it will be the source of&nbsp;epistaxis&nbsp;after the ligation of external carotid artery.</p>\n<p><strong> Blood supply of nose:</strong></p>\n<ul>\n<li>It is from branches of I<strong>nternal and External Carotid artery</strong>.</li>\n<li>So in cases of ligation of external carotid artery, the source of bleeding is from <strong>branches of Internal Carotid artery</strong>.</li>\n<li>Branches of internal carotid artery supplying nose includes <strong>anterior and posterior Ethmoidal artery</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/5aebabcb81874c92858d1d4c806631ebx666x295.PNG"
    ]
  },
  {
    "text": "A patient with a history of foul-smelling ear discharge, for which he did not complete treatment now presents with complaints of fever with chills and swelling over the mastoid. On examination, there is tenderness along the jugular vein. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Petrous apicitis"
      },
      {
        "id": 2,
        "text": "Labyrinthitis"
      },
      {
        "id": 3,
        "text": "Lateral sinus thrombophlebitis"
      },
      {
        "id": 4,
        "text": "Acute mastoiditis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of <strong>lateral sinus thrombophlebitis</strong>. It is an inflammation of the inner wall of the lateral venous sinus with the formation of an&nbsp;intrasinus&nbsp;thrombus.</p>\n<p>Clinical features of&nbsp;lateral sinus thrombophlebitis:</p>\n<ul>\n<li><strong>Hectic picket fence fever </strong>with chills and rigors. This is due to septicemia. The clinical picture resembles malaria but lacks regularity.</li>\n<li><strong>Headache -</strong> In the early stage, it may be due to&nbsp;peri-sinus&nbsp;abscess and is mild. Later, it may be severe when intracranial pressure rises due to venous obstruction.</li>\n<li><strong>Griesinger&rsquo;s sign -</strong>&nbsp;this is due to thrombosis of the mastoid emissary vein. Edema appears over the posterior part of the mastoid.</li>\n<li><strong>Papilloedema&nbsp;</strong>- its presence depends on obstruction to venous return. It is often seen with the right sinus (which is larger than the left).</li>\n<li><strong>Tenderness along the jugular vein&nbsp;</strong>- This is seen when thrombophlebitis extends along the jugular vein. There may be associated enlargement and inflammation of the jugular chain of lymph nodes and torticollis.</li>\n</ul>\n<p>Investigations:</p>\n<ul>\n<li>Blood culture&nbsp;</li>\n<li>CSF analysis - normal except for&nbsp;<strong>increased CSF pressure</strong> that helps in ruling out meningitis.</li>\n<li>X-ray mastoid shows:\n<ul>\n<li>Clouding of air cells seen in acute&nbsp;mastoiditis.</li>\n<li>Destruction of bone seen in&nbsp;cholesteatoma.</li>\n</ul>\n</li>\n<li>CECT shows a <strong>typical delta sign.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/becfea7a157e4a71bb21b1932ef65109x630x584.PNG"
    ]
  },
  {
    "text": "Bony septal perforation occurs in:",
    "choices": [
      {
        "id": 1,
        "text": "Leprosy"
      },
      {
        "id": 2,
        "text": "Rhinosporidiosis"
      },
      {
        "id": 3,
        "text": "Syphilis"
      },
      {
        "id": 4,
        "text": "Tuberculosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span style=\"font-size: 12pt;\"><strong style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\">Syphilis</strong><span style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\"> involves perforation of the </span><strong style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\">bony and cartilaginous</strong><span style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\"> part.\u202f </span><strong style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\">Lupus, tuberculosis, and leprosy</strong><span style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\"> cause perforation only in the </span><strong style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\">cartilaginous</strong><span style=\"letter-spacing: 0px; font-family: 'Akkurat Std', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', sans-serif;\"> part.</span></span></p>\n<p><span style=\"font-size: 10pt;\"><strong> Septal perforation can be caused by:</strong></span></p>\n<ul>\n<li><span style=\"font-size: 10pt;\"><strong>Trauma</strong></span></li>\n<li><span style=\"font-size: 10pt;\"><strong>Pathological:</strong></span>\n<ul>\n<li><span style=\"font-size: 10pt;\">Septal abscess</span></li>\n<li><span style=\"font-size: 10pt;\">Nasal myiasis</span></li>\n<li><span style=\"font-size: 10pt;\">Rhinolith</span></li>\n<li><span style=\"font-size: 10pt;\">Chronic granulomatous disease</span></li>\n<li><span style=\"font-size: 10pt;\">Wegner's granulomatous disease</span></li>\n</ul>\n</li>\n<li><span style=\"font-size: 10pt;\"><strong>Drug-related:</strong></span>\n<ul>\n<li><span style=\"font-size: 10pt;\">Chronic use of steroid spray</span></li>\n<li><span style=\"font-size: 10pt;\">Cocaine abuse</span></li>\n<li><span style=\"font-size: 10pt;\">Arsenic/ chromium</span></li>\n</ul>\n</li>\n<li><span style=\"font-size: 10pt;\"><strong>Idiopathic</strong></span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Multiple perforations of pars tensa is characteristic of",
    "choices": [
      {
        "id": 1,
        "text": "Myringitis bullosa"
      },
      {
        "id": 2,
        "text": "Malignant otitis externa"
      },
      {
        "id": 3,
        "text": "Tuberculosis otits media"
      },
      {
        "id": 4,
        "text": "Syphilitic otits media"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Multiple perforations in the pars tensa is characteristic of Tuberculosis of the ear</p>\n<p><strong>Tuberculosis of ear:</strong></p>\n<ul>\n<li>Usually <strong>secondary to pulmonary tuberculosis</strong>.</li>\n</ul>\n<p><strong>Pathology:</strong></p>\n<ul>\n<li>Submucosal tubercles in middle ear cleft, necrosis of tympanic membrane.</li>\n</ul>\n<p><strong>Clinical features:</strong></p>\n<ul>\n<li>Painless condition</li>\n<li>Foul smelling discharge from ear</li>\n<li><strong>Multiple perforations</strong> in pars tensa of tympanic membrane</li>\n<li>Pale granulations in middle ear cleft</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/0bdb29aff7024752ad3310ec1dfed170x552x434.PNG"
    ]
  },
  {
    "text": "A middle-aged retropositive woman presented with complaints of hearing her own voice and breath sounds with ear fullness. She has lost significant weight in the past 6 months. What is the likely diagnosis in this case?",
    "choices": [
      {
        "id": 1,
        "text": "HIV-related psychosis"
      },
      {
        "id": 2,
        "text": "Superior canal dehiscence syndrome"
      },
      {
        "id": 3,
        "text": "Patulous eustachian tube"
      },
      {
        "id": 4,
        "text": "Blocked eustachian tube"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario describes <strong>autophony</strong> which is seen <strong>patulous eustachian tube</strong>.</p>\n<p>Autophony is a symptom where the patient <strong>hears his own voice</strong> and <strong>breath sounds</strong>.&nbsp;</p>\n<p>Patulous eustachian tube is usually idiopathic where the tube is abnormally patent. But it is also seen in <strong>rapid weight loss</strong>, pregnancy especially the third trimester and patients with multiple sclerosis.</p>\n<p>Treatment includes weight gain, administration of potassium iodide solution. In long-standing cases, specific treatment could include cauterization of tubes or insertion of the grommet.</p>\n<p>Option A: In HIV-related psychosis, there will be persecutory delusion, hallucination, and no ear fullness.</p>\n<p>Option B:&nbsp;The autophony of&nbsp;superior canal dehiscence syndrome usually involves hearing their own voice but <strong>not</strong> their <strong>breathing</strong> when compared with patients who have patulous eustachian tube.</p>\n<p>Option D: Patient with blocked eustachian tube does not present with autophony.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a false statement regarding otosclerosis?",
    "choices": [
      {
        "id": 1,
        "text": "Females are affected twice as often as males."
      },
      {
        "id": 2,
        "text": "Stapedotomy should be avoided in children."
      },
      {
        "id": 3,
        "text": "HRCT shows double ring sign in stapedial otosclerosis."
      },
      {
        "id": 4,
        "text": "It may be associated with measles."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>HRCT&nbsp;shows the <strong>double-ring sign&nbsp;</strong>in <strong>cochlear otosclerosis,</strong> not in the stapedial type.</p>\n<p>Otosclerosis affects <strong>females</strong> twice as often as males. But in India, otosclerosis seems to predominate in males.</p>\n<p>Stapedotomy is <strong>contraindicated in children</strong> because recurrent eustachian tube dysfunction is common in them. This can displace the prosthesis or cause acute otitis media.&nbsp;</p>\n<p><strong>Measles RNA</strong> has been found in otosclerotic foci implicating its possible role in pathogenesis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common congenital cause of stridor is",
    "choices": [
      {
        "id": 1,
        "text": "Laryngeal web"
      },
      {
        "id": 2,
        "text": "Laryngomalacia"
      },
      {
        "id": 3,
        "text": "Laryngeal papilloma"
      },
      {
        "id": 4,
        "text": "Vocal cord palsy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Laryngomalacia (congenital laryngeal stridor). </strong></p>\n<ul>\n<li>It is the most common congenital abnormality of the larynx.</li>\n<li>It is characterized by excessive flaccidity of supraglottic larynx which is sucked in during inspiration producing stridor and sometimes cyanosis.</li>\n<li>On examination<strong>: OMEGA</strong> shaped epiglottis is seen.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Kraissl\u2019s lines are",
    "choices": [
      {
        "id": 1,
        "text": "Point of maximum tension in a fracture"
      },
      {
        "id": 2,
        "text": "Relaxed Tension lines  in skin"
      },
      {
        "id": 3,
        "text": "Collagen and elastin lines in stab injury"
      },
      {
        "id": 4,
        "text": "Point of tension in hanging"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Kraissl's lines</strong> are<strong> relaxed tension lines</strong> in the<strong> skin</strong>. They lie <strong>perpendicular</strong> to the long<strong> axis of the underlying muscle</strong>. They were described in <strong>living</strong> individuals and reflect underlying <strong>muscle action</strong>.</p>\n<p>Image of Kraissl's lines:&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7cde61e1a1b749aea5336abbd84f1350x1280x1417.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3f2f11dbbf4b4d7e88e7817fcaea58c6x1280x1418.JPEG"
    ]
  },
  {
    "text": "Where is the collection of pus formed in quinsy?",
    "choices": [
      {
        "id": 1,
        "text": "Peritonsillar space"
      },
      {
        "id": 2,
        "text": "Parapharyngeal space"
      },
      {
        "id": 3,
        "text": "Retropharyngeal space"
      },
      {
        "id": 4,
        "text": "Within the tonsil"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Quinsy</strong> is also called <strong>peritonsillar abscess</strong>.</p>\n<p>It is the collection of pus between the <strong>fibrous capsule of the tonsil and the superior constrictor muscles of the pharynx.</strong></p>\n<p>Etiology</p>\n<ul>\n<li><strong>anaerobic bacteria and </strong></li>\n<li><strong>beta-hemolytic streptococci</strong></li>\n<li>related to <strong>periodontal disease</strong>.</li>\n</ul>\n<p>Clinical features</p>\n<ul>\n<li>sore throat,</li>\n<li>dysphagia,</li>\n<li>drooling of saliva,</li>\n<li>trismus,</li>\n<li>ipsilateral otalgia,</li>\n<li>fever with headache</li>\n</ul>\n<p><strong>Antibiotics and needle aspiration</strong> are commonly used as treatment modalities.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The best laboratory investigation to establish the diagnosis of CSF rhinorrhea is:",
    "choices": [
      {
        "id": 1,
        "text": "Glucose oxidase testing"
      },
      {
        "id": 2,
        "text": "Beta-2 transferrin testing"
      },
      {
        "id": 3,
        "text": "Flurorescein lumbar puncture"
      },
      {
        "id": 4,
        "text": "High resolution computerized tomography"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p style=\"text-align: right;\">The <strong>single best lab investigation to establish the diagnosis of CSF rhinorrhea is the assay of beta-2 transferrin which is present only in the CSF, perilymph and aqueous humor</strong>.</p>\n<p>The other lab test is testing for glucose oxidase but it is unreliable and is not in use currently.</p>\n<p>Other investigative techniques for diagnosis of CSF rhinorrhea include high resolution CT scan, scopy and fluorescein lumbar puncture.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "False about Ludwig\u2019s angina",
    "choices": [
      {
        "id": 1,
        "text": "It involves both sublingual and submaxillary space"
      },
      {
        "id": 2,
        "text": "It is usually bilateral"
      },
      {
        "id": 3,
        "text": "Dental infections are most common cause"
      },
      {
        "id": 4,
        "text": "H.influenza is the most common cause"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Ludwig&rsquo;s angina is the infection of submandibular space.</p>\n<p>This space is divided into two compartments by the mylohyoid muscle:</p>\n<ol>\n<li>Sublingual compartment (above the mylohyoid).</li>\n<li>Submaxillary and submental compartment (below the mylohyoid).</li>\n</ol>\n<p>The two compartments are continuous around the posterior border of the mylohyoid muscle. <strong>Dental infections. </strong></p>\n<p>They account for 80% of the cases.</p>\n<p>Mixed infections involving both aerobes and anaerobes are common.&nbsp;</p>\n<div class=\"page\" title=\"Page 278\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Alpha-haemolytic Streptococci, Staphylococci and Bacteroides groups are common</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Dingman\u2019s classification is used for fracture of",
    "choices": [
      {
        "id": 1,
        "text": "Maxilla"
      },
      {
        "id": 2,
        "text": "Mandible"
      },
      {
        "id": 3,
        "text": "Zygoma"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Dingman&rsquo;s classification is used for fractures of mandible.</p>\n<p>Le-Fort classification is used for fractures of maxilla.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Young\u2019s syndrome is",
    "choices": [
      {
        "id": 1,
        "text": "Neutrophilia with red papular rash"
      },
      {
        "id": 2,
        "text": "Infertility with bronchiectasis"
      },
      {
        "id": 3,
        "text": "Mitral stenosis with ASD"
      },
      {
        "id": 4,
        "text": "Asthma, aspirin hypersensitivity, nasal polyp"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Young syndrome - </strong>It consists of sinopulmonary disease and azoospermia.</p>\n<p>Neutrophilia with red papular rash is seen in <strong>Sweet&rsquo;s syndrome</strong>/acute febrile neutrophilic dermatosis.</p>\n<p>Mitral stenosis with ASD forms part of <strong>Lutembacher syndrome.</strong></p>\n<p>Nasal polyp, asthma, aspirin hypersensitivity form <strong>Samter&rsquo;s triad</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following attains adult size before birth?",
    "choices": [
      {
        "id": 1,
        "text": "Ear ossicles"
      },
      {
        "id": 2,
        "text": "Mastoid"
      },
      {
        "id": 3,
        "text": "Orbit"
      },
      {
        "id": 4,
        "text": "Cornea"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ear ossicles</strong> attain <strong>adult size</strong> before birth.&nbsp;</p>\n<p>The development of the middle ear:</p>\n<ul>\n<li>The ossicles are full-sized cartilage models by 15 weeks of gestation.</li>\n<li>Endochondral ossification is complete by 25 weeks.</li>\n<li>The middle ear is adult-sized at birth.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Bezold\u2019s abscess is located in:",
    "choices": [
      {
        "id": 1,
        "text": "Submandibular triangle"
      },
      {
        "id": 2,
        "text": "Digastric triangle"
      },
      {
        "id": 3,
        "text": "Sternomastoid muscle"
      },
      {
        "id": 4,
        "text": "Infratemporal region"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Bezold abscess is located in sternomastoid muscle<strong>.</strong></p>\n<p>It is a complication of acute mastoiditis and an extracranial complication of mastoiditis and active chronic otitis media (COM).</p>\n<p>It is a neck abscess in the sternomastoid muscle as a result of direct extension from suppuration in the mastoid tip.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/e653b6dace824a80b4384fa6933c8682x647x425.PNG"
    ]
  },
  {
    "text": "False about the following is",
    "choices": [
      {
        "id": 1,
        "text": "Also known as elephantiasis of nose"
      },
      {
        "id": 2,
        "text": "Seen in long standing cases of acne rosacea"
      },
      {
        "id": 3,
        "text": "It is premalignant"
      },
      {
        "id": 4,
        "text": "Hypertrophy of sebaceous gland"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is an image of<strong> Rhinophyma or potato tumor or elephantiasis:</strong></p>\n<ul>\n<li>It is due to <strong>hypertrophy of sebaceous gland</strong>.</li>\n<li>Associated with long standing cases of <strong>acne rosacea</strong> in men past middle age.</li>\n<li>Mostly seen at <strong>tip of nose</strong> and causes <strong>unsightly appearance</strong> and obstruction to breathing and vision.</li>\n<li>Treatment: <strong>Excision with cauterization</strong> of base.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/73532dc6b6914164a3ae93142d1ec371.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Onodi cells and haller cells are in relation to",
    "choices": [
      {
        "id": 1,
        "text": "Optic nerve and roof of maxillary sinus"
      },
      {
        "id": 2,
        "text": "Optic nerve and frontal sinus"
      },
      {
        "id": 3,
        "text": "Optic nerve only"
      },
      {
        "id": 4,
        "text": "Optic chiasma and frontal sinus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Onodi cell</strong>&nbsp;is related to&nbsp;<strong>optic nerve</strong>&nbsp;and&nbsp;<strong>haller cell</strong>&nbsp;is related to<strong>&nbsp;maxillary sinus</strong>.</p>\n<p><strong>Onodi cell&nbsp;</strong>(sphenoethmoidal cell) is a&nbsp;<strong>posterior ethmoidal cell&nbsp;</strong>extending into sphenoid sinus. It is surgically important as the&nbsp;<strong>optic nerve&nbsp;</strong>and&nbsp;<strong>internal carotid artery&nbsp;</strong>may be related to its lateral wall.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cbcde2ae6acd47adb86de20cc696b591x578x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e02f5d965f824bea927eb0851c586794x377x379.JPEG"
    ]
  },
  {
    "text": "Grisel syndrome is",
    "choices": [
      {
        "id": 1,
        "text": "Damage to upper incisors"
      },
      {
        "id": 2,
        "text": "TMJ dislocation"
      },
      {
        "id": 3,
        "text": "Paraspinal muscle spasm"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Grisel syndrome:</strong></p>\n<p>It is one of the <strong>complications of adenoidectomy</strong></p>\n<p>Patient complains of <strong>neck pain and develops torticollis</strong></p>\n<p>Mostly it is due to <strong>spasm of paraspinal muscles</strong>, but can be due to <strong>atlantoaxial dislocation</strong> requiring cervical collar and even traction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following is true regarding attachments of arytenoid except:",
    "choices": [
      {
        "id": 1,
        "text": "Base - cricoid"
      },
      {
        "id": 2,
        "text": "Vocal process- Vocal ligament"
      },
      {
        "id": 3,
        "text": "Apex- intrinsic muscles of larynx"
      },
      {
        "id": 4,
        "text": "Apex- corniculate cartilages"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The apex of the arytenoid supports the corniculate cartilages.</p>\n<p>The following are the attachments of the arytenoid:</p>\n<ul>\n<li><strong>Base - cricoid</strong></li>\n<li><strong>Vocal process- Vocal ligament</strong></li>\n<li><strong>Muscular process- intrinsic muscles of larynx</strong></li>\n<li><strong>Apex- corniculate cartilages</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Reinke\u2019s space is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Glottis"
      },
      {
        "id": 2,
        "text": "Supraglottis"
      },
      {
        "id": 3,
        "text": "Subglottis"
      },
      {
        "id": 4,
        "text": "Paraglottic space"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Reinke&rsquo;s space </strong>is a <strong>potential space underneath the epithelium of vocal cords therefore the glottis.</strong></p>\n<p>It contains scanty subepithelial connective tissue.</p>\n<p>Oedema of this space is commonly seen in smokers and is called <strong>reinke&rsquo;s edema/ smoker&rsquo;s larynx.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The sign in the image given below is seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Grave\u2019s disease"
      },
      {
        "id": 2,
        "text": "Branchial cyst"
      },
      {
        "id": 3,
        "text": "Thymic cyst"
      },
      {
        "id": 4,
        "text": "Carotid body tumour"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><span class=\"TextRun SCXW150290824\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCXW150290824\">MRI angiography shows splaying of internal and external carotid arteries -&nbsp;</span></span><strong><span class=\"TextRun SCXW150290824\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCXW150290824\">Lyre&rsquo;s sign</span></span></strong></p>\n<p><strong>Carotid body tumour:</strong></p>\n<ul>\n<li>It arises from the chemoreceptor cells in the carotid body, hence called <strong>chemodectoma</strong>.</li>\n<li>Mostly presents after <strong>40 years</strong>.</li>\n<li>It is a very <strong>slow-growing tumour.</strong></li>\n</ul>\n<p><strong> Features:</strong></p>\n<ul>\n<li><strong> Painless swelling which is pulsatile</strong>.</li>\n<li><strong> Bruit</strong> can be heard with a stethoscope.</li>\n<li>It moves from <strong>side to side</strong> but not vertically.</li>\n<li>It may extend into the&nbsp;parapharyngeal&nbsp;space and present in the&nbsp;oropharynx.</li>\n<li>Some tumours are functional and <strong>secrete catecholamines</strong>.</li>\n</ul>\n<p>Contrast-enhanced CT and MRI with gadolinium are diagnostic and also show the extent of the tumour. <strong>MRI angiography shows splaying of internal and external carotid arteries (Lyre&rsquo;s sign)</strong>. Serum&nbsp;catecholamines&nbsp;and urinary meta-nephrines&nbsp;and&nbsp;vanillyl&nbsp;mandelic&nbsp;acid (VMA) should be estimated.</p>\n<p>Fine-needle aspiration cytology (FNAC) or<strong> biopsy should not be done</strong> because of the&nbsp;vascularity&nbsp;of tumour.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b43e8e5da5cf4af1ba24912261b0ecbe.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Identify the artery of epistaxis in the given image.",
    "choices": [
      {
        "id": 1,
        "text": "1"
      },
      {
        "id": 2,
        "text": "2"
      },
      {
        "id": 3,
        "text": "3"
      },
      {
        "id": 4,
        "text": "4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The structure marked <strong>3</strong>&nbsp;is the&nbsp;<strong>sphenopalatine artery </strong>which is&nbsp;also known as the <strong>artery of epistaxis</strong>.</p>\n<p>It is called the artery of epistaxis because the majority of the blood supply to the nasal cavity is derived from it. It is also the <strong>most commonly involved</strong> artery in epistaxis.</p>\n<p>Other structures marked in the diagram are as follows:</p>\n<p><strong>1&nbsp;</strong>- Anterior ethmoidal artery</p>\n<p><strong>2&nbsp;</strong>- Posterior ethmoidal artery</p>\n<p><strong>4&nbsp;</strong>- Greater palatine artery</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2b2d765736fd44aea57a6279ecf64723.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/51892922adb3460280e2d4a7d534e907x1280x2104.JPEG"
    ]
  },
  {
    "text": "A middle-aged patient presents with multiple nodules in the nasal mucosa. Biopsy from the nodules revealed the presence of Miculikz cells and Russell bodies. Which of the following is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Rhinoscleroma"
      },
      {
        "id": 2,
        "text": "Rhinosporidiosis"
      },
      {
        "id": 3,
        "text": "Lupus vulgaris"
      },
      {
        "id": 4,
        "text": "Granulomatosis with polyangitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario and the biopsy findings showing <strong>Mikulicz cells</strong> and <strong>Russell bodies</strong> are characteristic of <strong>rhinoscleroma.</strong></p>\n<p><strong>Rhinoscleroma </strong>is a <strong>chronic granulomatous disease</strong> caused by\u00a0<strong><em>Klebsiella rhinoscleromatis</em>\u00a0</strong>(Frisch bacillus).</p>\n<p><strong>Mikulicz cells</strong> are large foam cells with a central nucleus and vacuolated cytoplasm containing causative bacilli.\u00a0<strong>Russell bodies</strong> are homogenous eosinophilic<strong> inclusion bodies</strong> found in the plasma cells due to the <strong>accumulation of immunoglobulins</strong>\u00a0secreted by plasma cells. Histology also shows infiltration of submucosa with plasma cells, lymphocytes and eosinophils.\u00a0</p>\n<p>The following image shows rhinoscleroma with Mikulicz cells and Russell bodies(marked in black arrows)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/72287c52b31e4cc4a115d6bbee519d5fx720x480.JPEG"
    ]
  },
  {
    "text": "Rinne positive in both ears and Weber lateralised towards left indicates",
    "choices": [
      {
        "id": 1,
        "text": "Right conductive deafness"
      },
      {
        "id": 2,
        "text": "Left conductive deafness"
      },
      {
        "id": 3,
        "text": "Right sensorineural deafness"
      },
      {
        "id": 4,
        "text": "Left sensorineural deafness"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>It is&nbsp;<strong>Right sided sensorineural hearing loss.</strong></p>\n<p>Since Weber is lateralised towards left, it indicates <strong>left&nbsp;sided conductive deafness</strong> or <strong>right sided sensorineural deafness</strong>.</p>\n<p>Since Rinne is positive on both ears, <strong>conductive deafness is ruled out</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Ent Test I';
        const quizFilename = 'ent-test-i-f00ed4b8.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>