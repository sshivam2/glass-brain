<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>09  Monitoring In Anaesthesia - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        DAMS / DQB / Anesthesia
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">37</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "id": 50000,
    "choices": [
      {
        "id": 200000,
        "text": "ETCO2"
      },
      {
        "id": 200001,
        "text": "BIS"
      },
      {
        "id": 200002,
        "text": "ARTERIAL B.P"
      },
      {
        "id": 200003,
        "text": "NEUROMUSCULAR MONITOR"
      }
    ],
    "text": "Awareness during anaesthesia can be assessed by",
    "unique_key": "Q9901019",
    "question_audio": null,
    "question_video": null,
    "map_id": 34073612,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) BIS (Bispectral Index) Bispectral Index (BIS) is the most reliable tool for assessing awareness during anesthesia. The BIS monitor provides a numerical value based on the patient's electroencephalogram (EEG) activity, which correlates with the depth of anesthesia. A lower BIS value indicates deeper anesthesia, while a higher BIS value suggests lighter anesthesia. Monitoring the BIS helps to prevent intraoperative awareness, which occurs when a patient is conscious during surgery despite being under general anesthesia. This tool is specifically designed to assess consciousness levels and avoid unintentional awareness. Incorrect Answers: A. ETCO2 (End-tidal CO2) End-tidal CO2 monitoring is used to assess ventilation and the adequacy of respiratory function, not the level of consciousness. While ETCO2 can indicate whether a patient is adequately ventilated during anesthesia, it does not provide information about the depth of anesthesia or the presence of awareness. ETCO2 measurements can help detect respiratory issues, but they do not directly assess consciousness. C. ARTERIAL B.P (Arterial Blood Pressure) Arterial blood pressure (BP) is an important physiological parameter to monitor during anesthesia, but it is not a reliable indicator of awareness. BP can be influenced by many factors, including blood volume, cardiac output, and the use of vasopressors. While an increase in BP might suggest stress or discomfort, it does not definitively indicate that a patient is aware during surgery, as BP can also rise due to other reasons like pain or physiological response to anesthesia. D. NEUROMUSCULAR MONITOR Neuromuscular monitoring is primarily used to assess the depth of neuromuscular blockade, ensuring that the patient is adequately paralyzed for surgery and has a safe recovery from muscle relaxants. While this is critical for preventing complications such as airway obstruction, it does not assess awareness during anesthesia. A patient could still be aware during surgery even if the neuromuscular blockade is properly managed, as neuromuscular monitoring does not evaluate consciousness levels.",
    "correct_choice_id": 200001,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47963351698562010/47963351698562010.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47963351698562010/47963351698562010.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50001,
    "choices": [
      {
        "id": 200004,
        "text": "Inflation of chest wall"
      },
      {
        "id": 200005,
        "text": "Bi lateral auscultation of lungs"
      },
      {
        "id": 200006,
        "text": "Capnography"
      },
      {
        "id": 200007,
        "text": "Fiberoptic bronchoscopy"
      }
    ],
    "text": "Best method for confirming endotracheal tube insertion is",
    "unique_key": "Q8934957",
    "question_audio": null,
    "question_video": null,
    "map_id": 34933570,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Fiberoptic bronchoscopy Fiberoptic bronchoscopy is the best method for confirming endotracheal tube insertion. It allows direct visualization of the endotracheal tube's position within the trachea and its placement above the carina. This method ensures that the tube is in the trachea and not in the esophagus or a bronchus. Fiberoptic bronchoscopy is considered the gold standard for confirmation of tube placement, as it provides real-time, direct visual confirmation of the airway and can also be used to assess for complications such as tube malposition or obstruction. Incorrect Answers: A. Inflation of chest wall Inflation of the chest wall is a basic method to check for the correct positioning of the endotracheal tube. However, it is not always a reliable indicator. Chest expansion can occur even if the tube is in the esophagus, as the esophagus is located near the trachea, and air can still pass through. Hence, this method is not definitive, and further confirmation is necessary to ensure proper endotracheal tube placement. B. Bilateral auscultation of lungs Bilateral auscultation of the lungs is a common technique used to check for proper tube placement, where the provider listens for breath sounds on both sides of the chest. While the presence of breath sounds in both lungs can suggest that the tube is in the trachea, it is not always conclusive. The absence of breath sounds on one side may indicate the tube is malpositioned or in a bronchus, but this method cannot definitively rule out esophageal intubation, especially in cases of improper placement. C. Capnography Capnography is a valuable tool for confirming endotracheal tube placement, as the presence of exhaled carbon dioxide (CO2) indicates that the tube is in the trachea and is ventilating the lungs. However, while it is a reliable method for confirming tube placement in most cases, it is not as definitive as fiberoptic bronchoscopy. In some situations, such as when there is poor circulation or when the tube is placed in the esophagus, capnography may show false positives. Therefore, it is often used in conjunction with other methods for the best confirmation.",
    "correct_choice_id": 200007,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60844351698562024/60844351698562024.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60844351698562024/60844351698562024.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50002,
    "choices": [
      {
        "id": 200008,
        "text": "Ulnar artery"
      },
      {
        "id": 200009,
        "text": "Radial artery"
      },
      {
        "id": 200010,
        "text": "Dorsalis pedis artery"
      },
      {
        "id": 200011,
        "text": "Popliteal artery"
      }
    ],
    "text": "Most common artery used for arterial blood pressure monitoring is",
    "unique_key": "Q9746489",
    "question_audio": null,
    "question_video": null,
    "map_id": 34409463,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Radial artery The radial artery is the most commonly used artery for arterial blood pressure monitoring. It is easily accessible at the wrist, has a relatively superficial location, and is a small, well-anchored artery, making it ideal for cannulation. Additionally, the radial artery typically has good collateral circulation through the ulnar artery, reducing the risk of ischemia if the radial artery is catheterized. These characteristics make it the preferred site for continuous monitoring of arterial blood pressure in most patients. Incorrect Answers: A. Ulnar artery The ulnar artery is not typically used for arterial blood pressure monitoring. While it is also a palpable and accessible artery, it is less commonly cannulated than the radial artery. Its primary role is in supplying blood to the hand, and it is often used to assess collateral circulation before radial artery cannulation, especially in patients with compromised radial artery circulation. The ulnar artery is less favorable due to its deeper location and lower prevalence of use. C. Dorsalis pedis artery The dorsalis pedis artery is located on the dorsum of the foot and can be used for arterial blood pressure monitoring, but it is less commonly chosen compared to the radial artery. It is more difficult to access and may be more prone to spasm or trauma. Furthermore, the presence of a pulse in the dorsalis pedis artery can vary, especially in patients with peripheral vascular disease or other circulatory issues. Therefore, it is not the preferred site for continuous monitoring. D. Popliteal artery The popliteal artery is located behind the knee and is a deeper artery, which makes it more difficult to access and less commonly used for arterial blood pressure monitoring. While it can be used in certain situations, such as in cases where radial access is not possible, it is not the first choice due to its deeper location, difficulty in catheter placement, and increased risk of complications like hematoma formation. The radial artery is preferred because of its accessibility and ease of cannulation.",
    "correct_choice_id": 200009,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70967121698562038/70967121698562038.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70967121698562038/70967121698562038.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50003,
    "choices": [
      {
        "id": 200012,
        "text": "Central venous pressure"
      },
      {
        "id": 200013,
        "text": "blood pressure during anaesthesia"
      },
      {
        "id": 200014,
        "text": "Concentration of exhaled CO2"
      },
      {
        "id": 200015,
        "text": "Concentration of inhaled O2"
      }
    ],
    "text": "Capnography basically monitors?",
    "unique_key": "Q8031059",
    "question_audio": null,
    "question_video": null,
    "map_id": 34289768,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Concentration of exhaled CO2 Capnography is a monitoring technique that primarily measures the concentration of exhaled CO2 (carbon dioxide) during ventilation. It provides real-time data on the CO2 levels in the breath, which is a valuable indicator of ventilation, perfusion, and metabolism. A capnograph displays the partial pressure of CO2 in exhaled air, and any significant changes in this value can alert healthcare providers to potential problems, such as hypoventilation, hyperventilation, or airway obstructions. It is an essential tool in both anesthetic and critical care settings. Incorrect Answers: A. Central venous pressure Central venous pressure (CVP) refers to the pressure in the central veins, particularly the superior vena cava, which reflects the right atrial pressure and venous return. Capnography does not measure CVP; rather, CVP is typically assessed via a catheter inserted into the central veins, often using a pressure transducer. Capnography monitors the concentration of exhaled CO2, which is unrelated to CVP. B. Blood pressure during anaesthesia Capnography does not directly measure blood pressure. Blood pressure is monitored using devices such as an oscillometric cuff or an arterial line during anesthesia. While both blood pressure and CO2 levels can provide important physiological insights during surgery, they are distinct parameters. Capnography specifically measures CO2 concentration in exhaled air and cannot assess blood pressure. D. Concentration of inhaled O2 Capnography does not measure the concentration of inhaled oxygen (O2). O2 concentration is typically monitored using an oxygen analyzer that measures the oxygen concentration in the inspired air, usually in the anesthesia machine or ventilator. Capnography, on the other hand, measures CO2 levels, which provides information about ventilation, not the oxygen concentration.",
    "correct_choice_id": 200014,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52522791698562050/52522791698562050.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52522791698562050/52522791698562050.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50004,
    "choices": [
      {
        "id": 200016,
        "text": "Accidental extubation"
      },
      {
        "id": 200017,
        "text": "Bronchospasm"
      },
      {
        "id": 200018,
        "text": "Dissociation of anesthetic tube"
      },
      {
        "id": 200019,
        "text": "Mechanical ventilation failing"
      }
    ],
    "text": "Flat capnogram seen with all except",
    "unique_key": "Q6569531",
    "question_audio": null,
    "question_video": null,
    "map_id": 34159680,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Bronchospasm. A flat capnogram indicates that no carbon dioxide is being detected by the capnograph, which signifies a complete cessation of airflow from the patient's lungs to the monitoring device. This can be caused by accidental extubation, a disconnection of the anesthetic tube, or a failure of the mechanical ventilator. In contrast, bronchospasm is a condition where the airways narrow, causing an obstruction to airflow but not a complete stop. This obstruction results in a characteristic \"shark-fin\" or sloped capnogram waveform, not a flat line, as some CO2 is still being exhaled, albeit with difficulty.",
    "correct_choice_id": 200017,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19508151698562064/19508151698562064.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19508151698562064/19508151698562064.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50005,
    "choices": [
      {
        "id": 200020,
        "text": "EtCO2"
      },
      {
        "id": 200021,
        "text": "Airway pressure measurement"
      },
      {
        "id": 200022,
        "text": "Clinically by auscultation"
      },
      {
        "id": 200023,
        "text": "Bronchoscopy"
      }
    ],
    "text": "Placement of a double lumen tube for lung surgery is best confirmed by-",
    "unique_key": "Q5787257",
    "question_audio": null,
    "question_video": null,
    "map_id": 34949120,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Bronchoscopy The best method for confirming the placement of a double lumen tube for lung surgery is bronchoscopy. A fiberoptic bronchoscope allows direct visualization of the endotracheal tube's placement in the trachea and its correct positioning in either the right or left bronchus. This ensures that both lumens of the tube are properly positioned in the respective bronchi, enabling independent ventilation of each lung. Bronchoscopy is the gold standard as it provides clear, real-time visual confirmation of tube placement and can detect any malposition or obstruction. Incorrect Answers: A. EtCO2 While EtCO2 (End-tidal CO2) monitoring is useful for confirming that the tube is in the trachea and not the esophagus (by detecting the presence of exhaled CO2), it does not provide specific confirmation of proper placement in either the right or left bronchus. In cases of double lumen tubes, EtCO2 might confirm tracheal intubation but not the appropriate position in the bronchus, making it less reliable for confirming the tube's precise placement during lung surgery. B. Airway pressure measurement Airway pressure measurements can be helpful to some extent in assessing ventilation adequacy, but they do not confirm the placement of a double lumen tube in the correct bronchus. Pressure measurements alone cannot determine whether the tube is positioned in the left or right bronchus or if it is properly ventilating both lungs independently. Thus, airway pressure measurement is not the best method for confirming double lumen tube placement. C. Clinically by auscultation Auscultation can help detect whether there is bilateral lung inflation after double lumen tube insertion, but it is not a definitive method for confirming correct placement. Auscultation may show normal breath sounds if the tube is in the trachea, but it cannot confirm if the tube is in the right or left bronchus. Misplacement of the tube into one bronchus while the other lung remains unventilated might not be detectable solely by auscultation, which makes this method unreliable compared to bronchoscopy.",
    "correct_choice_id": 200023,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60823911698562082/60823911698562082.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/60823911698562082/60823911698562082.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50006,
    "choices": [
      {
        "id": 200024,
        "text": "10 sec"
      },
      {
        "id": 200025,
        "text": "20 sec"
      },
      {
        "id": 200026,
        "text": "40 sec"
      },
      {
        "id": 200027,
        "text": "60 sec"
      }
    ],
    "text": "What is the time gap given in train of four?",
    "unique_key": "Q6856688",
    "question_audio": null,
    "question_video": null,
    "map_id": 34404055,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) 10 sec In the Train of Four (TOF) monitoring technique, the time gap between each electrical stimulus is typically 10 seconds. This interval allows for the proper assessment of neuromuscular blockade by measuring the response to four consecutive stimuli. The time between each stimulus is short enough to assess the relative block of muscle function but long enough to observe the cumulative effect of the muscle response, providing information about the depth of paralysis and recovery. The 10-second interval is standard practice for assessing neuromuscular function during anesthesia. Incorrect Answers: B. 20 sec A 20-second gap would be too long for the effective monitoring of neuromuscular blockade in a TOF assessment. A longer interval would reduce the sensitivity of the test in detecting subtle changes in muscle response, making it less effective for real-time monitoring of the depth of neuromuscular block. Hence, this duration is not used in TOF monitoring. C. 40 sec A 40-second interval would be even longer and would not provide the necessary information about the neuromuscular blockade in a timely manner. The response to the stimuli in TOF monitoring needs to be assessed quickly to adjust anesthetic agents appropriately and ensure patient safety. A 40-second interval would likely miss subtle changes in muscle function. D. 60 sec A 60-second gap is far too long for TOF monitoring. This would not allow for the continuous and real-time assessment that is needed to manage neuromuscular blockade effectively. A 60-second interval would likely be too slow to detect changes in muscle response, which is crucial for making real-time adjustments during surgery. Thus, this duration is not suitable for TOF monitoring.",
    "correct_choice_id": 200024,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23234361698562097/23234361698562097.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23234361698562097/23234361698562097.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50007,
    "choices": [
      {
        "id": 200028,
        "text": "Sleep"
      },
      {
        "id": 200029,
        "text": "Sedation"
      },
      {
        "id": 200030,
        "text": "Pain intensity"
      },
      {
        "id": 200031,
        "text": "Depth of anaesthesia"
      }
    ],
    "text": "Visual analogue scale (VAS) is most widely used to a measure-",
    "unique_key": "Q5681802",
    "question_audio": null,
    "question_video": null,
    "map_id": 34062753,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Pain intensity The Visual Analogue Scale (VAS) is most widely used to measure pain intensity. It is a simple and effective tool that allows patients to rate their pain on a scale, usually from 0 (no pain) to 10 (worst possible pain). VAS is commonly used in both clinical and research settings to assess subjective pain experiences. Its visual and easy-to-understand format makes it a valuable tool for quantifying pain levels and assessing the effectiveness of pain management strategies. Incorrect Answers: A. Sleep The VAS is not typically used to measure sleep. While there are other tools like the Pittsburgh Sleep Quality Index (PSQI) or Epworth Sleepiness Scale designed to assess sleep patterns or quality, VAS is specifically intended for evaluating pain intensity. Sleep is usually assessed through other specific questionnaires or clinical observations rather than a visual analog scale. B. Sedation Although the VAS is widely used for pain measurement, it is not typically employed for assessing sedation. Sedation levels are more commonly evaluated using scales like the Ramsay Sedation Scale or the Sedation-Agitation Scale (SAS), which specifically measure the level of consciousness and responsiveness of a patient under sedation. VAS does not provide a comprehensive measure of sedation. D. Depth of anaesthesia The depth of anesthesia is also not measured using the VAS. Depth of anesthesia is assessed by clinical signs (e.g., blood pressure, heart rate), BIS (Bispectral Index) monitoring, or other specialized tools. VAS is not designed to measure the depth of anesthesia, as it is more suited for subjective assessments like pain intensity rather than physiological or pharmacological monitoring of anesthesia levels.",
    "correct_choice_id": 200030,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66665461698562110/66665461698562110.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66665461698562110/66665461698562110.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50008,
    "choices": [
      {
        "id": 200032,
        "text": "Hyperbilirubinemia"
      },
      {
        "id": 200033,
        "text": "Nail polish"
      },
      {
        "id": 200034,
        "text": "fetal hb"
      },
      {
        "id": 200035,
        "text": "Skin pigmentation"
      }
    ],
    "text": "Pulse oximetry detects inaccurately in presence of-",
    "unique_key": "Q7036123",
    "question_audio": null,
    "question_video": null,
    "map_id": 34829738,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Nail polish Pulse oximetry detects the oxygen saturation of hemoglobin by using light absorption characteristics of oxygenated and deoxygenated hemoglobin. Nail polish, especially dark-colored ones, can interfere with the light transmission through the nail, distorting the readings of oxygen saturation. Dark-colored nail polish, like black or dark red, absorbs light and reduces the accuracy of the pulse oximeter. To prevent this, it is often recommended to remove nail polish or use an alternate site for pulse oximetry, such as the earlobe or forehead. Incorrect Answers: A. Hyperbilirubinemia Hyperbilirubinemia does not significantly interfere with pulse oximetry readings. While high bilirubin levels can cause jaundice, which might lead to yellowing of the skin, it does not directly impact the optical measurement of oxygen saturation. Pulse oximeters primarily rely on the absorption of light by hemoglobin, not by bilirubin, so hyperbilirubinemia does not typically cause inaccurate readings. C. Fetal Hb Fetal hemoglobin (HbF) has different light absorption properties compared to adult hemoglobin (HbA), but pulse oximeters are designed to measure oxygen saturation for both types of hemoglobin. While there may be slight differences in the readings, pulse oximetry can still accurately detect oxygen saturation even in the presence of fetal hemoglobin. The technology has adapted to account for these differences, and it is not a significant source of error. D. Skin pigmentation Skin pigmentation does not have a major impact on pulse oximeter readings. While darker skin tones may slightly alter the absorption of light, most modern pulse oximeters are calibrated to account for this variable. The effect of skin pigmentation on pulse oximetry accuracy is minimal, and it is generally not a significant factor in causing inaccurate readings.",
    "correct_choice_id": 200033,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59667721698562127/59667721698562127.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/59667721698562127/59667721698562127.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50009,
    "choices": [
      {
        "id": 200036,
        "text": "Magnetic Resonance Spectroscopy"
      },
      {
        "id": 200037,
        "text": "Radio labeled lactate determination"
      },
      {
        "id": 200038,
        "text": "Direct measurement of end diastolic pressure"
      },
      {
        "id": 200039,
        "text": "Regional wall motion abnormality detected with the help of 2D transoeso-phageal echocardiography"
      }
    ],
    "text": "The most sensitive and practical technique for detection of myocardial ischemia in the perioperative period is\u2013",
    "unique_key": "Q4489266",
    "question_audio": null,
    "question_video": null,
    "map_id": 34127311,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Regional wall motion abnormality detected with the help of 2D transoesophageal echocardiography The most sensitive and practical technique for detecting myocardial ischemia in the perioperative period is 2D transesophageal echocardiography (TEE), which is commonly used to assess regional wall motion abnormalities. In the presence of myocardial ischemia, the affected areas of the heart exhibit reduced or abnormal contraction, which can be detected by TEE. This technique is valuable because it allows for real-time, continuous assessment of heart function during surgery, providing high sensitivity for detecting ischemia or changes in myocardial contractility. TEE is widely used in the perioperative period due to its ability to quickly and effectively identify ischemic regions of the heart, making it an essential tool in monitoring cardiac function. Incorrect Answers: A. Magnetic Resonance Spectroscopy Magnetic Resonance Spectroscopy (MRS) is a specialized technique used for detecting changes in metabolic processes within tissues, including the myocardium. However, it is not practical for routine perioperative monitoring due to its complexity, expense, and the need for a specialized MRI unit. It is not commonly used in the perioperative setting for detecting myocardial ischemia, as it is not as widely available or as fast as echocardiography for real-time detection of ischemic changes. B. Radio labeled lactate determination Radio-labeled lactate determination is an advanced diagnostic technique that involves measuring lactate production, which can increase during ischemia due to anaerobic metabolism. However, this method is not commonly used in the perioperative setting due to its complexity, need for specialized equipment, and lack of immediate feedback compared to more accessible methods like echocardiography. It is also less sensitive in detecting ischemia compared to direct visualization of the myocardium and regional wall motion abnormalities. C. Direct measurement of end diastolic pressure Direct measurement of end-diastolic pressure (EDP) can be an important diagnostic parameter for assessing ventricular function and volume status. While elevated EDP can be indicative of left ventricular dysfunction or ischemia, it is not the most sensitive or specific technique for detecting myocardial ischemia. EDP is an indirect measure, and its interpretation can be affected by various other factors such as preload, afterload, and left ventricular compliance. It is also invasive and less practical compared to non-invasive methods like echocardiography.",
    "correct_choice_id": 200039,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36957191698562141/36957191698562141.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36957191698562141/36957191698562141.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50010,
    "choices": [
      {
        "id": 200040,
        "text": "Cry"
      },
      {
        "id": 200041,
        "text": "Touch"
      },
      {
        "id": 200042,
        "text": "Torso"
      },
      {
        "id": 200043,
        "text": "Oxygen saturation"
      }
    ],
    "text": "The children hospital eastern ontario pain scale (cheops) for rating post operative pain in children includes all except-",
    "unique_key": "Q6413757",
    "question_audio": null,
    "question_video": null,
    "map_id": 34405027,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Oxygen saturation The Children\u2019s Hospital Eastern Ontario Pain Scale (CHEOPS) is a pain assessment tool designed for young children, particularly those who are unable to communicate their pain verbally. The scale evaluates several behavioral and physiological parameters to determine the level of pain a child is experiencing after surgery. However, oxygen saturation is not included as a direct measure in the CHEOPS scale. This is because oxygen saturation is not a specific or reliable indicator of pain. While hypoxia may occur in some pain or distress situations, it is influenced by multiple factors, such as respiratory function, anesthesia, or underlying medical conditions, rather than just pain. Incorrect Answers: A. Cry Cry is an important component of the CHEOPS scale and reflects the child's distress or discomfort. A child in pain may cry as part of their response to the discomfort they are experiencing. Crying is one of the observable behaviors that healthcare providers look for when assessing pain in young children. Therefore, it is included in the CHEOPS scale. B. Touch Touch is also included in the CHEOPS scale. This assesses the child's response to physical contact or palpation, which can provide valuable insight into how much pain or discomfort the child is feeling. The child\u2019s reaction to touch or gentle palpation can help in rating the level of pain they are experiencing post-operatively. C. Torso The torso is another component included in the CHEOPS scale, which assesses the child\u2019s body posture or any protective movements they may make in response to pain. Children often show guarding behaviors or alter their posture to protect the painful area. These physical signs are taken into account in the CHEOPS scale to evaluate the level of pain.",
    "correct_choice_id": 200043,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64618521698562157/64618521698562157.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64618521698562157/64618521698562157.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50011,
    "choices": [
      {
        "id": 200044,
        "text": "Thyroid storm"
      },
      {
        "id": 200045,
        "text": "Bleeding"
      },
      {
        "id": 200046,
        "text": "Hypoxia"
      },
      {
        "id": 200047,
        "text": "Air embolism"
      }
    ],
    "text": "55 year old female a known case of thryotoxicosis in control posted for abdomino perineal resection during surgery there was sudden drop in B.P., and end tidal CO2 decreased from 40 to 10 mm Hg. On auscultation there was a mill wheel murmur, what is the diagnosis-",
    "unique_key": "Q9669305",
    "question_audio": null,
    "question_video": null,
    "map_id": 34430475,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Air embolism The scenario described suggests air embolism as the most likely diagnosis. The mill wheel murmur is a classic sign of air embolism, which occurs when air is introduced into the venous circulation. This is a potentially life-threatening situation, often seen during surgeries where there is a potential for air to enter the bloodstream, such as during procedures in the head, neck, or chest, or in the case of a venous access injury. The sudden drop in blood pressure and end-tidal CO2 (ETCO2) decrease are also indicative of air embolism, as the air bubbles can obstruct blood flow, leading to a reduction in cardiac output, decreased perfusion, and diminished gas exchange, reflected by a drop in ETCO2. The diagnosis of air embolism is confirmed by the presence of the mill wheel murmur heard on auscultation, which is caused by the turbulent flow of blood mixed with air in the vessels. Incorrect Answers: A. Thyroid storm Although the patient is a known case of thyrotoxicosis, thyroid storm is unlikely in this scenario. Thyroid storm presents with symptoms such as hyperthermia, tachycardia, agitation, and altered mental status, but it would not typically cause a sudden drop in blood pressure and ETCO2. The presence of a mill wheel murmur and the sudden onset of hemodynamic instability strongly suggest a different diagnosis, such as air embolism, rather than thyroid storm. B. Bleeding While bleeding can cause hypotension and a decrease in ETCO2, it is less likely to produce a mill wheel murmur, which is a distinctive finding in air embolism. Additionally, bleeding would typically result in a more gradual decline in blood pressure and would be associated with external or internal blood loss, rather than the immediate hemodynamic changes described in this case. The combination of symptoms points more toward air embolism than bleeding. C. Hypoxia Hypoxia could cause a decrease in ETCO2, but it would not be associated with the mill wheel murmur, which is a hallmark sign of air embolism. Hypoxia would generally manifest as low oxygen saturation and respiratory distress, but it is not as directly related to the specific clinical signs and sudden changes seen in this patient. The drop in ETCO2 and the murmur are more specific to air embolism.",
    "correct_choice_id": 200047,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23399351698562217/23399351698562217.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23399351698562217/23399351698562217.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50012,
    "choices": [
      {
        "id": 200048,
        "text": "Endotracheal tube blockage"
      },
      {
        "id": 200049,
        "text": "Bronchospasm"
      },
      {
        "id": 200050,
        "text": "Esophageal intubation"
      },
      {
        "id": 200051,
        "text": "Endobronchial intubation"
      }
    ],
    "text": "A 27-year old female was brought to emergency department for acute abdominal pain following which she was shifted to the operation theatre for laparotomy. A speedy intubation was performed but after the intubation, breath sounds were observed to be decreased on the left side and a high end tidal CO2 was recorded. The likely diagnosis is \u2013",
    "unique_key": "Q4306621",
    "question_audio": null,
    "question_video": null,
    "map_id": 34049961,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Endobronchial intubation The likely diagnosis in this case is endobronchial intubation. This occurs when the endotracheal tube (ETT) is accidentally inserted too far into one of the mainstem bronchi instead of being placed centrally in the trachea. As a result, the ventilation is only provided to one lung, typically the right lung, leading to decreased breath sounds on the left side. Additionally, the high end-tidal CO2 (ETCO2) suggests that ventilation is still occurring in one lung, as CO2 is being exhaled from the ventilated lung, despite inadequate oxygenation or ventilation of the other lung. This is a common complication following rapid or difficult intubation, especially if the tube is advanced too far during insertion. Incorrect Answers: A. Endotracheal tube blockage Endotracheal tube blockage is a possibility in cases where breath sounds are decreased or absent. However, in this case, there is still a high ETCO2 reading, suggesting that ventilation is taking place, though it is occurring in only one lung. A blocked tube would likely prevent ventilation altogether, leading to absent ETCO2 or very low values. This is not consistent with the findings in this case. B. Bronchospasm Bronchospasm typically results in wheezing and difficulty in ventilation, leading to increased resistance in the airways. However, it is not associated with decreased breath sounds on one side or a high ETCO2. In bronchospasm, both lungs are affected, and while ventilation may be compromised, the issue would not be localized to one lung as seen here. C. Esophageal intubation Esophageal intubation occurs when the endotracheal tube is inserted into the esophagus instead of the trachea, leading to a complete failure to ventilate the lungs. In this case, no breath sounds would be heard, and ETCO2 would likely be absent or very low due to inadequate ventilation. The presence of high ETCO2 and decreased breath sounds on the left makes esophageal intubation unlikely in this scenario.",
    "correct_choice_id": 200051,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35596641698562235/35596641698562235.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/35596641698562235/35596641698562235.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50013,
    "choices": [
      {
        "id": 200052,
        "text": "Asking surgeon to flush wound with saline"
      },
      {
        "id": 200053,
        "text": "Aspirating central venous catheter"
      },
      {
        "id": 200054,
        "text": "Compressing neck veins"
      },
      {
        "id": 200055,
        "text": "Instituting Valsalva maneuver"
      }
    ],
    "text": "A patient is anaesthetized for posterior fossa craniotomy in sitting position The precordial Doppler monitors sound harshly and ETCO2 falls. The mean arterial pressure falls from 90 mmHg to 60 mmHg and central pressure rises from 5 to 20 mmHg. Immediate management includes all the following except",
    "unique_key": "Q5128265",
    "question_audio": null,
    "question_video": null,
    "map_id": 34294065,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Instituting Valsalva maneuver In this scenario, the patient is exhibiting signs of air embolism during posterior fossa craniotomy in the sitting position. Air embolism can occur during surgeries where the surgical site is above the level of the heart, and the patient is in the sitting position, creating a risk for air entering the venous system. The classic signs include a harsh precordial Doppler sound, fall in ETCO2, and a drop in mean arterial pressure (MAP), along with a rise in central venous pressure (CVP). Immediate management typically involves measures to increase venous return and reduce the amount of air that can be entrained. The Valsalva maneuver (increasing intrathoracic pressure by forcible exhalation against a closed airway) is not recommended in the immediate management of air embolism. While it can be used to increase central venous pressure in some situations, it is not an appropriate response to air embolism as it may worsen the condition by potentially pushing more air into the bloodstream or compromising cardiac function further. Instead, the focus should be on rapidly reducing the volume of air in the venous system. Incorrect Answers: A. Asking surgeon to flush wound with saline Flushing the surgical wound with saline is an appropriate step to help reduce the air entry into the venous system, particularly in surgeries where venous air embolism is a risk. It helps to dilute any air that might have been introduced into the wound and can mitigate the volume of air entering the bloodstream. B. Aspirating central venous catheter If an air embolism is suspected, aspirating through the central venous catheter is an important intervention to try and remove any trapped air from the venous circulation. This is particularly effective if the air is confined to the venous system and has not yet been circulated to the heart or lungs. C. Compressing neck veins Compression of the neck veins is another measure to increase central venous pressure and help prevent more air from entering the venous system. This technique can also promote blood flow back to the heart, decreasing the chance of air embolism affecting the circulation, and it can potentially help in trapping air in the venous system, preventing it from reaching the heart or lungs.",
    "correct_choice_id": 200055,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14309791698562248/14309791698562248.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14309791698562248/14309791698562248.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50014,
    "choices": [
      {
        "id": 200056,
        "text": "Rebreathing"
      },
      {
        "id": 200057,
        "text": "Malignant hyperthermia"
      },
      {
        "id": 200058,
        "text": "Sepsis"
      },
      {
        "id": 200059,
        "text": "Shock"
      }
    ],
    "text": "Causes of increased ETCO2 include all except",
    "unique_key": "Q9061599",
    "question_audio": null,
    "question_video": null,
    "map_id": 34919664,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) Shock In the context of increased ETCO2 (end-tidal CO2), shock is not typically a cause. In shock, there is often poor perfusion to the tissues, leading to reduced metabolic activity and consequently a decrease in CO2 production. This can result in lower ETCO2 values, particularly in hypovolemic shock or septic shock, where inadequate circulation to tissues reduces the amount of CO2 being produced. Therefore, shock is unlikely to cause an increase in ETCO2. Incorrect Answers: A. Rebreathing Rebreathing is a common cause of increased ETCO2. This occurs when the patient inhales exhaled CO2 that should have been eliminated from the system. Factors like a faulty CO2 absorber in the anesthesia circuit or improperly functioning unidirectional valves can result in CO2 being rebreathed, leading to elevated ETCO2 levels. B. Malignant hyperthermia Malignant hyperthermia (MH) is a life-threatening reaction to certain anesthetic agents (such as halothane or succinylcholine) that leads to uncontrolled muscle contraction, hypermetabolism, and excessive production of CO2. As a result, ETCO2 levels will significantly rise due to the increased metabolic rate and hyperthermia associated with MH, making it a cause of increased ETCO2. C. Sepsis Sepsis can cause an increase in ETCO2. In sepsis, there is often increased metabolic demand and increased tissue production of CO2 due to the inflammatory response. As the body fights infection, vasodilation and increased cardiac output may also enhance CO2 delivery to the lungs, which in turn leads to higher ETCO2 values.",
    "correct_choice_id": 200059,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7855781698562261/7855781698562261.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7855781698562261/7855781698562261.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50015,
    "choices": [
      {
        "id": 200060,
        "text": "Disconnection of circuit"
      },
      {
        "id": 200061,
        "text": "Bronchospasm"
      },
      {
        "id": 200062,
        "text": "Spontaneous respiration"
      },
      {
        "id": 200063,
        "text": "Oesophageal intubation"
      }
    ],
    "text": "What does the following shows during ETCO2 monitoring<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Qid%203673.jpg\" alt=\"Question Image\"></p>",
    "unique_key": "Q5644642",
    "question_audio": null,
    "question_video": null,
    "map_id": 34080841,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Spontaneous respiration The pattern shown during ETCO2 monitoring in this context is likely to represent spontaneous respiration. When a patient is breathing spontaneously, the ETCO2 waveform typically shows a regular, rhythmic pattern with a characteristic upward and downward cycle, corresponding to the inhalation and exhalation phases of the respiratory cycle. This is seen as a smooth, consistent curve with a normal ETCO2 value, as CO2 is being exhaled effectively during each breath. Incorrect Answers: A. Disconnection of circuit A disconnection of the circuit during ETCO2 monitoring would show an absence of ETCO2 or a flatline on the waveform, indicating that no gas is being delivered or exhaled into the monitoring system. This would be marked by a sharp drop in ETCO2 readings and a loss of the normal waveform pattern. B. Bronchospasm In bronchospasm, the ETCO2 waveform may show increased resistance to airflow during exhalation, leading to a sawtooth pattern or shallow exhalation phases. This is due to narrowing of the airways, which causes difficulty in exhaling CO2 efficiently, leading to irregularities in the waveform. The pattern in bronchospasm typically is more erratic and not as smooth as the one seen with spontaneous respiration. D. Esophageal intubation With esophageal intubation, no effective ventilation occurs, and ETCO2 levels will be low or absent. The waveform will either show no CO2 detected, resulting in a flatline, or show very low values. This is due to the absence of ventilation of the lungs, as the tube is in the esophagus, not the trachea. This pattern is distinct from the normal ETCO2 curve seen during spontaneous breathing.",
    "correct_choice_id": 200062,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73139121698562273/73139121698562273.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/73139121698562273/73139121698562273.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50016,
    "choices": [
      {
        "id": 200064,
        "text": "Post tetanic fade"
      },
      {
        "id": 200065,
        "text": "Single twitch"
      },
      {
        "id": 200066,
        "text": "Train of four"
      },
      {
        "id": 200067,
        "text": "Double burst stimulation"
      }
    ],
    "text": "The following figure represent<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Qid%203674.jpg\" alt=\"Question Image\"></p>",
    "unique_key": "Q2974840",
    "question_audio": null,
    "question_video": null,
    "map_id": 34743073,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C)",
    "correct_choice_id": 200066,
    "solution_audio": null,
    "solution_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58990001698562285/58990001698562285.m3u8",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58990001698562285/58990001698562285.m3u8",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50017,
    "choices": [
      {
        "id": 200068,
        "text": "Metoclopramide"
      },
      {
        "id": 200069,
        "text": "Ondansetron"
      },
      {
        "id": 200070,
        "text": "Promethazine"
      },
      {
        "id": 200071,
        "text": "Dexamathasone"
      }
    ],
    "text": "A 24-year-old female is shifted to Post Anesthesia Care unit (PACU) following an uncomplicated right tympanoplasty. The patient is complaining of double vision and involuntary upward and lateral deviation of the eyes. The patient was recently complaining of nausea and vomiting, and so was given an IV drug to help with the patient's symptoms. Which of the following drugs can have that side effect on the patient?",
    "unique_key": "Q1791193",
    "question_audio": null,
    "question_video": null,
    "map_id": 34708409,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) \u2022 Oculogyric crisis is an acute dystonic reaction of the ocular muscles characterized by bilateral dystonic elevation of visual gaze lasting from seconds to hours. \u2022 Acute dystonic reactions are extrapyramidal side effects due to alteration of the dopaminergic\u2013cholinergic balance in the nigrostriatum. \u2022 This reaction is most explained as an adverse reaction to drugs such as antiemetics, antipsychotics, antidepressants, antiepileptics, and antimalarials. \u2022 Although the incidence of metoclopramide-induced acute dystonic reactions has been reported as 25% in children, there have been few published cases on oculogyric crisis in general. \u2022 It is important to be able to recognize this ocular side effect because, without a thorough patient history, symptoms can be confused with other diseases such as seizures, paroxysmal tonic upward gaze, and encephalopathy.",
    "correct_choice_id": 200068,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50018,
    "choices": [
      {
        "id": 200072,
        "text": "Phenoxybenzamine"
      },
      {
        "id": 200073,
        "text": "Albuterol"
      },
      {
        "id": 200074,
        "text": "Hydrocortisone"
      },
      {
        "id": 200075,
        "text": "Norepinephrine"
      }
    ],
    "text": "A patient with rheumatoid arthritis undergoes an emergency appendectomy. Postoperatively, the patient's blood pressure is 86/58 mmHg with a respiratory rate of 6 breaths per minute. What could have been given preoperatively to prevent this presentation?",
    "unique_key": "Q4476119",
    "question_audio": null,
    "question_video": null,
    "map_id": 34280966,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) \u2022 A stress dose of glucocorticoid medication is given perioperatively for patients on glucocorticoid therapy. \u2022 The hypothalamic-adrenal-pituitary axis is suppressed due to exogenous steroid intake, such as 30 mg of prednisone daily for rheumatoid arthritis. \u2022 Corticosteroid coverage for surgery in patients taking exogenous corticosteroids depends on the severity of the surgery. \u2022 Minor procedures under local anesthesia require the usual morning steroid dose. \u2022 Moderate severity procedures such as joint replacement require the morning dose and additional hydrocortisone given IV just before the procedure, and hydrocortisone every 8 hours for 24 hours after the procedure. \u2022 Major procedures such as open-heart surgery require the usual morning steroid dose and increased amounts of hydrocortisone given IV just before the procedure, and hydrocortisone every 8 hours for 24 hours after the procedure. \u2022 Steroid taper is required postoperatively in patients undergoing major surgery.",
    "correct_choice_id": 200074,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50019,
    "choices": [
      {
        "id": 200076,
        "text": "Reaction to anesthesia"
      },
      {
        "id": 200077,
        "text": "Neuroleptic malignant syndrome"
      },
      {
        "id": 200078,
        "text": "Thyroid storm"
      },
      {
        "id": 200079,
        "text": "Sepsis"
      }
    ],
    "text": "A 25-year-old female with Graves disease has been treated with methimazole and is now asymptomatic. She has decided to have oculoplastic surgery for the exophthalmos. A preoperative physical exam is normal. Labs show the thyroid stimulating hormone to be low at 0.2 mU/ml and free T4 to be high at 3.2 ng/ml. After surgery, the patient becomes acutely ill. Vital signs show a heart rate at 160 bpm, blood pressure at 95/60 mm Hg, temperature at 39.6\u00b0C, and respiratory rate at 32 breaths per minute. On exam, the patient is alert but confused. She is tremulous, diaphoretic, and flushed. The mucosa is dry, lungs show diffuse rales, and a cardiovascular exam shows tachycardia with a flow murmur. What is the most likely diagnosis?",
    "unique_key": "Q3643146",
    "question_audio": null,
    "question_video": null,
    "map_id": 34648669,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) \u2022 The patient has thyroid storm induced by the stress of surgery. \u2022 The preoperative labs suggest either a worsening of the disease or noncompliance. \u2022 Reaction to anesthesia and neuroleptic malignant syndrome can produce hyperthermia but do not produce these cardiopulmonary changes. \u2022 Fever, tachyarrhythmias, altered mental status, and high-output cardiac failure are found in thyroid storm.",
    "correct_choice_id": 200078,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50020,
    "choices": [
      {
        "id": 200080,
        "text": "Administer naloxone to reverse the remifentanil"
      },
      {
        "id": 200081,
        "text": "Support respirations with bag valve mask"
      },
      {
        "id": 200082,
        "text": "Perform endotracheal intubation"
      },
      {
        "id": 200083,
        "text": "Increase the fraction of inspired oxygen"
      }
    ],
    "text": "A 65-year-old man is undergoing a closed reduction for hip dislocation. He has a history of COPD requiring supplemental oxygen at baseline. The patient has received remifentanil, and propofol for such short procedure. The patient's end-tidal CO2 rises, and his oxygen saturation begins to dip below 85%. What is the next best step in the management of this patient?",
    "unique_key": "Q1065436",
    "question_audio": null,
    "question_video": null,
    "map_id": 34804637,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Support respirations with bag valve mask \u2022 When performing procedural sedation, it is important to be aware of the patient's underlying medical disease. \u2022 A patient with baseline difficulty with respiratory gas exchange is more likely to need respiratory support during procedural sedation. \u2022 When a hypnotic is used with an opioid, the likelihood of respiratory suppression increases. The performing clinician must be ready to handle these complications. \u2022 Remifentanil being very short in action (half-life 6 mins) doesn\u2019t require reversal with naloxone. \u2022 Although propofol is commonly stated to not have a reversal agent, this is a linguistic misnomer. \u2022 For a patient hypoventilation as a result of propofol administration, the \"reversal agent\" is mechanical support of respiration. \u2022 When end-tidal CO2 is rising, an increase in the fraction of inspired oxygen will not resolve the impaired gas exchange. \u2022 End-tidal CO2 is the most sensitive level measure of alveolar hypoventilation.",
    "correct_choice_id": 200081,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50021,
    "choices": [
      {
        "id": 200084,
        "text": "Rapid administration of desflurane"
      },
      {
        "id": 200085,
        "text": "Malignant Hyperthermia"
      },
      {
        "id": 200086,
        "text": "Insufficient depth of anesthetic"
      },
      {
        "id": 200087,
        "text": "Allergic reaction to perioperative antibiotic administered"
      }
    ],
    "text": "A 75-year-old man American association anaesthesiology class-III (ASA-III) with a history of coronary artery disease, chronic renal disease, and obstructive sleep apnea is taken to the operating room for inguinal hernia repair. He had been seen by a cardiologist and cleared for surgery. General anesthesia via LMA is considered with maintenance using desflurane. Vital signs are normal prior to pre-op, and induction and placement of the LMA are uneventful. Ten minutes later, during surgical prep, the patient's vital signs show HR 115/min, BP 148/96 mmHg, RR 14/min, ETCO2 40 mmhg & SpO2 99%. The end-tidal desflurane value reads 8.5, and the only other medication administered at this point was cefazolin. What is the most likely cause for the patient's clinical condition?",
    "unique_key": "Q5848647",
    "question_audio": null,
    "question_video": null,
    "map_id": 34373376,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) Insufficient depth of anesthetic. Explanation: The patient's tachycardia and hypertension are classic signs of sympathetic nervous system activation, which indicates an inadequate level of anesthesia to suppress the body's response to surgical stimuli or even the anesthetic agent itself. While desflurane at high concentrations can cause direct sympathetic stimulation (which is a specific mechanism), the clinical manifestation observed by the anesthesiologist is that the patient's depth of anesthesia is \"insufficient\" to control these vital sign changes.",
    "correct_choice_id": 200086,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50022,
    "choices": [
      {
        "id": 200088,
        "text": "Increase the ventilation pressures to improve oxygenation"
      },
      {
        "id": 200089,
        "text": "Salbutamol via tracheal tube or intravenously may be beneficial"
      },
      {
        "id": 200090,
        "text": "Intravenous corticosteroids should be administered immediately"
      },
      {
        "id": 200091,
        "text": "The airway device may be changed to a laryngeal mask airway (LMA)"
      }
    ],
    "text": "A 65-year-old male, heavy smoker, with COPD is having micro laryngeal surgery under general anaesthesia. He is intubated and ventilated. During the procedure, his saturation on pulse oximeter start to dip and he develops an expiratory wheeze and it is getting difficult to ventilate. Which of the statements below is the most appropriate in the immediate management of this patient?",
    "unique_key": "Q8435799",
    "question_audio": null,
    "question_video": null,
    "map_id": 34831965,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) \u2022 This patient has developed significant bronchospasm. \u2022 Bronchospasm occurs when smooth muscle in the conducting airways contracts, as a result of irritability (smokers, asthmatics, volatile anaesthetics),or light plane of anaesthesia. \u2022 Where bronchospasm is suspected, high-flow oxygen should be delivered and anaesthesia deepened using a non-irritant volatile (sevoflurane, halothane) or intravenous anaesthetic. \u2022 Use of short acting bronchodilators i.e. beta 2 agonists like salbutamol intra tracheal or intravenous are highly effective. \u2022 Intravenous corticosteroids act more slowly to suppress the underlying inflammatory processes and may be appropriate depending on the cause. \u2022 Ventilation using reduced tidal volumes may be required to protect against barotrauma \u2022 In a patient with high risk of bronchospasm use of a Laryngeal Mask Airway causes less irritation of the airway and so less chances of development of bronchospasm but in this case it\u2019s a microlaryngeal surgery and so LMA can\u2019t be used as an airway.",
    "correct_choice_id": 200089,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50023,
    "choices": [
      {
        "id": 200092,
        "text": "Vagus"
      },
      {
        "id": 200093,
        "text": "Trigeminal"
      },
      {
        "id": 200094,
        "text": "Facial"
      },
      {
        "id": 200095,
        "text": "Spinal dorsal"
      }
    ],
    "text": "A 4-year-old male child is to be taken for correction of congenital squint. His preoperative course had been uneventful, and all labs are normal. General anesthesia was planned for the surgery with a standard induction of propofol and fentanyl with atracurium as muscle relaxant. The patient was given sevoflurane for the maintenance of anesthesia. 10 mins into the surgery the child suddenly developed bradycardia and hypotension. The surgeon was immediately informed, and he released the pressure on extraocular muscles and child was given iv atropine stat and the heart rate came to normal. This was supposed to be a reflex response very typical of this surgery. What is the efferent neuron of the reflex arc?",
    "unique_key": "Q9747297",
    "question_audio": null,
    "question_video": null,
    "map_id": 34543288,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) \u2022 The oculocardiac reflex (OCR), also known as the Aschner reflex or trigeminovagal reflex (TVR), was first described in 1908 as a reduction in heart rate secondary to direct pressure placed on the eyeball. \u2022 It is defined by a decrease in heart rate by greater than 20% following globe pressure or traction of the extraocular muscles. \u2022 The reflex most commonly results in sinus bradycardia. However, it also has a reported association with reduced arterial pressure, arrhythmia, asystole, and even cardiac arrest. \u2022 This reflex has most notably been depicted during ophthalmologic procedures, more specifically during strabismus surgery; however, it also may be activated by facial trauma, regional anesthetic nerve blocks, and during mechanical stimulation \u2022 Paediatric patients are also more susceptible to the detrimental consequences of this reflex secondary to having a greater dependency on heart rate to maintain cardiac output. \u2022 Risk Factors TRIGGERING STIMULI: \u2022 Traction to the extraocular muscles (most common) \u2022 Direct pressure to the globe \u2022 Ocular manipulation \u2022 Ocular pain Anatomy and Physiology \u2022 The OCR arc consists of an afferent and efferent limb. \u2022 The trigeminal nerve, otherwise known as the fifth cranial nerve, serves as the sensory afferent limb. The vagus nerve, also known as cranial nerve ten, comprises the efferent limb of the OCR. \u2022 The pathway is initiated by activation of stretch receptors in the ocular and periorbital tissues. \u2022 The short and long ciliary nerves conduct impulses that carry the sensory message to the ciliary ganglion. From there the impulses are transported by way of the ophthalmic division of the trigeminal nerve to the Gasserian ganglion, followed by the trigeminal nucleus, where the afferent limb will terminate in the central nervous system (CNS). \u2022 This stimulates the efferent limb, causing impulses to exit the brainstem and transmit to the myocardium to synapse as the sinoatrial node and activate the vagal motor response. \u2022 The resultant effects include negative chronotropy, leading to bradycardia. COMPLICATIONS The complications secondary to the OCR are related to the vagal responses and may include the following: \u2022 Sinus bradycardia \u2022 Arrhythmia \u2022 Reduced atrial pressure \u2022 Ventricular tachycardia \u2022 Ventricular fibrillation \u2022 Multifocal premature ventricular contractions \u2022 Ventricular bigeminy \u2022 Asystole \u2022 Cardiac arrest \u2022 Dizziness \u2022 Light-headedness \u2022 Nausea \u2022 Weakness TREATMENT \u2022 Only definitive treatment is the immediate cessation of the triggering stimulus \u2022 Intravenous atropine has been shown to cause vagolysis and increase the heart rate in an event of OCR",
    "correct_choice_id": 200092,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50024,
    "choices": [
      {
        "id": 200096,
        "text": "Decreased risk of bronchospasm"
      },
      {
        "id": 200097,
        "text": "Decreased risk of aspiration"
      },
      {
        "id": 200098,
        "text": "Shortened time to hospital discharge"
      },
      {
        "id": 200099,
        "text": "Shortened time of anesthesia care"
      }
    ],
    "text": "A 34-year-old female is taken up for a laparoscopic removal of gall bladder. The patients past medical history is suggestive of bronchial asthma on regular treatment. Last exacerbation was 4 months back during the onset of winter season. Rest all her lab investigations are normal. The patient is taken for surgery and a cautious general anesthesia is given with ketamine as induction agent and vecuronium as long acting muscle relaxant for the procedure. Adequate depth of anesthesia is maintained throughout the procedure and the course is uneventful. At the end of the procedure, the patient is extubated while still unconscious but has started to breath spontaneously a technique commonly referred to as \u201c deep extubation\u201d. \"Deep extubation,\" i.e. endotracheal extubation from a deep plane of anesthesia, is theoretically thought to confer which of the following benefits?",
    "unique_key": "Q8955505",
    "question_audio": null,
    "question_video": null,
    "map_id": 34093997,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) \u2022 Deep extubation theoretically decreases the risk of bronchospasm caused by the stimulus of the endotracheal tube in a lighter plane of anesthesia and in the awake state. \u2022 The awake extubation group was noted to have an increased incidence of coughing, while the deep extubation group showed a higher incidence of airway obstruction relieved by simple airway manoeuvre. \u2022 Extubation in a deep plane of anesthesia actually increases the risk of aspiration as the airway is no longer protected once extubated. \u2022 Deep extubation has not been shown to decrease either time to hospital discharge or length of time of anesthesia care.",
    "correct_choice_id": 200096,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50025,
    "choices": [
      {
        "id": 200100,
        "text": "Sodium bicarbonate"
      },
      {
        "id": 200101,
        "text": "Cyproheptadine"
      },
      {
        "id": 200102,
        "text": "Dantrolene"
      },
      {
        "id": 200103,
        "text": "Propranolol"
      }
    ],
    "text": "A 44-year-old man with a history of hypertension, diabetes mellitus type 1, and depression presents for elective inguinal hernia repair. The patient is taking lisinopril, metformin, and sertraline. Patient was induced with a standard dose of thiopentone and fentanyl along with atracurium as muscle relaxant. After successful intubation, the patient was maintained on inhalational halothane with mixture of oxygen and nitrous oxide on controlled ventilation. Shortly after that the patient develops tachycardia, muscle rigidity, and hyperthermia. What is the best initial therapy for this patient?",
    "unique_key": "Q2191669",
    "question_audio": null,
    "question_video": null,
    "map_id": 34089874,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) \u2022 The correct answer is dantrolene. It is the primary drug used for the treatment and prevention of malignant hyperthermia. \u2022 Malignant hyperthermia is triggered in susceptible individuals primarily by inhalational anesthetic agents and the muscle relaxant succinylcholine. \u2022 Malignant hyperthermia is not an allergy but an inherited disorder. Treatment involves giving dantrolene and discontinuing the triggering agent. \u2022 In the setting of the recent intubation and clinical presentation, malignant hyperthermia is the most logical culprit. \u2022 It is a life-threatening clinical syndrome of hypermetabolism involving the skeletal muscle. \u2022 It is triggered in susceptible individuals primarily by inhalational anesthetic agents and the muscle relaxant succinylcholine, although other drugs have also been considered as potential triggers. \u2022 A typical presentation involves tachycardia, dysrhythmias, rigidity, rapidly increasing temperature, hyperkalemia, sympathetic hyperactivity, disseminated intravascular coagulopathy (DIC), and multi-organ failure. \u2022 Cyproheptadine is the treatment of serotonin syndrome. \u2022 Propranolol is part of the treatment for thyroid storm. \u2022 Sodium bicarbonate can be used as an adjunct to dantrolene and in the treatment of tricyclic antidepressants.",
    "correct_choice_id": 200102,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50026,
    "choices": [
      {
        "id": 200104,
        "text": "laryngeal web"
      },
      {
        "id": 200105,
        "text": "Congenital heart disease"
      },
      {
        "id": 200106,
        "text": "Upper respiratory tract infection"
      },
      {
        "id": 200107,
        "text": "Spina bifida"
      }
    ],
    "text": "A 7-year-old male is on the operating table for a procedure when he suddenly develops a laryngospasm after extubation. What condition did the patient have that put him at higher risk for this reaction?",
    "unique_key": "Q9763296",
    "question_audio": null,
    "question_video": null,
    "map_id": 34864198,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (C) \u2022 Laryngospasm is the sustained closure of the vocal cords resulting in the partial or complete loss of the patient's airway \u2022 It is a primitive protective airway reflex that exists to protect against aspiration but can occur in light planes of anaesthesia. \u2022 Laryngospasm can rapidly result in hypoxaemia and bradycardia. \u2022 To re-establish oxygenation, a clear management plan is required to avoid significant morbidity and even mortality \u2022 It is normally triggered by a peri-glottic stimulus mediated via the vagus nerve, via the internal branch of the superior laryngeal nerve \u2022 RISK FACTOR PREDISPOSING TO TRIGGERING LARYNGOSPASM Anaesthetic-related factors \u2022 Insufficient depth of anaesthesia \u2022 Induction/maintenance (Especially with a facemask or LMA) \u2022 Emergence (Especially after tracheal extubation) \u2022 Volatile anaesthetics (Desflurane>isoflurane>enflurane>halothane/sevoflurane) \u2022 Halothane and sevoflurane least irritant \u2022 Secretions (Mucous, Blood) \u2022 Manipulation ( Laryngoscopy, suction catheter) \u2022 Airway device (ETT, LMA, ORAL airway) \u2022 I.V. induction agents Thiopental (Lack of suppression of airway reflexes) Patient-related factors \u2022 Age: Inverse correlation with age: young children at greatest risk \u2022 Airway hyper-reactivity (Asthma, URTI) \u2022 Tobacco smoke \u2022 Obesity with obstructive sleep apnoea \u2022 Gastrooesophageal reflux \u2022 Airway anomaly (Subglottic stenosis or cysts, laryngeal pappilomatosis, cleft palate, vocal cord paralysis, laryngomalacia, tracheal stenosis, Pierre Robin syndrome) \u2022 Surgical-related factors \u2022 Shared airway surgery: (Tonsillectomy and adenoidectomy carry greatest risk) \u2022 Thyroid surgery: (Due to superior laryngeal nerve injury, or hypocalcaemia secondary to accidental parathyroid gland excision) \u2022 Oesophageal surgery: Thought to be due to stimulation distal afferent oesophageal nerves \u2022 Others Appendicectomy, cervical dilatation, hypospadias repair, skin grafting \u2022 Common signs of laryngospasm include inspiratory stridor which may progress to complete obstruction, increased respiratory effort, tracheal tug, paradoxical respiratory effort, oxygen desaturation with or without bradycardia, or airway obstruction which does not respond to a Guedel airway Management of laryngospasm \u2022 Removing any triggering stimulation \u2022 Deepen the plane of anesthesia by giving iv propofol ( drug of choice) \u2022 Ensuring a clear larynx, that is, checking for blood or stomach contents \u2022 Relieving any possible supra-glottic component to the airway obstruction \u2022 Application of CPAP with 100% oxygen. \u2022 Last option to give iv\\im scoline and reintubate the patient",
    "correct_choice_id": 200106,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50027,
    "choices": [
      {
        "id": 200108,
        "text": "Activation of GABA B receptors in the spinal cord"
      },
      {
        "id": 200109,
        "text": "Blockade of excitatory neurotransmitter release in the brain"
      },
      {
        "id": 200110,
        "text": "Blockade of Ca++ channels in skeletal muscle membrane"
      },
      {
        "id": 200111,
        "text": "Blockade of Ca++ channels in sarcoplasmic reticulum"
      }
    ],
    "text": "A 49-year-old man diagnosed with inguinal hernia was prepared for surgery. Shortly after the initiation of general anesthesia with halothane and succinylcholine the patient developed muscle rigidity, tachycardia, labile blood pressure, profuse diaphoresis and high fever. The anesthesia was discontinued at once and a drug was administered by rapid IV push. Which of the following was most likely the mechanism of action of the administered drug?",
    "unique_key": "Q9080665",
    "question_audio": null,
    "question_video": null,
    "map_id": 34440434,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) \u2022 The clinical picture of the patient suggests the diagnosis of malignant hyperthermia, a rare but potentially life-threatening disorder that can be triggered by a variety of stimuli, including the administration of certain anesthetics and neuromuscular blocking agents. \u2022 The disorder is related to an hereditary impairment in the ability of sarcoplasmic reticulum to sequester calcium and therefore a prolonged release of calcium occurs after the triggering event. \u2022 This causes massive muscle contraction, hyperthermia and lactic acidosis. \u2022 Dantrolene is a drug of choice in this disorder because it blocks Ca++ channels in sarcoplasmic reticulum of skeletal muscle. \u2022 Cardiac and smooth muscle are minimally affected by dantrolene since they have a different type of Ca++ channel in their sarcoplasmic reticulum.",
    "correct_choice_id": 200111,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50028,
    "choices": [
      {
        "id": 200112,
        "text": "The anesthesiologist immediately changed the endotracheal tube with a larger tube"
      },
      {
        "id": 200113,
        "text": "The anesthesiologist immediately deepened the plane of anesthesia by a bolus dose of propofol"
      },
      {
        "id": 200114,
        "text": "The anesthesiologist changed the ventilator settings to higher tidal volume"
      },
      {
        "id": 200115,
        "text": "The anesthesiologist informed the surgeon to stop the surgery"
      }
    ],
    "text": "A 34-year-old female patient is posted for laparoscopic cholecystectomy under general anesthesia. The patient has a past medical history of asthma on regular treatment with last exacerbation a month back. Rest all investigations are normal. Standard induction is done with propofol and fentanyl with vecuronium as muscle relaxant and cuffed endotracheal tube is inserted and confirmed in position using a capnography trace on the monitor. Shortly after the commencement of the surgery, the ventilator suddenly start showing alarm of increased peak airway pressures and the capnography waveform changes to image A. the anaesthesiologist immediately identifies the problem and intervenes and after 10 mins the capnograph changes to image B. which of the following is true about the intervention by the anesthesiologist?<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Capture(123).JPG\" alt=\"Question Image\"></p>",
    "unique_key": "Q9088541",
    "question_audio": null,
    "question_video": null,
    "map_id": 34013011,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Intraoperative bronchospasm \u2022 Bronchospasm is is a reversible reflex spasm of the smooth muscle in the bronchi. \u2022 Bronchospasm is vagally mediated and caused by histamine, or one of many noxious stimuli, including cold air, inhaled irritants, and instrumentation (eg, tracheal intubation, surgical stimulation in light planes of anesthesia). \u2022 Bronchospasm is mediated by vagal afferents which result in an increase in cyclic guanosine monophosphate (cGMP). \u2022 It is more common in asthmatics. Bronchospasm: Manifestations \u2022 Rapidly increasing peak inspiratory pressure (plateau pressure unchanged) \u2022 Wheezing \u2022 Slowly increasing wave on the capnograph ( shark fin appearance) \u2022 Decreasing exhaled tidal volumes Bronchospasm: Acute Treatment 1) Deepen anesthetic \u2013 increase volatile anesthetic concentration All volatile anesthetic agents are bronchodilators Propofol or ketamine can be used to deepen the plane as well. Ketamine has additional Broncho dilating effect 2) Consider alternative causes of high airway pressures eg. kinked tube, endobronchial intubation, etc. 3) Inhaled ?2 -agonists \u2013 delivered to the inspiratory limb of the circuit through a metered dose inhaler or nebulized. If the severity of bronchospasm prohibits delivery of inhaled beta agonists, consider infusions of IV agonists such as terbutaline or epinephrine. 4) Consider administering intravenous steroids",
    "correct_choice_id": 200113,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50029,
    "choices": [
      {
        "id": 200116,
        "text": "Esophageal intubation"
      },
      {
        "id": 200117,
        "text": "Partial obstruction of the endotracheal tube"
      },
      {
        "id": 200118,
        "text": "Bronchospasm"
      },
      {
        "id": 200119,
        "text": "Successful endotracheal intubation in trachea"
      }
    ],
    "text": "A 24-year-old male is received in the trauma bay with multiple injuries due to a massive road traffic accident. The patient is in a comatose state with GCS 5\\15 and associated with facial trauma. In view of low GCS and facial trauma, it was decided to immediate intubate the patient for the protection of airway against aspiration. Laryngoscopy was performed as RSI and intubation was done on 3rd attempt due to lot of trauma and blood in the upper airway. The most likely cause of this capnography tracing obtained just after laryngoscopy and intubation is<p><img src=\"https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/7(12).jpg\" alt=\"Question Image\"></p>",
    "unique_key": "Q5146261",
    "question_audio": null,
    "question_video": null,
    "map_id": 34125695,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Esophageal intubation \u2022 Esophageal intubation in a case of emergency is very common. \u2022 Esp if the trauma is in the upper airway \u2022 Capnography is the most reliable technique of knowing the position of endotracheal tube. \u2022 Normally there is no capnography trace seen when the tube is in esophagus because of absence of CO2 there. \u2022 But certain situations like presence of stomach CO2, swallowed CO2 during mask ventilation or consumption of an aerated drink can cause capnograph to appear even when the tube is in esophagus. \u2022 This capnograph is typically a dwindling waveform that usually goes to zero because the co2 gets exhausted.",
    "correct_choice_id": 200116,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50030,
    "choices": [
      {
        "id": 200120,
        "text": "Lower Esophageal temperature"
      },
      {
        "id": 200121,
        "text": "Rectal temperature"
      },
      {
        "id": 200122,
        "text": "Tympanic membrane temperature"
      },
      {
        "id": 200123,
        "text": "Pulmonary artery temperature"
      }
    ],
    "text": "A 36 year old male is taken for an orthopic liver transplant surgery. A general anesthesia is being given to the patient with all invasive monitoring used. The surgery goes on for 16 hours with large volume resuscitation with 18 units of PCV and 5 litres of crystalloid and 16 units FFP and Platelets. The anesthesiologist has managed to document everything in a systematic order and just before shifting the patient to ICU he wants to record the temperature of the patient that will best reflect what happened intraoperatively. Which of the following sites will be most appropriate to measure the temperature in this situation?",
    "unique_key": "Q3346739",
    "question_audio": null,
    "question_video": null,
    "map_id": 34918408,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) \u2022 Pulmonary artery temperature is the gold standard site for monitoring the core body temperature. \u2022 This is a case of supra major surgery with long duration and massive blood transfusion. \u2022 There are extremely high chances of intraoperative severe hypothermia and the intensivist should know about this properly \u2022 The most common method of measurement of pulmonary artery temperature is by using a swan ganz catheter.",
    "correct_choice_id": 200123,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50031,
    "choices": [
      {
        "id": 200124,
        "text": "Total spinal block"
      },
      {
        "id": 200125,
        "text": "Inadvertent intravascular injection"
      },
      {
        "id": 200126,
        "text": "Epidural hematoma"
      },
      {
        "id": 200127,
        "text": "Cauda equina syndrome"
      }
    ],
    "text": "A healthy 29-year-old, 0 para female in gestation week 39, was planned for saddle block labor analgesia. The patient was taken to the operating room and prepared for the procedure. Her baseline vitals were recorded; the blood pressure was 130/80 mm Hg, the heart rate was 86/min, and the cardiac monitor showed a sinus rhythm electrocardiogram (ECG). The patient was maintained in an upright sitting position. The anesthesia was induced via a 25 G Quincke cutting needle inserted at L4-5 interspinous space. The subarachnoid space was at a depth of about six cms from the skin surface, and it was confirmed by the presence of clear cerebrospinal fluid (CSF) dripping from the needle. The syringe containing the recommended standard dose of hyperbaric bupivacaine was attached to the spinal needle. The anesthesiologist overlooked the step to re-aspirate CSF into the needle and proceeded with the intrathecal administration of the drug. After completion of the injection, blood-tinged fluid dripped from the back of the spinal needle. Early in labor, the patient suddenly developed hypotension and was immediately administered with a suitable vasopressor. Soon after, the ECG showed an abnormal rhythm. The patient collapsed from the sudden arrhythmia. What is the complication that led to the systemic toxicity of the anesthetic drug?",
    "unique_key": "Q2406823",
    "question_audio": null,
    "question_video": null,
    "map_id": 34309322,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) Inadvertent intravascular injection \u2022 The presence of blood-tinged fluid in the spinal needle confirms the intravascular lodgment of the needle. Failure to aspirate the clear cerebrospinal fluid (CSF) after attaching the syringe to the spinal needle demands to reposition the needle, and it is a crucial step while performing the saddle block anesthesia. \u2022 Bupivacaine is a cardiotoxic drug. The inadvertent intravascular injection can produce very high serum drug levels. \u2022 The high serum levels of bupivacaine affect the cardiovascular system by causing hypotension, depressed cardiac contractility, and arrhythmias. \u2022 The total spinal block causes motor paralysis that presents as upper extremity weakness and respiratory depression which requires emergent endotracheal intubation and mechanical ventilation. \u2022 A traumatic neuraxial block may cause epidural hematoma that causes sharp back and leg pain accompanied by lower extremity motor weakness. \u2022 Cauda equina syndrome is caused by compression or damage to nerve roots and has a presentation similar to epidural hematoma.",
    "correct_choice_id": 200125,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50032,
    "choices": [
      {
        "id": 200128,
        "text": "Before attempting mask ventilation"
      },
      {
        "id": 200129,
        "text": "After failed endotracheal intubation"
      },
      {
        "id": 200130,
        "text": "To pre-oxygenate a patient before induction of anesthesia"
      },
      {
        "id": 200131,
        "text": "After successful endotracheal intubation"
      }
    ],
    "text": "A 65-year-old man with a BMI of 38 and obstructive sleep apnea (on CPAP at night) is scheduled for an elective colon resection. On physical exam, he has a full beard, and the uvula cannot be seen when he opens his mouth. His mouth opening is more than 3 finger breadth. Previous anesthetics some years ago were uneventful. The plan is general anesthesia with endotracheal tube intubation. Any difficult airway algorithm provides a structured response to a difficult airway scenario in order to minimize hypoxia. Where in the algorithms does the laryngeal mask airway (LMA) appear?",
    "unique_key": "Q1213212",
    "question_audio": null,
    "question_video": null,
    "map_id": 34836175,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) After failed endotracheal intubation In any difficult airway algorithm, the laryngeal mask airway (LMA) is introduced after a failed endotracheal intubation attempt and difficulty in maintaining adequate mask ventilation. The LMA is a rescue device used to ensure adequate oxygenation and ventilation in the event of failed intubation or when traditional mask ventilation is insufficient. It is part of the secondary airway management strategies aimed at minimizing the risk of hypoxia in a difficult airway situation. Incorrect Options: A. Before attempting mask ventilation This is incorrect because mask ventilation is typically attempted before placing an LMA. Mask ventilation is a part of primary airway management and is always tried first during the induction of anesthesia. If mask ventilation and intubation fail, the LMA is considered as a rescue device. C. To pre-oxygenate a patient before induction of anesthesia This is incorrect because pre-oxygenation is typically done using a face mask connected to a high-flow oxygen source. An LMA is not used for pre-oxygenation, as it is designed for use after the patient is anesthetized or as a rescue device during airway emergencies. D. After successful endotracheal intubation This is incorrect because once endotracheal intubation is successfully achieved, there is no need for an LMA. The endotracheal tube provides a secure airway, and the LMA is only used as a temporary or rescue measure in cases of failed intubation.",
    "correct_choice_id": 200129,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50033,
    "choices": [
      {
        "id": 200132,
        "text": "Flexible bronchoscopy"
      },
      {
        "id": 200133,
        "text": "Rigid bronchoscopy"
      },
      {
        "id": 200134,
        "text": "Deflating endotracheal tube balloon and adjust the position of the tube"
      },
      {
        "id": 200135,
        "text": "Repeating chest x-ray"
      }
    ],
    "text": "A 50-year-old male is brought to the emergency department (ED) after being involved in a road traffic accident. On arrival, he is intubated immediately for airway protection. His vitals on arrival include a temperature of 99.2 degrees Fahrenheit, a blood pressure of 100/70 mmHg, a pulse of 110 beats per minute, a respiratory rate of 20 breaths per minute, and oxygen saturation of 88% on a ventilator. CT abdomen and pelvis shows grade 4 splenic laceration with fluid in the left paracolic gutter. Laboratory investigations reveal a hemoglobin of 9 g/dl, a white cell count of 12000/mm3, a platelet count of 250000/mm3, sodium 148 meq/dl, potassium 4 meq/dl, chloride 107 meq/dl, bicarbonate 24 meq/dl, creatinine 1 mg/dl, and blood urea nitrogen of 20 mg/dl. In the ED, he receives 2 liters fluid and is taken to the operating room. Open laparotomy is started under general anesthesia. After 15 minutes into the laparotomy, patient oxygen saturation drops to 70%. The patient position is double-checked to confirm that endotracheal tube is not kinked. What is the next best step?",
    "unique_key": "Q2596276",
    "question_audio": null,
    "question_video": null,
    "map_id": 34614195,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Flexible bronchoscopy \u2022 Flexible bronchoscopy is done to rule out any accidental intubation of aberrant bronchus. \u2022 Flexible bronchoscopy allows providers to see the relation of the endotracheal tube cuff to the abnormal bronchus. \u2022 After the appropriate adjustments are made, flexible bronchoscopy is repeated to confirm the appropriate positions of the tube. \u2022 Bilateral breath sounds should be audible on both sides to ensure appropriate ventilation.",
    "correct_choice_id": 200132,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50034,
    "choices": [
      {
        "id": 200136,
        "text": "Carbon dioxide Absorber"
      },
      {
        "id": 200137,
        "text": "Faulty vaporizer"
      },
      {
        "id": 200138,
        "text": "Incompetent expiratory valve"
      },
      {
        "id": 200139,
        "text": "Occluded scavenging system"
      }
    ],
    "text": "An anesthesia provider is preparing to emerge and extubate a patient after an uncomplicated, successful surgery. The patient has a regular and spontaneous ventilatory pattern and had neuromuscular blockade fully reversed. Maintenance of anesthesia was achieved with 1.0 MAC sevoflurane, which has since been turned off and replaced with high-flow oxygen. Despite this, the patient fails to emerge from anesthesia. The monitors display the following information: Heart rate 70/min, blood pressure 110/60 mmHg, respirations 12/min, temperature 98.0F, SpO2 99%. Inspiratory sevoflurane 0.4%, expiratory sevoflurane 0.5%, inspiratory CO2 0 mmHg, expiratory CO2 40 mmHg. Which of the following breathing circuit components is most likely responsible for the patient\u2019s prolonged emergence?",
    "unique_key": "Q5105894",
    "question_audio": null,
    "question_video": null,
    "map_id": 34313073,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (A) Carbon dioxide Absorber \u2022 Granules of certain absorbent material have been known to absorb both CO2 and volatile anesthetics. \u2022 Absorption of the latter can lead to the accumulation of clinically significant levels of anesthetic agent which is later released, despite fresh gas flows being optimized for emergence. \u2022 The elevated inspiratory concentration of sevoflurane in the setting of high-flow oxygen is suggestive of this. \u2022 The case was completed successfully with inhaled anesthetic, and the monitor displays lower concentrations of sevoflurane than were previously administered. This suggests that the device is functioning properly. \u2022 While incompetent expiratory valves could be a source of rebreathable gas, the inspiratory CO2 is not elevated in this case. Exhaled air consists of oxygen, carbon dioxide, and any residual volatile anesthetic. \u2022 The vaporizer was shut off after maintenance of 1.0 MAC of sevoflurane, and the patient is noted to be inspiring 0.4%. \u2022 With functioning inspiratory and expiratory valves, the most likely source of sevoflurane would be the CO2 absorbent.",
    "correct_choice_id": 200136,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50035,
    "choices": [
      {
        "id": 200140,
        "text": "Keeping the patient dehydrated"
      },
      {
        "id": 200141,
        "text": "Keeping the central venous pressure on higher side"
      },
      {
        "id": 200142,
        "text": "Use of nitrous oxide during induction and maintenance of anesthesia"
      },
      {
        "id": 200143,
        "text": "Maintaining a hypotensive state during the surgery."
      }
    ],
    "text": "A 65-year-old female with a past medical history of hypertension, diabetes, is admitted to the hospital for an elective aneurysm clipping of posterior cerebral artery. After anesthesia induction and intubation, sitting position is being given to the patient. 30 mins into the surgery the patient suddenly becomes hypotensive, tachycardic, and hypoxic despite 100% oxygen administration. Which of the following would have prevented the current complication?",
    "unique_key": "Q3663754",
    "question_audio": null,
    "question_video": null,
    "map_id": 34306708,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (B) \u2022 This is a case of Venous Air Embolism (VAE) due to sitting position surgery for clipping of posterior cerebral artery aneurysm. \u2022 Risk factors for VAE is presence of an open vein and a sub atmospheric pressure in the vein. \u2022 In order to prevent the development of VAE it is imperative to keep the patient well hydrated and to maintain a high normal central venous pressure so that the veins are full. \u2022 Use of nitrous oxide doesn\u2019t prevent VAE, in fact in an event of VAE nitrous oxide can cause expansion of the volume of gas entrapped thereby increasing the severity of complications. \u2022 Both dehydration and hypotension will increase the risk of VAE by increased trapping of air from an open vein.",
    "correct_choice_id": 200141,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "id": 50036,
    "choices": [
      {
        "id": 200144,
        "text": "Atropine sulfate 1 mg IV"
      },
      {
        "id": 200145,
        "text": "Flumazenil 0.2 mg IV"
      },
      {
        "id": 200146,
        "text": "Meperidine 50 mg IV"
      },
      {
        "id": 200147,
        "text": "Naloxone 0.2 mg IV"
      }
    ],
    "text": "A patient recovering from a cholecystectomy received morphine in the post anesthesia care unit. The patient returns to the surgical unit, with vital signs of blood pressure 124/64 mmHg, pulse 64 beats/min, respirations 8 per minute, and temperature 97.4 F. Which of the following medications should be given?",
    "unique_key": "Q1479613",
    "question_audio": null,
    "question_video": null,
    "map_id": 34176912,
    "difficulty_level": "intermediate",
    "subjects_id": [],
    "solution": "Correct Answer (D) \u2022 Naloxone is an opioid antagonist administered to treat opioid overdose. \u2022 A respiratory rate less than 12 breaths/min is a sign of respiratory depression, most likely due to the morphine administered in the post anesthesia area. Atropine may be used to treat bradycardia but not respiratory depression. \u2022 Flumazenil is a benzodiazepine antagonist and may be used to treat overdoses of medications like diazepam. \u2022 Meperidine should not be given. It is an opioid analgesic and would further depress respirations.",
    "correct_choice_id": 200147,
    "solution_audio": null,
    "solution_video": "",
    "audio_explanation_heading": null,
    "video_explanation_heading": null,
    "solution_media_position": "bottom",
    "tags": [],
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '09  Monitoring In Anaesthesia';
        const quizFilename = '09-monitoring-in-anaesthesia-4f5da521.html';
        let hierarchy = ["DAMS", "DQB", "Anesthesia"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on navigation
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>