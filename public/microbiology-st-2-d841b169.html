<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microbiology St 2 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A surgeon takes the following 2 images of a patient's arm 6 weeks apart. Which of the following mediators promote the process shown below?",
    "choices": [
      {
        "id": 1,
        "text": "TGF-\u03b2"
      },
      {
        "id": 2,
        "text": "IFN-\u03b1"
      },
      {
        "id": 3,
        "text": "TNF-\u03b1"
      },
      {
        "id": 4,
        "text": "IFN-\u03b2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows <strong>wound healing.</strong>\u00a0<strong>TGF-\u03b2</strong> (transforming growth factor-\u03b2) is responsible for\u00a0wound healing.</p>\n<p><strong>TGF-\u03b2</strong>\u00a0is produced by B and T cells and it <strong>inhibits</strong> their\u00a0<strong>proliferation.</strong> It acts as a growth factor for fibroblasts and promotes wound healing. It stimulates the production of collagen, fibronectin and proteoglycans. It also promotes class switching of B cells to IgA. <strong>IL-10</strong> is also involved in wound <strong>healing</strong> and suppression of inflammation.\u00a0</p>\n<p>Option B: <strong>IFN-\u03b1</strong> inhibits viral replication, activates NK cells, and regulates the activity of macrophages and T cells.</p>\n<p>Option C: <strong>TNF-\u03b1\u00a0</strong>is involved in tumour cytotoxicity, phagocytic cell activation, and antiviral and antiparasitic effects. It is an acute phase protein.\u00a0</p>\n<p>Option D: <strong>IFN-\u03b2\u00a0</strong>has antiviral activity.\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3d5fd692e4944498ad1d692738dce518.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What type of motility is shown by Treponema pallidum?",
    "choices": [
      {
        "id": 1,
        "text": "Tumbling motility"
      },
      {
        "id": 2,
        "text": "Gliding motility"
      },
      {
        "id": 3,
        "text": "Corkscrew motility"
      },
      {
        "id": 4,
        "text": "Darting motility"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><em>Treponema pallidum</em> show <strong>corkscrew motility,</strong> i.e&nbsp;movement by<strong>&nbsp;</strong>rotation around the long axis.</p>\n<p>The characteristic feature of spirochetes is the presence of <strong>endoflagella,&nbsp;</strong>situated between the outer membrane and cell wall, that facilitates this movement.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/af687ec2285a43308117c21c33f10adax510x456.GIF"
    ]
  },
  {
    "text": "The egg shown below belongs to:",
    "choices": [
      {
        "id": 1,
        "text": "Hookworm"
      },
      {
        "id": 2,
        "text": "Whipworm"
      },
      {
        "id": 3,
        "text": "Pinworm"
      },
      {
        "id": 4,
        "text": "Roundworm"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given egg belongs to&nbsp;<strong>whipworm</strong>&nbsp;or <em><strong>Trichuris trichiura</strong>.</em></p>\n<p>The characteristic features of whipworm eggs are:</p>\n<ul>\n<li>Eggs are <strong>barrel-shaped</strong> in the middle with a <strong>projecting mucus plug</strong> at each pole containing an unsegmented ovum. The plugs are colorless.</li>\n<li>They <strong>float in the saturated salt solution.</strong></li>\n<li>It has a<strong> triple shell,</strong> the outermost layer of which is stained brown.</li>\n</ul>\n<p>Whipworms&nbsp;<strong>live in the large intestine</strong> and&nbsp;whipworm eggs&nbsp;are passed in the feces of&nbsp;infected&nbsp;persons. The eggs develop in the soil in 3-4 weeks and become infective to man. When these <strong>embryonated eggs</strong> containing infective larvae <strong>contaminate food or water</strong>, they can cause infections in humans.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f220fdcf2d2b4f2ab6047b123d800ce4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true regarding the reticulate body of Chlamydia?",
    "choices": [
      {
        "id": 1,
        "text": "Extracellular"
      },
      {
        "id": 2,
        "text": "Infectious form"
      },
      {
        "id": 3,
        "text": "Growing and replicative form."
      },
      {
        "id": 4,
        "text": "Does not exhibit pleomorphism."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>reticulate body</strong> of <strong>chlamydia</strong> is a <strong>growing</strong> and <strong>replicative form.</strong></p>\n<p>Chlamydia is a&nbsp;<strong>gram-negative coccobacillus</strong>&nbsp;that has the following features-</p>\n<ul>\n<li>They are&nbsp;<strong>obligate intracellular organisms</strong>&nbsp;as they lack the enzymes for ATP synthesis, and are hence dependent entirely on the host cell.&nbsp;</li>\n<li>They can exist in two states.\n<ul>\n<li>The <strong>extracellular infective</strong> form is called the <strong>elementary body</strong>.</li>\n<li>The <strong>intracellular non-infective</strong> form is called the <strong>reticulate body</strong>. These reticulate bodies are found inside a membrane-bound compartment called the \"<strong>inclusion body</strong>\" which can be visualized within infected epithelial cells by iodine or Giemsa stain. The cell of the reticulate body is fragile and pliable, leading to pleomorphism.</li>\n</ul>\n</li>\n<li>They are small bacteria about 0.2-0.3 microns in size and are hence&nbsp;<strong>filtrable</strong>&nbsp;through the pore size of standard bacterial filters.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/160002a9761942b79f56351454454fdbx1280x1864.JPEG"
    ]
  },
  {
    "text": "A 35-year-old patient with AIDS presents to the local clinic complaining of fever, nausea, vomiting and confusion. A lumbar puncture is performed and the microscopic appearance of India ink-stained CSF specimen is given below. Which of the following drugs is most beneficial in the treatment of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Ketoconazole and amphotericin B"
      },
      {
        "id": 2,
        "text": "Flucytosine and amphotericin B"
      },
      {
        "id": 3,
        "text": "Nystatin and ketoconazole"
      },
      {
        "id": 4,
        "text": "Nystatin and miconazole"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical picture and the India ink preparation demonstrating clear halos is suggestive of <strong>cryptococcal meningitis</strong> caused by <strong><em>Cryptococcus neoformans</em>.</strong>&nbsp;<strong>Flucytosine and amphotericin B</strong> are used in the treatment of this condition.</p>\n<p><span data-preserver-spaces=\"true\"><em><strong>C. neoformans</strong></em></span><span data-preserver-spaces=\"true\">&nbsp;spreads from</span>&nbsp;<strong>inhalation of the yeast cells&nbsp;</strong>in<strong>&nbsp;</strong>pigeon feces, causing infection in HIV/AIDS and other immunosuppressive conditions. It causes&nbsp;influenza-like respiratory infection in immunocompetent persons. In<strong>&nbsp;</strong>immunocompromised individuals, it&nbsp;disseminates&nbsp;to&nbsp;<strong>CNS,</strong>&nbsp;causing&nbsp;<strong>cryptococcal meningoencephalitis,&nbsp;</strong>and patients may complain of headaches, neck stiffness, and disorientation, as in this case. Other&nbsp;common sites of dissemination include the skin, adrenals,&nbsp;bone, eye, and prostate gland.</p>\n<p>Diagnosis is made by demonstration of yeast cells or cryptococcal antigen in CSF. India ink stain is used to demonstrate&nbsp;<strong>capsulated budding yeast cells</strong>&nbsp;in CSF as they have a distinctive appearance because their capsules exclude ink particles. Rapid detection of cryptococcal antigen in CSF and blood can also be done.&nbsp;Colonies develop within a few days on most media at room temperature or 37&deg;C. Media with cycloheximide should be avoided as it inhibits&nbsp;<em>Cryptococcus</em>.</p>\n<p>Combination therapy of&nbsp;<strong>amphotericin B and flucytosine</strong>&nbsp;has been considered the standard treatment for cryptococcal meningitis.</p>\n<p>Other options:&nbsp;</p>\n<p><strong>Ketoconazole</strong> is usually used for chronic mucocutaneous candidiasis.</p>\n<p><strong>Nystatin</strong> is also used for mucocutaneous forms of candidiasis.</p>\n<p><strong>Miconazole</strong> is used for topical fungal infections like oral thrush, and vaginitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b73f37568c07477ba58a122f97fa3ab4.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young man comes with complaints of intermittent bloody diarrhea for 3 weeks after consuming street food during his travel. He is febrile and has RUQ tenderness. Which of the following is the infective form of the likely protozoan causing this disease?",
    "choices": [
      {
        "id": 1,
        "text": "Trophozoite"
      },
      {
        "id": 2,
        "text": "Mature quadrinucleate cyst"
      },
      {
        "id": 3,
        "text": "Metacyclic trophozoite"
      },
      {
        "id": 4,
        "text": "Precyst"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This patient has had <strong>bloody diarrhea</strong> for 3 weeks after eating street food, making a parasite the likely cause of his dysentery. His diarrhea combined with RUQ tenderness indicating a hepatic abscess makes <strong>Entamoeba histolytica</strong> the causative organism in this case.\u00a0 The<strong> mature quadrinucleate</strong> <strong>cyst</strong> is the infective form of <em><strong>Entamoeba histolytica</strong></em> causing amoebic dysentery. It is\u00a0passed in feces and can remain viable under moist conditions for about 10 days.</p>\n<p>The following are the characteristic features of various life stages of <em>Entamoeba histolytica:</em></p>\n<p><strong>The trophozoite\u00a0</strong>is found only in tissues. Its cytoplasm has a ground-glass appearance. The nucleus has a central karyosome with radiating fibrils called linin network giving a cartwheel appearance. Pseudopodia are present which exhibit gliding motility.</p>\n<p>The image below shows the trophozoite form.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5ced12db370841ac95d819352aca8af8x450x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e0888fdc00b54702bc09e79a174d5dc9x700x474.JPEG"
    ]
  },
  {
    "text": "A patient presents with fever, arthralgia, and pain behind the eyes for 3 days. On examination, she has the following rash. Lab reports show thrombocytopenia and leucopenia. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Dengue fever"
      },
      {
        "id": 2,
        "text": "Malaria"
      },
      {
        "id": 3,
        "text": "Typhoid"
      },
      {
        "id": 4,
        "text": "Yellow fever"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario with the symptoms and the rash suggests <strong>dengue fever</strong>.</p>\n<p>It presents with sudden-onset <strong>fever, retro-orbital pain,</strong> <strong>myalgia, arthralgia</strong>, and a <strong>rash</strong>. The rash in dengue appears as <strong>white islands</strong> on a <strong>red sea</strong> due to\u00a0erythema with petechiae. The alternative name for dengue, <strong>breakbone</strong> <strong>fever</strong>, comes from the associated muscle and joint pains.</p>\n<p>Suspected cases of dengue are confirmed by the presence of <strong>NS1 antigen</strong> or<strong> IgM antibodies.</strong></p>\n<p>The treatment of dengue is <strong>supportive</strong> with hydration taking top priority. Severe cases where there is symptomatic thrombocytopenia or a platelet count of &lt;10000-20000 cells/cumm require platelet transfusions.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e0df488fca7a48bfa0e7f2d89b04b6bb.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 9 year old boy presents with burning sensation on passing urine. He mentions that the urine appears bright red. Urine analysis shows hematuria but no bacteria. Which of the following is the causative organism",
    "choices": [
      {
        "id": 1,
        "text": "RSV"
      },
      {
        "id": 2,
        "text": "Adenovirus"
      },
      {
        "id": 3,
        "text": "Rhinovirus"
      },
      {
        "id": 4,
        "text": "Rotavirus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Dysuria and hematuria in a child in the absence of bacteria in the urine suggest a diagnosis of <strong>hemorrhagic cystitis</strong>. It is commonly caused by<strong> adenovirus</strong>.</p>\n<p>Adenoviruses are non-enveloped dsDNA viruses. They cause infections of the respiratory tract, eye, bladder and intestine. The following table shows various syndromes caused by adenoviruses and associated serotypes:</p>\n<table style=\"height: 113px;\" width=\"419\">\n<tbody>\n<tr>\n<td style=\"width: 201.6px; text-align: center;\"><strong>Syndrome</strong></td>\n<td style=\"width: 202.4px; text-align: center;\"><strong>Adenovirus serotypes</strong></td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Respiratory disease in children</td>\n<td style=\"width: 202.4px; text-align: left;\">1, 2, 5, 6</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Sore throat, febrile cold, pneumonia</td>\n<td style=\"width: 202.4px; text-align: left;\">3, 4, 7, 14, 21</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">ARD in military recruits</td>\n<td style=\"width: 202.4px; text-align: left;\">4, 7, 21</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Follicular (swimming pool) conjunctivitis/ Pharyngoconjunctival fever</td>\n<td style=\"width: 202.4px; text-align: left;\">3, 7</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Epidemic keratoconjunctivitis (shipyard eye)</td>\n<td style=\"width: 202.4px; text-align: left;\">8, 19, 37</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Diarrhea</td>\n<td style=\"width: 202.4px; text-align: left;\">40, 41</td>\n</tr>\n<tr>\n<td style=\"width: 201.6px; text-align: left;\">Acute hemorrhagic cystitis</td>\n<td style=\"width: 202.4px; text-align: left;\">11, 21</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 19-year-old boy presented with a single painless papule on his penis with no enlarged lymph nodes. A smear was made from the lesion and stained with Wright- Giemsa stain which showed the finding as shown in the following picture. Identify the organism.",
    "choices": [
      {
        "id": 1,
        "text": "Treponema pallidum"
      },
      {
        "id": 2,
        "text": "Herpes simplex"
      },
      {
        "id": 3,
        "text": "Chlamydia trachomatis"
      },
      {
        "id": 4,
        "text": "Klebsiella granulomatis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical vignette and the image showing\u00a0<strong>D</strong><strong>onovan bodies</strong>\u00a0in Wright/Giemsa-stained impression smears indicate a diagnosis of <strong>donovanosis</strong> caused by\u00a0<strong><em>Klebsiella granulomatis.</em></strong>\u00a0They appear as <strong>rounded</strong> <strong>coccobacilli</strong>\u00a0within cystic spaces in large mononuclear cells (called\u00a0<strong>Pund cells</strong>).</p>\n<p><em>Klebsiella granulomatis</em>\u00a0shows bipolar condensation of chromatin giving a <strong>safety</strong> <strong>pin</strong> <strong>appearance</strong>.</p>\n<p>Bipolar staining (safety pin appearance) is shown by:</p>\n<ul>\n<li><em>H. ducreyi</em></li>\n<li><em>Vibrio parahaemolyticus</em></li>\n<li><em>Klebsiella granulomatis</em></li>\n<li><em>Yersinia pestis</em></li>\n<li><em>Burkholderia pseudomallei</em></li>\n<li><em>Burkholderia mallei</em></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/26109dded79149868db2b639da07010c.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following subtypes of HIV is most common in India?",
    "choices": [
      {
        "id": 1,
        "text": "Subtype A"
      },
      {
        "id": 2,
        "text": "Subtype B"
      },
      {
        "id": 3,
        "text": "Subtype C"
      },
      {
        "id": 4,
        "text": "Subtype D"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Subtype C</strong>\u00a0of HIV is the <strong>most common</strong>\u00a0in India. It causes more than 95% of HIV infections. \u00a0</p>\n<p>Subtypes <strong>A</strong> and <strong>C</strong> are more readily transmitted by <strong>heterosexual</strong> contact than <strong>subtype B</strong>, which is mainly transmitted by <strong>homosexual</strong> contact and <strong>injections</strong>. \u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with fever, productive cough, and weight loss. He gives a history of not having completed treatment for tuberculosis thrice in the past. Extensively drug-resistant TB is suspected. How is this entity defined?",
    "choices": [
      {
        "id": 1,
        "text": "Resistance to INH + Amikacin + Ofloxacin + Ethambutol"
      },
      {
        "id": 2,
        "text": "Resistance to INH + Rifampicin + Amikacin"
      },
      {
        "id": 3,
        "text": "Resistance to Rifampicin + Amikacin+ Ofloxacin"
      },
      {
        "id": 4,
        "text": "Resistance to INH + Rifampicin + Ofloxacin + Linezolid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong> XDR-TB</strong> (<strong>extensively drug-resistant&nbsp;TB</strong>) is defined as <strong>multi-drug resistant&nbsp; TB</strong> (resistant to rifampicin and isoniazid) which is also<strong>&nbsp;</strong>resistant to one <strong>fluoroquinolone</strong> (eg. ofloxacin) AND&nbsp;resistant to atleast one additional group A drug (as of 2021, these are&nbsp;<a href=\"https://www.uptodate.com/contents/bedaquiline-drug-information?search=xdr+tb&amp;topicRef=8028&amp;source=see_link\" target=\"_blank\" data-topicid=\"87509\" rel=\"noopener\">bedaquiline</a>&nbsp;and&nbsp;<a href=\"https://www.uptodate.com/contents/linezolid-drug-information?search=xdr+tb&amp;topicRef=8028&amp;source=see_link\" target=\"_blank\" data-topicid=\"10283\" rel=\"noopener\">linezolid)</a></p>\n<p>It is usually seen in patients who have previously received treatment for TB and have either failed to complete treatment or relapsed.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The quality of drinking water is considered to be satisfactory if the presumptive coliform count is _____.",
    "choices": [
      {
        "id": 1,
        "text": "2\u20134/100 mL"
      },
      {
        "id": 2,
        "text": "0/100 mL"
      },
      {
        "id": 3,
        "text": "4\u201310/100 mL"
      },
      {
        "id": 4,
        "text": "More than 10/100 mL"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>According to WHO guidelines, the quality of drinking water is considered to be satisfactory if the <strong>presumptive coliform count</strong> is <strong>0</strong><strong>/100 mL</strong>.</p>\n<p><strong>Presumptive coliform count</strong></p>\n<ul>\n<li>The basis of the <strong>presumptive coliform test</strong> is the <strong>inoculation of the water</strong> to be tested into tubes containing a suitable liquid medium, which are then incubated and examined after the appropriate period of time.</li>\n<li>The test is called <strong>presumptive</strong> because the reaction observed in the tube may occasionally be due to the presence of some other organism or combination of organisms, and the presumption that the reaction is due to coliform organisms has to be confirmed.</li>\n<li>The <strong>proportion of false-positive reactions</strong> obtained depends both on the bacterial flora of the water under examination and on the medium used.</li>\n<li><strong>Lactose</strong> <strong>broth</strong>, or <strong>MacConkey's broth</strong>, with<strong> bromocresol purple 25</strong> as an indicator and a standardized concentration of bile salts incubated between 35&deg;C&ndash;37&deg;C for 48 hours, seems to be the most suitable media for presumptive tests.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a virulence factor for Neisseria gonorrhoea?",
    "choices": [
      {
        "id": 1,
        "text": "M proteins"
      },
      {
        "id": 2,
        "text": "Outer Membrane Proteins"
      },
      {
        "id": 3,
        "text": "IgA proteases"
      },
      {
        "id": 4,
        "text": "Pili"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong> M proteins</strong> are important virulence factors for <em><strong>Streptococcus pyogenes</strong></em>&nbsp;and not for <em>Neisseria gonorrhoeae.</em></p>\n<p>Virulence factors for gonococci:</p>\n<ol>\n<li>Outer Membrane Proteins (OMPs)</li>\n<li>IgA proteases</li>\n<li>Pili</li>\n<li>Lipo-oligosaccharide (LOS)</li>\n<li>Transferrin</li>\n<li>Lactoferrin-binding protein</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient has presented to the PHC with fever and chills. You order a rapid diagnostic test to detect HRP-2 antigen. Which of the following diseases is it used to diagnose?",
    "choices": [
      {
        "id": 1,
        "text": "Malaria"
      },
      {
        "id": 2,
        "text": "Filaria"
      },
      {
        "id": 3,
        "text": "Amoebiasis"
      },
      {
        "id": 4,
        "text": "Giardiasis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>HRP-2 antigen</strong>\u00a0detection is used in<strong>\u00a0</strong>the diagnosis of<strong> malaria.</strong></p>\n<p>Malaria antigens detected by the rapid immunochromatographic test are:</p>\n<ul>\n<li>pLDH - Positive in all Plasmodium species</li>\n<li>HRP-2 - Positive for P. falciparum</li>\n</ul>\n<p>The below image shows rapid diagnostic test (RDT) kit for malaria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9857d798d1ec41b6b927656bf4082234x500x334.JPEG"
    ]
  },
  {
    "text": "Which of the following bacteria is a diphtheroid and is pyrazinamidase positive and urease positive?",
    "choices": [
      {
        "id": 1,
        "text": "Corynebacterium ulcerans"
      },
      {
        "id": 2,
        "text": "Corynebacterium  xerosis"
      },
      {
        "id": 3,
        "text": "Corynebacterium hofmannii"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong><em>Corynebacterium hofmanni</em>&nbsp;is a diphtheroid&nbsp;and is pyrazinamidase positive and urease positive.</strong></p>\n<ul>\n<li><strong>Diphtheroids</strong> are corynebacteria, resembling <em>Corynebacterium diphtheriae</em>, occurring as normal commensals in the throat, skin, conjunctiva, and other areas.</li>\n<li>The common diphtheroids include <strong><em>C. hofmanni</em>&nbsp;and <em>Cornybacterium xerosis</em>.</strong></li>\n<li>Both <em>C. hofmanni</em>&nbsp;and <em>C. xerosis</em> are <strong>pyrazinamidase positive</strong> unlike <em>C. diphtheriae</em>.</li>\n<li><em><strong>C. hofmanni,</strong>&nbsp;</em>also known as <em><strong>Corynebacterium&nbsp;pseudodiphtheriticum,</strong></em> is <strong>urease positive</strong> and non-fermentative.</li>\n<li><em><strong>C. xerosis</strong></em> is <strong>urease negative</strong> and ferments glucose.</li>\n<li><strong>C<em>orynebacterium ulcerans</em>&nbsp;</strong>is<strong> pyrazinamidase negative.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young child was brought to the ER with a history of loose stools. On examination, she is tachycardic, appears lethargic and skin goes back slowly after the skin pinch test. She was admitted and started on IV fluids and input-output charting was done. The given image shows stool output from the patient. Which of the following is the mechanism of action of the toxin responsible for the same?",
    "choices": [
      {
        "id": 1,
        "text": "Inhibit elongation factor -2"
      },
      {
        "id": 2,
        "text": "Toxin causes Increased guanyl cyclase activity"
      },
      {
        "id": 3,
        "text": "The toxin causes continued activation of adenylate cyclase"
      },
      {
        "id": 4,
        "text": "Inhibit 60S  ribosomal subunit"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of dehydration, profuse diarrhea, and rice water stools is suggestive of <strong>cholera.</strong> Cholera<strong> toxin</strong> causes continued <strong>activation of</strong> <strong>adenylate cyclase</strong>.&nbsp;</p>\n<div class=\"page\" title=\"Page 323\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 323\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>&nbsp;Mechanism of action of cholera toxin:</strong></p>\n<div class=\"page\" title=\"Page 323\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>The cholera toxin molecule&nbsp;consists of 1 A and 5 B subunits. The B (binding) units&nbsp;attach to the GM1 ganglioside receptors on the surface&nbsp;of jejunal epithelial cells. The A (active) subunit, on&nbsp;being transported into the enterocyte, dissociates into A1 and A2. A2 fragment only links biologically active A<span class=\"s5\">1&nbsp;</span>to the B subunit.</li>\n<li>A1&nbsp;causes prolonged&nbsp;<strong>activation of cellular adenylate cyclase</strong>&nbsp;and accumulation of&nbsp;<strong>cAMP</strong>, leading to&nbsp;<strong>outpouring</strong>&nbsp;into the small intestinal lumen, of large quantities of water and electrolytes and the consequent watery diarrhea, that is&nbsp;isotonic with plasma but contains much more of potassium and bicarbonate.</li>\n<li>The toxin also&nbsp;<strong>inhibits the intestinal absorption</strong>&nbsp;of sodium and chloride.</li>\n<li>All clinical manifestations and complications in cholera result from the massive water and electrolyte depletion thus caused.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/0640be8624ae48c595d0e6cb41031277.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/497dd499a8254fcb851a7da430376ff9x1280x1516.JPEG"
    ]
  },
  {
    "text": "A veterinarian is administered three doses of the human diploid cell anti-rabies vaccine as pre-exposure prophylaxis. Which of the following is false about the viral strain present in the vaccine?",
    "choices": [
      {
        "id": 1,
        "text": "The incubation period is short and fixed"
      },
      {
        "id": 2,
        "text": "It is produced by serial passage through rabbit brains"
      },
      {
        "id": 3,
        "text": "It produces Negri bodies"
      },
      {
        "id": 4,
        "text": "It can multiply in neural tissue"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The human diploid cell anti-rabies vaccine consists of the <strong>fixed rabies</strong> virus grown on human diploid cells. The fixed virus <strong>does not</strong> produce <strong>Negri bodies</strong>.\u00a0\u00a0</p>\n<p>The fixed virus is produced by <strong>serial passage</strong> of the street rabies virus through<strong> rabbit brains</strong>. It is <strong>neurotropic</strong> and multiples in neural tissues. When inoculated intracerebrally, it produces<strong> fatal encephalitis</strong>. The incubation period for this is <strong>short</strong> and <strong>fixed</strong>, and the course of encephalitis is predictable. Negri bodies cannot be demonstrated in the brains of animals inoculated with the fixed virus. This virus is used for anti-rabies <strong>vaccine production</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following statements about Helicobacter pylori are true except that",
    "choices": [
      {
        "id": 1,
        "text": "Gastric fundus is the most common site of colonization"
      },
      {
        "id": 2,
        "text": "Helicobacter pylori infection is associated with increased risk of gastric adenocarcinoma"
      },
      {
        "id": 3,
        "text": "The triple regimen for the treatment of H.pylori includes omeprazole, clarithromycin, and metronidazole"
      },
      {
        "id": 4,
        "text": "The urea breath test, the stool antigen test, and biopsy-based tests can all be used to assess the success of treatment"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong>&nbsp;most common site </strong>of colonization of <em>H. pylori</em> in the stomach is the&nbsp;<strong>gastric antrum</strong>&nbsp;although any part of the stomach can be involved.</p>\n<ul>\n<li><em>H. pylori</em> infection increases the risk of gastric malignancies such as&nbsp;<strong>gastric adenocarcinoma</strong> and <strong>MALTomas</strong> (i.e., mucous-associated lymphoid tisse lymphomas).</li>\n<li><strong>MALTomas</strong> are found to <strong>regress</strong> with the elimination of <em>H. pylori</em>.</li>\n<li>The <strong>triple regimen</strong> for the treatment of <em>H. pylori</em> includes <strong>omeprazole, clarithromycin, and metronidazole&nbsp;</strong>(see table below)</li>\n<li>The urea breath test, the stool antigen test, and biopsy-based tests can all be used to assess the success of treatment.</li>\n<li><strong>Serology cannot be used for follow-up</strong> after treatment as the fall in H.pylori specific antibody titer is too slow to be of practical use.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/af3d1fbcbed44c4abf99116adb9d13c0x923x706.JPEG"
    ]
  },
  {
    "text": "A young man presents to the ER with complaints of sudden onset nausea, vomiting, and four episodes of passing loose stools. He gives a history of having food from a nearby restaurant three hours ago. Which of the following organisms is most likely implicated here?",
    "choices": [
      {
        "id": 1,
        "text": "Vibrio cholerae"
      },
      {
        "id": 2,
        "text": "Salmonella typhi"
      },
      {
        "id": 3,
        "text": "Escherichia coli"
      },
      {
        "id": 4,
        "text": "Staphylococcus aureus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Based on the given clinical history, the patient is most likely suffering from <strong>gastroenteritis</strong> caused by <em><strong>Staphylococcus aureus.</strong></em>&nbsp;</p>\n<p>Staphylococcus causes <strong>nausea, vomiting</strong>, and <strong>diarrhoea</strong> <strong>2-6 hrs</strong> after the consumption of contaminated food. Other organisms causing food poisoning within the same time period of 2-6 hrs are the emetic strains of&nbsp;<em>Bacillus cereus</em>.</p>\n<p>Gastroeneteritis is caused by<strong> enterotoxin</strong> produced by <em>S. aureus</em>. It is a <strong>preformed toxin</strong> that is relatively&nbsp;<strong>heat stable </strong>while most of the other exotoxins are heat-labile. It stimulates the <strong>vagus nerve</strong> and <strong>vomiting centre</strong> of the brain and also stimulates intestinal peristaltic activity. Eight antigenic types of enterotoxin are currently known of which is&nbsp;<strong>Type &nbsp;A&nbsp;</strong>toxin is responsible for most cases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old bisexual man goes to an ICTC centre for counselling about HIV. Which of the following is false about HIV transmission?",
    "choices": [
      {
        "id": 1,
        "text": "Male-to-female HIV transmission has more risk of causing infection than female-to-male transmission"
      },
      {
        "id": 2,
        "text": "The risk of acquiring HIV with unprotected receptive anal intercourse is lower than that with penile-vaginal intercourse"
      },
      {
        "id": 3,
        "text": "The quantity of HIV-1 in plasma is a primary determinant of the risk of HIV-1 transmission"
      },
      {
        "id": 4,
        "text": "Male circumcision is associated with a lower risk of HIV acquisition for heterosexual men"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The risk of HIV acquisition associated with <strong>unprotected receptive anal intercourse </strong>is <strong>relatively higher</strong> than that seen in penile-vaginal intercourse.\u00a0This is because the rectal mucosal membrane is thin and fragile and anal intercourse is associated with microtrauma (rectal tears).\u00a0</p>\n<p>The differences in transmission rates between men and women are because the <strong>vagina and cervix</strong> are <strong>exposed</strong> to semen for a <strong>longer</strong> duration, increasing the risk of transmission.\u00a0However, the penis and urethral orifice are exposed relatively briefly to infected vaginal fluid, lowering the risk.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the first sign of generalized tetanus?",
    "choices": [
      {
        "id": 1,
        "text": "Fever"
      },
      {
        "id": 2,
        "text": "Increased respiratory and GI secretions"
      },
      {
        "id": 3,
        "text": "Trismus"
      },
      {
        "id": 4,
        "text": "Autonomic disturbance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>first sign&nbsp;</strong>of generalized tetanus is <strong>increased tone of the masseter</strong> muscle, which results in&nbsp;<strong>trismus </strong>or<strong> lock-jaw.</strong></p>\n<p><strong>Tetanus</strong>:</p>\n<ul>\n<li>Route of entry of organism- injury, unhygienic surgery, abortion/delivery, otitis media</li>\n<li>The <strong>incubation</strong> period is <strong>6-10 days</strong>.</li>\n<li>First clinical sign- increased masseter tone (trismus/lock-jaw) followed by descending tetanus</li>\n<li>Deep tendon reflex is exaggerated.</li>\n<li>In neonates, difficulty in feeding is the usual presentation.</li>\n<li><strong>Diagnosis</strong> is <strong>always clinical</strong>, microscopy is unreliable.</li>\n<li><strong>Treatment</strong> includes&nbsp;<strong>cleaning</strong>&nbsp;the entry <strong>wound</strong> first in order to remove anaerobic foci of infection and prevent further toxin production. <strong>Metronidazole</strong> is preferred for antibiotic therapy.&nbsp;<strong>Antitoxin</strong> should be given early in an attempt to deactivate any circulating tetanus toxin.&nbsp;Spasms are controlled by <strong>heavy sedation</strong> with <strong>benzodiazepines.&nbsp;</strong>Symptomatic treatment is given for respiratory and cardiovascular derangements.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Not true about botulinum toxin",
    "choices": [
      {
        "id": 1,
        "text": "Short half life"
      },
      {
        "id": 2,
        "text": "Increases acetylcholine release"
      },
      {
        "id": 3,
        "text": "Used for the treatment of Blepharospasm, static and dynamic wrinkles"
      },
      {
        "id": 4,
        "text": "Permanantly decreases acetylcholine in neuromuscular junction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Botulinum toxin</strong> acts by <strong>blocking the production</strong> and <strong>release of acetylcholine</strong> at the synapses and neuromuscular junction. Hence, this is an incorrect statement.</p>\n<ul>\n<li><strong>Site of action:</strong>&nbsp;Pre-synaptic neuromuscular junctions, postganglionic parasympathetic nerve endings, and peripheral ganglia.</li>\n<li>It is used in the <strong>treatment</strong> of neuromuscular disorder like <strong>strabismus</strong>, <strong>blepharospasm</strong>, <strong>wrinkle</strong>, <strong>myoclonus</strong>&nbsp;(since botulism toxin produces flaccid paralysis).</li>\n<li>The action is <strong>short lasting</strong> and recovery occurs in 2-4 months once the new terminal axon sprouts form and restore transmission.</li>\n<li><strong>Blocking of acetylcholine release</strong> from nerve terminal is <strong>permanent</strong> and recovery occurs only by sprouting of new nerve<br />terminals.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6209ed768852470780a6d77075e1cae4x425x599.PNG"
    ]
  },
  {
    "text": "A 9-year-old girl is brought with complaints of sensitivity to light and profuse lacrimation. On inspection, the given finding is seen on her upper tarsal conjunctiva. What type of hypersensitivity reaction is this?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type II and III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Spring catarrh\u00a0</strong>or <strong>vernal keratoconjunctivitis</strong>\u00a0is a <strong>type I hypersensitivity</strong> reaction.</p>\n<p>It is a bilateral, seasonally recurrent, chronic conjunctivitis due to type I hypersensitivity allergic reaction to an <strong>external antigen.\u00a0</strong>The antigen reacts with IgE, this stimulates mast cell degranulation leading to the release of histamine and other mediators of the allergic response.</p>\n<p>Spring catarrh is one of the several forms of allergic conjunctivitis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/198220c0af944763962c9a996e198cb8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Pertussis or whooping cough is also commonly known as __________.",
    "choices": [
      {
        "id": 1,
        "text": "1 Week Cough"
      },
      {
        "id": 2,
        "text": "6 Months Cough"
      },
      {
        "id": 3,
        "text": "100-Day Cough"
      },
      {
        "id": 4,
        "text": "24 hours Cough"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pertussis</strong> is commonly known as <strong>100-Day cough</strong>.</p>\n<p>The word pertussis means <strong>violent cough</strong>, which describes the most consistent feature of the illness.</p>\n<p>The <strong>inspiratory sound&nbsp;\"whoop\"</strong> made at the end of an episode of paroxysmal coughing, gives it the common name for the illness, whooping cough.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding transfer factor?",
    "choices": [
      {
        "id": 1,
        "text": "It is dialysable"
      },
      {
        "id": 2,
        "text": "The transferred CMI is local at injection site and not systemic"
      },
      {
        "id": 3,
        "text": "It has been used in the treatment of Wiskott\u2013Aldrich syndrome"
      },
      {
        "id": 4,
        "text": "The immunity offered by it is referred to as adoptive immunity"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>transferred cell mediated immunity</strong> is not local at the injected site. It is&nbsp;systemic.</p>\n<p>The <strong>cell-mediated immunity (CMI) </strong>can be transferred in human beings by the injection of extracts from leucocytes. This extract is known as <strong>transfer factor(TF)</strong>.</p>\n<p>The immunity transferred as a result of injection of the Transfer factor is referred to as <strong>Adoptive immunity.</strong></p>\n<p>The Cell Mediated Immunity can be transferred only to those antigens to which the donor is sensitive.</p>\n<p>TF is dialysable, low molecular weight substance.</p>\n<p><strong>Applications of Transfer factor:</strong></p>\n<ul>\n<li>To restore immune capacity in patients with T-cell deficiency (<strong>Wiskott &ndash; Aldrich syndrome</strong>)</li>\n<li>Treatment of disseminated infections associated with deficient cell mediated immunity such as Lepromatous leprosy, Tuberculosis Mucocutaneous candidiasis</li>\n<li>Treatment of Malignant melanoma</li>\n<li>In treatment of autoimmune diseases such as Systemic lupus erythematosus, Rheumatoid arthritis.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 1-year-old boy presents with meningococcal meningitis. He has a history of recurrent bacterial chest and ear infections. Family history reveals that he has a male cousin (maternal side) who died in infancy from infection. The physician suspects X-linked agammaglobulinemia. Which of the following is false regarding his condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is caused by a mutation of the BTK gene"
      },
      {
        "id": 2,
        "text": "Both humoral and cell mediated immunity are affected"
      },
      {
        "id": 3,
        "text": "All classes of immunoglobulin levels are reduced"
      },
      {
        "id": 4,
        "text": "Lymph node biopsy shows depletion of follicles"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>X-linked</strong> or <strong>Bruton's agammaglobulinemia\u00a0</strong>is primarily a disease of <strong>humoral immunity.</strong> Cell-mediated immunity is not affected.</p>\n<p>It is an <strong>inherited</strong> immunodeficiency disease caused by mutations in the gene coding for <strong>Bruton</strong> <strong>tyrosine</strong> <strong>kinase</strong> <strong>(BTK).\u00a0</strong>B cells do not differentiate and mature. They are arrested in the pre-B cell stage.</p>\n<p>There are extremely <strong>low IgG</strong> levels (below 100 mg/dL) and an <strong>absence</strong> of other <strong>immunoglobulin</strong> classes.\u00a0The <strong>tonsils</strong> and <strong>lymph nodes</strong> are usually <strong>atrophic.</strong>\u00a0Lymph node biopsy reveals depletion of cells of B cell-dependent areas (follicles). Babies born with this disorder have virtually <strong>no peripheral B cells</strong> (&lt;1%) and suffer from recurrent bacterial infections.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false about viral hepatitis?",
    "choices": [
      {
        "id": 1,
        "text": "Anti LKM-3 antibody is associated with hepatitis B infection"
      },
      {
        "id": 2,
        "text": "Anti-LKM1 antibodies are associated with hepatitis C infection"
      },
      {
        "id": 3,
        "text": "IgM anti-HAV antibody appears during the late incubation period"
      },
      {
        "id": 4,
        "text": "Enterically transmitted non-A, non-B hepatitis is caused by hepatitis E virus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The<strong> anti-LKM-3 antibody</strong> is associated with <strong>hepatitis D</strong> infection, not hepatitis B.</p>\n<p>Anti\u2013liver-kidney microsomal antibodies (anti-LKM) are many of several <strong>autoantibodies</strong> that are detected in the serum of patients with different types of acute or chronic <strong>liver disease.</strong> These antibodies are targeted against antigens of the <strong>cytochrome P450</strong> system.</p>\n<p>They are also associated with <strong>chronic hepatitis C</strong> and <strong>autoimmune hepatitis.</strong></p>\n<p>Option C: <strong>IgM</strong> anti-HAV antibody indicates <strong>current/recent</strong> infection. It appears during the late incubation period, peaks in 2-3 weeks, and disappears after 3-4 months.\u00a0IgG denotes remote infection or immunity. It appears around the same time, peaks at 3-4 months, and persists for a long time.\u00a0</p>\n<p>Option D: Hepatitis E infection was previously known as an epidemic or enterically transmitted non-A, non-B hepatitis. It is transmitted by feco-oral route.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following does not play a role in the virulence of Vibrio cholerae?",
    "choices": [
      {
        "id": 1,
        "text": "Lipopolysaccharide"
      },
      {
        "id": 2,
        "text": "Flagella"
      },
      {
        "id": 3,
        "text": "Pilum"
      },
      {
        "id": 4,
        "text": "Cholera toxin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><em>Vibrio cholerae</em>\u00a0possesses\u00a0<strong>lipopolysaccharide\u00a0</strong>(LPS)<strong> O antigen</strong>\u00a0but it plays <strong>no role</strong> in the <strong>pathogenesis</strong> of cholera. It is responsible for the <strong>immunity</strong> induced by <strong>killed vaccines.</strong></p>\n<p>Factors involved in <strong>virulence of <em>Vibrio cholerae</em></strong>: \u00a0</p>\n<div class=\"page\" title=\"Page 322\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>In the small intestine, vibrios can cross the protective layer of mucus and reach the epithelial cells by\u00a0using <strong>mucinase</strong> and other <strong>proteolytic enzymes</strong>.</li>\n<li><strong>Toxin co-regulated pilus</strong>(TCP),\u00a0is essential for the <strong>adhesion</strong> to the epithelial surface and <strong>colonization</strong> of the bacteria in small intestine.</li>\n<li><strong>Cholera toxin</strong> (also known as choleragen and\u00a0cholera enterotoxin) causes\u00a0<strong>watery</strong> <strong>diarrhea</strong> through <strong>cAMP-</strong>mediated pathway.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a splenectomized patient, there is an increased risk of infection by all capsulated organisms. Which of the following is least likely to cause an infection in such patients?",
    "choices": [
      {
        "id": 1,
        "text": "Streptococcus pneumoniae"
      },
      {
        "id": 2,
        "text": "Klebsiella pneumoniae"
      },
      {
        "id": 3,
        "text": "Haemophilus influenzae"
      },
      {
        "id": 4,
        "text": "Staphylococcus aureus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In<strong> splenectomized patients</strong>, there is an increased risk of infection by <strong>capsulated organisms</strong> such as <strong><em>Streptococcus pneumoniae</em></strong>,&nbsp;<strong><em>Haemophilus influenzae,</em></strong> and <em><strong>K</strong><strong>lebsiella pneumoniae.&nbsp;</strong></em><em>Staphylococcus aureus</em> does not have a capsule and so poses no increased risk to these individuals.</p>\n<p>The&nbsp;<strong>phagocytosis</strong> of capsulated organisms is <strong>prevented by</strong> their <strong>capsule</strong>. Thus, the body's <strong>main defence</strong> against these organisms is the <strong>spleen</strong>.</p>\n<p>Certain components called <strong>opsonins</strong>&nbsp;<strong>attach</strong> to these capsulated organisms, and then they are <strong>delivered to the spleen</strong>, where their uptake is facilitated by receptors present on the surface of <strong>splenic phagocytes</strong>. After splenectomy, this defence mechanism is lost leaving patients susceptible to infection from these bacteria.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true about tuberculin test?",
    "choices": [
      {
        "id": 1,
        "text": "Patients with sarcoidosis show anergy"
      },
      {
        "id": 2,
        "text": "TB pericarditis patient may have positive test"
      },
      {
        "id": 3,
        "text": "Miliary TB may come out as negative test"
      },
      {
        "id": 4,
        "text": "Tuberculin test is the only way to diagnose pulmonary TB if sputum smear and microscopy is negative"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Tuberculin</strong> may be <strong>false negative</strong> in conditions such as&nbsp;<strong>early TB</strong>, late or miliary TB, patients with low CMI, <strong>sarcoidosis</strong> or following measles.</p>\n<p>Patients with&nbsp;<strong>sarcoidosis&nbsp;</strong>may show <strong>anergy</strong> (absence of the normal immune response to a particular antigen or allergen).</p>\n<p>Even in<strong> extrapumlonary TB</strong> like <strong>TB pericarditis</strong>, tuberculin test is positive unless the patient is immunocompromised.</p>\n<p><strong>Interpretation</strong> of result of <strong>tuberculin test</strong>:</p>\n<ul>\n<li><strong>Adults</strong>: Positive test only confirms <strong>past infection</strong> but does not indicate the presence of the active stage of the disease. It is only used as epidemiological marker.</li>\n<li><strong>Children</strong>: Indicates<strong> active infection</strong> and used as a diagnostic marker.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most potent stimulator of naive T-cells?",
    "choices": [
      {
        "id": 1,
        "text": "Mature dendritic cells"
      },
      {
        "id": 2,
        "text": "Follicular dendritic cells"
      },
      {
        "id": 3,
        "text": "B lymphocytes"
      },
      {
        "id": 4,
        "text": "NK cells"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Mature dendritic cells</strong> are the <strong>most potent stimulator</strong> of<strong> naive T cells.</strong></p>\n<p>Naive CD4<sup>+</sup> T cells are activated when they come in contact with two ligands - MHC class II and a costimulary membrane protein (eg: CD28). Both of these are present in <strong>antigen-presenting cells</strong>, the most potent of which is the mature dendritic cell. Other professional antigen-presenting cells include macrophages and B lymphocytes (option C).</p>\n<p>Other options:</p>\n<p>Option B: <strong>Follicular dendritic cells</strong>\u00a0are functionally different from dendritic cells. They are not antigen-presenting-cells and\u00a0do not activate naive T cells.</p>\n<p>Option D: NK cells do not stimulate naive T cells.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/10226498d4f14accbc321452d6f3d620x1280x1839.JPEG"
    ]
  },
  {
    "text": "A young lady complains of recurrent rhinitis, nasal discharge and bilateral nasal blockage for two years.  She has a history of allergic rhinitis. On rhinoscopy, multiple ethmoidal polyps with mucosal thickening and impacted secretions are seen in both the nasal cavities. A tissue biopsy is taken and sent for culture, which on microscopic examination shows the following appearance. What is the most probable organism implicated here?",
    "choices": [
      {
        "id": 1,
        "text": "Aspergillus fumigatus"
      },
      {
        "id": 2,
        "text": "Aspergillus flavus"
      },
      {
        "id": 3,
        "text": "Aspergillus niger"
      },
      {
        "id": 4,
        "text": "Penicillium chrysogenum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Recurrent rhinitis, chronic nasal discharge, bilateral nasal blockage, multiple ethmoidal polyps and the microscopic appearance of conical vesicles with conidia over two-thirds of the vesicle is suggestive of <strong>allergic</strong> <strong>fungal rhinosinusitis </strong>caused by <strong><em>Aspergillus fumigatus</em>. </strong></p>\n<p>Aspergillus spp. can lead to the following types of sinusitis:</p>\n<ol>\n<li><strong>Acute invasive sinusitis</strong>: It affects immunocompromised patients. They present with fever, nasal or facial discomfort, blocked nose and bloody nasal discharge. Pale, dusky or necrotic tissue will be present within the sinuses.</li>\n<li><strong>Chronic aspergillus sinusitis:</strong>\n<ul>\n<li><strong>Fungal ball</strong> of sinus: The maxillary sinus, most commonly, is filled with an aspergillus ball. No tissue invasion is present.</li>\n<li><strong>Chronic invasive sinusitis: </strong>There is slow destruction of the ethmoid and sphenoid sinuses with bone destruction and localised spread. Patients present with chronic nasal discharge and blockage, loss of the sense of smell and persistent headache. Involvement of the orbit results in proptosis and blindness.</li>\n<li><strong>Chronic granulomatous sinusitis: </strong>Patients present with facial swelling and unilateral proptosis. Biopsied tissue shows granulomatous (not necrotic) reaction.</li>\n</ul>\n</li>\n<li><strong>Allergic fungal rhinosinusitis</strong>: Patients present with chronic sinusitis and nasal polyps. On microscopy, eosinophilia and Charcot-Leyden crystals can be seen.</li>\n</ol>\n<p>On microscopic examination of the sinus or polyp tissue, hyaline, septate, acute branching hyphae of <em>Aspergillus spp.</em> can be seen. The various species can be differentiated based on the appearance of the conidiophores. In <em><strong>Aspergillus fumigatus</strong>, </em>the vesicle is conical. <strong>Phialides</strong> are arranged in a <strong>single row</strong>. <strong>Conidia</strong> arise from the <strong>upper two-thirds </strong>of the<strong> vesicle</strong> and are hyaline.</p>\n<p>Option B:<em> <strong>Aspergillus flavus</strong>\u00a0</em>has a globular vesicle. Phialides are arranged in one or two rows. Conidia arise from the <strong>entire vesicle</strong> and are hyaline.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/931ba62aceb24b6faaba12abeec09373.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f1feab26baf440d8ab04f4565cb8f3ecx320x201.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d304cfc3691d4211a99eedd0af4c9953x623x600.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ed1788ddd8ac4189b11c93cfe5eebfe2x567x425.JPEG"
    ]
  },
  {
    "text": "A 25-year-old man presented to the ER with fever, splenomegaly, and a rash as shown in the image below. After admission, he developed intestinal perforation  and an exploratory laparotomy revealed several longitudinal ulcers in the small bowel. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Enteric fever"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Amoebiasis"
      },
      {
        "id": 4,
        "text": "Hemorrhagic colitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows <strong>Rose spots</strong>. The combination of this with fever, splenomegaly, presence of longitudinal ulcers in the intestine and\u00a0intestinal perforation is suggestive of <strong>enteric fever.</strong></p>\n<p>The term enteric fever includes typhoid fever caused by <em>Salmonella typhi</em> and paratyphoid fever caused by <em>Salmonella paratyphi A, B</em> and<em> C</em><strong>.</strong></p>\n<p>Enteric fever presents with\u00a0<strong>step ladder pyrexia.\u00a0</strong>The fever is accompanied by <strong>relative bradycardia</strong> which is known as the<strong> Faget sign</strong>.\u00a0<strong>Hepatosplenomegaly</strong> is a common finding on examination.\u00a0<strong>Rose spots</strong> that fade on pressure appear on the skin during the second or third week.\u00a0</p>\n<p>Since bile is a good culture medium for the bacilli, they multiply abundantly in the gallbladder and are discharged continuously into the intestine. In the intestine, it causes inflammation and necrosis leaving behind the characteristic <strong>typhoid ulcers</strong>\u00a0which are oriented along the axis of the intestine (<strong>longitudinal ulcers</strong>).<strong>\u00a0</strong>Ulceration of the bowel leads to two major complications-\u00a0<strong>intestinal</strong> <strong>perforation</strong> and <strong>hemorrhage</strong>.</p>\n<p>Option B: In intestinal<strong> tuberculosis</strong>, ulcers are perpendicular to the axis of the intestine (<strong>transverse ulcers</strong>).</p>\n<p>Option C:\u00a0<strong>Flask shaped ulcers</strong> are characteristic of <strong>amoebiasis</strong>.</p>\n<p>Option D: <strong>Hemorrhagic colitis</strong> is caused by <em>Shigella dysenteriae</em> and some strains of <em>E. coli.</em> It is characterised by <strong>bloody diarrhea</strong>\u00a0with tenesmus.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/346e3d2c2ff84e178b631a9d72c037c0.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 2-month-old infant presented with a runny nose and bullous lesions on the skin and legs. Her X-ray (given below) showed features suggestive of periostitis. Which of the following is the initial investigation of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Venereal disease research laboratory (VDRL) test"
      },
      {
        "id": 2,
        "text": "Treponema pallidum hemagglutination (TPHA) assay"
      },
      {
        "id": 3,
        "text": "Fluorescent treponema antibody absorbed (FTA-ABS) test"
      },
      {
        "id": 4,
        "text": "Culture"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span class=\"TextRun SCX65150384\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCX65150384\">The newborn baby has characteristic signs and symptoms of <strong>congenital syphilis.</strong> <strong>Periostitis</strong> is a hallmark of skeletal manifestation.\u00a0</span></span><span class=\"TextRun SCX65150384\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCX65150384\"><strong>VDRL</strong>\u00a0or\u00a0<strong>RPR</strong> is the<strong> initial investigation of choice </strong>in congenital syphilis.</span></span></p>\n<p><span class=\"TextRun SCX65150384\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCX65150384\">The earliest manifestations of congenital syphilis include rhinitis, or <strong>\u201csnuffles\u201d;</strong> mucocutaneous lesions, bone changes, including periostitis detectable by x-ray examination of long bones; hepatosplenomegaly,\u00a0 lymphadenopathy, anemia, jaundice, thrombocytopenia, and leukocytosis. They can also have dental deformities such as <strong>Hutchinson's</strong> teeth which describes notches in teeth and <strong>mulberry</strong> molars.\u00a0</span></span></p>\n<p><span class=\"TextRun SCX65150384\" lang=\"EN-IN\" xml:lang=\"EN-IN\"><span class=\"NormalTextRun SCX65150384\">All neonates born to mothers who have reactive nontreponemal and treponemal test results should be evaluated with a quantitative nontreponemal serologic test (RPR or VDRL) performed on the neonate\u2019s serum because umbilical cord blood can become contaminated with maternal blood and yield a false-positive result. </span></span></p>\n<p><strong>FTA-ABS</strong> or<strong> TPHA\u00a0</strong>is used for <strong>confirmation</strong> of syphilis in a patient with reactive RPR or VDRL test.<br /><em>T. pallidum</em> cannot be detected by culture.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c9ff4dd02bde479d89902d4b08dc38e7.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Unilateral sex-linked histoincompatibility is known as _____",
    "choices": [
      {
        "id": 1,
        "text": "Eichwald\u2013Silmser effect"
      },
      {
        "id": 2,
        "text": "Schwartzman reaction"
      },
      {
        "id": 3,
        "text": "Schultz\u2013Dale phenomenon"
      },
      {
        "id": 4,
        "text": "Prausnitz\u2013Kustner reaction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Eichwald&ndash;Silmser effect is known as unilateral sex-linked histoincompatibility.</p>\n<ul>\n<li>While transplants between siblings are successful, an exception is seen when the donor is a male and the recipient a female.</li>\n<li>Such grafts are rejected as the grafted male tissue (XY) will have antigens determined by the Y chromosome which will be absent in the female (XX) recipient.</li>\n<li>Grafts from the female to the male will succeed.</li>\n<li>This unilateral sex linked histoincompatibility is known as the Eichwald-Silmser effect.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An unresponsive middle-aged man with fever and petechial rashes was rushed into the ER. You successfully resuscitate him. Abdominal ultrasound shows bilateral adrenal hemorrhage. Which of the following statements is false regarding his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Patients who recover may suffer from sloughing of the skin"
      },
      {
        "id": 2,
        "text": "The implicated organism can be isolated from the petechial rashes"
      },
      {
        "id": 3,
        "text": "The causative organism is Neisseria gonorrheae"
      },
      {
        "id": 4,
        "text": "Hypoplastic spleen is a risk factor for this condition"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">The above scenario depicts&nbsp;<strong>Waterhouse-Friderichsen syndrome</strong>&nbsp;which is a complication seen in infection with <strong>meningococci. </strong>Waterhouse-Friderichsen syndrome&nbsp;is<strong>&nbsp;</strong>also known as hemorrhagic adrenalitis&nbsp;or&nbsp;fulminant meningococcemia and is characterized by <strong>bilateral adrenal gland hemorrhage</strong>.&nbsp;</p>\n<p style=\"text-align: justify;\">Though Waterhouse-Freiderichsen syndrome is most often associated with meningococcal septicemia, it may complicate sepsis caused by other organisms like certain streptococcal species also. Hypoplastic spleen may also be associated with this condition and the implicated organism can be isolated from the petechial rashes.</p>\n<p style=\"text-align: justify;\">Complications :&nbsp;</p>\n<ul style=\"text-align: justify;\">\n<li><strong>Shock</strong>, extensive hemorrhage within the skin</li>\n<li>May fall into a coma</li>\n<li>Death,&nbsp;usually after a few hours, due to&nbsp;<strong>adrenal insufficiency</strong></li>\n<li>Patients who recover may suffer from <strong>extensive sloughing of the skin</strong> and <strong>loss of digits</strong> due to <strong>gangrene.</strong></li>\n</ul>\n<p style=\"text-align: justify;\"><strong>Fulminant meningococcemia</strong> is a medical emergency and needs to be treated with adequate antibiotics as fast as possible.&nbsp;<strong>Ceftriaxone</strong> is an antibiotic commonly used nowadays.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the drug of choice for the treatment of hemophilus meningitis?",
    "choices": [
      {
        "id": 1,
        "text": "Cefotaxime"
      },
      {
        "id": 2,
        "text": "Ampicillin"
      },
      {
        "id": 3,
        "text": "Cotrimoxazole"
      },
      {
        "id": 4,
        "text": "Penicillin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>3rd-generation cephalosporins like <strong>cefotaxime</strong> or <strong>ceftazidime</strong> are the <strong>drugs of choice</strong> for the treatment of <strong>hemophilus meningitis.</strong>\u00a0</p>\n<p>Ampicillin and cotrimoxazole were popular for respiratory infections, but as plasmid-borne resistance to these drugs is now common, they are not recommended anymore. Amoxicillin-clavulanate can still be given and is is more effective than cotrimoxazole or ampicillin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following syndromes corresponds to a failure of neutrophils to generate an immune response and lab values indicate elevated IgE levels?",
    "choices": [
      {
        "id": 1,
        "text": "Job's syndrome"
      },
      {
        "id": 2,
        "text": "Wiskott-Aldrich syndrome"
      },
      {
        "id": 3,
        "text": "Carcinoid syndrome"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Job&rsquo;s Syndrome<strong>&nbsp;</strong>corresponds to a failure of neutrophils to generate an immune response and lab values indicate elevated IgE levels.</p>\n<p><strong>Hyperimmunoglobulinemia E syndrome</strong> - its&nbsp;autosomal dominant form is called Job's syndrome or Buckley syndrome.</p>\n<ul>\n<li>It is a disorder of phagocytosis associated with elevated IgE levels.</li>\n<li>This is characterized by multiple large staphylococcal &lsquo;cold&rsquo; abscesses, which occur repeatedly on the skin containing large quantities of pus.</li>\n<li>Atopic eczema, chronic nasal discharge, and otitis media are common features.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the average incubation period for Hepatitis A virus?",
    "choices": [
      {
        "id": 1,
        "text": "<1 week"
      },
      {
        "id": 2,
        "text": "30 days"
      },
      {
        "id": 3,
        "text": "90 days"
      },
      {
        "id": 4,
        "text": "120 days"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The average <strong>incubation period</strong> of\u00a0the<strong> Hepatitis A virus\u00a0</strong>(HAV)\u00a0is around <strong>30</strong> <strong>days</strong>.\u00a0It ranges from 15-50 days.\u00a0The clinical disease has a <strong>prodromal stage</strong> and an <strong>icteric stage</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is true about T cell dependent antigens?",
    "choices": [
      {
        "id": 1,
        "text": "Their response doesn't show immunological memory"
      },
      {
        "id": 2,
        "text": "They activate only mature B cells"
      },
      {
        "id": 3,
        "text": "They activate B cells polyclonally"
      },
      {
        "id": 4,
        "text": "They activate only IgG antibodies"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>T cell-dependent antigens activate</strong> only <strong>mature</strong> <strong>B cells</strong>.</p>\n<p>Depending on their ability to <strong>induce</strong> the <strong>formation</strong> of <strong>antibodies,</strong> antigens are classified as T-cell dependent and T-cell independent antigens.&nbsp;</p>\n<table style=\"height: 344px; width: 535px;\">\n<tbody>\n<tr style=\"height: 37px;\">\n<td style=\"width: 251px; height: 37px; text-align: center;\"><strong>T cell-dependent antigens (TD)</strong></td>\n<td style=\"width: 268px; height: 37px; text-align: center;\"><strong>T cell-independent antigens (TI)</strong></td>\n</tr>\n<tr style=\"height: 57px;\">\n<td style=\"width: 251px; height: 57px;\">Require helper&nbsp;T cell participation for the production of immune response</td>\n<td style=\"width: 268px; height: 57px;\">Directly stimulate antibody production by B cells</td>\n</tr>\n<tr style=\"height: 24px;\">\n<td style=\"width: 251px; height: 24px;\">Structurally complex</td>\n<td style=\"width: 268px; height: 24px;\">Structurally simple</td>\n</tr>\n<tr style=\"height: 45px;\">\n<td style=\"width: 251px; height: 45px;\">Activate only mature B cells monoclonally</td>\n<td style=\"width: 268px; height: 45px;\">Activate both mature and immature B cells polyclonally</td>\n</tr>\n<tr style=\"height: 22px;\">\n<td style=\"width: 251px; height: 22px;\">B cells undergo affinity maturation and class switch over</td>\n<td style=\"width: 268px; height: 22px;\">B cells do not undergo affinity maturation and class switch over</td>\n</tr>\n<tr style=\"height: 5px;\">\n<td style=\"width: 251px; height: 5px;\">\n<p>All classes of antibodies are activated</p>\n</td>\n<td style=\"width: 268px; height: 5px;\">Antibody response is restricted to IgM and IgG3</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 251px; height: 17px;\">Rapidly metabolized</td>\n<td style=\"width: 268px; height: 17px;\">Slowly metabolized</td>\n</tr>\n<tr style=\"height: 20px;\">\n<td style=\"width: 251px; height: 20px;\">Immunological memory present</td>\n<td style=\"width: 268px; height: 20px;\">No immunological memory</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The capsid of a virus is best represented by which of the following marked structures?",
    "choices": [
      {
        "id": 1,
        "text": "3"
      },
      {
        "id": 2,
        "text": "1"
      },
      {
        "id": 3,
        "text": "4"
      },
      {
        "id": 4,
        "text": "2"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given image of a virus, the capsid is best represented by <strong>structure 3.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4dbf02aac62944bbb777b7574091df37.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/faadc36e85f84f3db5b09ff259b5f69dx1280x1062.JPEG"
    ]
  },
  {
    "text": "A 12-year-old child presented to you with fever, malaise, and weight loss. On examination, you notice the finding shown in the image. In which of the following conditions is this seen?",
    "choices": [
      {
        "id": 1,
        "text": "West African sleeping sickness"
      },
      {
        "id": 2,
        "text": "Chagas disease"
      },
      {
        "id": 3,
        "text": "Leishmaniasis"
      },
      {
        "id": 4,
        "text": "Babesiosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given image shows\u00a0<strong>posterior cervical lymphadenopathy</strong>\u00a0which is called <strong>Winterbottom\u2019s sign</strong>. It is seen in\u00a0<strong>West African sleeping sickness.</strong></p>\n<p>It is seen in stage I of West African sleeping sickness caused by <em>Trypanosoma brucei\u00a0gambiense.</em></p>\n<p>The table below shows diseases caused by various Trypanosoma\u00a0species.</p>\n<table style=\"width: 48.2759%; height: 255.789px;\">\n<tbody>\n<tr style=\"height: 54.3984px;\">\n<td style=\"width: 44.0558%; height: 54.3984px;\" width=\"308\">\n<p><strong>Protozoa</strong></p>\n</td>\n<td style=\"width: 55.9442%; height: 54.3984px;\" width=\"308\">\n<p><strong>Disease </strong></p>\n</td>\n</tr>\n<tr style=\"height: 47.7969px;\">\n<td style=\"width: 44.0558%; height: 47.7969px;\" width=\"308\">\n<p><em>Trypanosoma brucei\u00a0gambiense</em></p>\n</td>\n<td style=\"width: 55.9442%; height: 47.7969px;\" width=\"308\">\n<p>West African sleeping sickness</p>\n</td>\n</tr>\n<tr style=\"height: 76.7969px;\">\n<td style=\"width: 44.0558%; height: 76.7969px;\" width=\"308\">\n<p><em>Trypanosoma brucei\u00a0rhodesiense</em></p>\n</td>\n<td style=\"width: 55.9442%; height: 76.7969px;\" width=\"308\">\n<p>East African sleeping sickness</p>\n</td>\n</tr>\n<tr style=\"height: 76.7969px;\">\n<td style=\"width: 44.0558%; height: 76.7969px;\" width=\"308\">\n<p><em>Trypanosoma cruzi</em></p>\n</td>\n<td style=\"width: 55.9442%; height: 76.7969px;\" width=\"308\">\n<p>Chagas\u2019 disease/South American trypanosomiasis</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/01c3d71e34f04dcf916017e9d1bc6390.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following immunoglobulins crosses placenta?",
    "choices": [
      {
        "id": 1,
        "text": "IgG"
      },
      {
        "id": 2,
        "text": "IgA"
      },
      {
        "id": 3,
        "text": "IgM"
      },
      {
        "id": 4,
        "text": "IgD"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>IgG</strong> is the <strong>only maternal immunoglobulin that is normally transported across the placenta</strong> and provides natural passive immunity in the newborn.</p>\n<ul>\n<li>Maximum placental transfer &ndash; IgG1</li>\n<li>Minimum placental transfer &ndash; IgG2</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A  farmer from a tribal area is referred from his PHC with complaints of chest pain and hemoptysis. A CT chest was done and the finding is given in the image. What is the likely causative organism?",
    "choices": [
      {
        "id": 1,
        "text": "T. solium"
      },
      {
        "id": 2,
        "text": "T. saginata"
      },
      {
        "id": 3,
        "text": "H. nana"
      },
      {
        "id": 4,
        "text": "E. granulosus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given CT scan shows&nbsp;<strong>water lily sign,</strong> which is seen in the&nbsp;<strong>hydatid disease</strong> of the<strong> lung</strong>. It is caused by&nbsp;<em><strong>Echinococcus granulosus.</strong></em></p>\n<p>The&nbsp;water-lily sign&nbsp;occurs due to detachment of the endocyst membrane from the cyst wall giving the apparance of floating membranes within the pericyst. This mimics the appearance of a water lily.</p>\n<p>It is classically visualised on plain radiographs (mainly chest X-ray) when the collapsed membranes are calcified but may be seen on ultrasound, CT, or MRI.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d2ee16fab03c40eb974e24522252347e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1d0bcc0948bf4d86abcdd120d6a227bax600x667.JPEG"
    ]
  },
  {
    "text": "Which of the following statements is false regarding drug resistance?",
    "choices": [
      {
        "id": 1,
        "text": "In mutational drug resistance one drug resistance is seen at a time"
      },
      {
        "id": 2,
        "text": "Virulence is decreased in transferable resistance"
      },
      {
        "id": 3,
        "text": "Drug combinations can prevent Mutational drug resistance"
      },
      {
        "id": 4,
        "text": "High degree of resistance is seen in transferable drug resistance"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Virulence</strong> is not decreased in <strong>transferable</strong> <strong>drug</strong> <strong>resistance</strong>.</li>\n<li>Transferable drug resistance is widely seen in various pathogenic and commensal bacteria of humans.</li>\n<li>The transfer can be effected readily in vitro, but in the normal gut, it is inhibited by factors such as Bile salts, anaerobic conditions, and alkaline pH.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The virus with the smallest genome among the given options is _____.",
    "choices": [
      {
        "id": 1,
        "text": "Hepatitis B virus"
      },
      {
        "id": 2,
        "text": "Retrovirus"
      },
      {
        "id": 3,
        "text": "Paramyxovirus"
      },
      {
        "id": 4,
        "text": "Parvovirus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Hepatitis B virus </strong>has the<strong> smallest genome </strong>among the given options.</p>\n<p>Largest genomic size- Poxvirus&nbsp;</p>\n<p>Smallest genomic size- Hepatitis D followed by Hepatits B&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following bacteria is associated with the causation of colorectal carcinoma, rectal polyp, endocarditis and septicaemia and is pyrrolidinyl arylamidase test negative?",
    "choices": [
      {
        "id": 1,
        "text": "Streptococcus equisimilis"
      },
      {
        "id": 2,
        "text": "Streptococcus gallolyticus"
      },
      {
        "id": 3,
        "text": "Enterococcus"
      },
      {
        "id": 4,
        "text": "Streptococcus pyogenes"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><em><strong>Streptococcus gallolyticus</strong></em>&nbsp;is&nbsp;associated with the causation of colorectal CA, rectal polyp, endocarditis, and septicemia and is&nbsp;pyrrolidinyl arylamidase test (PYR test) negative.</p>\n<p><em>Streptococcus gallolyticus</em><em>,</em> formerly called<strong>&nbsp;</strong><em><strong>Streptococcus bovis</strong>,</em>&nbsp;is a&nbsp;<strong>non-enterococcal Group D</strong> streptococci.&nbsp;It is bile insoluble, esculin hydrolysis positive, PYR negative and shows no growth in 6.5% NaCl.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man presents with fever, chills and abdominal pain for 1 week. He underwent valve replacement for symptomatic aortic valve stenosis 4 months ago. On auscultation, an early diastolic murmur is noted along the lower left sternal margin which increases in intensity during the Valsalva maneuver. Which of the following statements is true about the most common organism causing this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Cell wall contains teichoic acid"
      },
      {
        "id": 2,
        "text": "Coagulase positive"
      },
      {
        "id": 3,
        "text": "Beta-hemolytic"
      },
      {
        "id": 4,
        "text": "Sensitive to lysostaphin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Fever and chills with aortic regurgitation (an early diastolic murmur along the left sternal margin<strong> </strong>increasing in intensity during the Valsalva manoeuvre) in a patient with a prosthetic valve suggest a diagnosis of<strong> prosthetic valve</strong> <strong>left-sided infective endocarditis. </strong>The most common organism causing it within 12 months of surgery is<strong> coagulase-negative <em>Staphylococci </em>(CoNS)<em>.\u00a0</em></strong>Its cell wall contains<strong> teichoic acid</strong>.\u00a0</p>\n<p>Infective endocarditis is the microbial infection of heart valves or endocardium, leading to the formation of <strong>vegetations </strong>(thrombotic debris and microbial organisms). Patients present with fever, chills and heart murmurs. Non-cardiac manifestations like subungual hemorrhage, Osler's nodes and arteria emboli may be seen. The most common organism causing IE overall is <em>Staphylococcus aureus.\u00a0</em>The most common organism causing prosthetic valve endocarditis within 12 months of surgery is coagulase-negative Staphylococci, like <strong><em>Staphylococcus epidermidis</em></strong>.\u00a0</p>\n<p><em>Staphylococcus epidermidis </em>is a Gram-positive coccus arranged in clusters. It is <strong>coagulase-negative</strong> (option B) and is <strong>resistant</strong> to <strong>lysostaphin</strong> (option D). It is non-hemolytic (option C). It is a part of normal flora of the human body.</p>\n<p>The following image shows a graphical illustration of vegetations seen in infective endocarditis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f0420ce644274e37abf4a9952cd46fdex1280x1252.JPEG"
    ]
  },
  {
    "text": "A 45-year-old diabetic patient presented with complaints of discoloration of his toenail for the past 4 months as shown in the image below. Which pathogen most commonly causes this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Trichophyton rubrum"
      },
      {
        "id": 2,
        "text": "Trichophyton schonleinii"
      },
      {
        "id": 3,
        "text": "Epidermophyton floccosum"
      },
      {
        "id": 4,
        "text": "Trichophyton mentagrophytes"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario points to a diagnosis of <strong>onychomycosis </strong>and the pathogen most commonly associated with this condition is <strong><em>Trichophyton rubrum.</em>\u00a0</strong>Diabetes increases the risk of onychomycosis.</p>\n<p>Onychomycosis refers to <strong>nail infections</strong> caused by fungi<strong>.</strong> It can be due to dermatophytes, non-dermatophytic moulds, and candida.<strong> Tinea unguium</strong> refers to nail infections caused by <strong>dermatophytes.</strong>\u00a0This condition may affect toenails or fingernails, but toenail infections are particularly common.\u00a0</p>\n<p>The following photomicrograph of the nail segment in KOH shows <em>T. rubrum\u00a0</em>fungal hyphae invading nail cells.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6ec3ef56c6434f618039685dc3a6c2f9.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eeee707c1b094cbe8289da5fd6d1882ax400x300.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6c5cd6abbead419ba34fd41b19845296x567x425.JPEG"
    ]
  },
  {
    "text": "Which among the following statements is false?",
    "choices": [
      {
        "id": 1,
        "text": "Muramic acid is present in prokaryotes"
      },
      {
        "id": 2,
        "text": "Mitotic division is present in eukaryotes"
      },
      {
        "id": 3,
        "text": "80S ribosome is present in prokaryotes"
      },
      {
        "id": 4,
        "text": "Multiple linear chromosomes present in eukaryotes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>80S ribosome</strong> is present in <strong>e</strong><strong>ukaryotes</strong>, while <strong>70S ribosome</strong> is present in <strong>p</strong><strong>rokaryotes</strong>.</p>\n<p>80S ribosome has subunits 60S and 40S, while 70S has subunits 50S and 30S.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8568a624eb0441ec9428839975d407fdx1280x1114.JPEG"
    ]
  }
];
        let quizName = 'Microbiology St 2';
        const quizFilename = 'microbiology-st-2-d841b169.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>