<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 Injuries Of Spine - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Orthopedics
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">23</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A patient was brought to the emergency department with an injury to the neck following a road traffic accident. On examination, she was found to have decreased sensations over the back of the scalp. Which nerve root has likely been injured in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "C2"
      },
      {
        "id": 2,
        "text": "C3"
      },
      {
        "id": 3,
        "text": "C4"
      },
      {
        "id": 4,
        "text": "C5"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The nerve root likely injured in a patient having <strong>decreased sensation</strong> over the <strong>back of</strong> the <strong>scalp</strong> is <strong>C2</strong>.</p>\n<p>Area of <strong>loss of sensation</strong> following nerve root injury varies depending upon <strong>level of nerve root</strong> as follows:</p>\n<ul>\n<li><strong>C2</strong> injury&nbsp;leads to decreased sensation over the <strong>back of</strong> the <strong>scalp</strong></li>\n<li><strong>C3</strong> injury leads to decreased sensation over the <strong>anterior aspect</strong> of the <strong>neck</strong></li>\n<li><strong>C4</strong> injury leads to decreased sensation over the <strong>lateral aspect</strong> of the <strong>neck</strong> and inferiorly over clavicles down to the rib space</li>\n<li><strong>C5</strong> injury leads to decreased sensation over the <strong>deltoid</strong>&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/74f137e036b244c4afa67eb7e275d59ax1280x1535.JPEG"
    ]
  },
  {
    "text": "A patient with a spinal injury presents with decreased sensation over the radial aspect of the forearm, thumb, and index finger. There is weakness of wrist extension on examination. Which nerve root has been damaged here?",
    "choices": [
      {
        "id": 1,
        "text": "C8"
      },
      {
        "id": 2,
        "text": "C5"
      },
      {
        "id": 3,
        "text": "C6"
      },
      {
        "id": 4,
        "text": "C7"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> C6 </strong>nerve root has been <strong>damaged</strong> in this case of <strong>loss of sensation</strong> over the <strong>radial aspect</strong> of <strong>forearm</strong> and <strong>weakened wrist extension</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient has decreased sensation over the medial part of the forearm around the elbow. Which nerve root is involved here?",
    "choices": [
      {
        "id": 1,
        "text": "C8"
      },
      {
        "id": 2,
        "text": "C7"
      },
      {
        "id": 3,
        "text": "T1"
      },
      {
        "id": 4,
        "text": "C6"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Decreased sensation over the <strong>medial aspect</strong> of the forearm around the <strong>elbow</strong> is seen due to injury to<strong> T1 nerve root.</strong></p>\n<p>T1&nbsp;is the nerve root for the <strong>sensory supply</strong> of the <strong>medial aspect </strong>of the<strong> forearm</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6868b10efcd14e9f80963f2d80f87ba5x1280x2558.JPEG"
    ]
  },
  {
    "text": "Which of these muscles can be tested to evaluate C5 root motor function in a patient with spinal injury?",
    "choices": [
      {
        "id": 1,
        "text": "Trapezius"
      },
      {
        "id": 2,
        "text": "Biceps"
      },
      {
        "id": 3,
        "text": "Extensor carpi radialis longus"
      },
      {
        "id": 4,
        "text": "Triceps"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">The<strong> biceps</strong> muscle can be used to test the <strong>C5</strong> root motor function. It causes <strong>elbow flexion</strong>.</p>\n<p class=\"p1\">In spine injuries, a full neurological examination is performed in all cases. Tests performed for&nbsp;nerve root <strong>motor function</strong> are summarized in the table below.&nbsp;</p>\n<table style=\"width: 704px; height: 753px;\">\n<tbody>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p><strong>Spinal Segment</strong></p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">\n<p><strong>Muscle Supplied</strong></p>\n</td>\n<td style=\"width: 235.613px; height: 50px;\">\n<p><strong>Action to Test</strong></p>\n</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p>C5</p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">\n<p>Biceps, Brachialis</p>\n</td>\n<td style=\"width: 235.613px; height: 50px;\">\n<p>Elbow flexion</p>\n</td>\n</tr>\n<tr style=\"height: 88px;\">\n<td style=\"width: 96px; height: 88px;\">\n<p>C6</p>\n</td>\n<td style=\"width: 349.387px; height: 88px;\">\n<p>Extensor carpi radialis longus and brevis</p>\n</td>\n<td style=\"width: 235.613px; height: 88px;\">\n<p>Wrist extension</p>\n</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p>C7</p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">Triceps</td>\n<td style=\"width: 235.613px; height: 50px;\">\n<p>Elbow extension</p>\n</td>\n</tr>\n<tr style=\"height: 88px;\">\n<td style=\"width: 96px; height: 88px;\">\n<p>C8</p>\n</td>\n<td style=\"width: 349.387px; height: 88px;\">\n<p>Flexor digitorum profundus to the middle finger</p>\n</td>\n<td style=\"width: 235.613px; height: 88px;\">Flex middle distal phalanx</td>\n</tr>\n<tr style=\"height: 69px;\">\n<td style=\"width: 96px; height: 69px;\">\n<p>T1</p>\n</td>\n<td style=\"width: 349.387px; height: 69px;\">\n<p class=\"p1\">Abductor digiti minimi</p>\n</td>\n<td style=\"width: 235.613px; height: 69px;\">Abduct little finger</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p>L2</p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">\n<p>Iliopsoas</p>\n</td>\n<td style=\"width: 235.613px; height: 50px;\">Flex hip</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p>L3</p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">\n<p>Quadriceps</p>\n</td>\n<td style=\"width: 235.613px; height: 50px;\">Straighten knee</td>\n</tr>\n<tr style=\"height: 50px;\">\n<td style=\"width: 96px; height: 50px;\">\n<p>L4</p>\n</td>\n<td style=\"width: 349.387px; height: 50px;\">\n<p>Tibialis anterior</p>\n</td>\n<td style=\"width: 235.613px; height: 50px;\">Dorsiflex foot</td>\n</tr>\n<tr style=\"height: 69px;\">\n<td style=\"width: 96px; height: 69px;\">\n<p>L5</p>\n</td>\n<td style=\"width: 349.387px; height: 69px;\">\n<p>Extensor hallucis longus</p>\n</td>\n<td style=\"width: 235.613px; height: 69px;\">Dorsiflex big toe</td>\n</tr>\n<tr style=\"height: 61.4297px;\">\n<td style=\"width: 96px; height: 61.4297px;\">\n<p>S1</p>\n</td>\n<td style=\"width: 349.387px; height: 61.4297px;\">\n<p>Gastrocnemius, Soleus</p>\n</td>\n<td style=\"width: 235.613px; height: 61.4297px;\">Plantarflex foot</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following reflexes is commonly tested to detect spinal shock in a patient?",
    "choices": [
      {
        "id": 1,
        "text": "Pupillary reflex"
      },
      {
        "id": 2,
        "text": "Gag reflex"
      },
      {
        "id": 3,
        "text": "Abdominal reflex"
      },
      {
        "id": 4,
        "text": "Bulbocavernous reflex"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>bulbocavernous reflex</strong> is commonly tested to detect spinal shock.&nbsp;</p>\n<p><strong>Spinal shock</strong> is the&nbsp;<strong>physiological dysfunction</strong> that follows structural injury to the spine. It manifests as <strong>flaccidity</strong>, <strong>loss of sensation</strong>, and <strong>absence of reflexes</strong> below the level of the injury.&nbsp;</p>\n<p>The&nbsp;<strong>primitive reflexes</strong> are absent in spinal shock. These include:</p>\n<ul>\n<li><strong>Bulbocavernosus reflex</strong> (root value S2- S4): Tested by squeezing the penis in males or applying pressure on the clitoris in females. The normal response is the contraction of the anal sphincter.&nbsp;If the patient has in situ Foley's catheter, it can be gently pulled to test anal contraction in both genders.&nbsp;</li>\n<li><strong>Anal wink reflex</strong> (root value S2- S4): Tested by stroking the skin around the anus.&nbsp;The normal response is the contraction of the anal sphincter.&nbsp; &nbsp;</li>\n</ul>\n<p>Spinal shock usually lasts less than 48 hours and the reflexes return to normal. <strong>Resolution</strong> of <strong>spinal shock</strong> is indicated by the <strong>return</strong> of the <strong>bulbocavernosus</strong> and the <strong>anal wink reflex</strong>.</p>\n<p>The path of the bulbocavernosus reflex is depicted below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8abd7fa4d9254c6889a833ba5a7ce042x1280x1912.JPEG"
    ]
  },
  {
    "text": "Which of the following is not seen in a patient with cauda equina syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Absent bulbocavernosus reflex"
      },
      {
        "id": 2,
        "text": "Asymmetric saddle-shaped anesthesia"
      },
      {
        "id": 3,
        "text": "Flaccid paralysis below the knee"
      },
      {
        "id": 4,
        "text": "Exaggerated knee jerk"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>In <strong>cauda equina&nbsp;</strong>syndrome, the<strong> knee jerk</strong> is <strong>lost</strong>.</p>\n<p><strong>Causes</strong> for cauda equina syndrome include:</p>\n<ul>\n<li>Tumours of the spine</li>\n<li>Pott's disease</li>\n<li>Protrusion of disc</li>\n<li>Fracture-dislocation of the thoracolumbar spine.</li>\n</ul>\n<p>Initially, there is&nbsp;<strong>saddle-shaped hyperesthesia </strong>and<strong> later anesthesia</strong>&nbsp;involving buttocks, anus, and perineum. Along with this, there is <strong>flaccid paralysis below</strong> the <strong>knee</strong> and ankle reflex is lost. <strong>Bulbocavernosus reflex</strong> is also <strong>absent</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false?",
    "choices": [
      {
        "id": 1,
        "text": "In automatic bladder, the level of injury is above S2"
      },
      {
        "id": 2,
        "text": "In automatic bladder, reflex center takes control"
      },
      {
        "id": 3,
        "text": "In autonomous bladder, residual urine is minimal"
      },
      {
        "id": 4,
        "text": "In autonomous bladder, the injury is LMN type"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The quantity of <strong>residual urine</strong> is <strong>large,</strong>&nbsp;not minimal, in <strong>autonomous</strong> <strong>bladder</strong>.&nbsp;</p>\n<p><strong>Differences</strong> between an <strong>automatic bladder and autonomous bladder</strong> are highlighted in the table.&nbsp;</p>\n<table style=\"width: 427px;\" border=\"1\" cellspacing=\"1\">\n<tbody>\n<tr>\n<td style=\"width: 198px;\">\n<p><strong>Automatic bladder</strong></p>\n</td>\n<td style=\"width: 217px;\">\n<p><strong>Autonomous bladder</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 198px;\">\n<p>Level of injury above S2</p>\n</td>\n<td style=\"width: 217px;\">\n<p>Injury below/at S2</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 198px;\">\n<p>UMN type lesion</p>\n</td>\n<td style=\"width: 217px;\">\n<p>LMN type lesion</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 198px;\">\n<p>Controlled by reflex center of bladder</p>\n</td>\n<td style=\"width: 217px;\">\n<p>Controlled by intrinsic plexus of bladder</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 198px;\">\n<p>Emptying is involuntary</p>\n</td>\n<td style=\"width: 217px;\">\n<p>Emptying is voluntary</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 198px;\">\n<p>Residual urine volume is minimal</p>\n</td>\n<td style=\"width: 217px;\">\n<p>Residual urine volume is large (200-300 cc)</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements regarding whiplash injury is false?",
    "choices": [
      {
        "id": 1,
        "text": "It is a ligamentous injury of the cervical spine"
      },
      {
        "id": 2,
        "text": "Neck stiffness is a presenting symptom"
      },
      {
        "id": 3,
        "text": "X-ray shows vertebral fracture in most cases"
      },
      {
        "id": 4,
        "text": "There is hyperextension followed by flexion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Cervical vertebral <strong>fracture</strong> is not seen in most cases with <strong>whiplash injury</strong>. It is seen in<strong> severe cases only</strong>.&nbsp;</p>\n<p class=\"p1\">Whiplash is a form of cervical <strong>acceleration-deceleration injury</strong>. There is hyperextension of the spine followed by flexion during the recoil.</p>\n<p class=\"p1\">The main pathological features seen in these cases include tear (<strong>strain</strong>)&nbsp;of&nbsp;the<strong> anterior longitudinal ligament</strong>&nbsp;and the <strong>capsular fibres </strong>of the<strong> facet joints&nbsp;</strong>in the spine. In some cases, the intervertebral discs may be damaged.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements about SCIWORA is false?",
    "choices": [
      {
        "id": 1,
        "text": "It is a condition prevalent in the geriatric population"
      },
      {
        "id": 2,
        "text": "There is a temporary occlusion of vertebral arteries"
      },
      {
        "id": 3,
        "text": "These lesions are mainly found in cervical spine"
      },
      {
        "id": 4,
        "text": "MRI  is the gold standard investigation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>SCIWORA is <strong>Spinal Cord Injury Without Radiographic Abnormality.</strong>&nbsp;It is very common in <strong>children.</strong></p>\n<p>Such injuries are most often seen in the <strong>cervical spine</strong>. Specific biomechanics of the vertebral column in children allows the musculoskeletal system to<strong> move beyond</strong> the normal <strong>physiological range of motion</strong> without the risk of fracture. However as the spinal cord is not as flexible, neurological deficits may be seen.</p>\n<p>Investigations available earlier like X-rays could not detect such lesions. However, new imaging modalities like <strong>MRI</strong> have <strong>increased</strong> the rate of <strong>detection</strong> of such lesions and is considered <strong>gold standard</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the radiographic view shown below.",
    "choices": [
      {
        "id": 1,
        "text": "Open mouth view"
      },
      {
        "id": 2,
        "text": "Swimmer\u2019s view"
      },
      {
        "id": 3,
        "text": "Water\u2019s view"
      },
      {
        "id": 4,
        "text": "Schuller's view"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given radiograph is that of <strong>open mouth view </strong>or<strong>&nbsp;odontoid view</strong>.</p>\n<p>The open-mouth view is used to diagnose:</p>\n<ul>\n<li><strong>Jefferson fracture</strong>&nbsp;- Burst fracture of C1 vertebra</li>\n<li><strong>Odontoid</strong> <strong>fractures </strong>- Fracture of odontoid process of C2 vertebra</li>\n<li><strong>Basilar invagination </strong>- Upward migration of&nbsp;superior part of the odontoid process</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7408d11364404cc0932ccead1fcf61df.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An open mouth X-ray was performed in a patient suspected to have a Jefferson's fracture. The transverse ligament is likely to be ruptured if the overhang of C1 over C2 is more than:",
    "choices": [
      {
        "id": 1,
        "text": "13.1 mm"
      },
      {
        "id": 2,
        "text": "3.4 mm"
      },
      {
        "id": 3,
        "text": "11.1 mm"
      },
      {
        "id": 4,
        "text": "6.9 mm"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Note: Some experts suggest that this measurement has to be<strong>&nbsp;8.1 mm</strong> to account for magnification on plain radiographs.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3338a598fc4649d9867cdf58c975afd2x1200x1871.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ab64f90d4fb6473aa933ac3127bb02dcx1280x2120.JPEG"
    ]
  },
  {
    "text": "An unconscious road traffic accident victim was brought to the emergency department. After resuscitation and stabilization,  a CT scan of the cervical spine was performed which is given below. What is the preferred management in this case?",
    "choices": [
      {
        "id": 1,
        "text": "Atlantoaxial fusion"
      },
      {
        "id": 2,
        "text": "Rigid cervical collar"
      },
      {
        "id": 3,
        "text": "Anterior decompression"
      },
      {
        "id": 4,
        "text": "Vertebroplasty"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image below shows a halo vest.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3bd89d614a8742768cf904676172370d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/67bde2162b2c4b5c96c926789f151ec8x454x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1caceb7d00b0413292466d6d3650b6f1x1280x1673.JPEG"
    ]
  },
  {
    "text": "Which of the following statements about Hangman's fracture is false?",
    "choices": [
      {
        "id": 1,
        "text": "It is fracture of pars interarticularis of atlas"
      },
      {
        "id": 2,
        "text": "Most fractures are minimally displaced"
      },
      {
        "id": 3,
        "text": "Most fractures can be managed conservatively"
      },
      {
        "id": 4,
        "text": "Neurological injury is less common"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The&nbsp;<strong>Levine and Edwards classification</strong> is used commonly for these fractures.&nbsp;</p>\n<p>Most of these fractures can be <strong>managed conservatively</strong>. The treatment approach is as below:</p>\n<ul>\n<li>Minimally displaced fractures: Cervical collar.</li>\n<li>Highly displaced and angulated fractures: Traction followed by Halo vest</li>\n<li>Fractures with&nbsp;dislocation of the C2&ndash;C3 facet joint and neurological injuries: Open reduction and stabilization</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/73ce5ced12824a479ed39d57dbeacf95x1200x1555.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e092f26db8f14fdea62592b3f289e724x1280x894.JPEG"
    ]
  },
  {
    "text": "Which is the most dangerous type of odontoid fracture?",
    "choices": [
      {
        "id": 1,
        "text": "Type I"
      },
      {
        "id": 2,
        "text": "Type II"
      },
      {
        "id": 3,
        "text": "Type III"
      },
      {
        "id": 4,
        "text": "Type IV"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\">The <strong>most common</strong> and most <strong>dangerous</strong> type of <strong>odontoid fracture</strong> is <strong>Type II</strong>. These fractures are <strong>unstable</strong> and prone to <strong>non-union</strong>.&nbsp;</p>\n<p class=\"p1\">Odontoid fractures are classified&nbsp;by <strong>Anderson and D&rsquo;Alonzo classification</strong> into 3 types given below:</p>\n<table style=\"width: 803px;\">\n<tbody>\n<tr>\n<td style=\"width: 38px;\"><strong>Type</strong></td>\n<td style=\"width: 435px;\"><strong>Features</strong></td>\n<td style=\"width: 310px;\"><strong>Management</strong></td>\n</tr>\n<tr>\n<td style=\"width: 38px;\">I</td>\n<td style=\"width: 435px;\">Avulsion fracture of the tip of the odontoid</td>\n<td style=\"width: 310px;\">\n<ul>\n<li>Rigid collar</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 38px;\">II</td>\n<td style=\"width: 435px;\">Fracture at the junction of the odontoid process and the body of the axis</td>\n<td style=\"width: 310px;\">\n<ul>\n<li>Young patient and stable fracture: traction followed by a collar or halo vest</li>\n<li>Unstable fractures: anterior odontoid screw, or C1&ndash;C2 fusion</li>\n</ul>\n</td>\n</tr>\n<tr>\n<td style=\"width: 38px;\">III</td>\n<td style=\"width: 435px;\">Fracture through the body of the axis</td>\n<td style=\"width: 310px;\">\n<ul>\n<li>Undisplaced fractures: halo vest (8-12 wks)</li>\n<li>Displaced fractures: halo traction followed by halo vest (8-12 weeks)</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/accbb1e6ef98480e85639a48da754a75x1280x2238.JPEG"
    ]
  },
  {
    "text": "A patient in the ER was found to have subaxial cervical spine fractures. Which of the following statements about the management of his condition is false?",
    "choices": [
      {
        "id": 1,
        "text": "Cervical collar is preferred for single-column injuries"
      },
      {
        "id": 2,
        "text": "Management is based on Anderson and D\u2019Alonzo classification"
      },
      {
        "id": 3,
        "text": "Cervical collar can be used in some two-column injuries"
      },
      {
        "id": 4,
        "text": "Operative treatment is preferred for three-column injuries"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><strong>Anderson and D&rsquo;Alonzo classification</strong> is used to determine the management of&nbsp;<strong>C2 odontoid</strong> process <strong>fracture</strong>, and not in subaxial cervical spine fractures.&nbsp;</p>\n<p class=\"p1\">For&nbsp;<strong>subaxial (C3-C7)</strong> cervical injuries, the classification systems used include&nbsp;<strong>Ferguson and Allen classification</strong>&nbsp;and the&nbsp;<strong>subaxial cervical spine injury classification (SLIC)</strong>.&nbsp;</p>\n<p class=\"p1\"><strong>Management </strong>of subaxial (C3-C7) injuries:<strong>&nbsp;</strong>Individual injuries are evaluated based on the <strong>three-column biomechanical model&nbsp;</strong>and treatment is planned accordingly.</p>\n<ul>\n<li class=\"p1\"><strong>Single-column </strong>injuries without neurologic deficit are managed with&nbsp;<strong>immobilization </strong>using a <strong>cervical collar</strong>.</li>\n<li class=\"p1\"><strong>Two-column</strong> injuries are considered <strong>unstable</strong> and&nbsp;tend to be <strong>treated operatively</strong>, but <strong>some</strong> of these injuries can be treated with <strong>immobilization </strong>using a<strong> cervical collar</strong>. When neurologic deficits are present, operative treatment is recommended.&nbsp;</li>\n<li class=\"p1\"><strong>Three-column </strong>injuries are considered unstable even when there is no neurologic deficit&nbsp;and usually require<strong> operative stabilization</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the Denis classification, which of the following is not included in the middle column of the spine?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior part of the vertebral body"
      },
      {
        "id": 2,
        "text": "Posterior part of the vertebral disc"
      },
      {
        "id": 3,
        "text": "Posterior part of the pedicles"
      },
      {
        "id": 4,
        "text": "Posterior longitudinal ligament"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\">The Denis classification is <strong>used to</strong> describe spinal injuries and <strong>classify</strong> them as <strong>stable or unstable</strong>. As per this system, any injury <strong>involving 2 columns</strong> or more is classified as <strong>unstable</strong>. Unstable injuries require <strong>surgical fixation.</strong></p>\n<p class=\"p1\">The current<strong> AO/ASIF classification</strong> that replaced&nbsp;Denis classification reverts back to the previously prevalent&nbsp;<strong>two-column theory.&nbsp;</strong>It divides the spine as follows:</p>\n<ul>\n<li class=\"p1\"><strong>Anterior column</strong>: vertebral body and disc</li>\n<li class=\"p1\"><strong>Posterior column</strong>: pedicles, laminae, facets and posterior ligamentous complex</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fd745a5d1bc144ef8af6615d06df7f92x1280x1799.JPEG"
    ]
  },
  {
    "text": "Which of the following is known as clay-shoveler\u2019s fracture?",
    "choices": [
      {
        "id": 1,
        "text": "Vertical compression injury of cervical spine"
      },
      {
        "id": 2,
        "text": "C-spine fracture with C6-C7 disc disruption"
      },
      {
        "id": 3,
        "text": "Avulsion fracture of C7 spinous process"
      },
      {
        "id": 4,
        "text": "Horizontal fracture in the cervical spine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\"><strong>Clay-shoveler&rsquo;s fracture</strong> refers to <strong>avulsion fracture</strong> of the <strong>C7 spinous process</strong>.</p>\n<p class=\"p1\">It occurs due to the <strong>powerful contraction </strong>of the<strong>&nbsp;back muscles</strong> inserted into the spinous process. The injury is painful but harmless. <strong>No treatment</strong> is usually <strong>required</strong>. As soon as the pain subsides, neck exercises are encouraged.</p>\n<p class=\"p1\">The X-ray below shows a clay-shoveler's fracture.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2cbdd6dfa46d4602b7868a06a8381901x720x840.JPEG"
    ]
  },
  {
    "text": "A young man who got injured in the neck while diving is brought to the emergency. Which of the following classifications systems is unlikely to be used to classify his injury?",
    "choices": [
      {
        "id": 1,
        "text": "AO-Magerl classi\ufb01cation"
      },
      {
        "id": 2,
        "text": "Allen and Ferguson classification"
      },
      {
        "id": 3,
        "text": "Anderson and D\u2019Alonzo classification"
      },
      {
        "id": 4,
        "text": "Levine and Edwards classification"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given scenario, the patient has suffered a cervical spinal injury. The <strong>AO-Magerl classification </strong>is used for the classification of <strong>thoracolumbar spinal injuries</strong>.</p>\n<p>In AO-Magerl classification, thoracolumbar injuries are classified into <strong>3 types</strong> based on the <strong>primary force</strong> that <strong>caused injury</strong>:</p>\n<ul>\n<li>Type A (compression force)</li>\n<li>Type B (distraction force)</li>\n<li>Type C (torsional/rotational force)</li>\n</ul>\n<p>The various <strong>classification systems</strong> used to classify <strong>cervical spinal injuries</strong> include:</p>\n<ul>\n<li>The <strong>Anderson and D'Alonzo</strong> classification is used for&nbsp;<strong>odontoid fracture </strong>in the C2 vertebra.</li>\n<li>The <strong>Levine and Edwards </strong>classification is used for <strong>Hangman's fracture</strong> (traumatic spondylolisthesis of C2 over C3).&nbsp;</li>\n<li>The <strong>Allen and Ferguson</strong> classification is used for <strong>subaxial cervical spine </strong>(C3-C7) injuries.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to you with severe pain in his lower back after jumping from a height to the ground level. His X-ray is given below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Stable burst fracture"
      },
      {
        "id": 2,
        "text": "Unstable burst fracture"
      },
      {
        "id": 3,
        "text": "Compression fracture"
      },
      {
        "id": 4,
        "text": "Chance fracture"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given patient has a<strong>&nbsp;compression fracture</strong> of the <strong>L4</strong> vertebra. It can be diagnosed radiographically by the <strong>wedge-shape</strong> and <strong>loss of anterior height</strong> compared to the posterior height of the affected vertebra.&nbsp;</p>\n<p>Compression fractures&nbsp;occur due to <strong>axial loading</strong> of the vertebra.&nbsp;They result from <strong>severe spinal flexion</strong>. They can also occur with minimal trauma in <strong>osteoporotic</strong> individuals or as <strong>pathological fractures</strong> in other conditions.</p>\n<p>They are characterized by&nbsp;loss of vertebral height anteriorly, with&nbsp;no loss of posterior vertebral height&nbsp;and&nbsp;no posterior ligamentous or bony injury. In most cases, there is <strong>no spinal cord damage</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/52ca0d1f607b40f4bbff65ea95c1e306.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d917b48c4af94cf6a06d073085ed4917x1280x1685.JPEG"
    ]
  },
  {
    "text": "A 30-year-old male patient accidentally fell from a ladder and sustained injuries to his back. His spine X-ray reveals a stable anterior wedge compression fracture of T10 vertebra. He has no neurological deficit. What would be the preferred management approach in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Early ORIF and bone fusion"
      },
      {
        "id": 2,
        "text": "Anterior decompression"
      },
      {
        "id": 3,
        "text": "External spine support"
      },
      {
        "id": 4,
        "text": "IV Dexamethasone"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A<strong> stable thoracolumbar</strong> anterior wedge&nbsp;<strong>compression fracture</strong> without any neurological deficit is preferably treated with <strong>external spine support</strong>, bed rest, and pain killers.</p>\n<p class=\"p1\">Management of stable vertebral compression fracture is done by application of&nbsp;<strong>thoracic lumbar sacral orthosis (TLSO) for 12 weeks</strong> with <strong>pain management</strong>. This is followed by a gradual return to activity.</p>\n<p class=\"p1\">Some injuries that are predisposed to further <strong>collapse</strong> and <strong>progressive deformity</strong> despite the TLSO includes:&nbsp;</p>\n<ul class=\"ul1\">\n<li class=\"li1\">Injuries that have &gt; 40-50% anterior height loss</li>\n<li class=\"li1\">Injuries with &gt; 25 degrees of focal kyphosis</li>\n<li class=\"li1\">Disruption of the posterior ligamentous complex</li>\n<li class=\"li1\">Signs of instability seen on imaging studies&nbsp;&nbsp;</li>\n</ul>\n<p>These injuries need to be closely monitored or surgically fixed (<strong>Posterior fixation</strong> is&nbsp;<strong>preferred</strong>).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 26-year-old patient sustained injuries when he fell off while placing lights for Christmas on the second floor. The CT scan of his lumbosacral spine is given below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Holdsworth fracture"
      },
      {
        "id": 2,
        "text": "Chance fracture"
      },
      {
        "id": 3,
        "text": "Compression fracture"
      },
      {
        "id": 4,
        "text": "Burst fracture"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given patient has a <strong>burst fracture</strong> of <strong>L4 vertebra</strong>.</p>\n<p>The given lateral view CT image shows that the<strong> L4 vertebra</strong> has <strong>exploded</strong>. The <strong>posterior border</strong> of L4 has lost its concavity and has become <strong>convex</strong>. There is <strong>posterior displacement</strong> of the bone <strong>into</strong> the <strong>spinal canal</strong>.&nbsp;This is diagnostic of&nbsp;<strong>burst fracture</strong> of the L4 vertebra <strong>with retropulsion</strong>.&nbsp;</p>\n<p>Burst fracture results from <strong>severe axial compression</strong> that explodes the vertebral body.</p>\n<p><strong>Radiological findings:&nbsp;</strong></p>\n<ul>\n<li><strong>AP view X-rays: </strong>Spreading of the vertebral body with an increase of the interpedicular distance may be seen.</li>\n<li><strong>Lateral view X-rays: </strong>Posterior displacement of bone into the spinal canal (retropulsion) can be seen at the posterosuperior border of the vertebral body. The normal concavity of the posterior vertebral body becomes convex in retropulsion.&nbsp;</li>\n</ul>\n<p><strong>Management of burst fractures:</strong></p>\n<ul>\n<li class=\"p1\"><strong>Stable </strong>burst fracture:\n<ul>\n<li class=\"p1\">Minimal anterior wedging and posterior ligament complex intact</li>\n<li class=\"p1\">No neurological deficits</li>\n<li class=\"p1\">Conservatively managed&nbsp;with <strong>bed rest</strong> until acute symptoms settle, followed by a&nbsp;<strong>thoracolumbar brace (TLSO) or body cast</strong> for about 12 weeks</li>\n</ul>\n</li>\n<li class=\"p1\"><strong>Unstable </strong>burst fracture:\n<ul>\n<li class=\"p1\">Cases of&nbsp;neurological injury</li>\n<li class=\"p1\">Disruption of the posterior ligamentous complex (PLC)</li>\n<li class=\"p1\">More than 50% canal compromise on CT</li>\n<li class=\"p1\"><strong>Operative management</strong> done</li>\n<li class=\"p1\"><strong>Posterior pedicle screw fixation</strong> is the standard treatment for PLC disruption</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/809c7f2eeeef40559454d092a0888c94.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The X-ray of a patient with a spinal fracture following a road traffic accident is given below. Which of the following statements about the injury seen is false?",
    "choices": [
      {
        "id": 1,
        "text": "It is an inherently stable horizontal fracture"
      },
      {
        "id": 2,
        "text": "It is horizontal avulsion fracture of vertebral bodies"
      },
      {
        "id": 3,
        "text": "It is seen in people who wear a seat belt without shoulder harness"
      },
      {
        "id": 4,
        "text": "Associated abdominal injuries are seen in 50% of these injuries"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\"><strong>X-rays</strong>&nbsp;may show a&nbsp;<strong>horizontal fracture</strong> with the split running&nbsp;through the vertebra. It may involve the spinous process, the transverse processes, pedicles and the vertebral body. There may be opening up of the disc space posteriorly.&nbsp;</p>\n<p class=\"p1\">Most Chance fractures can be <strong>managed conservatively</strong> with bed rest and bracing. If <strong>posterior fixation</strong> is done, it will&nbsp;allow early mobilization. <strong>Ligamentous Chance</strong> fractures require posterior <strong>instrumented fusion.</strong>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b4804e3819194a0f992ad44bce310981.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/59851172b3db41bea149e72a7bcd130ax1200x1388.JPEG"
    ]
  },
  {
    "text": "A patient with a pathological fracture of the L4 vertebra is posted for a vertebroplasty. What does this procedure involve?",
    "choices": [
      {
        "id": 1,
        "text": "Strut grafting and internal fixation"
      },
      {
        "id": 2,
        "text": "Insertion of an anterior plate system to stabilize the vertebra"
      },
      {
        "id": 3,
        "text": "Injecting liquid bone cement into vertebra under high pressure"
      },
      {
        "id": 4,
        "text": "Restoring the height of a collapsed vertebral body by inflating a balloon"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Vertebroplasty</strong> is a procedure of <strong>injecting liquid bone cement</strong> into the vertebral body.</p>\n<p>In vertebroplasty, polymethyl methacrylate (<strong>PMMA</strong>) is <strong>injected percutaneously</strong> into the vertebra <strong>through the pedicle</strong> to maintain the vertebral&nbsp;height. In <strong>kyphoplasty</strong>, a <strong>balloon</strong> is used to <strong>expand a compression fracture</strong> to regain height before the PMMA is injected.&nbsp;</p>\n<p><strong>Indications&nbsp;</strong>for these 2 minimally&nbsp;invasive procedures include:</p>\n<ul>\n<li><strong>Pathological vertebral body fractures</strong> caused due to osteoporosis, metastatic carcinoma, or multiple myeloma.</li>\n<li>In some cases of <strong>stable compression fractures</strong>&nbsp;with no neurological deficits, to manage <strong>persistent pain</strong> due to the collapse.&nbsp;</li>\n<li>Kyphoplasty has been used to <strong>correct sagittal deformity</strong> and prevent kyphosis</li>\n</ul>\n<p><strong>Risks&nbsp;</strong>of these procedures include the possibility of <strong>disruption of</strong> the <strong>posterior cortex</strong> and cement material leaking out into the spinal canal and causing <strong>neurological deficits</strong>. Therefore, these procedures must be done after careful consideration.&nbsp;&nbsp;</p>\n<p class=\"p1\">The below plain X-ray shows the spine of a person who has undergone vertebroplasty.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/facfc245942c4b60bd5feff06183bb87x1280x1784.JPEG"
    ]
  }
];
        let quizName = '12 Injuries Of Spine';
        let hierarchy = ["Marrow", "qBank", "Orthopedics"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>