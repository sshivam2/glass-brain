<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>29 Carditis And Cardiac Tumors - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">16</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Which viral organism is most commonly associated with myocarditis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Influenza"
      },
      {
        "id": 2,
        "text": "Human immunodeficiency virus (HIV)"
      },
      {
        "id": 3,
        "text": "Coxsackievirus"
      },
      {
        "id": 4,
        "text": "Epstein-Barr virus (EBV)"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C) Coxsackievirus</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li>Coxsackievirus is a common cause of <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> myocarditis, especially in young adults.</li>\n\t<li>Other virus includes the Herpes virus and Trichinella Spirali (parasitic).</li>\n\t<li>Coxsackievirus is of 2 types: Coxsackie A and Coxsackie B\n\t<ul>\n\t\t<li>Both are responsible for causing <strong>Hand, foot, and mouth disease (HFMD)</strong> in children.</li>\n\t\t<li>Coxsackie A is also associated with <strong>acute hemorrhagic conjunctivitis</strong>.</li>\n\t</ul>\n\t</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/KDVIY6WcWdQt4mIUNZzw1749653414.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/bwkG5IawaDnBXp5YTmBA1749653456.mp3"
  },
  {
    "text": "<p>Which of the following statements best describes the vegetation found in Infective Endocarditis compared to other conditions?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Vegetations in Infective Endocarditis are typically small, friable, sterile and composed of fibrin, and platelets."
      },
      {
        "id": 2,
        "text": "Vegetations in Infective Endocarditis are large, verrucous, and primarily consist of fibrin, inflammatory cells, and microorganisms."
      },
      {
        "id": 3,
        "text": "Nonbacterial Thrombotic Endocarditis (NBTE) commonly presents with small, non-sterile vegetations composed mainly of fibrin and platelets."
      },
      {
        "id": 4,
        "text": "Libman-Sacks Endocarditis is characterised by tiny, marantic vegetations consisting of fibrin and micro-organisms."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer</strong>: <strong>B) Vegetations in Infective <span class=\"customMeta\" data-dictid=\"33812b7bb0169277718707b5473b45\">Endocarditis</span> are large, verrucous, and primarily consist of fibrin, <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> cells, and microorganisms.</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>Vegetations of Infective <span class=\"customMeta\" data-dictid=\"33812b7bb0169277718707b5473b45\">endocarditis</span> are very large and bulky, which sometimes fall off and <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> <span class=\"customMeta\" data-dictid=\"586c1eff6e16927771872ba5871abe\">emboli</span> via blood vessels to different parts of body. They comprises of <span class=\"customMeta\" data-dictid=\"18c2380be716927772020c9b2863de\">fibrin</span> and <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> cells with microorganisms within.</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Rheumatic heart disease</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Infective Endocarditis\u00a0</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Non-bacterial Thrombotic Endocarditis\u00a0(Option C)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Libman-Sacks Endocarditis\u00a0</strong> <strong>(Option D)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Small and warty</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Large and bulky\u00a0<strong>(Option B) (Option A ruled out)</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Small and friable\u00a0</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Medium sized</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Along lines of closure</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Upper surface of cusps</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Along lines of closure</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Both surface of valves (M/C-lower surface)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Sterile</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Non-sterile (Infected)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Sterile</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Sterile</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Emboli -</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Emboli +/-</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Emboli +++</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Emboli -</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"NA\" data-hash=\"\" data-license=\"NA\" data-source=\"NA\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/content/xEixgnv1KJx3r4pysw7X1736865637.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/xEixgnv1KJx3r4pysw7X1736865637.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/lq1uXrVAEV7M12ZMOuwC1749653518.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Su2GQLxKlrmeugOPg2WU1749653575.mp3"
  },
  {
    "text": "<p>Which of the following findings is most likely present in the myocardial biopsy of a Rheumatic Heart disease patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Fibrous thickening of the endocardium"
      },
      {
        "id": 2,
        "text": "Areas of lymphocytic infiltrates, Anitschkow cells and fibroblasts in all layers of the heart"
      },
      {
        "id": 3,
        "text": "Calcific nodules on the valve leaflets"
      },
      {
        "id": 4,
        "text": "Disruption of the endothelial lining of blood vessels"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer:</strong> <strong>B) Areas of lymphocytic infiltrates, Anitschkow cells and fibroblasts in all layers of the heart</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n\t<li>Areas of lymphocytic infiltrates, plump macrophages and fibroblasts in all layers of the heart are the characteristic features of Rheumatic Heart Disease.</li>\n\t<li><strong>Aschoff bodies</strong>, characterized by areas of lymphocytic infiltrates, plump macrophages <strong>(Anitschkow cells)</strong>, and fibroblasts, are commonly found in all layers of the heart (maximum in myocardium) of patients with Rheumatic Heart Disease.</li>\n\t<li><strong>Anitschkow cells: </strong>Appearance of nuclei:\n\t<ul>\n\t\t<li><strong>Caterpillar <span class=\"customMeta\" data-dictid=\"77399c6ee0169277718492fb8fd58f\">chromatin</span> pattern:\u00a0</strong>Zig-zag nucleus</li>\n\t\t<li><strong>\"Owl eye\" appearance:\u00a0</strong>If <span class=\"customMeta\" data-dictid=\"ff628904401692777193c8a9f9159e\">nucleus</span> is cut from center and is appearing round.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Rheumatic_heart_disease_-_3b_-_very_high_mag.jpg\" data-tags=\"\" height=\"2158\" src=\"https://image.prepladder.com/content/2hfnpgVLSKpRL2gVDXXL1736866029.png\" width=\"4168\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/2hfnpgVLSKpRL2gVDXXL1736866029.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/lfCd7qjxRWe8VwFo4l1n1749653638.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/BTSfW32l9CvV9cbheGW61749653690.mp3"
  },
  {
    "text": "<p>Which of the following is not a major criterion according to Jones Criteria for Rheumatic Heart Disease?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Polyarthritis"
      },
      {
        "id": 2,
        "text": "Carditis"
      },
      {
        "id": 3,
        "text": "Subcutaneous nodules"
      },
      {
        "id": 4,
        "text": "Fever"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer<u>:</u></strong>\u00a0<strong>D) Fever</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<ul>\n\t<li><strong>Jones Criteria: </strong></li>\n</ul>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Major Criteria</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Minor Criteria</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Carditis (Pancarditis)\u00a0<strong>(Option B)</strong></li>\n\t\t\t\t<li>Polyarthritis <strong>(Option A)</strong></li>\n\t\t\t\t<li>Sydenham\u2019s <span class=\"customMeta\" data-dictid=\"46ce506e9d1692777184f7a4a276ad\">chorea</span> (involuntary movements)</li>\n\t\t\t\t<li>Subcutaneous nodules (usually painless)\u00a0<strong>(Option C)</strong></li>\n\t\t\t\t<li>Erythema marginatum (skin rash)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Clinical </strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Fever</li>\n\t\t\t\t<li>Polyarthralgia</li>\n\t\t\t\t<li>Prolonged PR interval</li>\n\t\t\t</ul>\n\n\t\t\t<p><strong>Lab</strong></p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Increased ESR</li>\n\t\t\t\t<li>Increased CRP</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>The presence of either two major criteria or one major <span class=\"customMeta\" data-dictid=\"9167b944ea169277718582367e0915\">criterion</span> plus two minor criteria, along with evidence of a preceding streptococcal infection, supports the diagnosis of <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> rheumatic fever according to the Jones Criteria.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/rkg00dvsnF6FDRfiw8Cv1749653796.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/QHgra99IuWmeldalalRG1749653840.mp3"
  },
  {
    "text": "<p>A 45-year-old male with a history of intravenous drug abuse, presenting with fever, malaise, and a new-onset heart murmur, reports recent injection site infections. On examination, there are multiple healing scars on the upper extremities, and a grade III/VI holosystolic murmur is auscultated at the left sternal border. His temperature is 38.5\u00b0C, heart rate is 110 bpm. Which criterion amongst the following is a major criterion for the condition diagnosed?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Fever of unknown origin lasting more than 7 days"
      },
      {
        "id": 2,
        "text": "IV drug abuse"
      },
      {
        "id": 3,
        "text": "Predisposing cardiac condition such as a prosthetic heart valve"
      },
      {
        "id": 4,
        "text": "Positive blood cultures for typical microorganisms persistently isolated from blood cultures"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer: D) Positive blood cultures for typical microorganisms persistently isolated from blood cultures</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The diagnosis in a 45-year-old male with a history of <span class=\"customMeta\" data-dictid=\"27b78a96071692777190f4dfb93430\">intravenous</span> drug abuse, presenting with fever, malaise, and a new-onset <span class=\"customMeta\" data-dictid=\"882af9bf8116927771898d62bf73d6\">heart murmur</span> is <span class=\"customMeta\" data-dictid=\"802328b229169277719000601489eb\">Infective</span> Endocarditis.</li>\n\t<li>The Duke\u2019s Criteria for diagnosing <span class=\"customMeta\" data-dictid=\"802328b229169277719000601489eb\">Infective</span> <span class=\"customMeta\" data-dictid=\"33812b7bb0169277718707b5473b45\">Endocarditis</span> include major criteria such as positive blood cultures for typical microorganisms persistently isolated from blood cultures (e.g., <span class=\"customMeta\" data-dictid=\"9562e26acc16927771995a2028dd05\">Streptococcus</span> viridans, <span class=\"customMeta\" data-dictid=\"71c203268816927771994a1fffd645\">Staphylococcus</span> aureus), echocardiographic evidence of endocardial involvement (vegetations or abscesses), and the presence of a new valvular regurgitation.</li>\n\t<li>Additionally, minor criteria include fever, <span class=\"customMeta\" data-dictid=\"80c0cb2a5f1692777196ba45847553\">predisposing</span> <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> conditions, <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> phenomena, <span class=\"customMeta\" data-dictid=\"6eec2212b91692777189b54f3d9066\">immunological</span> phenomena, and microbiological evidence not meeting major criteria.</li>\n</ul>\n\n<p><strong>Duke\u2019s Criteria: </strong></p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:624px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:bottom\">\n\t\t\t<p style=\"text-align:center\"><strong>Major Criteria</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:bottom\">\n\t\t\t<p style=\"text-align:center\"><strong>Minor Criteria</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-color:#0d0d0d; border-style:solid; border-width:1px; text-align:center; vertical-align:middle\">Positive blood cultures for typical microorganisms persistently isolated from blood cultures <strong>(2 cultures > 12 <span class=\"customMeta\" data-dictid=\"136c4bdd441692777189c5b2e976a0\">hrs</span> apart, single positive culture for Coxiella)</strong></td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Predisposing <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> conditions such as a <span class=\"customMeta\" data-dictid=\"c936e2cd131692777196b1d877f678\">prosthetic</span> <span class=\"customMeta\" data-dictid=\"efba33a3fd1692777189906f884236\">heart valve</span> <strong>(Option C),</strong> IV drug abuse<strong> (Option B)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Evidence of endocardial involvement on <span class=\"customMeta\" data-dictid=\"32ccb4a6911692777186e785958dbf\">echocardiography</span> (vegetations or abscesses)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Fever (\u226538.0\u00b0C)\u00a0<strong>(Option A)</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">New valvular regurgitation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Vascular phenomena (e.g., emboli, Janeway lesions)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">\u00a0</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Immunological phenomena (e.g., glomerulonephritis, Osler's nodes)</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">\u00a0</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #0d0d0d; border-left:1px solid #0d0d0d; border-right:1px solid #0d0d0d; border-top:1px solid #0d0d0d; vertical-align:middle\">\n\t\t\t<p style=\"text-align:center\">Microbiological evidence not meeting major criteria (e.g., positive <span class=\"customMeta\" data-dictid=\"590c4f61381692777183624596f6ed\">blood culture</span> but not persistently positive)</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>For diagnosis, either of the following should be present:</strong></p>\n\n<ul>\n\t<li>2 major criteria OR</li>\n\t<li>1 major criteria and 3 minor criteria OR</li>\n\t<li>5 minor criteria</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>Which of the following genes is most commonly associated with inherited forms of dilated cardiomyopathy?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "BRCA1 gene"
      },
      {
        "id": 2,
        "text": "TTN gene"
      },
      {
        "id": 3,
        "text": "CFTR gene"
      },
      {
        "id": 4,
        "text": "SCN5A gene"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) TTN gene</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>TTN gene mutation, which is specific to inherited dilated <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> is the correct option.</li>\n\t<li>TTN gene\u00a0encodes for\u00a0titin protein which is the largest protein of human body with over 30000 <span class=\"customMeta\" data-dictid=\"543f207eb51692777181723491a358\">amino</span> acids.</li>\n\t<li>Defect in <span class=\"customMeta\" data-dictid=\"4a6e75bb9416927772002b5755bf5a\">titin</span> protein can lead to dilated cardiomyopathy.</li>\n\t<li>Microscopically it shows a classical <strong>Ninja star <span class=\"customMeta\" data-dictid=\"ff628904401692777193c8a9f9159e\">nucleus</span> appearance</strong>.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"R MITRUT ,AE STEPAN , D PIRICI \" data-hash=\"\" data-license=\"NA\" data-source=\"https://pmc.ncbi.nlm.nih.gov/articles/PMC6311227/\" data-tags=\"\" height=\"848\" src=\"https://image.prepladder.com/content/vWRSLmbUMv3vuiXPXXix1736866168.png\" width=\"1268\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/vWRSLmbUMv3vuiXPXXix1736866168.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/iJVxyTfBVf5KC8CUZNjM1749653898.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/tY4YlioyovPLDeSsATcC1749653940.mp3"
  },
  {
    "text": "<p>A 55-year-old woman presents to the emergency department with sudden-onset chest pain and shortness of breath following the news of a family member's serious illness. An electrocardiogram shows ST-segment elevation in the anterior leads, and cardiac biomarkers are elevated. Coronary angiography reveals no significant coronary artery disease. Which of the following is the most likely underlying mechanism in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Excessive release of catecholamines"
      },
      {
        "id": 2,
        "text": "Viral myocarditis"
      },
      {
        "id": 3,
        "text": "Autoimmune response"
      },
      {
        "id": 4,
        "text": "Genetic predisposition"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: </strong><strong>A) Excessive release of catecholamines.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation\u00a0</strong>:</p>\n\n<ul>\n\t<li>Excessive release of catecholamines is the most likely underlying mechanism for the development of Takotsubo <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> in this patient.</li>\n\t<li>Emotional or physical stress, such as the news of a family member's serious illness, can trigger a <span class=\"customMeta\" data-dictid=\"c06581813e16927771990d334d4f72\">surge</span> of catecholamines (e.g., <span class=\"customMeta\" data-dictid=\"35b6a8aeb416927771805fcc2e7dfb\">adrenaline</span> and noradrenaline).</li>\n\t<li>In Takotsubo <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> (aka Broken Heart Syndrome), excessive catecholamines act on left ventricle\u00a0(LV), leading to left <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> dilatation.</li>\n\t<li>Dilated left <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> cannot contract properly, leading to a hampered blood supply to the body.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/IHtnD5BHnbzIlqIYY4GB1749654035.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/POxIlCgTKhh8BH7r8WGW1749654111.mp3"
  },
  {
    "text": "<p>Which of the following conditions is characterised by transient left ventricular dysfunction, often triggered by emotional or physical stress, presenting with symptoms mimicking acute coronary syndrome but with normal coronary arteries on angiography?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Acute Myocardial Infarction (AMI)"
      },
      {
        "id": 2,
        "text": "Takotsubo Cardiomyopathy (TCM)"
      },
      {
        "id": 3,
        "text": "Hypertrophic Cardiomyopathy (HCM)"
      },
      {
        "id": 4,
        "text": "Dilated Cardiomyopathy (DCM)"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer: B) Takotsubo <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">Cardiomyopathy</span> (TCM)</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Takotsubo <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> also known as BROKEN HEART SYNDROME, is a dilated <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> following extreme psychological or emotional stress.</li>\n\t<li>This\u00a0stress leads to excessive release of catecholamines in body.</li>\n\t<li>Catecholamines can act on all the chambers of heart but maximum receptors for catecholamines are present in left ventricle.</li>\n\t<li>The left <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> is dilated with <span class=\"customMeta\" data-dictid=\"c6223a27fb169277718147405290e1\">apical</span> <span class=\"customMeta\" data-dictid=\"0d20ef4049169277718261e9075cbc\">ballooning</span> resembling a JAPANESE POT named TAKOTSUBO used for catching Octopus.</li>\n\t<li>Because LV is dilated and blood is not reaching rest of the body, the patient\u00a0presents with symptoms resembling <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"bc8bc758371692777185eff2ccabb7\">coronary</span> syndrome such as chest pain.</li>\n\t<li>It\u00a0mimics <span class=\"customMeta\" data-dictid=\"881eca638f16927771889ba405ef07\">heart attack</span> or MI but there is no <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> found on <span class=\"customMeta\" data-dictid=\"bc8bc758371692777185eff2ccabb7\">coronary</span> <span class=\"customMeta\" data-dictid=\"c67cc1bcd3169277718150b3c9d6ab\">angiography</span> as this is not a <span class=\"customMeta\" data-dictid=\"bc8bc758371692777185eff2ccabb7\">coronary</span> <span class=\"customMeta\" data-dictid=\"a66cd3adaa1692777182e77cb23021\">artery</span> disease.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/PZtS3d57FsmGoUTgshis1749654198.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/hfSLU7mmAY9ovdzyCmlK1749654280.mp3"
  },
  {
    "text": "<p>A 22-year-old man presents to his cardiologist with complaints of exertional chest pain and shortness of breath. His family history is significant for the sudden cardiac death of his brother at the age of 28. Physical examination reveals a harsh systolic murmur and irregular heart sounds. Which of the following genes is most commonly involved in this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Titin"
      },
      {
        "id": 2,
        "text": "Beta-myosin heavy chain"
      },
      {
        "id": 3,
        "text": "Troponin T"
      },
      {
        "id": 4,
        "text": "Alpha-tropomyosin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer: B) Beta-myosin heavy chain</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Hypertrophic <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> (HCM):</strong></p>\n\n<ul>\n\t<li>HCM is an autosomal dominant condition that occurs due to a <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> in the\u00a0<strong>beta-myosin heavy chain</strong>.</li>\n\t<li>In HCM, <span class=\"customMeta\" data-dictid=\"3baac9012a1692777189cb4dc70c04\">hypertrophy</span> can occur in any part of heart but <span class=\"customMeta\" data-dictid=\"08f609b83b169277719031128ca765\">ir</span> occurs maximally in the <span class=\"customMeta\" data-dictid=\"769fa5be3616927771906f8ae8b053\">interventricular</span> septum.</li>\n\t<li>Due to <span class=\"customMeta\" data-dictid=\"3baac9012a1692777189cb4dc70c04\">hypertrophy</span> of <span class=\"customMeta\" data-dictid=\"769fa5be3616927771906f8ae8b053\">interventricular</span> septum, left <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> is narrowed and starts looking like a <strong>banana-shaped cavity.</strong>\n\t<ul>\n\t\t<li>Left <span class=\"customMeta\" data-dictid=\"707de303e516927772011cb80f4028\">ventricle</span> is responsible for pumping blood to the body which will be affected due to this narrowing.</li>\n\t\t<li>So in conditions like heavy physical activity, where body wants more blood, it can lead to sudden collapse and sometimes death of patient.</li>\n\t</ul>\n\t</li>\n\t<li>Under <span class=\"customMeta\" data-dictid=\"79067cb33316927771926965c3c0b5\">microscopic</span> examination during autopsy, <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> muscle fibres shows the classical\u00a0<strong>halter-salter appearance </strong>(haphazardly arranged\u00a0cardiac muscle fibres)</li>\n</ul>\n\n<p><strong>Titin (Option A)</strong>: Titin mutations are seen in dilated cardiomyopathy.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/9X37RMhgs9gHSXJ0srP81750247134.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/fsIl46fLbf4FQIsWBYCD1750247313.mp3"
  },
  {
    "text": "<p>A 19-year-old boy collapsed during a football game and was brought dead to the hospital. Suspecting a heart condition, a biopsy was done, which showed asymmetric septal hypertrophy. Which of the following histological findings will not be seen in this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Massive myocyte hypertrophy"
      },
      {
        "id": 2,
        "text": "Myofibre disarray"
      },
      {
        "id": 3,
        "text": "Fibrotic narrowing of small intramural arteries"
      },
      {
        "id": 4,
        "text": "Ninja star nuclei"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer:</strong> <strong>D) Ninja star nuclei</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The clinical presentation of a young male who collapsed and died (sudden <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> death) with a <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> showing asymmetric septal <span class=\"customMeta\" data-dictid=\"3baac9012a1692777189cb4dc70c04\">hypertrophy</span> is suggestive of hypertrophic cardiomyopathy.</li>\n\t<li>Histology of HCM includes:\n\t<ul>\n\t\t<li>Myofibre Hypertrophy\u00a0<strong>(Option A)</strong></li>\n\t\t<li>Myofibre Disarray (Halter-salter appearance)\u00a0<strong>(Option B)</strong></li>\n\t\t<li>Fibrotic narrowing of <span class=\"customMeta\" data-dictid=\"5a2c3ec4ab1692777190af5b350865\">intramural</span> arteries <strong>(Option C)</strong>.</li>\n\t</ul>\n\t</li>\n\t<li>Ninja star <span class=\"customMeta\" data-dictid=\"e6b47028191692777193eb698e43b6\">nuclei</span> are seen in Dilated Cardiomyopathy.</li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"R MITRUT ,AE STEPAN , D PIRICI \" data-hash=\"\" data-license=\"NA\" data-source=\"https://pmc.ncbi.nlm.nih.gov/articles/PMC6311227/\" data-tags=\"\" height=\"848\" src=\"https://image.prepladder.com/content/JgBx13tiTAxK2rcJqce71736866452.png\" width=\"1268\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p>The images below show the gross and <span class=\"customMeta\" data-dictid=\"1e9c8202241692777189dbac6cc062\">histological</span> features of HCM.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Sheppard, Mary & Van der Wal, Allard & Banner, Jytte & d'Amati, Giulia & Gaspari, Monica & Gouveia, Rosa & di Gioia, Cira & Giordano, Carla & Larsen, Maiken & Lynch, Matthew & Lucena, Joaqu\u00edn & Molina, Pilar & Parsons, Sarah & Su\u00e1rez-Mier, Maria-Paz & Rizzo, Stefania & Suvarna, Simon & Te Rijdt, Wouter P. & Thiene, Gaetano & Vink, Aryan & Basso, Cristina.\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://www.researchgate.net/publication/369144443_Genetically_determined_cardiomyopathies_at_autopsy_the_pivotal_role_of_the_pathologist_in_establishing_the_diagnosis_and_guiding_family_screening\" data-tags=\"\" height=\"1962\" src=\"https://image.prepladder.com/content/MjrKGI37FXGvKoExIN8o1736866537.png\" width=\"4167\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/JgBx13tiTAxK2rcJqce71736866452.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/XWII91vavUKYMtmXOTkI1750247386.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/HmIaMVn0DL3z8etLEvdy1750247452.mp3"
  },
  {
    "text": "<p>Which of the following is not a cause for restrictive cardiomyopathy?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hemochromatosis"
      },
      {
        "id": 2,
        "text": "Amyloidosis"
      },
      {
        "id": 3,
        "text": "Sarcoidosis"
      },
      {
        "id": 4,
        "text": "Alcohol"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer:</strong> <strong>D) Alcohol</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>Alcohol is not a cause of restrictive cardiomyopathy. Rather, it is a cause of <strong>dilated</strong> <strong>cardiomyopathy.</strong></li>\n\t<li>Restrictive <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> occurs when something gets deposited and causes restrictions in the movement of the heart, mainly diastolic dysfunction/restriction.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<table align=\"center\" cellspacing=\"0\" style=\"border-collapse:collapse; width:491px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>CAUSES OF RESTRICTIVE CARDIOMYOPATHY</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Amyloidosis (Pink <span class=\"customMeta\" data-dictid=\"ba366417791692777187229d34e597\">extracellular</span> amyloids deposition)\u00a0<strong>(Option B)</strong></li>\n\t\t\t\t<li>Hemochromatosis (Iron deposition)\u00a0<strong>(Option A)</strong></li>\n\t\t\t\t<li>Radiation</li>\n\t\t\t\t<li>Scleroderma</li>\n\t\t\t\t<li>Tropical <span class=\"customMeta\" data-dictid=\"9ec09a7cfc169277718700e4dcac4e\">endomyocardial</span> fibrosis</li>\n\t\t\t\t<li>Hypereosinophilic syndrome (L\u00f6ffler\u2019s endocarditis)</li>\n\t\t\t\t<li>Sarcoidosis\u00a0<strong>(Option C)</strong></li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/rcrnxVPO91S8P2jHsF5A1750247511.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/CAESy3tFsJDbyubKsnap1750247566.mp3"
  },
  {
    "text": "<p>A 30-year-old woman from a rural area presents with progressively worsening dyspnea on exertion and bilateral lower limb swelling for the past few months. She reports a history of recurrent fevers and weight loss over the past year. Physical examination reveals elevated jugular venous pressure, ascites, and hepatomegaly. Chest X-ray shows an enlarged cardiac silhouette. Echocardiography reveals restrictive filling patterns with apical obliteration and thickened endocardium. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Hypertrophic cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Dilated cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Endomyocardial fibrosis"
      },
      {
        "id": 4,
        "text": "Constrictive pericarditis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C) <span class=\"customMeta\" data-dictid=\"9ec09a7cfc169277718700e4dcac4e\">Endomyocardial</span> fibrosis</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n\t<li>Congestive <span class=\"customMeta\" data-dictid=\"1a5e87d16716927771888f364bce89\">heart failure</span> (dominant right-sided symptoms) and echo findings are highly suggestive of <span class=\"customMeta\" data-dictid=\"9ec09a7cfc169277718700e4dcac4e\">endomyocardial</span> fibrosis, a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of restrictive cardiomyopathy.</li>\n</ul>\n\n<p><strong>Endomyocardial fibrosis:</strong></p>\n\n<ul>\n\t<li>It is principally a disease of children and young adults in Africa and other tropical areas.</li>\n\t<li>It is characterized by <strong>fibrosis of the <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> <span class=\"customMeta\" data-dictid=\"3e75ada4451692777187fae136230b\">endocardium</span> and subendocardium</strong> that extends from the <strong>apex upward</strong>, often eventually involving the <strong>tricuspid</strong> and <strong>mitral</strong> valves.</li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"5d6dfa73b316927772028f3cd60f7f\">fibrous</span> tissue markedly diminishes the volume and compliance of affected chambers, causing a <strong>restrictive functional defect.</strong></li>\n\t<li>Ventricular <span class=\"customMeta\" data-dictid=\"b61dc1c68d1692777193f8a6b8809b\">mural</span> <span class=\"customMeta\" data-dictid=\"fc23eb4c0a16927772003dff4101cd\">thrombi</span> sometimes develop, and indeed much of the endocardial <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">fibrosis</span> may result from <span class=\"customMeta\" data-dictid=\"56c933e0d41692777200b713c46640\">thrombus</span> organization.</li>\n\t<li>Endomyocardial <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">fibrosis</span> is <span class=\"customMeta\" data-dictid=\"8d0fca798b1692777191b6cd41880f\">linked</span> to <strong>nutritional deficiencies</strong> and/or <strong>inflammation related to <span class=\"customMeta\" data-dictid=\"c0433f52ad1692777194c2ffb6fc63\">parasitic</span> infections</strong> (e.g., hypereosinophilia).</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>What is the most likely diagnosis based on the image given below? It is a stained specimen of endomyocardial tissue.</p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Texas PAthologist MSW\" data-hash=\"\" data-license=\"CC BY SA  4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:4_AMY_1_680x512px.tif\" data-tags=\"\" height=\"3684\" src=\"https://image.prepladder.com/content/YlEQ6PvyaXvNpfOCjPeU1736866698.png\" width=\"4167\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "choices": [
      {
        "id": 1,
        "text": "Hypertrophic cardiomyopathy"
      },
      {
        "id": 2,
        "text": "Dilated cardiomyopathy"
      },
      {
        "id": 3,
        "text": "Cardiac amyloidosis"
      },
      {
        "id": 4,
        "text": "Sarcoidosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer:</strong> <strong>C) Cardiac amyloidosis</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The image shows a <span class=\"customMeta\" data-dictid=\"c02ad9ae0f1692777198d76afc93c4\">specimen</span> of <span class=\"customMeta\" data-dictid=\"9ec09a7cfc169277718700e4dcac4e\">endomyocardial</span> tissue.</li>\n\t<li>The image shows <strong>characteristic <span class=\"customMeta\" data-dictid=\"ba366417791692777187229d34e597\">extracellular</span> deposition of <span class=\"customMeta\" data-dictid=\"837f5783cf1692777181d8a586fd8c\">amorphous</span> material</strong> with <strong>apple-green birefringence</strong> under <strong>polarized light</strong> on <strong>Congo red staining</strong>, confirming the diagnosis of Amyloidosis</li>\n\t<li>It is the <strong>most common cause of Restrictive Cardiomyopathy.</strong></li>\n</ul>\n\n<p><strong>Hypertrophic <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> (Option A):</strong> Banana-shaped heart and\u00a0Myofiber disarray are seen</p>\n\n<p><strong>Dilated <span class=\"customMeta\" data-dictid=\"6e6dd7aed216927771831ebdf9703c\">cardiomyopathy</span> (Option B):</strong>\u00a0Ninja-star <span class=\"customMeta\" data-dictid=\"ff628904401692777193c8a9f9159e\">nucleus</span> is seen</p>\n\n<p><strong>Sarcoidosis (Option D):</strong>\u00a0Non-caseating granulomas are seen</p>",
    "question_images": [
      "https://image.prepladder.com/content/YlEQ6PvyaXvNpfOCjPeU1736866698.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/b4k2xw7yR8mZLq1eJbUX1750247655.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/wqoU48zdkWKnyeTh7txK1750247712.mp3"
  },
  {
    "text": "<p>Identify the true statements regarding atrial myxoma.</p>\n\n<p>\u00a0</p>\n\n<p>1) It is the most common primary tumor of the heart in adults.</p>\n\n<p>2) It is a malignant neoplasm.</p>\n\n<p>3) It is associated with mutations in the GNAS1 gene.</p>\n\n<p>4) 90% of these tumors arise from ventricles.</p>\n\n<p>5) Histologically, it contains lepidic cells</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3"
      },
      {
        "id": 2,
        "text": "1,2,3,4,5"
      },
      {
        "id": 3,
        "text": "1,3,4"
      },
      {
        "id": 4,
        "text": "1,3,5"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct answer:</strong> <strong>D) 1,3,5.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Atrial myxoma:</strong></p>\n\n<ul>\n\t<li>The most Common <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">Benign</span> Tumor Of the Heart\u00a0<strong>(Statement 1)</strong></li>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> tumour.</li>\n\t<li>Site- Most Commonly arises from Left Atria.</li>\n\t<li>Gross Appearance- Gelatinous</li>\n\t<li>It is associated with mutations in the GNAS1 gene. <strong>(Statement 3)</strong>\n\t<ul>\n\t\t<li>Also associated with\u00a0McCune-Albright syndrome and\u00a0Carney Complex.</li>\n\t</ul>\n\t</li>\n\t<li>Histologically- <strong>Stellate Or Lepidic Cells</strong> Seen\u00a0<strong>(Statement 5)</strong></li>\n</ul>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Nephron\" data-hash=\"\" data-license=\"CC BY SA  3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Atrial_myxoma_intermed_mag.jpg\" data-tags=\"\" height=\"2957\" src=\"https://image.prepladder.com/content/2P4bbn0LuNnzdoF7IFaT1736866795.png\" width=\"4167\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>\n\n<p style=\"text-align:center\">\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/2P4bbn0LuNnzdoF7IFaT1736866795.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/O4y4yneHH929qHJ5ke4U1750247787.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/qbC3aGgkx7dbu0cVCu1f1750248263.mp3"
  },
  {
    "text": "<p>A 6-month-old infant presents with cyanosis and respiratory distress. Physical examination reveals a murmur and a palpable liver edge. Echocardiography demonstrates multiple intracardiac masses located primarily in the ventricular walls. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Rhabdomyoma"
      },
      {
        "id": 2,
        "text": "Cardiac fibroma"
      },
      {
        "id": 3,
        "text": "Myxoma"
      },
      {
        "id": 4,
        "text": "Metastatic neuroblastoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer:</strong> <strong>A) Rhabdomyoma</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>RHABDOMYOMA</strong></p>\n\n<ul>\n\t<li>Most common <span class=\"customMeta\" data-dictid=\"e1fb96fd2416927771830dfed40e14\">cardiac</span> tumor in adults: Myxoma,\u00a0occuring\u00a0more commonly in left atria.</li>\n\t<li>Rhabdomyoma is the\u00a0most common <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> tumor in children, which is most commonly found in left ventricle.</li>\n\t<li>On histopathology, Myxoma shows\u00a0Lepidic cells and <span class=\"customMeta\" data-dictid=\"2637ab030316927771973526e223dd\">Rhabdomyoma</span> shows <span class=\"customMeta\" data-dictid=\"87bbbfb59516927771992f5372ca87\">spider</span> cells.</li>\n\t<li>Microscopy shows <span class=\"customMeta\" data-dictid=\"87bbbfb59516927771992f5372ca87\">spider</span> cells showing <span class=\"customMeta\" data-dictid=\"869a7f073716927772017c4d29804a\">vacuolated</span> <span class=\"customMeta\" data-dictid=\"728bb228361692777185b98c34534b\">cytoplasm</span> comprised of glycogen. These are positive for PAS Stain.</li>\n\t<li>Rhabdomyoma is associated with <span class=\"customMeta\" data-dictid=\"93b7b2cfd31692777201efc538e5a2\">tuberous</span> sclerosis.\n\t<ul>\n\t\t<li>Tuberous <span class=\"customMeta\" data-dictid=\"dae4dea0581692777198fdef9fa684\">sclerosis</span> is a syndrome which is caused by <strong>TSC gene (TSC1 and TSC2 genes).</strong></li>\n\t\t<li>All hamartomas occur under this syndrome,\u00a0and <span class=\"customMeta\" data-dictid=\"2637ab030316927771973526e223dd\">rhabdomyoma</span> is also considered a hamartoma.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>The image below shows <strong>spider cells.</strong></p>\n\n<div style=\"text-align:center\">\n<figure class=\"caption_element\" style=\"display:inline-block\"><img alt=\"\" data-author=\"Carlos A. Cubides S\" data-hash=\"\" data-license=\"CC BY SA  4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Rabdomioma.jpg\" data-tags=\"\" height=\"3952\" src=\"https://image.prepladder.com/content/n3pea05Qc9Eb8umRjPN71736867059.png\" width=\"4168\" />\n<figcaption>{{caption_text}}</figcaption>\n</figure>\n</div>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/n3pea05Qc9Eb8umRjPN71736867059.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/kIpVXjax0KBttuO0H0yS1750487700.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/MoashJNLa9AN9TXb2gPj1750488202.mp3"
  },
  {
    "text": "<p>A 28-year-old male presents with palpitations and dizziness during a soccer match. He is diagnosed with ARVC (Arrhythmogenic Right Ventricular Cardiomyopathy). Which of the following statements about this condition is true?</p>\n\n<p>Statement 1 - It is an autosomal recessive disorder</p>\n\n<p>Statement 2 - Associated with NAXOS syndrome</p>\n\n<p>Statement 3 - Marked by fatty infiltration and focal fibrosis within the ventricle</p>\n\n<p>Statement 4 - It involves mutation in Plakoglobin</p>",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3"
      },
      {
        "id": 2,
        "text": "1, 3, 4"
      },
      {
        "id": 3,
        "text": "2, 3, 4"
      },
      {
        "id": 4,
        "text": "1, 2, 3,4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) 2, 3, 4</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p><strong>Arrhythmogenic Right <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">Ventricular</span> Cardiomyopathy (ARVC)</strong> is an <strong>autosomal dominant</strong> disorder.<strong> (Statement 1 ruled out)</strong></p>\n\n<ul>\n\t<li>The right <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">ventricular</span> wall is markedly thinned due to <span class=\"customMeta\" data-dictid=\"4d740152f5169277719373f5cf60e6\">myocyte</span> loss, with extensive yellowish <span class=\"customMeta\" data-dictid=\"bc6cd9a9f9169277720261812ea113\">fatty</span> infiltration\u00a0and <span class=\"customMeta\" data-dictid=\"da6db7b0e21692777203c4075458d3\">focal</span> <span class=\"customMeta\" data-dictid=\"21e2d5a70616927772021fcdec0ca9\">fibrosis</span> <strong>(Statement 3)</strong>.</li>\n\t<li>ARVC occurs due to desmosomes mutation.\n\t<ul>\n\t\t<li>Mutations in genes encoding\u00a0desmosomal junctional proteins at the <span class=\"customMeta\" data-dictid=\"cfd35769b016927771901681bcc115\">intercalated</span> disk (e.g., plakoglobin)\u00a0<strong>(Statement 4)</strong></li>\n\t</ul>\n\t</li>\n\t<li>Associated with<strong> NAXOS syndrome (Statement 2)</strong>, it includes:\n\t<ul>\n\t\t<li>Arrhythmogenic Right <span class=\"customMeta\" data-dictid=\"fc8cac43cc16927772015049bb5ab8\">Ventricular</span> Cardiomyopathy (ARVC)</li>\n\t\t<li>Woolly hair</li>\n\t\t<li>Palmo-plantar <span class=\"customMeta\" data-dictid=\"be8e60375216927771903ecdd7aa03\">keratoderma</span> (Thick palms and soles due to hyperkeratosis)</li>\n\t\t<li>NAXOS syndrome is an autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> disorder.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Nikos Protonotarios, Adalena Tsatsopoulou\" data-hash=\"\" data-license=\"CC BY 2.0\" data-source=\"https://en.wikipedia.org/wiki/Woolly_hair#/media/File:Naxos_disease.jpg\" data-tags=\"\" height=\"243\" src=\"https://image.prepladder.com/content/83q3QN7noNiiojDOtJvJ1737552958.png\" width=\"500\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/83q3QN7noNiiojDOtJvJ1737552958.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/zFK4kzPk7VW19sXRR0eJ1750488342.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/8O2F6X5Jl5X3AT5uql5p1750488427.mp3"
  }
];
        let quizName = '29 Carditis And Cardiac Tumors';
        let hierarchy = ["PrepLadder", "qBank", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>