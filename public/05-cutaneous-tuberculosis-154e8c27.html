<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>05 Cutaneous Tuberculosis - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Dermatology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>A 28-year-old swimming pool worker presents to the dermatology clinic with a lesion on his left hand which is mostly painless but has gradually increased in size as shown in the image. He recalls sustaining a minor cut while cleaning a pool about a month ago. Which of the following is a characteristic feature of this condition?</p>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"S. RachevaI. Krasnaliev\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.semanticscholar.org/paper/A-CASE-OF-SWIMMING-POOL-GRANULOMA-Racheva-Krasnaliev/3943c97339bf8e43f3346dc1d7eba177846b626c/figure/0\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/m2bib6WDcSfKmPaFjgZa1723529666.png\" width=\"300\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Erythematous nodules with central clearing"
      },
      {
        "id": 2,
        "text": "Non tender, erythematous nodules along lymphatic vessels"
      },
      {
        "id": 3,
        "text": "Vesicular rash with a linear distribution"
      },
      {
        "id": 4,
        "text": "Target-like lesions with central clearing"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) <span class=\"customMeta\" data-dictid=\"9996ef505516927771937fe4ef1222\">Non</span> tender, erythematous nodules along <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> vessels</strong></p>\n\n<p><strong>Explanation: </strong>The given clinical scenario suggests Swimming pool <span class=\"customMeta\" data-dictid=\"2334b7498b1692777188fa8b2eee36\">granuloma</span> or Fish tank granuloma, which is caused by <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">Mycobacterium</span> marinum<strong> </strong>following exposure to contaminated water sources such as swimming pools or aquariums.</p>\n\n<ul>\n\t<li>It is characterized by erythematous, painless nodules along <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> vessels of the affected area.</li>\n\t<li>Histopathological examination of the <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> <span class=\"customMeta\" data-dictid=\"c02ad9ae0f1692777198d76afc93c4\">specimen</span> may reveal <span class=\"customMeta\" data-dictid=\"9e1f97f6ad169277718805c2dd35c1\">granulomatous</span> inflammation.</li>\n\t<li>Treated with <strong>clarithromycin + ethambutol.</strong></li>\n</ul>\n\n<p><strong>Erythematous nodules with central clearing (Option A) </strong>are a characteristic feature of<strong> <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> migrans. </strong>They typically present as a red, expanding <span class=\"customMeta\" data-dictid=\"dc75edd604169277719735ac5b4d5b\">rash</span> with central clearing, often resembling a<strong> bull's eye</strong>\u00a0or <strong>target-like appearance,</strong> which is seen in Lyme disease.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Ffurler,\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Erythema_migrans_(Wanderr%C3%B6te).jpg\" data-tags=\"\" height=\"360\" src=\"https://image.prepladder.com/content/cg0D83V8RTGqF44QkwVj1723058882.png\" width=\"300\" /></p>\n\n<p><strong>Vesicular <span class=\"customMeta\" data-dictid=\"dc75edd604169277719735ac5b4d5b\">rash</span> with a <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> distribution (Option C)\u00a0</strong>is a characteristic feature of<strong> </strong><strong>herpes</strong> <strong>zoster</strong> (shingles), a <span class=\"customMeta\" data-dictid=\"5cc2d9fac616927772021889ee6d52\">viral</span> infection caused by the <span class=\"customMeta\" data-dictid=\"eee52fe3cc16927771970c8dffdfd2\">reactivation</span> of the varicella-zoster virus. It typically presents with a painful <span class=\"customMeta\" data-dictid=\"4b0fee14c816927772016e67cf3a13\">vesicular</span> <span class=\"customMeta\" data-dictid=\"dc75edd604169277719735ac5b4d5b\">rash</span> that follows a dermatomal distribution (i.e., along the path of a <span class=\"customMeta\" data-dictid=\"408bcde7f01692777198acadb8e1c6\">sensory</span> nerve).</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Fisle, BruceBlaus\"\" data-hash=\"\" data-license=\"CC BY SA 3.O &CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Herpes_zoster_chest.png https://commons.wikimedia.org/wiki/File:Herpes_Zoster_Rash.png\" data-tags=\"\" height=\"261\" src=\"https://image.prepladder.com/content/Vu2oJxnbUZi1fdBaR39i1723058947.png\" width=\"400\" /></p>\n\n<p><strong>Target-like lesions with central clearing (Option D)</strong>\u00a0are a characteristic feature of <strong>erythema multiforme</strong>, which various factors, including infections, medications, and <span class=\"customMeta\" data-dictid=\"96ab11a06a16927771823151c8e471\">autoimmune</span> disorders can trigger.</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Grook Da Oger\" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Erythema_multiforme_EM_02.jpg\" data-tags=\"\" height=\"240\" src=\"https://image.prepladder.com/content/hk5hE8RQ0gI3taNgRoHu1723059002.png\" width=\"300\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/m2bib6WDcSfKmPaFjgZa1723529666.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/cg0D83V8RTGqF44QkwVj1723058882.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/gdErXYUk4TGiefaDiWU11737103157.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/o78557kQLinCMc1t1puy1737103244.mp3"
  },
  {
    "text": "<p>A 35-year-old construction worker presents with a painless lesion on his right forearm following sustaining a minor abrasion while working with bricks a few weeks ago. Physical examination reveals a shallow ulcer with undermined edges. Acid-fast bacilli staining of a biopsy specimen from the lesion is positive. Which of the following types of cutaneous tuberculosis is most likely responsible for this presentation?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Exogenous with previous exposure to MTB"
      },
      {
        "id": 2,
        "text": "Exogenous with no previous exposure to MTB"
      },
      {
        "id": 3,
        "text": "Endogenous cutaneous TB"
      },
      {
        "id": 4,
        "text": "Tuberculids"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Option: B) <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">Exogenous</span> with no previous exposure to MTB</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The given clinical scenario suggests <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">Tuberculosis</span> chancre, a multibacillary, <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">exogenous</span> <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB that occurs in individuals with no previous <span class=\"customMeta\" data-dictid=\"4fe92aaac71692777198234aaa055a\">sensitization</span> to TB.</li>\n\t<li>It presents with an <span class=\"customMeta\" data-dictid=\"7b4370a0b01692777201a5bc0739c2\">ulcer</span> with undermined edges and is <span class=\"customMeta\" data-dictid=\"dca0ba73c21692777181cf110912d6\">analogous</span> to Ghon\u2019s focus on <span class=\"customMeta\" data-dictid=\"10e2dee19e1692777196673db90c23\">pulmonary</span> TB.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\" Kaliaperumal Karthikeyan Saravanan Gowtham Palaniappan Vijayasankar\"\" data-hash=\"\" data-license=\"CC BY NC 4.0\" data-source=\"https://www.researchgate.net/figure/A-single-well-defined-11-cm-ulcer-with-undermined-edges-and-violaceous-borders-floored_fig1_367223270\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/BttrnbaXAd4KMMzOxY6T1723041073.png\" width=\"300\" /></p>\n\n<p>Cutaneous TB is classified into three categories:</p>\n\n<p><strong>Exogenous:</strong> The source of TB is outside the body. It is further divided into two types based on previous exposure to MTB.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Tuberculosis chancre</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Tuberculosis verrucosa <span class=\"customMeta\" data-dictid=\"255bc104431692777185a0f4bdc3c9\">cutis</span> </strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>No previous exposure to MTB</li>\n\t\t\t\t<li>No <span class=\"customMeta\" data-dictid=\"4f9ee631c21692777189b1e0cdc91c\">immunity</span> present</li>\n\t\t\t\t<li>Multibacillary</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Previous exposure to MTB</li>\n\t\t\t\t<li>Strong <span class=\"customMeta\" data-dictid=\"4f9ee631c21692777189b1e0cdc91c\">immunity</span> is present</li>\n\t\t\t\t<li>Paucibacillary</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Endogenous:</strong> The source of TB is inside the body</p>\n\n<p><strong>Tuberculids:</strong> <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">Cutaneous</span> <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> response to mycobacteria</p>\n\n<p><strong>Exogenous with previous exposure to MTB\u00a0(Option A): </strong></p>\n\n<ul>\n\t<li>Tuberculosis verrucosa cutis, a <span class=\"customMeta\" data-dictid=\"1fdb5ce91d16927771942d7a784ff5\">paucibacillary</span> <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">exogenous</span> <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB, occurs in previously sensitised individuals with strong immunity; hence it is not the correct option for the given condition.</li>\n\t<li>It presents as a painless, slowly progressive, red or brown warty, hyperkeratotic <span class=\"customMeta\" data-dictid=\"af71c1668e169277719542cf8f1364\">plaque</span> with a <span class=\"customMeta\" data-dictid=\"0f0be4ebf11692777201b3aaf5e6fc\">verrucous</span> or papillomatous surface.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Anupam Varshney Tarang Goyal\"\" data-hash=\"\" data-license=\"CC BY NC ND\" data-source=\"https://www.researchgate.net/figure/Tuberculosis-verruca-cutis-showing-verrucous-hyperkeratotic-warty-lesions-on-the-feet_fig5_50395564\" data-tags=\"\" height=\"300\" src=\"https://image.prepladder.com/content/hgo7BmXToR3j8bYvhaw51723041225.png\" width=\"300\" /></p>\n\n<p><strong>Endogenous <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB\u00a0(Option\u00a0C): </strong>The source of the given clinical condition is exogenous, not endogenous.</p>\n\n<p>Endogenous <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB is classified into three categories based on its mode of spread.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:NaN\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Contiguous</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Autoinoculation</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\"><strong>Hematogenous</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Scrofuloderma:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Endogenous spread from the <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"4df97a6cbf169277719172fd1af767\">lymph</span> node.</li>\n\t\t\t\t<li>Multibacillary.</li>\n\t\t\t\t<li>Most common in children but occur in all age groups.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Periorificial TB:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>It is a <span class=\"customMeta\" data-dictid=\"fcfe58b24e169277719388b41fd97f\">multibacillary</span> lesion.</li>\n\t\t\t\t<li>This is due to the <span class=\"customMeta\" data-dictid=\"ff3e9793d01692777182b598b4a090\">bacterium</span> being directly inoculated into the skin through minor trauma or breaks in the skin around the orifices.</li>\n\t\t\t</ul>\n\n\t\t\t<p style=\"text-align:center\"><img alt=\"\" data-author=\"Arzu K\u0131l\u0131\u00e7 MD, \u00dclker G\u00fcl MD, M\u00fczeyyen G\u00f6n\u00fcl MD, Se\u00e7il Soylu MD, Seray K\u00fclc\u00fc \u00c7akmak MD, Murat Demiriz MD\" data-hash=\"\" data-license=\"NA\" data-source=\"https://onlinelibrary.wiley.com/doi/abs/10.1111/j.1365-4632.2009.03942.x\" data-tags=\"\" height=\"268\" src=\"https://image.prepladder.com/content/VgHORw4jgD17B8CHTt451723041321.png\" width=\"300\" /></p>\n\n\t\t\t<p>\u00a0</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Lupus vulgaris:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Paucibacillary.</li>\n\t\t\t\t<li>Presents as reddish-brown papules, nodules, or plaques on the skin.</li>\n\t\t\t</ul>\n\t\t\t\u00a0\n\n\t\t\t<p>TB Gumma:</p>\n\n\t\t\t<ul>\n\t\t\t\t<li>Multibacillary</li>\n\t\t\t\t<li>Presents as painless, <span class=\"customMeta\" data-dictid=\"b3e55c05121692777190f2cc59fde0\">indurated</span> <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> nodules or abscesses.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><strong>Tuberculids\u200b\u200b\u200b\u200b\u200b\u200b\u200b</strong>\u00a0<strong>(Option D):\u00a0</strong>These are <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> reactions to <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">mycobacterium</span> <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> due to <span class=\"customMeta\" data-dictid=\"33bb6837aa169277718854a46f5cbd\">hematogenous</span> spread, not <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">exogenous</span> sources. Examples include</p>\n\n<ul>\n\t<li>Lichen scrofulosorum (Micropapular)</li>\n\t<li>Papulonecrotic <span class=\"customMeta\" data-dictid=\"50ba769c551692777201aad9e8c62a\">tuberculid</span> (Papular)</li>\n\t<li>Erythema Induratum of Bazin (Nodular)</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/BttrnbaXAd4KMMzOxY6T1723041073.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/H9QIiD7ufoGjQDIfXkmo1726640199.mp3",
    "explanation_audio_hin": ""
  },
  {
    "text": "<p>A 45-year-old female presents with a slowly progressive, verrucous plaque on her left foot. She has a history of pulmonary tuberculosis treated several years ago. On examination, the lesion appears well-defined, hyperkeratotic, and verrucous, with a papillomatous surface as shown in the image. All of the following statements are true about this condition except?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Anupam Varshney Tarang Goyal\"\" data-hash=\"\" data-license=\"CC BY NC ND\" data-source=\"https://www.researchgate.net/figure/Tuberculosis-verruca-cutis-showing-verrucous-hyperkeratotic-warty-lesions-on-the-feet_fig5_50395564\" data-tags=\"\" height=\"329\" src=\"https://image.prepladder.com/content/WOgx8XKuhsHbK2bFiGTJ1723097273.png\" width=\"416\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Anatomist's wart is the other name"
      },
      {
        "id": 2,
        "text": "Post-primary tuberculosis with poor immunity"
      },
      {
        "id": 3,
        "text": "It is a paucibacillary lesion"
      },
      {
        "id": 4,
        "text": "Antitubercular therapy is used in the management"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Post-primary <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> with poor immunity.</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The given clinical scenario and the image suggest the diagnosis of <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">Tuberculosis</span> <span class=\"customMeta\" data-dictid=\"0f0be4ebf11692777201b3aaf5e6fc\">verrucous</span> <span class=\"customMeta\" data-dictid=\"255bc104431692777185a0f4bdc3c9\">cutis</span> which is also known as Prosecutor's wart, Anatomist's <span class=\"customMeta\" data-dictid=\"a110e3f36e16927772024071d44ac6\">wart</span> <strong>(Option A)</strong>, Verruca necrogenica, and Warty tuberculosis.</li>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of Cutaneous <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> that occurs after direct <span class=\"customMeta\" data-dictid=\"4d839b33ba16927771902944bde5b4\">inoculation</span> of the <span class=\"customMeta\" data-dictid=\"46f768d2e41692777193d69cbc7eec\">mycobacteria</span> into the skin of a previously <span class=\"customMeta\" data-dictid=\"e1c24f762816927771989a2101cb3c\">sensitized</span> host with good <span class=\"customMeta\" data-dictid=\"4f9ee631c21692777189b1e0cdc91c\">immunity</span> against the bacillus. <strong>(Option B)</strong></li>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"1fdb5ce91d16927771942d7a784ff5\">paucibacillary</span> <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> <strong>(Option C)</strong>, and <span class=\"customMeta\" data-dictid=\"4d839b33ba16927771902944bde5b4\">inoculation</span> typically occurs from an <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">exogenous</span> source.</li>\n\t<li>In adults, TBVC most frequently develops on the <span class=\"customMeta\" data-dictid=\"b01b22718a169277718096920a80e7\">acral</span> extremities; the fingers and <span class=\"customMeta\" data-dictid=\"f61866c72d169277718680f9c96ff2\">dorsum</span> of the hands are commonly affected, while in children, the ankles or <span class=\"customMeta\" data-dictid=\"a0af4564cf1692777183e503d226f6\">buttocks</span> are frequent sites for <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> occurrence.</li>\n\t<li>It presents as a painless, slowly progressive, red or brown warty, hyperkeratotic <span class=\"customMeta\" data-dictid=\"af71c1668e169277719542cf8f1364\">plaque</span> with a <span class=\"customMeta\" data-dictid=\"0f0be4ebf11692777201b3aaf5e6fc\">verrucous</span> or papillomatous surface and it grows via <span class=\"customMeta\" data-dictid=\"255674f3271692777195c172d86daf\">peripheral</span> extension.</li>\n\t<li>On histopathological examination, it is characterized by <span class=\"customMeta\" data-dictid=\"9e1f97f6ad169277718805c2dd35c1\">granulomatous</span> <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> with <span class=\"customMeta\" data-dictid=\"ed5f81953d1692777187529a6de318\">epithelioid</span> histiocytes, giant cells, and <span class=\"customMeta\" data-dictid=\"99368d5fef1692777183ea405bed67\">caseous</span> necrosis(caseating granulomas).</li>\n\t<li>It can be treated with Antitubercular drugs <strong>(Option D).</strong></li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Anupam Varshney Tarang Goyal\"\" data-hash=\"\" data-license=\"CC BY NC ND\" data-source=\"https://www.researchgate.net/figure/Tuberculosis-verruca-cutis-showing-verrucous-hyperkeratotic-warty-lesions-on-the-feet_fig5_50395564\" data-tags=\"\" height=\"329\" src=\"https://image.prepladder.com/content/WOgx8XKuhsHbK2bFiGTJ1723097273.png\" width=\"416\" /></p>",
    "question_images": [
      "https://image.prepladder.com/content/WOgx8XKuhsHbK2bFiGTJ1723097273.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/WOgx8XKuhsHbK2bFiGTJ1723097273.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/bsljLgW4zoOiSsWFmXg61728991174.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/PafM9Vw8hLyhKad3DLjI1728886138.mp3"
  },
  {
    "text": "<p>A 40-year-old woman presents with a slowly enlarging, painless lesion on her neck. She had a history of pulmonary tuberculosis and involvement of underlying nodes, which was treated successfully 3 years ago. On examination, there is a firm, erythematous plaque with overlying crusting and shallow ulcerations shown in the image. There are also enlarged, non-tender cervical lymph nodes palpable on the same side of the neck. What is the most likely diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\" Mohammad2018\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Scrofuloderma.jpg\" data-tags=\"\" height=\"387\" src=\"https://image.prepladder.com/content/7m6IvLxO44t5R1Oagp2b1723057136.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Scrofuloderma"
      },
      {
        "id": 2,
        "text": "Actinomycosis"
      },
      {
        "id": 3,
        "text": "Sporotrichosis"
      },
      {
        "id": 4,
        "text": "Pyoderma gangrenosum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Scrofuloderma</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The given clinical scenario and the image suggest a diagnosis of Scrofuloderma, which is caused by the direct extension of an infection (endogenous spread) to the skin from the underlying TB focus (Lymph node, bone joint).</p>\n\n<ul>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"fcfe58b24e169277719388b41fd97f\">multibacillary</span> manifestation and is the most common <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB in children, although it can occur in any age group.</li>\n\t<li>It often presents as painless <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> swellings and ruptures into the overlying skin resulting in discharging sinuses or undermined ulcers or fibrotic scars.</li>\n\t<li>The most common focus of infection is the <span class=\"customMeta\" data-dictid=\"25c6ce766c1692777184ab9a40305c\">cervical</span> <span class=\"customMeta\" data-dictid=\"4df97a6cbf169277719172fd1af767\">lymph</span> node.</li>\n\t<li>The most common site is the neck and axilla.</li>\n\t<li>Biopsy reveals positive <span class=\"customMeta\" data-dictid=\"3b007026bd16927771997ae809b603\">staining</span> for <span class=\"customMeta\" data-dictid=\"440f2b916316927771808b8ad44a64\">acid-fast</span> <span class=\"customMeta\" data-dictid=\"fe0005a48b1692777182143f69e1d5\">bacilli</span> and characteristic caseating granulomas seen.</li>\n</ul>\n\n<p><strong>Actinomycosis (Option B):</strong></p>\n\n<ul>\n\t<li>This is a bacterial infection (Actinomyces israelii) that often presents as chronic indurated, <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> nodules or abscesses with draining <span class=\"customMeta\" data-dictid=\"b0046463171692777198e0beea83e7\">sinus</span> tracts that may contain <span class=\"customMeta\" data-dictid=\"978b9c4c1a1692777199fc90ace6a5\">sulfur</span> granules.</li>\n\t<li>While both <span class=\"customMeta\" data-dictid=\"376527163716927771989078781201\">scrofuloderma</span> and <span class=\"customMeta\" data-dictid=\"02885d128416927771808db5ce5816\">actinomycosis</span> can lead to <span class=\"customMeta\" data-dictid=\"a48a50d87216927771994f1cfe9b7d\">suppurative</span> skin lesions, <span class=\"customMeta\" data-dictid=\"02885d128416927771808db5ce5816\">actinomycosis</span> typically lacks the <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> lesions with central <span class=\"customMeta\" data-dictid=\"314062f48b1692777183ce9d1142a3\">caseation</span> seen in scrofuloderma.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Maruma, Frans & Ngwenya, Rhulani. \" data-hash=\"\" data-license=\"Creative Commons Attribution 3.0 Unported\" data-source=\"https://www.researchgate.net/figure/Actinomycosis-Fibrotic-indurated-linear-plaque-overlying-right-jawline-with-surface_fig2_365347713\" data-tags=\"\" height=\"229\" src=\"https://image.prepladder.com/content/FU3tNX6ZnEyXjJUvcCLh1723057252.png\" width=\"300\" /></p>\n\n<p><strong>Sporotrichosis (Option C):</strong></p>\n\n<ul>\n\t<li>It is a fungal infection caused by the <span class=\"customMeta\" data-dictid=\"132fe0557f1692777186f7d81c3999\">dimorphic</span> <span class=\"customMeta\" data-dictid=\"618e9d3b6416927772031d0260310e\">fungus</span> <span class=\"customMeta\" data-dictid=\"9163b9f3c51692777199fc6798ccf0\">Sporothrix</span> schenckii. It usually presents as painless, <span class=\"customMeta\" data-dictid=\"69967bcdf91692777196d95fdabe9a\">pruritic</span> papules or nodules at the site of inoculation, often following trauma from plant material.</li>\n\t<li>Over time, these lesions may <span class=\"customMeta\" data-dictid=\"8ff7e19ae9169277720147c54e6777\">ulcerate</span> and develop a <span class=\"customMeta\" data-dictid=\"d02067c4b51692777191b8eec8b062\">linear</span> arrangement along the <span class=\"customMeta\" data-dictid=\"4fb6bd90f016927771918d4a2993ed\">lymphatic</span> channels.</li>\n\t<li>Unlike scrofuloderma, <span class=\"customMeta\" data-dictid=\"16a2342d221692777199951c574e30\">sporotrichosis</span> does not typically exhibit central caseation.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Vikram Mahajan\" data-hash=\"\" data-license=\"CC BY\" data-source=\"https://www.researchgate.net/figure/Lymphocutaneous-sporotrichosis-Noduloulcerative-lesions-appear-along-the-lymphatics_fig3_271330730\" data-tags=\"\" height=\"540\" src=\"https://image.prepladder.com/content/8TPYGkVSxP7MbhRoFAt81723057305.png\" width=\"300\" /></p>\n\n<p><strong>Pyoderma gangrenosum (Option D) :</strong></p>\n\n<ul>\n\t<li>This rare, non-infectious skin condition is characterized by painful ulcers with undermined borders.</li>\n\t<li>It is associated with various underlying <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> diseases, such as <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> <span class=\"customMeta\" data-dictid=\"37863e7aec169277718310f33c6a11\">bowel</span> disease, <span class=\"customMeta\" data-dictid=\"40dbde72e41692777197e59d893839\">rheumatoid</span> arthritis, or hematologic malignancies.</li>\n\t<li>Histopathology typically shows a <span class=\"customMeta\" data-dictid=\"041f0e547a1692777193350b3f7d39\">neutrophilic</span> <span class=\"customMeta\" data-dictid=\"8fd5e2898d16927771900855b98180\">infiltrate</span> without evidence of infection, vasculitis, or <span class=\"customMeta\" data-dictid=\"2334b7498b1692777188fa8b2eee36\">granuloma</span> formation.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"I, Monopol,\" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Pyoderma_gangrenosum_01.jpg\" data-tags=\"\" height=\"230\" src=\"https://image.prepladder.com/content/QCfkrSn8OYomCx15oQBm1723057351.png\" width=\"300\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/7m6IvLxO44t5R1Oagp2b1723057136.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/FU3tNX6ZnEyXjJUvcCLh1723057252.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/oU3MPAcduSkAyvrYEOy61726640378.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/xTkp0YuBPb10d8ZXelGt1728886213.mp3"
  },
  {
    "text": "<p>A 20-year-old woman presents with a large erythematous, scaly plaque with deep-seated nodules on her buttock, as shown in the image. The lesion gradually progressed over 4 years, exhibiting scarring and atrophy in some areas. Diascopy of the nodules reveals an \"apple jelly\" nodules. She has a history of a positive tuberculin skin test but no active tuberculosis. What is the likely diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mary Thomas , Meryl Antony\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.semanticscholar.org/paper/Cutaneous-lupus-vulgaris%3A-Bringing-the-wolf-out-of-Thomas-Antony/a89b2e59b1e16f5f1a86f10218f43ffb849f9ae6\" data-tags=\"\" height=\"306\" src=\"https://image.prepladder.com/content/QoVwNTfdJCDrcjnXp7R41723057439.png\" width=\"300\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Lupus vulgaris"
      },
      {
        "id": 2,
        "text": "Psoriasis"
      },
      {
        "id": 3,
        "text": "Lupus pernio"
      },
      {
        "id": 4,
        "text": "Granuloma annulare"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Lupus vulgaris</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The clinical scenario is suggestive of<strong> Lupus <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> </strong>which is a chronic <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> that occurs in previously <span class=\"customMeta\" data-dictid=\"e1c24f762816927771989a2101cb3c\">sensitized</span> individuals with moderate <span class=\"customMeta\" data-dictid=\"4f9ee631c21692777189b1e0cdc91c\">immunity</span> to Mycobacterium tuberculosis.</p>\n\n<ul>\n\t<li>These lesions usually appear as well-defined, erythematous to reddish-brown plaques or nodules with smooth, slightly scaly, or <span class=\"customMeta\" data-dictid=\"0f0be4ebf11692777201b3aaf5e6fc\">verrucous</span> surfaces and may have active, raised margins.</li>\n\t<li>They may initially appear as small papules or nodules that gradually enlarge and coalesce to <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> larger plaques.</li>\n\t<li>Often exhibits <span class=\"customMeta\" data-dictid=\"7a14c26a7816927771904fb670c6da\">induration</span> due to the underlying <span class=\"customMeta\" data-dictid=\"9e1f97f6ad169277718805c2dd35c1\">granulomatous</span> <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> and <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> due to underlying tissue destruction by the <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> infection.</li>\n\t<li>The center of the <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> may show <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> and scarring.</li>\n\t<li>Diagnosis is often confirmed by histopathological examination of skin <span class=\"customMeta\" data-dictid=\"754ab07a2e1692777183ed178c883d\">biopsy</span> specimens, which typically show caseating granulomas with <span class=\"customMeta\" data-dictid=\"440f2b916316927771808b8ad44a64\">acid-fast</span> bacilli.</li>\n\t<li>Diascopy shows characteristic \u2018apple <span class=\"customMeta\" data-dictid=\"88bc2baef31692777190f5b09925aa\">jelly</span> nodules\u2019.</li>\n\t<li>Treated with Antitibercular therapy.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Ravikiran SP, Jaiswal AK, Syrti C, Madan Mohan NT, Aradhya SS\" data-hash=\"\" data-license=\"CC BY-NC-SA 3.0\" data-source=\"https://openi.nlm.nih.gov/detailedresult?img=PMC4886588_IDOJ-7-174-g002&req=4\" data-tags=\"\" height=\"252\" src=\"https://image.prepladder.com/content/3w2OlfxEWIOwqAxdzuTh1723057506.png\" width=\"300\" /></p>\n\n<p style=\"text-align:center\"><strong>Fig. Apple <span class=\"customMeta\" data-dictid=\"88bc2baef31692777190f5b09925aa\">Jelly</span> <span class=\"customMeta\" data-dictid=\"6e6233ba551692777193c62c40bd5f\">Nodule</span> on diascopy</strong></p>\n\n<p style=\"text-align:center\"><br />\n\u00a0</p>\n\n<p><strong>Psoriasis (Option B):</strong></p>\n\n<ul>\n\t<li>This typically presents as well-demarcated, erythematous plaques with silvery scales, most commonly on <span class=\"customMeta\" data-dictid=\"45f9bc42ac16927771871c9dc2970a\">extensor</span> surfaces and scalp.</li>\n\t<li>It is associated with <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> manifestations such as psoriatic <span class=\"customMeta\" data-dictid=\"6f74c7bfe0169277718240005b59d1\">arthritis</span> and does not produce <span class=\"customMeta\" data-dictid=\"7e02e0b55d16927771829892abb204\">apple <span class=\"customMeta\" data-dictid=\"88bc2baef31692777190f5b09925aa\">jelly</span> nodules</span> on diascopy, spitz sign positive.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Ali zeki\" data-hash=\"\" data-license=\"CC BY 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Psoriasis_with_typical_silver_scaly_appearance.jpg\" data-tags=\"\" height=\"394\" src=\"https://image.prepladder.com/content/skHL9umAza8wxI64COFa1723057603.png\" width=\"300\" /></p>\n\n<p style=\"text-align:center\"><strong>Fig. Psoriasis</strong></p>\n\n<p style=\"text-align:center\"><br />\n\u00a0</p>\n\n<p><strong>Lupus <span class=\"customMeta\" data-dictid=\"131d57aa0c1692777195bec93673c7\">pernio</span> (Option C):</strong></p>\n\n<ul>\n\t<li>It is a distinctive <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of chronic <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> sarcoidosis, a multisystem <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> disorder characterized by the formation of non-caseating granulomas.</li>\n\t<li>It typically presents as persistent, <span class=\"customMeta\" data-dictid=\"57d8f3ea831692777202e8adc0cee9\">violaceous</span> or dusky-red, <span class=\"customMeta\" data-dictid=\"b3e55c05121692777190f2cc59fde0\">indurated</span> plaques or nodules, often involving the nose, cheeks, lips, and ears.</li>\n\t<li>It can present with <span class=\"customMeta\" data-dictid=\"7e02e0b55d16927771829892abb204\">apple <span class=\"customMeta\" data-dictid=\"88bc2baef31692777190f5b09925aa\">jelly</span> nodules</span> on diascopy, but histopathological examination reveals non-caseating granuloma.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"M. Sand, D. Sand, C. Thrandorf, V. Paech, P. Altmeyer, F. G. Bechara,\" data-hash=\"\" data-license=\"CC BY 2.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Lupus_pernio_01.jpg\" data-tags=\"\" height=\"212\" src=\"https://image.prepladder.com/content/YlAFeWuhGcHWHs6EIhB11723057656.png\" width=\"300\" /></p>\n\n<p style=\"text-align:center\"><strong>Fig. Lupus pernio</strong></p>\n\n<p style=\"text-align:center\"><br />\n\u00a0</p>\n\n<p><strong>Granuloma Annulare (Option D):</strong></p>\n\n<ul>\n\t<li>It is a benign, self-limiting <span class=\"customMeta\" data-dictid=\"cb721815b01692777186acaa47e445\">dermatosis</span> characterized by the formation of <span class=\"customMeta\" data-dictid=\"532334711316927771865e5309b763\">dermal</span> granulomas, which are typically devoid of necrosis.</li>\n\t<li>Typically presents as <span class=\"customMeta\" data-dictid=\"d1a9a79f701692777182066af09044\">asymptomatic</span> or minimally pruritic, erythematous to skin-coloured papules or plaques.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Haley Otman,\" data-hash=\"\" data-license=\"CC BY 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Psoriasis_on_elbow.jpg\" data-tags=\"\" height=\"233\" src=\"https://image.prepladder.com/content/ImdBZV1KCy11MJU0l3sR1723057735.png\" width=\"300\" /></p>\n\n<p style=\"text-align:center\"><strong>Fig</strong>.\u00a0<strong>Granuloma Annulare</strong></p>",
    "question_images": [
      "https://image.prepladder.com/content/QoVwNTfdJCDrcjnXp7R41723057439.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/3w2OlfxEWIOwqAxdzuTh1723057506.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/M6HyQu94yBKMUzBhkYiI1728991256.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/Q7xZLprtntJoESPKxNSo1728886276.mp3"
  },
  {
    "text": "<p>A 24-year-old man presents with an erythematous plaque over the dorsum of hand that has been there for 4 years and is slowly progressing. Examination revealed a well-demarcated, indurated, annular-shaped plaque with irregular borders that was progressing towards one side and scarring on another border. Which of the following statements is FALSE about this condition?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mary Thomas , Meryl Antony\" data-hash=\"\" data-license=\"NA\" data-source=\"https://www.semanticscholar.org/paper/Cutaneous-lupus-vulgaris%3A-Bringing-the-wolf-out-of-Thomas-Antony/a89b2e59b1e16f5f1a86f10218f43ffb849f9ae6\" data-tags=\"\" height=\"305\" src=\"https://image.prepladder.com/content/AG68gfXYvqa7YbjJymwO1723097931.png\" width=\"392\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "It is a multibacillary lesion"
      },
      {
        "id": 2,
        "text": "It occurs in a previously sensitized patient"
      },
      {
        "id": 3,
        "text": "Lesions heal with central scarring"
      },
      {
        "id": 4,
        "text": "Apple jelly nodules can be seen"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) It is a <span class=\"customMeta\" data-dictid=\"fcfe58b24e169277719388b41fd97f\">multibacillary</span> lesion</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Based on the history and the image provided, the diagnosis is<strong> <span class=\"customMeta\" data-dictid=\"ccd536a9071692777191f53538ca30\">Lupus</span> <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> </strong>and it is a chronic, progressive, <span class=\"customMeta\" data-dictid=\"1fdb5ce91d16927771942d7a784ff5\">paucibacillary</span> (not multibacillary) <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> tuberculosis.</p>\n\n<ul>\n\t<li>Lupus <span class=\"customMeta\" data-dictid=\"a038b675ea169277720227edae8451\">vulgaris</span> is the most common <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> TB seen in adults (Most common\u00a0in females).</li>\n\t<li>Causative organisms: <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">Mycobacterium</span> tuberculosis, <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">Mycobacterium</span> bovis.</li>\n</ul>\n\n<p><strong>Pathogenesis : </strong></p>\n\n<ul>\n\t<li>Route of spread: <span class=\"customMeta\" data-dictid=\"2a7f0b780c1692777187fe83ec76b1\">Endogenous</span> spread or from <span class=\"customMeta\" data-dictid=\"18a9d4c52716927771878ee08e63ee\">exogenous</span> inoculation.</li>\n\t<li>It occurs in a previously <span class=\"customMeta\" data-dictid=\"e1c24f762816927771989a2101cb3c\">sensitized</span> individual with an increased <span class=\"customMeta\" data-dictid=\"5eb50cf561169277718491671207db\">cell-mediated immunity</span> to tuberculin. <strong>(Option B)</strong></li>\n</ul>\n\n<p><strong>Clinical features:</strong></p>\n\n<ul>\n\t<li>Presents as a single or a group of erythematous <span class=\"customMeta\" data-dictid=\"57d8f3ea831692777202e8adc0cee9\">violaceous</span> <span class=\"customMeta\" data-dictid=\"96f5104d6816927771816ac8dfceeb\">annular</span> plaques with central <span class=\"customMeta\" data-dictid=\"e9dcc3d4241692777198c7030bf313\">scarring</span> and <span class=\"customMeta\" data-dictid=\"97ff5253fb169277718224c7b0faf8\">atrophy</span> with active margins. <strong>(Option C)</strong></li>\n\t<li>The <span class=\"customMeta\" data-dictid=\"316866040e1692777195f45393e010\">periphery</span> shows erythematous deep-seated nodules which on <span class=\"customMeta\" data-dictid=\"c9b498c4ae16927771867c98f38374\">diascopy</span> may stand out as<strong> </strong>apple <span class=\"customMeta\" data-dictid=\"88bc2baef31692777190f5b09925aa\">jelly</span> nodules.\u00a0<strong>(Option D)</strong></li>\n\t<li>Most commonly seen in the buttocks, upper extremities, and face.</li>\n\t<li>Papules may recur within scarred areas, enlarging and coalescing into large, firm, elevated plaques.</li>\n</ul>\n\n<p><strong>Complications:</strong></p>\n\n<ul>\n\t<li>Secondary <span class=\"customMeta\" data-dictid=\"e9dcc3d4241692777198c7030bf313\">scarring</span> and <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> cell <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> may develop rarely.</li>\n</ul>\n\n<p><strong>Treatment : </strong></p>\n\n<ul>\n\t<li>Anti-tubercular drugs.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/AG68gfXYvqa7YbjJymwO1723097931.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/4G7xZeYFXbBOPIVJIuMY1728991341.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/3erPilBa1hOCtpsgWohu1728886359.mp3"
  },
  {
    "text": "<p>An 11-year-old child presented in dermatology OPD with a micro papular rash on the trunk without any necrosis or itching. The Mantoux test is positive. Histopathology examination shows perifollicular non-caseating granulomas. Which of the following statements is false about its diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Mushira Enani \"\" data-hash=\"\" data-license=\"CC BY-NC-ND\" data-source=\"https://www.researchgate.net/publication/316913496_Lichen_Scrofulosorum_in_a_Saudi_Adolescent_with_Multifocal_Tuberculosis\" data-tags=\"\" height=\"277\" src=\"https://image.prepladder.com/content/VymWaaQeBMerDoM8RdKm1723097557.png\" width=\"416\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Commonly seen in adults"
      },
      {
        "id": 2,
        "text": "The most common site is the trunk"
      },
      {
        "id": 3,
        "text": "It is not a type of lichen planus"
      },
      {
        "id": 4,
        "text": "Asymptomatic lichenoid papules are present"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Commonly seen in adults</strong></p>\n\n<p><strong>Explanation:</strong>\u00a0<br />\nBased on the clinical history and image, the diagnosis points to<strong> </strong>Lichen scrofulosorum<strong>, </strong>a rare <span class=\"customMeta\" data-dictid=\"a1b06f401f1692777203a53393ba98\">form</span> of <span class=\"customMeta\" data-dictid=\"50ba769c551692777201aad9e8c62a\">tuberculid</span> <strong>(Option C)</strong>, commonly seen in children (not in adults).</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Mushira Enani \"\" data-hash=\"\" data-license=\"CC BY-NC-ND\" data-source=\"https://www.researchgate.net/publication/316913496_Lichen_Scrofulosorum_in_a_Saudi_Adolescent_with_Multifocal_Tuberculosis\" data-tags=\"\" height=\"277\" src=\"https://image.prepladder.com/content/VymWaaQeBMerDoM8RdKm1723097557.png\" width=\"416\" /></p>\n\n<p style=\"text-align:center\"><strong>Fig. <span class=\"customMeta\" data-dictid=\"d176adf87f1692777191722064a021\">Lichen</span> Scrofulosorum showing <span class=\"customMeta\" data-dictid=\"96f5104d6816927771816ac8dfceeb\">annular</span> and plaque\u2010like lesions with strong <span class=\"customMeta\" data-dictid=\"0fe92012341692777201bab3db39b1\">tuberculin</span> reaction</strong></p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mushira Enani\" data-hash=\"\" data-license=\"CC BY-NC-ND 4.0\" data-source=\"https://www.researchgate.net/figure/Lateral-view-of-the-lower-chest-and-upper-abdomen-showing-discrete-redbrown-papules-some_fig1_5350391?_tp=eyJjb250ZXh0Ijp7ImZpcnN0UGFnZSI6Il9kaXJlY3QiLCJwYWdlIjoicHVibGljYXRpb24ifX0\" data-tags=\"\" height=\"437\" src=\"https://image.prepladder.com/content/KUTMO2wHBU1oEzhu6UE11733974597.png\" width=\"500\" /></p>\n\n<p style=\"text-align:center\"><strong>Lichenoid variety of <span class=\"customMeta\" data-dictid=\"d176adf87f1692777191722064a021\">Lichen</span> Scrofulosorum</strong></p>\n\n<p style=\"text-align:center\">\u00a0</p>\n\n<ul>\n\t<li>Lichen scrofulosorum presents with asymptomatic, lichenoid-grouped papules, often <span class=\"customMeta\" data-dictid=\"7676505f211692777195ec7f257bb9\">perifollicular</span> in distribution. <strong>(Option D)</strong></li>\n\t<li>The trunk is the most common site for these lesions. <strong>(Option B)</strong></li>\n\t<li>Healing typically occurs without scarring.</li>\n\t<li>Positive Mantoux test indicates previous exposure to <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> antigens.</li>\n\t<li>Biopsy reveals <span class=\"customMeta\" data-dictid=\"ebb480187d1692777199e233e9e356\">superficial</span> <span class=\"customMeta\" data-dictid=\"532334711316927771865e5309b763\">dermal</span> granulomas surrounding hair follicles. These granulomas contain <span class=\"customMeta\" data-dictid=\"ed5f81953d1692777187529a6de318\">epithelioid</span> cells, lymphocytes, and occasional giant cells, typically without caseation.</li>\n\t<li>Treatment involves a course of <span class=\"customMeta\" data-dictid=\"b05dec2b0316927771814b2127977a\">antitubercular</span> therapy: 2 months of HRZE followed by 4 months of HRE.</li>\n</ul>\n\n<p style=\"text-align:center\">\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/VymWaaQeBMerDoM8RdKm1723097557.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/VymWaaQeBMerDoM8RdKm1723097557.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/88qRNyMcSPHaW86eepOl1728991428.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/sScmysZU8MqO9D2iKoMu1728886441.mp3"
  },
  {
    "text": "<p>A 57-year-old female presented in dermatology OPD with bilateral nodular lesions and ulceration on her calf. On examination, tenderness was noticed. The Mantoux test was positive, and the culture for M. tuberculosis was negative. What is the likely diagnosis of this patient?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Kei Noro Chiaki Murase Ryo Fukaura[...] Masashi Akiyama\"\" data-hash=\"\" data-license=\"CC BY-NC-ND 4.0\" data-source=\"https://www.researchgate.net/figure/Clinical-features-and-histopathological-findings-of-erythema-induratum-of-Bazin-lesions_fig1_381993831\" data-tags=\"\" height=\"307\" src=\"https://image.prepladder.com/content/HV5FKUpplPtzFDb64v3c1723058457.png\" width=\"200\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Erythema induratum of Bazin"
      },
      {
        "id": 2,
        "text": "Lichen scrofulosorum"
      },
      {
        "id": 3,
        "text": "Papulonecrotic tuberculid"
      },
      {
        "id": 4,
        "text": "Erythema nodosum"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> induratum of Bazin</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p>The given clinical history suggests a diagnosis of <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> induratum of Bazin. It is a type of <span class=\"customMeta\" data-dictid=\"50ba769c551692777201aad9e8c62a\">tuberculid</span> whose cause is not fully understood. It is believed to be a <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> reaction to <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">Mycobacterium</span> <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> antigens.</p>\n\n<ul>\n\t<li>It is most common in middle-aged females.</li>\n\t<li>It presents as <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> and <span class=\"customMeta\" data-dictid=\"b118cf61a016927772018a179057ef\">ulcerative</span> lesions that are usually <span class=\"customMeta\" data-dictid=\"8fb8df140b1692777191702bbc9358\">localized</span> to the lower legs(posterior calves).</li>\n\t<li>Biopsy reveals <span class=\"customMeta\" data-dictid=\"dacf32dcfe169277719190bdf52c08\">Lobular panniculitis</span> and vasculitis.</li>\n\t<li>Tuberculids can be considered to be <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"2c7e1ce33316927771892ce1da8276\">hypersensitivity</span> reactions to <span class=\"customMeta\" data-dictid=\"33bb6837aa169277718854a46f5cbd\">hematogenous</span> dissemination of M. <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> or its antigens from a primary source in an individual with strong anti-tuberculous cell\u2010mediated immunity.</li>\n\t<li>Patients with tuberculids typically have a good response to anti-tuberculous therapy.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Kei Noro Chiaki Murase Ryo Fukaura[...] Masashi Akiyama\"\" data-hash=\"\" data-license=\"CC BY-NC-ND 4.0\" data-source=\"https://www.researchgate.net/figure/Clinical-features-and-histopathological-findings-of-erythema-induratum-of-Bazin-lesions_fig1_381993831\" data-tags=\"\" height=\"307\" src=\"https://image.prepladder.com/content/HV5FKUpplPtzFDb64v3c1723058457.png\" width=\"200\" /></p>\n\n<p><strong>(Option B)</strong> <strong>Lichen Scrofulosorum:</strong></p>\n\n<ul>\n\t<li>It is a type of <span class=\"customMeta\" data-dictid=\"50ba769c551692777201aad9e8c62a\">tuberculid</span> that consists of grouped <span class=\"customMeta\" data-dictid=\"709f606559169277719175609747e4\">lichenoid</span> papules on the trunk unlike <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> and <span class=\"customMeta\" data-dictid=\"b118cf61a016927772018a179057ef\">ulcerative</span> lesions of <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> induratum of Bazin.</li>\n\t<li>Most common in children.</li>\n\t<li>The lesions are mainly <span class=\"customMeta\" data-dictid=\"7676505f211692777195ec7f257bb9\">perifollicular</span> and heal without scarring.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"\"Mushira Enani \"\" data-hash=\"\" data-license=\"CC BY-NC-ND\" data-source=\"https://www.researchgate.net/publication/316913496_Lichen_Scrofulosorum_in_a_Saudi_Adolescent_with_Multifocal_Tuberculosis\" data-tags=\"\" height=\"182\" src=\"https://image.prepladder.com/content/XWqhCGKx6Q1fBDTPJFfU1723058500.png\" width=\"274\" /></p>\n\n<p><strong>(Option C) <span class=\"customMeta\" data-dictid=\"afab18dbad169277719424aed4eff0\">Papulonecrotic</span> tuberculid: </strong></p>\n\n<ul>\n\t<li>This is also a type of tuberculid, but it presents as necrotic papules on the extremities, which differs from the <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> lesions of <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">erythema</span> induratum of Bazin.</li>\n\t<li>Most commonly found in adults.</li>\n\t<li>Biopsy may reveal obliterative <span class=\"customMeta\" data-dictid=\"fcb3e0d7911692777201ffb9695dea\">vasculitis</span> (vascular inflammation) and thrombosis.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Brito, Arival & Oliveira, Clivia & Unger, Deborah & Bittencourt, Maraya. \" data-hash=\"\" data-license=\"Creative Commons Attribution 4.0 International\" data-source=\"https://www.researchgate.net/figure/A-Papulonecrotic-tuberculid---punched-out-lesions-on-the-lower-limbs-B_fig8_357597184\" data-tags=\"\" height=\"200\" src=\"https://image.prepladder.com/content/NFPoQWuywfOVzOnaCcDk1723058552.png\" width=\"200\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>(Option D) <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> nodosum:</strong></p>\n\n<ul>\n\t<li>Erythema nodosum presents as <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> crops of tender, erythematous, <span class=\"customMeta\" data-dictid=\"d446e62c6c1692777199896fc1d4b9\">subcutaneous</span> nodules on the <span class=\"customMeta\" data-dictid=\"45f9bc42ac16927771871c9dc2970a\">extensor</span> aspect of extremities.</li>\n\t<li>Ulceration and atrophic <span class=\"customMeta\" data-dictid=\"e9dcc3d4241692777198c7030bf313\">scarring</span> as seen in <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> induratum of Bazin are distinctly absent in <span class=\"customMeta\" data-dictid=\"f0f3e105661692777187df507b1f26\">Erythema</span> nodosum.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"James Heilman, MD,\" data-hash=\"\" data-license=\"CC BY-SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:ENlegs.JPG\" data-tags=\"\" height=\"200\" src=\"https://image.prepladder.com/content/6FdRUSw2ZZI513ne8QL31723058621.png\" width=\"273\" /></p>\n\n<p>.</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/content/HV5FKUpplPtzFDb64v3c1723058457.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/content/HV5FKUpplPtzFDb64v3c1723058457.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/Aj58iybe1uLxy9gT1i0I1728991492.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/4mF9YI244U1jMfwgZART1728886509.mp3"
  },
  {
    "text": "<p>A 14-year-old girl presents with an erythematous plaque with central scarring and an advancing edge on her face. She reports a gradual progression of lesions over several months. Biopsy shows granulomatous inflammation. Which of the following drugs will be started as a part of treatment in this patient?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Mohammad2018\" data-hash=\"\" data-license=\"CC BY-SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Lupus_vulgaris_new_image.jpg\" data-tags=\"\" height=\"233\" src=\"https://image.prepladder.com/content/FqrZfoV0yEuYexrSXcGi1723058727.png\" width=\"300\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Amphotericin B"
      },
      {
        "id": 2,
        "text": "Itraconazole"
      },
      {
        "id": 3,
        "text": "Minocycline"
      },
      {
        "id": 4,
        "text": "Rifampicin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) Rifampicin</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The clinical picture shows an erythematous <span class=\"customMeta\" data-dictid=\"af71c1668e169277719542cf8f1364\">plaque</span> with central <span class=\"customMeta\" data-dictid=\"e9dcc3d4241692777198c7030bf313\">scarring</span> and an advancing edge, which suggests a <span class=\"customMeta\" data-dictid=\"dd729c897216927771845c2b95f211\">clinical diagnosis</span> of <span class=\"customMeta\" data-dictid=\"ccd536a9071692777191f53538ca30\">Lupus</span> vulgaris.</li>\n\t<li>Rifampicin is an <span class=\"customMeta\" data-dictid=\"ff6b4f4d491692777181a02bad075e\">antibiotic</span> that is part of the standard Anti-Tuberculous Therapy (ATT), started in this patient.</li>\n\t<li>It is used in combination with other medications, such as Isoniazid, Pyrazinamide, and Ethambutol, to treat <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> tuberculosis, such as <span class=\"customMeta\" data-dictid=\"ccd536a9071692777191f53538ca30\">lupus</span> vulgaris.</li>\n</ul>\n\n<p><strong>Amphotericin B (Option A):</strong></p>\n\n<ul>\n\t<li>Amphotericin B is an <span class=\"customMeta\" data-dictid=\"c929a2b71516927771812a8b7b7ec3\">antifungal</span> medication used for serious <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> fungal infections caused by <span class=\"customMeta\" data-dictid=\"f54d5c5cf11692777183318f259e5f\">Candida</span> species, <span class=\"customMeta\" data-dictid=\"e3baadccd91692777182c9724090b3\">Aspergillus</span> species, <span class=\"customMeta\" data-dictid=\"df1857b4a6169277718597e7b3325d\">Cryptococcus</span> neoformans, <span class=\"customMeta\" data-dictid=\"1645996cc4169277718966ff366843\">Histoplasma</span> capsulatum, and other fungi.</li>\n\t<li>It is not indicated in the treatment of <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> tuberculosis.</li>\n</ul>\n\n<p><strong>Itraconazole (Option B):</strong></p>\n\n<ul>\n\t<li>Itraconazole is an <span class=\"customMeta\" data-dictid=\"c929a2b71516927771812a8b7b7ec3\">antifungal</span> agent that is commonly used for fungal infections of the skin like dermatophytosis.</li>\n\t<li>It would not be effective in treatment against <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">mycobacterium</span> tuberculosis.</li>\n</ul>\n\n<p><strong>Minocycline (Option D) :</strong></p>\n\n<ul>\n\t<li>It is a <span class=\"customMeta\" data-dictid=\"8784b5a7ad16927772005323b514b8\">tetracycline</span> <span class=\"customMeta\" data-dictid=\"ff6b4f4d491692777181a02bad075e\">antibiotic</span> with anti-inflammatory properties often used for acne-vulgaris.</li>\n\t<li>It is not the treatment of choice for mycobacterial infections.</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/content/FqrZfoV0yEuYexrSXcGi1723058727.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/IjLogh2hXjMiKq0MxDNl1729055689.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/eH7K3IQmtYwo5T99QPMy1728886572.mp3"
  },
  {
    "text": "<p>A 15-year-old boy presents to the clinic with a large painless ulcer on the lower extremity with a necrotic base and undermined edges. His family reports that they live near a wetland area in a region known to have cases of similar ulcers. There has been no response to standard treatment for common bacterial skin infections. A smear from the lesion shows acid-fast bacilli. What is the most likely diagnosis?</p>\n\n<p style=\"text-align:center\"><img alt=\"\" data-author=\"Khaled Ezzedine, Thierry Pistone, Jane Cottin, Laurent Marsollier, V\u00e9ronique Guir, and Denis Malvy\" data-hash=\"\" data-license=\"Open access\" data-source=\"https://picryl.com/media/buruli-ulcer-traveler-f128d7\" data-tags=\"\" height=\"281\" src=\"https://image.prepladder.com/content/xemgCnPPyjHtxqMjjRok1723059084.png\" width=\"400\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Buruli ulcer"
      },
      {
        "id": 2,
        "text": "Cutaneous tuberculosis"
      },
      {
        "id": 3,
        "text": "Cutaneous leishmaniasis"
      },
      {
        "id": 4,
        "text": "Diabetic ulcer"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer:</strong> <strong>A) Buruli ulcer</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>It is caused by <span class=\"customMeta\" data-dictid=\"e99dbef99f169277719344843cf75a\">Mycobacterium</span> ulcerans<strong>,</strong> which is <span class=\"customMeta\" data-dictid=\"59c8c1e4b316927771873c98afae15\">endemic</span> to wetland areas.</p>\n\n<ul>\n\t<li>It presents as a painless <span class=\"customMeta\" data-dictid=\"7b4370a0b01692777201a5bc0739c2\">ulcer</span> with <span class=\"customMeta\" data-dictid=\"5e84a7987c16927771931012aced83\">necrosis</span> and undermined edges.</li>\n\t<li>Necrosis is due to a cytotoxin, Myolactone, released by the organism</li>\n\t<li>\ufeffAcid-fast <span class=\"customMeta\" data-dictid=\"fe0005a48b1692777182143f69e1d5\">bacilli</span> in a <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> from the <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> support the diagnosis.</li>\n\t<li>The four main <span class=\"customMeta\" data-dictid=\"552e9ef8811692777186997018b858\">diagnostic</span> laboratory tests for <span class=\"customMeta\" data-dictid=\"0e1fdc2e151692777183bd7d6d196b\">Buruli ulcer</span> are direct <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> (with acid\u2010fast stains, <span class=\"customMeta\" data-dictid=\"3c0090c63c1692777182e695f98ad2\">auramine O</span> or Ziehl\u2013Neelsen), culture at 32\u00b0C, <span class=\"customMeta\" data-dictid=\"d69566338f1692777189ff10521054\">histopathology</span> (lympho-epithelioid cell <span class=\"customMeta\" data-dictid=\"8eedb6cec61692777196a6a3b93d3f\">proliferation</span> and <span class=\"customMeta\" data-dictid=\"15ca8931e616927771943d31a798a7\">panniculitis</span> with characteristic fat necrotic changes), <span class=\"customMeta\" data-dictid=\"fa67319b42169277719498abc93db6\">PCR</span> (highest sensitivity).</li>\n</ul>\n\n<p><strong>Treatment:</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:576px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\">Small ulcers(<5cm)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\">Rifampicin + Clarithromycin/Streptomycin for\u00a08 weeks</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\">Large ulcers (>5cm)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align:center\">Surgery is recommended along with <span class=\"customMeta\" data-dictid=\"ff6b4f4d491692777181a02bad075e\">antibiotic</span> therapy.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p><br />\n<strong>Cutaneous <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">Tuberculosis</span> (Option B)</strong><strong>:</strong>\u00a0Although <span class=\"customMeta\" data-dictid=\"94f1c8df1f1692777185bd6a7c3fff\">cutaneous</span> <span class=\"customMeta\" data-dictid=\"8d98ce2d3616927772013bfc3e0528\">tuberculosis</span> is caused by an <span class=\"customMeta\" data-dictid=\"440f2b916316927771808b8ad44a64\">acid-fast</span> <span class=\"customMeta\" data-dictid=\"461ee544961692777182696a650b05\">bacillus</span> (Mycobacterium tuberculosis), it typically presents in areas with a high <span class=\"customMeta\" data-dictid=\"f86aae0bd61692777196f91458c9dd\">prevalence</span> of tuberculosis.</p>\n\n<p><br />\n<strong>Cutaneous <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">Leishmaniasis</span> (Option C):</strong></p>\n\n<ul>\n\t<li>Cutaneous <span class=\"customMeta\" data-dictid=\"f60a0a7ad716927771916ed83e3586\">leishmaniasis</span> causes skin ulcers, but these are typically painful and often associated with travel to <span class=\"customMeta\" data-dictid=\"59c8c1e4b316927771873c98afae15\">endemic</span> areas, such as the Middle East or South America.</li>\n\t<li>\ufeff\ufeffA <span class=\"customMeta\" data-dictid=\"6777533153169277719804fcbbf2d1\">smear</span> would show <span class=\"customMeta\" data-dictid=\"5dc59b3af1169277719191cbbe6447\">Leishmania</span> parasites, not <span class=\"customMeta\" data-dictid=\"440f2b916316927771808b8ad44a64\">acid-fast</span> bacilli.</li>\n</ul>\n\n<p><br />\n\u200b\u200b\u200b\u200b\u200b\u200b\u200b<strong>Diabetic <span class=\"customMeta\" data-dictid=\"7b4370a0b01692777201a5bc0739c2\">Ulcer</span> (Option D)</strong> <strong>:</strong> <span class=\"customMeta\" data-dictid=\"a5603ff98316927771865d7ae41f16\">Diabetic</span> ulcers are typically found on pressure points of the feet, are associated with <span class=\"customMeta\" data-dictid=\"2d9476094c16927771933bcb162f19\">neuropathy</span> and <span class=\"customMeta\" data-dictid=\"526ede3fee169277720184378acc5e\">vascular</span> disease, and do not usually present with undermined edges or a necrotic base unless secondarily infected.</p>",
    "question_images": [
      "https://image.prepladder.com/content/xemgCnPPyjHtxqMjjRok1723059084.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/nVlsccTHlR2P7CFlYDRt1729055785.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/6704sllEhIw4fd7EaD3g1728886690.mp3"
  }
];
        let quizName = '05 Cutaneous Tuberculosis';
        let hierarchy = ["PrepLadder", "qBank", "Dermatology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>