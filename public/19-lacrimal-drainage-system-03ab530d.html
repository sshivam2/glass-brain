<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>19 Lacrimal Drainage System - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Ophthalmology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">10</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>Which structure within the lacrimal passages prevents the backflow of tears from the nasal cavity into the nasolacrimal duct?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Valve of Hasner"
      },
      {
        "id": 2,
        "text": "The valve of Rosenm\u00fcller"
      },
      {
        "id": 3,
        "text": "Orbital lobe"
      },
      {
        "id": 4,
        "text": "Glands of Krause"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n\t<li><strong>The <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> of Hasner</strong> is a crucial structure located at the lower end of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct, where it opens into the <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"6da3f0528c1692777192e9b608d735\">meatus</span> of the nose.</li>\n\t<li>Its primary function is to prevent the <span class=\"customMeta\" data-dictid=\"e38ca8e6931692777197ee6a68ac56\">retrograde</span> flow of fluid from the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> into the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct, which is particularly important during actions like nose blowing.</li>\n\t<li>This <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> ensures that <span class=\"customMeta\" data-dictid=\"1717bdb5d21692777200d45e31ceed\">tears</span> drain properly from the eye into the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> without backflow.</li>\n\t<li><img alt=\"hasner\" data-author=\"\" data-hash=\"4295\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/KkIDsMjSUan09jOnjakT1743142385.png\" /></li>\n\t<li>\n\t<p><strong>The <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> of Rosenm\u00fcller (Option B)</strong> is a mucosal fold located at the <span class=\"customMeta\" data-dictid=\"9f0942c0b51692777190ee876713e5\">junction</span> where the common <span class=\"customMeta\" data-dictid=\"e8649e26881692777183a71c2931d2\">canaliculus</span> (formed by the superior and <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> canaliculi) opens into the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> sac. This <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> is responsible for preventing the backward flow of <span class=\"customMeta\" data-dictid=\"1717bdb5d21692777200d45e31ceed\">tears</span> from the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> into the canaliculi, thereby maintaining the forward movement of <span class=\"customMeta\" data-dictid=\"1717bdb5d21692777200d45e31ceed\">tears</span> toward the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct.</p>\n\t\u00a0\n\n\t<p><strong>Orbital <span class=\"customMeta\" data-dictid=\"d7dd6ae43c1692777191cf75c0bd58\">Lobe</span> (Option C)</strong> is one of the two lobes of the main <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> gland, which is involved in the production of <span class=\"customMeta\" data-dictid=\"20f478f55f1692777197e351415f8f\">reflex</span> tears. It is located in the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"30a1ba21881692777203de4e7b8537\">fossa</span> of the <span class=\"customMeta\" data-dictid=\"35aa36279d16927772031c7ce8d6e5\">frontal</span> bone and plays no role in the prevention of <span class=\"customMeta\" data-dictid=\"bbee2f1b011692777182d9b84068ec\">backflow</span> within the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> passages.</p>\n\t<br />\n\t<img alt=\"lacrimal\" data-author=\"\" data-hash=\"4294\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/ijG4TrV1N0KvC4NyeFlc1743142337.png\" /></li>\n\t<li><strong>Glands of Krause (Option D) </strong>are <span class=\"customMeta\" data-dictid=\"9088e1c7f616927771802e7f6d2541\">accessory</span> <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> glands found in the conjunctival fornices. They are responsible for producing <span class=\"customMeta\" data-dictid=\"923af580cf16927771829606bce2a7\">basal</span> tears, which help maintain eye moisture. These glands do not participate in preventing <span class=\"customMeta\" data-dictid=\"bbee2f1b011692777182d9b84068ec\">backflow</span> within the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system.</li>\n\t<li>\u00a0</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/KkIDsMjSUan09jOnjakT1743142385.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/XVp6R0V9RVcnnoophHsH1746001760.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/6dXrEerjunqAo1TrX5G71746001596.mp3"
  },
  {
    "text": "<p>Which of the following is a cause of lacrimal pump failure, leading to excessive tearing (epiphora)?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Trauma to the canaliculus"
      },
      {
        "id": 2,
        "text": "Bell\u2019s palsy"
      },
      {
        "id": 3,
        "text": "Obstruction of the nasolacrimal duct"
      },
      {
        "id": 4,
        "text": "Narrowing of the punctum"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct answer: B) Bell\u2019s palsy</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li>The <strong>lacrimal pump mechanism</strong> relies on the proper function of the <strong>orbicularis oculi</strong> muscle and the correct positioning of the punctum.</li>\n\t<li><strong>In Bell\u2019s palsy,</strong> Weakness of the orbicularis <span class=\"customMeta\" data-dictid=\"7860833ed41692777194b7b9b531f7\">oculi</span> muscle prevents proper <span class=\"customMeta\" data-dictid=\"819ddea9e51692777187cdff06b437\">eyelid</span> <span class=\"customMeta\" data-dictid=\"2b4569285f1692777184282b1ca3f1\">closure</span> and tear drainage, as the orbicularis <span class=\"customMeta\" data-dictid=\"7860833ed41692777194b7b9b531f7\">oculi</span> muscle is involved in both the tear <span class=\"customMeta\" data-dictid=\"bdc0a4cb9016927771995488a2b961\">suction</span> and <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> phase of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> pump mechanism.</li>\n\t<li>This leads to <strong>epiphora </strong>(excessive tearing).</li>\n</ul>\n\n<p><strong>Clinical evaluation for Watering Eye (Epiphora):</strong></p>\n\n<ul>\n\t<li><strong><u>Eyelid and <span class=\"customMeta\" data-dictid=\"d80c028f0b169277719629c2228a6f\">Punctal</span> Examination</u></strong><u>:</u> <span class=\"customMeta\" data-dictid=\"30ddb5b09916927771877ac72c09b7\">Eversion</span> of the <span class=\"customMeta\" data-dictid=\"4ce248062516927771965f55d1bf0a\">punctum</span> can be observed in <span class=\"customMeta\" data-dictid=\"410b701d9916927771861ac447b041\">ectropion</span> or lax eyelids.</li>\n</ul>\n\n<p><strong><u>Fluorescein <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">Dye</span> Test:</u></strong> This test can help assess the tear <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system by observing the time it takes for <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> to disappear from the eye.</p>\n\n<p><img alt=\"flourescein\" data-author=\"\" data-hash=\"4296\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/s2rdGFkN3oZPG63bTWI61743142546.png\" /></p>\n\n<ul>\n\t<li><strong><u>Lacrimal Syringing test</u></strong><u>:</u> Testing with probing or syringing may help identify blockages in the tear <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system, such as in the <span class=\"customMeta\" data-dictid=\"3b257c82f81692777183a558273470\">canaliculi</span> or <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct.</li>\n</ul>\n\n<p><strong>Trauma to the <span class=\"customMeta\" data-dictid=\"e8649e26881692777183a71c2931d2\">canaliculus</span> (Option A): </strong>While an injury to the <span class=\"customMeta\" data-dictid=\"e8649e26881692777183a71c2931d2\">canaliculus</span> can block the tear <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system, it does not directly disrupt the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> pump mechanism. Trauma may cause <span class=\"customMeta\" data-dictid=\"561a199cce1692777198225706434c\">scar</span> formation or narrowing, but it primarily impacts tear flow through mechanical <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> rather than pump function.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Obstruction of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> (Option C): </strong>This condition involves a <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> in the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct, preventing proper tear drainage. However, it is considered a mechanical <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> rather than a <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> pump failure.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Narrowing of the <span class=\"customMeta\" data-dictid=\"4ce248062516927771965f55d1bf0a\">punctum</span> (Option D): </strong> <span class=\"customMeta\" data-dictid=\"d80c028f0b169277719629c2228a6f\">Punctal</span> <span class=\"customMeta\" data-dictid=\"0c9567c6cb16927771996c6bc2b21e\">stenosis</span> refers to a narrowing or <span class=\"customMeta\" data-dictid=\"2b4569285f1692777184282b1ca3f1\">closure</span> of the <span class=\"customMeta\" data-dictid=\"4ce248062516927771965f55d1bf0a\">punctum</span> (the opening at the corner of the <span class=\"customMeta\" data-dictid=\"819ddea9e51692777187cdff06b437\">eyelid</span> that drains tears). While this causes tear accumulation, it results from a physical <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> at the punctum, not from a <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> pump mechanism.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/s2rdGFkN3oZPG63bTWI61743142546.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/DGyfpAGGsxsQdS8mHuNG1746002002.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/jlMkZqbVZg5gQh0vpzgC1746001943.mp3"
  },
  {
    "text": "<p>A 65 y/o male presents with persistent tearing in his right eye that has worsened over the past year. The physician orders an imaging study to pinpoint the exact location of the blockage and assess the condition of the lacrimal sac. Which investigation is most appropriate for this purpose?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Dacryocystography"
      },
      {
        "id": 2,
        "text": "Fluorescein Dye Disappearance Test (FDDT)"
      },
      {
        "id": 3,
        "text": "Dacryoscintigraphy"
      },
      {
        "id": 4,
        "text": "Lacrimal Syringing"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer: A)\u00a0Dacryocystography</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>Dacryocystography (DCG) </strong>provides highly detailed <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> information about the entire <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system.</li>\n\t<li>By injecting contrast <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> into the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> and taking X-rays, DCG can precisely identify the site, extent, and nature of the blockage, making it the investigation of choice when <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> clarity is required.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"normal dacro\" data-author=\"\" data-hash=\"4297\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/ZLcjgDMBSC2a6tJlLWXo1743142720.png\" /></p>\n\n<p style=\"text-align:center\"><img alt=\"filling defect\" data-author=\"\" data-hash=\"4298\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/JmX8Yb5w5cE7L9WEsfjN1743142754.png\" /></p>\n\n<p><strong>Fluorescein <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">Dye</span> Disappearance Test (FDDT) (Option B): </strong></p>\n\n<ul>\n\t<li>2 drops of the Fluorescein <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> are <span class=\"customMeta\" data-dictid=\"6a367ebd0c169277719091155a5b0f\">injected</span> into both the conjunctival sacs.</li>\n\t<li>It usually disappears in 2 minutes in the normal eye.</li>\n\t<li>Longer <span class=\"customMeta\" data-dictid=\"b668aed705169277719744b6db8f8e\">retention</span> of the <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> indicates any <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> or <span class=\"customMeta\" data-dictid=\"3662597407169277718640a12868f5\">dysfunction</span> in tear flow.</li>\n\t<li>It is mainly used to assess the overall efficiency of tear <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> and does not provide information on the exact location or nature of any <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> within the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> system.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Dacryoscintigraphy (Option C) </strong>or <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> scintillography is a functional test that evaluates the rate at which <span class=\"customMeta\" data-dictid=\"1717bdb5d21692777200d45e31ceed\">tears</span> flow through the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system by <span class=\"customMeta\" data-dictid=\"ebb0986d331692777200ab09e1b2e8\">tracking</span> a <span class=\"customMeta\" data-dictid=\"f391426a781692777197a16039bb5e\">radioactive</span> tracer.</p>\n\n<ul>\n\t<li>While it is useful for identifying functional delays or blockages, it lacks the <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> <span class=\"customMeta\" data-dictid=\"55748e259a169277719699c6638990\">precision</span> needed to determine the exact location or cause of the obstruction.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"scintia\" data-author=\"\" data-hash=\"4299\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/vBdfgbwurk9rdG338CdK1743142795.png\" /></p>\n\n<p><strong>Lacrimal Syringing (Option D):</strong></p>\n\n<ul>\n\t<li>Normal <span class=\"customMeta\" data-dictid=\"894da1dfe6169277719871d7210619\">saline</span> is <span class=\"customMeta\" data-dictid=\"6a367ebd0c169277719091155a5b0f\">injected</span> into the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> using a syringe.</li>\n\t<li><u>No obstruction</u>: Free passage through the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> passages & the nose</li>\n\t<li><u>Partial obstruction</u>: <span class=\"customMeta\" data-dictid=\"894da1dfe6169277719871d7210619\">Saline</span> passes with resistance and pressure.</li>\n\t<li><u>Complete obstruction</u>: No fluid passes.\n\t<ul>\n\t\t<li>If fluid refluxes through the same punctum: <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">Obstruction</span> in the same or common canaliculus.</li>\n\t\t<li>If fluid refluxes through the opposite punctum: <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">Obstruction</span> in the lower <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> or NLD.</li>\n\t</ul>\n\t</li>\n\t<li>Although it can identify the degree of <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> & <span class=\"customMeta\" data-dictid=\"f3c62587931692777181dabdaa512d\">approximate</span> <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> site, it does not offer detailed <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> information.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/ZLcjgDMBSC2a6tJlLWXo1743142720.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/uKtjrIVtWVzcZgcOjCEv1746002618.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/tzsdUTvQQV14DXayELPu1746002513.mp3"
  },
  {
    "text": "<p>A 50 y/o man undergoes Jones Test 1 for chronic tearing, which shows no dye on the cotton bud placed in the inferior meatus. Following this, Jones Test 2 is performed, and fluorescein dye is detected after lacrimal syringing. What does this result suggest?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Partial obstruction within the lacrimal passages"
      },
      {
        "id": 2,
        "text": "Complete obstruction of the nasolacrimal duct"
      },
      {
        "id": 3,
        "text": "Lacrimal pump failure"
      },
      {
        "id": 4,
        "text": "Primary hypersecretion of tears"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) Partial <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> within the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> passages</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>A positive Jones Test 2 </strong>indicates that the <span class=\"customMeta\" data-dictid=\"468accc4d3169277720252132f5b85\">fluorescein</span> <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> was able to enter the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> but could not reach the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> without syringing.</li>\n\t<li>This finding is typical of a partial <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> somewhere along the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> system, allowing some tear flow but not enough for normal drainage.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"Jones test 2\" data-author=\"\" data-hash=\"13295\" data-license=\"\" data-source=\"\" data-tags=\"June2025\" src=\"https://image.prepladder.com/notes/1R7SX2N5aBylOhJ6dGW41749131274.png\" /></p>\n\n<p><strong>Jones Test 1:</strong></p>\n\n<ul>\n\t<li><u>Purpose</u>: To distinguish between partial <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> and excessive tear production.</li>\n\t<li><u>Procedure</u>: <span class=\"customMeta\" data-dictid=\"468accc4d3169277720252132f5b85\">Fluorescein</span> <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> is placed in the conjunctival sac, and after 5 minutes, a cotton <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> soaked in anaesthetic is placed in the <span class=\"customMeta\" data-dictid=\"49c4ef5b9d1692777190c0277f8344\">inferior</span> <span class=\"customMeta\" data-dictid=\"6da3f0528c1692777192e9b608d735\">meatus</span> inside the nose. The cotton <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> is checked for dye.</li>\n\t<li><u>Interpretation:</u>\n\t<ul>\n\t\t<li>Positive: <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">Dye</span> on the cotton <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> indicates patent tear <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> and suggests hypersecretion.</li>\n\t\t<li>Negative: No <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> indicates potential <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> issues, requiring further testing with Jones Test.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p><strong>Jones Test 2:</strong></p>\n\n<ul>\n\t<li><u>Purpose:</u> Performed if Jones Test 1 is negative to <span class=\"customMeta\" data-dictid=\"c9001edbf216927771860f3475b44c\">differentiate</span> between partial <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> and pump failure.</li>\n\t<li><u>Procedure:</u> <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">Lacrimal</span> syringing is done while the cotton <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> remains in the nose.</li>\n\t<li><u>Interpretation:</u>\n\t<ul>\n\t\t<li><strong>Positive: <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">Dye</span> flushed onto the cotton <span class=\"customMeta\" data-dictid=\"fbaff1edd216927771835557d40049\">bud</span> indicates partial obstruction.</strong></li>\n\t\t<li>Negative: No <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> suggests <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> pump failure.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"Jones test 1\" data-author=\"\" data-hash=\"13294\" data-license=\"\" data-source=\"\" data-tags=\"June2025\" src=\"https://image.prepladder.com/notes/i0gzJBtSDXfUS8BMTIbF1749131257.png\" /></p>\n\n<p>\u00a0</p>\n\n<p><strong>Complete <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> (Option B): </strong></p>\n\n<ul>\n\t<li>In the case of a complete obstruction, the <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> would not move at all, even with syringing.</li>\n\t<li>Therefore, no <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> would be detected in the nose after jones test 2, which is different from the positive result in this patient.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Lacrimal pump failure (Option C)</strong> would result in a negative Jones Test 2, meaning that the <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> wouldn't move into the nose even with syringing, because the pumping action of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> system is impaired.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Primary <span class=\"customMeta\" data-dictid=\"0f03f178b51692777189f3658408a0\">hypersecretion</span> of <span class=\"customMeta\" data-dictid=\"1717bdb5d21692777200d45e31ceed\">tears</span> (Option D)</strong> would present with a positive Jones Test 1, where the <span class=\"customMeta\" data-dictid=\"e8a3764ab516927771863f3212fc41\">dye</span> would naturally pass through the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> system and into the nose without any obstruction.</p>\n\n<ul>\n\t<li>A negative Jones Test 1 followed by a positive Jones Test 2 makes this diagnosis unlikely.</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/1R7SX2N5aBylOhJ6dGW41749131274.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/EXyQLIemKBCDeNIZSWUR1746078913.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/d8nwROctC2cb6uuLjbqj1746078709.mp3"
  },
  {
    "text": "<p>A 9-month-old infant is brought to the clinic with ongoing tearing and discharge from the right eye. Despite regular lacrimal sac massage and topical antibiotics, the symptoms persist. What is the next best step in management?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Continue lacrimal sac massage and antibiotics"
      },
      {
        "id": 2,
        "text": "Probing of the nasolacrimal duct"
      },
      {
        "id": 3,
        "text": "Dacryocystorhinostomy (DCR)"
      },
      {
        "id": 4,
        "text": "Balloon catheter dilation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Probing of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct</strong></p>\n\n<p><strong>\u200b\u200b\u200b\u200b\u200b\u200b\u200bExplanation:</strong></p>\n\n<ul>\n\t<li>In <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> (CNLDO), <strong>persistent symptoms beyond 6\u20138 months</strong> of age, despite conservative management (e.g., Crigler <span class=\"customMeta\" data-dictid=\"c515f6a71d16927771919f574f1ee9\">massage</span> and antibiotics), warrant <strong>nasolacrimal <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> probing</strong>.<br />\n\t\u00a0</li>\n\t<li>Since this child is <strong>9 months old</strong> with <strong>no response to <span class=\"customMeta\" data-dictid=\"c515f6a71d16927771919f574f1ee9\">massage</span> and antibiotics</strong>, the <strong>next step is probing</strong>, which is often successful when done before 12 months.<br />\n\t\u00a0</li>\n</ul>\n\n<p><strong>Congenital <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">Nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">Duct</span> <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">Obstruction</span> (CNLDO):</strong></p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:610px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Aspect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Details</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Definition</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Blockage of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct, usually at the <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> of Hasner</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Typical Age</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Present from birth or early infancy</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Symptoms</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>\u2022 Chronic tearing (epiphora)</p>\n\n\t\t\t<p>\u2022 Discharge</p>\n\n\t\t\t<p>\u2022 <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">Recurrent</span> conjunctivitis</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>First-Line Management</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>\u2022 <strong>Crigler massage</strong> to open the duct</p>\n\n\t\t\t<p>\u2022 Topical antibiotics for infection</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Indications for Probing</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>\u2022 Persistence beyond <strong>6\u201310 months</strong></p>\n\n\t\t\t<p>\u2022 Repeated infections or failure of conservative therapy</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p style=\"text-align: center;\"><strong>Prognosis with Probing</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>>90% success if performed before 12\u201315 months</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Continue <span class=\"customMeta\" data-dictid=\"c515f6a71d16927771919f574f1ee9\">massage</span> and antibiotics (Option A):\u00a0</strong>Incorrect because symptoms have already persisted beyond the expected resolution time despite these measures.<br />\n\u00a0</p>\n\n<p><strong>Dacryocystorhinostomy (DCR) (Option C):\u00a0</strong>Incorrect as DCR is reserved for <strong>older children or adults</strong> when probing and <span class=\"customMeta\" data-dictid=\"83e66fab2f1692777190a43a6e300f\">intubation</span> fail.<br />\n\u00a0</p>\n\n<p><strong>Balloon <span class=\"customMeta\" data-dictid=\"e5d34563e91692777183da2015189e\">catheter</span> <span class=\"customMeta\" data-dictid=\"d141b433d2169277718681e3ff6bc3\">dilation</span> (Option D):\u00a0</strong>Incorrect because balloon dacryoplasty is typically considered for <strong>recurrent or failed probing</strong>, not first-line.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/7kzBHsZPxG1m8wisUEic1746010942.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/0O6v1a4SyGZUuHbf0ZTi1746010748.mp3"
  },
  {
    "text": "<p>Which of the following types of Dacryocystorhinostomy (DCR) is considered for treating nasolacrimal duct obstruction, offering the highest success rate?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "External Dacryocystorhinostomy (External DCR)"
      },
      {
        "id": 2,
        "text": "Endonasal Dacryocystorhinostomy (Endonasal DCR)"
      },
      {
        "id": 3,
        "text": "Endocanalicular Laser Dacryocystorhinostomy (Laser DCR)"
      },
      {
        "id": 4,
        "text": "Conjunctivodacryocystorhinostomy (CDCR)"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>External <span class=\"customMeta\" data-dictid=\"eaea364ab91692777185bcc8181eff\">Dacryocystorhinostomy</span> (External DCR)</strong><strong> </strong> procedure is performed through an <span class=\"customMeta\" data-dictid=\"2afbd932801692777190be690704b3\">incision</span> near the inner corner of the eye, providing direct access to the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> and <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> mucosa. It is widely done <strong>due to its high success rate</strong>, which exceeds <strong>90%</strong>. However, it leaves a visible <span class=\"customMeta\" data-dictid=\"561a199cce1692777198225706434c\">scar</span> and may result in greater blood loss compared to other methods.<img alt=\"dcr\" data-author=\"\" data-hash=\"4302\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/inufGQ1pLHF8P6hGPVpP1743143242.png\" /></p>\n\n<p><strong>Endonasal <span class=\"customMeta\" data-dictid=\"eaea364ab91692777185bcc8181eff\">Dacryocystorhinostomy</span> (Endonasal DCR) (Option B) </strong>involves using an <span class=\"customMeta\" data-dictid=\"e3a3b038c216927771875644f31cc5\">endoscope</span> inserted through the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> <span class=\"customMeta\" data-dictid=\"ddba4206eb169277718335596e86da\">cavity</span> to create a <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> opening, thus avoiding any external incision. While it has the advantage of being scarless and typically involves less bleeding, its success rate is slightly lower, ranging between 70-90%.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Endocanalicular Laser <span class=\"customMeta\" data-dictid=\"eaea364ab91692777185bcc8181eff\">Dacryocystorhinostomy</span> (Laser DCR) (Option C): </strong>This method utilizes a laser passed through the canaliculli to create a <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> opening. It is minimally <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> and can be performed quickly under local anaesthesia. However, its success rate is lower than external or <span class=\"customMeta\" data-dictid=\"f272ea726b16927771870633c086f6\">endonasal</span> DCR, around 70%, and patients often require additional surgery if the initial procedure fails.</p>\n\n<p><img alt=\"dcr\" data-author=\"\" data-hash=\"4304\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/kaE0RS3Ewr1VvxsnxwRJ1743143317.png\" /></p>\n\n<p><strong>Conjunctivodacryocystorhinostomy (CDCR) (Option D):</strong> CDCR is specifically used when both the <span class=\"customMeta\" data-dictid=\"3b257c82f81692777183a558273470\">canaliculi</span> and the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> are blocked. It is a more specialized procedure compared to standard DCR and is not typically the first choice for isolated <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> obstruction.</p>\n\n<ul>\n\t<li>CDCR involves creating a passage directly from the <span class=\"customMeta\" data-dictid=\"e5353bffc416927771858f6d95b587\">conjunctival sac</span> to the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> cavity, often using a <strong>Jones tube</strong> and is reserved for more complex cases where the <span class=\"customMeta\" data-dictid=\"3b257c82f81692777183a558273470\">canaliculi</span> are also involved.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/inufGQ1pLHF8P6hGPVpP1743143242.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/86eDFD50VIfXdbHIAC7Q1746014569.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/xS9nMnUAVqBm19W3lsJA1746014468.mp3"
  },
  {
    "text": "<p>A 2-week-old infant presents with a bluish swelling in the inner corner of the right eye. The parents report excessive tearing and some slimy discharge from the eye. There is no history of trauma or illness. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Congenital Dacryocele"
      },
      {
        "id": 2,
        "text": "Dacryoadenitis"
      },
      {
        "id": 3,
        "text": "Dacryops"
      },
      {
        "id": 4,
        "text": "Chronic Dacryocystitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer:\u00a0 A)\u00a0Congenital Dacryocele</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The bluish <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> in the inner corner of the eye, along with excessive tearing and <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> discharge, is characteristic of <strong>congenital dacryocele.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Congenital Dacryocele:</strong></p>\n\n<ul>\n\t<li>A condition where <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> causes <span class=\"customMeta\" data-dictid=\"2c0fb943ce16927771815ddeb9824d\">amniotic</span> fluid accumulation in the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> sac, leading to a <span class=\"customMeta\" data-dictid=\"38c41e122116927771859b63deb0ed\">cystic</span> <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> below the inner corner of the eye.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"dacrocoele\" data-author=\"\" data-hash=\"4305\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/W0Mi2FDk042mxWLwmieP1743143446.png\" /></p>\n\n<p><strong>Aetiology:</strong></p>\n\n<ul>\n\t<li><strong>Obstruction</strong>: <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">Blockage</span> at the Hasner <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> (distal end) and Rosenmuller <span class=\"customMeta\" data-dictid=\"416dd1004a169277720177d9a6adc5\">valve</span> (proximal end) of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> duct.</li>\n\t<li><strong>Demographics</strong>: More common in females; can be <span class=\"customMeta\" data-dictid=\"92b4dd0d9516927772013f2e4296b7\">unilateral</span> or bilateral.</li>\n</ul>\n\n<p><strong>Clinical Features:</strong></p>\n\n<ul>\n\t<li>Bluish or greyish <span class=\"customMeta\" data-dictid=\"38c41e122116927771859b63deb0ed\">cystic</span> <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> in the <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> canthal area, noticeable at birth or shortly thereafter.</li>\n\t<li>Epiphora: Excessive tearing due to blocked tear drainage.</li>\n\t<li>Dacryocystitis: Inflammation or infection of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> sac.</li>\n\t<li>Conjunctival Discharge: <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">Mucous</span> or <span class=\"customMeta\" data-dictid=\"0c02372a7d1692777196974ab1d772\">purulent</span> <span class=\"customMeta\" data-dictid=\"9dd87431ba1692777186ecfb21d258\">discharge</span> from the eye, with possible redness and irritation.</li>\n</ul>\n\n<p><strong>Treatment:</strong></p>\n\n<ul>\n\t<li><strong>Conservative Management</strong>:\n\n\t<ul>\n\t\t<li>Digital Massage: Gentle <span class=\"customMeta\" data-dictid=\"c515f6a71d16927771919f574f1ee9\">massage</span> to relieve obstruction.</li>\n\t\t<li>Topical Antibiotics: To prevent or treat infections.</li>\n\t\t<li>Warm Compresses: Applied to promote <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> and comfort.</li>\n\t</ul>\n\t</li>\n\t<li><strong>Surgical Intervention</strong>:\n\t<ul>\n\t\t<li>Probing of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">Nasolacrimal</span> Duct: Clears obstruction, typically performed under general anaesthesia.</li>\n\t\t<li>Nasal Endoscopy: Checks for and addresses any <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> cysts or obstructions if needed.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Dacryoadenitis (Option B)</strong>\u00a0typically presents with a painful, red <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> of the outer third of the upper eyelid, often associated with <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> infections. The described <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> is not painful and is located in the <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> canthal area.</p>\n\n<p><strong>Dacryops (Option C)</strong>\u00a0presents as a <span class=\"customMeta\" data-dictid=\"38c41e122116927771859b63deb0ed\">cystic</span> <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> in the upper <span class=\"customMeta\" data-dictid=\"a17eac40ea16927772034ca233cb84\">fornix</span> due to blocked <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> ducts and would typically not be described as bluish or associated with <span class=\"customMeta\" data-dictid=\"26080f047a169277719334625cadef\">mucous</span> <span class=\"customMeta\" data-dictid=\"9dd87431ba1692777186ecfb21d258\">discharge</span> in the <span class=\"customMeta\" data-dictid=\"db46007ad21692777192dcc160a2e2\">medial</span> canthal area.</p>\n\n<p><strong>Chronic <span class=\"customMeta\" data-dictid=\"5a5d1e968a169277718529ef9c2b52\">Dacryocystitis</span> (Option D)</strong>\u00a0usually occurs when a <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> leads to <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> infections of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> over time. It is less likely in a 2-week-old infant presenting for the first time with these symptoms. Additionally, chronic <span class=\"customMeta\" data-dictid=\"5a5d1e968a169277718529ef9c2b52\">dacryocystitis</span> would typically involve more prolonged symptoms and <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> infections, which are not indicated in this scenario.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/W0Mi2FDk042mxWLwmieP1743143446.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/fRc6BUGsFvqg86cag2XJ1746026803.mp3",
    "explanation_audio_hin": ""
  },
  {
    "text": "<p>A 55 y/o woman presents with a persistent swelling below the inner corner of her left eye. She also reports a history of watery eyes and recurrent conjunctivitis. On examination, there is fluctuant swelling at the lacrimal sac, and mucoid fluid can be expressed. What is the most likely diagnosis and appropriate management?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Chronic Dacryocystitis; Probing and syringing."
      },
      {
        "id": 2,
        "text": "Chronic Dacryocystitis; Dacryocystorhinostomy (DCR)."
      },
      {
        "id": 3,
        "text": "Acute Dacryocystitis; Systemic antibiotics and abscess drainage."
      },
      {
        "id": 4,
        "text": "Acute Dacryocystitis; Dacryocystectomy (DCT)."
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The presence of a <span class=\"customMeta\" data-dictid=\"0ad4e5da4a16927771938fd4d86a52\">mucocele</span> suggests chronic<strong> <span class=\"customMeta\" data-dictid=\"5a5d1e968a169277718529ef9c2b52\">dacryocystitis</span> </strong>where the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> has been obstructed for a prolonged period, leading to the accumulation of <span class=\"customMeta\" data-dictid=\"14f3af3bf516927771939c1efb8726\">mucoid</span> fluid.</p>\n\n<p>Milky or <span class=\"customMeta\" data-dictid=\"be6fe9c6c316927771889dbaaf2b89\">gelatinous</span> <span class=\"customMeta\" data-dictid=\"14f3af3bf516927771939c1efb8726\">mucoid</span> fluid expressed from the lower <span class=\"customMeta\" data-dictid=\"4ce248062516927771965f55d1bf0a\">punctum</span> on pressing the <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> <strong>(positive <span class=\"customMeta\" data-dictid=\"9e495cf9cf16927771975bf315a060\">Regurgitation</span> test)</strong> indicates <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> mucocele.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Dacryocystorhinostomy (DCR)</strong> is the <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> procedure designed to create a new <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> between the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> and the <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> cavity, thus resolving the <span class=\"customMeta\" data-dictid=\"39f44b27bf169277719416f29a74ee\">obstruction</span> and restoring proper tear drainage. This approach addresses the underlying <span class=\"customMeta\" data-dictid=\"43c30dc8c8169277718317ffb7dea0\">blockage</span> and prevents recurrence.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:651px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Aspect</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Acute Dacryocystitis</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Chronic Dacryocystitis</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Aetiology</strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Acute <span class=\"customMeta\" data-dictid=\"b5a5dcf4021692777187e3c0d2d47d\">exacerbation</span> of chronic dacryocystitis</li>\n\t\t\t\t<li>Spread from neighbouring infected structures (e.g., sinuses, bones, <span class=\"customMeta\" data-dictid=\"02cf7655661692777185e2bf5c3254\">dental</span> abscess)</li>\n\t\t\t\t<li><strong>Causative organisms: </strong>Streptococcus haemolyticus, Pneumococcus, Staphylococcus</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li>Stasis and mild infection of long duration</li>\n\t\t\t\t<li>Common in women aged 40-60</li>\n\t\t\t\t<li><strong>Causes:</strong> <span class=\"customMeta\" data-dictid=\"116f86834a1692777181a914379270\">anatomical</span> factors (narrow bony canal), <span class=\"customMeta\" data-dictid=\"31c5d0e75f16927771938d8e2daa4c\">nasal</span> diseases, foreign bodies, infection.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Clinical Features/ Sequelae</strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ol>\n\t\t\t\t<li><strong>Stage of cellulitis: </strong>Painful <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> at the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> sac, epiphora, fever, redness, and oedema.</li>\n\t\t\t\t<li><strong>Lacrimal abscess: </strong>Pus-filled sac, <span class=\"customMeta\" data-dictid=\"1adaaa6ded16927772023e7fe0c856\">fluctuant</span> swelling, may <span class=\"customMeta\" data-dictid=\"e73553a3a5169277719787fd5f4680\">rupture</span> forming an abscess.</li>\n\t\t\t\t<li><strong>Fistula formation: </strong>Untreated <span class=\"customMeta\" data-dictid=\"5618681fbe16927771804370383aaa\">abscess</span> leads to <span class=\"customMeta\" data-dictid=\"f71e485d131692777199151d1076d2\">spontaneous</span> discharge, forming a fistula.</li>\n\t\t\t</ol>\n\t\t\t</td>\n\t\t\t<td rowspan=\"4\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ol>\n\t\t\t\t<li><strong>Stage of chronic catarrhal dacryocystitis: </strong>Watering eye, mild redness, NLD block</li>\n\t\t\t\t<li><strong>Lacrimal mucocele: </strong>Swelling below inner canthus, <span class=\"customMeta\" data-dictid=\"14f3af3bf516927771939c1efb8726\">mucoid</span> fluid regurgitation.</li>\n\t\t\t\t<li><strong>Chronic <span class=\"customMeta\" data-dictid=\"a48a50d87216927771994f1cfe9b7d\">suppurative</span> dacryocystitis: </strong>Purulent <span class=\"customMeta\" data-dictid=\"9dd87431ba1692777186ecfb21d258\">discharge</span> (d/t infection), <span class=\"customMeta\" data-dictid=\"c64e3a661b1692777197afc2ff7bca\">recurrent</span> conjunctivitis.</li>\n\t\t\t</ol>\n\n\t\t\t<ol>\n\t\t\t\t<li><strong>Chronic fibrotic sac: </strong>Thickened mucosa, persistent epiphora, <span class=\"customMeta\" data-dictid=\"863f5457381692777190f05632a8b2\">irregular</span> folds.</li>\n\t\t\t</ol>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Complications</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Conjunctivitis, corneal ulcer, lid abscess, <span class=\"customMeta\" data-dictid=\"bfe6beb7131692777194500ac5f2d2\">orbital</span> cellulitis, <span class=\"customMeta\" data-dictid=\"9fdd7489051692777202cffe3f24cc\">facial</span> cellulitis, rarely <span class=\"customMeta\" data-dictid=\"34f284128d1692777183e1cf6e17d7\">cavernous</span> sinus</p>\n\n\t\t\t<p>thrombosis.</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p>Conjunctivitis, <span class=\"customMeta\" data-dictid=\"410b701d9916927771861ac447b041\">ectropion</span> of lower lid, risk of corneal ulcers.</p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<p><strong>Treatment</strong></p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Cellulitis:</strong> <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">Systemic</span> antibiotics, anti-inflammatory drugs, hot fomentation.</li>\n\t\t\t\t<li><strong>Lacrimal abscess:</strong> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">Drainage</span> with incision, antibiotics, possible DCT or DCR later.</li>\n\t\t\t\t<li><strong>External fistula: </strong>Fistulectomy with DCT or DCR after controlling infection.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td rowspan=\"3\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:middle\">\n\t\t\t<ul>\n\t\t\t\t<li><strong>Conservative: </strong>Probing and syringing (early stages).</li>\n\t\t\t\t<li><strong>Dacryocystorhinostomy (DCR):</strong> Preferred surgery to re-establish <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> drainage.</li>\n\t\t\t\t<li><strong>Dacryocystectomy (DCT):</strong> Indicated if DCR is contraindicated or in cases of fibrosis, infection, or old age.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p><strong>Chronic Dacryocystitis; Probing and syringing (Option A): </strong>Probing and syringing are not typically <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> for a mucocele, which suggests more advanced or longstanding dacryocystitis.</p>\n\n<p><strong>Acute Dacryocystitis; <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">Systemic</span> antibiotics and <span class=\"customMeta\" data-dictid=\"5618681fbe16927771804370383aaa\">abscess</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> (Option C): </strong>The scenario describes a mucocele, indicative of a chronic issue, not <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> dacryocystitis. Management of <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> <span class=\"customMeta\" data-dictid=\"5a5d1e968a169277718529ef9c2b52\">dacryocystitis</span> would involve different treatments.</p>\n\n<p><strong>Acute Dacryocystitis; <span class=\"customMeta\" data-dictid=\"c023c8143b1692777185c6f5d54978\">Dacryocystectomy</span> (DCT) (Option D): </strong>DCT is generally reserved for chronic cases or significant fibrosis, not for the management of a <span class=\"customMeta\" data-dictid=\"0ad4e5da4a16927771938fd4d86a52\">mucocele</span> in an <span class=\"customMeta\" data-dictid=\"4cdc8161f71692777180df58cafa93\">acute</span> setting.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/jcf7CZGOT06gmAShIMyf1746027157.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/ipVbrwfOBuAmMUsYNcB21746027095.mp3"
  },
  {
    "text": "<p>A 60 y/o man presents with watery eyes, redness, swelling at the inner corner of his right eye, and persistent thick yellow discharge. O/E there is pouting of lacrimal puncta and yellow granules from the punctum upon massage. Which organism is most likely responsible, and what is the definitive treatment?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Eikenella corrodens; Oral antibiotics and steroid drops."
      },
      {
        "id": 2,
        "text": "Staphylococcus aureus; Topical antibiotics and warm compresses"
      },
      {
        "id": 3,
        "text": "Actinomyces israelii; Canaliculotomy"
      },
      {
        "id": 4,
        "text": "Chlamydia trachomatis; Irrigation and syringing of the tear duct."
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct answer: C)\u00a0Actinomyces israelii; Canaliculotomy</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<ul>\n\t<li><strong>Canaliculitis</strong> is diagnosed based on symptoms and clinical findings.</li>\n\t<li><strong>Actinomyces israelii</strong> is the most common cause of <span class=\"customMeta\" data-dictid=\"c992c409191692777183053d66ff4d\">canaliculitis</span> with yellow granules.</li>\n\t<li><strong>Canaliculotomy</strong> is the <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> treatment to remove concretions and resolve the infection.</li>\n\t<li>It involves accessing and cleaning out the <span class=\"customMeta\" data-dictid=\"e8649e26881692777183a71c2931d2\">canaliculus</span> to remove concretions and ensure thorough treatment of the infection.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Canaliculitis:</strong></p>\n\n<ul>\n\t<li>Canaliculitis is an <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> or infection of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> canaliculus.</li>\n</ul>\n\n<p><strong>Causes:</strong></p>\n\n<ul>\n\t<li>Bacterial infection- most commonly<strong> Actinomyces israelii</strong></li>\n\t<li>Other bacteria: Staphylococcus, Streptococcus, Eikenella, Lactococcus, Nocardia</li>\n\t<li>Fungal infections.</li>\n\t<li>Viral infections.</li>\n</ul>\n\n<p><strong>Symptoms:</strong></p>\n\n<ul>\n\t<li>Eye-watering & discharge.</li>\n\t<li>Swelling and redness near the corner of the eye</li>\n\t<li>Pouting or swollen <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> punctum</li>\n\t<li>Mattering on the eyelids</li>\n\t<li>Expression of yellow granules, concretions, or stones from the <span class=\"customMeta\" data-dictid=\"4ce248062516927771965f55d1bf0a\">punctum</span> when massaged</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"puncta\" data-author=\"\" data-hash=\"4306\" data-license=\"\" data-source=\"\" data-tags=\"March2025\" src=\"https://image.prepladder.com/notes/ehg0tPXqziKugDHVFWZ51743143776.png\" /></p>\n\n<p><strong>Treatment:</strong></p>\n\n<ul>\n\t<li><strong>Initial: </strong>Topical and <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> antibiotics, warm compresses, local massage, <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">irrigation</span> and syringing of the tear duct</li>\n\t<li><strong>Definitive: </strong>Surgery often required for effective treatment\n\t<ul>\n\t\t<li>Canaliculotomy for direct access and curettage. Safe and effective procedure.</li>\n\t\t<li>Punctal <span class=\"customMeta\" data-dictid=\"d141b433d2169277718681e3ff6bc3\">dilation</span> or punctoplasty with curettage</li>\n\t\t<li>Canaliculoplasty with <span class=\"customMeta\" data-dictid=\"83e66fab2f1692777190a43a6e300f\">intubation</span> to avoid scarring</li>\n\t</ul>\n\t</li>\n\t<li>Follow-up with <span class=\"customMeta\" data-dictid=\"ff6b4f4d491692777181a02bad075e\">antibiotic</span> treatment and addressing underlying causes, such as a loose <span class=\"customMeta\" data-dictid=\"d80c028f0b169277719629c2228a6f\">punctal</span> plug</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Eikenella corrodens; Oral antibiotics and <span class=\"customMeta\" data-dictid=\"a48ce797cd1692777199efc43b3e4c\">steroid</span> drops (Option A): </strong>Eikenella corrodens is less common than Actinomyces israelii for canaliculitis. The treatment listed (oral antibiotics and <span class=\"customMeta\" data-dictid=\"a48ce797cd1692777199efc43b3e4c\">steroid</span> drops) is not <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> for this condition but rather a part of initial management.</p>\n\n<p><strong>Staphylococcus aureus; <span class=\"customMeta\" data-dictid=\"9c5b45e3b916927772000167f2669a\">Topical</span> antibiotics and warm compresses (Option B): </strong>Staphylococcus aureus can cause canaliculitis, but Actinomyces israelii is more common. The treatment mentioned (topical antibiotics and warm compresses) is not sufficient for <span class=\"customMeta\" data-dictid=\"32b854324a1692777185c6c79fdc99\">definitive</span> management but is a part of initial management.</p>\n\n<p><strong>Chlamydia trachomatis; <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">Irrigation</span> and syringing of the tear <span class=\"customMeta\" data-dictid=\"6198b5f22b16927771867e4ef8108f\">duct</span> (Option D): </strong>Chlamydia trachomatis is not typically responsible for <span class=\"customMeta\" data-dictid=\"c992c409191692777183053d66ff4d\">canaliculitis</span> with yellow granules. <span class=\"customMeta\" data-dictid=\"ea6a429a6b1692777190801502ba55\">Irrigation</span> and syringing alone are part of initial management.</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/ehg0tPXqziKugDHVFWZ51743143776.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/sR9uV7jXRpcrtXjmoxkd1745223709.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/x2Re9JlRh10SEv9bnRkX1745223846.mp3"
  },
  {
    "text": "<p>A 27 yeal old man presents with a painless, slow-growing, firm mass on the upper eyelid that has been gradually increasing in size over the past year. On examination, the lesion is well-circumscribed, mobile, and non-tender, with no signs of ulceration or inflammation. Imaging reveals a well-defined, lobulated mass without bony invasion. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Pleomorphic Adenoma"
      },
      {
        "id": 2,
        "text": "Lymphoma"
      },
      {
        "id": 3,
        "text": "Lacrimal Gland Carcinoma"
      },
      {
        "id": 4,
        "text": "Dacryocystitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct answer: A) <span class=\"customMeta\" data-dictid=\"d391ed597c1692777195574de6cc11\">Pleomorphic</span> Adenoma</strong></p>\n\n<p><strong>Explanation: </strong></p>\n\n<p><strong>Pleomorphic Adenoma: </strong></p>\n\n<ul>\n\t<li>Pleomorphic <span class=\"customMeta\" data-dictid=\"c3c9726266169277718021f4f0fa16\">adenoma</span> is the most common tumor of the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> gland.</li>\n\t<li>It typically present\u2019s as a benign,<strong> painless</strong>, firm, nontender and slow-growing mass.</li>\n\t<li>Location: Upper <span class=\"customMeta\" data-dictid=\"819ddea9e51692777187cdff06b437\">eyelid</span> or <span class=\"customMeta\" data-dictid=\"84f8846d621692777199722cf1f09e\">superotemporal</span> orbit.</li>\n\t<li>Occurs predominantly in young adult males.</li>\n</ul>\n\n<p><strong>Option C) <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">Lacrimal</span> <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> carcinoma:</strong></p>\n\n<ul>\n\t<li>Lacrimal <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> is a <strong>rare </strong>but aggressive <span class=\"customMeta\" data-dictid=\"0c7efd2b8716927771914c8cb19e54\">malignancy</span> with <strong>high <span class=\"customMeta\" data-dictid=\"9b7604d5461692777192546af7cabd\">morbidity</span> and mortality. </strong></li>\n\t<li>The most common type is <strong>adenoid <span class=\"customMeta\" data-dictid=\"38c41e122116927771859b63deb0ed\">cystic</span> carcinoma</strong> (50%), followed by <span class=\"customMeta\" data-dictid=\"d391ed597c1692777195574de6cc11\">pleomorphic</span> adenocarcinoma, <span class=\"customMeta\" data-dictid=\"bfe880c97416927771936bbfc7d7ec\">mucoepidermoid</span> carcinoma, and <span class=\"customMeta\" data-dictid=\"5be0ee4ea316927771997104326685\">squamous</span> cell carcinoma.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<h4><strong>Clinical Presentation:</strong></h4>\n\n<ul>\n\t<li><strong>Rapidly growing</strong>, <strong>painful </strong>mass in the <span class=\"customMeta\" data-dictid=\"84f8846d621692777199722cf1f09e\">superotemporal</span> orbit (months).</li>\n\t<li>Inferonasal globe displacement, proptosis, <span class=\"customMeta\" data-dictid=\"2cc1b4ff2216927771940a80e764a2\">ophthalmoplegia</span> (if <span class=\"customMeta\" data-dictid=\"a5c6cb079d16927771967e62ffee72\">posterior</span> extension).</li>\n\t<li>Hypoesthesia in the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> nerve distribution (perineural spread).</li>\n</ul>\n\n<p>\u00a0\n<h4><strong>Diagnosis</strong>:</h4>\n</p>\n\n<ul>\n\t<li>CT Scan: <span class=\"customMeta\" data-dictid=\"bbe1b94c491692777188fe4f85b1ce\">Heterogeneous</span> <span class=\"customMeta\" data-dictid=\"d5e7bb15851692777191b39417c26a\">lesion</span> with<strong> <span class=\"customMeta\" data-dictid=\"863f5457381692777190f05632a8b2\">irregular</span> serrated edges, bone invasion, and calcifications.</strong></li>\n\t<li>Biopsy: Confirms histology.</li>\n\t<li>Neurological assessment: Necessary due to <span class=\"customMeta\" data-dictid=\"849a50eb4a1692777195de19bee5ed\">perineural</span> spread.</li>\n</ul>\n\n<p>\u00a0\n<h4><strong>Management:</strong></h4>\n</p>\n\n<ul>\n\t<li>Wide <span class=\"customMeta\" data-dictid=\"81d12f9cb01692777199e44ff3f3c1\">surgical</span> excision/orbital <span class=\"customMeta\" data-dictid=\"b26b12affb16927771872ba42c137b\">exenteration</span> if extensive.</li>\n\t<li>Radiotherapy \u00b1 <span class=\"customMeta\" data-dictid=\"c7c5b5c17a16927771905ab1f7f8c2\">intra-arterial</span> chemotherapy/brachytherapy for palliation.</li>\n\t<li>Prognosis: Poor, especially with <span class=\"customMeta\" data-dictid=\"849a50eb4a1692777195de19bee5ed\">perineural</span> invasion.</li>\n</ul>\n\n<p><strong>Option B) Lymphoma: </strong>Lymphoma can present as a mass in the <span class=\"customMeta\" data-dictid=\"7a742b06701692777191bdca4f04a0\">lacrimal</span> <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> but often has associated <span class=\"customMeta\" data-dictid=\"8f2e7fd96116927771995b451b5c90\">systemic</span> symptoms and can cause more <span class=\"customMeta\" data-dictid=\"89275101301692777186567d1912a0\">diffuse</span> <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> rather than a distinct mass.</p>\n\n<p><strong>Option D) Dacryocystitis:</strong> It refers to <span class=\"customMeta\" data-dictid=\"e747a47db616927771908bff4b8931\">inflammation</span> of the <span class=\"customMeta\" data-dictid=\"7ae0be0842169277719364f6d75e91\">nasolacrimal</span> <span class=\"customMeta\" data-dictid=\"59ae5630de16927771988a866d1dea\">sac</span> and would typically present with pain, redness, and possibly discharge, along with <span class=\"customMeta\" data-dictid=\"e3d212ebd316927771996e0c472d4a\">swelling</span> in the lower eyelid.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/jURTA9XVVTY5RxWduzBP1746003248.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/4SiVzbvhCDMHbIJBE2mB1746003139.mp3"
  }
];
        let quizName = '19 Lacrimal Drainage System';
        let hierarchy = ["PrepLadder", "qBank", "Ophthalmology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>