<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>221 Medicine Neet 2022 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Medicine
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">23</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "A patient with diabetes mellitus for the past 5 years presents with vomiting and abdominal pain. She is non-compliant with medication and appears dehydrated. Investigations revealed a blood sugar value of 500 mg/dL and the presence of ketone bodies. What is the next best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous fluids with long acting insulin"
      },
      {
        "id": 2,
        "text": "Intravenous fluids"
      },
      {
        "id": 3,
        "text": "Intravenous insulin"
      },
      {
        "id": 4,
        "text": "Intravenous fluids with regular insulin"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The clinical vignette points to a diagnosis of <strong>diabetic ketoacidosis</strong> (DKA) for which the next best step in management would be <strong>intravenous fluids with regular insulin</strong>.</p>\n<p>DKA is a complication of diabetes mellitus that arises due to relative or absolute <strong>insulin deficiency,</strong> seen more commonly in patients with diabetes mellitus type 1.&nbsp;Clinical features include nausea, <strong>vomiting</strong>, <strong>abdominal pain</strong>, and tachycardia. Hyperglycemia leads to volume depletion and subsequent hypotension.<strong> Kussmaul respiration</strong> and <strong>fruity odor</strong> on the breath are characteristic of the condition.</p>\n<p>Investigation shows&nbsp;<strong>elevated glucose levels</strong> (250-600 mg/dL), <strong>ketonemia</strong>, and <strong>metabolic acidosis</strong> with a<strong> high anion gap</strong>.&nbsp;</p>\n<p>Patients with DKA are also at an increased risk of developing<strong> rhinocerebral mucormycosis</strong>. Coma and <strong>cerebral edema</strong> are extremely serious complications that can arise.</p>\n<p>Once the diagnosis is confirmed <strong>intravenous fluids</strong> should be given along with a <strong>bolus</strong> of short-acting regular insulin. Then, intravenous administration of 0.1 units/kg/hour of regular insulin is administered until acidosis resolves and the patient is stable.</p>\n<p>Insulin treatment and resolution of acidosis can lead to <strong>potassium store depletion</strong><strong>&nbsp;</strong>in DKA but it might be normal or slightly elevated at presentation. This is secondary to acidosis and volume depletion. If the initial potassium level is &lt;3.3 meq/L, insulin should not be administered till it is corrected.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A:<strong> Long-acting insulin</strong> is started only when the patient resumes eating.&nbsp;</p>\n<p>Option B: Intravenous insulin (bolus) is one of the initial steps along with intravenous fluids.</p>\n<p>Option C: Intravenous fluids are given as the first step in management. A bolus of intravenous insulin is also required.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The cerebrospinal fluid (CSF) specimen of a patient is shown below along with the microscopy. The report shows mononuclear cytosis, elevated proteins, and low sugars. Which of the following is the likely etiology?",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculous meningitis"
      },
      {
        "id": 2,
        "text": "Aseptic meningitis"
      },
      {
        "id": 3,
        "text": "Bacterial meningitis"
      },
      {
        "id": 4,
        "text": "Chemical meningitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario along with the cerebrospinal fluid (CSF) sample with <strong>cobweb-like clot</strong> and slide showing <strong>lymphocytic predominance</strong> points to a diagnosis of<strong> tubercular meningitis</strong>.&nbsp;</p>\n<p>Tuberculous meningitis caused by <em><strong>Mycobacterium tuberculosis</strong></em> is caused by the formation of <strong>tubercles</strong> in the brain parenchyma. This happens during the hematogenous spread of the bacilli during primary infection. It can also be due to the rupture of a subependymal tubercle into the subarachnoid space.</p>\n<p>Tuberculous meningitis presents as a <strong>subacute infection</strong> and has a longer course than bacterial meningitis. <strong>Ocular nerve palsy</strong> is a common association as there is marked meningeal involvement at the base of the brain. The patient can also develop hydrocephalus.</p>\n<p>The CSF sample shows a pellicle or <strong>cobweb-like clots</strong>. <strong>Acid-fast bacilli</strong> can be best isolated from these. There is usually <strong>lymphocytic leukocytosis</strong>, <strong>low glucose </strong>concentration, and <strong>elevated proteins</strong>. CSF culture remains the gold standard for diagnosis.&nbsp;</p>\n<p>The clinical triad of <strong>fever</strong>, <strong>headache</strong>, and<strong> nuchal rigidity</strong> is common to all types of meningitis. Nuchal rigidity is the resistance of the neck to passive flexion and is pathognomonic of meningeal irritation. <strong>Kernig's</strong> and <strong>Brudzinski's</strong> signs are other features of meningeal irritation. <strong>Raised intracranial pressure</strong> (ICP) is a complication that presents as<strong> papilledema</strong>, disorientation, or dilated poorly reactive pupils.</p>\n<p>Other options:</p>\n<p>Option B - <strong>Aseptic meningitis</strong> is commonly caused by <strong>enteroviruses</strong> such as coxsackieviruses, and varicella-zoster virus. It is more benign and usually self-limiting compared to pyogenic meningitis. Gram's staining of the CSF sample shows lymphocytosis but&nbsp;<strong>not</strong>&nbsp;the organism.</p>\n<p>Option C - <strong>Bacterial meningitis</strong> is most commonly caused by <em><strong>Streptococcus pneumoniae</strong></em> and <em>Neisseria meningitidis</em>. <strong>Blood culture</strong> can be used for diagnosis. CSF findings are described in the pearl below.&nbsp;<strong>Antibiotic prophylaxis</strong>&nbsp;is provided to the&nbsp;<strong>close contacts</strong>&nbsp;of persons with confirmed <strong>meningococcal</strong> disease.</p>\n<p>Option D - <strong>Chemical meningitis</strong> is a common cause of <strong>chronic</strong> meningitis. It can arise due to the rupture of tumor contents from a <strong>cystic glioma</strong>, dermoid cyst, or craniopharyngioma into the CSF.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/dafb9bf2283b45b59a0a7914f2e03006.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient diagnosed to be retro-positive was started on highly active antiretroviral therapy (HAART). Which of the following can be used to monitor treatment efficacy?",
    "choices": [
      {
        "id": 1,
        "text": "CD4+ T cell  count"
      },
      {
        "id": 2,
        "text": "Viral load"
      },
      {
        "id": 3,
        "text": "p24 antigen"
      },
      {
        "id": 4,
        "text": "Viral serotype"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>viral load</strong> can be assessed in a <strong>retro-positive patient</strong> started on <strong>highly active antiretroviral therapy</strong> (HAART) to <strong>monitor</strong> <strong>treatment efficacy</strong>.&nbsp;</p>\n<p>HAART or combination antiretroviral therapy is the mainstay in the management of retro positive patients. It is initiated soon after diagnosis except in cases of cryptococcal or tuberculous meningitis.&nbsp;</p>\n<p>After initiation of therapy, a<strong> ten-fold reduction</strong> in plasma human immunodeficiency virus (HIV) RNA levels in <strong>1-2 months</strong> can be expected. Within six months, a slower decline to &lt;50 copies/mL is anticipated. During the first month of therapy, a <strong>rise </strong>in<strong> CD4+ T cell count</strong> is also predicted. Out of these two parameters, viral load is the better choice to monitor treatment efficacy as it is more<strong> cost-effective</strong>.&nbsp;</p>\n<p><strong>Plasma HIV RNA levels</strong> signify the <strong>rate</strong> of<strong> CD4+ T-cell destruction</strong> and the magnitude of <strong>HIV replication</strong>. It should be monitored within 2-4 weeks of initiation of therapy and after any change in the treatment regimen. It should be repeated every 4-8 weeks till the RNA levels drop to &lt;200 copies/mL and then every 3-6 months subsequently.&nbsp;</p>\n<p>The indications for change in the treatment regimen are:</p>\n<ul>\n<li>&lt; 10-fold drop in HIV RNA levels within 4 weeks of initiation</li>\n<li>&ge; 3-fold increase from the nadir of plasma HIV RNA level not attributable to other causes</li>\n<li>Persistent decline in CD4+ T-cell counts</li>\n<li>Adverse effects</li>\n<li>Clinical deterioration</li>\n</ul>\n<p>Other options:</p>\n<p>Option C: <strong>p24 antigen</strong> is a core protein present in the capsid of the virus.</p>\n<p>Option D: <strong>Viral serotype</strong> does not play a role in monitoring treatment efficacy. Most cases of HIV are due to HIV-1. HIV-2, another human immunodeficiency virus can also cause disease in humans.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A female patient presents to you with a unilateral headache. It is associated with nausea, photophobia, and phonophobia. What is the drug of choice for acute management?",
    "choices": [
      {
        "id": 1,
        "text": "Flunarizine"
      },
      {
        "id": 2,
        "text": "Sumatriptan"
      },
      {
        "id": 3,
        "text": "Propranolol"
      },
      {
        "id": 4,
        "text": "Topiramate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical vignette is suggestive of an <strong>acute attack</strong> of <strong>migraine</strong>&nbsp;and the drug of choice for acute management is&nbsp;<strong>sumatriptan</strong>.</p>\n<p>Migraine is the second most common cause of headaches and is seen more commonly in <strong>women</strong>. It presents as an <strong>episodic headache</strong> associated with <strong>nausea</strong>, vomiting, <strong>photosensitivity</strong>, and <strong>sensitivity to sound </strong>(phonophobia). Common<strong> triggers</strong> include bright lights, sounds, and hunger.&nbsp;</p>\n<p>The release of vasoactive peptides such as <strong>calcitonin gene-related peptide</strong> (CGRP) by the trigeminal nucleus cells is the theory used to explain the pathogenesis of the condition. The neurotransmitters <strong>serotonin</strong> and <strong>dopamine</strong> also play a part.</p>\n<p><strong>Triptans</strong> are <strong>5-HT1B</strong> and <strong>5-HT1D receptor agonists</strong> and they act by arresting the nociceptive nerve signaling in the trigeminovascular system. In addition, they cause <strong>cranial vasoconstriction</strong>. Cardiac side effects such as transient myocardial ischemia, coronary artery vasospasm, and <strong>myocardial infarction</strong> can occur in patients with risk factors for coronary artery disease. Other side effects include sweating, nausea, and <strong>serotonin syndrome</strong> when used in combination with selective serotonin reuptake inhibitors (SSRIs) or tricyclic antidepressants (TCAs).</p>\n<p><strong>Ergotamine</strong>, an ergot alkaloid are serotonin receptor agonists which can be used to treat an acute attack. They produce <strong>long-lasting vasoconstriction</strong> and can result in <strong>gangrene</strong> of fingers and toes (ergotism). These drugs are contraindicated in sepsis, ischemic heart disease, and <strong>peripheral vascular disease</strong>.&nbsp;</p>\n<p>Migraine can broadly be classified into:</p>\n<ul>\n<li>Migraine with aura</li>\n<li>Migraine without aura</li>\n<li>Chronic migraine</li>\n</ul>\n<p>The migraine disability assessment score (MIDAS) can be used to assess the severity of the condition. <strong>Avoidance</strong> of recognized triggers is helpful to avoid symptoms. The various drugs used to treat an acute attack of migraine are non-steroidal anti-inflammatory drugs (NSAIDs), triptans, gepants (rimegepant), ditans (lasmiditan), and <strong>dopamine receptor antagonists</strong> (domperidone).&nbsp;</p>\n<p>In patients with&nbsp;<strong>&ge;4 attacks </strong>in a<strong> month</strong>, <strong>prophylactic</strong> medications can be used. The various FDA-approved drugs include <strong>propranolol</strong>, timolol, <strong>flunarizine</strong>, and <strong>topiramate</strong>.</p>\n<p>Other options:&nbsp;</p>\n<p>Option A - Flunarizine is a <strong>calcium channel blocker</strong> that can be used in migraine prophylaxis. Side effects include weight gain, depression, and parkinsonism.&nbsp;</p>\n<p>Option C - Propranolol is a <strong>non-selective&nbsp;&beta;-receptor antagonist</strong> that can be used to treat hypertension, <strong>arrhythmias</strong>, and migraine prophylaxis. It is contraindicated in patients with chronic obstructive pulmonary disease (COPD) as it can cause <strong>bronchoconstriction</strong>. Side effects include fatigue, depression, and insomnia.</p>\n<p>Option D - Topiramate is an FDA-approved drug for generalized tonic-clonic seizures, <strong>Lennox-Gastaut syndrome</strong>, and for migraine prophylaxis in adults. Adverse effects include somnolence, weight loss, and nervousness.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A hypertensive patient who is non-compliant with medication presents to you with sudden onset breathlessness. A chest X-ray was done, which is shown below. How will you manage this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous salbutamol"
      },
      {
        "id": 2,
        "text": "Intravenous nitroglycerine"
      },
      {
        "id": 3,
        "text": "Nebulization with salbutamol"
      },
      {
        "id": 4,
        "text": "Oxygen and antibiotics"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical vignette along with the X-ray given points to a diagnosis of <strong>acute cardiogenic pulmonary edema</strong>. It can be managed by the administration of <strong>intravenous nitroglycerin</strong>.</p>\n<p><strong>Acute severe hypertension</strong>, acute myocardial infarction, or <strong>exacerbation</strong> of chronic heart failure are some of the common causes of cardiogenic pulmonary edema. It can be precipitated by the <strong>discontinuation of medications&nbsp;</strong>(non-compliant patient), excessive salt intake, or tachyarrhythmias.&nbsp;</p>\n<p>It presents with <strong>severe dyspnea</strong>, <strong>pink frothy sputum</strong> production, diaphoresis, and cyanosis. Auscultation reveals <strong>rales</strong> and rhonchi in all lung fields. Chest X-ray shows increased <strong>interstitial markings</strong>, <strong>vascular redistribution</strong>, and alveolar edema in a<strong> butterfly</strong>&nbsp;pattern. <strong>Cardiomegaly</strong> might be seen in cases of chronic heart failure.</p>\n<p>Management of pulmonary edema includes the use of <strong>diuretics</strong>, <strong>nitrates</strong>, and <strong>morphine</strong> to decrease the preload. <strong>Nitroglycerin</strong> and isosorbide dinitrate have a <strong>rapid onset</strong> of action and can be given sublingually. If there is persistence of pulmonary edema and no hypotension, it can be administered intravenously.</p>\n<p><strong>Oxygen therapy</strong> to maintain a saturation &gt;92% is recommended. Positive-pressure ventilation through a face mask or endotracheal intubation is required if saturation is not maintained even with supplemental oxygen. A <strong>sitting</strong> <strong>position</strong> with legs hanging by the side of the bed can be used to reduce venous return in patients without hypotension.</p>\n<p>Non-cardiac causes of pulmonary edema are high altitude, sepsis, and disseminated intravascular coagulation.&nbsp;</p>\n<p><strong>Heart failure</strong> is a manifestation of most chronic cardiac conditions such as hypertension, valvular heart disease, and coronary artery disease. Symptoms such as<strong> shortness of breath</strong>, orthopnea, and paroxysmal nocturnal dyspnea point to <strong>left heart failure</strong> due to pulmonary congestion. In contrast, symptoms such as <strong>pedal edema</strong>, weight gain, early satiety, and hepatic congestion are characteristic of <strong>right heart failure</strong>.</p>\n<p>Other options:&nbsp;</p>\n<p>Options A and C -&nbsp; <strong>Salbutamol</strong> is a short-acting<strong> &beta;2-agonist</strong> that is used to treat acute severe asthma. Salbutamol nebulization is used to treat <strong>hyperkalemia</strong>. Side effects include tachycardia, tremors, hypokalemia, and <strong>raised glucose levels</strong>.&nbsp;</p>\n<p>Option D -<strong> Oxygen supplementation</strong> is recommended for pulmonary edema but <strong>antibiotics</strong> have <strong>no role</strong> in cardiogenic pulmonary edema.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ce1ad36d87d443b4a5c123778a353219.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient on anti-depressants presented to you with hypotension. An ECG was done, which showed wide QRS complexes and right axis deviation. How will you manage this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Antiarrhythmics"
      },
      {
        "id": 2,
        "text": "Intravenous sodium bicarbonate"
      },
      {
        "id": 3,
        "text": "Propranolol"
      },
      {
        "id": 4,
        "text": "Phenytoin"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario along the ECG changes described suggests a diagnosis of <strong>tricyclic antidepressant toxicity</strong>. This can be managed with <strong>intravenous sodium bicarbonate</strong>.&nbsp;</p>\n<p>Tricyclic antidepressants (TCAs) are used in the treatment of <strong>psychotic depression</strong>, insomnia, and several pain conditions. Their mechanism of action is inhibition of norepinephrine and serotonin reuptake. They have a <strong>quinidine-like sodium channel blockade effect</strong> on <strong>cardiac</strong> conduction. Hence, they cause<strong> QT prolongation</strong>.&nbsp;Other cardiotoxic effects include atrioventricular (AV) block and<strong> hypotension</strong>. <strong>Rightward-axis deviation</strong> is also an associated finding.</p>\n<p>TCA toxicity can result in <strong>ventricular tachyarrhythmias</strong>, status epilepticus, hyperthermia, and coma. It&nbsp;can also result in <strong>anticholinergic syndrome</strong> due to muscarinic receptor antagonism. Symptoms include dilated pupils, high temperature, dry mouth, and myoclonic movements. It is managed with&nbsp;intravenous sodium bicarbonate bolus (50-100 mEq). This helps in the reversal of sodium channel blockade. <strong>Gastric lavage</strong> and administration of activated charcoal can be carried out in cases of recent ingestion.</p>\n<p>Other side effects of TCAs include urinary retention, tachycardia, and <strong>postural hypotension</strong>. ECG changes such as <strong>T wave inversion</strong> or suppression are also common.&nbsp;</p>\n<p>In some cases, it can result in polymorphic ventricular tachycardias with QT prolongation known as<strong> torsades de pointes</strong>. Recurrent episodes can be treated with <strong>intravenous magnesium sulfate</strong>.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: Class IA, IC, and III antiarrhythmic drugs are <strong>contraindicated</strong> as they potentiate the action of TCAs.</p>\n<p>Option B: <strong>Propranolol</strong> is a <strong>class II antiarrhythmic</strong> that can cause <strong>wide QRS complexes</strong>. It is used for rate control in atrial fibrillation, angina, and hypertension.&nbsp;</p>\n<p>Option D: <strong>Phenytoin&nbsp;</strong>is an&nbsp;<strong>antiepileptic</strong>&nbsp;used for the treatment of generalized tonic-clonic seizures and focal seizures. It <strong>inactivates sodium channels</strong> and stabilizes neuronal membranes. It can<strong> displace</strong> TCAs from their protein binding sites which can result in transient overdose symptoms.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to you with fever, night sweats, ptosis, and bilateral facial nerve palsy. Investigations showed leukocytosis and bilateral hilar lymphadenopathy. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Sarcoidosis"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Lymphoma"
      },
      {
        "id": 4,
        "text": "Hypersensitive pneumonitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>CT features include <strong>peribronchial thickening</strong> and reticular nodular changes. Glucocorticoids are the drug of choice for management.</p>\n<p>Other options:</p>\n<p>Option B - <strong>Tuberculosis</strong> (TB) is a chronic granulomatous systemic disease. The underlying pathophysiology is <strong>type IV hypersensitivity</strong> reaction. It can present as pulmonary or extrapulmonary TB. Symptoms include <strong>fever</strong>, <strong>night sweats</strong>, weight loss, cough, and hemoptysis. Histopathological examination reveals <strong>caseating tubercles</strong> with multinucleated giant cells and epitheloid cells.</p>\n<p>Option C - Lymphomas are broadly classified into <strong>Non-Hodgkin's lymphoma</strong> (NHL) and <strong>Hodgkin's lymphoma</strong>. Symptoms include fever, weight loss, night sweats, lymphadenopathy, and <strong>splenomegaly</strong>.</p>\n<p>Option D - <strong>Hypersensitivity pneumonitis</strong> arises due to inhalation of antigenic triggers which result in an inflammatory response. Symptoms include <strong>fever</strong>, chills, malaise, and dyspnea. <strong>Cough</strong>, weight loss, and fatigue can be seen in chronic cases.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9a86ad5099314c699af23e122f10db8bx1200x787.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3a196b072f844e0492558c527db32cf9x1279x860.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9b417338f3d342bc9a1c48a8d9d2acb2x1280x1170.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c64befe8ea194301a12bdb6c6797223dx1280x5233.JPEG"
    ]
  },
  {
    "text": "A 35-year-old female patient presents to you with fever, breathlessness, and cough with expectoration. A CT scan was done which is shown below. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Consolidation with air bronchogram"
      },
      {
        "id": 2,
        "text": "Mediastinal mass"
      },
      {
        "id": 3,
        "text": "Pleural effusion"
      },
      {
        "id": 4,
        "text": "Diaphragmatic hernia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option D: <strong>Diaphragmatic hernia</strong> occurs due to intrathoracic movement of the abdominal contents through a <strong>diaphragmatic</strong> <strong>defect</strong>. The types include:</p>\n<ul>\n<li><strong>Bochdalek hernia</strong> (posterior): <strong>Most common</strong> <strong>type</strong>. Herniation occurs through the pleuroperitoneal foramen.</li>\n<li><strong>Morgagni</strong> <strong>hernia</strong> (anterior): Herniation occurs through the foramen of Morgagni.</li>\n</ul>\n<p>Given below is a CT image showing Bochdalek hernia.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2e0977a560bd4912a11f420856e15cbf.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/08d62b64991b45bfa0ef589da70c390bx1280x958.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/07cf1c18b7234474b45b34cda9e6dd51x1280x920.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4166145e8674425d8bed0002771c61bbx1280x873.PNG"
    ]
  },
  {
    "text": "A 25-year-old patient is undergoing tooth extraction for dental caries. Which of the following does not require prophylaxis against infective endocarditis?",
    "choices": [
      {
        "id": 1,
        "text": "Prior history of endocarditis"
      },
      {
        "id": 2,
        "text": "Atrial septal defect"
      },
      {
        "id": 3,
        "text": "Unrepaired cyanotic heart disease"
      },
      {
        "id": 4,
        "text": "Prosthetic heart valves"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Symptoms such as dyspnea, cough, arthralgias, and flank pain can also arise due to <strong>embolization</strong> or immunologically mediated phenomena.&nbsp;</p>\n<p>Antibiotics are the mainstay in management. In certain cases, surgical management is necessary.</p>\n<p>Other options:&nbsp;</p>\n<p>Options A, B, and C - According to American Heart Association (AHA),&nbsp;<strong>prior history of endocarditis</strong>, <strong>unrepaired cyanotic heart disease</strong>, and <strong>prosthetic heart valves</strong> are all high-risk cardiac lesions that necessitate antibiotic prophylaxis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/989c12894db244f09ea42d9b879dc235x720x540.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/986be3c99e87400d85cc92cc57abad92x720x548.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/fbc88684483245a28dbb78ff9c514b13x600x468.JPEG"
    ]
  },
  {
    "text": "A patient presents to the emergency department with a history of ingestion of ten tablets of paracetamol.  He has developed oliguria and liver function tests show deranged values. Which of the following can be used in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "N-acetylcysteine"
      },
      {
        "id": 2,
        "text": "Dopamine"
      },
      {
        "id": 3,
        "text": "Ursodeoxycholic acid"
      },
      {
        "id": 4,
        "text": "Furosemide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette suggests <strong>acetaminophen</strong> (Paracetamol)&nbsp;<strong>toxicity,</strong>&nbsp;which can be managed with <strong>N-acetylcysteine</strong>.&nbsp;</p>\n<p>Early manifestations (within 4-12 hours) of&nbsp;<strong>acetaminophen</strong>&nbsp;<strong>toxicity</strong> include nausea, vomiting, diarrhea, and abdominal pain. Later, <strong>renal failure</strong> and myocardial injury may be seen. <strong>Low bilirubin</strong> levels along with <strong>raised aminotransferase</strong> levels are characteristic of the condition.&nbsp;</p>\n<p>Acetaminophen toxicity is an important cause of <strong>acute liver failure</strong>. Ingestion of&nbsp;&ge;25g can be fatal. Cytochrome P450 CYP2E1 metabolizes acetaminophen to <strong>N-acetyl-p-benzoquinone-imine</strong> (NAPQI). <strong>Glutathione</strong> is responsible for its detoxification, after which it is excreted in the urine. When glutathione reserves are depleted or large amounts of NAPQI are formed, it binds to hepatocyte macromolecules. This can then lead to <strong>hepatocyte necrosis</strong>.</p>\n<p>Initial management includes <strong>gastric lavage</strong> and oral charcoal or <strong>cholestyramine</strong>. It should be carried out within thirty minutes of ingestion. If they are used, gastric lavage must be done afterward before using another agent. Acetaminophen blood levels can be estimated from a nomogram plot. In patients with high acetaminophen levels, <strong>intravenous</strong> N-acetylcysteine administration within 8 hours of ingestion is recommended. It helps in the replenishment of glutathione. It is partially effective even up to 36 hours. <strong>Liver transplantation</strong> is necessary if signs of hepatic failure continue despite therapy.&nbsp;</p>\n<p>Other options:&nbsp;</p>\n<p>Option B: <strong>Dopamine</strong> is a neurotransmitter that is used in severe congestive cardiac failure. It acts on &beta;-1 receptors at a dose of 2-10 mcg/kg/minute.&nbsp;</p>\n<p>Option C:&nbsp;<strong>Ursodeoxycholic acid</strong> is a bile acid that is the first-line treatment for <strong>primary biliary cholangitis</strong>. It is useful in cholestatic drug hepatotoxicity, but is not recommended.&nbsp;</p>\n<p>Option D:&nbsp;<strong>Furosemide</strong>&nbsp;is a <strong>loop diuretic</strong> commonly used in pulmonary edema and congestive heart failure. Side effects include hyponatremia, hypotension, and ototoxicity.&nbsp;</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A female patient with a negative urine pregnancy test presents to you with galactorrhea. An MRI was done which revealed a large pituitary tumor. If the patient is not willing for surgery, which of the following is the best drug for treatment?",
    "choices": [
      {
        "id": 1,
        "text": "Bromocriptine"
      },
      {
        "id": 2,
        "text": "Promethazine"
      },
      {
        "id": 3,
        "text": "Octreotide"
      },
      {
        "id": 4,
        "text": "Clozapine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical vignette points to a diagnosis of <strong>prolactinoma</strong> and the best drug for the treatment of the condition is <strong>bromocriptine</strong>.</p>\n<p>Prolactinomas are pituitary tumors that can present as microadenomas or macroadenomas. Tumors <strong>&lt;1cm</strong> in diameter and no regional invasion are known as <strong>microadenomas</strong>. It is more commonly seen in women. Tumors <strong>&gt;1cm</strong> in size are known as <strong>macroadenomas</strong>. It can be locally invasive. Prolactin levels <strong>&gt;200</strong><span class=\"col\"><strong>&mu;g/L</strong> are suggestive of prolactinomas.&nbsp;</span></p>\n<p><span class=\"col\">Women present with features such as <strong>amenorrhea</strong>, infertility, and <strong>galactorrhea</strong>. <strong>Visual field defects</strong> can also be seen. Symptoms in males include <strong>impotence</strong>, infertility, and loss of libido. An MRI is recommended in all patients who present with hyperprolactinemia.</span></p>\n<p><span class=\"col\">Microadenomas can be managed with regular monitoring of prolactin levels and MRI scans, if fertility is not a requisite. Oral <strong>dopamine agonists</strong> such as <strong>bromocriptine</strong> and cabergoline are used for medical management. They are agonists at <strong>D2 receptors</strong>. Side effects include constipation, nasal stuffiness, and dry mouth. Resistance or intolerance to these drugs requires surgical debulking. Cases that do not respond to medical or surgical management can be treated with radiotherapy.</span></p>\n<p><span class=\"col\">Other options:</span></p>\n<p><span class=\"col\">Option B: <strong>Promethazine</strong> is an antihistamine used to treat<strong> motion sickness</strong>, pruritus, and <strong>oculogyric crisis</strong>.</span></p>\n<p><span class=\"col\">Option C: <strong>Octreotide</strong> is a somatostatin analog that is used in <strong>acromegaly</strong>, variceal bleeding, and hepatorenal syndrome.</span></p>\n<p><span class=\"col\">Option D:<strong> Clozapine</strong> is an atypical antipsychotic used in <strong>refractory schizophrenia</strong> and mania.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to you with an irregularly irregular pulse of 120/minute and a pulse deficit of 20. Which of the following would be the jugular venous pressure (JVP) finding?",
    "choices": [
      {
        "id": 1,
        "text": "Absent p wave"
      },
      {
        "id": 2,
        "text": "Absent a wave"
      },
      {
        "id": 3,
        "text": "Cannon a wave"
      },
      {
        "id": 4,
        "text": "Raised JVP with normal waveform"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In acute atrial fibrillation with hemodynamic instability, electrical or chemical <strong>cardioversion</strong> is the first step. The latter is done by intravenous administration of class III antiarrhythmic - <strong>ibutilide</strong>. In a stable patient, <strong>ventricular rate control</strong> is the primary aim. This is done by intravenous or oral administration of <strong>beta-blockers</strong>. <strong>Calcium channel blockers</strong> such as verapamil and diltiazem can also be used.&nbsp;</p>\n<p>If the current episode duration is <strong>&gt;48 hours</strong>, cardioversion can precipitate thromboembolic complications. In such cases, cardioversion should be carried out only after <strong>3 weeks</strong> of anticoagulation. It has to be continued for 4 weeks after cardioversion. Another option is to evaluate the presence of a thrombus in the left atrial appendage. This can be done either by transesophageal echocardiography (TEE) or high-resolution CT.</p>\n<p>If the duration is &lt;48 hours and there are no high-risk factors, cardioversion can be done. <strong>The CHA2DS2-VASc</strong> scoring system is used to assess stroke risk.&nbsp;</p>\n<p><strong>Warfarin</strong> is recommended in patients with rheumatic<strong> mitral stenosis</strong> or mechanical heart valves who present with atrial fibrillation. In mitral stenosis, thrombi arise frequently from the <strong>dilated left atrium</strong>. Atrial fibrillation in the absence of mitral stenosis is known as nonvalvular atrial fibrillation. <strong>Oral factor Xa inhibitors</strong> such as apixaban, edoxaban, or rivaroxaban can be used in such cases.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Absent p wave</strong>&nbsp;is an <strong>ECG finding</strong> seen in sinoatrial nodal disease and atrial fibrillation.&nbsp;</p>\n<p>Option C: <strong>Cannon a wave</strong> is seen in <strong>atrioventricular dissociation</strong> and contraction of the right atria against a closed tricuspid valve.</p>\n<p>Option D: <strong>Raised JVP</strong> with <strong>normal waveform</strong> is seen in conditions such as congestive heart failure, right ventricular infarction, and superior vena cava obstruction.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9c5ed9fcd3f249ff978d35cdf111c563x918x523.JPEG"
    ]
  },
  {
    "text": "A patient with a history of chronic liver disease presents with abdominal distension, jaundice, and pruritis. Ascitic fluid analysis revealed neutrophil count > 650 per cubic mm. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Spontaneous bacterial peritonitis"
      },
      {
        "id": 2,
        "text": "Malignant ascites"
      },
      {
        "id": 3,
        "text": "Tubercular ascites"
      },
      {
        "id": 4,
        "text": "Intestinal obstruction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given scenario and image of a patient with abdominal distension, jaundice, pruritus, and neutrophil count &gt;650 per mm<sup>3</sup>, the likely diagnosis is <strong>spontaneous bacterial peritonitis.&nbsp;&nbsp;</strong></p>\n<p>Spontaneous bacterial peritonitis (SBP) is an acute bacterial infection of the ascitic fluid. It is commonly seen in adults in association with liver cirrhosis. The pathogens involved are<em>&nbsp;<strong>Escherichia coli</strong>,&nbsp;</em>streptococci, enterococci, and pneumococci.&nbsp;</p>\n<p>In a patient with ascites, SBP presents with fever, and acute abdominal pain. On examination, tachycardia, tachypnea, and signs of peritonitis are seen. Hepatic encephalopathy and gastrointestinal bleeding may also occur.&nbsp;</p>\n<p>Diagnosis is by <strong>paracentesis, </strong>and an ascitic fluid <strong>neutrophil count of &gt;250/mm<sup>3</sup> </strong>is suggestive of spontaneous bacterial peritonitis. Ascitic fluid culture may reveal the pathogenic organisms.</p>\n<p>Management is mainly by <strong>third-generation cephalosporins</strong> such as cefotaxime. Albumin infusion can be given as it decreases the risk of renal failure and improves patient survival. Early diagnosis and treatment improve the prognosis.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Malignant ascites</strong> occurs as a complication of intrabdominal and extraabdominal malignancies.&nbsp;Patients can present with increasing abdominal girth, generalized abdominal pain, and shortness of breath. Weight loss may be more common. Ascitic fluid analysis reveals a <strong>milky </strong>or<strong> bloody</strong> appearance with <strong>elevated</strong> levels of<strong> tumor markers</strong> and<strong> VEGF</strong> (vascular endothelial growth factor). Treatment is by <strong>paracentesis</strong> and <strong>peritoneovenous shunt.</strong></p>\n<p>Option C: <strong>Ascites </strong>are&nbsp;often seen in patients with tubercular peritonitis. Multiple tubercles are seen on the peritoneum. Ascitic fluid analysis reveals a <strong>straw-colored fluid</strong> with a <strong>white blood cell count &gt;500/mm<sup>3</sup></strong>. Laparoscopy and peritoneal biopsy may be helpful in diagnosis. Management is by supportive and anti-tubercular therapy. &nbsp;</p>\n<p>Option D:<strong> Intestinal obstruction</strong>&nbsp;can present as pain, abdominal distension, <strong>vomiting</strong>, and <strong>absolute constipation</strong>. Abdominal radiographs taken in a supine position are useful in diagnosis. Abdominal <strong>radiograph</strong> in erect posture shows <strong>fluid levels</strong>. Management is mainly by insertion of a nasogastric tube, replacement of fluid and electrolytes, and surgery.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/13fe9c6590c14fe6aeaabdabed73dd99.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Laboratory investigations of a patient being evaluated for jaundice show elevated bilirubin and alkaline phosphatase levels. Levels of the remaining liver enzymes are normal. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Obstructive jaundice"
      },
      {
        "id": 2,
        "text": "Hemolytic jaundice"
      },
      {
        "id": 3,
        "text": "Hepatic jaundice"
      },
      {
        "id": 4,
        "text": "Prehepatic jaundice"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given laboratory reports showing <strong>elevated alkaline phosphatase</strong> and <strong>bilirubin</strong> points to a likely diagnosis of <strong>obstructive jaundice</strong>.</p>\n<p>Obstructive jaundice arises due to an obstruction in the <strong>biliary outflow&nbsp;</strong>due to&nbsp;<strong>choledocholithiasis</strong>, cholelithiasis, biliary strictures, etc. The patient presents with<strong>&nbsp;jaundice</strong>,&nbsp;right upper quadrant pain,&nbsp;<strong>pruritus</strong>, <strong>dark</strong> urine, and <strong>light-colored</strong> stools. The symptoms can be <strong>intermittent</strong>&nbsp;in cases of <strong>periampullary carcinoma&nbsp;</strong>and cholangiocarcinoma.&nbsp;</p>\n<p>Elevated <strong>conjugated bilirubin</strong> and<strong> alkaline phosphatase</strong> (ALP) are characteristic of the condition.&nbsp;An associated rise in <strong>gamma-glutamyl transpeptidase</strong> (GGT) levels confirms the <strong>hepatic</strong> origin of ALP.</p>\n<p>An <strong>ultrasound</strong> is done initially in suspected cases of obstructive jaundice. A CT or <strong>magnetic resonance cholangiopancreatography</strong> (MRCP) is recommended next. <strong>Endoscopic retrograde cholangiopancreatography</strong> (ERCP) is considered the<strong> gold standard</strong> for choledocholithiasis.</p>\n<p>Jaundice arises due to the deposition of bilirubin in the body tissues.&nbsp;Bilirubin is a breakdown product of <strong>heme</strong> that circulates in the blood in the unconjugated/ <strong>indirect</strong> form. In the hepatocytes, it is conjugated with glucuronic acid to form conjugated/ <strong>direct</strong> bilirubin. Direct and indirect bilirubin can be assessed using <strong>Van den Bergh reaction</strong>.</p>\n<p>Jaundice is broadly classified into:</p>\n<ul>\n<li>Pre-hepatic jaundice</li>\n<li>Hepatic jaundice</li>\n<li>Posthepatic jaundice</li>\n</ul>\n<p>Other options:</p>\n<p>Options B and D: <strong>Hemolytic jaundice</strong> is one of the common causes of <strong>prehepatic jaundice</strong>. These include sickle cell anemia, spherocytosis, and thalassemia. Inherited enzyme disorders, such as Gilbert's syndrome, and Crigler-Najjar types I and II, are other causes. In these cases, there is an <strong>isolated elevation</strong> of <strong>unconjugated</strong>&nbsp;<strong>bilirubin</strong>.</p>\n<p>Option C: <strong>Hepatic jaundice</strong> shows an elevation of&nbsp;aspartate transaminase (<strong>AST</strong>) and&nbsp;alaline transaminase (<strong>ALT</strong>) out of proportion to ALP. An increased bilirubin level is also seen. Common causes include viral hepatitis, alcoholic liver disease, and autoimmune hepatitis. An <strong>AST/ALT ratio&nbsp;&ge; 2</strong> is highly suggestive of <strong>alcoholic hepatitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A woman presents to you with fever, arthralgia, ulcers, fatigue for the past six months, and new-onset hematuria.  Urine examination reveals RBC casts and proteinuria. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute interstitial nephritis"
      },
      {
        "id": 2,
        "text": "Poststreptococcal glomerulonephritis"
      },
      {
        "id": 3,
        "text": "Lupus nephritis"
      },
      {
        "id": 4,
        "text": "IgA nephropathy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario points to a diagnosis of <strong>lupus nephritis</strong>.</p>\n<p>Lupus nephritis is a common complication of systemic lupus erythematosus (SLE). It results from immune <strong>complex deposition</strong> containing DNA and anti-DNA.&nbsp;Clinical features include <strong>proteinuria</strong>, <strong>hematuria</strong>, and hypertension. The disease is divided into 6 classes based on the severity. Patients with class V disease are at an increased risk of <strong>thrombotic complications</strong>. Lupus nephritis can result in end-stage disease warranting dialysis or transplantation.</p>\n<p>SLE is an autoimmune condition more commonly seen in women. Antinuclear antibodies, anti-dsDNA, and anti-Sm are the autoantibodies implicated. Symptoms include maculopapular <strong>butterfly rash</strong>, <strong>photosensitivity</strong>, oral or nasal ulcers, fever, and intermittent <strong>polyarthritis</strong>. Pleuritis and pericarditis can also be associated. <strong>Systemic glucocorticoids</strong>, cyclophosphamide, or mycophenolate mofetil are used for management. Due to the possible teratogenic effects of these drugs, <strong>hydroxychloroquine</strong> is the mainstay in <strong>pregnancy</strong>.</p>\n<p>Other options:</p>\n<p>Option A - <strong>Acute interstitial nephritis</strong> is a type of acute kidney injury. It is marked by <strong>oliguria</strong> and raised creatinine. Various causes of interstitial injury include the use of <strong>non-steroidal anti-inflammatory drugs</strong> (NSAIDs), pyelonephritis, leukemia, and sepsis. <strong>White blood cell</strong> (WBC)<strong>&nbsp;casts</strong> and <strong>granular</strong> casts may be seen.</p>\n<p>Option B - <strong>Post-streptococcal glomerulonephritis</strong> usually affects <strong>male children</strong> between the age of 2-14. Skin or <strong>pharyngeal</strong> infection with M types of the organism is implicated. Symptoms include <strong>hematuria</strong>, <strong>pyuria</strong>, and hypertension. Flank pain and headache are also associated symptoms. <strong>Red blood cell</strong> (RBC) <strong>casts</strong> are seen in the urine.</p>\n<p>Option D - <strong>IgA nephropathy</strong> arises due to mesangial IgA deposition. It is characterized by recurrent <strong>macroscopic hematuria</strong> after an upper respiratory infection associated with proteinuria. <strong>Mesangial proliferation</strong> is a distinctive feature. Angiotensin-converting enzyme (ACE) inhibitors and steroids can be used for management.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 11-year-old child with a history of streptococcal pharyngitis presents you with fever and arthralgia. There is no past history of rheumatic heart disease or features of carditis or valvular disease. How often is 6,00,000 IU of benzathine penicillin recommended for prophylaxis of rheumatic heart disease?",
    "choices": [
      {
        "id": 1,
        "text": "Immediately"
      },
      {
        "id": 2,
        "text": "Thrice weekly lifelong"
      },
      {
        "id": 3,
        "text": "Once in three weeks for 5 years or till the age of 18, whichever is longer"
      },
      {
        "id": 4,
        "text": "Once in three weeks for 10 years or till the age of 25, whichever is longer"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>modified</strong> <strong>Jones criteria</strong> is used for diagnosis. Management of ARF is mainly symptomatic by the use of antibiotics and NSAIDs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c2cf31e7fe7f4aa3b0784289ccc98285x1280x853.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a94028a01d341199577fa091b855316x1189x703.JPEG"
    ]
  },
  {
    "text": "A man on diuretics presents with weakness. An ECG was done which showed flat T waves and prominent U waves. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Hypokalemia"
      },
      {
        "id": 2,
        "text": "Hyperkalemia"
      },
      {
        "id": 3,
        "text": "Hypomagnesemia"
      },
      {
        "id": 4,
        "text": "Hypernatremia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Option C:<strong> Hypomagnesemia</strong> can arise due to prolonged use of proton pump inhibitors. It presents as delirium, neuromuscular dysfunction, reduced parathyroid function, and treatment-resistant <strong>hypokalemia</strong>. ECG might reveal <strong>hypokalemia</strong> potentiated by the condition. It has been implicated in <strong>ventricular arrhythmias</strong> with acute myocardial infarction and<strong> torsades de pointes</strong>. It can also enhance <strong>digitalis toxicity</strong>.</p>\n<p>Option D: <strong>Hypernatremia</strong> is defined as plasma Na<sup>+</sup> concentration <strong>&gt;145 meq/L</strong>. Common causes include diarrhea, hyperglycemia, and post obstructive diuresis. <strong>Altered mental status</strong> and generalized weakness are the common manifestations. It can also cause <strong>neonatal seizures</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/654f9f416b3d4e08aee486963e2631d4x720x356.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a3167bba8aa2470595a26392f2bc2d43x1280x2207.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0bbf1bb180d142009818cd2cadfc56d1x1158x893.JPEG"
    ]
  },
  {
    "text": "A male patient presents to the emergency department. The arterial blood gas report is as follows: pH, 7.2; pCO2, 81mm Hg; and HCO3, 40 meq/L. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Respiratory alkalosis"
      },
      {
        "id": 2,
        "text": "Metabolic acidosis"
      },
      {
        "id": 3,
        "text": "Respiratory acidosis"
      },
      {
        "id": 4,
        "text": "Metabolic alkalosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The arterial blood gas values suggest a likely diagnosis of <strong>respiratory acidosis</strong>.</p>\n<p>The various buffering systems present in the body maintain the systemic arterial pH between <strong>7.35-7.45</strong>. The most common acid-base disorders are metabolic acidosis or alkalosis and respiratory acidosis or alkalosis.</p>\n<p>Normal values in an arterial blood gas are as follows:</p>\n<ul>\n<li>pH:&nbsp;7.35-7.45</li>\n<li class=\"half_rhythm\">\n<div>PaCO<sub>2</sub>: 35-45 mmHg</div>\n</li>\n<li class=\"half_rhythm\">\n<div>HCO<sub>3</sub>: 22-26 mEq/L</div>\n</li>\n<li class=\"half_rhythm\">\n<div>PaO<sub>2</sub>: 75-100 mmHg</div>\n</li>\n</ul>\n<p>Respiratory changes (changes in PCO<sub>2</sub>) promote a corresponding change in metabolic response (changes in HCO<sup>3-</sup>) and vice versa as a <strong>compensatory mechanism</strong>. In general, PCO<sub>2</sub> and HCO<sup>3-</sup> move in the <strong>same direction</strong> for compensation in metabolic and respiratory acid-base disorders respectively. A change in the two parameters in <strong>opposite directions</strong> points to a <strong>mixed acid-base disturbance</strong>.&nbsp;</p>\n<p>Respiratory acidosis can be secondary to severe pulmonary disease, respiratory muscle fatigue, or ventilatory control abnormalities. It is marked by an <strong>increase</strong> in PaCO<sub>2</sub>&nbsp;and a <strong>decrease</strong> in<strong> pH</strong>. A compensatory <strong>rise</strong> of <strong>HCO<sup>3-</sup></strong> can also be seen.&nbsp;</p>\n<p>A rapid rise in PCO<sub>2</sub> (acute hypercapnia) can present with <strong>dyspnea</strong>, <strong>confusion</strong>, and psychosis. It can be seen in severe asthma secondary to bronchospasm, anaphylaxis, or inhalational burns. Chronic hypercapnia causes sleep disorders, memory loss, and daytime somnolence. It is commonly seen in end-stage <strong>obstructive lung disease</strong>.&nbsp;</p>\n<p>Acute respiratory acidosis may need <strong>tracheal intubation</strong> and assisted <strong>mechanical ventilation</strong>. Rapid correction of hypercapnia should be avoided as it can trigger cardiac arrhythmias and seizures. Chronic respiratory acidosis is difficult to manage and improvement in lung function is the primary aim.&nbsp;</p>\n<p>Other options:</p>\n<p>Option A: <strong>Respiratory alkalosis</strong> arises due to alveolar hyperventilation and can be due to salicylates, <strong>high altitude states</strong>,<strong> cardiac failure</strong>, and anemia.&nbsp;</p>\n<p>Option B:<strong> Metabolic acidosis</strong> arises due to an accumulation of endogenous acids. Examples include lactic acidosis, <strong>diabetic ketoacidosis</strong>, and starvation. It can also be seen in renal failure.&nbsp;</p>\n<p>Option D: <strong>Metabolic alkalosis</strong> can be seen in <strong>Liddle's syndrome</strong>, <strong>hypertrophic pyloric stenosis</strong>, massive blood transfusion, and cystic fibrosis. It is marked by elevated pH and HCO<sup>3-</sup> values. A rise in PaCO<sub>2</sub> indicates a compensatory respiratory response.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cea77858973342d1816320d43c36b6b1x1280x1555.JPEG"
    ]
  },
  {
    "text": "Which of the following is not seen in MEN 2B syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Megacolon"
      },
      {
        "id": 2,
        "text": "Parathyroid adenoma"
      },
      {
        "id": 3,
        "text": "Mucosal neuroma"
      },
      {
        "id": 4,
        "text": "Marfanoid habitus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Parathyroid adenoma</strong> is <strong>not</strong> seen in <strong>multiple endocrine neoplasia 2B</strong> (MEN 2B) syndrome.</p>\n<p>Multiple endocrine neoplasia (MEN) describes conditions with tumors involving <strong>two or more</strong> endocrine glands. There are four types - MEN 1-4. They have an <strong>autosomal dominant</strong> pattern of inheritance and can also be sporadic.&nbsp;</p>\n<p>MEN type 2&nbsp;comprises groups of disorders caused by gain-of-function mutations of the RET proto-oncogene at chromosomal locus 10q11.2. There are three variants:</p>\n<ul>\n<li>MEN 2A, also known as MEN 2 (most common type)</li>\n<li>MEN 2B, also known as MEN 3</li>\n<li>MTC only</li>\n</ul>\n<p>MEN<strong> 2A</strong>&nbsp;is also known as <strong>Sipple's syndrome</strong>. It is characterized by <strong>medullary thyroid carcinoma</strong> (MTC), <strong>pheochromocytomas</strong>, and <strong>parathyroid&nbsp;tumors</strong>.&nbsp;</p>\n<p>In MEN <strong>2B</strong>&nbsp;along with MTC and pheochromocytoma, it is associated with other abnormalities such as <strong>mucosal neuromas</strong>, <strong>marfanoid habitus</strong>, medullated corneal nerve fibers, and <strong>megacolon</strong>.&nbsp;Parathyroid tumors are generally not seen here, in contrast to the MEN 2A type.</p>\n<p><strong>MTC</strong>&nbsp;presents early and is usually aggressive. MTC is the most common feature, presents as a palpable mass in the neck, and can be associated with pressure symptoms. Ectopic adrenocorticotropic hormone (ACTH) secreted by the tumor can cause <strong>Cushing's syndrome</strong>.</p>\n<p><strong>Pheochromocytoma</strong>&nbsp;is frequently bilateral. Palpitations, sweating, and headaches are the features of pheochromocytoma.&nbsp;</p>\n<p><strong>Mucosal neuromas</strong> can present with bumpy and enlarged lips, tongue, and eyelids. Intestinal autonomic ganglion dysfunction can lead to <strong>megacolon</strong> and diverticula. <strong>Medullated corneal fibers</strong> and delayed puberty can also be seen. <strong>Marfanoid habitus</strong> marked by tall stature, long limbs, arachnodactyly, and joint hypermobility is an associated feature.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with coronary artery disease presents to you with chest pain and palpitations. The ECG is shown below. Which of the following can be used in the management?",
    "choices": [
      {
        "id": 1,
        "text": "Oral metoprolol"
      },
      {
        "id": 2,
        "text": "Oral amiodarone"
      },
      {
        "id": 3,
        "text": "Intravenous amiodarone"
      },
      {
        "id": 4,
        "text": "Intravenous metoprolol"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario along with the ECG points to a diagnosis of&nbsp;<strong>ventricular tachycardia</strong>. <strong>Intravenous amiodarone</strong> (class III antiarrhythmic) can be used in the management of this condition.&nbsp;</p>\n<p>The patient here complaining of chest pain, and <strong>palpitations</strong> and has ECG changes showing <strong>wide QRS</strong> complex tachycardia with <strong>absent p</strong> <strong>waves</strong> is likely to have acute ventricular tachycardia. Since the patient is stable and has an underlying&nbsp;coronary artery disease the drug of choice is <strong>intravenous amiodarone</strong>.</p>\n<p>Ventricular tachycardias can be defined as three or more pre-ventricular contractions at a rate &gt;100/minute.</p>\n<p>ECG changes include wide<strong>&nbsp;QRS complexes,&nbsp;</strong><strong>absence of P waves</strong>, and ventriculoatrial dissociation.&nbsp;It can be broadly classified as <strong>sustained VT</strong> or <strong>non-sustained VT</strong>. Nonsustained VT has QRS complexes lasting&nbsp;<strong>&lt;30 seconds</strong> while sustained VT lasts for <strong>&gt;30 seconds</strong>. In monomorphic VT, all QRS complexes look the same. Polymorphic VT has QRS complexes varying in shape or direction in the same lead.&nbsp;</p>\n<p>Most monomorphic VT have an <strong>underlying cardiac disease</strong>. Symptoms of ventricular tachycardia include <strong>palpitations</strong>, syncope, and shortness of breath.&nbsp;</p>\n<p>In a hemodynamically <strong>stable</strong> patient, <strong>amiodarone</strong>, <strong>procainamide</strong>, and lidocaine can be used to treat the condition. In the <strong>presence</strong> of <strong>heart disease</strong>, intravenous<strong> amiodarone</strong> is the drug of choice. In hemodynamically <strong>unstable</strong> patients, <strong>electrical cardioversion</strong> is done. Further management depends on the underlying heart condition and frequency of VT. Frequent episodes warrant the use of antiarrhythmics or catheter ablation.&nbsp;</p>\n<p><strong>Torsades de Pointes</strong> is a type of polymorphic VT occurring with QT prolongation.&nbsp;It can progress to <strong>ventricular fibrillation</strong> which is treated with defibrillation. Recurrent episodes can be managed with <strong>intravenous magnesium sulfate</strong>.</p>\n<p>Other causes of wide QRS complexes include supraventricular tachycardias with bundle branch block and Wolff-Parkinson-White syndrome.&nbsp;</p>\n<p>Other options:</p>\n<p>Options A and D: <strong>Metoprolol</strong> is a <strong>selective&nbsp;&beta;1-antagonist </strong>and&nbsp;a<strong> class II antiarrhythmic</strong>. It can be used in hypertension, angina, and heart failure. The intravenous form can be used for initial management in acute myocardial infarction.</p>\n<p>Option B: <strong>Oral amiodarone</strong> can be used in the <strong>chronic treatment</strong> of atrial fibrillation, ventricular tachycardia, and ventricular fibrillation. It has shown a modest <strong>beneficial effect</strong> on<strong> mortality</strong> after acute myocardial infarction.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/638ed288f9d54f7ebdb45b419dee35ee.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Multidrug-resistant (MDR) tuberculosis shows resistance to which of the following drugs?",
    "choices": [
      {
        "id": 1,
        "text": "Isoniazid, rifampicin, and fluoroquinolone"
      },
      {
        "id": 2,
        "text": "Fluoroquinolones"
      },
      {
        "id": 3,
        "text": "Isoniazid and rifampicin"
      },
      {
        "id": 4,
        "text": "Isoniazid, rifampicin, and kanamycin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Muti-drug resistant</strong> (MDR) <strong>tuberculosis</strong> (TB) shows resistance to <strong>isoniazid</strong> and <strong>rifampicin</strong>.&nbsp;</p>\n<p>MDR-TB poses a serious problem in the treatment of TB as isoniazid and rifampicin are the most potent first-line drugs.&nbsp;</p>\n<p>The treatment of MDR-TB is curated with drugs grouped into different classes by the world health organization (WHO).</p>\n<ul>\n<li>Group A: Levofloxacin, bedaquiline, linezolid</li>\n<li>Group B: Clofazimine, cycloserine</li>\n<li>Group C: Ethambutol, pyrazinamide, delamanid, ethionamide</li>\n</ul>\n<p>In patients treated previously or with additional drug resistance, a <strong>longer MDR-TB regimen</strong> of <strong>18-20 months</strong> is recommended. Drugs belonging to group A are preferred along with one drug from group B whenever possible. A <strong>shorter regimen</strong> of <strong>6 months</strong> including <strong>bedaquiline</strong> with other drugs can be used in patients not treated before and without extensive disease. In <strong>pregnant women</strong> with MRD-TB, drugs such as bedaquiline and delamanid should be avoided.&nbsp;</p>\n<p>The nucleic acid amplification test (<strong>NAAT</strong>)/ <strong>gene Xpert</strong>&nbsp;is used to detect <strong>rpoB gene polymorphisms,</strong> which are responsible for rifampicin resistance.&nbsp;</p>\n<p>The four drugs considered first-line agents in the treatment of TB are isoniazid, rifampicin, pyrazinamide, and ethambutol.&nbsp;</p>\n<p><strong>Isoniazid</strong> is an antibiotic that works by inhibiting the synthesis of <strong>mycolic acid</strong>, an essential component of the mycobacterial cell wall. It is a <strong>bactericidal</strong> drug. It acts as a <strong>vitamin B6 antagonist</strong>, so oral <strong>pyridoxine</strong> supplementation is recommended during treatment. Side effects include peripheral neuritis, seizures, and ataxia.&nbsp;</p>\n<p><strong>Rifampicin</strong> is a macrocyclic antibiotic that <strong>inhibits RNA synthesis</strong> and is <strong>bactericidal</strong>. It is also used in the prophylaxis of meningococcal infections. Side effects include rash, vomiting, and hepatitis. It is a microsomal enzyme inducer that can result in <strong>contraceptive failure</strong>.&nbsp;</p>\n<p><strong>Ethambutol</strong> inhibits the mycobacterial cell wall assembly. Side effects include <strong>optic neuritis</strong>, pruritus, and joint pain.</p>\n<p><strong>Pyrazinamide</strong> is a nicotinamide analogue activated in acidic conditions. Side effects include liver injury and hyperuricemia.</p>\n<p>Other options: <strong>Fluoroquinolones</strong> are considered <strong>second-line agents</strong> used in the treatment for drug-resistant TB. <strong>Kanamycin</strong>, an<strong> injectable aminoglycoside</strong> is excluded from the new WHO classification of second-line drugs.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to you with fever, jaundice, and malaise. What is the most likely diagnosis based on the serology reports given below?",
    "choices": [
      {
        "id": 1,
        "text": "Acute hepatitis B"
      },
      {
        "id": 2,
        "text": "Acute hepatitis C"
      },
      {
        "id": 3,
        "text": "Chronic hepatitis B"
      },
      {
        "id": 4,
        "text": "Chronic hepatitis C"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Aspartate transaminase</strong> (AST) and <strong>alanine transaminase</strong> (ALT) values are usually elevated along with bilirubin levels. Serological markers vary according to the phase of the disease process as shown below.</p>\n<p>Most cases undergo spontaneous recovery. Prophylaxis can be carried out with the use of <strong>vaccines</strong> containing <strong>HbsAg</strong>. <strong>Anti-HBs titres&nbsp;&ge; 10mIU/mL</strong> are protective.&nbsp;</p>\n<p>Acute viral hepatitis can be due to due to any of the five agents - hepatitis A virus (HAV), hepatitis B virus (HBV), hepatitis C virus (HCV), hepatitis D virus (HDV), and hepatitis E virus (HEV).&nbsp;Clinical features of all acute viral hepatitis are similar. A patient suspected to have acute hepatitis should be tested for HBsAg, <strong>IgM anti-HAV</strong>, IgM anti-HBc, and anti-HCV.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Acute hepatitis C</strong> is caused by HCV which is an RNA virus. It is a blood-borne infection. Detection of <strong>anti-HCV</strong> and <strong>HCV RNA</strong> is used for diagnosis. HCV-RNA appears before anti-HCV and persists for the entire duration of the disease.</p>\n<p>Option C: <strong>Chronic hepatitis B</strong> is a late complication of acute hepatitis B. Persistence of HBeAg for &gt;3 months or HBsAg for &gt;6 months is suggestive of the development of the condition. Investigations show the presence of HBsAg, IgG anti-HBc, HBeAg, and HBV DNA. Fatigue and <strong>intermittent jaundice</strong> are the main features. It can progress to<strong> cirrhosis</strong> or <strong>hepatocellular carcinoma</strong>. <strong>Hepatitis D superinfection</strong> can accelerate this progression.</p>\n<p>Option D:<strong> Chronic hepatitis C</strong> is a common complication of acute hepatitis C. It can progress to cirrhosis or hepatocellular carcinoma HCV-RNA and anti-HCV can be detected on serology.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d4539aecc8904be39eb8406cef1171d5x1280x1156.JPEG"
    ]
  },
  {
    "text": "A child presents to the emergency department with a  history of ingestion of 10-20 ferrous sulfate tablets.  Arterial blood gas revealed acidosis. Which of the following can be used in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Deferoxamine"
      },
      {
        "id": 2,
        "text": "Activated charcoal"
      },
      {
        "id": 3,
        "text": "Dimercaprol"
      },
      {
        "id": 4,
        "text": "Penicillamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to <strong>iron toxicity</strong>, which is managed with <strong>deferoxamine</strong> (also known as&nbsp;<strong>desferrioxamine</strong>).</p>\n<p>Large amounts of ferrous salts can be fatal in <strong>children</strong>. Initial symptoms include <strong>abdominal pain</strong>, diarrhea, vomiting, and <strong>gastrointestinal bleeding</strong>. In severe cases, <strong>cyanosis</strong> and hyperventilation due to <strong>acidosis</strong> can develop. This can sometimes be followed by an <strong>asymptomatic phase</strong>. Later, hypoglycemia and hepatic and renal failure can develop. <strong>Pyloric stenosis</strong> and gastric scarring can develop due to its corrosive nature. Ultimately, if left untreated, the child can die.</p>\n<p>The gastric contents can be used for an iron color test to estimate the iron concentration in plasma. As iron tablets are <strong>radiopaque</strong>, an X-ray can be used to assess the number of pills taken. <strong>Deferoxamine</strong>, an <strong>iron chelator</strong> has to be administered <strong>intramuscularly</strong>. Side effects include pruritus, wheals, rash, and anaphylaxis.&nbsp;</p>\n<p><strong>Deferiprone</strong> and <strong>deferasirox</strong> are other <strong>oral</strong> iron chelators used to treat iron overload in<strong> thalassemia</strong> patients.&nbsp;</p>\n<p>Other options:</p>\n<p>Option B: <strong>Activated charcoal</strong> can be used in the initial management of acetaminophen and opioid overdose. It is used for gastrointestinal decontamination to prevent further absorption of the poison.</p>\n<p>Option C: <strong>Dimercaprol,</strong>&nbsp;also known as <strong>BAL</strong> (British anti-Lewisite), is used to treat <strong>arsenic</strong>, mercury poisoning, and <strong>Wilson's disease</strong>.</p>\n<p>Option D: <strong>D-penicillamine</strong> (Cuprimine) can be used to treat scleroderma, <strong>Wilson's disease</strong>, and rheumatoid arthritis. Side effects include nephrotoxicity, hematologic derangements, and a characteristic rash that involves the neck and axillae&mdash;<strong>elastosis perforans serpiginosa</strong>.&nbsp;It is associated with membranous glomerulonephritis, drug-induced lupus, and <strong>myasthenia gravis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '221 Medicine Neet 2022';
        let hierarchy = ["Marrow", "PYQs", "Medicine"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>