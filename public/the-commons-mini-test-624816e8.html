<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>-The Commons Mini Test - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Mini Test Series / 2019-20
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In patients with a long-standing history of Crohn's disease, which of the following ocular complications is the most likely to develop?",
    "choices": [
      {
        "id": 1,
        "text": "Uveitis"
      },
      {
        "id": 2,
        "text": "Keratoconjunctivitis sicca"
      },
      {
        "id": 3,
        "text": "Episcleritis"
      },
      {
        "id": 4,
        "text": "Retinal detachment"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>most common</strong> <strong>ocular manifestation</strong> of <strong>Crohn&rsquo;s </strong>disease is <strong>episcleritis</strong>.</p>\n<p>Uveitis is associated with both Ulcerative colitis and Crohn's disease.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of endophthalmitis in a patient following eye trauma?",
    "choices": [
      {
        "id": 1,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 2,
        "text": "Staphylococcus epidermidis"
      },
      {
        "id": 3,
        "text": "Aspergillus"
      },
      {
        "id": 4,
        "text": "Bacillus cereus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><em><strong>Staphylococcus epidermidis </strong></em>is the most common cause of post-traumatic endophthalmitis, followed by <em>Bacillus cereus</em>.</p>\n<p>However, if the trauma involves <strong>soil contamination, <em>Bacillus cereus </em></strong>is the most common cause of post-traumatic endophthalmitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common testicular tumor in infants?",
    "choices": [
      {
        "id": 1,
        "text": "Testicular lymphoma"
      },
      {
        "id": 2,
        "text": "Prepubertal yolk sac tumor"
      },
      {
        "id": 3,
        "text": "Prepubertal teratoma"
      },
      {
        "id": 4,
        "text": "Embryonal carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p class=\"p1\"><span class=\"s1\"><strong>Yolk sac tumor</strong> is the most common testicular tumor in infants and children <strong>up to 3 years</strong> of age.</span></p>\n<p class=\"p1\"><span class=\"s1\">Prepubertal teratoma is the second most common testicular tumor in infants and children.</span></p>\n<p class=\"p1\"><span class=\"s1\">In adults, pure yolk sac tumor is rare. The yolk sac elements frequently occur in combination with embryonal carcinoma (as a mixed tumor).</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common abdominal tumor seen in children?",
    "choices": [
      {
        "id": 1,
        "text": "Wilm's tumor"
      },
      {
        "id": 2,
        "text": "Neuroblastoma"
      },
      {
        "id": 3,
        "text": "Lymphoma"
      },
      {
        "id": 4,
        "text": "Hepatoblastoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div class=\"page\" title=\"Page 4742\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Neuroblastoma</strong> is the <strong>most common </strong>abdominal&nbsp;tumor of <strong>childhood</strong>.</p>\n<div class=\"page\" title=\"Page 4750\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Wilms tumor</strong>, or nephroblastoma, is the <strong>most common</strong> primary malignant <strong>renal tumor</strong> of childhood.</p>\n<p>The renal origin of the mass is usually apparent on CT, but it can be mistaken for neuroblastoma. <strong>Wilm's tumor</strong> shows<strong> peripheral calcification</strong> in contrast-enhanced CT, unlike <strong>intratumoral calcifications</strong> and<strong> vascular encasement</strong>, which are observed <strong>in neuroblastoma.</strong></p>\n<table style=\"width: 776.546875px; height: 422px;\">\n<tbody>\n<tr>\n<td style=\"width: 174px;\"><strong>Features</strong></td>\n<td style=\"width: 233px;\"><strong>Wilms tumor (Nephroblastoma)</strong></td>\n<td style=\"width: 347.546875px;\"><strong>Neuroblastoma</strong></td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Age group</strong></td>\n<td style=\"width: 233px;\">Peaks at 3-4 years of age</td>\n<td style=\"width: 347.546875px;\">Age &lt;2 years of age</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Presentation</strong></td>\n<td style=\"width: 233px;\">Painless abdominal mass</td>\n<td style=\"width: 347.546875px;\">Painful abdominal mass</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Associated syndromes</strong></td>\n<td style=\"width: 233px;\">\n<p>WAGR syndrome</p>\n<p>Beckwith Weidman syndrome</p>\n<p>Denys Drash syndrome</p>\n</td>\n<td style=\"width: 347.546875px;\">Opsoclonus-myoclonus syndrome</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Calcifications</strong></td>\n<td style=\"width: 233px;\">Uncommon (10-15%)</td>\n<td style=\"width: 347.546875px;\">Very common (90%)</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Margins</strong></td>\n<td style=\"width: 233px;\">Well circumscribed</td>\n<td style=\"width: 347.546875px;\">Poorly marginated</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Vascular invasion</strong></td>\n<td style=\"width: 233px;\">Extends into the IVC and renal vein</td>\n<td style=\"width: 347.546875px;\">Encases vascular structures but does not invade them</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Metastasis</strong></td>\n<td style=\"width: 233px;\">Lung (most common)</td>\n<td style=\"width: 347.546875px;\">Bone (most common)</td>\n</tr>\n<tr>\n<td style=\"width: 174px;\"><strong>Findings on CECT</strong></td>\n<td style=\"width: 233px;\">Peripheral calcifications</td>\n<td style=\"width: 347.546875px;\">Intratumoral calcifications with vascular encasement</td>\n</tr>\n</tbody>\n</table>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old male presents with heat intolerance and weight loss for the past few weeks. He has lost 10 kgs despite having an increased appetite. On examination, he has a fine tremor of the hands, and his thyroid is enlarged. Lab investigations reveal low TSH and elevated T3 and T4. What is the most common ocular motility defect seen in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Elevator restriction"
      },
      {
        "id": 2,
        "text": "Depressor palsy"
      },
      {
        "id": 3,
        "text": "Adductor palsy"
      },
      {
        "id": 4,
        "text": "Elevation palsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical scenario is suggestive of Grave's disease. The most common ocular motility defect seen in Grave's disease is <strong>elevator restriction</strong>.</p>\n<p>It occurs due to the <strong>fibrotic contracture</strong> of<strong>&nbsp;</strong>the <strong>inferior rectus muscle. </strong>The inferior rectus muscle has to relax during the elevation of the eye. The fibrosis of the muscle restricts its relaxation and thus elevation of the eye is restricted.</p>\n<p>There is an inability to look up (in both adducted and abducted positions) along with esotropia (fibrosis of the medial rectus).&nbsp;</p>\n<p>Only the <strong>belly</strong> of the muscle is involved in thyroid myopathy; the tendon is characteristically spared.</p>\n<p>Ocular motility restriction in order of frequency is as follows:</p>\n<ul>\n<li>Elevation defect</li>\n<li>Abduction defect, due to fibrosis of the medial rectus</li>\n<li>Depression defect, due to fibrosis of the superior rectus</li>\n<li>Adduction defect, due to fibrosis of the lateral rectus</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common type of breech presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Frank breech"
      },
      {
        "id": 2,
        "text": "Complete breech"
      },
      {
        "id": 3,
        "text": "Footling breech"
      },
      {
        "id": 4,
        "text": "Knee breech"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Frank breech</strong> is the most common type of breech.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old woman presented with fever, malaise, and painful enlargement of the thyroid gland after a few days following viral fever. On investigation, thyroid antibodies were normal and serum T4 was slightly raised. Which of the following is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Subacute lymphocytic thyroiditis"
      },
      {
        "id": 2,
        "text": "Riedel\u2019s thyroiditis"
      },
      {
        "id": 3,
        "text": "Subacute granulomatous thyroiditis"
      },
      {
        "id": 4,
        "text": "Hashimoto\u2019s thyroiditis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical condition is suggestive of<strong>&nbsp;subacute granulomatous thyroiditis. </strong></p>\n<p>It is the most common cause of a painful thyroid.&nbsp;It is also known as painful subacute thyroiditis, <strong>de Quervain thyroiditis,</strong>&nbsp;or&nbsp;<strong>migratory</strong> thyroiditis (this is because the pain can shift to different locations in the thyroid).&nbsp;</p>\n<p>Option A:<strong> Subacute lymphocytic </strong>thyroiditis (postpartum thyroiditis) is typically <strong>painless.</strong> It often occurs after pregnancy and is characterized by lymphocytic inflammation in the thyroid.</p>\n<p>Option B: <strong>Riedel's</strong> thyroiditis is a rare disorder characterized by a&nbsp;<strong>painless</strong>, rapidly growing thyroid mass with extensive fibrosis involving the thyroid and contiguous neck structures.</p>\n<p>Option C: <strong>Hashimoto </strong>thyroiditis is an autoimmune disease that presents as&nbsp;<strong>painless</strong> enlargement of the thyroid associated with some degree of hypothyroidism in middle-aged women.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common thyroid malignancy in iodine-deficient regions?",
    "choices": [
      {
        "id": 1,
        "text": "Papillary"
      },
      {
        "id": 2,
        "text": "Anaplastic"
      },
      {
        "id": 3,
        "text": "Follicular"
      },
      {
        "id": 4,
        "text": "Medullary"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Follicular thyroid carcinoma </strong>is the most common<strong>&nbsp;</strong>thyroid malignancy in<strong> iodine-deficient areas.</strong></p>\n<p><strong>Papillary thyroid carcinoma</strong> is the most common thyroid malignancy in <strong>iodine-sufficient areas</strong>, children, and radiation-exposed&nbsp;areas.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common primary malignant orbital tumor in children originates from _________",
    "choices": [
      {
        "id": 1,
        "text": "Muscle"
      },
      {
        "id": 2,
        "text": "Nerve"
      },
      {
        "id": 3,
        "text": "Blood vessel"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common<strong> primary malignant orbital</strong> tumor in<strong> children</strong> is <strong>rhabdomyosarcoma,</strong> which usually arises from soft tissues such as <strong>muscle</strong>.</p>\n<ul>\n<li>Most common primary <strong>malignant</strong> orbital tumor in children: <strong>Rhabdomyosarcoma</strong></li>\n<li>Most common primary <strong>benign</strong> orbital tumor<strong> </strong>in<strong> </strong>adults: <strong>Cavernous hemangioma&nbsp;</strong></li>\n<li>Most common primary <strong>malignant</strong> orbital tumor in adults:<strong> Lymphoma</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common end-product of fatty acid synthesis pathway?",
    "choices": [
      {
        "id": 1,
        "text": "Arachidonic acid"
      },
      {
        "id": 2,
        "text": "Oleic acid"
      },
      {
        "id": 3,
        "text": "Palmitic acid"
      },
      {
        "id": 4,
        "text": "Acetyl CoA"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The<strong> most common </strong>end product of fatty acid synthesis is <strong>palmitic acid.</strong></p>\n<p>Palmitic acid is a 16 carbon <strong>saturated</strong> long chain fatty acid (LCFA). The substrate for its synthesis is <strong>acetyl CoA</strong>. Acetyl CoA is also the end product of fatty acid beta-oxidation.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A CECT abdomen done to evaluate an elderly man with intermittent flank pain is shown below. Which of the following will be the most common site for secondary metastasis in patients with this tumor?",
    "choices": [
      {
        "id": 1,
        "text": "Adrenal glands"
      },
      {
        "id": 2,
        "text": "Lungs"
      },
      {
        "id": 3,
        "text": "Liver"
      },
      {
        "id": 4,
        "text": "Brain"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The history and CECT mentioned in the above scenario are consistent with a diagnosis of <strong>renal cell carcinoma</strong>. The most common site for <strong>secondary metastasis</strong> in RCC is the <strong>lungs</strong>, where they form secondaries commonly known as <strong>cannonball secondaries</strong>.</p>\n<p>The tumor is prone to extend into the renal vein and reach the lungs via circulation. RCC also metastasizes to the bone, lymph nodes, liver, adrenal glands, and brain.</p>\n<p><strong>Para-aortic nodes</strong> are the first draining lymph nodes.</p>\n<p>The image below shows multiple round opacities in bilateral lungs suggestive of cannonball metastasis in the lungs.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/601c0f339c564feca309e2614de26236.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9429de57accc476a8f14cb2f65aaea5fx720x714.JPEG"
    ]
  },
  {
    "text": "Which of the following is the predominant pathogen to infect renal transplant recipients one to four months following transplantation?",
    "choices": [
      {
        "id": 1,
        "text": "Cytomegalovirus"
      },
      {
        "id": 2,
        "text": "JC virus"
      },
      {
        "id": 3,
        "text": "BK virus"
      },
      {
        "id": 4,
        "text": "Epstein-Barr virus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">The predominant pathogen to <strong>infect</strong> <strong>renal transplant recipients</strong> in the period around <strong>1</strong> to<strong> 4 months</strong> following the transplantation\u00a0is <strong>cytomegalovirus (CMV)</strong>.</p>\n<p class=\"p1\">CMV is the <strong>most common</strong> virus to affect recipients after organ transplantation (kidney, heart, lung etc). The maximal risk occurs between 1 and 4 months after transplantation (in the absence of prophylaxis). The most common CMV presentation in kidney transplant patients includes <strong>fever</strong>, leukopenia, hepatosplenomegaly, myalgia, and arthralgia. Antiviral<strong> prophylaxis</strong> with <strong>ganciclovir</strong> or <strong>valganciclovi</strong>r is used in renal transplant recipients whenever indicated to prevent CMV disease.\u00a0</p>\n<p class=\"p1\">Given below are the most common opportunistic infections in renal transplant recipients:\u00a0</p>\n<table style=\"border-collapse: collapse; width: 34.6182%; height: 41.9921px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 13.9941px;\">\n<td style=\"width: 36.8807%; height: 13.9941px;\"><strong>Peritransplant (less than 1 month)</strong></td>\n<td style=\"width: 34.2469%; height: 13.9941px;\"><strong>Early (1-6 months)</strong></td>\n<td style=\"width: 28.5462%; height: 13.9941px;\"><strong>Late (more than 6 months)</strong></td>\n</tr>\n<tr style=\"height: 27.998px;\">\n<td style=\"width: 36.8807%; height: 27.998px;\">\n<ul>\n<li>Wound infection</li>\n<li>Herpes virus</li>\n<li>Oral candidiasis</li>\n<li>Urinary tract infection</li>\n</ul>\n</td>\n<td style=\"width: 34.2469%; height: 27.998px;\">\n<ul>\n<li>Pneumocystis jiroveci</li>\n<li>Cytomegalovirus</li>\n<li>Hepatitis B</li>\n<li>Listeria</li>\n</ul>\n</td>\n<td style=\"width: 28.5462%; height: 27.998px;\">\n<ul>\n<li>Aspergillus</li>\n<li>Nocardia</li>\n<li>BK Virus (polyoma)</li>\n<li>Herpes Zoster</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You see a neonate undergoing phototherapy for hyperbilirubinemia. Blood workup revealed the presence of a hemolytic picture along with spherocytes and polychromatophilic reticulocytes. MCV is low normal along with elevated MCHC. There was a similar history of hemolytic anemia in the mother. The pedigree analysis points towards an autosomal dominant mode of inheritance. The most likely genetic mutation seen in this case is?",
    "choices": [
      {
        "id": 1,
        "text": "Spectrin"
      },
      {
        "id": 2,
        "text": "Ankyrin"
      },
      {
        "id": 3,
        "text": "Band 3"
      },
      {
        "id": 4,
        "text": "Band 4.2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>Ankyrin gene</strong> mutation is the&nbsp;most likely genetic mutation seen in the given case of <strong>autosomal-dominant hereditary spherocytosis</strong> (HS).</p>\n<p>Hemolytic manifestation causing indirect hyperbilirubinemia requiring phototherapy or blood transfusion in infancy with positive family history and typical laboratory findings is suggestive of HS.</p>\n<p>History of blood transfusions in later life and not infancy is used to classify the severity of the disease.&nbsp;&nbsp;</p>\n<ul>\n<li>Most common <strong>mode of inheritance</strong> of HS- <strong>autosomal dominant</strong></li>\n<li>Most common gene <strong>mutation</strong> in autosomal-<strong>dominant</strong> HS- <strong>ankyrin</strong> &gt; Band 3</li>\n<li>Most common gene <strong>mutation</strong> in autosomal-<strong>recessive</strong> HS- <strong>spectrin</strong></li>\n<li>Most <strong>s</strong>evere form of HS- <strong>s</strong>pectrin (recessive)&nbsp;</li>\n</ul>\n<p>Classification of the severity of HS is based on the requirement of blood transfusion in later life and not during infancy.</p>\n<p style=\"text-align: left;\"><strong>RBC Membrane-Cytoskeleton disorders</strong></p>\n<table style=\"width: 328.09px;\">\n<tbody>\n<tr>\n<td style=\"width: 245.09px;\">\n<table style=\"width: 327px;\">\n<thead>\n<tr>\n<td style=\"width: 57px;\">\n<p><strong>Chromosomal Location</strong></p>\n</td>\n<td style=\"width: 234px;\">\n<p><strong>Protein Produced</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p><strong>Disease (Inheritance)</strong></p>\n</td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"width: 57px;\">\n<p>1q</p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p><strong>-alpha Spectrin</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p><strong>HS (recessive)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">&nbsp;</td>\n<td style=\"width: 234px; text-align: left;\">&nbsp;</td>\n<td style=\"width: 10px;\">\n<p>HE (dominant)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>14q</p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p><strong>-beta Spectrin</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p><strong>HE (dominant)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p><strong>8p</strong></p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p><strong>Ankyrin</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p><strong>HS (dominant) (accounts for the&nbsp;majority of HS-65%)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p><strong>17q</strong></p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p><strong>Band 3</strong></p>\n<p><strong>(anion exchange protein)</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p><strong>HS (dominant)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">&nbsp;</td>\n<td style=\"width: 234px; text-align: left;\">&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Southeast Asia ovalocytosis (dominant)</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">&nbsp;</td>\n<td style=\"width: 234px; text-align: left;\">&nbsp;</td>\n<td style=\"width: 10px;\">\n<p><strong>Stomatocytosis</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>1p</p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p>Band 4.1</p>\n</td>\n<td style=\"width: 10px;\">\n<p>HE (dominant)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 57px;\">\n<p>15q</p>\n</td>\n<td style=\"width: 234px; text-align: left;\">\n<p><strong>Band 4.2</strong></p>\n</td>\n<td style=\"width: 10px;\">\n<p>HS (recessive)</p>\n</td>\n</tr>\n</tbody>\n</table>\n</td>\n</tr>\n<tr>\n<td style=\"width: 245.09px;\">\n<p><strong><em>Abbreviations:</em></strong> HE, hereditary elliptocytosis; HS, hereditary spherocytosis</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of polypoid cystitis?",
    "choices": [
      {
        "id": 1,
        "text": "Cyclophosphamide use"
      },
      {
        "id": 2,
        "text": "Systemic allergic disorders"
      },
      {
        "id": 3,
        "text": "Indwelling catheters"
      },
      {
        "id": 4,
        "text": "Adenovirus infection"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common cause of <strong>polypoid</strong> <strong>cystitis</strong> is&nbsp;<strong>indwelling catheters.</strong></p>\n<p>Polypoid cystitis is an inflammatory lesion resulting from <strong>mucosal</strong>&nbsp;<strong>irritation</strong>. It may also be associated with radiation therapy and malignant tumors.&nbsp;It usually involves the posterior wall of the bladder.</p>\n<p>Grossly, it may show bulbous or <strong>papillary</strong> <strong>appearance</strong> and&nbsp;may be confused with papillary urothelial carcinoma. Microscopically, the papillary projections are broad-based, non-branching, and <strong>without</strong>&nbsp;<strong>atypia</strong>. Stroma is edematous with <strong>minimal inflammation</strong>.</p>\n<div class=\"page\" title=\"Page 1252\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Options A and D:&nbsp;<strong>Adenovirus</strong> infection and the use of anti-cancer drugs like <strong>cyclophosphamide</strong> cause <strong>hemorrhagic cystitis.</strong></p>\n</div>\n</div>\n</div>\n</div>\n<p>Option B: Systemic <strong>allergic</strong> disorders cause <strong>eosinophilic cystitis.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following malignancies is most commonly associated with the paraneoplastic manifestation shown below?",
    "choices": [
      {
        "id": 1,
        "text": "Breast carcinoma"
      },
      {
        "id": 2,
        "text": "Bladder cancer"
      },
      {
        "id": 3,
        "text": "Gastric adenocarcinoma"
      },
      {
        "id": 4,
        "text": "Lung adenocarcinoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This image shows velvety warty hyperpigmentation on the front of the neck called&nbsp;<strong>acanthosis nigricans</strong>. By far, the commonest site of underlying neoplasm is the <strong>gastrointestinal</strong> tract (70&ndash;90%), and&nbsp;<strong>gastric adenocarcinoma</strong> is the most frequent.</p>\n<p>Production by tumor cells of either<strong> transforming growth factor &alpha; (TGF-&alpha;) or cytokines</strong> that activate insulin\u2010like growth factors or their<strong> cutaneous receptors</strong> has been proposed as the pathogenetic mechanism.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/74dad5ab21bc444691e5934398f2a029.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "In 40% of patients, this is the first sign of undiagnosed cancer. This finding in isolation is associated with which of the following internal malignancies?",
    "choices": [
      {
        "id": 1,
        "text": "Lung cancer"
      },
      {
        "id": 2,
        "text": "Gastric carcinoma"
      },
      {
        "id": 3,
        "text": "Breast cancer"
      },
      {
        "id": 4,
        "text": "Colon cancer"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The image shows&nbsp;<strong>enhanced dermatoglyphics</strong> with <strong>thickened velvety palms</strong> that have the appearance of tripe, the stomach lining of beef. <strong>Tripe palms</strong> or<strong>&nbsp;acanthosis palmaris</strong> occurring <strong>alone</strong> is more often associated with <strong>bronchial carcinoma.</strong>&nbsp;</p>\n<p>Other sites of tumors are:&nbsp;</p>\n<ul>\n<li>Genitourinary tract</li>\n<li>Carcinoma breast&nbsp;</li>\n</ul>\n<p>Acanthosis nigricans or sign of Leser-Trelat is most commonly associated with&nbsp;<strong>gastric carcinoma</strong></p>\n<p>The <strong>appearance or exacerbation</strong> of tripe palms in a known cancer patient may be a <strong>sign of recurrence</strong> of the malignancy.</p>\n<p>The image below shows tripe palms.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/daa22ba8df1e4979a9f29fcbc1174dee.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/434e7c7d807b4b4c8af346b7f58acf2cx720x1020.PNG"
    ]
  },
  {
    "text": "The most common skin- related complaint reported in patients with HIV is _________.",
    "choices": [
      {
        "id": 1,
        "text": "Idiopathic pruritis"
      },
      {
        "id": 2,
        "text": "Seborrhoeic dermatitis"
      },
      {
        "id": 3,
        "text": "Fungal infections"
      },
      {
        "id": 4,
        "text": "Folliculitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the post-antiretroviral era, <strong>idiopathic pruritus </strong>has become the most common skin-related disease manifestation reported in patients with HIV.</p>\n<p>The other common skin manifestations are:</p>\n<ul>\n<li>Xerosis (23%) and icythyosis</li>\n<li>Nodular prurigo</li>\n<li><strong>Folliculitis</strong></li>\n<li>Eosinophilic folliculitis</li>\n<li>Pruritic papular eruption</li>\n<li><strong>Seborrhoeic dermatitis (9%)</strong></li>\n<li>Granuloma annulare</li>\n<li>Drug eruptions</li>\n<li>Herpes simplex</li>\n<li>Herpes zoster</li>\n<li>Viral warts</li>\n<li>Mollusca</li>\n<li>Oral and vaginal candidosis</li>\n<li><strong>Tinea (including onychomycosis)</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man presents with a history of fatigue, dark-coloured urine and photosensitivity. He consumes alcohol regularly. On examination, hyperpigmentation and scarring are present on the face and dorsum of the hand. Lab findings are given below. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute intermittent porphyria"
      },
      {
        "id": 2,
        "text": "Porphyria cutanea tarda"
      },
      {
        "id": 3,
        "text": "Hereditary coproporphyria"
      },
      {
        "id": 4,
        "text": "Variegate porphyria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A middle-aged adult presenting with features of hemolysis and photosensitivity with elevated urine uroporphyrin suggests a diagnosis of<strong> porphyria cutanea tarda.</strong></p>\n<p>Porphyria cutanea tarda (PCT) is the<strong> most common </strong>porphyria. It is caused by the deficiency of <strong>uroporphyrinogen</strong> decarboxylase, which converts uroporphyrinogen III to coproporphyrinogen III. \u00a0It is characterized by photosensivity, which manifests as <strong>blistering skin lesions</strong>\u00a0on the back of the hands with crusting and scarring. It is associated with <strong>hemochromatosis </strong>and patients may develop <strong>chronic liver disease.</strong>\u00a0There is increased excretion of <strong>uroporphyrin</strong> in the urine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common symptom of ADHD?",
    "choices": [
      {
        "id": 1,
        "text": "Attention deficit"
      },
      {
        "id": 2,
        "text": "Hyperactivity"
      },
      {
        "id": 3,
        "text": "Impulsivity"
      },
      {
        "id": 4,
        "text": "Specific learning disabilities"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common symptom of ADHD is <strong>hyperactivity</strong>.</p>\n<p>The most cited characteristics of children with attention-deficit/hyperactivity disorder (ADHD), in order of frequency, are as follows:</p>\n<ul>\n<li><strong>Hyperactivity</strong> (fidgety, unable to sit still, as though driven by a motor, hyper-talkative, interrupts, blurts out answers)</li>\n<li><strong>Attention deficit</strong> (short attention span, distractibility, perseveration, failure to finish tasks, inattention, poor concentration)</li>\n<li><strong>Impulsivity</strong> (action before thought, abrupt shifts in activity, lack of organization, jumping up in class)</li>\n<li>Memory and thinking deficits.&nbsp;<strong>Intellectual disability </strong>is<strong> not seen </strong>in ADHD.</li>\n<li>Specific learning disabilities</li>\n<li>Speech and hearing deficits</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common skeletal anomaly associated with Klippel-Feil syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "High scapula"
      },
      {
        "id": 2,
        "text": "Vertebra plana"
      },
      {
        "id": 3,
        "text": "Scoliosis"
      },
      {
        "id": 4,
        "text": "Pseudoarthosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most common skeletal anomaly associated with Klippel-Feil syndrome is <strong>scoliosis</strong>.&nbsp;</p>\n<p class=\"p1\">Klippel-Feil syndrome is often associated with other skeletal and extraskeletal anomalies:&nbsp;</p>\n<ul>\n<li class=\"p1\">Skeletal anomalies: scoliosis &gt; Sprengel deformity &gt; cervical ribs</li>\n<li class=\"p1\">Extraskeletal anomalies:&nbsp;renal abnormalities &gt; deafness &gt; congenital heart disease</li>\n</ul>\n<p>Ventricular septal defect is the most common cardiovascular anomaly associated with this syndrome.</p>\n<p class=\"p1\"><strong>Synkinesis</strong> (<strong>mirror movements</strong>) is involuntary&nbsp;paired movements of hands and arms seen in around 20% of children with Klippel-Feil syndrome. The child cannot move one hand without a similar reciprocal movement in the opposite hand.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year old boy comes to the clinic complaining about recurrent painful oral ulcers. He also experiences repeated episodes of eye redness and pain which subside with medication. On examination, ulcers are seen on his genitals. Which of the following features would you not expect to see in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Dural sinus thrombosis"
      },
      {
        "id": 2,
        "text": "Pulmonary aneurysms"
      },
      {
        "id": 3,
        "text": "Nailfold capillary abnormalities"
      },
      {
        "id": 4,
        "text": "Uveitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of<strong> Beh&ccedil;et disease. </strong>Nail fold capillary abnormalities&nbsp;are typically seen in <strong>systemic sclerosis.</strong></p>\n<p>Behcet disease is a neutrophilic vasculitis affecting small- to medium-sized vessels that classically presents as a clinical <strong>triad </strong>of<strong>&nbsp;recurrent oral aphthous ulcers, genital ulcers, </strong>and <strong>uveitis</strong>.&nbsp;Other skin findings include <strong>erythema nodosa</strong> (red tender nodules on legs) and <strong>positive pathergy test</strong> (pustular reaction 24-48 hrs after sterile needle puncture or normal saline injection).</p>\n<p>There can also be gastrointestinal and pulmonary manifestations, with disease mortality related to severe neurologic involvement or rupture of vascular aneurysms. <strong>Dural sinus thrombosis</strong> is the most common CNS manifestation in children. <strong>Pulmonary aneurysms</strong> are the most severe feature of pediatric BD.</p>\n<p>It is associated with <strong>HLA subtype B51.&nbsp;</strong><strong>T helper 17 (Th17) </strong> cells play an important contribution in the recruitment of neutrophils, which will later infiltrate into the vessel wall.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most widely used illegal drug in the world is _______.",
    "choices": [
      {
        "id": 1,
        "text": "Cocaine"
      },
      {
        "id": 2,
        "text": "Heroine"
      },
      {
        "id": 3,
        "text": "Cannabis"
      },
      {
        "id": 4,
        "text": "Ecstasy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cannabis</strong> is the most widely used <strong>illegal drug</strong> in the world.</p>\n<p>Cannabis is the <strong>fourth</strong> most commonly used psychoactive drug among adults in the United States, after caffeine, alcohol, and nicotine.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common subtype of Hodgkin's lymphoma?",
    "choices": [
      {
        "id": 1,
        "text": "Nodular sclerosis"
      },
      {
        "id": 2,
        "text": "Mixed cellularity"
      },
      {
        "id": 3,
        "text": "Lymphocyte predominant"
      },
      {
        "id": 4,
        "text": "Lymphocyte rich"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nodular sclerosis </strong>is the <strong>most common</strong> type of <strong>Hodgkin's lymphoma</strong>, while <strong>mixed cellularity</strong> is most common<strong>&nbsp;</strong>in <strong>India.</strong></p>\n<p>The incidence of nodular sclerosis is equal in men and women. It commonly involves the <strong>lower cervical, supraclavicular, </strong>and<strong> mediastinal lymph</strong> nodes. It&nbsp;commonly&nbsp;affects adolescents and young adults. It has an <strong>excellent</strong> prognosis.</p>\n<p><strong>Mixed-cellularity</strong> Hodgkin lymphoma is seen in patients older than 50 years of age. There is a male predominance.</p>\n<p>The image given below shows the histology of nodular sclerosis showing a&nbsp;<strong>lacunar</strong> variant of&nbsp;Reed&ndash;Sternberg cells</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1bab4b71f37c4ea39102bcb136f7bf71x1280x1236.JPEG"
    ]
  },
  {
    "text": "A college student presents to the dermatology OPD with a pruritic lesion on his left foot for 5 days. Which is the most common causative organism for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Trichophyton rubrum"
      },
      {
        "id": 2,
        "text": "Trichophyton tonsurans"
      },
      {
        "id": 3,
        "text": "Epidermophyton floccosum"
      },
      {
        "id": 4,
        "text": "Trichophyton interdigitale"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows a scaly pruritic lesion of <strong>tinea</strong> <strong>pedis</strong> or <strong>ringworm</strong> of foot is most commonly caused by&nbsp;<em><strong>Trichophyton rubrum</strong></em> infections (70%) followed by <em>Trichophyton interdigitale</em>&nbsp;infections (15%), <em>Epidermophyton floccosum</em>&nbsp;infections (&lt;10%), and mixed infections (5%).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d3539a45f7f248adbe918593647fb8f5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/554cc575be3c4986b105ae2ccc650eecx1280x922.5387870239774.JPEG"
    ]
  },
  {
    "text": "What is the most commonly used confirmatory test for HIV?",
    "choices": [
      {
        "id": 1,
        "text": "Radio-immunoprecipitation assay (RIPA)"
      },
      {
        "id": 2,
        "text": "p24 antigen capture assay"
      },
      {
        "id": 3,
        "text": "HIV RNA nucleic acid testing (NAT)"
      },
      {
        "id": 4,
        "text": "Western blot"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Western blot</strong>&nbsp;is the most commonly used confirmatory test for HIV. It detects specific antibodies against multiple proteins of all 3 major HIV genes - <strong><em>gag, pol, </em></strong>and<strong><em> env</em></strong>. Western blot has a <strong>high specificity</strong> and is therefore hence used as a&nbsp;confirmatory test.</p>\n<p>In India, NACO provides western blot confirmatory testing <strong>only to resolve indeterminate results</strong> on previous serological testing and <strong>not</strong> for <strong>routine confirmation</strong> after a&nbsp;positive result on screening tests.</p>\n<p>Drawbacks include low rates of detection during acute HIV infection and&nbsp;misclassification of HIV-2 infection.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A sexually active woman presents with multiple lesions over her genital region as shown below. Which of the following organisms are implicated in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "2, 3 & 5"
      },
      {
        "id": 2,
        "text": "1, 3 & 5"
      },
      {
        "id": 3,
        "text": "Only 4"
      },
      {
        "id": 4,
        "text": "2 & 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given scenario and image are suggestive of <strong>genital warts.</strong> Human papillomavirus <strong>(HPV) 6 and 11</strong> cause nearly all genital warts.</p>\n<p>It is usually<strong> clinically diagnosed</strong> but if co-existing neoplasia is suspected then a biopsy is required. HPV serotyping is not required for routine diagnosis.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9fa1919c6fea4942bc4bbc41f07a48cc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Mutations causing hypertrophic cardiomyopathy are most commonly seen in the gene encoding which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Titin"
      },
      {
        "id": 2,
        "text": "\u03b2-myosin heavy chain"
      },
      {
        "id": 3,
        "text": "\u03b1-tropomyosin"
      },
      {
        "id": 4,
        "text": "Cardiac Troponin I"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Mutations causing<strong> hypertrophic cardiomyopathy</strong>&nbsp;are most commonly seen in the genes encoding <strong>&beta;-myosin heavy chain </strong>(&beta;-MHC).</p>\n<p>Hypertrophic cardiomyopathy (HCM) is an <strong>autosomal dominant</strong> disease. In the majority of cases it is due to <strong>missense mutations</strong>&nbsp;in the following two <strong>sarcolemmal protein</strong> genes:&nbsp;</p>\n<ul>\n<li aria-level=\"1\">Myosin binding protein C (MYBC)</li>\n<li aria-level=\"1\">Beta myosin heavy chain (MYH7)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common site of pseudoaneurysms in chronic pancreatitis is _______.",
    "choices": [
      {
        "id": 1,
        "text": "Splenic vein"
      },
      {
        "id": 2,
        "text": "Splenic artery"
      },
      {
        "id": 3,
        "text": "Gastroduodenal artery"
      },
      {
        "id": 4,
        "text": "Pancreaticoduodenal artery"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The most common site of pseudoaneurysm in chronic pancreatitis is splenic artery &gt; gastroduodenal&nbsp;artery &gt;&nbsp;pancreaticoduodenal artery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common opportunistic infection in HIV-infected individuals?",
    "choices": [
      {
        "id": 1,
        "text": "Tuberculosis"
      },
      {
        "id": 2,
        "text": "Disseminated candidiasis"
      },
      {
        "id": 3,
        "text": "Herpes zoster"
      },
      {
        "id": 4,
        "text": "Pneumocystis jiroveci pneumonia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Tuberculosisis</strong> the most common opportunistic infection in HIV-infected individuals <strong>globally and</strong> in <strong>India</strong>.</p>\n<p>In patients with relatively<strong> high CD4+ T cell counts</strong>, the typical pattern of <strong>pulmonary reactivation</strong> occurs (60&ndash;80%). In patients with <strong>lower</strong> CD4+ T cell counts, <strong>disseminated disease</strong>&nbsp;is seen.</p>\n<p><strong>Primary prophylaxis:</strong>&nbsp;<strong>Isoniazid </strong>and <strong>pyridoxine</strong> for <strong>9 months</strong> for HIV-infected individuals meeting the following conditions:</p>\n<ul>\n<li>PPD skin-test reaction of &gt;5 mm or,</li>\n<li>Positive IFN-&gamma; release assay or,</li>\n<li>Close household contacts of persons with active tuberculosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Congenital adrenal hyperplasia most commonly presents as _______.",
    "choices": [
      {
        "id": 1,
        "text": "Male pseudohermaphroditism"
      },
      {
        "id": 2,
        "text": "Female pseudohermaphroditism"
      },
      {
        "id": 3,
        "text": "True hermaphroditism"
      },
      {
        "id": 4,
        "text": "46, XY intersex"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Congenital adrenal hyperplasia</strong> (CAH) most commonly presents as <strong>female pseudohermaphroditism</strong> as the most common enzyme deficiency is <strong>21-hydroxylase deficiency</strong>.</p>\n<p>A <strong>female pseudohermaphrodite</strong> is a genotypically normal female (<strong>46, XX</strong>), whose <strong>external genitalia</strong> resembles a <strong>male's</strong>.</p>\n<p>The image below shows <strong>ambiguous genitalia</strong> in a female with CAH:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1a3ff187946e4ff2aa560acef1d42402x512x386.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/22c83dc03ebe463984e233baa0315a76x1280x1970.JPEG"
    ]
  },
  {
    "text": "The most common subtype of fibromuscular dysplasia is ______.",
    "choices": [
      {
        "id": 1,
        "text": "Intimal fibroplasia"
      },
      {
        "id": 2,
        "text": "Medial hyperplasia"
      },
      {
        "id": 3,
        "text": "Medial fibroplasia"
      },
      {
        "id": 4,
        "text": "Perimedial dysplasia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most common type of fibromuscular dysplasia is medial fibroplasia.</p>\n<p>Histological subtypes of fibromuscular dysplasia</p>\n<ul>\n<li>Intimal fibroplasia (focal)</li>\n<li>Medial dysplasia (multifocal)</li>\n<li>Adventitial hyperplasia</li>\n</ul>\n<p>Medial dysplasia is of further 3 types</p>\n<ul>\n<li>Medial fibroplasia\n<ul>\n<li>Most common type and characterized by alternating areas of thinned media and fibromuscular ridges.</li>\n</ul>\n</li>\n<li>Medial hyperplasia&nbsp;</li>\n<li>Perimedial dysplasia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "With respect to the condition shown in image, select the most appropriate response.",
    "choices": [
      {
        "id": 1,
        "text": "Most common nephropathy associated with malignancy"
      },
      {
        "id": 2,
        "text": "Equal incidence  in males and females"
      },
      {
        "id": 3,
        "text": "Electron microscopy shows subendothelial deposits"
      },
      {
        "id": 4,
        "text": "Associated with antibodies against Megalin antigen in humans."
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given immunofluorescence image shows <strong>diffuse granular deposits</strong> of <strong>IgG</strong> and <strong>C3</strong> which is characteristic of <strong>membranous</strong> <strong>glomerulonephritis</strong> (membranous nephropathy). It is the <strong>most common</strong> <strong>nephropathy</strong> associated with <strong>malignancy</strong>.</p>\n<p><strong>Membranous glomerulonephritis</strong></p>\n<ul>\n<li>It is the most common cause of <strong>nephrotic</strong> <strong>syndrome</strong> in the <strong>elderly</strong>.</li>\n<li>Most common nephropathy associated with malignancy.</li>\n<li>The highest incidence of <strong>renal</strong> <strong>vein</strong> <strong>thrombosis</strong>.</li>\n<li><strong>Light</strong> <strong>microscopy</strong> shows uniform thickening of the basement membrane along with peripheral capillary loops.&nbsp;</li>\n<li><strong>Immunofluorescence</strong> shows diffuse granular deposits of IgG and C3.</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<p style=\"padding-left: 30px;\"><strong>Option b:&nbsp;</strong><strong>Male to female</strong> ratio is<strong> 2:1</strong></p>\n<p style=\"padding-left: 30px;\"><strong>Option c: Electron</strong> <strong>microscopy</strong> shows <strong>subepithelial</strong> <strong>deposits&nbsp;</strong>(not subendothelial deposits)</p>\n<p style=\"padding-left: 30px;\"><strong>Option d:&nbsp;</strong>&nbsp;Associated with antibodies against <strong>M-type phospholipase A2</strong> receptor on human podocytes (antibodies against Megalin are present in rats,&nbsp;not in humans)</p>\n<p>&nbsp;</p>\n<p>The granular deposits have been demarcated in the immunofluorescence image below.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f705abff95db49c782b3fa296dfcc1bc.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7774907f0d4c484797f32f1a30ba625fx1042x753.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6798f4584a254e9cb453752b11bc4dcdx450x338.JPEG"
    ]
  },
  {
    "text": "A 27-year-old sexually active man presents to the OPD with the following finding. He informs you that a few days ago, he developed an erythematous vesicular lesion at the same location within hours of taking a drug. Which of the following is most commonly implicated here?",
    "choices": [
      {
        "id": 1,
        "text": "Carbocystine"
      },
      {
        "id": 2,
        "text": "Cotrimoxazole"
      },
      {
        "id": 3,
        "text": "NSAID"
      },
      {
        "id": 4,
        "text": "Tetracycline"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The characteristic <strong>lesion healing</strong> with <strong>hyperpigmentation</strong> following <strong>drug</strong> intake is consistent with&nbsp;<strong>fixed drug eruption</strong>.&nbsp;<strong>NSAIDs</strong> are the most commonly implicated drug.&nbsp;</p>\n<p>Fixed drug eruption (FDE) is a cutaneous adverse drug reaction characterized by <strong>recurrent</strong> <strong>well\u2010defined lesions</strong> occurring at the <strong>same sites</strong> each time the offending drug is taken.&nbsp;It typically presents <strong>30 min to 8 h</strong> after drug exposure.</p>\n<p>The most common drugs that act as triggers are:</p>\n<ol>\n<li>NSAIDs (25%)</li>\n<li>Paracetamol (15%)</li>\n<li>Cotrimoxazole</li>\n<li>Tetracyclines</li>\n</ol>\n<p>FDE is a form of classical <strong>delayed\u2010type hypersensitivity reaction.</strong></p>\n<p>Typically, FDE presents as a <strong>sharply defined</strong>, round, or oval <strong>erythematous and oedematous plaque,</strong> which evolves to become <strong>dusky</strong>, <strong>violaceous,</strong> and occasionally <strong>vesicular or bullous lesions</strong>. Lesions are usually solitary or few in number.</p>\n<p>Commonly affected sites include the<strong> lips, genitals, palms,&nbsp;and soles</strong>; 5% of cases may have an exclusive mucosal involvement.&nbsp;Overall, the&nbsp;most common site involved is the <strong>genitalia</strong>.</p>\n<p>The majority of FDE is <strong>self\u2010limiting</strong> with an <strong>excellent prognosis</strong>.</p>\n<p>Note:&nbsp;The generalized bullous form of FDE should be differentiated from toxic epidermal necrolysis by prior similar history, absence of target lesions, and no involvement of mucosal surfaces.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a9216f3397c5419e9d58cf1c041e63de.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common site for fixed drug eruption?",
    "choices": [
      {
        "id": 1,
        "text": "Face"
      },
      {
        "id": 2,
        "text": "Extremity"
      },
      {
        "id": 3,
        "text": "Trunk"
      },
      {
        "id": 4,
        "text": "Glans penis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Glans penis</strong> is the best answer among the given options. Fixed drug eruptions(FDE) can occur anywhere in the body. However, <strong>50%</strong> of FDE occurs in the <strong>genital</strong> and <strong>oral mucosa.</strong> The other common sites are palms and soles.</p>\n<p>Drug\u2010specific clinical patterns have been reported. These include the following:</p>\n<ul>\n<li>NSAID\u2010induced FDE -&nbsp;genitals and lips</li>\n<li>Tetracycline and trimethoprim/sulfamethoxazole\u2010induced FDE - genitals</li>\n<li>Metamizole\u2010induced FDE -&nbsp;trunk and extremities</li>\n<li>Carbocysteine\u2010induced FDE - face</li>\n</ul>\n<p>The image below shows hyperpigmentation on the glans penis- healed fixed drug eruption.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/543d31484ec840a9b94dbf81b54b7b69x186x127.PNG"
    ]
  },
  {
    "text": "What is the isotype of the rheumatoid factor most commonly measured in the laboratory?",
    "choices": [
      {
        "id": 1,
        "text": "Ig M"
      },
      {
        "id": 2,
        "text": "Ig G"
      },
      {
        "id": 3,
        "text": "Ig A"
      },
      {
        "id": 4,
        "text": "Ig D"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>IgM</strong> isotype is the rheumatoid factor (RF) most commonly measured in laboratories.</p>\n<p>IgM RF has been found in 75&ndash;80% of patients with rheumatoid arthritis. IgG and IgA isotypes of RF have also been identified.</p>\n<p>However, RF is not specific for rheumatoid arthritis and can also be found in the following conditions:</p>\n<ul>\n<li>Primary Sj&ouml;gren&rsquo;s syndrome</li>\n<li>Systemic lupus erythematosus</li>\n<li>Subacute bacterial endocarditis</li>\n<li>Hepatitis B and C</li>\n</ul>\n<div class=\"page\" title=\"Page 2581\">&nbsp;</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of vasculitis in children in India?",
    "choices": [
      {
        "id": 1,
        "text": "Henoch-Schonlein purpura"
      },
      {
        "id": 2,
        "text": "Kawasaki disease"
      },
      {
        "id": 3,
        "text": "Juvenile idiopathic arthritis"
      },
      {
        "id": 4,
        "text": "Rheumatic fever"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>most common</strong> cause of <strong>vasculitis</strong> in <strong>children</strong> in India is <strong>Kawasaki</strong> disease.</p>\n<p>Kawasaki disease has a higher incidence in children in the Indian subcontinent.</p>\n<p>The most common vasculitis worldwide is Henoch-Schonlein purpura, whereas in the Indian subcontinent and other Asian countries the most common vasculitis is Kawasaki disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common site for chondrosarcoma is ______.",
    "choices": [
      {
        "id": 1,
        "text": "Pelvis"
      },
      {
        "id": 2,
        "text": "Proximal humerus"
      },
      {
        "id": 3,
        "text": "Proximal femur"
      },
      {
        "id": 4,
        "text": "Vertebrae"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p class=\"p1\">The most common site for chondrosarcoma is the proximal femur.</p>\n<p class=\"p1\">Other sites of involvement are long bones of upper limbs&nbsp;<strong>&gt;&nbsp;</strong>pelvis<strong>&gt;&nbsp;</strong>the ribs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common type of renal tubular acidosis?",
    "choices": [
      {
        "id": 1,
        "text": "Type 1"
      },
      {
        "id": 2,
        "text": "Type 2"
      },
      {
        "id": 3,
        "text": "Type 3"
      },
      {
        "id": 4,
        "text": "Type 4"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>most common</strong> type of renal tubular acidosis (<strong>RTA</strong>) is the&nbsp;<strong>type 4 </strong>or&nbsp;hyperkalemic type.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common developmental abnormality of the uterus?",
    "choices": [
      {
        "id": 1,
        "text": "Didelphys"
      },
      {
        "id": 2,
        "text": "Arcuate"
      },
      {
        "id": 3,
        "text": "Bicornuate"
      },
      {
        "id": 4,
        "text": "Septate"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The <strong>most common</strong>&nbsp;developmental abnormality of the uterus is <strong>septate</strong> <strong>uterus</strong>, followed by <strong>bicornuate</strong> uterus.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following ovarian tumors is the most radiosensitive?",
    "choices": [
      {
        "id": 1,
        "text": "Dysgerminoma"
      },
      {
        "id": 2,
        "text": "Dermoid cyst"
      },
      {
        "id": 3,
        "text": "Serous cystadenoma"
      },
      {
        "id": 4,
        "text": "Teratoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Dysgerminoma</strong> is the&nbsp;<strong>most radiosensitive</strong> ovarian tumor. They are highly susceptible to&nbsp;radiotherapy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the most common viral cause of diarrhea in adults?",
    "choices": [
      {
        "id": 1,
        "text": "Enterovirus"
      },
      {
        "id": 2,
        "text": "Rotavirus"
      },
      {
        "id": 3,
        "text": "Norovirus"
      },
      {
        "id": 4,
        "text": "Cytomegalovirus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common <strong>viral</strong> cause of <strong>diarrhoea</strong> in adults (and overall) is <strong>norovirus&nbsp;</strong>(Norwalk virus).</p>\n<p>In <strong>children</strong>, the most common cause is <strong>rotavirus</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Following road traffic accident, a man developed head injury resulting in a defect in the association fibres. Which of the following is not classified under these fibres?",
    "choices": [
      {
        "id": 1,
        "text": "Cingulum"
      },
      {
        "id": 2,
        "text": "Corona radiata"
      },
      {
        "id": 3,
        "text": "Fornix"
      },
      {
        "id": 4,
        "text": "Arcuate fasciculus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Corona radiata</strong> is not classified under association fibers. It an example of <strong>projection fiber.</strong></p>\n<p>Option A:&nbsp;<strong>Cingulum</strong>&nbsp;is a <strong>long association fiber</strong>&nbsp;connecting the frontal and parietal lobes with the parahippocampal and temporal cortical region.</p>\n<p>Option C:&nbsp;<strong>Fornix</strong> is an example of <strong>association fibe</strong>r but only&nbsp;<strong>Hippocampal commissure of fornix</strong> is a <strong>commisural fibre</strong> as it has&nbsp;transverse fibers connecting the two crura of the fornix.</p>\n<p>Option D:&nbsp;<strong>Arcuate fasciculus</strong> is a <strong>short association fiber</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common benign cause of pyometra?",
    "choices": [
      {
        "id": 1,
        "text": "Endometrial hyperplasia"
      },
      {
        "id": 2,
        "text": "Senile endometritis"
      },
      {
        "id": 3,
        "text": "Pelvic inflammatory disease"
      },
      {
        "id": 4,
        "text": "Cervical stenosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>most common cause</strong> of pyometra is <strong>senile endometritis.</strong></p>\n<p><strong>Pyometra</strong>&nbsp;refers the collection of <strong>pus</strong> in the <strong>uterus</strong>. The most common cancer that causes pyometra is carcinoma cervix followed by carcinoma endometrium.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 35-year-old man presented with recurrent duodenal ulcers with poor response to medical therapy. He had a history of hyperparathyroidism and transsphenoidal prolactinoma resection. Which among the following is the next appropriate step?",
    "choices": [
      {
        "id": 1,
        "text": "Urea breath test"
      },
      {
        "id": 2,
        "text": "Secretin test"
      },
      {
        "id": 3,
        "text": "Serum gastrin levels"
      },
      {
        "id": 4,
        "text": "Endoscopic ultrasound"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of <strong>Zollinger Ellison syndrome</strong> (ZES). The next appropriate step to evaluate the patients for ZES is by measuring the <strong>serum gastrin levels</strong>. History of hyperparathyroidism and transsphenoidal prolactinoma resection indicates&nbsp;<strong>MEN1 syndrome</strong>. ZES is commonly associated with MEN1.</p>\n<p>The normal gastrin levels are &lt;150 pg/mL. An <strong>increase of &gt;10 times the normal</strong> levels is highly suggestive of ZES.</p>\n<p>Secretin test is a gastrin provocative test. It is done when the gastrin levels and the acid secretory studies are inconclusive for ZES. It is the&nbsp;<strong>most sensitive&nbsp;</strong>and&nbsp;<strong>specific</strong> gastrin provocative test&nbsp;for the diagnosis of gastrinoma.</p>\n<p>Endoscopic ultrasound is done to localize the tumor. It is done after the diagnosis of ZES has been established.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 70-year-old presented with a lesion over the vulva as shown below. Bilateral inguinal lymph nodes were palpable. Biopsy of the lesion revealed cells containing large, pleomorphic nuclei. Which of the following is false regarding this condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is the 2nd most common vulval cancer"
      },
      {
        "id": 2,
        "text": "The most common site is clitoris"
      },
      {
        "id": 3,
        "text": "It may arise from a  junctional naevus"
      },
      {
        "id": 4,
        "text": "Radical vulvectomy with bilateral regional lymphadenectomy is the preferred treatment"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given scenario is suggestive of <strong>vulval melanoma</strong>.&nbsp;The most commonly involved site is&nbsp;<strong>labia majora</strong> followed by labia minora and clitoris.</p>\n<p>Vulval melanoma&nbsp;is the <strong>second most common</strong> vulval cancer.&nbsp;It may arise from<strong> junctional naevus</strong>. It has a high propensity for local and distant recurrence and has a <strong>poor prognosis</strong>.&nbsp;</p>\n<p><strong>Radical vulvectomy </strong>and bilateral regional<strong> lymphadenectomy</strong> is the preferred treatment.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5294e554993d492fabe15c33969d2cd0.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The most common cause of infectious esophagitis in a non-immunocompromised patient is _________.",
    "choices": [
      {
        "id": 1,
        "text": "Herpes simplex virus (HSV)"
      },
      {
        "id": 2,
        "text": "Cytomegalovirus(CMV)"
      },
      {
        "id": 3,
        "text": "Human papilloma virus (HPV)"
      },
      {
        "id": 4,
        "text": "Enterovirus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common causes of infectious esophagitis in a non-immunocompromised patient are&nbsp;</p>\n<ul>\n<li>Herpes simplex virus</li>\n<li>Candida albicans</li>\n</ul>\n<table style=\"width: 395px;\">\n<tbody>\n<tr>\n<td style=\"width: 190px;\">Immunocompromised</td>\n<td style=\"width: 191px;\">\n<ol>\n<li><strong><em>Candida</em> species</strong></li>\n<li>Herpes simplex virus</li>\n<li>Cytomegalovirus</li>\n</ol>\n</td>\n</tr>\n<tr>\n<td style=\"width: 190px;\">Non- immunocompromised</td>\n<td style=\"width: 191px;\">\n<ol>\n<li>Herpes simplex virus</li>\n<li>Candida albicans</li>\n</ol>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 10-month-old female is brought to the clinic with a 102\u00b0 F fever for 2 days. The mother says that she also cries during urination. The history is significant for similar episodes in the past which were treated with antibiotics. Urine analysis shows nitrite-positivity and gram-negative bacteria are seen on urine microscopy. Which of the following anomaly is most commonly associated with this child's condition?",
    "choices": [
      {
        "id": 1,
        "text": "Posterior urethral valves"
      },
      {
        "id": 2,
        "text": "Vesicoureteric reflux"
      },
      {
        "id": 3,
        "text": "Horseshoe kidney"
      },
      {
        "id": 4,
        "text": "Pelviureteric junction obstruction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>recurrent urinary tract infection</strong>. The most common anomaly associated with this condition in children is <strong>vesicoureteral reflux (VUR).</strong></p>\n<p>VUR usually is congenital and often familial. It is more common in <strong>females.&nbsp;</strong>It occurs when the submucosal tunnel between the mucosa and detrusor muscle is short or absent.</p>\n<p>The image below shows VUR grading</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b79ef66def064008895f348e26588984x1064x2464.JPEG"
    ]
  },
  {
    "text": "The peripheral smear of a newborn baby girl sent on day 2 of life shows mild hemolysis. What is the most common cause of this finding in a newborn?",
    "choices": [
      {
        "id": 1,
        "text": "Rh incompatibility"
      },
      {
        "id": 2,
        "text": "ABO incompatibility"
      },
      {
        "id": 3,
        "text": "Kell antigen incompatibility"
      },
      {
        "id": 4,
        "text": "Hemolytic diseases due to infections"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>ABO incompatibility</strong> is the most common cause of hemolytic disease of newborns and affects the<strong> firstborn</strong>. It is usually <strong>mild</strong> and <strong>subclinical.</strong></p>\n<p>This incompatibility between the mother and fetus generally <strong>results in milder disease than Rh incompatibility does.&nbsp;</strong></p>\n<p>It arises when a&nbsp;<strong>mother </strong>with <strong>blood group type O</strong> becomes<strong> pregnant </strong>with a fetus of<strong> different blood type (A/B).</strong> The mother's serum contains naturally occurring anti-A and anti-B, which can cross the placenta and cause hemolysis of fetal RBCs.</p>\n<p>Although antibodies against A and B factors occur without previous immunization (natural antibodies), they are usually IgM, which do not cross the placenta. However, <strong>IgG</strong> antibodies to<strong> A antigen </strong>may be present, and these do<strong> cross</strong> the<strong> placenta,&nbsp;</strong>resulting in <strong>A-O iso-immune hemolytic disease</strong> in the&nbsp;first-born infant (A-O is more common than B-O).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 5th standard girl is brought to the OPD with a high fever and cough with expectoration for 3 days. Her chest X-ray shows multiple pneumatoceles. Which of the following is the most common etiological agent implicated in this presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Mycobacterium tuberculosis"
      },
      {
        "id": 2,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 3,
        "text": "Mycobacterium avium intracellulare"
      },
      {
        "id": 4,
        "text": "Pneumocystis carnii"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong><em>Staphylococcus aureus</em></strong> pneumonia manifests as confluent bronchopneumonia, which is often <strong>unilateral</strong> and characterized by the presence of<strong> hemorrhagic necrosis </strong>and<strong> irregular </strong>areas of <strong>cavitation</strong> of the lung parenchyma<strong>,</strong> resulting in<strong> pneumatoceles, empyema, or </strong>at times, <strong>bronchopulmonary fistulas</strong>.&nbsp;</p>\n<p>The following CT image shows cavitating pneumonia by <em>S. aureus</em>:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/640d1bfba49d452991d3e3987c9010e7x718x600.PNG"
    ]
  },
  {
    "text": "A 2-month-old infant with seizures and failure to thrive has cutaneous nodules and hepatosplenomegaly. On investigations, CBC reveals hyperleukocytosis with a leukocyte count of 1,10,000cells/mm3. Peripheral smear and immunophenotyping studies reveal large, irregular lymphoblasts, with a phenotype negative for the CD10 (common ALL antigen) marker. On a cytogenetic study which of the following is most likely to be seen?",
    "choices": [
      {
        "id": 1,
        "text": "t(11, 14)"
      },
      {
        "id": 2,
        "text": "t (4,11)"
      },
      {
        "id": 3,
        "text": "t (12,21)"
      },
      {
        "id": 4,
        "text": "t (15,21)"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above findings are diagnostic of <strong>Infantile acute lymphoblastic leukemia</strong>. Translocation <strong>(4;11) involving the MLL gene</strong> is most commonly associated with Infantile leukemia accounts for the <strong>very high relapse rate.</strong></p>\n<p>2% of cases of leukemia during childhood occur <strong>before the age of 1 year</strong> and are referred to as<strong> infantile leukemia.</strong></p>\n<p>Patients often present with <strong>hyperleukocytosis</strong> and extensive tissue infiltration producing <strong>organomegaly</strong>. <strong>Subcutaneous nodules, known as leukemia cutis</strong>, caused by infiltration by leukemic cells are observed more often in infants than in older children.&nbsp;</p>\n<p>The leukemic cell morphology is usually that of large, irregular lymphoblasts, with a<strong> phenotype negative for the CD10 (common ALL antigen) marker</strong> (pro-B), unlike most older children with B-ALL, who are CD10 +. Has a very poor prognosis.</p>\n<p><strong>Note:</strong></p>\n<p><strong>Infants with AML</strong> present with CNS and skin involvement and most commonly have a subtype known as <strong>acute myelomonocytic leukemia.</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '-The Commons Mini Test';
        let hierarchy = ["Marrow", "NEET PG Mini Test Series", "2019-20"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>