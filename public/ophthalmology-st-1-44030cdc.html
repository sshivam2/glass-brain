<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ophthalmology St 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "What is the causative organism of angular conjunctivitis?",
    "choices": [
      {
        "id": 1,
        "text": "Moraxella lacunata"
      },
      {
        "id": 2,
        "text": "Haemophilus influenzae"
      },
      {
        "id": 3,
        "text": "Adeno virus type 32"
      },
      {
        "id": 4,
        "text": "Coxackie B virus"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><em><strong>Moraxella</strong></em> species, a type of\u00a0<strong>gram-negative diplobacilli,</strong>\u00a0are involved in causing <strong>angular conjunctivitis</strong>\u00a0which is a type of <strong>chronic</strong> conjunctivitis.</p>\n<p><strong>Angular conjunctivitis</strong>\u00a0is a\u00a0<strong>chronic</strong>\u00a0type of <strong>conjunctivitis</strong> where there is inflammation of the conjunctiva at the <strong>lid margins</strong> and the\u00a0<strong>inner and outer canthi</strong> of the eyes with red, scaly, excoriated,<strong> macerated</strong>\u00a0and <strong>fissured skin\u00a0</strong>at the canthi. This is because of the <strong>proteolytic enzymes</strong> secreted by the <em>Moraxella</em> species.</p>\n<p>Patients with angular conjunctivitis usually experience\u00a0<strong>eye irritation</strong>, a burning sensation and collection of<strong> dirty-white, foamy</strong> <strong>discharge</strong> at the <strong>angles</strong>. These patients can also have associated blepharitis and papillary and follicular conjunctivitis.</p>\n<p>Causative organisms are <em>Moraxella lacunata, </em><em>Moraxella axenfeld </em>and <em>Staphylococcus aureus </em>(Rare cause). The\u00a0<strong>source</strong>\u00a0of infection is typically the<strong>\u00a0nasal tract</strong>\u00a0or the nasal discharge of patients with angular conjunctivitis. The infection spreads from the nasal cavity to the eyes through\u00a0contaminated<strong> hands or handkerchiefs. </strong><strong>Treatment i</strong>ncludes<strong> oxytetracycline 1%\u00a0</strong>ointment for 10 to 14 days, and<strong>\u00a0zinc oxide </strong>as it <strong>inhibits proteolytic enzymes.</strong></p>\n<p>The image given below shows the eye of a patient infected with\u00a0angular conjunctivitis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ff93d73f9d5844e2b56274a372b73c0fx720x434.JPEG"
    ]
  },
  {
    "text": "While browsing through the news channels, Geeta came across a panel discussion on public health diseases celebrating the elimination of a peculiar condition of the eye. It was known as the most important cause of corneal blindness in India and shows the following finding. What is the likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Trachoma"
      },
      {
        "id": 2,
        "text": "Vernal keratoconjunctivitis"
      },
      {
        "id": 3,
        "text": "Phlyctenular conjunctivitis"
      },
      {
        "id": 4,
        "text": "Xerophthalmia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given<strong> sago-grain appearance</strong> of the conjunctiva is seen in <strong>trachoma</strong>. It was the most important cause of <strong>corneal blindness </strong>in India affecting young children.\u00a0</p>\n<p>Conjunctival appearance:</p>\n<p><strong>1. In trachoma</strong></p>\n<ul>\n<li>Sago-grain appearance</li>\n<li>A <strong>follicular</strong> reaction\u00a0</li>\n</ul>\n<p><strong style=\"font-size: 14px;\">2. In vernal keratoconjunctivitis</strong></p>\n<ul>\n<li><strong>Cobblestone </strong>appearance</li>\n<li>A <strong>papillary</strong> reaction seen in palpebral conjunctiva</li>\n</ul>\n<p><strong>3. Phlyctenular conjunctivitis</strong></p>\n<ul>\n<li>White-pinkish <strong>nodule</strong> in the bulbar conjunctiva</li>\n</ul>\n<p><strong>4. Xerophthalmia</strong></p>\n<ul>\n<li>Epithelial xerosis</li>\n<li><strong>Bitot spot</strong> in bulbar conjunctiva</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d22ca5d022a64386960ad7d2c453f355.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the drug of choice under the SAFE strategy for trachoma management?",
    "choices": [
      {
        "id": 1,
        "text": "Azithromycin"
      },
      {
        "id": 2,
        "text": "Tetracycline"
      },
      {
        "id": 3,
        "text": "Doxycycline"
      },
      {
        "id": 4,
        "text": "Penicillin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Oral azithromycin</strong>\u00a0is the drug of choice in the <strong>SAFE strategy</strong> of trachoma management. The adult dose is <strong>1 g</strong>\u00a0while\u00a0<strong>20 mg/kg</strong> body weight is given for children.</p>\n<p>Oral azithromycin is slowly replacing tetracycline eye ointment as the first line drug used in trachoma treatment. The experience of Morocco, the first country that used azithromycin in a large-scale, nationwide elimination programme, has paved the way for the <strong>worldwide application of azithromycin as part of the SAFE strategy</strong>.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old female complaining of irritation in her left eye has the following finding. Which of the following condition commonly causes this?",
    "choices": [
      {
        "id": 1,
        "text": "Polyarteritis nodosa"
      },
      {
        "id": 2,
        "text": "Wegener's granulomatosis"
      },
      {
        "id": 3,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 4,
        "text": "Giant cell arteritis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Irritation in the eye associated with areas of scleral thinning through which the uvea shines is suggestive of <strong>scleromalacia perforans.\u00a0</strong>It is commonly associated with <strong>rheumatoid arthritis.</strong></p>\n<p>Scleromalacia perforans is a specific type of <strong>progressive scleral thinning </strong>without inflammation. Despite the term 'scleromalacia perforans',<strong> perforation</strong> is extremely<strong> rare</strong> as the integrity of the sclera is maintained by a thin layer of fibrous tissue.</p>\n<p>Other collagen disorders associated with it are as follows:</p>\n<ul>\n<li>Wegener\u2019s granulomatosis (option B)</li>\n<li>Polyarteritis nodosa (option A)</li>\n<li>Systemic lupus erythematosus (SLE)</li>\n<li>Ankylosing spondylitis</li>\n<li>Relapsing polychondritis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6fd7a7f6725f4b27af749ccb43371f7c.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a late visual field defect in open-angle glaucoma?",
    "choices": [
      {
        "id": 1,
        "text": "Siedel scotoma"
      },
      {
        "id": 2,
        "text": "Bjerrum scotoma"
      },
      {
        "id": 3,
        "text": "Paracentral scotoma"
      },
      {
        "id": 4,
        "text": "Baring of blind spot"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bjerrum scotoma (arcuate)</strong> is a <strong>late</strong> and clinically significant visual field defect. \u00a0</p>\n<p>Progression of visual field changes seen in glaucoma:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is Glaukomflecken?",
    "choices": [
      {
        "id": 1,
        "text": "Acute uveitis due to glaucoma"
      },
      {
        "id": 2,
        "text": "Lens opacity due to glaucoma"
      },
      {
        "id": 3,
        "text": "Retinal detachment due to glaucoma"
      },
      {
        "id": 4,
        "text": "Corneal opacity due to glaucoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Glaukomflecken is <strong>anterior subcapsular lenticular</strong> opacity and a component of <strong>Vogt's triad</strong> seen in patients after an acute angle closure glaucoma attack.\u00a0</p>\n<p>The Vogt's triad comprises of:</p>\n<ul>\n<li>Glaukomflecken</li>\n<li>Patches of iris atrophy</li>\n<li>Slightly dilated nonreactive pupil</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which among the following would you use for the measurement of intraocular pressure in a patient with a scarred cornea?",
    "choices": [
      {
        "id": 1,
        "text": "Goldmann"
      },
      {
        "id": 2,
        "text": "Perkins"
      },
      {
        "id": 3,
        "text": "Tonopen"
      },
      {
        "id": 4,
        "text": "Pulsair"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Tonopen</strong> is used for measuring intraocular pressure (IOP) in a <strong>scarred cornea</strong>.</p>\n<p>It is a hand-held electronic contact tonometer (<strong>a modified version of the older Mackay&ndash;Marg tonometer</strong>). Besides portability, its main advantage is the ability to measure IOP reasonably accurately in eyes with <strong>distorted or edematous corneas&nbsp;</strong>and <strong>through a soft contact lens</strong>.</p>\n<p><strong>Types of tonometry:</strong></p>\n<ul>\n<li>Indentation tonometry-&nbsp;Reading depends on scleral rigidity, e.g., Schiotz tonometer&nbsp;&nbsp;</li>\n<li>Applanation tonometry-&nbsp;Based on the amount of force needed to flatten or applanate a known area of the&nbsp;cornea,&nbsp;Imbert&ndash;Fick principle.&nbsp;This&nbsp;is further divided into two types -\n<ul>\n<li><strong>Fixed force</strong>: IOP is proportional to the area, e.g.,&nbsp;Maklakov, Barraquer</li>\n<li><strong>Fixed area</strong> and variable force: IOP is proportional to force. The <strong>most reliable is Goldmann.</strong></li>\n</ul>\n</li>\n<li>Self-measurement:&nbsp;Rebound</li>\n<li>Non-contact type: Pulse Air, Air-Puff</li>\n<li>Irregular cornea:<strong>&nbsp;</strong>Tonopen, MacKay&ndash;Marg</li>\n</ul>\n<p><strong>Recent tonometers:</strong></p>\n<ul>\n<li>Pascals tonometer (dynamic contour tonometry [DCT]): Contact; used for post-LASIK IOP measurement.</li>\n<li>Reichert&nbsp;Ocular Response Analyzer<sup>&reg;</sup>:&nbsp;Non-contact</li>\n</ul>\n<p><strong>Note:&nbsp;</strong><strong>Tonography</strong> is a non-invasive technique for determining the <strong>facility of aqueous outflow</strong>.</p>\n<p>The image given below shows fluorescein-stained semicircular mires.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ee733e15d5648dea215b2d0f85c277dx1280x2521.JPEG"
    ]
  },
  {
    "text": "What is iridocorneal endothelial syndrome associated with?",
    "choices": [
      {
        "id": 1,
        "text": "Progressive atrophy of the iris stroma"
      },
      {
        "id": 2,
        "text": "Bilateral stromal edema of the iris"
      },
      {
        "id": 3,
        "text": "Primary angle-closure glaucoma"
      },
      {
        "id": 4,
        "text": "Deposition of glycosaminoglycans in Descemet's membrane"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Progressive atrophy</strong> of <strong>iris stroma </strong>is a clinical entity of iridocorneal endothelial syndrome (ICE).</p>\n<p>ICE syndrome is a <strong>proliferative endotheliopathy,\u00a0</strong>which leads to <strong>secondary angle-closure glaucoma.</strong></p>\n<p>It includes three clinical entities:</p>\n<ol>\n<li>Progressive iris atrophy</li>\n<li><strong>Chandler\u2019s syndrome -</strong>\u00a0corneal edema</li>\n<li><strong>Cogan\u2013Reese syndrome -</strong>\u00a0nodules and nevus on the iris; hence, it is known as<strong> iris nevus syndrome</strong>.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A researcher is studying mutations in the rhodopsin gene which are responsible for some forms of autosomal dominant retinitis pigmentosa. On which chromosome is this gene located?",
    "choices": [
      {
        "id": 1,
        "text": "3q"
      },
      {
        "id": 2,
        "text": "3p"
      },
      {
        "id": 3,
        "text": "13p"
      },
      {
        "id": 4,
        "text": "13q"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The gene for rhodopsin is\u00a0located at\u00a0<strong>3q22.1</strong></p>\n<p><strong>Retinitis pigmentosa</strong> (RP) is a dystrophy of rods and cones, with <strong>rods</strong> being primarily <strong>affected.</strong> It is a <strong>genetic</strong> disease. The non-hereditary/sporadic type is most common. Among the hereditary types, it can occur in an autosomal dominant (AD), autosomal recessive (AR), or X-linked recessive (XLR) pattern. AD disease generally has the best prognosis.</p>\n<p>The presenting feature is night blindness.</p>\n<p>Investigations:</p>\n<ul>\n<li><strong>Perimetry -</strong> the initial stage will have ring scotoma, which further develops into tunnel vision.</li>\n<li><strong>Electroretinography -</strong> reveals a decreased amplitude of both \"a\" and \"b\" waves.</li>\n</ul>\n<p>Retinitis pigmentosa is a condition with no cure. There are drugs used to slow down the progression such as acetazolamide for concomitant cystoid macular edema. Recently, vitamin A has been recommended, although the efficacy has not been established.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is the given sign seen?",
    "choices": [
      {
        "id": 1,
        "text": "Cystoid macular edema"
      },
      {
        "id": 2,
        "text": "Central serous retinopathy"
      },
      {
        "id": 3,
        "text": "Significant macular edema"
      },
      {
        "id": 4,
        "text": "Coat\u2019s disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The image depicts fundus fluorescein angiography (FFA) showing an enlarging <strong>ink-blot pattern/enlarging dot sign</strong>, which is seen\u00a0in <strong>central serous retinopathy </strong>(CSR). <strong>Smokestack appearance</strong> is another pattern of fundus seen in CSR\u00a0and is a characteristic sign of this condition.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3644d4f98f42431c99caf0e33f5820f5.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6359038b82984c289943119198f5ebbdx1280x1511.JPEG"
    ]
  },
  {
    "text": "A child presents with irritation and redness of the left eye at a primary health center. There are no previous immunization records. Examination showed a greyish-white membrane over the bulbar and palpebral conjunctiva which bled on peeling. What is the likely etiology?",
    "choices": [
      {
        "id": 1,
        "text": "Corynebacterium diphtheriae"
      },
      {
        "id": 2,
        "text": "Moraxella lacunata"
      },
      {
        "id": 3,
        "text": "Moraxella axenfeld"
      },
      {
        "id": 4,
        "text": "Chlamydia trachomatis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The of a child with irritation and redness of the eye with no previous vaccination records is suggestive of a case of <strong>membranous conjunctivitis</strong> and among the given options, <strong><em>Corynebacterium diphtheriae</em></strong> is the most likely etiological agent.</p>\n<p>Membranous conjunctivitis presents with<strong> irritation </strong>and<strong> redness</strong> of the eye and is characterized by the formation of a <strong>greyish-white membrane</strong><strong>\u00a0</strong>that <strong>bleeds on peeling</strong>. Vaccines are routinely used to\u00a0prevent\u00a0diphtheria infection and hence, unvaccinated status increases his susceptibility to the bacteria. Moreover, the bacteria thrive in crowded populations and poor\u00a0hygienic surroundings, hence a background of low socioeconomic context, such as an orphanage, acts as a risk factor in this case.</p>\n<p>This condition is associated with the formation of <strong>fibrinous exudates</strong> on the surface and into the substance of the conjunctival epithelium. The causes include beta-hemolytic <strong>streptococci,</strong> <em>Streptococcus pneumonia, </em><em>Haemophilus aegyptius, Corynebacterium diphtheria,</em> and<em> </em><em>Neisseria gonorrhea</em></p>\n<p class=\"p1\">The image given below shows the eye of a patient with <strong>pseudomembranous conjunctivitis.</strong> It differs from membranous conjunctivitis in that the membrane can be easily peeled off in this condition leaving an intact underlying epithelium.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/23bfb12768c54b9d9d4b1897436783e4x1280x958.JPEG"
    ]
  },
  {
    "text": "Riddoch phenomenon is seen in lesion of?",
    "choices": [
      {
        "id": 1,
        "text": "Occipital lobe"
      },
      {
        "id": 2,
        "text": "Retina"
      },
      {
        "id": 3,
        "text": "Edinger westpaul nucleus"
      },
      {
        "id": 4,
        "text": "Optic nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Riddoch phenomenon is seen in occipital lobe lesion.</p>\n<p><strong>Riddoch phenomenon:</strong></p>\n<ul>\n<li>Occipital lobe hemianopias are extremely congruous, having a homogeneous density with sparing of the macula.</li>\n<li>Riddoch phenomenon, in <strong>which appreciation of a dim kinetic target is retained within the defective visual field with loss of appreciation of a static bright target, is typical of an occipital lesion</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following can't be used in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Supratarsal steroid injection"
      },
      {
        "id": 2,
        "text": "Cryo application"
      },
      {
        "id": 3,
        "text": "Cyclosporine"
      },
      {
        "id": 4,
        "text": "Acyclovir"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above images shows <strong>Horner Tranta's spots</strong> which are characteristic of <strong>Vernal Keratoconjunctivitis (VKC)</strong>.<br /><br />VKC is a recurrent, bilateral, interstitial, self-limiting, allergic inflammation of the conjunctiva having a periodic seasonal incidence. <br /><br />Treatment of VKC:</p>\n<ul>\n<li><strong>Topical anti-inflammatory therapy:</strong>\n<ul>\n<li>Topical steroids</li>\n<li>Mast cell stabilzers</li>\n<li>Antihistaminics</li>\n<li><strong>Topical cyclosporins </strong></li>\n<li>Tacrolimus</li>\n<li>NSAIDs eye drops</li>\n</ul>\n</li>\n<li><strong>Topical lubricating and mucolytics </strong></li>\n<li><strong>Systemic therapy with antihistaminic and steroids </strong></li>\n<li><strong>Treatment of large papillae:</strong>\n<ul>\n<li><strong>Supratarsal injection of steroid</strong></li>\n<li><strong>Cryo application</strong></li>\n<li>Surgical excision</li>\n</ul>\n</li>\n<li><strong>Treatment of vernal keratopathy:</strong>\n<ul>\n<li>Severe shield ulcer resistant to medical therapy may need surgical debridement, superficial keratectomy and amniotic membrane transplantation to enhance re-epithelialization.</li>\n</ul>\n</li>\n</ul>\n<p>Acyclovir is given in herpes infection of the eye.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/98a43a142c5b493ab715ec90f047e8d9.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 26 yr old Patient came with chief complaints of blurring of vision, photophobia, and pain in eye. There was also congestion of eyes and Joint pain. All ocular complaints are unilateral. What is the investigation you won't do?",
    "choices": [
      {
        "id": 1,
        "text": "ESR"
      },
      {
        "id": 2,
        "text": "HLA B27"
      },
      {
        "id": 3,
        "text": "Chest X Ray"
      },
      {
        "id": 4,
        "text": "FA(Fluorescein Angiography)"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given case is likely to be a case of Uveitis. There is no reason to do FA (Fluorescein Angiography).</p>\n<p>HLA B 27, Chest X ray, ESR are very important to rule out causes like ankylosing spondylitis, TB &amp; sarcoidosis in a young patient which can all lead to uveitis.</p>\n<p><strong>Uveitis is the inflammation of uveal tissue (iris, ciliary body, choroid)</strong>.</p>\n<p><strong>Anterior uveitis:&nbsp;</strong>Involvement of Iris</p>\n<ul>\n<li>Most common symptom: Photophobia</li>\n<li>Most common sign: Cells in Anterior Chamber</li>\n</ul>\n<p><strong>Intermediate Uveitis:&nbsp;</strong>Involvement of Pars plana and peripheral part of retina and underlying choroid.</p>\n<ul>\n<li>Most common symptom: Floaters</li>\n<li>Sign: Snowball opacities &amp; snow banking. Seen in pars plana &gt; ora serrata (q)</li>\n<li>Most Common complication of Pars planitis&nbsp;</li>\n<li>Posterior Subcapsular Cataract.</li>\n</ul>\n<p><strong>Posterior uveitis: </strong>Involvement of Choroid</p>\n<ul>\n<li>Most Common Symptom: Floaters</li>\n<li>Most Common cause of visual loss: Cystoid Macular edema</li>\n</ul>\n<p><strong>Investigations:</strong></p>\n<ul>\n<li><strong>Tailored approach is needed in accordance to the symptoms, recurrence, age and suspicion</strong></li>\n<li>X Ray Chest, CT Chest</li>\n<li>ESR</li>\n<li>TB Quantiferon</li>\n<li>HLA-B27 (Ankylosing Spondylitis), HLA-B5 (Behcets), HLA-DR4 HLA-DW15 (Vogt Koyanagi Harada's disease), ANA (Juvenile Idiopathic Arthritis)</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li>Drug of choice for all type of uveitis is steroids.</li>\n<li>Cycloplegics are used to break posterior synechia, relieve ciliary body spasm and ocular pain.</li>\n<li>Immunosuppressant can be used in cases of steroid resistant uveitis or steroid responders.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child born prematurely at 31 weeks. On examination later presented with ROP both eyes shows stage 3 zone 1 \u2018plus\u2019 disease, what would be the ideal management?",
    "choices": [
      {
        "id": 1,
        "text": "Examine the patient after 1 week"
      },
      {
        "id": 2,
        "text": "Vitreoretinal surgery"
      },
      {
        "id": 3,
        "text": "Laser photocoagulation of both eyes"
      },
      {
        "id": 4,
        "text": "Medical Mangement"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Any <strong>Plus Disease in ROP</strong> has to be treated with laser photocoagulation. Since the patient has ROP of both eyes,<strong> Laser photocoagulation</strong> should be done for both eyes one eye followed by the other.</p>\n<p><strong>Retinopathy of prematurity (ROP):</strong></p>\n<p>ROP Guidelines:</p>\n<p>Which Babies To Be Screened Guidelines:</p>\n<ul>\n<li>Birth <strong>weight less than 1500g</strong></li>\n<li>Gestational <strong>age less than 32 weeks</strong></li>\n<li>Pediatrician feels the necessity to look at the baby\u2019s condition, like mechanical ventilation, sepsis, prolonged oxygen therapy and hemodynamic instability.</li>\n</ul>\n<p><strong>Stages:</strong></p>\n<ul>\n<li>Demarcation Line</li>\n<li>Ridge</li>\n<li>Fibrovascular Proliferation</li>\n<li>Localized Tractional Retinal detachment from periphery to posterior pole</li>\n<li>Total RD</li>\n</ul>\n<p><strong>Plus Disease:</strong></p>\n<ul>\n<li>Indicates rapid progression of the disease with vascular incompetence.</li>\n<li>Two quadrants (usually six or more clock hours) of dilation and tortuosity of the posterior retinal blood vessels.</li>\n</ul>\n<p><strong>Threshold Disease in ROP: </strong></p>\n<ul>\n<li>Disease that has a 50% likelihood of progressing to Retinal Detachment.</li>\n<li>When stage 3 ROP is present in either zone I or zone II, with at <strong>least 5 continuous or 8 total clock hours of disease, and the presence of plus disease</strong>.</li>\n<li>Have to photocoagulate these babies.</li>\n</ul>\n<p><strong>ROP that requires treatment with Laser photocoagulation:</strong></p>\n<ul>\n<li>Zone I, any stage ROP with plus disease or</li>\n<li>Zone I, stage 3, with or without plus disease</li>\n<li>Zone II, stage 2 or 3 ROP, with plus disease</li>\n</ul>\n<p><strong>Not to treat, but weekly follow up:</strong></p>\n<ul>\n<li>Zone I, stage 1 or 2 with no plus disease or</li>\n<li>Zone II, stage 3 with no plus disease</li>\n</ul>\n<p><strong>With plus disease- Always perform the Laser</strong></p>\n<p><strong>ROP epidemiology:</strong></p>\n<ul>\n<li>LBW and LGA are two important factors that govern the development of ROP in infants. LGA more important factor than LBW.</li>\n<li>WHO Vision 2020 programme targets ROP as an \u201c<strong>avoidable disease</strong>\u201d that requires early detection and treatment to prevent blindness and inherent costs to an individual and the community.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Female patient having axial length of 18mm came with short stubby fingers, she has increased IOP and  subluxation of lens too. What do you suspect she may be having?",
    "choices": [
      {
        "id": 1,
        "text": "Weil marchesani"
      },
      {
        "id": 2,
        "text": "Marfan"
      },
      {
        "id": 3,
        "text": "Ehler danlos"
      },
      {
        "id": 4,
        "text": "Ectopia lentis et pupillae"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most likely diagnosis in the above case is Weill marchesani syndrome. </p>\n<ul>\n<li>Weill-Marchesani syndrome <strong>is a disorder of connective tissue with autosomal recessive mesodermal dysplasia</strong>. </li>\n<li>Ocular features are <strong>spherophakia</strong> which is a small, sphere-shaped lens, which is associated with myopia which worsens over time.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b65d7caf06d14f63b20d713595d37533x555x395.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c33d86df6ef34c08a13b1b0d0b208a9dx598x376.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/45c918c824ba4784bad40442b26812eax400x304.PNG"
    ]
  },
  {
    "text": "100-day glaucoma is seen in",
    "choices": [
      {
        "id": 1,
        "text": "Neovascular glaucoma"
      },
      {
        "id": 2,
        "text": "Central retinal artery occlusion"
      },
      {
        "id": 3,
        "text": "Lens induced glaucoma"
      },
      {
        "id": 4,
        "text": "Steroid induced glaucoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Neovascular glaucoma (NVG) in central retinal vein occlusion (CRVO) is called 100-day glaucoma.</p>\n<p>NVG is intractable glaucoma which results due to neovascularization involving the angle of the anterior chamber.</p>\n<p>Neovascularization develops following retinal ischaemia as in:</p>\n<ul>\n<li><strong>Proliferative diabetic retinopathy</strong></li>\n<li><strong>Central retinal vein occlusion</strong></li>\n<li>Sickle-cell retinopathy</li>\n<li>Eales&rsquo; disease</li>\n<li>Rare causes: Intraocular tumours, longstanding retinal detachment</li>\n</ul>\n<p><br />Patients with central retinal vein occlusion are at risk for what is termed <strong>100-day glaucoma</strong>. In CRVO, retinal ischemia of greater than 10 disc diameters indicates significant risk for NVG.</p>\n<p>Eighty percent of patients with central retinal vein occlusion with NVG developed the disease in the<strong> first 4 months</strong> after the initial occlusion. Therefore, clinicians should follow patients every month in the first 6 months to evaluate the iris and angle.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Zielger knife is used for which surgery?",
    "choices": [
      {
        "id": 1,
        "text": "Cataract"
      },
      {
        "id": 2,
        "text": "Lid surgery"
      },
      {
        "id": 3,
        "text": "Glaucoma"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Zielger knife</strong> is used in <strong>cataract surgery</strong>.</p>\n<p>It is used for opening the capsule of lens of eye and disrupting the lens material before aspirating it.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/effa531a70994f659d3f1c8dbcb818b7x414x499.PNG"
    ]
  },
  {
    "text": "Which  of the following is not a cause of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Alkali burn"
      },
      {
        "id": 2,
        "text": "Thermal Injury"
      },
      {
        "id": 3,
        "text": "Stevens-Johnson Syndrome"
      },
      {
        "id": 4,
        "text": "Herpes keratitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above image is of <strong>symblepharon</strong>, where the lids become adherent with the eyeball as a result of <strong>adhesions </strong>between the<strong> palpebral </strong>and<strong> bulbar conjunctiva</strong>.&nbsp;<strong>Herpes keratitis</strong> is <strong>not a cause</strong> of this condition.</p>\n<p>Common causes of symblepharon are:</p>\n<ul>\n<li>Thermal or chemical burn</li>\n<li>Membranous conjunctivitis</li>\n<li>Injuries</li>\n<li>Conjunctival ulcerations</li>\n<li>Ocular pemphigus</li>\n<li>Stevens-Johnson syndrome</li>\n</ul>\n<p>Note:</p>\n<ul>\n<li><strong>Sym</strong>blepharon: The <strong>adhesion</strong> of <strong>palpebral</strong> conjunctiva <strong>with bulbar </strong>conjunctiva</li>\n<li><strong>Ankylo</strong>blepharon: <strong>Adhesion</strong> of the part or whole of <strong>eyelid margins</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b76e2845411249e99719b98503199524.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Blood in Anterior Chamber comes from",
    "choices": [
      {
        "id": 1,
        "text": "Circulus arteriosus major"
      },
      {
        "id": 2,
        "text": "Circulus arteriolar minor"
      },
      {
        "id": 3,
        "text": "Vortex veins"
      },
      {
        "id": 4,
        "text": "Central retinal artery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Circulus arteriosus major</strong> is responsible for Hyphaema (blood in anterior chamber).</p>\n<p><strong>Hyphaema:</strong></p>\n<p><strong>Causes of Hyphaema:</strong></p>\n<ul>\n<li>Ocular injuries</li>\n<li>Postoperative</li>\n<li>Herpes zoster iritis</li>\n<li>Gonococcal iritis</li>\n<li>Intraocular tumour</li>\n<li>Spontaneous (from rubeosis iridis)</li>\n</ul>\n<p><strong>Two way irrigation and aspiration cannula can be used for aspirating hyphaema</strong>.</p>\n<p><strong>Blood Supply of Eye:</strong></p>\n<p><strong>Cornea:&nbsp;</strong>Avascular</p>\n<p><strong>Uvea:&nbsp;</strong>3 arteries are important.</p>\n<ul>\n<li>Short post ciliary artery- Choroid</li>\n<li>Long post ciliary artery-2 in number join each other near ciliary muscle with anterior ciliary arteries to form circulus arteriolar major (C A major).</li>\n<li>Short anterior ciliary arteries join long posterior ciliary arteries to form C A major.</li>\n<li>Branches from circulus arteriolar major go to pupillary border to form <strong>circulus arteriosus minor(C A minor)</strong>.</li>\n</ul>\n<p><strong>Retina:</strong></p>\n<ul>\n<li><strong>Outer four layers-choriocapillaries&nbsp;</strong>(RPE, rods and cones, ELM, outer nuclear layer)</li>\n<li>Inner layers- <strong>Central retinal artery</strong></li>\n<li><strong>Macula-</strong>&nbsp;Branches of central retinal artery + Choriocapillaries.</li>\n<li><strong>Foveola- Avascular</strong></li>\n</ul>\n<p><strong>Optic Nerve Head:</strong></p>\n<ul>\n<li>Surface nerve fibre layer- From retinal arteriole.</li>\n<li>Lamina cribrosa- From ciliary vessels derived from posterior ciliary artery and arterial circle of Zinn and Haller.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most sensitive part of the retina is _______",
    "choices": [
      {
        "id": 1,
        "text": "Macula"
      },
      {
        "id": 2,
        "text": "Fovea-centralis"
      },
      {
        "id": 3,
        "text": "Optic disc"
      },
      {
        "id": 4,
        "text": "Peripheral retina"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Fovea centralis is the most sensitive part of the retina.</strong> It is the central depressed part of the macula. It is about 1.5 mm in diameter and with the<strong> lowest threshold for light and highest visual acuity, because it contains only cones</strong>. </p>\n<p>In its centre is a shining pit called foveola. The tiny depression in the centre of foveola is called umbo which is seen as shinning foveal reflex on fundus examination.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 16-year-old patient came with rapidly increasing power of glasses and cylindrical glasses. The topography revealed bow tie pattern. What's the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Reis buckler dystrophy"
      },
      {
        "id": 2,
        "text": "Pathological myopia"
      },
      {
        "id": 3,
        "text": "Pellucid marginal degeneration"
      },
      {
        "id": 4,
        "text": "Keratoconus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Keratoconus presents with features of rapidly changing power of the glasses.</p>\n<p><strong>Keratoconus: </strong></p>\n<p><strong>Clinical Presentation:</strong></p>\n<ul>\n<li>Young male with <strong>constantly changing power of glasses</strong> with myopia &amp; high cylinder due to myopic astigmatism.</li>\n<li>Corneal topography shows <strong>Asymmetric bow tie pattern with skewed radial axis</strong>.</li>\n</ul>\n<p><strong>Morphological pattern (3 types):</strong></p>\n<ul>\n<li>Nipple cone (&lt;5mm)</li>\n<li>Oval cone (5-6mm)</li>\n<li>Globus cone (&gt;6mm)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Endophthamitis involves the inflammation of all of the following except:",
    "choices": [
      {
        "id": 1,
        "text": "Sclera"
      },
      {
        "id": 2,
        "text": "Uvea"
      },
      {
        "id": 3,
        "text": "Retina"
      },
      {
        "id": 4,
        "text": "Vitreous"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Endophthalmitis</strong> is defined as an inflammation of the inner structures of the eyeball, i.e., <strong>uveal tissue and retina</strong> associated with pouring of exudates in the <strong>vitreous cavity</strong>, anterior chamber and posterior chamber. <br /> <br /><strong>Panophthalmitis</strong> is an intense purulent inflammation of the<strong> whole eyeball including the Tenon&rsquo;s capsule</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is VEC regimen used for?",
    "choices": [
      {
        "id": 1,
        "text": "RB"
      },
      {
        "id": 2,
        "text": "ROP"
      },
      {
        "id": 3,
        "text": "PHPV"
      },
      {
        "id": 4,
        "text": "Endophthalmitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Its <strong>Vincristine, Etoposide, Carboplatin</strong>-Most commonly used drug regimen in Retinoblastoma.</p>\n<p>Chemotherapy: Dose in mg/kg body weight for chemoreduction of retinoblastoma:</p>\n<table style=\"width: 275px;\">\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"width: 10px; height: 13px;\">Regimen\u00a0\u00a0</td>\n<td style=\"width: 65px; height: 13px;\">Duration\u00a0\u00a0</td>\n<td style=\"width: 210px; height: 13px;\">Drugs\u00a0\u00a0</td>\n</tr>\n<tr style=\"height: 101px;\">\n<td style=\"width: 10px; height: 101px;\">\n<p>Standard\u00a0dose\u00a0</p>\n<p>CVE\u00a0</p>\n<p>regimen\u00a0</p>\n</td>\n<td style=\"width: 65px; height: 101px;\">Consists of 3-weekly, 6 cycles\u00a0\u00a0</td>\n<td style=\"width: 210px; height: 101px;\">\n<p><strong>carboplatin</strong>\u00a0(18.6 mg) on day\u00a01,</p>\n<p><strong>vincristine</strong>\u00a0(0.05 mg) on day 1,</p>\n<p><strong>etoposide</strong>\u00a0(5 mg) on day 1 and 2.\u00a0\u00a0</p>\n</td>\n</tr>\n<tr style=\"height: 152px;\">\n<td style=\"width: 10px; height: 152px;\">\n<p>High dose</p>\n<p>CVE regimen\u00a0</p>\n</td>\n<td style=\"width: 65px; height: 152px;\">Consists of 3 weekly, 6\u201312 cycles\u00a0</td>\n<td style=\"width: 210px; height: 152px;\">\n<p><strong>carboplatin</strong>\u00a0(28 mg) on day 1,</p>\n<p><strong>vincristine</strong>\u00a0(0.25 mg) on day 1,</p>\n<p><strong>etoposide</strong>\u00a0(12 mg) on day 1 and 2.</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "As an intern in the department of ophthalmology, you are asked regarding the indications of trabeculoplasty. In which of the following conditions would you advise this procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Primary Open angle glaucoma"
      },
      {
        "id": 2,
        "text": "Neovascular Glaucoma"
      },
      {
        "id": 3,
        "text": "Congenital glaucoma"
      },
      {
        "id": 4,
        "text": "Endophthalmitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Trabeculoplasty is the procedure of choice for<strong> treatment of open-angle glaucoma</strong>.\u00a0</p>\n<p><strong>Indications </strong>include open angle glaucoma, pseudoexfoliative glaucoma, and pigmentory glaucoma.</p>\n<p>In this procedure, laser spots have to be put on trabecular meshwork, that contracts and opens the channels at the rate of 50 spots on the anterior half of the <strong>trabecular meshwork</strong> <strong>over 180\u00b0. </strong><strong>Argon Laser or Nd-Yag</strong> Laser can be used for trabeculoplasty</p>\n<p><strong>Complications </strong>include a transient acute rise of intraoccular pressure, which can be prevented by pretreatment with pilocarpine and/or acetazolamide. Inflammation which can be lessened by the use of topical steroids for 3-4 days.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The standard sutureless cataract surgery done with phaco-emulsification and foldable IOL has an incision of",
    "choices": [
      {
        "id": 1,
        "text": "1mm-1.5mm"
      },
      {
        "id": 2,
        "text": "2mm-2.5mm"
      },
      {
        "id": 3,
        "text": "3mm-3.5mm"
      },
      {
        "id": 4,
        "text": "3.5mm-4.5mm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In phacoemulsification, the clear corneal incision required is <strong>very small (3mm) and hence sutureless surgery is possible</strong> with the self sealing clear corneal incision made with a 3 mm keratome.</p>\n<p>Cataract surgeries:</p>\n<table border=\"1\">\n<tbody>\n<tr>\n<td><strong>Intracapsular cataract extraction</strong></td>\n<td><strong>Extracapsular\u00a0cataract extraction</strong></td>\n<td><strong>Phacoemulsification</strong></td>\n</tr>\n<tr>\n<td>Whole lens removed with intact capsule</td>\n<td>Lens nucleus &amp; cortex removed leaving behind capsular bag</td>\n<td>Same as ECCE</td>\n</tr>\n<tr>\n<td>\n<p>Large incision,<br />180 Degree<br />10-12mm</p>\n</td>\n<td>Medium incision<br />120 degree<br />7-8mm</td>\n<td>Small incision<br />30 degree<br />3.2-3.5mm(1mm for rollable lens)</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a5354f09fb264c61a783c143601acfd9x600x214.PNG"
    ]
  },
  {
    "text": "Identify the wrong statement about retinal detachment:",
    "choices": [
      {
        "id": 1,
        "text": "Flashes is more specific symptom than floaters for retinal detachment"
      },
      {
        "id": 2,
        "text": "Lattices, high myopia and trauma are risk factors of retinal detachment"
      },
      {
        "id": 3,
        "text": "PDR is a cause for Tractional Retinal Detachment"
      },
      {
        "id": 4,
        "text": "It is more common in phakics than aphakics"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>It is more common in aphakics than phakics. </strong></p>\n<p><strong>Retinal Detachment:</strong></p>\n<p>Pathogenesis: RD is <strong>separation of neurosensory retina</strong> from <strong>retinal pigment epithelium</strong> (RPE). On retinoscopy there is <strong>Grey Reflex</strong>.</p>\n<p><strong>Signs &amp; Symptoms:</strong>\u00a0</p>\n<ul>\n<li><strong>Curtain falling over eyes (more specific)</strong></li>\n<li><strong>Flashes</strong></li>\n<li>Floaters (Can also appear in pars planitis, CRVO, Posterior vitreous detachment and Vitreous Hemorrhage)</li>\n<li><strong>Grey reflex</strong> on retinoscopy</li>\n<li><strong>Shaffer sign</strong>- It is pigment cells floating in anterior vitreous, behind the lens, a sign of retinal tear, that can often lead to RD.\u00a0</li>\n</ul>\n<p><strong>Risk factors:</strong></p>\n<ul>\n<li><strong>Lattices\u00a0</strong></li>\n<li><strong>Retinal tears\u00a0</strong></li>\n<li><strong>High myopics </strong></li>\n<li><strong>Trauma</strong></li>\n<li>Aphakia &gt; Phakic eye</li>\n</ul>\n<p><strong>Features of Chronic RD:</strong>\u00a0</p>\n<ul>\n<li>Watershed lines</li>\n<li>Proliferative vitreo-retinopathy</li>\n<li>Retinal cyst</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li>Sealing of retinal breaks</li>\n<li>Drainage of Sub Retinal Fluid</li>\n<li>Scleral buckling</li>\n<li>Pneumatic retinopexy</li>\n<li>Pars plana vitrectomy, endolase photocoagulation, Internal tamponade</li>\n<li>Treat the cause</li>\n</ul>\n<p><strong>Concept:</strong></p>\n<ul>\n<li>Rhegmatogenous RD is because of <strong>rhegma</strong> (holes).</li>\n<li><strong>Fibrous bands</strong> cause tractional RD, basically, tractional forces would pull the retina causing detachment.</li>\n<li>Exudative RD occurs due to <strong>fluid collection</strong> beneath the retina, but there is <strong>no hole</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Select the wrong statement about this condition:",
    "choices": [
      {
        "id": 1,
        "text": "Self resolving"
      },
      {
        "id": 2,
        "text": "May be seen after valsalva maneuvere"
      },
      {
        "id": 3,
        "text": "Bleeding profile to be checked if recurrent"
      },
      {
        "id": 4,
        "text": "Associated with vitreous hemorrhage"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image is an anterior segment photograph of subconjunctival hemorrhage which has no association with Vitreous Hemorrhage.</p>\n<p><strong>Subconjunctival haemorrhage:</strong></p>\n<ul>\n<li>Seen as normal findings seldom in 20% neonates.</li>\n<li>Can be seen when intrathoracic pressure rises like in forceful cough, valsalva and whooping cough.</li>\n<li>No treatment is required, resolves spontaneously.</li>\n<li>Recurrent Subconjunctival hemorrhage may need evaluation of hypertension &amp; bleeding profile.</li>\n<li>Can be seen after intraocular surgeries.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fdaa3080b88d4b0586258f4547ba8ca9.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "The ganglion cells in the visual pathway are __________",
    "choices": [
      {
        "id": 1,
        "text": "Second order"
      },
      {
        "id": 2,
        "text": "Third order"
      },
      {
        "id": 3,
        "text": "Fourth order"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>The ganglion cells</strong> in the visual pathway are&nbsp;<strong>third-order neurons.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Werner classification is used for?",
    "choices": [
      {
        "id": 1,
        "text": "Diabetic retinopathy And hypertensive retinopathy"
      },
      {
        "id": 2,
        "text": "Ophthalmopathy"
      },
      {
        "id": 3,
        "text": "Malignant melanoma"
      },
      {
        "id": 4,
        "text": "Age related Macular Degeneration"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Werner classification is done for<strong> assessing severity of ophthalmopathy in graves disease</strong>.</p>\n<p>Werner classification:</p>\n<ul>\n<li>Werner classification reflects the severity of the ophthalmopathy.</li>\n<li>It is well known by the acronym of <strong>NO SPECS</strong>.</li>\n<li>Each grade is further subdivided as 0-4 and a-c.</li>\n</ul>\n<p><strong>Grades of Werner classification:</strong></p>\n<table style=\"width: 209px;\">\n<tbody>\n<tr>\n<td style=\"width: 20px;\">Grade\u00a0</td>\n<td style=\"width: 185px;\">Feature\u00a0</td>\n<td style=\"width: 10px;\">Acronym\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">0\u00a0</td>\n<td style=\"width: 185px;\"><strong>N</strong>o signs or symptoms\u00a0</td>\n<td style=\"width: 10px;\">N\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">1\u00a0</td>\n<td style=\"width: 185px;\"><strong>O</strong>nly signs (lid retraction)\u00a0</td>\n<td style=\"width: 10px;\">O\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">2\u00a0</td>\n<td style=\"width: 185px;\"><strong>S</strong>oft tissue involvement (chemosis, grit)\u00a0</td>\n<td style=\"width: 10px;\">S\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">3\u00a0</td>\n<td style=\"width: 185px;\"><strong>P</strong>roptosis\u00a0(minimum &lt;23, moderate, marked &gt;28)\u00a0</td>\n<td style=\"width: 10px;\">P\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">4\u00a0</td>\n<td style=\"width: 185px;\"><strong>E</strong>xtraocular\u00a0muscle involvement\u00a0</td>\n<td style=\"width: 10px;\">E\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">5\u00a0</td>\n<td style=\"width: 185px;\"><strong>C</strong>orneal involvement\u00a0</td>\n<td style=\"width: 10px;\">C\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 20px;\">6\u00a0</td>\n<td style=\"width: 185px;\">Loss of <strong>S</strong>ight\u00a0</td>\n<td style=\"width: 10px;\">S\u00a0</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Anisocoria in dim light is maximally seen in",
    "choices": [
      {
        "id": 1,
        "text": "3rd nerve palsy"
      },
      {
        "id": 2,
        "text": "Pharmacological mydriasis"
      },
      {
        "id": 3,
        "text": "Horner's syndrome"
      },
      {
        "id": 4,
        "text": "Parasympathetic paralysis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Anisocoria in dim light</strong> is maximally seen in <strong>horner's syndrome.</strong></p>\n<p><strong>The difference between the size of two pupils is called anisocoria.</strong> Normal size of pupil varies between 3 to 4 mm depending upon the room illumination.</p>\n<p>Anisocoria may be physiological or pathological.</p>\n<p><strong>Anisocoria same in dark and bright illumination is usually physiological</strong>.</p>\n<p><strong>Anisocoria greater in dim illumination is suggestive of sympathetic palsy (Horner&rsquo;s syndrome).</strong><br /> <br />Pupillary light reflex should be tested after noting the pupil size. <br />Poor light reaction: defect in parasympathetic system (3rd nerve palsy, tonic pupil, anticholinergic drugs). <br />Normal light reaction: Horner&rsquo;s syndrome <br /> <br />Pharmacological tests for suspected parasympathetic palsy.</p>\n<ul>\n<li>Pupil <strong>constricts to low concentration</strong> of pilocarpine (0.125%): <strong>Adies tonic pupil</strong>.</li>\n<li>Pupil<strong> constricts to usual concentration</strong> of pilocarpine (1 to 2%): <strong>3rd nerve palsy</strong>.</li>\n<li>Pupil<strong> does not constrict</strong> with pilocarpine: Mydriasis due to <strong>parasympatholytic drugs, traumatic mydriasis and fixed pupil in iritis</strong>.</li>\n</ul>\n<p>Pharmacological tests for suspected sympathetic palsy include:</p>\n<ul>\n<li><strong>Cocaine test (2 to 4%)-&nbsp;</strong>Small pupil fails to dilate in Horner&rsquo;s syndrome.</li>\n<li><strong>Hydroxyamphetamine test (1%)-</strong>&nbsp;Small pupil dilates in central and pre-ganglionic and does not dilate in post-ganglionic Horner&rsquo;s syndrome.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The number of Krause glands present in upper fornix are:",
    "choices": [
      {
        "id": 1,
        "text": "8"
      },
      {
        "id": 2,
        "text": "24"
      },
      {
        "id": 3,
        "text": "42"
      },
      {
        "id": 4,
        "text": "20"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Number of Krause glands in upper fornix are 42.</p>\n<p><strong>Krause glands:</strong></p>\n<p>The accessory lacrimal glands or Krause glands are microscopic groups of acini, lying below the surface of the conjunctiva between the fornix and the edge of the tarsus.</p>\n<p>There are about</p>\n<ul>\n<li><strong>42 in the upper fornix </strong></li>\n<li><strong>6-8 in the lower fornix</strong></li>\n</ul>\n<p>The ducts of numerous acini unite to form a larger duct, which opens into the fornix.</p>\n<p>The moistening of the conjunctiva is done by Krause glands.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e4cfb5f732cd42efbad180971aa7f3e8x1280x981.JPEG"
    ]
  },
  {
    "text": "Chalcosis is seen with",
    "choices": [
      {
        "id": 1,
        "text": "Pb"
      },
      {
        "id": 2,
        "text": "Cu"
      },
      {
        "id": 3,
        "text": "Fe"
      },
      {
        "id": 4,
        "text": "Hg"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Chalcosis refers to the specific changes produced by the<strong> alloy of copper in the eye</strong>. </p>\n<p>Copper ions from the alloy are dissociated electrolytically and deposited under the membranous structures of the eye. </p>\n<p>Clinical features: </p>\n<p><strong>Kayser-Fleischer ring-</strong>&nbsp;It is a golden brown ring which occurs due to deposition of copper at the peripheral parts of the cornea.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/23af8e20e08d4f30bdb88f9c2e1fe508x515x449.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5cffed07585c4777842ae726379d15b3x576x465.PNG"
    ]
  },
  {
    "text": "The most common site of iris coloboma is",
    "choices": [
      {
        "id": 1,
        "text": "Superotemporal"
      },
      {
        "id": 2,
        "text": "Inferotemporal"
      },
      {
        "id": 3,
        "text": "Superonasal"
      },
      {
        "id": 4,
        "text": "Inferonasal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Iris coloboma is seen most commonly in the inferonasal quadrant</strong>.</p>\n<p>Congenital coloboma (absence of tissue) of iris, ciliary body and choroid may be seen in association or independently. It can be typical or atypical.</p>\n<p><strong>Typical coloboma</strong> is seen in the inferonasal quadrant and occurs due to defective closure of the embryonic fissure. It can be complete or incomplete</p>\n<ul>\n<li><strong>Complete coloboma</strong> extends from pupil to the optic nerve, with a sector-shaped gap occupying about one-eighth of the circumference of the retina, choroid, ciliary body, iris .</li>\n<li><strong>Incomplete coloboma</strong> may involve the iris alone, or iris and ciliary body (more common), or iris, ciliary body and part of choroid (i.e. stops short of optic nerve).&nbsp;</li>\n</ul>\n<p><strong>Atypical coloboma is occasionally found in other positions. It is usually incomplete</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/691427c79d6248f19cbb9f135298a295x264x468.PNG"
    ]
  },
  {
    "text": "Which among the following is incorrect about ocular tumors?",
    "choices": [
      {
        "id": 1,
        "text": "Metastasis is most common intra-ocular malignancy of adults"
      },
      {
        "id": 2,
        "text": "Retinoblastoma is most common intra-ocular malignancy of children"
      },
      {
        "id": 3,
        "text": "Sebaceous cell carcinoma is most common tumor of eyelid"
      },
      {
        "id": 4,
        "text": "Most common primary intra-orbital malignancy of childhood- Rhabdomyosarcoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common malignancy of eyelids is <strong>basal cell carcinoma</strong>.</p>\n<p>Ocular tumors - most common:</p>\n<ul>\n<li><strong>cause of eyelid tumor - Basal Cell Carcinoma</strong></li>\n<li>manifestation of retinoblastoma - Leukocoria</li>\n<li><strong>orbital malignant tumor in children - Rhabdomyosarcoma</strong></li>\n<li>orbital benign tumor in adults - Cavernous hemangioma</li>\n<li>orbital benign tumor in children - Capillary hemangioma</li>\n<li>cause of upper lid malignancy - Sebaceous cell carcinoma</li>\n<li>orbital tumor causing proptosis - Hemangioma</li>\n<li><strong>primary intraocular tumor in adults - Uveal melanoma </strong></li>\n<li><strong>primary intraocular tumor in children - Retinoblastoma</strong></li>\n<li>intraocular tumor in adults (overall) - Metastasis</li>\n<li>cause of metastasis in the choroid in males- Lung cancer</li>\n<li>cause of metastasis in the choroid in females - Breast cancer</li>\n<li>site of Metastasis of uveal melanoma - Liver</li>\n<li>site of basal cell carcinoma of\u00a0 the eyelid - Lower lid</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the investigation",
    "choices": [
      {
        "id": 1,
        "text": "Confocal Microscopy"
      },
      {
        "id": 2,
        "text": "Pentacam"
      },
      {
        "id": 3,
        "text": "Specular microscopy"
      },
      {
        "id": 4,
        "text": "Slit lamp examination"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given image shows the <strong>corneal endothelium</strong> visualized by a <strong>specular microscope.</strong></p>\n<p><strong>Specular microscopy:</strong></p>\n<ul>\n<li>Used to measure <strong>endothelial count and morphology</strong>.</li>\n<li><strong>The normal specular count is 2500-3500/mm<sup>3</sup></strong>.</li>\n<li>Specular count decreases with age.&nbsp;</li>\n<li>Specular less than 2000 is considered unfit for corneal transplant.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a35907825a104fe3b8340640b4d7dea3.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A person sustained an injury to the right eye with a tennis ball, following which he developed pain. On fundus examination, a milky white macula with a red spot is seen. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Commotio retinae"
      },
      {
        "id": 2,
        "text": "Retinal bleed"
      },
      {
        "id": 3,
        "text": "Vitreal hemorrhage"
      },
      {
        "id": 4,
        "text": "Macular tear"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Commotio retinae,&nbsp;</strong>or<strong> Berlin&rsquo;s edema,</strong> is the most probable diagnosis.</p>\n<p>It<strong>&nbsp;occurs following a blow to the eye</strong>. It manifests as milky white cloudiness involving a considerable area of the posterior pole with a &lsquo;cherry-red spot&rsquo; in the foveal region.</p>\n<p><strong>Blunt trauma to the eye produces</strong>:</p>\n<ul>\n<li><strong>Vossius ring -</strong>&nbsp;It is a circular ring of brown pigment seen on the anterior capsule. It occurs due to the&nbsp;striking of the contracted pupillary margin against the crystalline lens.</li>\n<li><strong>Rosette cataract -</strong>&nbsp;It is the most typical form of concussion cataract.</li>\n<li><strong>Commotio retinae (Berlin&rsquo;s edema) -</strong>&nbsp;It manifests as milky white cloudiness involving a considerable area of the posterior pole with a \"<strong>cherry-red spot\"</strong>&nbsp;at the foveola.</li>\n</ul>\n<p>It may disappear after some days or may be followed by pigmentary changes. Given below is an image of Berlin's edema.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ae55fb98b2a4481e89637133113ed1ecx497x374.PNG"
    ]
  },
  {
    "text": "Features of Ocular Ischemic Syndrome include all except",
    "choices": [
      {
        "id": 1,
        "text": "Microaneurysm"
      },
      {
        "id": 2,
        "text": "Dot and blot haemorrhage"
      },
      {
        "id": 3,
        "text": "More common in elderly women than men"
      },
      {
        "id": 4,
        "text": "Amaurosis fugax"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Ocular Ischemic Syndrome is more common in <strong>males than females.</strong></p>\n<p><strong>Ocular Ischemic Syndrome:</strong></p>\n<ul>\n<li>Vaso-occlusive pathology of retina with carotid artery/ophthalmic artery blockage with acute rise of IOP, neovascularization &amp; sudden loss of vision.</li>\n<li><strong>Etiology-&nbsp;</strong>Ocular ischaemic syndrome refers to a rare condition resulting from chronic ocular hypoperfusion secondary to carotid artery stenosis.</li>\n<li>It is usually<strong> unilateral</strong> (80%), affecting <strong>elderly males more commonly than</strong> <strong>females</strong>.</li>\n</ul>\n<p><strong>Risk factors:</strong></p>\n<ul>\n<li>Male gender,</li>\n<li>Old age (60-90 years)</li>\n<li>Smoking</li>\n<li>Diabetes mellitus&nbsp;</li>\n<li>Hyperlipidaemia&nbsp;</li>\n</ul>\n<p>The <strong>manifestations of carotid occlusive disease</strong> include:</p>\n<ul>\n<li><strong>Amaurosis fugax (transient retinal ischaemic attack)</strong></li>\n<li>Retinal artery occlusion (due to embolus)</li>\n<li>Transient cerebral ischaemic attacks (TIA)</li>\n<li>Stroke</li>\n<li>Asymmetrical diabetic retinopathy.&nbsp;</li>\n</ul>\n<p><strong>Signs and symptoms:</strong></p>\n<ul>\n<li><strong>Progressive loss of vision</strong>&nbsp;</li>\n<li>Cornea -oedema and striae.</li>\n<li>Pupil may be mid dilated and poorly reacting.</li>\n<li>Iris -<strong>rubeosis iridis</strong> (in 66% cases) and atrophic patches.</li>\n<li>Cataract may occur as a complication in advanced cases.</li>\n<li>Neovascular glaucoma is a frequent sequelae to anterior segment neovascularization.&nbsp;</li>\n</ul>\n<p><strong>Fundus examination</strong> may reveal:</p>\n<ul>\n<li><strong>Microaneurysm</strong></li>\n<li><strong>Dot and blot hemorrhage</strong></li>\n<li>Disc edema</li>\n<li>Neovascularization</li>\n<li>Dilated veins are seen, that are not tortuous</li>\n<li>Retinal arterial narrowing is present.</li>\n</ul>\n<p><strong>Investigations:</strong> Confirmed by Doppler ultrasound and magnetic resonance angiography.</p>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li>Treatment of the underlying cause</li>\n<li>Treatment of carotid stenosis is<strong> medical</strong> (antiplatelet therapy, oral anticoagulants) and <strong>surgical</strong> (carotid endarterectomy).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Recurrent corneal erosion is seen in :",
    "choices": [
      {
        "id": 1,
        "text": "Corneal dystrophy"
      },
      {
        "id": 2,
        "text": "Keratocglobus"
      },
      {
        "id": 3,
        "text": "Keratoconus"
      },
      {
        "id": 4,
        "text": "Peutz-anomalies"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Recurrent corneal erosions (recurrent keractalgia) is seen in corneal dystrophy</strong>.</p>\n<p>Patient usually gets recurrent attacks of acute pain and lacrimation with varying extent of corneal haziness. This occurs due to <strong>abnormally loose attachment of epithelium to the underlying Bowman\u2019s membrane</strong>.</p>\n<p>The frequent causes are:</p>\n<ul>\n<li><strong>Post traumatic non dystrophic erosion</strong> without primary basement membrane abnormality is the <strong>most common cause</strong></li>\n<li><strong>Epithelial basement membrane corneal dystrophy (cogan's microcytic dystrophy, map-dot finger print dystrophy) </strong></li>\n<li><strong>Diabetes mellitus</strong></li>\n</ul>\n<p>Treatment:</p>\n<p>Loosely attached epithelium should be removed by debridement and \u2018pad and bandage\u2019 applied for 48 hours, so that firm healing is established.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Angioid streaks in the eyes are seen in:",
    "choices": [
      {
        "id": 1,
        "text": "Pseudoxanthoma elasticum"
      },
      {
        "id": 2,
        "text": "Tendinous xanthoma"
      },
      {
        "id": 3,
        "text": "Xanthelasma"
      },
      {
        "id": 4,
        "text": "Eruptive xanthoma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Angioid streaks are associated with Pseudoxanthoma elasticum.</p>\n<p>Angioid streaks are <strong>dark brown streaks which may be mistaken for blood vessels</strong> are sometimes seen ophthalmoscopically.</p>\n<p>They are usually situated near the disc at a <strong>deeper level than the retinal vessels</strong>, and are very irregular in contour.</p>\n<p>They are due to changes in the elastic tissue of Bruch's membrane, and are frequently associated with more widespread degeneration of the elastic tissue of the skin pseudoxanthoma elasticum.</p>\n<p>Other associations with angioid streaks:</p>\n<ul>\n<li>Paget disease of bone</li>\n<li>Ehlers-Danlos syndrome</li>\n<li>Sickle cell disease</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Not true about malignant glaucoma:",
    "choices": [
      {
        "id": 1,
        "text": "Anterior Chamber flat in centre than in periphery"
      },
      {
        "id": 2,
        "text": "Ciliary process malrotation"
      },
      {
        "id": 3,
        "text": "Pilocarpine is drug of choice"
      },
      {
        "id": 4,
        "text": "Nd Yag hyaloidotomy can be attempted"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pilocarpine is contraindicated </strong>for medical management of malignant glaucoma. <br /><br /><strong>Malignant glaucoma:</strong></p>\n<ul>\n<li>Also called <strong>Cilliary Block glaucoma and Aqueous Misdirection Syndrome</strong>.</li>\n<li>It is rare complication seen Post Trabeculectomy , iridotomy, yag capsulotomy or any intra-ocular surgery.</li>\n</ul>\n<p><strong>Features:</strong></p>\n<ul>\n<li>Anterior chamber is flat more in centre than in periphery (<strong>shallow AC</strong>)</li>\n<li><strong>Acute rise of IOP</strong></li>\n<li><strong>Negative Siedel\u2019s test</strong></li>\n<li>Ciliary body malrotation to posterior segment causing aqueous misdirection posteriorly</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Circulus arteriosus major is seen at __________",
    "choices": [
      {
        "id": 1,
        "text": "Ciliary body"
      },
      {
        "id": 2,
        "text": "Root of iris"
      },
      {
        "id": 3,
        "text": "Collarette of iris"
      },
      {
        "id": 4,
        "text": "Pupillary margin of iris"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Circulus arteriosus major lies at <strong>the root of the iris.</strong><br /> <br />Intraocular anastomosis:</p>\n<table style=\"width: 260px;\">\n<tbody>\n<tr>\n<td style=\"width: 19px;\">Features&nbsp;&nbsp;</td>\n<td style=\"width: 134px;\">Circulus arteriosus Iridis major&nbsp;</td>\n<td style=\"width: 95px;\">Circulus arteriosus Iridis minor&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 19px;\">Location&nbsp;&nbsp;</td>\n<td style=\"width: 134px;\">Root/ base of Iris&nbsp;</td>\n<td style=\"width: 95px;\">Pupillary margin of Iris&nbsp;</td>\n</tr>\n<tr>\n<td style=\"width: 19px;\">Formed by anastomosis of&nbsp;</td>\n<td style=\"width: 134px;\">7 anterior ciliary arteries + 2 long posterior ciliary arteries&nbsp;</td>\n<td style=\"width: 95px;\">Branches of circulus arteriosus major&nbsp;</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Band shaped keratopathy is seen in ?\u2019",
    "choices": [
      {
        "id": 1,
        "text": "Keratoconus"
      },
      {
        "id": 2,
        "text": "Vitamin D poisoning"
      },
      {
        "id": 3,
        "text": "Angular conjunctivitis"
      },
      {
        "id": 4,
        "text": "Eale\u2019s disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Vitamin D poisoning presents with band shaped keratopathy</p>\n<p><strong>Band shaped keratopathy:</strong> <br /><br />It is seen in</p>\n<ul>\n<li>Blind shrunken eyes</li>\n<li>Children suffering from Still disease</li>\n<li>Aphakic eyes which have undergone vitrectomy with silicone oil</li>\n<li>Hyperparathyroidism</li>\n<li><strong>Vitamin D poisoning </strong></li>\n<li><strong>Sarcoidosis</strong></li>\n</ul>\n<p><strong>Features:</strong></p>\n<ul>\n<li>A <strong>whitish band</strong> appears in the <strong>interpalpebral area</strong>, commencing at the inner and outer sides and progressing until it forms a <strong>continuous band across the cornea</strong>, interspersed with round 'holes' or cleaves in the band itself.(in the fig)</li>\n<li>Close to the limbus, however, the cornea is generally relatively clear, as in so many degenerative conditions, probably owing to the better nutrition close to the blood vessels.</li>\n<li>The condition is due to<strong> hyaline infiltration of the superficial parts of the stroma, followed by the deposition of calcareous salts</strong>.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li>Improvement of vision may be obtained by scraping off the opacity, which is usually calcareous and quite superficial, or dissolving it with the sodium salt of ethylenediamine tetra-acetic acid (<strong>sodium edetate</strong>).</li>\n<li>It can also be removed with the<strong> excimer laser</strong> (phototherapeutic <strong>keratectomy</strong>).</li>\n</ul>\n<p>Fig:\u00a0 Band Shaped keratopathy\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1ba723e1387d4b26a6d99ed00d65f52dx405x351.PNG"
    ]
  },
  {
    "text": "Identify the instrument",
    "choices": [
      {
        "id": 1,
        "text": "Hertel\u2019s exophthalmometer"
      },
      {
        "id": 2,
        "text": "Prism bar cover test"
      },
      {
        "id": 3,
        "text": "Maddox wing test"
      },
      {
        "id": 4,
        "text": "Luedde\u2019s Exophthalmometer"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Exophthalmometry measures protrusion of the apex of cornea from the outer orbital margin</p>\n<p>Proptosis is measured by:</p>\n<p><strong>Hertels</strong> exophthalmometer: The<strong> most commonly used instrument</strong> it measures the<strong> two eyes simultaneously</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/15436ca6cae7441cbaca53fb60ce28cb.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/83537d33f50e41eeadcfea7fb94fbc5dx600x446.PNG",
      "https://cdn1.dailyrounds.org/uploads/90ae528dd8434585ae2428cd5cf84652x712x378.PNG",
      "https://cdn1.dailyrounds.org/uploads/69ca4e0ff90d44b8b77ff8e4cba74cd0x595x436.PNG"
    ]
  },
  {
    "text": "Select the wrong match:",
    "choices": [
      {
        "id": 1,
        "text": "Sirolimus \u2013 wet ARMD"
      },
      {
        "id": 2,
        "text": "Ranibizumab \u2013 Dry ARMD"
      },
      {
        "id": 3,
        "text": "Aflibercept- Recalcitrant macular edema"
      },
      {
        "id": 4,
        "text": "Ozurodex- Diabetic macular edema"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ranibizumab is used for treatment of Wet ARMD.</strong></p>\n<p><strong>New drugs in retina:</strong></p>\n<ul>\n<li><strong>Ocriplasmin- </strong>Used as chemical vitrectomy. It is used in conjugation with TPA for removing vitreomacular traction</li>\n<li><strong>Aflibercept</strong>(<strong>eylea</strong>)<strong>-</strong>&nbsp;It is a recombinant fusion protein consisting of vascular endothelial growth factor (VEGF)-binding portions from the extracellular domains of human VEGF receptors 1 and 2, that are fused to the Fc portion of the human IgG1 immunoglobulin used for wet ARMD,Diabetic Macular Oedema, Macular Degeneration</li>\n<li><strong>Ozurodex-&nbsp;</strong>&nbsp;Dexamethasone (0.7%)implant, used in Cystoid macular edema and Non infectious posterior uveitis</li>\n<li><strong>Pegaptinib-&nbsp;</strong>Macugen (Anti-VEGF), Given in Wet ARMD, Cystoid macular edema and Neovascularization</li>\n<li><strong>Ranibizumab</strong>- Lucentis (Anti-VEGF): Given in Wet ARMD, Cystoid macular edema and Neovascularization</li>\n<li><strong>Bevacizumab</strong>- Avastin (Anti- VEGF) Given in Wet ARMD, Cystoid macular edema and Neovascularization (PDR, NVI, NVG)</li>\n<li><strong>Sirolimus</strong>- Inhibitor of IL-2, Given in Wet ARMD,</li>\n<li><strong>Retisert &amp; Illuvien</strong>- Fluocinolone implant. Given in Wet ARMD, Cystoid macular edema and Neovascularization (PDR, NVI, NVG)</li>\n<li><strong>Verteporfin</strong>- Dyes used in Photodynamic Therapy (PDT)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Snow banking is seen in?",
    "choices": [
      {
        "id": 1,
        "text": "Leprotic uveitis"
      },
      {
        "id": 2,
        "text": "Candidiasis"
      },
      {
        "id": 3,
        "text": "Pars planitis"
      },
      {
        "id": 4,
        "text": "Fuchs iridocyclitis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Snow banking is a feature of pars planitis</strong></p>\n<p><strong>Pars planitis:</strong></p>\n<ul>\n<li>Intermediate uveitis, also known as <strong>chronic posterior cyclitis or pars planitis</strong>.</li>\n<li>It affects the pars plana of the ciliary body and the periphery of the choroid.</li>\n<li>It occurs particularly <strong>in children and young adults</strong>.</li>\n<li>Females are more commonly affected than males.</li>\n<li>The onset is insidious.</li>\n<li><strong>Both eyes are affected in 80% of cases</strong>.</li>\n</ul>\n<p><strong>Symptoms:</strong></p>\n<ul>\n<li><strong>Floaters</strong></li>\n<li>Deterioration of vision</li>\n</ul>\n<p><strong>Signs:</strong></p>\n<ul>\n<li>Minimal aqueous flare</li>\n<li>Occasional keratic precipitates (sometimes termed a 'spill-over' anterior uveitis)</li>\n<li><strong>Anterior vitritis </strong></li>\n<li><strong>Snow banking:</strong> White snowball- like exudates near the ora serrata, coalescent exudates giving the appearance of a 'snowbank' and mild peripheral periphlebitis</li>\n<li>Macular oedema, papillitis or disc oedema.</li>\n</ul>\n<p><strong>Treatment:</strong></p>\n<ul>\n<li><strong>Self limiting</strong> usually with a good prognosis</li>\n<li>Corticosteroids</li>\n<li>Immunosuppressants</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/df41d13003f64a5796af103c24ccb06ax510x386.PNG"
    ]
  },
  {
    "text": "Duochrome test is used",
    "choices": [
      {
        "id": 1,
        "text": "To measure amount of squint"
      },
      {
        "id": 2,
        "text": "To measure near add for presbyopia"
      },
      {
        "id": 3,
        "text": "To refine spherical correction"
      },
      {
        "id": 4,
        "text": "To refine cylindrical correction"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Duochrome test:</strong> </p>\n<p>The Duochrome test helps in <strong>refining the cylinder power and axis for spherical correction</strong>. </p>\n<p><strong>Principle:</strong> </p>\n<ul>\n<li>Duochrome test is based on the<strong> principle of chromatic aberration</strong>. </li>\n<li>Duochrome test does refining of spherical power of glasses. </li>\n</ul>\n<p><strong>Procedure:</strong> </p>\n<ul>\n<li>In Duochrome test- We put Red glass in front of right eye. Green glass in front of left eye. </li>\n<li>Normally, Green rays are focused slightly anterior, Red rays are focused slightly posterior to retina. </li>\n<li>So to an <strong>emmetropic eye they look equally bright</strong>, that should be our aim. </li>\n<li>We ask the patient, which is clearer &ldquo;Red or Green?&rdquo;. If he says red is clearer this means glasses we have given is more myopic. <strong>We adjust till it becomes equal, both red and green</strong>.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is true regarding color blindness?",
    "choices": [
      {
        "id": 1,
        "text": "More common in females"
      },
      {
        "id": 2,
        "text": "Optic nerve head is blue blind"
      },
      {
        "id": 3,
        "text": "Ganglion cells are responsible for color vision processing"
      },
      {
        "id": 4,
        "text": "Tritanopia refers to defective appreciation of blue color"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Color blindness:</strong></p>\n<ul>\n<li><strong>More common in males</strong> than in female because the genes that produce photopigments are carried on the X chromosome.</li>\n<li>Fovea is blue blind.</li>\n<li><strong>Ganglion cells are the cells mainly responsible for color vision processing.</strong></li>\n<li><strong>Human eyes are most sensitive to green colour</strong>.</li>\n</ul>\n<p>Tests:&nbsp;</p>\n<ul>\n<li>Nagel&rsquo;s Anomaloscope</li>\n<li>The Lantern test</li>\n<li><strong>Ishihara&rsquo;s test</strong></li>\n<li><strong>Farnsworth-Munsell 100 hue test.</strong></li>\n<li>Holmgren&rsquo;s wools test</li>\n<li>City university colour vision test.</li>\n</ul>\n<p><strong>Terms:</strong></p>\n<ul>\n<li>Tritanomalous: Blue</li>\n<li>Deuteranomalous: Green</li>\n<li>Protanomalous: Red</li>\n</ul>\n<p><strong>Anomalous- Defective appreciation of color </strong></p>\n<p><strong>Anopia- Total or complete defect</strong></p>\n<p>Difference b/w <strong>Tritanomalous and Tritanopia</strong>: Blue Cones are the culprit. If the patient is <strong>not able to identify the blue color completely then it is triatnopia</strong>, if there is <strong>defective differentiation a</strong>nd he is seeing it in varying shades of yellow green its<strong> tritanomalous</strong>.</p>\n<p>In option D tritanopia is said to be defective appreciation of blue colour, but actually <strong>it is</strong> <strong>tritanomalous that is the defective appreciation</strong> <strong>of blue colour, </strong>whereas tritanopia is the inability to identify blue colour completely<strong>.</strong></p>\n<p><strong>Types of Cones:</strong></p>\n<ul>\n<li><strong>S- Short wavelength: Blue</strong></li>\n<li><strong>M- Medium wavelength: Green</strong></li>\n<li><strong>L- Long wavelength: Red</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common cause of infectious blindness in world is",
    "choices": [
      {
        "id": 1,
        "text": "Cataract"
      },
      {
        "id": 2,
        "text": "Onchocercariasis"
      },
      {
        "id": 3,
        "text": "Refractive error"
      },
      {
        "id": 4,
        "text": "Trachoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li><strong>MC infectious cause of blindness in World- Trachoma </strong></li>\n<li>MC cause of blindness in India &ndash; Cataract </li>\n<li><strong>MC cause of visual morbidity in World- Refractive error </strong></li>\n<li><strong>MC cause of preventable blindness - Trachoma </strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drug causes macular edema?",
    "choices": [
      {
        "id": 1,
        "text": "Amiodarone"
      },
      {
        "id": 2,
        "text": "Haloperidol"
      },
      {
        "id": 3,
        "text": "Nicotinic acid"
      },
      {
        "id": 4,
        "text": "Rifabutin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Nicotinic acid causes <strong>macular edema</strong>. <br /> <br /><strong>Ocular side effects of systemic drugs:</strong></p>\n<ul>\n<li>Topical Steroids- Glaucoma</li>\n<li>Systemic steroid- Cataract</li>\n<li><strong>Vigabatrin &ndash; Constricted visual fields</strong></li>\n<li>Rifabutin used in conjunction with clarithromycin - Anterior uveitis</li>\n<li>Amiodarone- Corneal deposits</li>\n<li>Phenytoin- Nystagmus, Diplopia</li>\n<li><strong>Haloperidol- Capsular cataract</strong></li>\n<li>Oxprenolol- Photoophobia</li>\n<li>Thiazides- Xanthopsia</li>\n<li>Digitalis- Scotoma</li>\n<li>Quinine- Toxic amblyopia</li>\n<li>Chloroquine- <strong>Bull&rsquo;s eye maculopathy</strong>, Whorl like opacities in cornea,<strong> Hudson Stahli</strong> line, Ptosis, Central and Paracentral Scotoma, ERG, EEG abnormalities, Macular pigmentation, Chloroquine keratopathy, Ocular palsies</li>\n<li><strong>Nicotinic acid- macular edema</strong></li>\n<li>Penicillamine- Ocular pemphigoid</li>\n<li>Chlorpropamide- Steven Johnson Syndrome</li>\n<li>Indomethacin &ndash; Corneal deposits</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Ophthalmology St 1';
        const quizFilename = 'ophthalmology-st-1-44030cdc.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>