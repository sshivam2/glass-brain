<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>068 Microbiology Ini-Cet 2021 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Microbiology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">25</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following causes aplastic crisis in hereditary spherocytosis?",
    "choices": [
      {
        "id": 1,
        "text": "Poxvirus"
      },
      {
        "id": 2,
        "text": "Ebstein barr virus"
      },
      {
        "id": 3,
        "text": "Adenovirus"
      },
      {
        "id": 4,
        "text": "Parvovirus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Aplastic crisis in a child with hereditary spherocytosis is most likely due to infection of&nbsp;<strong>p</strong><strong>arvovirus.&nbsp;</strong>This aplastic crisis is due to the transient arrest of erythropoiesis where the parvovirus infects and kills the&nbsp;red cell precursors. This generally leads to a&nbsp;<strong>sudden worsening of anemia.&nbsp;</strong>Transfusions may be necessary to support the patient until the immune response clears the infection.</p>\n<p><strong>Parvovirus:</strong></p>\n<p>Parvovirus-B19 is a non-enveloped&nbsp;<strong>single-stranded DNA</strong>&nbsp;virus.&nbsp;</p>\n<p><span data-preserver-spaces=\"true\">Clinically, parvovirus B-19 infection may have several presentations-</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Erythema infectiosum - Also known as the<strong>&nbsp;fifth disease.</strong>&nbsp;The incubation period after infection is typically around 4-14 days.&nbsp;</span>The hallmark of erythema infectiosum is the&nbsp;characteristic rash, which appears initially as&nbsp;erythematous facial flushing, often described as a&nbsp;&ldquo;<strong>slapped cheek</strong>&rdquo; appearance. Later the rash spreads rapidly or concurrently to the&nbsp;trunk and proximal extremities as diffuse macular erythema. The child may be febrile.&nbsp;</li>\n<li><strong>Transient aplastic crisis&nbsp;</strong>- It may be seen in patients with underlying&nbsp;<strong>chronic hemolytic anemia</strong>&nbsp;like sickle-cell disease, thalassemia, hereditary spherocytosis, and RBC enzyme deficiencies like pyruvate kinase deficiency.&nbsp;Patients with aplastic crisis appear ill with fever, malaise, and pale with tachycardia and tachypnea due to profound anemia. The rash may or may not be present. Children with sickle-cell disease may also develop<strong>&nbsp;vaso-occlusive crises.</strong></li>\n<li><strong>Pure red cell aplasia&nbsp;</strong>- Persistent B19V infection that results in pure red cell aplasia has been reported in a wide variety of immunosuppressed patients, including patients with congenital immunodeficiency, AIDS, and lymphoproliferative disorders and transplant recipients.</li>\n<li>Primary maternal infection is associated with<strong>&nbsp;non-immune fetal hydrops</strong>&nbsp;and intrauterine fetal demise</li>\n</ul>\n<p>It is a clinical diagnosis not requiring investigations usually. However, in the case of pregnant women or with other manifestations an IgM ELISA or PCR assay may be done. It is self-limited and resolves on its own.</p>\n<p><span data-preserver-spaces=\"true\">The given image shows the classical slapped cheek appearance of erythema infectiosum caused by parvovirus B19. During the rash period, the patient is generally non-infectious.</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/231dcfc9c1344ca7bd32831acb27c582x720x537.PNG"
    ]
  },
  {
    "text": "A stool sample is collected. The specimen is processed for examination and is labeled at different levels as A, B, C, and D. Identify the level at which parasitic ova will be seen when viewed under a microscope.",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The parasitic ova will be seen in a specimen taken from <strong>level D.</strong></p>\n<p>The image shows a <strong>formol-ether sedimentation technique&nbsp;</strong>to concentrate the ova in the bottom (D) part of the tube. It is used for samples in which the concentration of parasitic ova is scanty. It is useful for all helminth ova/eggs and parasitic cysts. The ether adsorbs the fecal debris and floats. Formalin fixes and preserves the specimen.</p>\n<p>This&nbsp;method is useful for all helminth eggs and protozoan cysts.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/30e9e03c2026400fb8bdba9cdaf54eb6.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/25e07a845e4f478cbc40f6dca7bce8bdx1280x1753.PNG"
    ]
  },
  {
    "text": "Identify the organism shown in this image.",
    "choices": [
      {
        "id": 1,
        "text": "Strongyloides stercoralis"
      },
      {
        "id": 2,
        "text": "Enterobius vermicularis"
      },
      {
        "id": 3,
        "text": "Ancylostoma duodenale"
      },
      {
        "id": 4,
        "text": "Ascaris lumbricoides"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given image shows large cylindrical worms with tapering ends, and thus represents <strong><em>Ascaris lumbricoides</em></strong><em>\u00a0</em>(roundworm).</p>\n<p><em>Ascaris lumbricoides</em>\u00a0is the <strong>most common</strong> of <strong>human helminths</strong> and is distributed worldwide. It is the <strong>largest nematode parasite</strong> in the human intestine. The adult worms are large<strong> cylindrical </strong>worms, with<strong> tapering ends. </strong>The anterior end is more pointed than the posterior. It appears white outside the body.\u00a0</p>\n<p>Its\u00a0<strong>natural host</strong> is humans. There is<strong> </strong>no intermediate host.<strong> </strong>Adult worms live in the small intestine - jejunum and ileum. Humans acquire infectionby consuming food or water contaminated with nightsoil or human feces containing <strong>eggs. </strong>The eggs contain the infective\u00a0<strong>rhabditiform larva</strong>.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2431e17c80784bedb4efdb735b2c6f59.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presented with meningitis, and the CSF sample was subjected to gram staining and microscopy and appears as shown in the microscopic image given below. Which of the following features/tests will be characteristic of the organism?",
    "choices": [
      {
        "id": 1,
        "text": "Oxidase and catalase negative, does not ferment inulin"
      },
      {
        "id": 2,
        "text": "Ferments glucose and maltose but not inulin"
      },
      {
        "id": 3,
        "text": "Oxidase and catalase positive and does not ferment maltose or glucose"
      },
      {
        "id": 4,
        "text": "Catalase negative, optochin sensitive"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>&nbsp;</p>\n<p>The flowchart demonstrates the algorithm used for identification of gram-positive organisms in the lab.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c9023f5b99234316bf8eb60772aef8f5.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9a5ff5213e9046e1a5d7d5e97e6e0cabx720x1018.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d218f20a93145dca8c7437508cf89fex720x604.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c2a0f71ea8d9452b8f003db82701643ex1280x2558.JPEG"
    ]
  },
  {
    "text": "Which cell is involved in type 4/delayed type hypersensitivity?",
    "choices": [
      {
        "id": 1,
        "text": "Cytotoxic T cell"
      },
      {
        "id": 2,
        "text": "Macrophage"
      },
      {
        "id": 3,
        "text": "Dendritic cell"
      },
      {
        "id": 4,
        "text": "Neutrophil"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cytotoxic T cells</strong> are&nbsp;involved in <strong>type 4/delayed type hypersensitivity</strong></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 32-year-old laborer working at a construction site presented with fever and hemoptysis. The sputum sample collected for examination showed the following. The smear will be stained by which of the following sequences?",
    "choices": [
      {
        "id": 1,
        "text": "Gentian violet - iodine - alcohol - saffranin"
      },
      {
        "id": 2,
        "text": "Methylene blue - malachite green- acetic acid-water"
      },
      {
        "id": 3,
        "text": "Methanol-methylene blue-acid-water"
      },
      {
        "id": 4,
        "text": "Carbol fuschin - acid-alcohol - methylene blue"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Option A: It depicts the order of Gram staining, which was discovered by <strong>Hans Christian Gram</strong> in 1884.</p>\n<ul>\n<li>Primary staining\u00a0with\u00a0para-rosaniline dye (crystal violet, methyl violet or gentian violet).</li>\n<li>Application of\u00a0dilute solution of iodine.</li>\n<li>Decolorisation\u00a0with an\u00a0organic solvent (ethanol, acetone, aniline).</li>\n<li>Counterstaining\u00a0with the dye of\u00a0contrasting colour (carbol fuchsin, safranine, neutral red).</li>\n</ul>\n<p>\u00a0Option B: It includes the steps for performing <strong>Albert's stain\u00a0</strong>which is used for detected <em>Corynebacterium diphtheriae.\u00a0</em></p>\n<ul>\n<li>A heavy smear of the bacterial isolate is prepared on a glass slide and allowed to dry without fixing.</li>\n<li>Albert\u2019s stain is applied for (3-4) minutes. Then it is washed with water and Albert\u2019s iodine is applied for one minute.</li>\n<li>Wash with water and let dry with blotting paper.</li>\n<li>Examine the slide under oil immersion.</li>\n</ul>\n<p><em>Corynebacterium diphtheriae</em>\u00a0are slender bacilli with an arrangement resembling the letters V or L. They have metachromatic granules at the poles of bacilli which are also called polar bodies, volutin, or Babes-Ernst granules.\u00a0Albert staining is useful in the demonstration of metachromatic granules. The presence of metachromatic granules helps to distinguish C.diphtheriae from diphtheroids which lack them.\u00a0The images below show<em>\u00a0Corynebacterium diphtheriae.</em>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/df1dfb0b7ef84d8aad96e9d50c301105.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8edb42ebf48a4090ad31422bf13da0c3x799x599.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/9c9e7a83cf584598971f5a3b436ef50ax1280x2413.JPEG"
    ]
  },
  {
    "text": "A 55-year-old patient had a tooth extraction three days back. He now presents with a mass in the submandibular region which is otherwise asymptomatic. There is no ulcer on the oral mucosa. On drainage of the discharge, it was foul-smelling with a lot of yellow granules. They showed gram-positive filamentous rods on grams staining. What is the most likely implicated pathogen?",
    "choices": [
      {
        "id": 1,
        "text": "Chromoblastomycosis"
      },
      {
        "id": 2,
        "text": "Mucormycosis"
      },
      {
        "id": 3,
        "text": "Actinomycetes israelli"
      },
      {
        "id": 4,
        "text": "Histoplasmosis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>&nbsp;</p>\n<p>&nbsp;The given image shows a patient with multiple cutaneous lesions caused by actinomycosis:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5954c810e1304de5853684fb50f00b0ex720x1075.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a02dd3d8fa6248f999a7f396076436edx720x483.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eaef8e30217e4bd8a9fcd4845251c0dcx1024x768.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d5efbe846194391ac4d8bf7d32fa13cx700x460.JPEG"
    ]
  },
  {
    "text": "Which of the following components of the fungal cell wall is not seen in mucormycosis?",
    "choices": [
      {
        "id": 1,
        "text": "Mannoproteins"
      },
      {
        "id": 2,
        "text": "Beta 1, 3, glucan"
      },
      {
        "id": 3,
        "text": "Chitin"
      },
      {
        "id": 4,
        "text": "Ergosterol"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Beta-(1,3)-d-glucan (BG),&nbsp;</strong>a common&nbsp;component of many pathogenic fungi is absent in Zygomycetes/&nbsp;<strong>Mucormycosis</strong>.&nbsp;</p>\n<p><strong>Fungal cell wall:&nbsp;</strong></p>\n<p>The fungal cell wall is rigid and determines the shape of the fungi. These protect them from osmotic and environmental stresses. They are composed of glycoproteins and lipids. Some sugar polymers such as chitin,&nbsp;glucans, and mannans are also found in the cell wall. All these components remain cross-linked to form a multilayered cell wall matrix. They exhibit pathobiological properties and are responsible for provoking an inflammatory response during infections. These are also species-specific and release immunodominant antigens that could aid in immunological testing. In addition, some yeasts and molds are described as <strong>dematiaceous</strong> because their cell walls contain melanin which forms host defenses.</p>\n<p><strong>Clinical significance of Beta-1, 3-d-glucan:</strong></p>\n<p><strong>G-test:</strong></p>\n<p>G-test is done for detection of &alpha;-3 glucan. It is helpful in establishing a diagnosis of&nbsp;<strong>candidiasis.&nbsp;</strong></p>\n<p><strong>Tests for beta-d-glucan:</strong></p>\n<p>The presence of an elevated level of &beta;-d-glucan in the serum can be seen in candidiasis, aspergillosis, and pneumonia due to Pneumocystis carnii pneumonia. The same test cannot be effectively applied in the evaluation of Mucorales.&nbsp;This assay is also not evaluated in routine in cases of cryptococcosis<strong>, not because of the absence of BG&nbsp;</strong>but because the<strong> capsule captures BG </strong>even before it is<strong> released into the bloodstream.</strong></p>\n<p><strong>Effectiveness of echinocandins:</strong></p>\n<p>Echinocandins inhibit the synthesis of glucan synthase, since there is no much of a role for beta-glucans in mucormycosis, this class of drugs is seldom effective in the management of mucormycosis. The drug of choice for the management of mucormycosis is&nbsp;<strong>amphotericin-B.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7156954e3541477cadf2d6edb22dd0d9.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is True regarding trematodes?",
    "choices": [
      {
        "id": 1,
        "text": "Fasciola hepatica are seen in the intrahepatic biliary radicles"
      },
      {
        "id": 2,
        "text": "Schistosoma are monoecious"
      },
      {
        "id": 3,
        "text": "Fasciola hepatica acquired through contaminated water"
      },
      {
        "id": 4,
        "text": "Triclabendazole is the treatment of choice for all trematode infections"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Of the given statements regarding trematodes, the only true statement is that&nbsp;<strong>Fasciola hepatica is seen in the intrahepatic biliary radicles.</strong></p>\n<p>Schistosomes are <strong>dioeciou</strong>s, Fasciola hepatica is acquired through<strong> metacercariae</strong>&nbsp;<strong>encysted on raw aquatic vegetation</strong> and triclabendazole is <strong>not&nbsp;</strong>the treatment of choice for all trematode infections as&nbsp;<strong>praziquantel&nbsp;</strong>is used in the management of&nbsp;<strong>Schistosomiasis and lung fluke infections.&nbsp;</strong></p>\n<p><strong>Trematodes</strong>&nbsp;are leaf-shaped unsegmented, flat, and broad helminths. The males are shorter and stouter than the females. The unique feature of flukes is the presence of two muscular cup-shaped suckers (hence called distomata)- the <strong>oral sucker</strong> surrounding the mouth at the anterior end and the <strong>ventral sucker</strong> or acetabulum in the middle, ventrally. Three of the most important pathognomic species include&nbsp;<strong>Schistosoma hematobium, Fasciola hepatica,&nbsp;</strong>and&nbsp;<strong>Paragonimus westermani</strong>&nbsp;</p>\n<table style=\"height: 1258px; width: 294px;\">\n<tbody>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\"><em><strong>Features</strong></em></td>\n<td style=\"width: 140.188px; text-align: center;\"><em><strong>Schistosoma hematobium</strong></em></td>\n<td style=\"width: 120.75px; text-align: center;\"><em><strong>Fasciola hepatica</strong></em></td>\n<td style=\"width: 112.109px; text-align: center;\"><em><strong>Paragonimus westermani</strong></em></td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">General feature</td>\n<td style=\"width: 140.188px; text-align: center;\">Male is broader than female</td>\n<td style=\"width: 120.75px; text-align: center;\">\n<p>Largest and most common liver fluke.</p>\n</td>\n<td style=\"width: 112.109px; text-align: center;\">Endemic foci were seen in Manipur</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Sexes</td>\n<td style=\"width: 140.188px; text-align: center;\"><strong>Dioecious&nbsp;</strong>(Option-B), sexes are separate</td>\n<td style=\"width: 120.75px; text-align: center;\">Hermaphroditic parasite</td>\n<td style=\"width: 112.109px; text-align: center;\">Hermaphroditic parasite</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Habitat</td>\n<td style=\"width: 140.188px; text-align: center;\">\n<p>Mesenteric venous plexus (S. mansoni and S. japonicum)</p>\n<p>vesical, and prostatic venous plexus (S.haematobium).</p>\n</td>\n<td style=\"width: 120.75px; text-align: center;\"><strong>The biliary tract of man.</strong></td>\n<td style=\"width: 112.109px; text-align: center;\">Cystic spaces in the lung.</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Body</td>\n<td style=\"width: 140.188px; text-align: center;\">Leaf-like unsegmented body with two cup-like suckers with delicate spines</td>\n<td style=\"width: 120.75px; text-align: center;\">\n<p>Large leaf-shaped with a dorsoventrally flattened body.</p>\n</td>\n<td style=\"width: 112.109px; text-align: center;\">\n<p>Egg-shaped, reddish, brown, and covered with a scale-like spine.</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Eggs</td>\n<td style=\"width: 140.188px; text-align: center;\">Nonoperculated eggs containing a ciliated embryo, miracidium</td>\n<td style=\"width: 120.75px; text-align: center;\">Ovoid, operculated, and bile-stained.</td>\n<td style=\"width: 112.109px; text-align: center;\">Oval, operculated, and golden brown</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Definitive host</td>\n<td style=\"width: 140.188px; text-align: center;\">Man</td>\n<td style=\"width: 120.75px; text-align: center;\">Sheep</td>\n<td style=\"width: 112.109px; text-align: center;\">Man and domestic animals</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">First intermediate host</td>\n<td style=\"width: 140.188px; text-align: center;\">Freshwater snails</td>\n<td style=\"width: 120.75px; text-align: center;\">Freshwater snails (Lymnaea)</td>\n<td style=\"width: 112.109px; text-align: center;\">Snails of genera Semisu/cospira (Melania species)</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Second intermediate host</td>\n<td style=\"width: 140.188px; text-align: center;\">-</td>\n<td style=\"width: 120.75px; text-align: center;\">Aquatic vegetation</td>\n<td style=\"width: 112.109px; text-align: center;\">Crab or crayfish</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Infective form</td>\n<td style=\"width: 140.188px; text-align: center;\">Fork-tailed cercariae</td>\n<td style=\"width: 120.75px; text-align: center;\">Metacercariae<strong> encysted on raw aquatic vegetation</strong></td>\n<td style=\"width: 112.109px; text-align: center;\">Encysted metacercaria in crab or crayfish</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Clinical features</td>\n<td style=\"width: 140.188px; text-align: center;\">\n<p>Swimmer's itch</p>\n<p>Katayama fever</p>\n<p>hematuria</p>\n<p>portal hypertension</p>\n</td>\n<td style=\"width: 120.75px; text-align: center;\">\n<p>Acute phase-fever and hepatomegaly.</p>\n<p>Chronic phase-biliary obstruction, obstructive jaundice, cholelithiasis, and anemia</p>\n</td>\n<td style=\"width: 112.109px; text-align: center;\">\n<p>Peribronchial granuloma and cystic dilation of bronchi.</p>\n<p>Dyspnea</p>\n<p>Hemoptysis</p>\n<p>Pneumonitis</p>\n<p>Bronchiectasis</p>\n<p>Abscess&nbsp;</p>\n<p>Pneumothorax</p>\n<p>Extrapulmonary lesions in the brain and intestine.</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Diagnosis</td>\n<td style=\"width: 140.188px; text-align: center;\">\n<p>Detection of eggs in urine or stool</p>\n<p>biopsy</p>\n<p>imaging</p>\n<p>detection of antigen and antibody</p>\n</td>\n<td style=\"width: 120.75px; text-align: center;\">\n<p>Detection of eggs in stool and aspirated bile</p>\n<p>USG</p>\n<p>ERCP</p>\n<p>ELISA</p>\n</td>\n<td style=\"width: 112.109px; text-align: center;\">\n<p>Ova in sputum</p>\n<p>X-ray and CT scan of the chest</p>\n<p>CFT</p>\n<p>IHA</p>\n<p>ELISA</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 89.3281px; text-align: center;\">Treatment</td>\n<td style=\"width: 140.188px; text-align: center;\"><strong>Praziquantel</strong></td>\n<td style=\"width: 120.75px; text-align: center;\"><strong>Oral triclabendazole </strong></td>\n<td style=\"width: 112.109px; text-align: center;\"><strong>Praziquantel</strong></td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man developed generalized muscle spasm with arching of his back as shown in the image, a few days after sustaining a puncture wound to his leg. The toxin responsible for this type of abnormal posturing acts by which of the following mechanisms?",
    "choices": [
      {
        "id": 1,
        "text": "Presynaptic inhibition of GABA and glycine release"
      },
      {
        "id": 2,
        "text": "Presynaptic inhibition of Ach receptors"
      },
      {
        "id": 3,
        "text": "Postsynaptic inhibition of GABA"
      },
      {
        "id": 4,
        "text": "Cleavage of SNARE proteins, preventing Ach release"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The toxin responsible for the abnormal posturing shown in the image is <strong>tetanospasmin</strong> produced by <strong>Clostridium tetani. </strong>It\u00a0acts by causing\u00a0<strong>presynaptic inhibition of GABA and glycine release</strong>.\u00a0</p>\n<p><strong>Tetanospasmin,\u00a0</strong>after secretion by the bacterium is cleaved into two peptides linked by a <strong>disulphide</strong> <strong>bond</strong>. The larger peptide diffuses to terminals of neurons and migrates by the <strong>retrograde axonal transport</strong> system to the spinal cord and brainstem. It diffuses to the <strong>glycinergic</strong> interneurons and <strong>GABA</strong> secreting neurons there. The smaller peptide degrades <strong>synaptobrevin</strong> and blocks the release of the inhibitory glycine and GABA. This results in hyperreflexia, muscle spasms, and spastic paralysis. Even small amounts of the toxin can be lethal.</p>\n<p>The <strong>incubation period</strong> of C. tetani ranges from 4-5 days up to 3 weeks. Muscle spasms usually involve the area of injury first and then the muscles of the jaw causing <strong>trismus</strong> or lockjaw. Gradually, other voluntary muscles become involved, resulting in tonic spasms. Any external stimulus can precipitate a tetanic generalized muscle spasm. The patient is conscious but may be in pain. Death usually results from respiratory paralysis.</p>\n<p><strong>Other options:</strong> Proteolysis of target <strong>SNARE proteins</strong> in the neurons inhibits the release of Ach at the synapse - this is the mechanism of action of Botulinum toxin.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/006ccf78ce5341d9a15046ec8a11fa85.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A man with FUO has a job that requires traveling around the world. The bone marrow picture is shown below. Which of the following investigation would be the most appropriate in this case?",
    "choices": [
      {
        "id": 1,
        "text": "rk 39 antigen test, Leishmaniasis"
      },
      {
        "id": 2,
        "text": "pLDH, Plasmodium malaria"
      },
      {
        "id": 3,
        "text": "Biopsy, Histoplasmosis"
      },
      {
        "id": 4,
        "text": "ELISA, HIV"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Drugs used in the treatment of visceral leishmaniasis are sodium stibogluconate, miltefosine, and amphotericin. Liposomal amphotericin single dose 10mg/Kg IV is the first line of treatment in India.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/56a68cb738154ea98c9e016ee6f77819.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/85b8c3a992cf4e17a36bb4f25411ddc6x720x540.JPEG"
    ]
  },
  {
    "text": "Identify the organism from the lifecycle shown in the image given below.",
    "choices": [
      {
        "id": 1,
        "text": "Cystoisospora"
      },
      {
        "id": 2,
        "text": "Cryptosporidium"
      },
      {
        "id": 3,
        "text": "Plasmodium knowlesi"
      },
      {
        "id": 4,
        "text": "Toxoplasma gondii"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>&nbsp;</p>\n<p>The image below shows the life cycle of Plasmodium species.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ca639aebf3554011a9de0e52b3aeedd7.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f8d53ad95ea24bb882edbfcc7eee7a05x600x1259.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5ed95c448b8a4b48927c2420886152a9x640x839.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00e2225e74ff4959bcd9c59a9857884cx640x690.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a861456e080048a89ba302187cf6eacdx958x730.JPEG"
    ]
  },
  {
    "text": "All of the following oncogenic viruses can integrate with the human genome to initiate carcinogenesis except?",
    "choices": [
      {
        "id": 1,
        "text": "HPV"
      },
      {
        "id": 2,
        "text": "HBV"
      },
      {
        "id": 3,
        "text": "HTLV"
      },
      {
        "id": 4,
        "text": "EBV"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>HTLV - Human T cell lymphotropic virus&nbsp;</strong>causes&nbsp;<strong>microbial carcinogenesis&nbsp;</strong>by&nbsp;<strong>indirect mechanisms.&nbsp;</strong>Even, Hepatitis C virus, a flavivirus, does not generate a provirus and appears to induce cancer indirectly.</p>\n<p><strong>Oncogenic viruses:</strong></p>\n<p>Integration of viral genome into the host cell thereby leading to the formation of a pro-virus is commonly a mechanism of viral microbial carcinogenesis. DNA tumor viruses encode viral oncoproteins that are important for viral replication. Some portion of this may become integrated into the host cell chromosome. For&nbsp;RNA tumor viruses that mostly belong to the retrovirus family are known to cause&nbsp;<strong>microbial carcinogenesis by indirect mechanisms.&nbsp;</strong></p>\n<p><strong>Note:</strong></p>\n<p>HPV causes carcinogenesis by both integrations and by the E6, E7 protein systems.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with fever, dyspnea, palpitations, and tachycardia. The echocardiography revealed vegetation in the septal leaflets. Tissue sections from them reveal the following findings as shown in the image. What is the most likely implicated agent?",
    "choices": [
      {
        "id": 1,
        "text": "Pigmented septate hyphae at 90 degrees, Mucormycosis"
      },
      {
        "id": 2,
        "text": "Right angle branching septate hyphae, Fusarium"
      },
      {
        "id": 3,
        "text": "Acute angle branching hyphae, Rhizopus"
      },
      {
        "id": 4,
        "text": "Acute angle branching septate hyphae, Aspergillus"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical vignette is suggestive of&nbsp;<strong>infective cardiac valvulitis with mycotic vegetation.&nbsp;</strong>The histopathological slide shows fungal hyphae of&nbsp;<strong><em>Aspergillus</em>&nbsp;species</strong>&nbsp;with non-pigmented,&nbsp;<strong>narrow, septate,</strong>&nbsp;hyphae with&nbsp;<strong>branching at 45<sup>o</sup></strong>&nbsp;(acute angle).</p>\n<p>Invasive aspergillosis is an opportunistic infection seen in the immunosuppressed hosts. Aspergillus has a tendency to invade blood vessels. Thus, widespread hematogenous dissemination with involvement of the heart valves and brain is common. Aspergillus form&nbsp;<strong>fruiting bodies&nbsp;</strong>and&nbsp;<strong>septate filaments, 5 to 10 &micro;m thick, branching at acute angles&nbsp;</strong><strong>(40 degrees)</strong>. Aspergillus hyphae without the distinct fruiting body cannot be distinguished from Pseudallescheria boydii and<strong> Fusarium spp</strong>. by morphology alone.</p>\n<p>Rhinocerebral Aspergillus infection in immunosuppressed individuals resembles that caused by Mucormycoses (e.g., Mucor spp., Rhizopus spp.). (Option-A)&nbsp;Mucormycetes form broad ribbon-like&nbsp;<strong>non-septate or sparsely septate pigmented hyphae</strong> of variable width (6 to 50 &micro;m) with frequent <strong>right-angle branching</strong>, distinct from Aspergillus hyphae.</p>\n<p>Option B: Disseminated fusariosis differs from disseminated aspergillosis as the former presents with nodular or necrotic painful skin lesions are extremely common with fusariosis. No such history is given in the clinical stem.&nbsp;The organism is difficult to differentiate from Aspergillus species in tissues; thus, identification with culture is imperative.</p>\n<p>Option C: Rhizopus shows aseptate hyphae with&nbsp;<strong>sporangium&nbsp;</strong>and&nbsp;<strong>sporangiophores.&nbsp;</strong>It is similar in appearance to that of mucormycosis.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e4fbf03894b64b849d892a65eb8b1483.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which pathogen causes attachment-effacement lesion in the intestinal mucosa as shown in the image?",
    "choices": [
      {
        "id": 1,
        "text": "Enterotoxigenic Escherichia coli"
      },
      {
        "id": 2,
        "text": "Enteropathogenic Escherichia coli"
      },
      {
        "id": 3,
        "text": "Enteroinvasive Escherichia coli"
      },
      {
        "id": 4,
        "text": "Diffusely adherent Escherichia coli"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Enterotoxigenic E. coli</strong>: Causes <strong>endemic diarrhoea</strong> in developing countries and <strong>travellers diarrhoea</strong>. ETEC serotypes responsible for diarrhea are mostly 06, 08, 015, 025, 027, 0167. It attaches to intestinal mucosa with <strong>fimbriae</strong> called <strong>colonization factor antigens</strong>. The pathology is due to the <strong>heat-labile toxin</strong> (LT) produced by some and <strong>heat-stable toxin</strong> (ST) produced by others.</p>\n<p><strong>Enteroinvasive E.coli </strong>(EIEC): The clinical features are similar to shigellosis. It produces disease by invading the intestinal mucosa.</p>\n<p><strong>Enteroaggregative E. coli</strong> (EAEC): It causes acute and chronic diarrhea (&gt;14 days in duration) in developing countries. These strains appear aggregated in a <strong>stacked brick formation</strong>.&nbsp;Some strains of EAEC produce <strong>ST-like toxins</strong>, others produce a plasmid-encoded <strong>enterotoxin</strong> that produces cellular damage, and still others, a <strong>hemolysin</strong>.</p>\n<div class=\"page\" title=\"Page 295\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Enterohemorrhagic E.coli (EHEC):</strong> These strains produce two potent toxins, <strong>verocytotoxin (VT)</strong> or <strong>Shiga-like toxin (SLT)</strong>. Especially in young children and the elderly, they cause diarrhea ranging from mild to fatal hemorrhagic colitis and <strong>hemorrhagic uremic syndrome</strong> (HUS). EHEC primarily targets <strong>vascular endothelial cells</strong> leading to HUS. E.coli serotype <strong>0157: H7</strong> is associated with <strong>EHEC diarrhe</strong>a and its complications.</p>\n<p>Diffusely adherent E.coli (DAEC): These are less established as pathogens.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/51d4a3aa832a42ce9f88a837274cb959.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/cbfa4379efe149c883779ca731baae05x1280x1131.JPEG"
    ]
  },
  {
    "text": "Identify the component responsible for endotoxic shock in gram-negative bacteria.",
    "choices": [
      {
        "id": 1,
        "text": "2"
      },
      {
        "id": 2,
        "text": "4"
      },
      {
        "id": 3,
        "text": "1"
      },
      {
        "id": 4,
        "text": "3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Other options:</p>\n<p>Option A:<strong>&nbsp;2</strong> is<strong>&nbsp;</strong>the<strong> O polysaccharide portion </strong>of the<strong> LPS&nbsp;</strong>which determines<strong> O antigen specificity.&nbsp;</strong></p>\n<p>Option B:&nbsp;<strong>4</strong> is the <strong>plasma (cytoplasmic) membrane.&nbsp;</strong>It&nbsp;is a thin semipermeable layer that lines the inner surface of the cell wall and separates it from the cytoplasm.</p>\n<p>Option D:<strong>&nbsp;3 </strong>is<strong>&nbsp;</strong>the<strong>&nbsp;outer membrane.&nbsp;</strong>It is the outermost layer of the gram-negative bacterial cell wall. It contains various proteins known as outer membrane proteins.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/310787ee940f4ea49de4204905dfb465.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/43c5bd5175374eb1ac97ec8c02c3569fx1280x1147.JPEG"
    ]
  },
  {
    "text": "A 6-year old boy complains of cough and throat pain. On examination of the oral cavity, a white pseudomembrane was visualized. A swab was taken from it and stained as given in the image below. What is the procedure for the following staining?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 5, 8"
      },
      {
        "id": 2,
        "text": "6, 3, 8, 4"
      },
      {
        "id": 3,
        "text": "7, 8, 4, 3"
      },
      {
        "id": 4,
        "text": "3, 2, 1, 8"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Treatment of diphtheria includes administration of <strong>diphtheria anti-toxin</strong>. Recommended antibiotics include <strong>penicillin G</strong> and <strong>erythromycin.\u00a0</strong>Prevention is with the\u00a0<strong>diphtheria toxoid vaccine. </strong>It is coadministered with tetanus and acellular pertussis (DPT) and should be given according to the National Immunization Schedule.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/fc86612806e5486782aa454becc22894.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0399c8760a2f4378b3592f3f4c02e1f9x1280x848.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1e97b78504b54720999e9411c4f5737ex503x500.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/4a89848d72624fbc888d1552117942c4x840x1198.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/95cc77d0ce4746a7ba900f911b7fd9c4x700x867.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/93fcb8c5d9784cf1a8bc77cb9d7abdfax698x500.JPEG"
    ]
  },
  {
    "text": "Identify the virus given in the following replication cycle.",
    "choices": [
      {
        "id": 1,
        "text": "Human immunodeficiency virus"
      },
      {
        "id": 2,
        "text": "Herpes simplex virus"
      },
      {
        "id": 3,
        "text": "Hepatitis B virus"
      },
      {
        "id": 4,
        "text": "Coronavirus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D: <strong>Coronavirus</strong> are <strong>enveloped RNA</strong> viruses with a genome consisting of positive sense <strong>unsegmented single-stranded</strong> <strong>RNA</strong>.&nbsp;They have petal-shaped surface projections. Coronavirus nucleocapsids develop in the cytoplasm and mature by budding into cytoplasmic vesicles. The images below show the structure and life cycle of coronaviruses.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2469b162a5954cf4a629af3b3888098f.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ea2edef94c804c5a843a8857793184e5x1200x1428.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/09e5ec905aee425eb4380e34f073e0f9x1042x895.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/469001a0bb614cd5a64f15e628bf26cdx711x452.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/64ad49b19fe04526b6d7f4ac8c13c52bx960x720.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/637d4d96c6f44cd1afb1d42d5ba4b5acx1024x786.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5d7fbdfe8713479f880b4cde3c55c97bx1280x712.PNG"
    ]
  },
  {
    "text": "Which of the following is a xenodiagnostic method?",
    "choices": [
      {
        "id": 1,
        "text": "Rabbit ileal loop for enterotoxigenic Escherichia coli"
      },
      {
        "id": 2,
        "text": "Injecting Aedes thorax with blood of a suspected dengue patient"
      },
      {
        "id": 3,
        "text": "Injecting a hamster with splenic biopsy for diagnosis of leishmaniasis"
      },
      {
        "id": 4,
        "text": "Intradermal test on guinea pigs for toxigenicity of Corynebacterium diphtheria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Injecting Aedes thorax with blood of a suspected dengue patient is the xenodiagnostic method among the given options.</p>\n<p><strong>Xenodiagnosis</strong> (Xenos- foreign) is an <strong>indirect method</strong> of identifying the infectious disease agent or pathogen. In xenodiagnosis, the <strong>vector</strong> of a pathogenic agent is infected and the pathogen is allowed to multiply in the vector. Vectors are insects such as mosquitoes, ticks, mites, flies, fleas, and lice that transmit infections and they act as the '<strong>foreign host.'</strong> Later, the vector is examined for the presence of the pathogen.</p>\n<p>For example,<strong> diagnosis of Chagas disease:</strong>&nbsp;Laboratory bred Reduviid bugs (vector/ foreign host) are allowed to feed on the suspected patients (original host). After 4-5 weeks, the feces of the bugs are microscopically examined for amastigote forms of <em>Trypanosoma cruzi</em> (pathogen).</p>\n<p>Another method of xenodiagnosis is the<strong> intrathoracic inoculation </strong>of the<strong> mosquitoes</strong> (vector) with viruses (pathogen). The virus multiplies in different organs of the mosquito and can be easily demonstrated. <em>Aedes aegypti</em>, <em>Aedes albopictus,</em> and <em>Toxorhynchites</em> mosquitoes are used for the identification of the <strong>dengue virus.</strong></p>\n<p>In <em><strong>Trichinella spiralis</strong></em> infection, muscle biopsy bits from suspected patients are fed to laboratory rats (vector for<em> T. spiralis</em>). The larvae of <em>T. spiralis</em> can be demonstrated in the muscles of the infected lab rats.&nbsp;</p>\n<p><strong>Advantage of xenodiagnosis:</strong> It is useful in cases where a direct microscopic diagnosis is difficult due to the low count of pathogens in the blood of the host/patient.</p>\n<p>Other options:</p>\n<p><strong>Option A:</strong>&nbsp;Ligated rabbit ileal loop is used as a method of detection of Enterotoxigenic E.coli enterotoxins. It is not a method of xenodiagnosis as the vector of the pathogen is not being infected.</p>\n<p><strong>Option C:</strong> Injecting a hamster with splenic biopsy for diagnosis of leishmaniasis is a method of<strong> animal inoculation&nbsp;</strong>to help in confirmation of the diagnosis.</p>\n<p><strong>Option D:</strong> Intradermal test on guinea pigs for toxigenicity of Corynebacterium diphtheria is a method of <strong>virulence testing.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old male patient presented to the outpatient department with cervical lymphadenopathy. As a part of the evaluation, the Paul-Bunnell test was done. What is the principle of this test?",
    "choices": [
      {
        "id": 1,
        "text": "Complement fixation"
      },
      {
        "id": 2,
        "text": "Super-antigens"
      },
      {
        "id": 3,
        "text": "Heterophile antibodies"
      },
      {
        "id": 4,
        "text": "Haptens"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The principle of<strong>&nbsp;</strong>the<strong> Paul-Bunnell</strong> test is<strong>&nbsp;</strong>based on<strong> heterophile antibodies.&nbsp;</strong>Heterophile antibodies have the ability to agglutinate shared antigens.&nbsp;</p>\n<p>Paul-Bunnell test is the standard diagnostic procedure for infectious mononucleosis. In infectious mononucleosis, heterophile antibodies agglutinate sheep erythrocytes. However, such antibodies may also occur after injections of sera and sometimes even in normal individuals. Infectious mononucleosis antibodies may be differentiated by absorption tests. An agglutination titer of 100 or above is suggestive of infectious mononucleosis.</p>\n<p>The <strong>Weil-Felix reaction</strong> is also a heterophile agglutination test. It is based on the sharing of a common antigen between <strong>typhus rickettsiae</strong> and some strains of <strong>proteus bacilli</strong>. It is used for the serodiagnosis of typhus fevers. Other examples based on the same principle are <strong>Streptococcus MG agglutination test</strong> for the diagnosis of primary atypical pneumonia and the <strong>cold agglutination test</strong> for diagnosis of mycoplasmal (primary atypical) pneumonia.</p>\n<p>Other options:</p>\n<div class=\"page\" title=\"Page 98\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option A:&nbsp;<strong>Complement fixation test</strong> is based on the ability of <strong>antigen-antibody complexes</strong> to <strong>fix</strong>&nbsp;<strong>complement</strong>. This is a very sensitive test capable of detecting various types of antigens and antibodies.</p>\n<div class=\"page\" title=\"Page 101\">Option B:<strong> Superantigens</strong> are certain protein&nbsp;molecules, that&nbsp;activate very large numbers of T cells irrespective of&nbsp;their antigenic specificity such as staphylococcal enterotoxins. Superantigens <strong>bind </strong>outside&nbsp;the antibody binding groove <strong>directly</strong> to the lateral&nbsp;aspect of the <strong>TCR beta chain</strong>. Microbial superantigens are medium-sized proteins characterized by high resistance to proteases and to denaturation by CD4+ T cells. They cause the release of cytokines (IL-2) which results in massive proliferation of T lymphocytes. This ultimately leads to further release of a variety of cytokines which can have profound effects on the immune system.</div>\n<div class=\"page\" title=\"Page 101\">\n<div class=\"page\" title=\"Page 121\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Option D:<strong> Haptens</strong> are substances that can react specifically with antibodies but are<strong> incapable</strong> of <strong>inducing antibody formation</strong> <strong>alone</strong>. Haptens become immunogenic (capable of inducing antibodies) by combining with a larger molecule carrier. They may be complex or simple. While complex haptens can precipitate with specific antibodies, simple haptens are non-precipitating.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following in the Japanese encephalitis virus life cycle.",
    "choices": [
      {
        "id": 1,
        "text": "1-d, 2-c, 3-a, 4-b"
      },
      {
        "id": 2,
        "text": "1-c, 2-a, 3-d, 4-b"
      },
      {
        "id": 3,
        "text": "1-c, 2-d, 3-a, 4-b"
      },
      {
        "id": 4,
        "text": "1-d, 2-c, 3-b, 4-a"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most people infected with JE do not have symptoms or have only mild symptoms. Less than 1% of people infected with Japanese encephalitis (JE) virus develop clinical illness. The <strong>incubation</strong> period is typically&nbsp;<strong>5-15 days</strong> in persons who develop symptoms. Initial symptoms often include fever, headache, and vomiting.&nbsp;Mental status changes, neurologic symptoms, weakness, and movement disorders might develop over the next few days.&nbsp;Seizures are common, especially among children.</p>\n<p>No specific treatments have been found to benefit patients with JE, but hospitalization for supportive care and close observation is generally required.&nbsp;Treatment is symptomatic. Rest, fluids, and the use of pain relievers and medication to reduce fever may relieve some symptoms.</p>\n<p>Prevention: In India, inactivated vero cell culture-derived SA-14-14-2 is used. Japanese encephalitis vaccine has been introduced in selected endemic districts. 2 doses of 0.5 ml are given in the left upper arm subcutaneously.</p>\n<table style=\"height: 172px; width: 328px;\">\n<tbody>\n<tr>\n<td style=\"width: 112.078125px;\">Vaccine</td>\n<td style=\"width: 101.484375px;\">Due age</td>\n<td style=\"width: 92.46875px;\">Maximum age</td>\n</tr>\n<tr>\n<td style=\"width: 112.078125px;\">\n<div class=\"page\" title=\"Page 1\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Japanese encephalitis - 1</p>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 101.484375px;\">&nbsp;9-12 months</td>\n<td style=\"width: 92.46875px;\">15 years</td>\n</tr>\n<tr>\n<td style=\"width: 112.078125px;\">Japanese encephalitis - 2</td>\n<td style=\"width: 101.484375px;\">16-24 months</td>\n<td style=\"width: 92.46875px;\">15 years</td>\n</tr>\n</tbody>\n</table>\n<p>If the first dose is delayed beyond 12 months, a minimum of 3 months gap should be there between the two JE doses.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/16f35789e77f484cbc889f134fd5ced0x584x421.JPEG"
    ]
  },
  {
    "text": "Which of the following is a dematiaceous fungus?",
    "choices": [
      {
        "id": 1,
        "text": "Mucor species"
      },
      {
        "id": 2,
        "text": "Aspergillus niger"
      },
      {
        "id": 3,
        "text": "Cladosporium"
      },
      {
        "id": 4,
        "text": "Blastomyces dermatitidis"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Other options:</p>\n<p>Option A: <strong>Mucor</strong> species causes mucormycosis. It is called <strong>black fungus</strong> because it causes serious <strong>angioinvasion</strong> leading to tissue necrosis and gangrene. It is not a dematiaceous fungus. They appear as <strong>non pigmented</strong> (hyaline), broad non-septate hyphae on microscopy.</p>\n<p>Option B:&nbsp;<strong>Aspergillus</strong> species usually appear as <strong>non pigmented</strong> (hyaline), septate hyphae with acute angle branching on microscopy. The conidia of A.niger are black in color.&nbsp;</p>\n<p>Option D:&nbsp;<strong>Blastomyces</strong> <strong>dermatitidis</strong> appear as broad-based budding yeasts.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1dab708aed9e4f1d9fff652063fd549ex958x640.JPEG"
    ]
  },
  {
    "text": "The strict anaerobe among the following is __________.",
    "choices": [
      {
        "id": 1,
        "text": "Burkholderia cepacia"
      },
      {
        "id": 2,
        "text": "Yersinia enterocolitica"
      },
      {
        "id": 3,
        "text": "Stenotrophomonas maltophilia"
      },
      {
        "id": 4,
        "text": "Prevotella"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The strict anaerobe in the given options is <strong>Prevotella.</strong></p>\n<div class=\"page\" title=\"Page 308\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Prevotella species</strong> are <strong>gram-negative</strong> rods or coccobacilli. The most commonly isolated Prevotella species are <em>P melaninogenica</em>, <em>Prevotella bivia</em>, and <em>Prevotella disiens</em>. <em>P melaninogenica</em> is associated with upper respiratory tract infections. <em>P bivia</em> and <em>P disiens</em> occur in the female genital tract. Prevotella species are also found in brain and lung abscesses, empyema, pelvic inflammatory disease and tubo-ovarian abscesses.</p>\n<p>Other options</p>\n<p>Option A:&nbsp;<em><strong>Burkholderia cepacia&nbsp;</strong></em>belongs to the pseudomonad group and is gram-negative, <strong>aerobic</strong> rods.</p>\n</div>\n</div>\n</div>\n</div>\n<p>Option B:&nbsp;<strong><em>Yersinia enterocolitica&nbsp;</em></strong>are gram-negative <strong>facultative anaerobes.</strong></p>\n<p>Option C:&nbsp;<strong><em>Stenotrophomonas maltophilia</em></strong>&nbsp;also belong to the pseudomonad group and are gram-negative, <strong>aerobic</strong> rods.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Match the following eggs to the organism.",
    "choices": [
      {
        "id": 1,
        "text": "1-D, 2-C, 3-A, 4-B"
      },
      {
        "id": 2,
        "text": "1-C, 2-D, 3-A, 4-B"
      },
      {
        "id": 3,
        "text": "1-D, 2-C, 3-B, 4-A"
      },
      {
        "id": 4,
        "text": "1-C, 2-D, 3-B, 4-A"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The eggs of <strong><em>Taenia solium</em></strong>&nbsp;and&nbsp;<em><strong>Taenia saginata</strong></em> are indistinguishable. The egg is <strong>spherical</strong>. The inner embryophore is radially striated and is yellow-brown due to <strong>bile staining</strong>. A fully-developed embryo (oncosphere) with three pairs of hooklets (hexacanth embryo) is present in the center.</p>\n<p>The eggs of <em>T. saginata</em> are infective only to cattle and not to humans, whereas the eggs of <em>T. solium</em> are infective to pigs and humans.&nbsp;The eggs do not float in a saturated salt solution. The image below shows the egg of Taenia.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b3f70cb9aaad423992411a0ba9600d4e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/83bb6703f57647a484d266134127105ex300x300.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2626bc01bac14c4db15f7eee953121fdx300x300.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d299d76994b4483cb445f270a1cfb78fx700x464.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5a343567159046d7b4452fdfb74b68c0x700x460.JPEG"
    ]
  },
  {
    "text": "A man presents with the following lesion after traumatic inoculation. Identify the causative organism.",
    "choices": [
      {
        "id": 1,
        "text": "Mycobacterium scrofulaceum"
      },
      {
        "id": 2,
        "text": "Sporothrix schenckii"
      },
      {
        "id": 3,
        "text": "Madurella mycetomatis"
      },
      {
        "id": 4,
        "text": "Phialophora verrucosa"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Option D: <strong><em>Phialophora verrucosa</em>&nbsp;</strong>causes <strong>chromoblastomycosis</strong>. The lesions appear as warty, cutaneous nodules usually confined to the subcutaneous tissue of the lower limbs. Histologically, the lesions contain the fungus, which is seen as round or irregular, dark brown, yeast-like bodies with septae, known as sclerotic bodies. A skin lesion of chromoblastomycosis is seen below, followed by a histopathological image showing sclerotic bodies.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4638de75d7e44a81a8a3d476e43ffb4f.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b67a420432a4dbeaf2720ed90d73553x1280x947.PNG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/e3407e191ba143c6bdfe5f8cba586780x1280x1725.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/6f575fcb703349e79edc158b869383a5x1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b964b6edf9b6432fae004c636f36820ex1120x1791.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/40f6e05e90684c23895e10a37fcc3a4ax1280x960.JPEG"
    ]
  }
];
        let quizName = '068 Microbiology Ini-Cet 2021';
        let hierarchy = ["Marrow", "PYQs", "Microbiology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>