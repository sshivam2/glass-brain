<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Test- 20 (Drug Of Choice) - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following is the drug of choice for rescue analgesia?",
    "choices": [
      {
        "id": 1,
        "text": "Morphine"
      },
      {
        "id": 2,
        "text": "Codeine"
      },
      {
        "id": 3,
        "text": "Oxycodone"
      },
      {
        "id": 4,
        "text": "Fentanyl"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Fentanyl</strong> is the drug of choice for <strong>rescue</strong> <strong>analgesia</strong>.</p>\n<p>Rescue analgesia involves the use of medications to minimize postoperative pain. Mild pain can be controlled with oral analgesics, but severe pain requires opioids like fentanyl.</p>\n<p>Fentanyl is preferred over morphine or oxycodone due to its rapid onset of action, lesser incidence of postoperative nausea, vomiting, and other adverse effects.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Penicillin G is the drug of choice for all of the following conditions except_________.",
    "choices": [
      {
        "id": 1,
        "text": "Actinomycosis"
      },
      {
        "id": 2,
        "text": "Listeria infections"
      },
      {
        "id": 3,
        "text": "Lyme disease"
      },
      {
        "id": 4,
        "text": "Rat-bite fever"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Penicillin G </strong>is not the drug of choice for\u00a0<strong>Lyme</strong> disease. Penicillin G is an alternative to third-generation cephalosporins in the treatment of severe Lyme disease.\u00a0</p>\n<p><strong>Lyme disease</strong> is transmitted by the bite of <strong>Ixodid ticks (hard ticks).</strong></p>\n<p>The disease occurs in 3 stages:</p>\n<p><strong>Primary stage </strong>- characterized by the characteristic <strong>bull\u2019s eye rash</strong>. The rash starts as a small macule at the site of the tick bite and gradually expands with central clearing.<br /><strong>Secondary stage</strong> - characterized by secondary annular skin rashes, migratory arthritis, fever, and generalized lymphadenopathy. This stage can be associated with neurological abnormalities like aseptic meningitis and cranial nerve palsies. Patients may also develop myocarditis with associated AV block.<br /><strong>Tertiary stage </strong>- characterized by chronic arthritis, cranial nerve palsies, ataxia, and dermatitis.\u00a0<br /><strong>Doxycycline </strong>is the drug of choice in the initial stages of Lyme disease when there is no CNS involvement. If there is CNS involvement, <strong>i.v. ceftriaxone</strong> is used for treatment.</p>\n<p>Options A and D:<strong> Penicillin G</strong> is the <strong>drug of choice</strong> for all forms of<strong> actinomycosis and rat-bite fever</strong>.\u00a0</p>\n<p>Option B:<strong> Ampicillin or penicillin G</strong> is the <strong>drug of choice</strong> for <strong>Listeria</strong> infections.\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The ECG of a pregnant lady having pre-eclampsia is shown below. Her vitals are stable. What is the best step in the management of the condition?",
    "choices": [
      {
        "id": 1,
        "text": "IV calcium"
      },
      {
        "id": 2,
        "text": "IV MgSO4"
      },
      {
        "id": 3,
        "text": "DC Shock"
      },
      {
        "id": 4,
        "text": "Synchronised cardioversion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The ECG of this patient points towards the diagnosis of <strong>torsades de pointes</strong>. Since the patient is hemodynamically stable, <strong>IV MgSO<sub>4</sub> is the treatment of choice</strong>.\u00a0</p>\n<p>IV MgSO<sub>4</sub> is highly effective for both treatment and prevention of recurrence of long QT-related ventricular ectopic beats that trigger torsades de pointes.</p>\n<p>If the patient is hemodynamically unstable,\u00a0then immediate defibrillation should be done.</p>\n<table style=\"height: 110px;\" width=\"246\">\n<tbody>\n<tr>\n<td style=\"width: 115px;\">Synchronized cardioversion</td>\n<td style=\"width: 115px;\">Defibrillation</td>\n</tr>\n<tr>\n<td style=\"width: 115px;\">\n<p>Used in VT and VF with a pulse</p>\n<p>Also used in SVT, atrial flutter/fibrillation</p>\n</td>\n<td style=\"width: 115px;\">Used in VT and VF without a pulse</td>\n</tr>\n<tr>\n<td style=\"width: 115px;\">Shock delivered in sync with R wave (in absolute refractory period)</td>\n<td style=\"width: 115px;\">Shock delivered at any time during cardiac cycle\u00a0</td>\n</tr>\n<tr>\n<td style=\"width: 115px;\">\n<p>Monophasic: 100-200 J</p>\n<p>Biphasic: 50-100 J</p>\n</td>\n<td style=\"width: 115px;\">\n<p>Monophasic: 360 J</p>\n<p>Biphasic:1 20-200 J</p>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c72c950fb3ac4d9da196c36389931ad6.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Treatment of choice of ITP with mild symptoms is ___________.",
    "choices": [
      {
        "id": 1,
        "text": "Corticosteroids"
      },
      {
        "id": 2,
        "text": "Intravenous anti-D"
      },
      {
        "id": 3,
        "text": "Intravenous Immunoglobulin"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>None of the above options are indicated in idiopathic thrombocytopenic purpura (ITP) with mild symptoms.&nbsp;</p>\n<p>Watchful expectancy with education and counseling of the family and patient is indicated in mild cases.</p>\n<p>Treatment of ITP</p>\n<ul>\n<li>Mild to moderate bleeding symptoms: <strong>watchful expectancy</strong></li>\n<li>Platelet count &lt; 30,000 + risk factors for bleeding (antiplatelet drugs/anticoagulants or concomitant bleeding disorders): Oral glucocorticoids/ intravenous immunoglobulin (IVIG) or IV anti-D</li>\n<li>Severe bleeding symptoms: IV methylprednisolone&nbsp;&plusmn;&nbsp;IVIG or IV anti-D</li>\n<li>Life-threatening&nbsp;bleeding (eg. intracranial hemorrhage): platelet transfusion +&nbsp;IV methylprednisolone +&nbsp;IVIG or IV anti-D</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which  of  the following platinum based drugs are used in cervical cancer along with  radiotherapy?",
    "choices": [
      {
        "id": 1,
        "text": "Doxorubicin"
      },
      {
        "id": 2,
        "text": "Trastuzumab"
      },
      {
        "id": 3,
        "text": "Cisplatin"
      },
      {
        "id": 4,
        "text": "Bleomycin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"page\" title=\"Page 900\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Cisplatin</strong> is the drug of choice for <strong>chemotherapy</strong> for<strong> cervical cancer.</strong></p>\n<p>The primary management for cervical cancer is chemoradiation therapy. This involves the combination of external beam radiation therapy, brachytherapy, and chemotherapy (usually with <strong>cisplatin). </strong>This approach has been shown to improve overall survival and reduce the risk of local and distant recurrence compared to radiation therapy alone.</p>\n<p>Following chemoradiation, patients should be closely monitored for treatment response and potential side effects or complications. This includes regular physical examinations, <strong>Pap tests, and imaging studies as needed</strong>. The prognosis for stage <strong>IIB cervical cancer depends on various factors, such as the size of the tumor, lymph node involvement, and the patient's overall health</strong>. With appropriate treatment, the 5-year survival rate for stage IIB cervical cancer is around 58-63%.</p>\n<p>Other Options:</p>\n<p>Option A: Chemotherapy with <strong>doxorubicin</strong> is used in case of very aggressive recurrent tumors and residual tumors.</p>\n<p>Option B: <strong>Trastuzumab</strong> is indicated for adjuvant therapy in early and metastatic <strong>HER2 positive breast cance</strong>r.\u00a0</p>\n<p>Option D: <strong>Bleomycin</strong> is an anticancer antibiotic used for the treatment of <strong>squamous cell cancer and Hodgkin lymphoma</strong>.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7-year-old boy is posted for laparoscopic appendectomy. which of the following inhalational agent is preferred for induction?",
    "choices": [
      {
        "id": 1,
        "text": "Isoflurane"
      },
      {
        "id": 2,
        "text": "Halothane"
      },
      {
        "id": 3,
        "text": "Sevoflurane"
      },
      {
        "id": 4,
        "text": "Desflurane"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Induction agent of choice in <strong>pediatric anesthesia</strong> is <strong>sevoflurane</strong>.</p>\n<p>Although both halothane and sevoflurane provide a smooth induction, <strong>sevoflurane</strong> appears to have a <strong>greater therapeutic index</strong> than halothane and is the preferred agent for inhaled induction in pediatric anesthesia.</p>\n<p><strong>Isoflurane</strong>&nbsp;and&nbsp;<strong>desflurane</strong>&nbsp;are&nbsp;<strong>airway irritants</strong>. Hence not used for induction of anesthesia as they can precipitate laryngospasm. These agents are used only during maintenance of anesthesia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 53 years old is found to be hypertensive stage 2 without any co morbidities. Which drug will you start?",
    "choices": [
      {
        "id": 1,
        "text": "Furosemide"
      },
      {
        "id": 2,
        "text": "Chlorthalidone"
      },
      {
        "id": 3,
        "text": "Spironolactone"
      },
      {
        "id": 4,
        "text": "Triamterene"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<div><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Chlorthalidone&nbsp;</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is one of the first choice drugs in the treatment of hypertension without any comorbidities.</span></div>\n<div>&nbsp;</div>\n<div><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>First-choice drugs </strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">used in the treatment of hypertension in patients without any comorbidities include:</span></div>\n<ul class=\"listtype-bullet listindent1 list-bullet1\">\n<li><strong>Thiazide diuretics</strong><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>:</strong> Chlorthalidone is usually preferred to hydrochlorothiazide.</span></li>\n<li><strong>Calcium channel blockers</strong><strong>:</strong> Extended-release, long-acting dihydropyridines are<span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"> preferred.</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>ACE inhibitors: </strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Captopril is preferred for the initiation of therapy. Enalapril and ramipril twice daily may also be used.</span></li>\n</ul>\n<div>&nbsp;</div>\n<div><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">In the presence of any associated conditions or comorbidities, the first choice drugs for the treatment of hypertension would be as follows:</span></div>\n<div>&nbsp;</div>\n<div>&nbsp;</div>\n<div>\n<table class=\"table-top-header\">\n<tbody>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\"ace-all-bold-hthree\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>Conditions associated with hypertension</strong></span></span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\"ace-all-bold-hthree\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>First choice drugs for hypertension</strong></span></span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Diabetes</span></div>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Chronic kidney disease with proteinuria</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Inhibitors of renin-angiotensin system.</span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Angina</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Beta-blockers or calcium channel blockers</span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Heart failure</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">ACE inhibitors and alpha+beta blockers such as carvedilol</span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Benign prostatic hyperplasia</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><em>&alpha;</em></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">1 </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><em>Blockers</em></span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Pregnancy</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Labetalol</span></div>\n</td>\n</tr>\n<tr>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Atrial fibrillation</span></div>\n</td>\n<td>\n<div class=\"ace-line gutter-author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z ace-ltr\" dir=\"auto\"><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Diltiazem and verapamil</span></div>\n</td>\n</tr>\n</tbody>\n</table>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 28-year-old female presents with hepatitis and personality changes. A picture of her eye has been provided below. Which of the following is the drug of choice for pregnant women and maintenance therapy for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Zinc"
      },
      {
        "id": 2,
        "text": "Trientine"
      },
      {
        "id": 3,
        "text": "Penicillamine"
      },
      {
        "id": 4,
        "text": "Pyridoxine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><span data-preserver-spaces=\"true\">The image provided above represents</span><strong><span data-preserver-spaces=\"true\">\u00a0the Kayser-Fleischer ring\u00a0</span></strong><span data-preserver-spaces=\"true\">which is seen in</span><strong><span data-preserver-spaces=\"true\">\u00a0Wilson's disease.\u00a0</span></strong><span data-preserver-spaces=\"true\">The drug of choice for maintenance therapy in this condition is\u00a0</span><strong><span data-preserver-spaces=\"true\">Zinc.</span></strong></p>\n<p><span data-preserver-spaces=\"true\"><strong>Wilsons disease</strong> is an\u00a0<strong>autosomal-recessive</strong>\u00a0disease caused by mutations in the\u00a0<strong><em>ATP7B\u00a0</em>gene</strong>, which encodes a membrane-bound, copper-transporting ATPase.</span></p>\n<p><strong><span data-preserver-spaces=\"true\">Kayser-Fleischer ring </span></strong>(<span data-preserver-spaces=\"true\">KF) ring\u00a0</span><span data-preserver-spaces=\"true\">is a golden-brown ring formed due to the\u00a0</span><strong><span data-preserver-spaces=\"true\">deposition of copper in Descemet\u2019s membrane of the cornea.</span></strong> It is c<span data-preserver-spaces=\"true\">haracteristically observed in Wilson's disease but is not pathognomic. It d</span><span data-preserver-spaces=\"true\">oes not interfere with vision. It is p</span><span data-preserver-spaces=\"true\">resent in almost all patients of Wilson's disease with neurological/psychiatric symptoms. However, the a</span><span data-preserver-spaces=\"true\">bsence of KF rings does not exclude the diagnosis of Wilson's disease</span></p>\n<p><span data-preserver-spaces=\"true\">Clinical symptoms:</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\"><strong>Hepatitis</strong> and cirrhosis</span></li>\n<li><span data-preserver-spaces=\"true\"><span data-preserver-spaces=\"true\"><strong>Neurological</strong>: D</span></span>ystonia, rigidity, tremor or choreiform movements, abnormal gait due to <strong>basal ganglia</strong> (e.g., caudate, putamen) involvement.</li>\n<li><span data-preserver-spaces=\"true\"><span data-preserver-spaces=\"true\"><strong>Behavioural</strong> disturbances</span></span>Occular characteristics:</li>\n<ul>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Deposition of copper in the posterior capsule of the lens resulting in\u00a0</span><strong><span data-preserver-spaces=\"true\">sunflower cataract</span></strong></li>\n<li class=\"ql-indent-1\"><strong>KF ring\u00a0</strong></li>\n</ul>\n</ul>\n<p><span data-preserver-spaces=\"true\">Diagnosis:</span></p>\n<ul>\n<ul>\n<li class=\"ql-indent-1\"><strong><span data-preserver-spaces=\"true\">Sternlieb's criteria:</span></strong><span data-preserver-spaces=\"true\">\u00a0Presence of KF rings</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Decreased serum ceruloplasmin (copper-containing enzyme/ferroxidase) levels</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Measured hepatic copper levels in liver biopsy</span></li>\n<li class=\"ql-indent-1\"><span data-preserver-spaces=\"true\">Increased 24-hour urine copper excretion</span></li>\n</ul>\n</ul>\n<p><strong><span data-preserver-spaces=\"true\">The gold standard</span></strong><span data-preserver-spaces=\"true\">\u00a0for diagnosis:\u00a0</span><strong><span data-preserver-spaces=\"true\">Liver biopsy</span></strong><span data-preserver-spaces=\"true\">\u00a0with quantitative copper assays</span></p>\n<div class=\"page\" title=\"Page 3591\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>The initial treatment in symptomatic patients is the administration of <strong>copper-chelating</strong> agents, which leads to the rapid excretion of excess deposited copper.</p>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>D-penicillamine</strong>: It increases urinary excretion of copper and prevents copper overload. Pyridoxine (vitamin B6 ) is administered along with it to counter pyridoxine deficiency that occurs due to penicillamine.</li>\n<li><strong>Triethylenetetramine dihydrochloride</strong>: This chelating agent is given in patients intolerant to D-penicillamine and those with severe neurologic manifestations (D-penicillamine worsens neurological status).</li>\n<li><strong>Zinc acetate</strong>: This is used due to its unique ability to <strong>impair</strong> the gastrointestinal <strong>absorption</strong> of copper.\u00a0Zinc is beneficial in <strong>pregnancy</strong> (lower teratogenic effects) and as a\u00a0<strong>maintenance therapy</strong>.</li>\n<li><strong>Liver</strong><strong> transplantation</strong>: This is considered in advanced stages of irreversible hepatic damage or poor compliance to medical therapy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/adb4f85f0604444ca1f8a7b06bb134bb.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Drug of choice for type III hyperlipoproteinemia is",
    "choices": [
      {
        "id": 1,
        "text": "Statins"
      },
      {
        "id": 2,
        "text": "Niacin"
      },
      {
        "id": 3,
        "text": "Fibrates"
      },
      {
        "id": 4,
        "text": "Alirocumab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Fibrates </strong>are the drug of choice for patients with type III&nbsp;hyperlipoproteinemia and those with severe hypertriglyceredemia (TG &gt;1000 mg/dl)who are at risk for pancreatitis.&nbsp;</p>\n<p>Type III&nbsp;hyperlipoproteinemia patients are most sensitive responders to fibrate therapy.&nbsp;</p>\n<ul>\n<li>Elevated triglyceride and cholesterol levels are dramatically lowered.</li>\n<li>Tuberoeruptive and palamr xanthomas may regress completely.</li>\n<li>Angina and intermittent claudication also improve.&nbsp;&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The fundoscopy findings of a known case of HIV with low CD4 counts in shown below. What is the treatment of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Acyclovir"
      },
      {
        "id": 2,
        "text": "Ganciclovir"
      },
      {
        "id": 3,
        "text": "Valacyclovir"
      },
      {
        "id": 4,
        "text": "Tryflurothymidine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above image depicts \"<strong>sauce and cheese\"</strong> retinopathy, which is characteristic of cytomegalovirus (<strong>CMV</strong>)<strong> retinitis</strong>.\u00a0<strong>Ganciclovir\u00a0</strong>is the treatment of choice.</p>\n<p>CMV retinitis is the most probable diagnosis as the patient is immunocompromised (transplant recipient) and the fundoscopy shows patchy areas of retinal necrosis with irregular borders and overlying retinal hemorrhages.</p>\n<p>CMV retinitis is mainly of 2 types</p>\n<p>Central CMV\u00a0retinitis</p>\n<ul>\n<li>Dense, white areas of\u00a0<strong>retinal necrosis</strong></li>\n<li><strong>Retinal hemorrhage</strong>\u00a0in the areas of necrosis</li>\n<li><strong>Pizza pie</strong>\u00a0or\u00a0<strong>sauce and cheese</strong>\u00a0appearance</li>\n</ul>\n<p>Peripheral CMV\u00a0retinitis</p>\n<ul>\n<li>Less demarcated</li>\n<li>Infection spreads along the vascular arcades in a\u00a0<strong>brush fire-like</strong>\u00a0fashion.</li>\n</ul>\n<p>The serological assay is not informative in the case of the immunocompromised patient and <strong>PCR assay</strong> is the <strong>gold standard</strong> for diagnosis.<br />CMV mostly causes infection in immunocompromised patients such as transplant recipients and AIDS. The most common infections are interstitial pneumonitis, gastroenteritis, esophagitis, and retinitis. Apart from ganciclovir, valganciclovir, foscarnet, and cidofovir are approved for treatment of CMV retinitis in patients with AIDS.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7a1e0f6d04c645fd9fce1c4a67afb332.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "An 8-year-old boy with incomplete vaccination history comes with vomiting after bouts of severe, violent cough. His nasopharyngeal aspirate shows Gram negative coccobacilli. What is the treatment of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Tetracyclines"
      },
      {
        "id": 2,
        "text": "Flouroquinalones"
      },
      {
        "id": 3,
        "text": "Penicillins"
      },
      {
        "id": 4,
        "text": "Macrolides"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical picture points towards a diagnosis of&nbsp;<strong>p</strong><strong>ertussis/whooping cough</strong>&nbsp;caused by <em>Bordetella</em> pertussis. Macrolide antibiotics are the treatment of choice.</p>\n<p>Whooping cough derives its name from the inspiratory whoop at the end of a coughing bout. The disease courses over 3 phases after an<strong>&nbsp;incubation period of 2 weeks:</strong></p>\n<ul>\n<li><strong>Catarrhal</strong>&nbsp;- lasts for<strong>&nbsp;1-2 weeks</strong>&nbsp;and consists of cough, coryza, and nasopharyngeal secretions.</li>\n<li><strong>Paroxysma</strong>l - lasts for&nbsp;<strong>2-6 weeks</strong>&nbsp;and consists of worsening paroxysms of productive whooping cough. It becomes more frequent and ends with vomiting.&nbsp;</li>\n<li><strong>Convalescent</strong>&nbsp;- Intensity and frequency of cough decrease&nbsp;<strong>over 4 weeks.</strong></li>\n</ul>\n<p><strong>Management :</strong></p>\n<ul>\n<li><strong>Erythromycin</strong> (or Azithromycin) for 14 days&nbsp;</li>\n<li>Salbutamol nebulization</li>\n<li>Avoid antihistamines and cough suppresants</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient comes to the OPD with a history significant of a mood disorder. Her moods can be charted as shown in the image. What will be the best drug for her?",
    "choices": [
      {
        "id": 1,
        "text": "Lamotrigine"
      },
      {
        "id": 2,
        "text": "Sodium Valproate"
      },
      {
        "id": 3,
        "text": "Carbamazepine"
      },
      {
        "id": 4,
        "text": "Lithium"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The patient is suffering from <strong>rapid cycling bipolar disorder.</strong> <strong>Sodium valproate </strong>is the<strong> drug of choice </strong>for&nbsp;this disorder.</p>\n<p>Diagnosis of rapid cycling bipolar disorder:</p>\n<ul>\n<li><strong>4 or more</strong> mood disturbances in a year</li>\n<li>Episodes either have a partial or full <strong>remission</strong> for atleast 2 months <strong>or switch</strong> to the opposite <strong>polarity</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/cc590a3ac2584562b755a5f57055b802.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 56-year-old diabetic male complains of burning sensation in both the legs and episodes of excruciating pain, tingling and a sensation he describes as \"pins and needles\". Which of the following is a first-line drug used in the treatment of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Carbamazepine"
      },
      {
        "id": 2,
        "text": "Valproate"
      },
      {
        "id": 3,
        "text": "Duloxetine"
      },
      {
        "id": 4,
        "text": "Venlafaxine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient is suffering from <strong>painful diabetic neuropathy </strong>in the scenario given above<strong>. Duloxetine</strong>&nbsp;is a selective serotonin&ndash;norepinephrine reuptake inhibitor (<strong>SSNRI</strong>) and is one of the first-line drugs used in the treatment of painful diabetic neuropathy<strong>.&nbsp;</strong></p>\n<p>Painful diabetic neuropathy&nbsp;manifests as burning, excruciating, stabbing or intractable type of&nbsp;pain&nbsp;or presents with tingling or numbness. The pathophysiology of this condition is due to primarily metabolic and vascular factors.</p>\n<p>Treatment of painful sensory neuropathies:</p>\n<p>&nbsp;First-line:</p>\n<ul>\n<li>Lidoderm 5% patch</li>\n<li>Tricyclic antidepressants (e.g., amitriptyline, nortriptyline)</li>\n<li>Gabapentin, Pregabalin</li>\n<li>Duloxetine</li>\n</ul>\n<p>Second line:</p>\n<ul>\n<li>Carbamazepine</li>\n<li>Phenytoin</li>\n<li>Venlafaxine</li>\n<li>Tramadol</li>\n</ul>\n<p>Third line:</p>\n<ul>\n<li>Mexiletine</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents to the emergency department with complaints of severe abdominal pain and vomiting. The parents give a history of the child ingesting 10-20 ferrous sulfate tablets. Which of the following can be used in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Deferoxamine"
      },
      {
        "id": 2,
        "text": "Activated charcoal"
      },
      {
        "id": 3,
        "text": "Dimercaprol"
      },
      {
        "id": 4,
        "text": "Penicillamine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario points to <strong>iron overdose</strong>, which is managed with <strong>deferoxamine</strong> (also known as\u00a0<strong>desferrioxamine</strong>).</p>\n<p>Large amounts of ferrous salts can be fatal in <strong>children</strong>. Initial symptoms include <strong>abdominal pain</strong>, diarrhea, vomiting, and <strong>gastrointestinal bleeding</strong>. In severe cases, <strong>cyanosis</strong> and hyperventilation due to <strong>metabolic</strong> <strong>acidosis</strong> can develop. This can sometimes be followed by an <strong>asymptomatic phase</strong>. Later, hypoglycemia and hepatic and renal failure can develop. <strong>Pyloric stenosis</strong> and gastric scarring can develop due to its corrosive nature. Ultimately, if left untreated, the child can die.</p>\n<p>The gastric contents can be used for an iron color test to estimate the iron concentration in plasma. As iron tablets are <strong>radiopaque</strong>, an X-ray can be used to assess the number of pills taken. <strong>Deferoxamine</strong>, an <strong>iron chelator</strong> has to be administered <strong>intramuscularly</strong>. Side effects include pruritus, wheals, rash, and anaphylaxis.\u00a0</p>\n<p><strong>Deferiprone</strong> and <strong>deferasirox</strong> are other <strong>oral</strong> iron chelators used to treat iron overload in<strong> thalassemia</strong> patients.\u00a0</p>\n<p><strong>Other options:</strong></p>\n<p>Option B: <strong>Activated charcoal</strong> can be used in the initial management of acetaminophen and opioid overdose. It is used for gastrointestinal decontamination to prevent further absorption of the poison.</p>\n<p>Option C: <strong>Dimercaprol,</strong>\u00a0also known as <strong>BAL</strong> (British anti-Lewisite), is used to treat <strong>arsenic</strong>, mercury poisoning, and <strong>Wilson's disease</strong>.</p>\n<p>Option D: <strong>D-penicillamine</strong> (Cuprimine) can be used to treat scleroderma, <strong>Wilson's disease</strong>, and rheumatoid arthritis. Side effects include nephrotoxicity, hematologic derangements, and a characteristic rash that involves the neck and axillae\u2014<strong>elastosis perforans serpiginosa</strong>.\u00a0It is associated with membranous glomerulonephritis, drug-induced lupus, and <strong>myasthenia gravis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 24-year-old patient complains of diarrhea, vomiting and abdominal pain that was aggravated on ingestion of food since 1 week. The stool microscopy reveals the following. The appropriate treatment for this condition would be ______",
    "choices": [
      {
        "id": 1,
        "text": "Ivermectin"
      },
      {
        "id": 2,
        "text": "Tinidazole"
      },
      {
        "id": 3,
        "text": "Niclofolan"
      },
      {
        "id": 4,
        "text": "Praziquantel"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given clinical picture and the stool microscopy image showing the rhabditiform larva are suggestive of\u00a0<strong>Strongyloidiasis</strong>.\u00a0The most appropriate treatment for this condition would be<strong>\u00a0Ivermectin.</strong></p>\n<p><strong>Strongyloides stercoralis</strong> is a parasitic nematode known for causing chronic diarrhea, particularly in immunocompromised individuals such as those with HIV. In this case, only larvae (and not ova) are seen in the stool, which is characteristic of Strongyloides infection due to its autoinfective cycle, where the larvae hatch inside the intestine and are passed in the stool.</p>\n<p>Strongyloidiasis:</p>\n<p>Strongyloides are ovoviviparous. The transmission of infection occurs through penetration of the skin by filariform larvae in the soil. Then, they migrate to the small intestine. The larvae moult twice and become adult female worms in the small intestine. The eggs laid in the mucosa of the intestine hatch immediately releasing the rhabditiform larva (L1 stage). These rhabditiform larvae in the bowel can develop directly into filariform larvae that penetrate the colonic wall or perianal skin and enter the circulation to repeat the migration. This establishes ongoing internal reinfection.</p>\n<p>The life cycle of strongyloides is shown below.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/aee4bd365d5543d9aa37bc971034ef0c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/aa8e8cf5422e430e92a63ba56342dceax720x548.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7655018658344d41b8f5afae0c2f3df5x468x321.JPEG"
    ]
  },
  {
    "text": "A 44-year-old woman from Assam presented with fever and chills recurring every 48 hours. On examination, she was conscious, oriented, and febrile. CBC, LFT, and RFT were normal. Peripheral smear revealed the following. What is the drug of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Quinine"
      },
      {
        "id": 2,
        "text": "Artesunate and sulphadoxine-pyrimethamine"
      },
      {
        "id": 3,
        "text": "Artemether and lumefantrine"
      },
      {
        "id": 4,
        "text": "Chloroquine and pyrimethamine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This clinical scenario and peripheral smear showing crescent-shaped gametocytes are suggestive of <strong>uncomplicated</strong>&nbsp;<strong>falciparum malaria</strong>. As this woman is from a <strong>North-Eastern state</strong>, the drug regimen of choice&nbsp;is <strong>ACT-AL</strong> (artemisinin combination therapy):&nbsp;</p>\n<ul>\n<li><strong>Artemether </strong>(20mg)</li>\n<li><strong>Lumefantrine </strong>(120mg) <strong>&nbsp;</strong></li>\n</ul>\n<p>This regimen is followed in the North-Eastern states of India due to documented resistance to<strong>&nbsp;</strong>sulphadoxine-pyrimethamine in these areas. ACT-AL is <strong>contraindicated</strong> in:</p>\n<ul>\n<li><strong>1<sup>st</sup> trimester</strong> of pregnancy</li>\n<li>Children&nbsp;<strong>&lt; 5 kg</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a0c25e2fc909448eb59b8d602258b440.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A tourist who has been travelling in India presents with complaints of abdominal pain and multiple episodes of watery diarrhea. He reports having food at a local restaurant the previous night. Which of the following antidiarrheal agents is used in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Octreotide"
      },
      {
        "id": 2,
        "text": "Loperamide"
      },
      {
        "id": 3,
        "text": "Rifaximin"
      },
      {
        "id": 4,
        "text": "Bismuth subsalicylate"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The antidiarrheal agent used in the given clinical scenario is\u00a0<strong>l</strong><strong>operamide.\u00a0</strong></p>\n<p>The given clinical scenario of a tourist with abdominal pain, and multiple episodes of diarrhea following food intake at an unhygienic place is suggestive of\u00a0<strong>traveler\u2019s diarrhea\u00a0</strong>and the serotype of\u00a0<em>E.Coli</em>\u00a0most likely responsible for these symptoms would be<strong>\u00a0</strong><strong>Enterotoxigenic\u00a0<em>E. coli</em>\u00a0</strong>(<strong>ETEC</strong>).\u00a0Enterotoxigenic\u00a0<em>E.Coli\u00a0</em>is the most common cause of traveler's diarrhea.\u00a0</p>\n<p><strong>Loperamide</strong>\u00a0is an opioid receptor agonist and\u00a0<strong>slows intestinal motility</strong>\u00a0by direct effects on the circular and longitudinal muscles. It reduces fecal volume and increases viscosity. It is used in traveler's diarrhea for\u00a0<strong>symptomatic treatment</strong> in conjunction with antibiotics. It is avoided in patients with dysentery.\u00a0</p>\n<p><strong>Other options:\u00a0</strong></p>\n<p><strong>Option A:\u00a0</strong>Octreotide is a somatostatin analog effective in treating severe secretory diarrhea that occurs due to hormone-secreting tumors in the GIT and pancreas. Its use is limited in traveler's diarrhea.\u00a0</p>\n<p><strong>Option C:\u00a0</strong>Rifaximin is an <strong>antibiotic</strong> used in the treatment of traveler's diarrhea. It is an alternative to Azithromycin due to poor absorption.\u00a0</p>\n<p><strong>Option D:\u00a0</strong>Bismuth subsalicylate is an over-the-counter (OTC) preparation used as an antidiarrheal agent. It is used in the treatment of traveler's diarrhea but is not preferred over loperamide due to a requirement for large doses, and salicylate toxicity, especially in high-risk groups (pregnancy, children, and individuals who take aspirin).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the treatment of choice for female with atrophic vaginitis with complains of itching?",
    "choices": [
      {
        "id": 1,
        "text": "Steroids"
      },
      {
        "id": 2,
        "text": "Topical estrogen"
      },
      {
        "id": 3,
        "text": "Antihistamines only"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Atrophic vaginitis </strong>is treated with<strong> topical estrogen vaginal cream.</strong></p>\n<p>Use of 1 g of conjugated estrogen cream intravaginally each day for 1 to 2 weeks generally provides relief. Systemic estrogen therapy should be considered to prevent recurrence of this disorder.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 7 year old child is noted to be extremely naughty, unable to sit in a place for a long time, excessively talking, and unable to concentrate on a thing for a long time. Which of the following drug is used in the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Atenolol"
      },
      {
        "id": 2,
        "text": "Modafinil"
      },
      {
        "id": 3,
        "text": "Methylphenidate"
      },
      {
        "id": 4,
        "text": "Amitriptyline"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above clinical scenario is suggestive of <strong>Attention deficit hyperactivity disorder</strong>(ADHD). The drug of choice for ADHD is<strong> Methylphenidate.</strong></p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll answer-html ng-star-inserted\">\n<p>Attention-deficit/hyperactivity disorder (ADHD) is a\u00a0<strong>neuro\u00ad psychiatric condition</strong>\u00a0characterized by a pattern of\u00a0<strong>diminished attention span and increased impulsivity or hyperactivity.\u00a0</strong>The\u00a0<strong>prefrontal cortex</strong>\u00a0of the brain has been implicated in its etiology and\u00a0<strong>dopamine</strong>\u00a0is the main neurotransmitter.\u00a0</p>\n<p>ADHD can begin during infancy but is usually rec\u00adognized between 1-3 years of age.\u00a0ADHD was known as minimal brain dysfunction earlier. The characteristics of children with ADHD, in order of frequency, are</p>\n<ul>\n<li>Hyperactivity</li>\n<li>Attention deficit (short attention span, distractibility)</li>\n<li>Impulsivity (action before thought, abrupt shifts in activity, lack of organization)</li>\n<li>Memory and thinking deficits</li>\n<li>Specific learning disabilities</li>\n<li>Speech and hearing deficits.</li>\n</ul>\n<p>Under\u00a0<strong>DSM-5</strong>\u00a0criteria, for diagnosis of ADHD, it is necessary for symptoms to be present<strong>\u00a0prior to age 12</strong>, persist for at least 6 months, have a negative impact on social, academic, or occupational activities, and be present in two or more settings.</p>\n<p>The course of ADHD is variable. The majority of the cases persist into adult life. The hyperactivity may sometimes disappear, but the decreased attention span and impulse-control problems usually persist. Patients with ADHD are vulnerable to antisocial behavior, conduct disorder, substance use disorders, and mood disorders.</p>\n<p><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Pharmacotherapy</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0is the first line of treatment for ADHD.\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">CNS stimulants</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0are the first-choice agents as they have shown the\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">greatest efficacy</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0with mild tolerable side effects. The CNS stimulants used are dopamine agonists like\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">methylphenidate</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">,\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">amphetamine</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0salts, and dextroamphetamine.\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Non-stimulant</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0medications used in the treatment of ADHD include\u00a0</span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">atomoxetine</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> (norepinephrine reuptake inhibitor), clonidine, and guanfacine (Alpha agonists).</span></p>\n<p><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Psychosocial interventions</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0such as academic organization skills remediation, parent training, behavior modification in the classroom and at home, cognitive-behavioral therapy (CBT), and social skills training are also used as an adjunct to pharmacotherapy.</span></p>\n<p><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">Note: Modafinil is used in the management of narcolepsy.</span></p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 65-year-old woman comes to the physician because of generalized weakness for 6 months. She has also had frequent headaches, mild fever and severe jaw pain. She does not complain of any vision abnormality.  She appears pale. Laboratory tests show elevated levels of ESR. Peripheral smear shows normochromic anemia. What is the next best step in management?",
    "choices": [
      {
        "id": 1,
        "text": "Prednisone"
      },
      {
        "id": 2,
        "text": "Methotrexate"
      },
      {
        "id": 3,
        "text": "Paracetamol"
      },
      {
        "id": 4,
        "text": "Sumatriptan"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above clinical scenario of a patient &gt;50 years with fever, weakness, anemia, jaw claudication, and high ESR and CRP levels is suggestive of a diagnosis of <strong>giant cell arteritis</strong>. <br />The drug of choice is <strong>prednisone</strong>.</p>\n<p><span data-preserver-spaces=\"true\">Giant cell arteritis (GCA), also known as&nbsp;</span><strong><span data-preserver-spaces=\"true\">temporal arteritis</span></strong>,<span data-preserver-spaces=\"true\">&nbsp;is an inflammation of medium and large-sized vessels. It is more common in&nbsp;</span><strong><span data-preserver-spaces=\"true\">women</span></strong><span data-preserver-spaces=\"true\">&nbsp;and people aged&nbsp;</span><strong><span data-preserver-spaces=\"true\">&gt;50 years</span></strong><span data-preserver-spaces=\"true\">.</span></p>\n<p><span data-preserver-spaces=\"true\">The clinical features include&nbsp;</span><strong><span data-preserver-spaces=\"true\">headache</span></strong><span data-preserver-spaces=\"true\">&nbsp;associated with&nbsp;</span><strong><span data-preserver-spaces=\"true\">scalp pain</span></strong><span data-preserver-spaces=\"true\">&nbsp;and&nbsp;</span><strong><span data-preserver-spaces=\"true\">jaw claudication</span></strong><span data-preserver-spaces=\"true\">, fever, fatigue, malaise, and weight loss. Half of the patients have temporal artery abnormalities such as enlargement, tenderness, nodular swelling, and loss of pulse of the temporal artery, either unilateral or bilateral. Gentle pressure on the scalp may elicit focal or generalized tenderness.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">GCA is very commonly associated with&nbsp;<strong>polymyalgia rheumatica</strong>&nbsp;characterized by morning stiffness and pain around the shoulders and hip.&nbsp;Mononeuropathies or peripheral neuropathies can also be seen.&nbsp;</span><span data-preserver-spaces=\"true\">A dreaded complication is&nbsp;</span><strong><span data-preserver-spaces=\"true\">ischemic optic neuropathy</span></strong><span data-preserver-spaces=\"true\">, which can lead to&nbsp;</span><strong><span data-preserver-spaces=\"true\">sudden blindness</span></strong><span data-preserver-spaces=\"true\">. Therefore</span><span data-preserver-spaces=\"true\">&nbsp;treatment with <strong>oral steroids</strong>&nbsp;is given first and then a <strong>temporal artery biopsy</strong>&nbsp;is done for confirming the diagnosis. As the diagnosis may be done clinically, treatment is started immediately rather than delaying it after the biopsy.</span></p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with urinary symptoms due to benign prostatic hyperplasia. Which of the following is used to manage the symptoms in the initial stage of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "TURP-Transurethral resection of prostate"
      },
      {
        "id": 2,
        "text": "Finasteride"
      },
      {
        "id": 3,
        "text": "Metoprolol"
      },
      {
        "id": 4,
        "text": "Observation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Finasteride</strong>&nbsp;is used for the management of urinary symptoms in the <strong>initial stages </strong>of<strong> Benign prostatic hyperplasia(BPH)</strong>.&nbsp;</p>\n<p>Finasteride is a <strong>5&alpha;-reductase enzyme inhibitor.&nbsp;</strong><strong>5&alpha;-reductase inhibitors</strong>&nbsp;inhibit the conversion of testosterone to DHT, the most active form of androgen. They are effective in the treatment of<strong>&nbsp;palpable enlarged prostate</strong>. These drugs result in a 25% shrinkage of the prostate gland.</p>\n<p><strong>BPH</strong> is characterized by <strong>symptoms</strong> of&nbsp;urinary <strong>frequency, urgency, nocturia, incontinence,</strong> slow urinary stream, straining to void, urinary intermittency (stream starting and stopping during micturition), or hesitancy, splitting of the voiding stream, and terminal dribbling. Physical examination reveals a <strong>smooth enlarged</strong> and <strong>non-tender</strong> <strong>prostate</strong>. Lab investigations reveal a <strong>normal PSA&nbsp;</strong>(prostate-specific antigen).&nbsp;Diagnosis is made based on clinical presentation and a lack of lab findings suggestive of malignancy (elevated PSA). A biopsy is rarely indicated.</p>\n<p><strong>Conservative treatment </strong>is recommended for men with<strong> mild symptoms, flow rate &gt;10ml/s, </strong>and<strong> good bladder emptying</strong> with residual urine &lt;100ml.&nbsp;</p>\n<p><strong>Medical management</strong> includes <strong>alpha-adrenergic blocking</strong> agents that inhibit the contraction of smooth muscle that is found in the prostate. Tamsulosin is an adrenoreceptor&nbsp;<strong>antagonist</strong>&nbsp;with receptor selectivity at&nbsp;<strong>&alpha;<sub>1A</sub>.</strong>&nbsp;It is used in the treatment of benign prostatic hyperplasia<strong>.</strong></p>\n<p><strong>5&alpha;-reductase inhibitors</strong> are used if &alpha;-adrenergic blockers are not available, or not tolerated by the patient.</p>\n<p><strong>Indications</strong> for <strong>surgical</strong> management:</p>\n<ul>\n<li>Lower urinary tract symptoms that are refractory to medical therapy</li>\n<li>Refractory urinary retention</li>\n<li>Recurrent urinary tract infection (UTI)</li>\n<li>Hematuria</li>\n<li>Stone formation</li>\n<li>Hydronephrosis, hydroureter with renal functional impairment</li>\n</ul>\n<p><strong>Surgical management</strong> involves the use of the transurethral resection of the prostate <strong>(TURP).&nbsp;</strong>Laser ablative techniques using holmium YAG can also be done.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to the emergency department with diarrhea, sweating, excessive lacrimation, and salivation. His pulse rate is 55/min and his plasma cholinesterase level was 50U/mL. Which of the following can be used to treat this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Neostigmine"
      },
      {
        "id": 2,
        "text": "Atropine"
      },
      {
        "id": 3,
        "text": "Epinephrine"
      },
      {
        "id": 4,
        "text": "Benztropine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The clinical features are suggestive of <strong>organophosphate poisoning</strong> and <strong>IV atropine</strong> is the treatment of choice.</p>\n<p>The organophosphates commonly used as pesticides are anticholinesterases.&nbsp;Toxicity occurs by excessive inhalation of vapors, ingestion, or percutaneous absorption. It inhibits the cholinesterase activity which results in an increase of acetylcholine, leading to cholinergic symptoms.</p>\n<p>The predominant initial signs are of muscarinic excess which includes:&nbsp;<strong>(DUMBBELSS)</strong></p>\n<ul>\n<li><strong>D</strong>iarrhea</li>\n<li><strong>U</strong>rination</li>\n<li><strong>M</strong>iosis</li>\n<li><strong>B</strong>ronchospasm</li>\n<li><strong>B</strong>radycardia</li>\n<li><strong>E</strong>mesis</li>\n<li><strong>L</strong>acrimation</li>\n<li><strong>S</strong>alivation</li>\n<li><strong>S</strong>weating</li>\n</ul>\n<p>This may be followed by cognitive disturbances, convulsions, and neuromuscular blockade.</p>\n<p>Treatment:</p>\n<ul>\n<li>Maintenance of vital signs particularly respiration</li>\n<li>Removal of clothing and washing of the skin</li>\n<li><strong>IV atropine 2- 5 mg. </strong>If&nbsp;IV administration is&nbsp;not possible, then <strong>2 mg IM</strong>&nbsp;every 5-10 minutes (till muscarinic symptoms disappear)</li>\n<li><strong>Pralidoxime,</strong> a cholinesterase reactivator can also be used for treatment</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Administering which of the following is the first step in the treatment of septic shock?",
    "choices": [
      {
        "id": 1,
        "text": "Vasopressors"
      },
      {
        "id": 2,
        "text": "Blood transfusion"
      },
      {
        "id": 3,
        "text": "Crystalloids"
      },
      {
        "id": 4,
        "text": "Inotropes"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Administering <strong>crystalloids</strong> is the first step in the treatment of septic shock.</p>\n<p>Management of septic shock starts with&nbsp;evaluation and initial resuscitation by<span class=\"headingEndMark\">&nbsp;s</span>ecuring the airway (if indicated) and correcting hypoxemia and establishing venous access for the&nbsp;<strong>early</strong>&nbsp;administration of fluids and antibiotics.</p>\n<p>Initial resuscitative therapy with aggressive administration of intravenous fluids (IVF), usually&nbsp;<strong>crystalloids</strong>&nbsp;are given at 30&nbsp;<span class=\"nowrap\">mL/kg</span>&nbsp;(actual body weight). Empirical antibiotic therapy started within the&nbsp;<strong>first hour.</strong></p>\n<p>Intravenous<strong> vasopressors</strong> are useful in patients who remain hypotensive despite adequate fluid resuscitation or who develop cardiogenic pulmonary oedema. Catecholamines are the vasopressors used most often, with <strong>norepinephrine</strong> being the first-line agent followed by epinephrine.&nbsp;<strong>Dobutamine therapy</strong> is recommended for patients with cardiac dysfunction.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with lesions as shown in the image below and later developed arthritis also.  What is the treatment of choice for a patient who presented with the following findings?",
    "choices": [
      {
        "id": 1,
        "text": "PUVA"
      },
      {
        "id": 2,
        "text": "Steroids"
      },
      {
        "id": 3,
        "text": "Methotrexate"
      },
      {
        "id": 4,
        "text": "Infliximab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient<strong>&nbsp;</strong>has<strong> right knee effusion</strong>,<strong> dactylitis</strong> of multiple digits, sharply demarcated red <strong>papulosquamous lesions</strong> on both knees all of which point towards a diagnosis of<strong> psoriatic arthritis.&nbsp;</strong></p>\n<p><strong>Methotrexate</strong>&nbsp;and <strong>apremilast</strong>&nbsp;are the <strong>first-line</strong> drugs for the treatment of moderate to severe psoriasis associated with psoriatic&nbsp;arthritis.</p>\n<p>Features of psoriatic arthritis are :</p>\n<ul>\n<li>Asymmetrical oligoarthritis</li>\n<li>associated with nail pitting/ onycholysis, or</li>\n<li>dactylitis, enthesitis&nbsp;</li>\n<li>Inflammation is prominent in the distal interphalangeal joints&nbsp;</li>\n<li>There is dactylitis with pronounced telescoping.</li>\n<li>Nail dystrophy (hyperkeratosis and onycholysis) affects each of the finger</li>\n<li>Axial involvement may occur</li>\n</ul>\n<p>Radiological features:</p>\n<ul>\n<li>Pencil-in-cup deformity of DIP joint</li>\n<li>marginal erosions with adjacent bony proliferation \"whiskering\"</li>\n<li>small joint ankylosis</li>\n<li>Ray distribution of lesions</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/c5954b56b29e4f088965beff6473650d.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "The drug of choice for the treatment of infantile spasms is ________",
    "choices": [
      {
        "id": 1,
        "text": "ACTH"
      },
      {
        "id": 2,
        "text": "Vigabatrin"
      },
      {
        "id": 3,
        "text": "Gabapentin"
      },
      {
        "id": 4,
        "text": "AVP"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The drug of choice for infantile spasms is <strong>ACTH.</strong></p>\n<p>Infantile spasm (IS) is a convulsive disease characterized by brief, symmetric axial muscle contraction (neck, trunk, and/or extremities). Their occurrence is almost entirely limited to infancy (the first year of life) and they are refractory to conventional anticonvulsant drugs.</p>\n<p><strong>West&rsquo;s syndrome</strong> refers to the classic triad of <strong>infantile spasms</strong>, <strong>characteristic interictal EEG showing hypsarrhythmia,</strong>&nbsp;and <strong>neurodevelopmental regression</strong>.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old girl presented with fever, lethargy and bruising. She was investigated thoroughly and was diagnosed to have acute lymphoid leukemia. Which of the following drugs can be used to treat her?",
    "choices": [
      {
        "id": 1,
        "text": "Imatinib"
      },
      {
        "id": 2,
        "text": "L-asparaginase"
      },
      {
        "id": 3,
        "text": "Tretinoin"
      },
      {
        "id": 4,
        "text": "Cladribine"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>L-asparaginase</strong> is used in the treatment of acute lymphoid leukaemia (<strong>ALL</strong>)<strong>.<br /></strong></p>\n<p>It is observed that some lymphoid malignancies are <strong>unable to synthesize asparagine</strong> on their own and must derive it from the bloodstream. L-asparaginase catalyses circulating L-asparagine, thereby <strong>inhibiting protein synthesis</strong> in the cancer cells.</p>\n<p><strong>Treatment of ALL</strong></p>\n<ul>\n<li><strong>Induction: </strong>4 weeks\n<ul>\n<li>L-asparaginase: single dose (side effects: pancreatitis, thrombosis)</li>\n<li>Vincristine: weekly (side effects: neuropathy, SIADH)</li>\n<li>Prednisolone</li>\n</ul>\n</li>\n<li><strong>Consolidation: </strong>CNS prophylaxis&nbsp;\n<ul>\n<li>Intrathecal methotrexate</li>\n</ul>\n</li>\n<li><strong>Maintenance:</strong>&nbsp;24-36 months\n<ul>\n<li>6-Mercaptopurine</li>\n<li>Methotrexate</li>\n</ul>\n</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<ul>\n<li>Imatinib is a tyrosine kinase inhibitor used to treat acute myeloid leukaemia with t(9;22) BCR-ABL fusion gene.</li>\n<li>Tretinoin is used in acute promyelocytic leukaemia with t(15;17) PML-RARA fusion gene.</li>\n<li>Cladribine is used in hairy cell leukaemia.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient, 36 hours after cataract surgery, presents with complaints of pain and visual disturbance. His eye is as shown below. What is the management of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Intravenous steroids"
      },
      {
        "id": 2,
        "text": "Intravenous antibiotics"
      },
      {
        "id": 3,
        "text": "Bandage and padding of the eye"
      },
      {
        "id": 4,
        "text": "Intravitreal antibiotics"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The image shows <strong>inflammation and hypopyon</strong>. These signs, along with the presentation of pain and visual disturbances acutely after cataract surgery, suggest that the patient has developed <strong>endophthalmitis</strong>. The management is to administer <strong>intravitreal antibiotics.</strong></p>\n<p>The majority of patients with postoperative endophthalmitis present with an acute onset and within seven days after surgery.</p>\n<p>Endophthalmitis is defined as&nbsp;<strong>an intraocular inflammation,</strong>&nbsp;which predominantly affects the&nbsp;<strong>inner spaces of the eye and their contents</strong>, i.e., the vitreous and/or the anterior chamber.</p>\n<p>The cardinal features of endophthalmitis are&nbsp;<strong>pain, swelling of the lid, and decrease in vision</strong>.</p>\n<p>The patient classically presents with inflammation of the eye, corneal edema, and a <strong>hypopyon</strong>, due to the&nbsp;pouring of exudates in the vitreous cavity, anterior chamber,&nbsp;and posterior chamber.</p>\n<p><strong>Intravitreal injection of antibiotics</strong> has become the primary method of administration in the treatment of endophthalmitis. Systemic antibiotics have <strong>no role</strong> in the management of endophthalmitis.&nbsp;</p>\n<p>Other treatments:</p>\n<ul>\n<li>Topical antibiotic</li>\n<li>Cycloplegia</li>\n<li>Oral steroids</li>\n<li>Pars plana vitrectomy</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/000aabe5926e4a5fa1fc02dcda754081.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A young male presents with reduced sleep, hyperactivity, and elevated mood. He has a history of depression from 4 years back. Which of the following drug should be used for long-term treatment of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Fluoxetine"
      },
      {
        "id": 2,
        "text": "Sodium valproate"
      },
      {
        "id": 3,
        "text": "Lithium"
      },
      {
        "id": 4,
        "text": "Carbamazepine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The patient's history of depression, with the current symptoms of mania suggests <strong>bipolar disorder.&nbsp;Lithium</strong> is a mood stabilizer that is used in the treatment of <strong>acute mania</strong> and <strong>bipolar disorder.</strong></p>\n<p>Lithium has a <strong>narrow therapeutic index</strong> and hence frequent monitoring of serum lithium concentration is necessary for patients who are on lithium therapy.</p>\n<p><strong>0.5-0.8 mEq/L</strong> is considered ideal for maintenance therapy in patients with <strong>bipolar disorder</strong> whereas a serum lithium concentration of <strong>0.8-1.2</strong> mEq/L is required in patients with episodes of <strong>acute mania.</strong></p>\n<p>Initially, lithium toxicity presents with symptoms such as nausea, vomiting, mild diarrhea, and fine tremors. Nervous system toxicity manifests as coarse tremors, ataxia, giddiness, ataxia, motor incoordination, nystagmus, confusion, slurred speech, and hyperreflexia.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with multiple nodulocystic lesions on the face. Which among the following is the drug of choice in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Steroids"
      },
      {
        "id": 2,
        "text": "Isotretinoin"
      },
      {
        "id": 3,
        "text": "Erythromycin"
      },
      {
        "id": 4,
        "text": "Tetracycline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This is a case of <strong>nodular acne</strong>. This comes under Grade IV acne.</p>\n<p><strong>Oral Isotretinoin</strong> is indicated for the treatment of <strong>severe acne</strong> (<strong>nodular</strong>, <strong>acne</strong> <strong>conglobata</strong>)</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old man with a history of schizophrenia was brought to the hospital with acute onset of neck stiffness. On examination, his upper body and neck are rigid. On review of his medications, it is seen that he was started on haloperidol 5 days back. Which of the following drugs\u200b can be used to treat his symptoms?",
    "choices": [
      {
        "id": 1,
        "text": "Benztropine"
      },
      {
        "id": 2,
        "text": "Amitryptiline"
      },
      {
        "id": 3,
        "text": "Rasagiline"
      },
      {
        "id": 4,
        "text": "Fluphenazine"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Based on the clinical presentation and the history of recent <strong>haloperidol</strong> usage the most probable diagnosis is <strong>acute dystonia.\u00a0\u00a0</strong>Treatment for this condition includes <strong>anticholinergics</strong>, such as <strong>benztropine</strong>, diphenhydramine, or trihexyphenidyl.</p>\n<p><strong>Classification of antipsychotic drugs:</strong></p>\n<table style=\"height: 591px;\" width=\"449\">\n<tbody>\n<tr>\n<td style=\"width: 130px;\">Generation</td>\n<td style=\"width: 75px;\">D2 receptor</td>\n<td style=\"width: 83px;\">5HT2A antagonism</td>\n<td style=\"width: 135px;\">Pathways</td>\n<td style=\"width: 116px;\">Drugs</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\"><strong>First</strong>\u00a0(Typical)</td>\n<td style=\"width: 75px;\"><strong>Preferred</strong></td>\n<td style=\"width: 83px;\">Low\u00a0</td>\n<td style=\"width: 135px;\"><strong>All of them</strong>- mesocortical, mesolimbic, nigrostriatal, tuberoinfundibular, and CTZ</td>\n<td style=\"width: 116px;\">\n<p>Haloperidol, Fluphenazine, Chlorpromazine,</p>\n<p>Thioridazine (least D2 blocking among typical, markedly anticholinergic)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 130px;\"><strong>Second</strong>\u00a0(Atypical)</td>\n<td style=\"width: 75px;\">Selective</td>\n<td style=\"width: 83px;\">\n<p><strong>High</strong>\u00a0</p>\n<p>\u00a0</p>\n</td>\n<td style=\"width: 135px;\"><strong>Mostly mesolimbic</strong>\u00a0and mesocortical</td>\n<td style=\"width: 116px;\">\n<p>Risperidone, Sertindole, Aripiprazole, Quetiapine, Clozapine</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Mini Test- 20 (Drug Of Choice)';
        const quizFilename = 'mini-test-20-drug-of-choice-d9767091.html';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>