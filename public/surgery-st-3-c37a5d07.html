<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery St 3 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2017 - 18
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "All of the following are increased in the metabolic response to surgery and trauma except",
    "choices": [
      {
        "id": 1,
        "text": "ACTH"
      },
      {
        "id": 2,
        "text": "Cortisol"
      },
      {
        "id": 3,
        "text": "IL-1"
      },
      {
        "id": 4,
        "text": "T3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The integrated response to surgical injury (first 24-48 hours)</p>\n<p>High yield points:</p>\n<ul>\n<li>Remember that almost every hormone/product increases except insulin, IGF-1, testosterone and T3.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/e3949e5f4da84fe29e3e4eca149ccb98x553x365.PNG"
    ]
  },
  {
    "text": "High mixed venous oxygen saturation is seen in which type of shock?",
    "choices": [
      {
        "id": 1,
        "text": "Cardiogenic shock"
      },
      {
        "id": 2,
        "text": "Hypovolemic shock"
      },
      {
        "id": 3,
        "text": "Septic shock"
      },
      {
        "id": 4,
        "text": "Obstructive shock"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>High mixed venous saturations are seen in <strong>septic shock.</strong></p>\n<p>Normal mixed venous oxygen saturation levels are <strong>50-70 %.</strong> Levels below 50% indicate inadequate oxygen delivery and increased oxygen extraction by the cells. This is consistent with hypovolemic or cardiogenic shock.</p>\n<p><strong>High</strong> mixed venous saturations (&gt;70%) are seen in <strong>sepsis and some other forms of distributive shock.</strong> In sepsis, there is disordered utilization of oxygen at the cellular level, and arterio-venous shunting of blood at the microscopic level. Thus less oxygen is presented to the cells, and those cells cannot utilize what little oxygen is presented. Thus, venous blood has a higher oxygen concentration than normal.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Wounds initially left open and later edges opposed by sutures, heals by",
    "choices": [
      {
        "id": 1,
        "text": "Primary intention"
      },
      {
        "id": 2,
        "text": "Secondary intention"
      },
      {
        "id": 3,
        "text": "Delayed primary intention"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Wounds initially left open and later edges opposed by sutures heals by delayed primary intention.</p>\n<p>Healing of a wound can occur in three ways:</p>\n<ol>\n<li>Healing by <strong>primay intention</strong>: Also called as healing by first intention. This occurs when there is apposition of the wound edges and minimal surrounding tissue trauma that causes least inflammation and leaves the best scar. Eg: clean surgical incision.</li>\n<li>Healing by <strong>seconday intention</strong>: Wounds are left open and allowed to heal by granulation, contraction and epithelialization.</li>\n<li>Healing by <strong>tertiary intention</strong> (also called <strong>delayed primary intention</strong>): Wound initially left open and edges later opposed when healing conditions are favorable.</li>\n</ol>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The size of the catheters shown in the picture below is measured in which of the following units",
    "choices": [
      {
        "id": 1,
        "text": "Centimeter"
      },
      {
        "id": 2,
        "text": "Millimeter"
      },
      {
        "id": 3,
        "text": "Gauge"
      },
      {
        "id": 4,
        "text": "French"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The size of urinary catheter is measured in French (Fr). French in foleys represents the <strong>external diameter, </strong>and<strong> </strong>1Fr is 0.3 mm in diameter.\u00a0</p>\n<p class=\"p1\">Fr. size = 3 x d, where d is the outer diameter in mm.\u00a0</p>\n<p class=\"p1\">A 3 Fr. catheter will have a circumference of approximately 3 mm and a diameter of 1 mm.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9626ba02a7b44b249a59c2e49757c780.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 57-year-old diabetic patient presented with a painful, malodorous, discoloured scrotum, as shown in the image. The patient was febrile and in extreme pain. Which of the following organisms is not likely to be implicated in this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Clostridium botulinum"
      },
      {
        "id": 2,
        "text": "Bacteroids"
      },
      {
        "id": 3,
        "text": "Coliforms"
      },
      {
        "id": 4,
        "text": "Peptostreptococci"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The clinical scenario is suggestive of <strong>Fournier's gangrene.\u00a0</strong>It is a type of\u00a0<strong>synergistic spreading gangrene.\u00a0</strong>Clostridia botulinum does not cause synergistic spreading gangrene. Clostridium perfringens and Clostridium septicum may be associated with the infection.\u00a0</p>\n<p><strong>Synergistic spreading gangrene</strong> is also called subdermal gangrene or necrotising fasciitis. \u00a0A mixed pattern of organisms is responsible: <strong>coliforms,</strong> staphylococci,<strong> bacteroids,</strong> anaerobic streptococci, and <strong>peptostreptococci</strong> have all been implicated, acting in synergy.</p>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll ng-star-inserted\">\n<p><strong>Fournier's gangrene\u00a0</strong>is a polymicrobial infection and a type of necrotising fasciitis of the perineum, external genitalia, and perianal region. <strong>Risk factors</strong>\u00a0include immunocompromised states such as\u00a0<strong>HIV, alcoholism, diabetes,\u00a0</strong>etc<strong>.\u00a0</strong></p>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>SGLT-2 inhibitors</strong>\u00a0like c</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">anagliflozin, dapagliflozin,\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">and\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">empagliflozin\u00a0can also cause\u00a0</span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\"><strong>Fournier's</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z h-lparen\"><strong>\u00a0g</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>angrene.</strong></span></p>\n<p>The infection may be precipitated by minor procedures in the perineal area, such as a bruise, scratch, urethral dilatation, injection of haemorrhoids, or opening of a periurethral abscess. The infection spreads along the <strong>Dartos, Scarpa's, and Colle's fascia</strong>.</p>\n<p>Clinical features include\u00a0<strong>pain</strong>\u00a0out of proportion to physical examination findings,\u00a0<strong>fever,</strong>\u00a0prostration, and pallor.\u00a0<strong>Cellulitis</strong>\u00a0spreads rapidly and may be associated with\u00a0eschars, necrosis, flaking skin, and crepitus.</p>\n<p>The\u00a0<strong>testis</strong>\u00a0is usually\u00a0<strong>not affected</strong>. It is a\u00a0<strong>surgical emergency</strong>.\u00a0<strong>Diagnosis</strong>\u00a0is majorly\u00a0<strong>clinical</strong>\u00a0and very rarely made by laboratory or imaging findings.\u00a0</p>\n<p>The sequence of events that lead to the development of gangrene are as follows:</p>\n<p>A mixed infection of the\u00a0<strong>aerobic</strong>\u00a0and<strong>\u00a0anaerobic bacteria\u00a0 \u2192</strong>\u00a0fulminating inflammation of\u00a0<strong>subcutaneous</strong> tissue \u2192,\u00a0<strong>obliterative arteritis</strong> of the arterioles that supply the scrotal skin\u00a0\u2192, gangrene. Thus, a black scrotum with crepitus is seen.</p>\n<p>The steps in the management of this condition are:</p>\n<ol>\n<li><strong>IV fluids</strong></li>\n<li><strong>IV antibiotics</strong></li>\n<li>Urgent surgical<strong>\u00a0excision followed</strong>\u00a0by<strong>\u00a0skin grafting</strong>\u00a0in later stages.<strong>\u00a0</strong></li>\n</ol>\n<p>When the infection has been controlled, a <strong>vacuum-assisted dressing</strong>\u00a0may be helpful. Skin grafting is essential for a patient surviving an acute episode.\u00a0Abdominal wall infections are known as Meleney's synergistic gangrene.</p>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ef7f6afedeae452685156b5f83f044c1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the second most common affected organ in Hydatid disease, after the liver",
    "choices": [
      {
        "id": 1,
        "text": "Spleen"
      },
      {
        "id": 2,
        "text": "Lung"
      },
      {
        "id": 3,
        "text": "Intestine"
      },
      {
        "id": 4,
        "text": "Kidney"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Lung</strong> is most commom organ to get <strong>affeced</strong> <strong>after liver</strong>.\u00a0</p>\n<p>As the parasite (Echinococcus granulosus) can colonize virtually every organ in the body, the condition can be protean in its presentation.</p>\n<p>The liver is the organ most often affected. The lung is the next most common.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An adolescent male with recurrent abdominal pain was diagnosed with tropical chronic pancreatitis. All of the following statements are true regarding this condition except:",
    "choices": [
      {
        "id": 1,
        "text": "Can be due to excess consumption of tapioca"
      },
      {
        "id": 2,
        "text": "Alcohol plays a role in the etiology"
      },
      {
        "id": 3,
        "text": "Dilatation of pancreatic ducts due to intraductal stones"
      },
      {
        "id": 4,
        "text": "High incidence of pancreatic cancer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>All of the above statements are true regarding tropical chronic pancreatitis except <strong>alcohol consumption</strong> plays a role in the etiology of tropical chronic pancreatitis.\u00a0</p>\n<p><strong>Tropical chronic pancreatitis</strong></p>\n<p>It usually affects the younger generation in poor socioeconomic strata.\u00a0<strong>Cassava </strong>(tapioca) ingestion as a staple diet is implicated as a causative factor due to derivatives of cyanide which require sulfur-containing amino acids for detoxification. These amino acids are not present in lower socioeconomic or malnourished individuals. <strong>Alcohol consumption</strong> is <strong>not</strong> one of the <strong>etiologies</strong> of tropical chronic pancreatitis.</p>\n<p>The pancreas appears firm and nodular macroscopically. The ducts are <strong>dilated.</strong> There is extensive periductal fibrosis associated with <strong>intraductal calcium carbonate stones</strong> of different sizes and shapes. These stones may resemble a staghorn. Microscopically,\u00a0intralobular, interlobular, and periductal fibrosis are the predominant feature.\u00a0</p>\n<p>There is a high incidence of <strong>pancreatic cancer</strong> in these patients. The patient usually has <strong>type 1 diabetes mellites</strong>\u00a0(fibrocalculous pancreatic diabetes).\u00a0</p>\n<p>Treatment:</p>\n<p>Medical management is the mainstay of treatment. It involves\u00a0exocrine pancreatic enzyme supplementation, insulin for diabetes mellitus, and the management of malnutrition. Surgery is indicated in intractable pain and in dilated ducts with stones. The procedure of choice is the removal of stones, with a <strong>side-to-side pancreaticojejunostomy</strong> to a Roux loop.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The following are advantages of minimal access surgery except",
    "choices": [
      {
        "id": 1,
        "text": "Decrease in wound size"
      },
      {
        "id": 2,
        "text": "Reduction in wound infection"
      },
      {
        "id": 3,
        "text": "Better tactile feedback"
      },
      {
        "id": 4,
        "text": "Improved vision"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>One of the major disadvantages of laparoscopic/ minimal access surgery is the <strong>loss of tactile feedback.</strong></p>\n<p>Advantages of minimal access surgery</p>\n<ul>\n<li>Decrease in wound size</li>\n<li>Reduction in wound infection, dehiscence, bleeding, herniation and nerve entrapment.</li>\n<li>Decrease in wound pain</li>\n<li>Improved mobility</li>\n<li>Decreased wound trauma</li>\n<li>Decreased heat loss</li>\n<li>Improved vision</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most common radio-lucent renal stone?",
    "choices": [
      {
        "id": 1,
        "text": "Calcium oxalate monohydrate"
      },
      {
        "id": 2,
        "text": "Calcium oxalate Dihydrate"
      },
      {
        "id": 3,
        "text": "Cystine"
      },
      {
        "id": 4,
        "text": "Uric acid"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Uric acid stones are hard, smooth and often multiple and multifaceted. Pure uric acid stones are radiolucent.</p>\n<p>High yield points:</p>\n<ul>\n<li>Remember the mnemonic <strong>TIXU </strong>for radio-lucent renal stones\n<ul>\n<li><strong>T</strong>riamterene stones</li>\n<li><strong>I</strong>ndinavir</li>\n<li><strong>X</strong>anthine</li>\n<li><strong>U</strong>ric acid</li>\n</ul>\n</li>\n<li>The most common renal stone is calcium oxalate stone</li>\n<li>90% of the renal stones are radio-opaque</li>\n<li>Spiral CT is the investigation of choice for renal stones</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Name the incision marked as 6",
    "choices": [
      {
        "id": 1,
        "text": "Kocher incision"
      },
      {
        "id": 2,
        "text": "Right paramedian"
      },
      {
        "id": 3,
        "text": "Left paramedian"
      },
      {
        "id": 4,
        "text": "Battle incision"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The various abdominal incisions you should remember are shown in the diagram below:</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7fadc8cd69ea45cf8ed3d5f170c867e2.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/bd6f547550e944d2818981be353392a9x600x315.JPEG"
    ]
  },
  {
    "text": "The given chest x-ray findings can be caused by all of the given conditions, except _______.",
    "choices": [
      {
        "id": 1,
        "text": "Duodenal ulcer perforation"
      },
      {
        "id": 2,
        "text": "Post-laparoscopic procedure"
      },
      {
        "id": 3,
        "text": "Peritoneal dialysis"
      },
      {
        "id": 4,
        "text": "Acute intestinal obstruction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The above chest x-ray is typical of&nbsp;<strong>pneumoperitoneum</strong>. <strong>Acute intestinal&nbsp;</strong><strong>obstruction&nbsp;</strong>does not cause pneumoperitoneum.&nbsp;</p>\n<p>The x-ray in the question shows free&nbsp;<strong>air beneath both the domes of the diaphragm</strong>. <strong>Perforation</strong>&nbsp;of bowel viscus in any part of the gastrointestinal tract can cause pneumoperitoneum. <strong>Laparoscopy-induced</strong> and <strong>peritoneal dialysis</strong> are the iatrogenic causes and are usually managed conservatively.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/3e6615499bb047c09a3ad82a1b315fed.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c7177ced5f934699b47fccdf6b8a0635x1279x1410.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/f1e757e5e4ad4cb9ad52817087b60c6ex1279x1662.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/66d755b07838450a89db5c238649d3fax1279x1642.JPEG"
    ]
  },
  {
    "text": "Which of the following has a score of two in modified Alvarado scoring system for acute appendicits",
    "choices": [
      {
        "id": 1,
        "text": "Right iliac fossa pain"
      },
      {
        "id": 2,
        "text": "Anorexia"
      },
      {
        "id": 3,
        "text": "Right iliac fossa tenderness"
      },
      {
        "id": 4,
        "text": "Left shift of neutrophils"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Right iliac fossa tenderness and&nbsp;WBC &gt; 10000 carry a score of 2 in&nbsp;Modified alvarado scoring. Rest all carry a score of 1.</p>\n<p>Modified alvarado scoring</p>\n<table style=\"height: 184px; width: 209.8px;\">\n<tbody>\n<tr style=\"height: 13px;\">\n<td style=\"width: 197.8px; height: 13px;\" colspan=\"2\">Symptoms</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Right ilia fossa pain</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Nausea/ vomiting</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Anorexia</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 197.8px; height: 13px;\" colspan=\"2\">Signs</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Right iliac fossa tenderness</td>\n<td style=\"width: 40.8px; height: 13px;\">2</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Fever</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Rebound tenderness</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 197.8px; height: 13px;\" colspan=\"2\">Tests</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">WBC&gt; 10000</td>\n<td style=\"width: 40.8px; height: 13px;\">2</td>\n</tr>\n<tr style=\"height: 13px;\">\n<td style=\"width: 157px; height: 13px;\">Left shift of neutrophils</td>\n<td style=\"width: 40.8px; height: 13px;\">1</td>\n</tr>\n</tbody>\n</table>\n<p>Score &gt;7: Surgery is recommended</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "According to the Forest classification for peptic ulcer bleed, and ulcer with black spot is which grade",
    "choices": [
      {
        "id": 1,
        "text": "Grade 1b"
      },
      {
        "id": 2,
        "text": "Grade 2b"
      },
      {
        "id": 3,
        "text": "Grade 2c"
      },
      {
        "id": 4,
        "text": "Grade 3"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Forrest classfication is used for endoscopic findings and rebleeding risks in peptic ulcer disease.</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/85f9d175d22b49feab31936e87c23c67x333x250.PNG"
    ]
  },
  {
    "text": "There is an ipsilateral solitary lymph node 6.5 cm in size, level 2 on the right side of the neck. What would be the N staging for this patient",
    "choices": [
      {
        "id": 1,
        "text": "N1"
      },
      {
        "id": 2,
        "text": "N2b"
      },
      {
        "id": 3,
        "text": "N2c"
      },
      {
        "id": 4,
        "text": "N3"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Any regional lymph node &gt; 6cm in head and neck cancer is N3.</p>\n<table class=\"table article-section__table\" border=\"1\">\n<tbody>\n<tr>\n<td class=\"right-bordered-cell left-aligned\" colspan=\"2\">\n<div class=\"page\" title=\"Page 785\">\n<div class=\"page\" title=\"Page 785\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Regional lymph nodes (N) in head and neck cancer</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">NX</td>\n<td class=\"left-aligned\">cannot be assessed</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N0</td>\n<td class=\"left-aligned\">No regional lymph node metastasis</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N1</td>\n<td class=\"left-aligned\">single ipsilateral, <span style=\"text-decoration: underline;\">&lt;</span>3 cm and <strong>ENE (</strong><strong>extranodal extension)\u2010</strong>negative</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N2</td>\n<td class=\"left-aligned\">\n<p>single ipsilateral lymph node,&nbsp;<span style=\"text-decoration: underline;\">&lt;</span>3 cm&nbsp; and ENE\u2010positive;&nbsp;<em>or&nbsp;</em>3-6 cm&nbsp; and ENE\u2010negative;</p>\n<p>or multiple ipsilateral lymph nodes, &lt;6 cm and ENE\u2010negative;&nbsp;</p>\n<p>&nbsp;metastasis in bilateral or contralateral lymph nodes, &lt;6 cm and ENE\u2010negative</p>\n</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N2a</td>\n<td class=\"left-aligned\">\n<p><strong>single ipsilateral or contralateral</strong> lymph node&nbsp;<strong><span style=\"text-decoration: underline;\">&lt;</span>3 cm</strong> and <strong>ENE\u2010positive</strong>;&nbsp;</p>\n<p><em>or</em>&nbsp;single ipsilateral lymph node 3-6 cm and ENE\u2010negative</p>\n</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N2b</td>\n<td class=\"left-aligned\">multiple ipsilateral lymph nodes, &lt;6 cm and ENE\u2010negative</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N2c</td>\n<td class=\"left-aligned\">bilateral or contralateral lymph nodes, &lt;6 cm and ENE\u2010negative</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\">N3</td>\n<td class=\"left-aligned\">\n<p>&gt;6 cm and ENE\u2010negative;</p>\n<p>or single ipsilateral lymph node &gt;3 cm and ENE\u2010positive;&nbsp;</p>\n<p><em>or</em>&nbsp;multiple ipsilateral, contralateral or bilateral lymph nodes, with ENE\u2010positive</p>\n</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\"><strong>N3a</strong></td>\n<td class=\"left-aligned\">&gt;6 cm and ENE\u2010negative</td>\n</tr>\n<tr>\n<td class=\"right-bordered-cell left-aligned\"><strong>N3b</strong></td>\n<td class=\"left-aligned\">\n<p><strong>single ipsilateral node &gt;3 cm</strong> and <strong>ENE\u2010positive</strong>;&nbsp;</p>\n<p><em>or&nbsp;</em>metastasis in multiple ipsilateral, contralateral or bilateral lymph nodes, with <strong>ENE\u2010positive</strong></p>\n</td>\n</tr>\n</tbody>\n</table>\n<p><br />Note:<br />ENE is as determined by physical examination (eg, invasion of skin, infiltration of musculature/dense tethering to adjacent structures, or dysfunction of a cranial nerve, the brachial plexus, the sympathetic trunk, or the phrenic nerve) and supported by radiological evidence, should be present to assign a status of ENE\u2010positive.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Urine mircoscopy is shown below. Identify the type of stone",
    "choices": [
      {
        "id": 1,
        "text": "Calcium oxalate"
      },
      {
        "id": 2,
        "text": "Cystine"
      },
      {
        "id": 3,
        "text": "Triple phosphate"
      },
      {
        "id": 4,
        "text": "Uric acid"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Urine microscopy shows enveloped shaped crystals suggestive of calcium oxalate stones.</p>\n<p><strong>High yield points</strong></p>\n<ul>\n<li>Calcium oxalate dihydrate: enveloped/ bipyramidal</li>\n<li>Calcium oxalate monohydrate: dumbbell/ hourglass</li>\n<li>Brushite: needle shaped</li>\n<li>Struvite(Magnesium ammonium phosphate): Rectangular,coffin lid</li>\n<li>Uric acid: multifaceted, irregular plates/rosettes</li>\n<li>Cystine: hexagonal/benzene ring</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/230b9a8275fa4e2c9ab778ece9945728.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Brain tumors will usually present with the following symptoms except",
    "choices": [
      {
        "id": 1,
        "text": "Projectile vomiting"
      },
      {
        "id": 2,
        "text": "Seizures"
      },
      {
        "id": 3,
        "text": "Focal deficit"
      },
      {
        "id": 4,
        "text": "Difficulty in speech"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Difficulty in speech is not an usual presentation of brain tumours.</p>\n<p>Most brain tumors will present with one or more features related to the follwing triad:</p>\n<ul>\n<li>Raised ICP (projectile vomiting, headache)</li>\n<li>Seizures</li>\n<li>Focal deficit</li>\n</ul>\n<p>High yield points:</p>\n<ul>\n<li>Most common brain tumor : Metastasis</li>\n<li>Most common primary brain tumor in adults: Malignant Astrocytoma (Glioblastoma multiforme)</li>\n<li>Most common benign brain tumor in children : Pilocytic astrocytoma</li>\n<li>Most common malignant brain tumor in children: Medulloblastoma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which terminal branch of the facial nerve need not be repaired with a cable graft if accidently injured during a parotidectomy?",
    "choices": [
      {
        "id": 1,
        "text": "Temporal"
      },
      {
        "id": 2,
        "text": "Zygomatic"
      },
      {
        "id": 3,
        "text": "Buccal"
      },
      {
        "id": 4,
        "text": "Cervical"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>With the exception of the buccal branch, the transected facial nerve branch should be repaired immediately with a cable graft, harvested from the great auricular nerve.</p>\n<p>The upper division of the facial nerve is frequently tortuous in its course and can be damaged unless great care is taken during perineural dissection.</p>\n<p>It is not necessary to dissect all branches of the facial nerve competely, as adequate tumor cleareance can be achieved with a more conservative resection of the superficial lobe.</p>\n<p>With the exception of the buccal branch, the transected nerve should be repaired immediately with a cable graft, harvested from the great auricular nerve.</p>\n<ul>\n<li>Tragal pointer (of Conley): facial nerve lies 1cm deep and inferior to its tip.</li>\n<li>Superior to the posterior belly of the digastric muscle</li>\n<li>Tracing the nerve backwards from its terminal branches</li>\n<li>Using nerve stimulator</li>\n</ul>\n<p>Note:Tragal pointer: As the tragal cartilage is dissected free from the parotid fascia, it takaes&nbsp; pointed shape in its medial aspect, which is called the &ldquo;pointer&rdquo;.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5b5fd4d2d1e74fd287de92b1b736fa20x734x437.JPEG"
    ]
  },
  {
    "text": "Inferior parathyroid is derived from the",
    "choices": [
      {
        "id": 1,
        "text": "1st pharyngeal pouch"
      },
      {
        "id": 2,
        "text": "2nd pharyngeal pouch"
      },
      {
        "id": 3,
        "text": "3rd pharyngeal pouch"
      },
      {
        "id": 4,
        "text": "4th pharyngeal pouch"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>It is very important to remember that even though the <strong>inferior parathyroid</strong> lies at a location below, it is derived from the 3<sup>rd</sup> pharyngeal pouch, whereas the <strong>superior parathyroid</strong> which lies above is derived from the<strong> 4<sup>th</sup> pharyngeal pouch</strong>.</p>\n<ul>\n<li>One must not get confused. This is so because the thymus also develops from the 3<sup>rd</sup> pouch and it takes the associated inferior parathyroid gland with it.</li>\n</ul>\n<p>High yield points:</p>\n<ul>\n<li><strong>Parafollicular C</strong> cells are derived from the neural crest and this is the site of origin of medullary carcinoma of thyroid.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Name the sign that is being elicited here",
    "choices": [
      {
        "id": 1,
        "text": "Troisier sign"
      },
      {
        "id": 2,
        "text": "Trousseau sign"
      },
      {
        "id": 3,
        "text": "Chvostek\u2019s sign"
      },
      {
        "id": 4,
        "text": "Lid lag sign"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Percussion of the facial nerve just below the zygoma causes contraction of the ipsilateral facial muscles (Chvostek&rsquo; sign), seen in hypocalcemic tetany.</p>\n<p>Carpopedal spasm can be induced by occlusion of the arm with a blood presssure cuff for 3 min, raised above the systolic pressure (Trousseau&rsquo;s sign).&nbsp;</p>\n<p>High yeild points:</p>\n<ul>\n<li><strong>Troisier's sign</strong>: Enlargement of the left supraclavicular lymph node</li>\n<li><strong>Trousseau's syndrome&nbsp;</strong>is a medical sign involving episodes of vessel inflammation due to blood clot (thrombophlebitis) which are recurrent or appearing in different locations over time (thrombophlebitis migrans or migratory thrombophlebitis)<strong>&nbsp;</strong>in GI malignancy: Migratory thrombophlebitis, classically described for pancreatic malignancy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/74b09d3f79904b2f904cc97f7bd775d5.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Thrombophlebitis of the superficial veins of the breast is called as",
    "choices": [
      {
        "id": 1,
        "text": "Peau de orange"
      },
      {
        "id": 2,
        "text": "Mondor\u2019s disease"
      },
      {
        "id": 3,
        "text": "Cystosarcoma phylloides"
      },
      {
        "id": 4,
        "text": "Breast abcess"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Mondor\u2019s disease</strong> is thrombophlebits of the superficial veins of the breast and anterior chest wall, although it has also been encounterd in the arm.</p>\n<p>Pathognomic feature is a thrombosed subcutaneous cord, usually attached to the skin.</p>\n<p>The only treatment required is restricted arm movements, condition subsides within a few months.</p>\n<p>High yield points:</p>\n<p><strong>Peau d\u2019 orange</strong> : French for \u2018orange skin\u2019, is seen when there is invasion of dermal lymphatics with tumor cells, seen in carcinoma. It makes it stage <strong>T4b.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Bipedicle flap is used in reconstruction of",
    "choices": [
      {
        "id": 1,
        "text": "Nose"
      },
      {
        "id": 2,
        "text": "Eyelid"
      },
      {
        "id": 3,
        "text": "Cheek"
      },
      {
        "id": 4,
        "text": "Upper lip"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Bipedicle flap</strong> is a \u2018bucket-handle\u2019 flap supplied from both ends. It is very useful to rebuild the<strong> lower eylid</strong>.</p>\n<p>High yield points:</p>\n<ul>\n<li>Remember that a bipedicle flap is used for the eyelid whereas a <strong>bilobed flap</strong> is used for the <strong>nose</strong>.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/9bfc15edcb2242829f540623ebbaa580x404x169.PNG"
    ]
  },
  {
    "text": "A patient who underwent total thyroidectomy presents with bleeding at the wound site 8 hours after the surgery. This is called",
    "choices": [
      {
        "id": 1,
        "text": "Primary hemorrhage"
      },
      {
        "id": 2,
        "text": "Secondary hemorrhage"
      },
      {
        "id": 3,
        "text": "Reactionary hemorrhage"
      },
      {
        "id": 4,
        "text": "None of the above"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Reactionary hemorrhage</strong> is delayed hemorrhage (within 24 hours) and is due to dislodgement of clot by resuscitation, normalisation of blood pressure and vasodilatation. It may also be due to technical failure, such as slippage of ligature.</p>\n<p><strong>Primary hemorrhage</strong> occurs immediately, due to an injury (or surgery).</p>\n<p><strong>Secondary hemorrhage</strong> is due to sloughing of the wall of a vessel. It usually occurs 7-14 days after injury and is precipitated by factors such as infection, pressure necrosis (eg drain) or malignancy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Damage control surgery for blunt trauma abdomen includes all of the following except",
    "choices": [
      {
        "id": 1,
        "text": "Arrest hemorrhage"
      },
      {
        "id": 2,
        "text": "Control sepsis"
      },
      {
        "id": 3,
        "text": "Prevent contamination"
      },
      {
        "id": 4,
        "text": "Resection anastomosis of ischemic bowel"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Resection anastomosis of ischemic bowel is not a part of\u00a0Damage control surgery.</p>\n<p><strong>Damage control surgery</strong> is a staged process which is used when there is an unstable patient whose disturbed physiology hampers definitive management.</p>\n<p>Initial focus is hemorrhage control, followed by control and limitation of contamination.</p>\n<p>This can be achieved by simple ligation of vessels, shunting of major arteries and veins, drainage, temporary stapling off of bowel, and therapeutic packing.</p>\n<p>Then the abdomen is closed temporarily using a plastic sheet with suction.</p>\n<p>Patient is shifted to the ICU and further resuscitation is carried out.</p>\n<p>Once the patient is stabilized he is taken back to the OT and definitive repair (eg; suturing of liver laceration) is done.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which day of wound healing is macrophage peak usually seen?",
    "choices": [
      {
        "id": 1,
        "text": "Day 1"
      },
      {
        "id": 2,
        "text": "Day 3"
      },
      {
        "id": 3,
        "text": "Day 5"
      },
      {
        "id": 4,
        "text": "Day 7"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A <strong>macrophage peak</strong> is usually seen on<strong> day 3</strong> of wound healing. Macrophages <strong>achieve significant numbers</strong> in the wound<strong> by 48 to 96 hours</strong> post-injury and remain present until wound healing is complete.</p>\n<p>Wound healing has 3 phases. The <strong>first phase</strong> is marked by <strong>hemostasis and inflammation</strong>. <strong>Polymorphonuclear leukocytes (PMN)s</strong>&nbsp;are the <strong>first infiltrating cells</strong> to enter the wound site,&nbsp;<strong>peaking at 24 to 48 hours</strong>. The second population of inflammatory cells that invade the wound are <strong>macrophages </strong>which<strong> peak in 48-96 hours</strong>. <strong>T lymphocytes </strong>routinely<strong> invade</strong> the wound and<strong> peak at </strong>about<strong> 1-week postinjury</strong>&nbsp;and truly bridge the transition from the inflammatory to the proliferative phase of healing.</p>\n<p>The <strong>second phase</strong> of <strong>proliferation</strong> roughly&nbsp;spans days <strong>4-12 days.&nbsp;Fibroblasts</strong> and <strong>endothelial cells</strong> are the last cell populations to <strong>infiltrate</strong> the healing wound. The strongest <strong>chemotactic</strong> factor <strong>for fibroblasts</strong> is <strong>PDGF </strong>(Platelet-derived growth factor).</p>\n<p>The <strong>third phase</strong> is characterized by the <strong>maturation and remodeling</strong> of the <strong>scar</strong> which involves <strong>reorganization </strong>of<strong> previously synthesized collagen</strong>.</p>\n<p>The phases of wound healing and the levels of infiltrating cells are represented in the graph below.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d43467f8353a4512921d7d56c8a5a9afx1280x2562.JPEG"
    ]
  },
  {
    "text": "Which of the following describes degloving injury",
    "choices": [
      {
        "id": 1,
        "text": "Skin is stripped off the subcutaneous tissue"
      },
      {
        "id": 2,
        "text": "Skin and subcutaneos fat are stripped off the underlying fascia"
      },
      {
        "id": 3,
        "text": "Skin, subcutaneous fat and fascia stripped off underlying muscle"
      },
      {
        "id": 4,
        "text": "Muscle also is stripped off leaving exposed bone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Degloving injury</strong> occurs when the skin and subcutaneos fat are stripped by avulsion from its <strong>underlying fascia</strong>, leaving the neurovascular structures, tendon or bone exposed.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/24678e7465d04daf815ba7229b54f545x101x135.PNG"
    ]
  },
  {
    "text": "What is the pressure limit for doing fasciotomy in compartment syndrome",
    "choices": [
      {
        "id": 1,
        "text": "20 mm Hg"
      },
      {
        "id": 2,
        "text": "30 mm Hg"
      },
      {
        "id": 3,
        "text": "40 mm Hg"
      },
      {
        "id": 4,
        "text": "50 mm Hg"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>A pressure of 30mmHg or more is an indication for fasciotomy in case of compartment syndrome.</p>\n<p>Compartment pressures can be measured using a pressure monitor and a catheter placed in the muscle compartment.</p>\n<p>If pressures are constantly greater than <strong>30 mm Hg</strong> or if clinical signs (<strong>pain on passive extension</strong>, severe pain, distal sensory disturbance, absent pulses) are present then fasciotomy should be performed.</p>\n<p>High yield points:</p>\n<ul>\n<li>There are <strong>4 compartments</strong> in the leg (anterior, lateral, superficial and deep posterior).</li>\n<li>Most common compartment involved in leg is the <strong>anterior compartment</strong>.</li>\n<li>Loss of distal pulse is a late sign.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What kind of suturing is depicted below",
    "choices": [
      {
        "id": 1,
        "text": "Continous sutures"
      },
      {
        "id": 2,
        "text": "Interrupted sutures"
      },
      {
        "id": 3,
        "text": "Mattress sutures"
      },
      {
        "id": 4,
        "text": "Subcuticular sutures"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image depicts continous sutures.</p>\n<p>There are four frequently used suture techniques</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/b0122d924eac4e0ca8fee2cd815268cd.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/39c1d3e746df47188855975dc0fae789x264x190.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3fb6255ebdf048a4963468da1f8b2c8fx300x149.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d49c4f0988a94b6bb17ec1fc4c4ecd4dx312x277.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/5beb3ce169b54a83aeb4d086df55e0a5x348x146.JPEG"
    ]
  },
  {
    "text": "Ligasure can seal vessels upto",
    "choices": [
      {
        "id": 1,
        "text": "3mm in diameter"
      },
      {
        "id": 2,
        "text": "4mm in diameter"
      },
      {
        "id": 3,
        "text": "7mm in diamter"
      },
      {
        "id": 4,
        "text": "10mm in diameter"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p class=\"ng-binding\">Ligasure can seal vessels upto 7mm in diameter, with an average seal time of 2-4 sec, as well as pedicles, tissue bundles and lymphatics.</p>\n</div>\n</div>\n<ul>\n<li><strong>Ligasure</strong> is a vessel sealing system that is used in both open and laparoscopic surgery.</li>\n<li>It actually fuses the vessel walls to create a permanent seal and is in wide use in gynecology, colorectal surgery, urology.</li>\n<li>It uses a new bipolar technology that uses the body&rsquo;s collagen and elastin to both seal and divide.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/2b56cc9127dd469aaae41bd0abb8c5b1x210x151.PNG"
    ]
  },
  {
    "text": "NOTES stands for",
    "choices": [
      {
        "id": 1,
        "text": "Natural orifice transumbilical endoscopic surgery"
      },
      {
        "id": 2,
        "text": "Natural orifice transluminal elective surgery"
      },
      {
        "id": 3,
        "text": "Natural orifice transluminal endoscopic surgery"
      },
      {
        "id": 4,
        "text": "Natural orifice transluminal endoscopic scintigraphy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Natural orifice transluminal endoscopic surgery (NOTES)</strong></p>\n<p><strong>NOTES</strong> is a technique where surgeons enter the peritoneal cavity via endoscopic puncture of a hollow viscus.</p>\n<p>Transvaginal NOTES cholecystectomies have been performed in humans successfully.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the incidence of Hirschsprung\u2019s disease?",
    "choices": [
      {
        "id": 1,
        "text": "1: 1000"
      },
      {
        "id": 2,
        "text": "1: 3000"
      },
      {
        "id": 3,
        "text": "1: 5000"
      },
      {
        "id": 4,
        "text": "1: 10000"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Incidence of Hirschsprung&rsquo;s disease is&nbsp;1:5000.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/5cf2e085048e477caf7f1f2aaf20b52dx348x286.PNG"
    ]
  },
  {
    "text": "Nephrogenic systemic fibrosis is caused by",
    "choices": [
      {
        "id": 1,
        "text": "Iodine contrast used in CT"
      },
      {
        "id": 2,
        "text": "Gadolinium contrast used in MRI"
      },
      {
        "id": 3,
        "text": "Chronic glomerulonephritis"
      },
      {
        "id": 4,
        "text": "Systemic sclerosis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Gadolinium containing contrast agents are usualy responsible for nephrogenic systemic fibrosis.</p>\n<ul>\n<li>Gadolinium containing contrast agents are used in MRI.</li>\n<li>They can be nephrotoxic in patients with pre-existing renal failure.</li>\n<li>It causes nephrogenic systemic fibrosis, which is a life-threatening condition whereby connective tissue forms in the skin causing it to become coarse and hard.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are absolute contraindications for MRI except",
    "choices": [
      {
        "id": 1,
        "text": "Ocular metallic foreign body"
      },
      {
        "id": 2,
        "text": "Pacemaker"
      },
      {
        "id": 3,
        "text": "Pregnancy"
      },
      {
        "id": 4,
        "text": "Cranial aneurysm clips"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pregnancy is a relative contraindication for MRI</strong></p>\n<p><strong>Note :&nbsp;</strong></p>\n<p><strong>Absolute contraindications&nbsp;</strong></p>\n<ul>\n<li class=\"p1\">Ocular metallic foreign bodies</li>\n<li>Pacemakers</li>\n<li>Cochlear implants</li>\n<li>Cranial aneurysm clips</li>\n</ul>\n<p>&nbsp;</p>\n<p class=\"p1\"><strong>Relative contraindications</strong></p>\n<ul>\n<li>First trimester of pregnancy</li>\n<li>Claustrophobia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the investigation shown below",
    "choices": [
      {
        "id": 1,
        "text": "MRCP"
      },
      {
        "id": 2,
        "text": "EUS"
      },
      {
        "id": 3,
        "text": "ERCP"
      },
      {
        "id": 4,
        "text": "PTC"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The above image depicts ERCP.</p>\n<p><strong>ERCP</strong> stands for Endoscopic Retrograde CholangioPancreaticography.</p>\n<p>It involves the use of a side veiwing endoscope which is passed through the pylorus of stomach into the second part of duodenum to visualise the papilla.</p>\n<p>This is then cannulated, and dye is injected into the pancreatic or bile duct to visualise the pancreatic or biliary tree.</p>\n<p>It can be therapeutic or diagnostic.</p>\n<p>High yield points:</p>\n<ul>\n<li><strong>MRCP</strong> stands for Magnetic resonance\u00a0CholangioPancreaticography.</li>\n<li>It is a non invasive procedure using MRI</li>\n<li>Therapeutic procedures cannot be done.</li>\n<li>To know whether the given investigation is ERCP or MRCP look for the endoscope. If endoscope is visible in the picture it is always an ERCP, whereas in MRCP there will be no endoscope.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/97d2ceec138e4621a7cb2eb3edb977d2.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "What is the ideal time to stop hormone replacement therapy(HRT) before surgery?",
    "choices": [
      {
        "id": 1,
        "text": "One day prior"
      },
      {
        "id": 2,
        "text": "One week prior"
      },
      {
        "id": 3,
        "text": "Four weeks prior"
      },
      {
        "id": 4,
        "text": "Need not stop"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Hormone replacement therapy(HRT) and oestrogen-containing oral contraceptives&nbsp;should be stopped <strong>four weeks</strong> prior to surgery. The progesterone-only contraceptive pill can be continued.</p>\n<p>Note:</p>\n<ul>\n<li>Latest guidelines say aspirin can be continued throughout.</li>\n<li><strong>Clopidogrel</strong> should be stopped 5 days before surgery.</li>\n<li><strong>Anticonvulsant</strong> and <strong>anti-parkinson</strong> medication is continued.</li>\n<li><strong>Lithium</strong> stopped 24 hours prior.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Laminar air flow in the operation theatre can provide how many air changes per hour",
    "choices": [
      {
        "id": 1,
        "text": "10-20"
      },
      {
        "id": 2,
        "text": "20-40"
      },
      {
        "id": 3,
        "text": "100-300"
      },
      {
        "id": 4,
        "text": "400-500"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Laminar airflow can provide&nbsp;<strong>100-300</strong> air changes per hour and is used in some centres for surgery involving implants, eg: joint replacements, to avoid airborne infection.</p>\n<p>High yield points</p>\n<ul>\n<li>The minimum air changes that are required in every OT is <strong>15-25/h.</strong></li>\n<li>Ideal working temp in OT is <strong>18-25 degree</strong> Celcius with a humidity of 50-60%.</li>\n<li>OT is kept in <strong>positive pressure</strong> relative to surroundings.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Significant resection of the ileum can lead to the following except",
    "choices": [
      {
        "id": 1,
        "text": "Diarrhea"
      },
      {
        "id": 2,
        "text": "Increased uric acid stone in kidney"
      },
      {
        "id": 3,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 4,
        "text": "Peptic ulcer"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Increased uric acid stone in kidney is a <strong>not</strong> a complication of significant resection of the ileum.</p>\n<p>Significant resection of the ileum can lead to <strong>short bowel syndrome</strong> which can have the following complications.</p>\n<ul>\n<li>Peptic ulcer (gastrin hypersecretion:because the negative feedback mechanism for inhibiting gastrin secretion and reducing gastric acid production has been removed)</li>\n<li>Cholelithiasis (interruption of the enterohepatic cycle of bile salts)</li>\n<li>Hyperoxaluria and oxalate stones as a result of increased absorption of oxalate in the colon</li>\n<li>Some patients may develop a syndrome of slurred speech, ataxia and altered affect. (fermentation of malabsorbed carbohydrates in the colon to D-lactate and absorption of this metabolite)</li>\n</ul>\n<p>\u00a0</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not true regarding the Enhanced recovery after surgery (ERAS) protocol?",
    "choices": [
      {
        "id": 1,
        "text": "Early planned physiotherapy and mobilization"
      },
      {
        "id": 2,
        "text": "It can be used after colorectal surgery"
      },
      {
        "id": 3,
        "text": "Waiting for one week to start oral feeding"
      },
      {
        "id": 4,
        "text": "Discharge planning is started before the patient is even admitted to hospital"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Waiting for one week to start oral feeding is not a part of the ERAS protocol.</p>\n<p><strong>Enhanced recovery</strong> <strong>after surgery</strong> (ERAS) is an approach designed to speed the clinical recovery of the patient and reduce the cost and length of stay in the patient.</p>\n<p>It is achieved by optimizing the patient's health before surgery and then delivering evidence-based best care in the perioperative period. It includes:</p>\n<ul>\n<li>Early planned physiotherapy and <strong>mobilisation</strong></li>\n<li>Early <strong>oral hydration</strong> and <strong>nourishment</strong></li>\n<li>Adequate <strong>pain control</strong> using regular paracetamol, NSAIDs, epidural and nerve blocks</li>\n<li>Discharge planning is started before the patient is admitted to hospital and involves support from stoma care nurses, physiotherapist.</li>\n<li>Early removal of ryles tube and <strong>early feeding</strong> techniques</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient has been admitted to the ward for hernia surgery at 9am, he undergoes surgery at 12pm and is discharged by 5pm on the same day. This is called as",
    "choices": [
      {
        "id": 1,
        "text": "Day surgery"
      },
      {
        "id": 2,
        "text": "Procedure room surgery"
      },
      {
        "id": 3,
        "text": "Short-stay surgery"
      },
      {
        "id": 4,
        "text": "Outpatient surgery"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>A <strong>day or same-day surgery</strong> is defined as one in which patient is admitted and dischared within the 12-hour day.</li>\n<li><strong>Outpatient surgery</strong>: not admitted to a ward facility.</li>\n<li><strong>Procedure room surgery</strong>: surgery not requiring full sterile theatre facilities.</li>\n<li><strong>Short stay surgery</strong>: admission of up to 72 hours.</li>\n<li><strong>Overnight stay</strong>: 23-hr admission with early morning discharge.</li>\n</ul>\n<p>So in this question there is a surgery (hernia surgery), which requires admission and full sterile theatre facilities, operated within the 12 hour day period. Hence it will be a day surgery.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are considered adjuncts to primary survery in trauma except",
    "choices": [
      {
        "id": 1,
        "text": "Diagnostic peritoneal lavage"
      },
      {
        "id": 2,
        "text": "ECG"
      },
      {
        "id": 3,
        "text": "Radiograph of cervical spine"
      },
      {
        "id": 4,
        "text": "CT scan"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>CT scan is not an\u00a0adjunct to primary survery in trauma. CT scans of the head, chest, abdomen and spine are diagnostic tests performed during the secondary survey to identify specific injuries.</p>\n<p>Steps in ATLS philosophy</p>\n<ul>\n<li><strong>Primary survey</strong> with simultaneous resuscitation: identify and treat what is killing the patient.</li>\n<li><strong>Secondary survery</strong>: proceed to identify all other injuries</li>\n<li><strong>Definitive care</strong>: develop a definitive management plan</li>\n</ul>\n<p>Adjuncts to <strong>primary survey</strong></p>\n<ul>\n<li>Blood tests: full blood counts, urea and electrolytes, clotting screen, glucose, toxicology, cross match</li>\n<li><strong>ECG,</strong> pulse oximetry, ABG</li>\n<li>Two wide bore cannulae for IV fluids</li>\n<li>Urinary and gastric catheters</li>\n<li>Radiographs of the cervical spine, chest and pelvis</li>\n<li>FAST, extended focused assessment with sonography for trauma (eFAST) and <strong>DPL</strong> (Diagnostic peritoneal lavage).</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of brain herniation marked as 1.",
    "choices": [
      {
        "id": 1,
        "text": "Uncal herniation"
      },
      {
        "id": 2,
        "text": "Central herniation"
      },
      {
        "id": 3,
        "text": "Subfalcine herniation"
      },
      {
        "id": 4,
        "text": "Tonsillar herniation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ol>\n<li><strong>Subfalcine herniation</strong>: herniation of the cingulate gyrus under the falx cerebri</li>\n<li>Herniation with midline shift</li>\n<li><strong>Uncal herniation</strong> (uncus is part of temporal lobe)-can compress the ipsilateral third nerve</li>\n<li><strong>Central herniation</strong></li>\n<li><strong>Tonsillar herniation</strong> (part of the cerebellum)</li>\n</ol>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/9f62669b73a5490fbe2be496d7d45d5a.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/f535d454e2a14725afe7c52405208489x290x278.PNG"
    ]
  },
  {
    "text": "Successful antibiotic penetration of burn eschar can be achieved with",
    "choices": [
      {
        "id": 1,
        "text": "Mafenide acetate"
      },
      {
        "id": 2,
        "text": "Silver nitrate"
      },
      {
        "id": 3,
        "text": "Silver sulphadiazine"
      },
      {
        "id": 4,
        "text": "Neomycin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<ul>\n<li>Mafenide acetete is the antibiotic agent that penetrates burn eschar to reach the interface with the patients viable tissue.</li>\n<li>It has the disadvantage that it is quite painful.</li>\n<li>It is also a carbonic anhydrase inhibitor and can result in<strong> metabolic acidosis</strong>.</li>\n</ul>\n<p>High yield points:</p>\n<ul>\n<li><strong>Silver sulphadiazine</strong>: most common agent used, good activity against pseudomonas.</li>\n<li><strong>Silver nitrate</strong> (0.5%): highly effective against pseudomonas, can cause staining of all the furniture surrounding the patient.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the type of flap:",
    "choices": [
      {
        "id": 1,
        "text": "Free flap"
      },
      {
        "id": 2,
        "text": "Axial flap"
      },
      {
        "id": 3,
        "text": "Pedicled flap"
      },
      {
        "id": 4,
        "text": "Random flap"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>This is a type of pedicled or islanded flap. Flaps are tissues that are transferred with a blood supply.\u00a0<strong>Pedicled/islanded flaps</strong>: axial blood supply can be swung round on a stalk or even fully islanded so that the business end of the skin being transferred can have the pedicle buried.</p>\n<p>Other types of flaps include:</p>\n<ul>\n<li><strong>Random flaps</strong>: three sides of a rectangle are used, length to breadth ratio not more than 1.5:1</li>\n<li><strong>Axial flap</strong>: much longer flaps can be used, based on known blood vessels</li>\n<li><strong>Free flaps</strong>: blood supply has been isolated, disconnected and then reconnected using microsurgery at the new site</li>\n<li><strong>Composite flap</strong>: various tissues are transferred together, often skin with bone or muscle (osseocutaneous or myocutaneous)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/60790ad1cefc482983a47169aeaac84e.PNG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/bb608fa7838d403eafe0ccb7444bb1efx553x245.PNG"
    ]
  },
  {
    "text": "All of the following are risk factors for malignant melanoma except",
    "choices": [
      {
        "id": 1,
        "text": "Dysplastic naevi"
      },
      {
        "id": 2,
        "text": "Previous melanoma"
      },
      {
        "id": 3,
        "text": "Caf\u00e9\u2019 au lait spots"
      },
      {
        "id": 4,
        "text": "Xeroderma pigmentosum"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Caf&eacute;&rsquo; au lait spots</strong> are seen in <strong>neurofibromatosis</strong> and not in melanoma</p>\n<p>Risk factors for developing <strong>melanoma</strong> are</p>\n<ul>\n<li>Xeroderma pigmentosum</li>\n<li>Past medical or family history of melanoma</li>\n<li>Previous melanoma</li>\n<li>High total number of naevi</li>\n<li>Dysplastic naevi</li>\n<li>Red hair</li>\n<li>Tendency to freckle</li>\n<li>Immunocompromised patients ( HIV, Hodgkin&rsquo;s)</li>\n<li>Giant congenital pigmented neavus</li>\n<li>History of sunburn</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Unilateral Cleft lip repair is commonly performed at what age",
    "choices": [
      {
        "id": 1,
        "text": "At birth"
      },
      {
        "id": 2,
        "text": "3-6 months"
      },
      {
        "id": 3,
        "text": "9-12 months"
      },
      {
        "id": 4,
        "text": "18th month"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Unilateral Cleft lip repair : 3-6 months</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "All of the following are correct statements about carotid body tumor except",
    "choices": [
      {
        "id": 1,
        "text": "It is seen in people who live at high altitude"
      },
      {
        "id": 2,
        "text": "10% patients have a positive family history"
      },
      {
        "id": 3,
        "text": "It produces serotonin"
      },
      {
        "id": 4,
        "text": "Carotid angiogram shows splaying of the carotid bifurcation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Carotid body tumors/ chemodectoma are not hormonally active and the tumors are usually benign.</p>\n<p>High yield points</p>\n<ul>\n<li>It occurs in people who live at high altitude</li>\n<li>Occur in the 5<sup>th</sup> decade,10% have family history</li>\n<li>Slowly growing</li>\n<li>Carotid angiogram shows Lyre sign (splaying of the carotid bifurcation)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the 10 year patency rate of long saphenous vein grafts for CABG?",
    "choices": [
      {
        "id": 1,
        "text": "90%"
      },
      {
        "id": 2,
        "text": "70%"
      },
      {
        "id": 3,
        "text": "50%"
      },
      {
        "id": 4,
        "text": "30%"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>Long saphenous vein graft patency : 50-60%</li>\n<li></li>\n<li>Long term patency rates of LIMA (left internal mammary artery) : &gt;98%</li>\n<li>Radial artery : 80%</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which type of collagen is most important in wound healing?",
    "choices": [
      {
        "id": 1,
        "text": "Type 3"
      },
      {
        "id": 2,
        "text": "Type 2"
      },
      {
        "id": 3,
        "text": "Type 6"
      },
      {
        "id": 4,
        "text": "Type 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Type III collagen</strong>&nbsp;is involved in&nbsp;<strong>wound healing.</strong></p>\n<p>The tensile strength of the wound is directly proportional to the amount of collagen present, and<strong>&nbsp;types I </strong>and<strong> III</strong>&nbsp;predominate in the skin and aponeurotic layers.</p>\n<p>During healing, as disorganized collagen is degraded and reformed, covalent cross-links are formed that enhance tensile strength.</p>\n<p>The maximum strength of the healed wound depends upon the interconnection of collagen subunits. Approximately <strong>80</strong> <strong>percent</strong> of the original <strong>strength</strong> of the tissue is obtained by <strong>six weeks</strong> after surgery. Wounds slowly continue to get stronger but may <strong>never achieve 100 percent</strong> of their previous strength.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not associated with familial adenomatous polyposis?",
    "choices": [
      {
        "id": 1,
        "text": "Congenital hypertrophy of the retinal pigment epithelium"
      },
      {
        "id": 2,
        "text": "Osteoma"
      },
      {
        "id": 3,
        "text": "Dermoid"
      },
      {
        "id": 4,
        "text": "Desmoid tumor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Dermoid is not associated with familial adenomatous polyposis.</p>\n<p><strong>Familial adenomatous polyposis</strong> is associated with</p>\n<ul>\n<li>Congenital hypertrophy of the retinal pigment epithelium</li>\n<li>Osteoma</li>\n<li>Desmoid tumor</li>\n<li>Epidermoid cyst (sebaceous cyst)</li>\n<li>Colorectal cancer</li>\n<li>Gastric and duodenal polyps</li>\n<li>Duodenal and periampullary cancer</li>\n<li>Hepatobiliary tumors</li>\n<li>Thyroid cancer</li>\n<li>Medulloblastoma</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What procedure is being done?",
    "choices": [
      {
        "id": 1,
        "text": "NOTES"
      },
      {
        "id": 2,
        "text": "SILS"
      },
      {
        "id": 3,
        "text": "VATS"
      },
      {
        "id": 4,
        "text": "Chest tube insertion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<ul>\n<li>The procedure that is shown is VATS: Video-Assisted Thoracoscopic Surgery.</li>\n<li>Many thoracic procedures can be done through VATS like pneumonectomy, lobectomy, empyema drainage, pleural biopsy, pleurodesis.</li>\n</ul>\n<p>\u00a0</p>\n<p>High yield points</p>\n<ul>\n<li><strong>SILS</strong>: Single Incision Laparoscopic Surgery</li>\n<li><strong>NOTES</strong>: Natural Orifice Transluminal Endoscopic Surgery</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/2ca66af41b054920b4bce8a35d518d6d.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Most common arrhythmia seen during laparoscopy is:",
    "choices": [
      {
        "id": 1,
        "text": "Atrial fibrillation"
      },
      {
        "id": 2,
        "text": "Sinus tachycardia"
      },
      {
        "id": 3,
        "text": "Sinus bradycardia"
      },
      {
        "id": 4,
        "text": "Premature ventricular contractions"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Most common arrhythmia created by laparoscopy is bradycardia.</p>\n<p>A rapid stretch of the peritoneal membrane often causes a vagovagal response with bradycardia and occasionally hypotension.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Surgery St 3';
        const quizFilename = 'surgery-st-3-c37a5d07.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2017 - 18"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>