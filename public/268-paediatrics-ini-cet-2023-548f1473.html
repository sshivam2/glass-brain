<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>268 Paediatrics Ini-Cet 2023 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Pediatrics
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">17</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "In a baby born with meconium-stained liquor, which of the following are recommended as per Neonatal Resuscitation guidelines?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 2,
        "text": "2, 4"
      },
      {
        "id": 3,
        "text": "3, 4"
      },
      {
        "id": 4,
        "text": "1, 3, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div>In a baby born with\u00a0meconium-stained liquor, <strong>gentle suction</strong> of the nose and mouth is done in the case of a <strong>vigorous</strong> <strong>baby\u00a0</strong>(Statement 3)<strong>,</strong> and <strong>positive pressure ventilation (PPV)</strong> is done in the case of a <strong>non-vigorous baby</strong> after early steps (Statement 4).</div>\n<div>\u00a0</div>\n<div>A baby born through meconium-stained liquor is classified as either a vigorous baby or a non-vigorous baby. A <strong>vigorous bab</strong>y has <strong>good breathing</strong> and <strong>normal tone</strong>, whereas, a<strong> non-vigorous baby</strong> has <strong>poor</strong> or <strong>no breathing</strong> with <strong>decreased tone</strong>.\u00a0According to neonatal resuscitation guidelines, in a vigorous baby, gentle suction is done and the baby is kept with the mother. In a non-vigorous baby, the initial steps of resuscitation are done and is followed by PPV if the baby is not responding. Routine tracheal suctioning is <strong>not</strong> recommended (Statement 2).\u00a0</div>\n<div>\u00a0</div>\n<div><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">The response to neonatal resuscitation at various steps is assessed based on the heart rate.</span></div>\n<ul class=\"listtype-bullet listindent1 list-bullet1\">\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>If </strong>the<strong> heart rate </strong>is<strong> less than 100</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">, </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>PPV </strong>(positive pressure ventilation)<strong>\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is provided with bag and mask and </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>SPO2 monitoring\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is done and </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>adequate\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>ventilation\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">is ensured.</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">If the </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>heart rate </strong>is<strong> below 60</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">, then </span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>chest\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\"><strong>compressions\u00a0</strong></span><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">are initiated over the lower third of the sternum at a rate of <strong>90 compressions/min</strong>.</span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Recommended rate of ventilation is 30 inflations/min. (90 compressions + 30 inflation = 120 events/ min). The ratio of compressions to ventilation is <strong>3: 1.</strong></span></li>\n<li><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">If the heart rate still remains &lt;60, despite effective compressions and ventilation, then IV epinephrine is given.</span></li>\n</ul>\n<p><span class=\" author-d-1gg9uz65z1iz85zgdz68zmqkz84zo2qoxwyy7z90zx1z73zz86z8z72z3z70zvjbz81zz122znz90zz74z1z78zz67zz66zz122zz83zjz73ziz69z\">Note: For any baby, intrapartum suction of nose and mouth before delivery of shoulder is <strong>not</strong> recommended. (Statement 1)</span></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a93e19c6560145aca39469f332e775acx1280x2558.JPEG"
    ]
  },
  {
    "text": "Which of the following has the least risk of perinatal transmission?",
    "choices": [
      {
        "id": 1,
        "text": "HSV"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "Rubella"
      },
      {
        "id": 4,
        "text": "Hepatitis B"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Rubella\u00a0</strong>has the <strong>least risk</strong> of <strong>perinatal transmission</strong>.\u00a0</p>\n<p>Rubella or <strong>German measles</strong> has an <strong>intrauterine transmission</strong> that causes serious infection in pregnancy which results in\u00a0<strong>abortions</strong>\u00a0or\u00a0<strong>severe fetal defects</strong>\u00a0if infection occurs in the\u00a0<strong>first trimester.\u00a0</strong>The classical triad of congenital rubella syndrome is\u00a0<strong>deafness, cataract</strong>,\u00a0and\u00a0<strong>congenital heart disease</strong>.</p>\n<p>Other options-\u00a0</p>\n<p>Option A: <strong>Herpes simplex infection</strong> can be acquired\u00a0<strong>in utero, intrapartum/perinatally, </strong>or during the <strong>neonatal period</strong>. The\u00a0<strong>intrauterine</strong>\u00a0infection causes\u00a0<strong>skin vesicles, eye findings</strong>\u00a0(chorioretinitis, keratoconjunctivitis)<strong>,\u00a0</strong>and\u00a0<strong>microcephaly/hydranencephaly. Intrapartum\u00a0</strong>infection presents with either:</p>\n<ul>\n<li>Skin, eye, and mouth disease</li>\n<li>Encephalitis</li>\n<li>Disseminated disease with sepsis-like presentation</li>\n</ul>\n<p>Option B:<strong> Cytomegalovirus</strong>, the <strong>most common congenital infection with perinatal transmission</strong> presents with hepatosplenomegaly,\u00a0<strong>petechial</strong>\u00a0<strong>rashes</strong>,\u00a0<strong>jaundice</strong>,\u00a0<strong>chorioretinitis</strong>, and microcephaly. One of the long-term sequelae is<strong>\u00a0hearing loss.\u00a0</strong></p>\n<p>Option D:<strong> Hepatitis B</strong> virus is associated with <strong>significant perinatal transmission</strong>.\u00a0The most important <strong>risk factor</strong> that determines perinatal transmission is <strong>HBeAg</strong>.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a new drug approved by the FDA for the treatment of Rett syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Olcegepant"
      },
      {
        "id": 2,
        "text": "Lasmiditan"
      },
      {
        "id": 3,
        "text": "Trofinetide"
      },
      {
        "id": 4,
        "text": "Erenumab"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><span style=\"font-size: 12pt;\"><strong>Trofinetide</strong> is the newly <strong>FDA-approved drug</strong> for the treatment of <strong>Rett syndrome.</strong></span></p>\n<p><span style=\"font-size: 12pt;\">The mechanism by which trofinetide exerts therapeutic effects in patients with Rett syndrome is<strong> unknown</strong>. It is a synthetic analog of the amino\u2010terminal tripeptide of insulin-like growth factor (IGF-1) designed to treat the core symptoms of Rett syndrome by <strong>potentially reducing neuroinflammation and supporting synaptic function of the protein fragment glypromate (GPE).&nbsp;</strong>IGF-1 is produced by both major types of brain cells &ndash; neurons and glia; IGF-1 in the brain is critical for both normal development and response to injury and disease<strong>.&nbsp;</strong>Trofinetide has been shown to <strong>inhibit the production of inflammatory cytokines,</strong> <strong>inhibit overactivation of microglia and astrocytes</strong>, and <strong>increase the amount of available IGF-1 </strong>that can bind to IGF-1 receptors.</span></p>\n<p><span style=\"font-size: 12pt;\">It is<strong>&nbsp;</strong>Indicated for the treatment of <strong>Rett syndrome.</strong></span></p>\n<p><span style=\"font-size: 12pt;\"><strong>Adverse effects</strong> include diarrhea, vomiting, fever, seizure, anxiety, decreased appetite, fatigue, nasopharyngitis</span></p>\n<p>&nbsp;</p>\n<p><span style=\"font-size: 16px;\">Other options:</span></p>\n<p><span style=\"font-size: 16px;\">Option A:&nbsp;<strong>Olcegepant</strong>&nbsp;is a calcitonin gene-related peptide (<strong>CGRP</strong>)&nbsp;<strong>antagonist</strong> which was considered for the treatment of&nbsp;<strong>migraine,</strong>&nbsp;but discontinued.</span></p>\n<p><span style=\"font-size: 16px;\">Option B:&nbsp;<strong>Lasmiditan</strong>&nbsp;is&nbsp;</span><span style=\"font-size: 12pt;\">a nontriptan 5HT1F receptor&ndash;selective agonist&nbsp;</span><span style=\"font-size: 16px;\">and is used to treat migraine.</span></p>\n<p><span style=\"font-size: 16px;\">Option D:&nbsp;<strong>Erenumab</strong> is a&nbsp;<strong>CGRP (calcitonin gene-related peptide) blocking antibody</strong>&nbsp;used in the treatment migraine.</span>&nbsp;</p>\n<p>&nbsp;</p>\n<p>Note: The spelling of the drug in the options has been corrected from Trofin<strong data-stringify-type=\"bold\">i</strong>tide to Trofin<span style=\"background-color: #ffff00;\"><strong data-stringify-type=\"bold\">e</strong></span>tide.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 6-year-old boy was brought with a history of chronic cough, and foul-smelling stools. His sibling who had similar complaints died a few years back. Sweat chloride test and CFTR gene studies were done. CFTR gene codes for proteins involved in the transport of:",
    "choices": [
      {
        "id": 1,
        "text": "Na+"
      },
      {
        "id": 2,
        "text": "HCO3-"
      },
      {
        "id": 3,
        "text": "Cl-"
      },
      {
        "id": 4,
        "text": "K+"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">Clinical manifestations/ complications of cystic fibrosis include:</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li><strong>Sinusitis</strong> and <strong>nasal polyps</strong></li>\n<li><strong>Respiratory </strong>- copious hyper-viscous and adherent pulmonary secretions with abnormal mucociliary clearance obstruct small and medium-sized airways leading to respiratory compromise. The disease can be further complicated by bronchiectasis and allergic bronchopulmonary aspergillosis (ABPA).</li>\n<li><strong>Gastrointestinal </strong>-<strong>&nbsp;</strong>\n<ul>\n<li>Thick and adherent exocrine secretions <strong>obstruct</strong> <strong>pancreatic</strong> <strong>ducts</strong> and impair the production and flow of digestive enzymes</li>\n<li>Tissue destruction of the <strong>exocrine</strong> <strong>pancreas</strong>, with fibrotic scarring, cyst proliferation, and loss of acinar tissue - fat malabsorption, steatorrhea, fat-soluble vitamin deficiencies</li>\n<li>Obstruction of intrahepatic bile ducts and parenchymal fibrosis leading to hepatic insufficiency and <strong>focal biliary cirrhosis</strong></li>\n<li><strong>Distal intestinal obstructive syndrome</strong> in <strong>adults</strong> and <strong>meconium ileus</strong> in <strong>neonates</strong></li>\n</ul>\n</li>\n<li><strong>Reproductive</strong>&nbsp;-<strong> males</strong> have&nbsp;<strong>infertility</strong> due to the congenital <strong>absence</strong> of bilateral <strong>vas</strong> <strong>deferens</strong> and defective sperm transport, resulting in&nbsp;<strong>obstructive azoospermia. Females</strong> have infertility due to abnormalities of the reproductive tract secretions.</li>\n</ul>\n<p>&nbsp;The&nbsp;<strong>diagnosis</strong>&nbsp;is&nbsp;<strong>confirmed</strong>&nbsp;if&nbsp;<strong>both</strong>&nbsp;of the following&nbsp;<strong>criteria</strong>&nbsp;are met:</p>\n</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Presence of\n<ul>\n<li><strong>Clinical symptoms</strong> affecting at least one organ system (respiratory, gastrointestinal, or genitourinary)&nbsp;<strong>or</strong></li>\n<li>Positive<strong> newborn screening</strong>&nbsp;<strong>or</strong></li>\n<li>A <strong>sibling</strong> with cystic fibrosis</li>\n</ul>\n</li>\n<li>Evidence of&nbsp;<strong>dysfunction</strong>&nbsp;of the&nbsp;<strong>CFTR gene</strong>&nbsp;by\n<ul>\n<li><strong>Two positive sweat chloride tes</strong>t results were obtained on separate days&nbsp;<strong>or</strong></li>\n<li>Identification of <strong>two CFTR mutations</strong> by genetic testing&nbsp;<strong>or</strong></li>\n<li>An <strong>abnormal</strong> measurement of <strong>nasal potential difference</strong></li>\n</ul>\n</li>\n</ul>\n<p>Cystic fibrosis requires a multidisciplinary approach to management. The correction of the defect can be via:</p>\n<ul>\n<li><strong>Lumacaftor,</strong> an FDA-approved drug that corrects the misfolding and reverts the Phe508del mutation defect</li>\n<li><strong>Ivacaftor</strong> potentiates CFTR channel opening and stimulates ion transport</li>\n</ul>\n<p>End-stage pulmonary failure requires <strong>lung transplantation</strong>.</p>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The perinatal transmission of infection shows the spectrum of anemia, possibly myocarditis, high output cardiac failure, and ascites. Identify the causative agent.",
    "choices": [
      {
        "id": 1,
        "text": "Treponema pallidum"
      },
      {
        "id": 2,
        "text": "CMV"
      },
      {
        "id": 3,
        "text": "Parvovirus B19"
      },
      {
        "id": 4,
        "text": "Toxoplasma gondii"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical vignette with anemia, myocarditis, high output cardiac failure, ascites and the image showing hydrops fetalis point to a diagnosis of&nbsp;<strong>erythema infectiosum (Fifth disease) </strong>caused by<strong> parvovirus B19.</strong></p>\n<p>Parvovirus B19 infects fetal erythroid progenitor cells and causes <strong>anemia</strong>. Severe anemia leads to&nbsp;<strong>high-output cardiac failure</strong>&nbsp;and&nbsp;<strong>hydrops fetalis.&nbsp;</strong>In addition to bone marrow, the liver is also affected causing <strong>ascites</strong>, because it is involved in erythropoiesis in the early fetal life.&nbsp;</p>\n<p>Erythema infectiosum presents as a prodrome of low-grade fever, headache, and a mild upper respiratory tract infection after an incubation period of 4-28 days. A characteristic rash occurs in 3 stages:</p>\n<ul>\n<li>Erythematous facial flushing causing a slapped cheek appearance in the 1st stage</li>\n<li>Diffuse macular erythema spreads to the trunk and proximal extremities in the 2nd stage.</li>\n<li>Central clearing of the macular lesions, giving the rash a lacy, reticulated appearance in the 3rd stage.</li>\n</ul>\n<p>The rash is more prominent on extensor surfaces and spares the palms and soles. At this stage, affected children are afebrile and do not appear ill.&nbsp; Children with erythema infectiosum are not likely to be infectious at presentation.</p>\n<p>Complications of the disease include:</p>\n<ul>\n<li>Arthralgias or arthritis</li>\n<li><strong>Transient Aplastic Crisis</strong>: A transient arrest of erythropoiesis and absolute reticulocytopenia in serum hemoglobin in individuals with chronic hemolytic conditions like sickle cell anemia</li>\n<li>Thrombocytopenic purpura</li>\n<li><strong>Myocarditis</strong></li>\n<li>A papular-purpuric &ldquo;gloves-and-socks&rdquo; syndrome&nbsp;</li>\n<li>Neurological: Aseptic meningitis, encephalitis, and peripheral neuropathy, stroke in children with sickle cell disease&nbsp;</li>\n<li>Infection-associated hemophagocytic syndrome in immunocompromised patients</li>\n<li>Maternal infection is associated with <strong>nonimmune fetal hydrops</strong> and intrauterine fetal demise</li>\n</ul>\n<p>There is no data to support the use of IVIG for postexposure prophylaxis, however, it has been used with some success to treat B19-related episodes of anemia and bone marrow failure in immunocompromised children. There is no specific antiviral therapy for B19 infection.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/ee3ff99aad3645fb8b7287f34751f4af.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "In which of the following conditions is live vaccination not contraindicated?",
    "choices": [
      {
        "id": 1,
        "text": "4 only"
      },
      {
        "id": 2,
        "text": "1 only"
      },
      {
        "id": 3,
        "text": "1 and 3"
      },
      {
        "id": 4,
        "text": "2 and 3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">Live vaccination is not contraindicated in <strong>complement deficiency</strong>. In DiGeorge syndrome, Wiskott-Aldrich Syndrome, and Ataxia telangiectasia, live vaccines are contraindicated.&nbsp;</p>\n<p>In patients with DiGeorge syndrome, Wiskott-Aldrich Syndrome, and Ataxia telangiectasia, there is a risk of severe or fatal infections due to live vaccines because of their impaired T-cell immunity. In contrast, a patient with a complement deficiency has an intact T-cell and B-cell immunity, which are crucial for building an immune response against live vaccines. These patients have an increased susceptibility to certain bacterial infections, especially those caused by Neisseria species, due to defects in the complement system, which is part of the innate immune system. But their adaptive immune system, which is primarily responsible for responding to vaccinations, is generally intact. Therefore, live vaccinations are not typically contraindicated in these patients.</p>\n<p class=\"p1\"><strong>DiGeorge syndrome</strong> is due to a&nbsp;<strong>developmental defect </strong>involving the endodermal derivatives of the<strong> 3<sup>rd</sup></strong> and<strong> 4<sup>th</sup> pharyngeal pouches.&nbsp;</strong>Cell-mediated immunity is defective due to<strong> decreased T-cells</strong>. Affected individuals also have depressed graft rejection, hypocalcemia, and cardiac defects.&nbsp;For <strong>severe T cell deficiencies</strong>&nbsp;(e.g. severe combined immunodeficiency disease [SCID], complete DiGeorge syndrome), no live viral or live bacterial vaccines should be given.</p>\n<p class=\"p1\"><strong>Wiskott-Aldrich syndrome(WAS)</strong> is&nbsp;<strong>an X-linked recessive</strong>&nbsp;immunodeficiency disorder. It is caused by mutations in the Wiskott-Aldrich syndrome protein (<strong>WASp</strong>) that primarily affects the&nbsp;<strong>T lymphocytes</strong>.&nbsp;In patients with <strong>partial T cell deficiencies</strong> (e.g., partial DiGeorge syndrome, Wiskott-Aldrich syndrome),&nbsp;all live viral vaccines are avoided.</p>\n<p class=\"p1\"><strong>Ataxia telangiectasia</strong> is caused due to mutation of the <strong>ATM gene</strong>. This gene is involved in the&nbsp;<strong>repair</strong>&nbsp;of&nbsp;<strong>double-strand DNA breaks.</strong>&nbsp;This defect in DNA repair leads to impaired Ig isotype switching and the formation of antigen receptors. As a result, the patient is immunodeficient with <strong>partial T cell deficiency, </strong>and hence live vaccines are avoided.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Nada's Minor Criteria includes:",
    "choices": [
      {
        "id": 1,
        "text": "3 and 4"
      },
      {
        "id": 2,
        "text": "1, 2 and 3"
      },
      {
        "id": 3,
        "text": "1, 2, 3 and 4"
      },
      {
        "id": 4,
        "text": "2, 3 and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nada's Minor Criteria </strong>includes<strong> abnormal second heart sound</strong> and <strong>abnormal BP. </strong></p>\n<p>Nada&rsquo;s criteria is used to diagnose<strong> congenital heart disease</strong> in children.&nbsp;The presence of <strong>1 major</strong> or <strong>2 minor</strong> criteria indicates congenital heart disease.</p>\n<table style=\"height: 276px;\" width=\"409\">\n<tbody>\n<tr>\n<td style=\"width: 208.641px;\"><strong>Major criteria&nbsp;</strong></td>\n<td style=\"width: 184.359px;\"><strong>Minor criteria</strong></td>\n</tr>\n<tr>\n<td style=\"width: 208.641px;\">Systolic murmur&nbsp; grade 3 or more</td>\n<td style=\"width: 184.359px;\">Systolic murmur &lt; grade 3</td>\n</tr>\n<tr>\n<td style=\"width: 208.641px;\">Any diastolic murmur</td>\n<td style=\"width: 184.359px;\">Abnormal second sound (S2)</td>\n</tr>\n<tr>\n<td style=\"width: 208.641px;\">Cyanosis</td>\n<td style=\"width: 184.359px;\">Abnormal ECG</td>\n</tr>\n<tr>\n<td style=\"width: 208.641px;\">Congestive cardiac failure</td>\n<td style=\"width: 184.359px;\">\n<p>Abnormal chest X-ray findings</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 208.641px;\">&nbsp;</td>\n<td style=\"width: 184.359px;\">\n<p>Abnormal BP</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An 18-month-old child with a 3-day history of watery diarrhea and vomiting presented with altered sensorium. Which of the following are differential diagnoses?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 2,
        "text": "1, 2, 3"
      },
      {
        "id": 3,
        "text": "1, 3, 4"
      },
      {
        "id": 4,
        "text": "2, 3, 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The differential diagnoses in a child with a history of watery diarrhea and altered sensorium include <strong>severe dehydration</strong>, <strong>cerebral venous thrombosis, </strong>and <strong>hyponatremia.&nbsp;</strong></p>\n<p>The lack of dysentery(bloody diarrhoea) and the short period of interval between diarrhoeal episodes and the symptom complex, help to rule out&nbsp;<strong>Haemolytic Uremic Syndrome (HUS). </strong>HUS is a form of&nbsp;<strong>microangiopathic hemolytic anemia</strong>&nbsp;usually occurring in children <strong>less than 5 years</strong> of age. There are 2 forms of HUS:</p>\n<ol>\n<li><strong>Typical HUS</strong>&nbsp;which is usually followed by a gastrointestinal infection most commonly by E.coli. The infection in turn affects the gastric mucosa and alters the endothelial cells which promotes platelet activation and aggravation.</li>\n<li><strong>Atypical HUS</strong>&nbsp;which occurs due to deficiency in certain proteins like complement factor H, factor I, or CD46.&nbsp;</li>\n</ol>\n<p>Clinical features of the condition include&nbsp;<strong>bloody diarrhea </strong>which occurs<strong>&nbsp;5-10 days</strong> before the onset of hemolytic uremic syndrome<strong>, abdominal pain, fatigue, cramping, </strong>and<strong> vomiting.&nbsp;</strong>The most dangerous complication is<strong>&nbsp;renal failure requiring dialysis </strong>or <strong>renal transplantation.&nbsp;</strong>Treatment is mainly supportive and the nature of the illness is usually self-limiting.&nbsp;</p>\n<p>Differential diagnoses in a child presenting with <strong>altered sensorium/ seizures</strong> with <strong>diarrhea</strong>:</p>\n<ul>\n<li>Hypo- or hypernatremia</li>\n<li>Hypoglycemia</li>\n<li>Encephalitis or meningitis</li>\n<li>Febrile seizures</li>\n<li>Cerebral or saggital sinus thrombosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The causative agent of this condition is associated with which of the following conditions?",
    "choices": [
      {
        "id": 1,
        "text": "Gingivostomatitis"
      },
      {
        "id": 2,
        "text": "Pure red cell aplasia"
      },
      {
        "id": 3,
        "text": "Molluscum contagiosum"
      },
      {
        "id": 4,
        "text": "Kaposi sarcoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><span data-preserver-spaces=\"true\">The given image showing the classical <strong>slapped cheek appearance</strong> is strongly suggestive of <strong>erythema infectiosum</strong>.&nbsp;It is caused&nbsp;by&nbsp;<strong>Parvovirus. </strong></span><span data-preserver-spaces=\"true\"><strong>Parvovirus B19</strong> is associated with <strong>p</strong><strong>ure red cell aplasia</strong>.&nbsp;</span></p>\n<p><span data-preserver-spaces=\"true\">Clinically, parvovirus B-19 infection may have several presentations-</span></p>\n<ul>\n<li><span data-preserver-spaces=\"true\">Erythema infectiosum- Also known as the<strong> fifth disease.</strong> The incubation period after infection is typically around 1-2 weeks.&nbsp;</span>The hallmark of erythema infectiosum is the&nbsp;characteristic rash, which appears initially as&nbsp;erythematous facial flushing, often described as a&nbsp;&ldquo;<strong>slapped cheek</strong>&rdquo; appearance. Later the rash spreads rapidly or concurrently to the&nbsp;trunk and proximal extremities as diffuse macular erythema. The child may be febrile.&nbsp;</li>\n<li><strong>Transient aplastic crisis</strong>- It may be seen in patients with underlying&nbsp;<strong>chronic hemolytic anemia</strong>&nbsp;like sickle-cell disease, thalassemia, hereditary spherocytosis, and RBC enzyme deficiencies like pyruvate kinase deficiency.&nbsp;Patients with aplastic crisis appear ill with fever, malaise, and pale with tachycardia and tachypnea due to profound anemia. The rash may or may not be present.&nbsp;</li>\n<li><strong>Pure red cell aplasia</strong>- Erythrocyte <strong>P blood group antigen</strong> is the primary cell receptor for the virus. Persistent Parvovirus B19 infection in immunocompromised patients can cause chronic suppression of bone marrow and chronic anemia leading to pure red cell aplasia.&nbsp;</li>\n<li>Maternal infection is associated with<strong> non-immune fetal hydrops</strong> and intrauterine fetal demise.</li>\n<li>Only about 7% of children with erythema infectiosum have, whereas <strong>80% of adults</strong>&nbsp;have&nbsp;<strong>joint involvement.</strong></li>\n<li>Infection-associated <strong>hemophagocytic syndrome</strong> in immunocompromised patients.</li>\n</ul>\n<p>The diagnosis of erythema infectiosum is made clinically and does not require investigations routinely. Detection of viral DNA in the blood by PCR or&nbsp;nucleic acid hybridization may be done for immunocompromised cases or for prenatal diagnosis of infection.</p>\n<p>It is self-limited and resolves on its own. IVIG may be given to immunocompromised children.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/f62e23303e5348a7aa37c3f98f8400ac.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 4-year-old boy presented with a history of fever, conjunctival congestion, and erythematous desquamation of the skin as shown in the images below. A 2D echo shows a coronary aneurysm. What is the first line of treatment for his condition?",
    "choices": [
      {
        "id": 1,
        "text": "Aspirin"
      },
      {
        "id": 2,
        "text": "IVIG"
      },
      {
        "id": 3,
        "text": "Clopidogrel"
      },
      {
        "id": 4,
        "text": "LMWH"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This child\u00a0with a history of fever, conjunctival congestion, strawberry tongue, and\u00a0erythematous desquamation of the skin is likely to have <strong>Kawasaki's disease. </strong>The first line of treatment in Kawasaki disease is<strong> IVIG (intravenous immunoglobulin).</strong></p>\n<p>Kawasaki's disease is also known as <strong>mucocutaneous lymph node syndrome</strong>. It is a vasculitis condition of unknown etiology.\u00a0 Clinical features include a <strong>high spiking fever</strong> that is <strong>unresponsive </strong>to<strong> antipyretics</strong>. The fever can last between 5 days to 3-4 weeks.\u00a0The five principal clinical criteria for Kawasaki's disease are:\u00a0</p>\n<ul>\n<li>Bilateral <strong>nonexudative conjunctival infection</strong>\u00a0with limbal sparing</li>\n<li>Erythema of the oral and pharyngeal mucosa, <strong>strawberry tongue</strong>, and red, cracked lips</li>\n<li><strong>Edema </strong>and<strong> erythema </strong>of the<strong> hands</strong> and feet</li>\n<li>Various forms of <strong>rash-\u00a0</strong>maculopapular, erythema multiforme, scarlatiniform</li>\n<li>Nonsuppurative <strong>cervical lymphadenopathy</strong></li>\n</ul>\n<p>Diagnosis requires <strong>fever</strong>\u00a0and <strong>at least four</strong> of the five <strong>principal criteria</strong>.\u00a0<strong>Myocarditis</strong> develops frequently in acute Kawasaki disease. It presents as tachycardia and reduced ventricular systolic function. The tachycardia will be disproportionate to the fever. Patients may develop <strong>coronary artery aneurysms</strong> in the 2nd to 3rd week of illness. They are generally asymptomatic and diagnosed on echocardiography. However, if large it can lead to death. Thus, <strong>echocardiography </strong>should be performed <strong>at diagnosis</strong> and <strong>after 1-2 weeks</strong>.\u00a0</p>\n<p>Other symptoms include periungual desquamation,<strong>\u00a0</strong>gastrointestinal symptoms (vomiting, abdominal pain, diarrhea), cough, rhinorrhea, and arthritis. Laboratory evaluation will reveal elevated leukocytes, platelets, erythrocyte sedimentation rate, and C-reactive protein levels.\u00a0</p>\n<p>Treatment involves <strong>2g/kg of intravenous immunoglobulin</strong> as an infusion over 10-12 hours within 10 days of onset. Moderate to high-dose <strong>aspirin</strong> should be administered until the patient is afebrile.\u00a0</p>\n<p><!-- --></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/69d5ad270aca4dae8f37cad3c84fa902.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not associated with Down's syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Conductive hearing loss"
      },
      {
        "id": 2,
        "text": "Short stature"
      },
      {
        "id": 3,
        "text": "Hypothyroidism"
      },
      {
        "id": 4,
        "text": "Caudal regression"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Among the choices provided,<strong>\u00a0Caudal regression</strong> is <strong>not\u00a0associated</strong> with Down\u2019s syndrome. It occurs more frequently in <strong>infants</strong>\u00a0of\u00a0<strong>diabetic mothers</strong>\u00a0(both\u00a0<strong>preconceptionally</strong>\u00a0and early in\u00a0<strong>pregnancy)</strong>\u00a0than in other infants although the exact mechanism is unclear.\u00a0</p>\n<p>Down\u2019s syndrome is an\u00a0<strong>autosomal disorder</strong>. It was described by Langdon Down in 1866. It is also called\u00a0<strong>trisomy 21 or mongolism.\u00a0</strong>The clinical features of Down's syndrome seen in older children are:</p>\n<ul>\n<li><strong>Short stature</strong></li>\n<li>Small round head</li>\n<li>Narrow tilted eye slits</li>\n<li>Mal-formed ears</li>\n<li>Short broad hands</li>\n<li>Lax limbs</li>\n<li>Mental retardation</li>\n</ul>\n<p>Conditions most commonly associated with Down\u2019s syndrome:</p>\n<ul>\n<li>Congenital heart disease (in about 35% of cases)</li>\n<li>Gastrointestinal anomalies (in about 10%)</li>\n<li>Chronic serous otitis media (in &gt;50%)</li>\n<li><strong>Conductive hearing loss</strong></li>\n<li><strong>Hypothyroidism</strong></li>\n<li>Alzheimer\u2019s disease (in the 30's and 40\u2019s)</li>\n<li>Epilepsy (in about 10%)</li>\n<li>Ocular disorders</li>\n<li>Reduced fertility</li>\n<li>Reduced life span (Often due to complications like infections)</li>\n</ul>\n<p>The frequency of Down's syndrome increases with rising maternal age. The risk of a woman who is 20 is 1 in 3000 but that of a woman who is 45 is 1 in 50.</p>\n<p>It seems to be unaffected by the age of the father.</p>\n<p><strong>Note: Genetic counseling</strong>: It can either be\u00a0<strong>prospective</strong>\u00a0or\u00a0<strong>retrospective</strong>. Prospective genetic counseling refers to the prevention of disease by the prevention or reduction of heterozygous marriage like in sickle cell anemia or thalassemia. Retrospective genetic counseling means that the hereditary disorder has already occurred in the family and methods like contraception, pregnancy termination or sterilization are to be used to avoid any serious health disorder in the unborn baby.\u00a0</p>\n<p>Methods of early diagnosis and treatment are early detection of genetic carriers, prenatal diagnosis, screening of newborn infants, and recognizing pre-clinical cases.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is correct about congenital CMV?",
    "choices": [
      {
        "id": 1,
        "text": "40-50 % of the cases are symptomatic at birth"
      },
      {
        "id": 2,
        "text": "Optimum sample for PCR is blood/ urine/ saliva sample within 2-3 weeks of birth"
      },
      {
        "id": 3,
        "text": "If asymptomatic at birth, then there is a higher risk of developing SNHL later"
      },
      {
        "id": 4,
        "text": "Most common congenital infection after congenital syphilis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct statement regarding CMV infection is <strong>optimum sample </strong>for <strong>PCR</strong> is blood/ urine/ saliva <strong>sample within 2-3 weeks </strong>of birth</p>\n<p style=\"text-align: justify;\">CMV is the <strong>most common congenital infection </strong>(Option D). The clinical manifestations are <strong>hepatosplenomegaly, petechial rashes, jaundice</strong>, <strong>chorioretinitis,</strong> and <strong>microcephaly.</strong> One of the <strong>long-term sequelae</strong> is <strong>sensorineural hearing loss</strong>.\u00a0Neuroimaging shows <strong>intracranial periventricular calcifications.</strong> Other manifestations include IUGR, hydrops, microcephaly, pneumonitis, chorioretinitis, seizures, abnormal dentition, and hypocalcified enamel.\u00a0</p>\n<p style=\"text-align: justify;\">Only <strong>10% </strong>of the infected babies are <strong>symptomatic </strong>(Option A). <strong>Asymptomatic</strong> neonates have <strong>lesser</strong> chances of having late <strong>sequelae</strong> i.e. sensorineural hearing loss. About half of the symptomatic infants develop long-term sequelae which include sensorineural hearing loss (SNHL), vision loss, seizure disorders, mental retardation, and developmental delay. However, in <strong>asymptomatic</strong> infants, only about <strong>13.5% </strong>develop long-term sequelae which is commonly<strong> SNHL</strong> (option C).</p>\n<p>Diagnosis can be made by the presence of <strong>IgM antibodies</strong> in the fetal blood. Isolation of the virus from the <strong>urine</strong> or <strong>blood </strong>by <strong>PCR </strong>is more sensitive. The investigation of choice is <strong>PCR</strong> or <strong>viral culture</strong>. It should be done <strong>within the first three weeks of life</strong>. After this period, it is difficult to distinguish between a congenital and an acquired infection. Since not all affected infants are viremic at birth, <strong>urine</strong> and/or <strong>saliva</strong> are <strong>more reliable samples </strong>than blood (Option B).</p>\n<p>There is no definitive treatment for congenital CMV infection. Treatment with <strong>ganciclovir</strong> is indicated only in patients with progressive neurologic disease and deafness. Below is the image showing the <strong>blueberry muffin baby.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8190e65c717840348c7b48bad4f5ed3ex237x212.JPEG"
    ]
  },
  {
    "text": "A 3.5 kg term neonate born to a mother with eclampsia, did not cry at birth. Which of the following is the criteria for perinatal asphyxia?",
    "choices": [
      {
        "id": 1,
        "text": "APGAR persists at 4-7 for > 5 minutes"
      },
      {
        "id": 2,
        "text": "Cord pH < 7.2"
      },
      {
        "id": 3,
        "text": "Hypocalcemia"
      },
      {
        "id": 4,
        "text": "Hypotonia"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<div class=\"page\" title=\"Page 175\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 175\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Among the given options, the\u00a0<strong>essential criterion</strong> for <strong>perinatal asphyxia</strong>\u00a0is\u00a0<strong>hypotonia.</strong></p>\n<p><strong>Perinatal asphyxia </strong>is an insult to the fetus or newborn due to a lack of oxygen <strong>(hypoxia)</strong> and/or a lack of perfusion<strong> (ischemia)</strong> to the various organs. It is often associated with <strong>tissue lactic acidosis</strong> and<strong> hypercarbia.</strong></p>\n<p><strong>Essential criteria</strong> for perinatal asphyxia:</p>\n</div>\n</div>\n</div>\n<ul>\n<li>Umbilical arterial blood sample indicating prolonged metabolic or mixed acidemia <strong>(pH &lt; 7.O).</strong></li>\n<li><strong>Apgar score of 0-3</strong>\u00a0persisting for<strong> &gt;5 minutes.</strong></li>\n<li>Neurological manifestations appearing in the immediate neonatal period Ex:-\u00a0seizures, coma,<strong> hypotonia,</strong> or hypoxic ischemic encephalopathy (HIE).</li>\n<li>Neonatal\u00a0<strong>multiorgan dysfunction.</strong></li>\n</ul>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Choose the correct statements for cystic fibrosis:",
    "choices": [
      {
        "id": 1,
        "text": "i and iii"
      },
      {
        "id": 2,
        "text": "ii and iii"
      },
      {
        "id": 3,
        "text": "i and iv"
      },
      {
        "id": 4,
        "text": "ii and iv"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll answer-html ng-star-inserted\">\n<p style=\"text-align: justify;\">In<strong> cystic fibrosis, </strong>there are<strong> increased chloride levels </strong>in <strong>sweat </strong>and<strong> decreased Chloride levels</strong> in <strong>pancreatic juice.\u00a0</strong>The\u00a0chloride level of sweat,\u00a0known as the <strong>sweat test</strong>, is used to diagnose\u00a0<strong>cystic fibrosis</strong>\u00a0(CF). A sweat chloride level of <strong>&gt;60 mmol/L</strong> is <strong>diagnostic</strong> of CF.</p>\n<p style=\"text-align: justify;\"><strong>Cystic fibrosis</strong>\u00a0or\u00a0<strong>mucoviscidosis</strong>\u00a0is an\u00a0<strong>autosomal recessive</strong>\u00a0disorder with a mutation in the cystic fibrosis transmembrane regulator\u00a0<strong>(CFTR) gene</strong>\u00a0on\u00a0<strong>chromosome 7q</strong>.\u00a0The most common CFTR mutation is\u00a0<strong>F508 deletion</strong>.\u00a0</p>\n<p style=\"text-align: justify;\">CFTR gene encodes for\u00a0<strong>ATP-gated chloride channels</strong>\u00a0in the apical membranes of epithelial cells. The function of the CFTR gene on chloride channels is organ-specific. In <strong>sweat glands</strong>, the <strong>normal function</strong> of the CFTR gene is to <strong>reabsorb chloride</strong> ions. But in the <strong>pancreatic ducts</strong> and <strong>respiratory airways</strong>, the <strong>normal function</strong> of the CFTR gene is to <strong>secrete chloride</strong> ions. So, in cystic fibrosis, due to defect in the chloride channels, chloride levels in the sweat increase, and chloride levels in the pancreatic juices decreases. Excessive loss of salt in the sweat predisposes young children to\u00a0<strong>salt-depletion</strong>\u00a0episodes. Therefore, these children present with\u00a0<strong>hypochloremic alkalosis</strong>, resulting in\u00a0<strong>increased serum bicarbonate levels</strong>.\u00a0</p>\n</div>\n</div>\n<div class=\"ng-star-inserted\">\n<div class=\"table-responsive font-weight-light answer-scroll answer-html ng-star-inserted\">\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">Clinical manifestations/ complications of cystic fibrosis include:</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li><strong>Sinusitis</strong>\u00a0and\u00a0<strong>nasal polyps</strong></li>\n<li><strong>Respiratory\u00a0</strong>- copious hyper-viscous and adherent pulmonary secretions with abnormal mucociliary clearance obstruct small and medium-sized airways leading to respiratory compromise. The disease can be further complicated by bronchiectasis and allergic bronchopulmonary aspergillosis (ABPA).</li>\n<li><strong>Gastrointestinal\u00a0</strong>-<strong>\u00a0</strong>\n<ul>\n<li>Thick and adherent exocrine secretions\u00a0<strong>obstruct</strong>\u00a0<strong>pancreatic</strong>\u00a0<strong>ducts</strong>\u00a0and impair the production and flow of digestive enzymes</li>\n<li>Tissue destruction of the\u00a0<strong>exocrine</strong>\u00a0<strong>pancreas</strong>, with fibrotic scarring, cyst proliferation, and loss of acinar tissue - fat malabsorption, steatorrhea, fat-soluble vitamin deficiencies</li>\n<li>Obstruction of intrahepatic bile ducts and parenchymal fibrosis leading to hepatic insufficiency and\u00a0<strong>focal biliary cirrhosis</strong></li>\n<li><strong>Distal intestinal obstructive syndrome</strong>\u00a0in\u00a0<strong>adults</strong>\u00a0and\u00a0<strong>meconium ileus</strong>\u00a0in\u00a0<strong>neonates</strong></li>\n</ul>\n</li>\n<li><strong>Reproductive</strong>\u00a0-<strong>\u00a0males</strong>\u00a0have\u00a0<strong>infertility</strong>\u00a0due to the congenital\u00a0<strong>absence</strong>\u00a0of bilateral\u00a0<strong>vas</strong>\u00a0<strong>deferens</strong>\u00a0and defective sperm transport, resulting in\u00a0<strong>obstructive azoospermia. Females</strong>\u00a0have infertility due to abnormalities of the reproductive tract secretions.</li>\n</ul>\n<p>\u00a0The\u00a0<strong>diagnosis</strong>\u00a0is\u00a0<strong>confirmed</strong>\u00a0if\u00a0<strong>both</strong>\u00a0of the following\u00a0<strong>criteria</strong>\u00a0are met:</p>\n</div>\n</div>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<ul>\n<li>Presence of\n<ul>\n<li><strong>Clinical symptoms</strong>\u00a0affecting at least one organ system (respiratory, gastrointestinal, or genitourinary)\u00a0<strong>or</strong></li>\n<li>Positive<strong>\u00a0newborn screening</strong>\u00a0<strong>or</strong></li>\n<li>A\u00a0<strong>sibling</strong>\u00a0with cystic fibrosis</li>\n</ul>\n</li>\n<li>Evidence of\u00a0<strong>dysfunction</strong>\u00a0of the\u00a0<strong>CFTR gene</strong>\u00a0by\n<ul>\n<li><strong>Two positive sweat chloride tes</strong>t results were obtained on separate days\u00a0<strong>or</strong></li>\n<li>Identification of\u00a0<strong>two CFTR mutations</strong>\u00a0by genetic testing\u00a0<strong>or</strong></li>\n<li>An\u00a0<strong>abnormal</strong>\u00a0measurement of\u00a0<strong>nasal potential difference</strong></li>\n</ul>\n</li>\n</ul>\n<p>Cystic fibrosis requires a multidisciplinary approach to management. The correction of the defect can be via:</p>\n<ul>\n<li><strong>Lumacaftor,</strong>\u00a0an FDA-approved drug that corrects the misfolding and reverts the Phe508del mutation defect</li>\n<li><strong>Ivacaftor</strong>\u00a0potentiates CFTR channel opening and stimulates ion transport</li>\n</ul>\n<p>End-stage pulmonary failure requires\u00a0<strong>lung transplantation</strong>.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n<div class=\"row mt-3\">\u00a0</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "One-day-old term neonate presented with respiratory distress, tachypnea, SpO2-80%, and scaphoid abdomen. Which of the following cannot be used in resuscitation?",
    "choices": [
      {
        "id": 1,
        "text": "Positive pressure ventilation"
      },
      {
        "id": 2,
        "text": "Endotracheal intubation"
      },
      {
        "id": 3,
        "text": "Bag and mask ventilation"
      },
      {
        "id": 4,
        "text": "Oxygen suplementation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario of a one-day term-old neonate presented with respiratory distress, tachypnea, SpO2-80%, and scaphoid abdomen is suggestive of <strong>congenital diaphragmatic hernia. Bag and mask ventilation</strong>\u00a0is to be\u00a0<strong>avoided</strong>\u00a0in the management of this baby.\u00a0Bag and mask ventilation may increase abdominal distension and limit the expansion of the hypoplastic lungs.\u00a0</p>\n<p><strong>Congenital diaphragmatic hernia (CDH)\u00a0</strong>is a birth defect of the diaphragm. Malformation of the diaphragm allows the abdominal organs to push into the chest cavity, hindering proper lung formation and resulting in pulmonary hypoplasia. The most common type of CDH is a\u00a0<strong>Bochdalek</strong>\u00a0<strong>hernia and\u00a0</strong>in most cases involves the\u00a0<strong>left side</strong>.<strong>\u00a0</strong>CDH is a life-threatening pathology in infants and a major cause of morbidity and mortality due to two complications:\u00a0<strong>pulmonary</strong>\u00a0<strong>hypoplasia</strong>\u00a0and\u00a0<strong>pulmonary</strong>\u00a0<strong>hypertension</strong>.</p>\n<p>Babies with CDH present with\u00a0<strong>respiratory distress</strong>\u00a0characterized by tachypnea, grunting, use of accessory muscles, and cyanosis. They may also have a scaphoid abdomen and increased chest wall diameter. Auscultation of the chest may reveal bowel sounds with reduced breath sounds.</p>\n<p>Diagnosis: A chest radiograph and nasogastric tube passage can confirm the diagnosis of CDH. Prenatal diagnosis can be made using ultrasonography between 16 to 24 weeks of gestation. High-speed fetal magnetic resonance imaging (MRI) can further define the lesion.</p>\n<p><strong>Management of CDH:</strong></p>\n<p style=\"text-align: justify;\">The\u00a0<strong>immediate step</strong>\u00a0in the management is the<strong>\u00a0naso- or orogastric tube</strong>\u00a0placement for\u00a0<strong>decompression.\u00a0</strong>The\u00a0<strong>airway</strong>\u00a0is to be<strong>\u00a0secured</strong>\u00a0with\u00a0<strong>endotracheal intubation\u00a0</strong>and respiratory distress is stabilised.\u00a0</p>\n<p style=\"text-align: justify;\">Inhaled<strong>\u00a0nitric oxide</strong>\u00a0is used widely for its pulmonary\u00a0<strong>vasodilatory effect</strong>.\u00a0<strong>Conventional mechanical ventilation</strong>,\u00a0<strong>high-frequency oscillatory ventilation</strong>\u00a0(HFOV), and\u00a0<strong>extracorporeal membrane oxygenation</strong>\u00a0(ECMO) are the 3 main strategies to support<strong>\u00a0respiratory failure</strong>\u00a0in newborn with CDH<strong>.\u00a0</strong></p>\n<p style=\"text-align: justify;\"><strong>Surgical repair</strong>\u00a0of the defect is to be considered at least\u00a0<strong>48 hours after stabilization</strong>\u00a0and resolution of pulmonary hypertension. During surgery, the viscera are reduced into the abdominal cavity, and the posterolateral defect in the diaphragm is closed using interrupted, nonabsorbable sutures.</p>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child with type 1 DM presents with acidosis, and blood sugar 400 mg/dl. What is the further management?",
    "choices": [
      {
        "id": 1,
        "text": "IV insulin stat"
      },
      {
        "id": 2,
        "text": "Normal saline with SC insulin stat"
      },
      {
        "id": 3,
        "text": "Normal saline followed by insulin infusion after 1 hour"
      },
      {
        "id": 4,
        "text": "Normal saline and insulin infusion immediately"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p style=\"text-align: justify;\">A given clinical scenario of a child with type 1 diabetes mellitus (DM) presenting with<strong> acidosis</strong> and a <strong>high blood sugar level</strong> (hyperglycemia) describes a scenario suggestive of <strong>diabetic ketoacidosis</strong> (DKA), a serious complication of uncontrolled diabetes. the further management would be\u00a0<strong>Normal saline followed by insulin infusion after 1 hour.\u00a0</strong></p>\n<p>The International Society for Pediatric and Adolescent Diabetes (<strong>ISPAD</strong>) guidelines provide evidence-based recommendations for the management of\u00a0<strong>DKA</strong>\u00a0(diabetic ketoacidosis) in\u00a0<strong>children</strong>\u00a0<strong>and adolescents.\u00a0</strong></p>\n<p><strong>Diabetic ketoacidosis\u00a0</strong>is the most serious complication of type 1 diabetes mellitus. Clinical manifestations of diabetic ketoacidosis include:</p>\n<div class=\"page\" title=\"Page 3\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li><strong>Dehydration</strong>,\u00a0<strong>tachypnea</strong>\u00a0with deep, sighing respiration (<strong>Kussmaul breathing</strong>)</li>\n<li><strong>Nausea, vomiting</strong>, and\u00a0<strong>abdominal pain</strong>\u00a0that may mimic an acute abdominal condition</li>\n<li><strong>Confusion</strong>, drowsiness, and coma in severe cases.</li>\n</ul>\n<p>The diagnosis of DKA is based on the triad of hyperglycemia, ketosis, and metabolic acidosis. All three biochemical criteria are required to diagnose DKA</p>\n</div>\n</div>\n</div>\n</div>\n<ul>\n<li><strong>Hyperglycemia</strong>\u00a0(blood glucose\u00a0<strong>&gt;200 mg/dl</strong>)</li>\n<li>Venous\u00a0<strong>pH &lt; 7.3</strong>\u00a0or serum bicarbonate &lt;18 mmol/L</li>\n<li><strong>Ketonemia</strong>\u00a0or\u00a0<strong>ketonuria</strong></li>\n</ul>\n<div class=\"page\" title=\"Page 2\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Initial management includes management of the<strong>\u00a0airway, breathing,</strong>\u00a0and\u00a0<strong>circulation</strong>\u00a0(ABC) according to\u00a0Pediatric Advanced Life Support (PALS) guidelines. Following that emergency assessment is done, which includes:</p>\n<ul>\n<li>Immediate measurement of blood glucose, blood or urine ketones, serum electrolytes and blood gases</li>\n<li>Assessment of level of consciousness.</li>\n<li>Two peripheral intravenous (IV) lines should be inserted.</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n<p>The goal of therapy is to\u00a0<strong>correct dehydration</strong>,\u00a0<strong>correct acidosis</strong>,\u00a0<strong>reverse ketosis</strong>, and gradually blood glucose concentration to near normal. Monitor for acute complications, and identify and treat any precipitating event.</p>\n<div class=\"page\" title=\"Page 2\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Fluid replacement should always begin before starting insulin therapy. One or more boluses of\u00a0<strong>0.9% saline</strong> at <strong>10-20 mL/kg\u00a0</strong>are given<strong>\u00a0</strong>to restore peripheral circulation.\u00a0<strong>Insulin therapy</strong>\u00a0with<strong>\u00a00.05\u20130.1 U/kg/hr</strong>\u00a0must begin\u00a0<strong>at least 1 hour after</strong>\u00a0starting fluid replacement therapy. Insulin of\u00a0<strong>0.05 U/kg/hr</strong>\u00a0can be considered if\u00a0<strong>pH</strong>\u00a0is\u00a0<strong>&gt; 7.15</strong>.</p>\n<p><strong>Potassium replacement</strong>\u00a0is given only when potassium is\u00a0<strong>&lt;5.5 mmol/L</strong>. In rare cases of<strong>\u00a0hypokalemia</strong>\u00a0with potassium\u00a0<strong>&lt;3.0</strong>\u00a0mmol/L,\u00a0<strong>defer insulin treatment</strong>.</p>\n<div class=\"page\" title=\"Page 2\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Bicarbonate</strong>\u00a0administration is not recommended except for treatment of\u00a0<strong>severe acidosis</strong>\u00a0(pH &lt; 6.9) or in cases of\u00a0life-threatening hyperkalemia.\u00a0</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3bd9e1e7228e4ca0bf552de377af0dcax1280x2847.JPEG"
    ]
  },
  {
    "text": "A 9-month-old child is brought to the PHC with a fever and cough. She is feeding well and has normal urine output. On examination, a respiratory rate of 48 breaths/min is found and no chest indrawing is seen. What is the next step of management?",
    "choices": [
      {
        "id": 1,
        "text": "Explain danger signs and send home"
      },
      {
        "id": 2,
        "text": "No pneumonia - Give amoxyclav + paracetamol and send home"
      },
      {
        "id": 3,
        "text": "Start IV ceftriaxone"
      },
      {
        "id": 4,
        "text": "Refer as the child has severe pneumonia"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given clinical scenario, a 9-month-old child with normal breathing (<strong>&gt;&nbsp;50/min</strong>&nbsp;RR for infants&nbsp;<strong>2 months&nbsp;</strong>to<strong>&nbsp;12 months </strong>is considered as <strong>fast breathing) </strong>and no chest indrawing is seen. So, the next step in management would be to&nbsp;<strong>explain danger signs and send them home.</strong></p>\n<p>According to the<strong>&nbsp;</strong>IMNCI, three<strong>&nbsp;</strong>key clinical&nbsp;<strong>signs</strong>&nbsp;are used to assess a sick child with suspected pneumonia:</p>\n<ul>\n<li><strong>Respiratory rate</strong>&nbsp;(RR):<strong>&nbsp;d</strong><strong>istinguishes</strong>&nbsp;children who have&nbsp;<strong>pneumonia</strong>&nbsp;from those who do not. Children are classified under pneumonia if:\n<ul>\n<li><strong>&gt;&nbsp;60 breaths</strong>&nbsp;per minute if age &nbsp;is&nbsp;<strong>&lt; 2 months&nbsp;</strong></li>\n<li><strong>&gt;&nbsp;50/min</strong>&nbsp;RR for infants&nbsp;<strong>2 months&nbsp;</strong>to<strong>&nbsp;12 months</strong></li>\n<li><strong>&gt;&nbsp;40/min</strong>&nbsp;RR for children&nbsp;<strong>12 months</strong>&nbsp;to&nbsp;<strong>5 years</strong>&nbsp;of age</li>\n</ul>\n</li>\n<li><strong>Lower chest wall indrawing</strong>&nbsp;refers to the indrawing of the lower chest wall with respect to the child's breathing and indicates&nbsp;<strong>pneumonia</strong></li>\n<li><strong>Stridor&nbsp;</strong>indicates those with&nbsp;<strong>severe pneumonia</strong>&nbsp;requiring hospital<strong>&nbsp;admission.</strong></li>\n</ul>\n<div class=\"ng-scope\">\n<div class=\"ng-scope\">\n<p>The revised classification of acute respiratory&nbsp;infections is simplified to include only two categories of pneumonia:</p>\n<ul>\n<li>Cough and cold, no pneumonia - requires home remedy</li>\n<li>Pneumonia - with&nbsp;<strong>fast breathing&nbsp;</strong>and/or&nbsp;<strong>chest indrawing</strong>, which requires&nbsp;<strong>home therapy</strong>&nbsp;with&nbsp;<strong>oral amoxicillin</strong>.</li>\n<li>Severe pneumonia - pneumonia with&nbsp;<strong>any general danger sign</strong>, which&nbsp;<strong>requires</strong>&nbsp;a&nbsp;<strong>referral</strong>&nbsp;and&nbsp;<strong>injectable therapy</strong>.&nbsp;</li>\n</ul>\n</div>\n</div>\n<div class=\"ng-scope\"><strong>Danger signs&nbsp;</strong>of severe pneumonia are:&nbsp;</div>\n<ul>\n<li>Not able to drink</li>\n<li>Persistent vomiting</li>\n<li>Convulsions</li>\n<li>Lethargic or unconscious</li>\n<li>Stridor in a calm child</li>\n<li>Severe malnutrition</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/402ec23059f642f1840119590a5d55fdx1280x711.PNG"
    ]
  }
];
        let quizName = '268 Paediatrics Ini-Cet 2023';
        let hierarchy = ["Marrow", "PYQs", "Pediatrics"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>