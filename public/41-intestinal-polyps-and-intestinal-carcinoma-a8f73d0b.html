<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>41 Intestinal Polyps And Intestinal Carcinoma - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        PrepLadder / qBank / Pathology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">14</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "<p>During a routine colonoscopy of a 60-year-old male, a small polyp is identified in the colon. Subsequent biopsy results confirm the presence of a hyperplastic polyp. Which characteristic is typically associated with this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Commonly found in the right colon"
      },
      {
        "id": 2,
        "text": "Pathogenesis involves increased epithelial cell turnover"
      },
      {
        "id": 3,
        "text": "Lacks malignant potential"
      },
      {
        "id": 4,
        "text": "Histologically composed of immature goblet cells"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) Lacks <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential</strong></p>\n\n<p><strong>Explanation :</strong></p>\n\n<p>The characteristic of hyperplastic polyps is that they lack <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential.</p>\n\n<p>Hyperplastic polyps:</p>\n\n<ul>\n\t<li>Lacks <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential</li>\n\t<li>Benign epithelial proliferations occurring commonly in the 6th-7th decade.</li>\n\t<li>Formed due to decreased epithelial cell <span class=\"customMeta\" data-dictid=\"a13747deff16927772016cfbf6b284\">turnover</span> and delayed shedding, resulting in a piling up of goblet and <span class=\"customMeta\" data-dictid=\"1ecf648f6f1692777180dda8ce250d\">absorptive</span> cells. (Option B)</li>\n\t<li>Usually less than 5 mm with a smooth, <span class=\"customMeta\" data-dictid=\"bfa856c77716927771939978c5afd0\">nodular</span> appearance and commonly found in the left colon. (Option A)</li>\n\t<li>Mature goblet cells and <span class=\"customMeta\" data-dictid=\"1ecf648f6f1692777180dda8ce250d\">absorptive</span> cells with serrated surface architecture are hallmark findings. (Option D)</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"Hyperplastic polyps (1)\" data-author=\"CC BY SA 3.0\" data-hash=\"749\" data-license=\"Nephrom\" data-source=\"https://commons.wikimedia.org/wiki/File:Hyperplastic_polyp_--_intermed_mag.jpg\" data-tags=\"January2025\" height=\"313\" src=\"https://image.prepladder.com/notes/k0rT6uCkCJfZzvjxSwEe1736998750.png\" width=\"500\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/k0rT6uCkCJfZzvjxSwEe1736998750.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/nxZbisf6cCht16DHdb9m1750745960.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/KqKDZ4mPkp9lUIttBlpu1750746036.mp3"
  },
  {
    "text": "<p>A 55-year-old man undergoes a routine colonoscopy. During the procedure, a polyp is discovered. Histological examination reveals serrated architecture, as shown in the image. Which of the following is true about this polyp?</p>\n\n<p style=\"text-align:center\"><img alt=\"Sessile serrated polyp\" data-author=\"Nephron\" data-hash=\"750\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Sessile_serrated_adenoma_3_intermed_mag.jpg\" data-tags=\"January2025\" height=\"592\" src=\"https://image.prepladder.com/notes/6sKRnAjJQnJ4b3aox6Ak1736999191.png\" width=\"400\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "It has malignant potential"
      },
      {
        "id": 2,
        "text": "Predominantly found in the left colon"
      },
      {
        "id": 3,
        "text": "Serrated architecture is limited to the surface of the lesions"
      },
      {
        "id": 4,
        "text": "Do not require surveillance or follow-up after detection"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Correct Answer: A) </strong><strong>It has <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential</strong></p>\n\n<p><strong>Explanation:</strong><strong>\u00a0</strong></p>\n\n<p>The above image shows serrations throughout the full length of the glands including <span class=\"customMeta\" data-dictid=\"d2a83e1b4c1692777185c446d81c0c\">crypt</span> base which is suggestive of <span class=\"customMeta\" data-dictid=\"3f6a2302971692777198a107e73204\">sessile</span> serrated <span class=\"customMeta\" data-dictid=\"c3c9726266169277718021f4f0fa16\">adenoma</span> which has <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential.</p>\n\n<p>Sessile Serrated Adenomas (SSA):</p>\n\n<ul>\n\t<li>Exhibit serrated architecture throughout the full length of the <span class=\"customMeta\" data-dictid=\"4744bb90c21692777188c8957f9faa\">gland</span> while hyperplastic polyps have serrated architecture only in the upper third of the crypt. (Option C)</li>\n\t<li>It has <span class=\"customMeta\" data-dictid=\"f8aaf091221692777191f73e810e94\">malignant</span> potential</li>\n\t<li>More commonly located in the right colon. (Option B)</li>\n\t<li>Lack typical <span class=\"customMeta\" data-dictid=\"5e1dc9e4e016927771853795d2b0be\">cytologic</span> features of <span class=\"customMeta\" data-dictid=\"984733db481692777186757cce6e6b\">dysplasia</span> found in other adenomas.</li>\n\t<li>Early <span class=\"customMeta\" data-dictid=\"ae13cdc5c3169277719683e9f6bda5\">precursor</span> lesions in the serrated <span class=\"customMeta\" data-dictid=\"e212826c171692777193374ca34435\">neoplasia</span> pathway.</li>\n\t<li>Associated with BRAF-mutated <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> carcinomas.</li>\n\t<li>Require follow-up surveillance for monitoring changes or growth. (Option D)</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [
      "https://image.prepladder.com/notes/6sKRnAjJQnJ4b3aox6Ak1736999191.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/VFc92ZnrSbPagf179Ndy1750746139.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/0KDXa1aJZhjcl75gdOJH1750746223.mp3"
  },
  {
    "text": "<p>A 4-year-old girl presents to the OPD with complaints of rectal bleeding and abdominal pain for the past six months. Investigations reveal approximately 40 hamartomatous colon polyps. The biopsy shows cystic spaces with dilated glands filled with mucin and inflammatory debris. What is the most likely diagnosis for this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Familial adenomatous polyposis"
      },
      {
        "id": 2,
        "text": "Adenocarcinoma colon"
      },
      {
        "id": 3,
        "text": "Juvenile polyposis syndrome"
      },
      {
        "id": 4,
        "text": "Sessile Serrated Adenoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer : C) <span class=\"customMeta\" data-dictid=\"b5d5db1f591692777190869c6a7223\">Juvenile</span> <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> syndrome </strong></p>\n\n<p><strong>Explanation: </strong>The given clinical presentation and investigation findings suggests a possible diagnosis of <span class=\"customMeta\" data-dictid=\"b5d5db1f591692777190869c6a7223\">Juvenile</span> <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">Polyposis</span> Syndrome (JPS).</p>\n\n<p><strong>Juvenile <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> Syndrome</strong></p>\n\n<ul>\n\t<li>Primarily affects children under 5 years old.</li>\n\t<li>Autosomal dominant inheritance</li>\n\t<li>Can be <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">sporadic</span> or syndromic.\n\t<ul>\n\t\t<li>Sporadic: Single polyps.</li>\n\t\t<li>Syndromic: 3-100 polyps.</li>\n\t</ul>\n\t</li>\n\t<li>Linked to mutations in the SMAD4 and BMPR1A genes, part of the TGF-\u03b2 <span class=\"customMeta\" data-dictid=\"f9016f36fd1692777198b0fd5e9c6d\">signaling</span> pathway.</li>\n\t<li>Pedunculated <span class=\"customMeta\" data-dictid=\"b5c135c2311692777196832953e406\">polyp</span> which is usually less than 3 cm in diameter.</li>\n\t<li>Contains <span class=\"customMeta\" data-dictid=\"38c41e122116927771859b63deb0ed\">cystic</span> spaces filled with <span class=\"customMeta\" data-dictid=\"7d30ef9aee16927771936bdac2c1ff\">mucin</span> and <span class=\"customMeta\" data-dictid=\"9d21dd5d3116927771907405b181bc\">inflammatory</span> debris.</li>\n\t<li>Extra-intestinal manifestations include <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> malformations, digital clubbing.</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\" Juvnile polyp\" data-author=\"DRdoubleB\" data-hash=\"752\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:JuvenilePolyp.JPG\" data-tags=\"January2025\" height=\"368\" src=\"https://image.prepladder.com/notes/dOMh4Bqphvtyx99bVLrH1737000207.jpg\" width=\"605\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/dOMh4Bqphvtyx99bVLrH1737000207.jpg"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/2UuNIWGBOR58bpfxIDQN1750746280.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/dWhZA3sN0is62Wz9jqUn1750746332.mp3"
  },
  {
    "text": "<p>A 13-year-old female presents to the OPD due to abdominal pain and blood in stools. On examination, she had pigmented macules on her lips and oral mucosa. Endoscopy reveals multiple large, pedunculated polyps in the small intestine which shows an arborizing pattern of smooth muscle and glands lined by normal epithelium. Which of the following statements is incorrect about this condition?</p>\n\n<p style=\"text-align:center\"><img alt=\"Peutz- jeghers Syndrome- Hamartomatous polyps\" data-author=\"Nephron\" data-hash=\"753\" data-license=\"NA\" data-source=\"https://commons.wikimedia.org/wiki/File:Gastric_Peutz-Jeghers_polyp_-_low_mag.jpg\" data-tags=\"January2025\" height=\"516\" src=\"https://image.prepladder.com/notes/rmsS1SXubZdYVcYYhxzY1737000381.png\" width=\"349\" /></p>\n\n<ol>\n\t<li>Autosomal dominant disorder</li>\n\t<li>Polyps are more common in the colon</li>\n\t<li>Increased risk of developing colon, pancreatic, and breast cancers</li>\n\t<li>Gain-of-function mutation in STK11 gene</li>\n</ol>",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "2 and 4"
      },
      {
        "id": 3,
        "text": "3 and 4"
      },
      {
        "id": 4,
        "text": "1 and 3"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer : B) 2 and 4</strong></p>\n\n<p><strong>Explanation</strong>: The given clinical scenario and <span class=\"customMeta\" data-dictid=\"1e9c8202241692777189dbac6cc062\">histological</span> findings point towards the diagnosis of Peutz-Jeghers syndrome.</p>\n\n<p><strong>Peutz-Jeghers syndrome : </strong></p>\n\n<ul>\n\t<li>Autosomal dominant disorder. <strong>(statement 1)</strong></li>\n\t<li>Caused by a<strong> loss of function <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> in the STK11 gene</strong> <strong>(statement 4)</strong></li>\n\t<li>Presents around 11 years of age.</li>\n\t<li>Characterized by:\n\t<ul>\n\t\t<li>Gastrointestinal <span class=\"customMeta\" data-dictid=\"d10905c64d1692777188b6730d6517\">hamartomatous</span> polyps especially in the small <span class=\"customMeta\" data-dictid=\"7840cca3ed16927771901d2f6cb32b\">intestine</span> <strong>(statement 2)</strong></li>\n\t\t<li>Mucocutaneous <span class=\"customMeta\" data-dictid=\"30261213bf16927771898b5d2f245d\">hyperpigmentation</span> (macules on lips, nostrils, <span class=\"customMeta\" data-dictid=\"d72626dd5c1692777183f1c92b2deb\">buccal</span> mucosa, and extremities).</li>\n\t</ul>\n\t</li>\n\t<li>Polyps are large, pedunculated, and lobulated.</li>\n\t<li>Histology - an arborizing pattern of smooth muscle and glands lined by normal epithelium.</li>\n\t<li>Significantly increased cancer risk<strong> </strong><strong>(statement 3)</strong>\n\t<ul>\n\t\t<li>Gastrointestinal tract, pancreas, breasts, gonads, and uterus.</li>\n\t\t<li>Lifetime cancer risk estimated at 40%</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"Peutz- jeghers Syndrome\" data-author=\"Primary Care Dermatology Society\" data-hash=\"754\" data-license=\"NA\" data-source=\"https://www.pcds.org.uk/clinical-guidance/peutz-jeghers\" data-tags=\"January2025\" height=\"477\" src=\"https://image.prepladder.com/notes/lHS24hUgzTcOEUPbvWaZ1737000604.jpg\" width=\"636\" /></p>",
    "question_images": [
      "https://image.prepladder.com/notes/rmsS1SXubZdYVcYYhxzY1737000381.png"
    ],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/lHS24hUgzTcOEUPbvWaZ1737000604.jpg"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/kb752lPYXkqbxMQWfBWQ1747306487.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/RHF9Y0bj2qf0ExEIYBuT1747306589.mp3"
  },
  {
    "text": "<p>A 58-year-old female presents with weight loss, nail changes, alopecia, and skin hyperpigmentation. Colonoscopy reveals multiple hamartomatous polyps in the intestine. Family history is negative for intestinal cancers. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Tuberous sclerosis"
      },
      {
        "id": 2,
        "text": "Bannayan-Ruvalcaba-Riley Syndrome"
      },
      {
        "id": 3,
        "text": "Cowden syndrome"
      },
      {
        "id": 4,
        "text": "Cronkhite-Canada Syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer:</strong> <strong>D) Cronkhite-Canada Syndrome</strong></p>\n\n<p><strong>Explanation: </strong> The clinical presentation and multiple noncancerous polyps in the colon, coupled with a lack of family history of similar symptoms suggests Cronkhite-Canada Syndrome (CCS).</p>\n\n<p><strong>Cronkhite-Canada syndrome </strong></p>\n\n<ul>\n\t<li>Rare, non-hereditary condition</li>\n\t<li>Mean age of presentation: >50 years</li>\n\t<li>Characterized by:\n\t<ul>\n\t\t<li>Widespread <span class=\"customMeta\" data-dictid=\"9996ef505516927771937fe4ef1222\">non</span> cancerous/hamartomatous <span class=\"customMeta\" data-dictid=\"b3a647ce2516927771881427f56c1d\">gastrointestinal</span> polyposis</li>\n\t\t<li>Cutaneous changes - alopecia, hyperpigmentation)</li>\n\t\t<li>Nail dystrophy</li>\n\t</ul>\n\t</li>\n\t<li>Polyps: Symptoms: Malabsorption, diarrhea, weight loss</li>\n</ul>\n\n<p><strong>Tuberous <span class=\"customMeta\" data-dictid=\"dae4dea0581692777198fdef9fa684\">sclerosis</span> </strong><strong>(Option A)</strong> is a <span class=\"customMeta\" data-dictid=\"d64938bfc81692777193fb87a47c80\">neurocutaneous</span> disorder resulting from mutations in the TSC1 (hamartin) or TSC2 (tuberin) genes. Patients exhibit neurological symptoms like seizures, along with skin abnormalities. The syndrome also includes <span class=\"customMeta\" data-dictid=\"d10905c64d1692777188b6730d6517\">hamartomatous</span> polyps in the intestine.</p>\n\n<p><strong>Bannayan-Ruvalcaba-Riley Syndrome</strong><strong> (Option B)</strong> is a genetic condition characterized by macrocephaly, intestinal <span class=\"customMeta\" data-dictid=\"d10905c64d1692777188b6730d6517\">hamartomatous</span> polyps and <span class=\"customMeta\" data-dictid=\"85dafbf32f1692777195b9d9f035d8\">pigmented</span> <span class=\"customMeta\" data-dictid=\"3c0a321cf016927771917a4456d54d\">maculae</span> of the <span class=\"customMeta\" data-dictid=\"e62ab50e7a16927771882c6a886b18\">glans</span> penis.</p>\n\n<p><strong>Cowden syndrome </strong><strong>(Option C)</strong> is caused by <span class=\"customMeta\" data-dictid=\"7a67bdf6f81692777193cfd480f228\">mutation</span> of PTEN gene on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 10. It is associated with multiple <span class=\"customMeta\" data-dictid=\"d10905c64d1692777188b6730d6517\">hamartomatous</span> polyps, <span class=\"customMeta\" data-dictid=\"1bbae82f1f16927771824f797639fa\">benign</span> skin tumors like <span class=\"customMeta\" data-dictid=\"062c0dd7821692777200c3dfc0b6bf\">trichilemmoma</span> and an increased risk of breast, thyroid, and endometrial cancers.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/2VeYQPIDEUm4hXazCMGk1750746413.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/IrA4GhofkT9uxBat0rtQ1750746493.mp3"
  },
  {
    "text": "<p>A 20-year-old man with a family history of colorectal carcinoma presents with chronic abdominal discomfort and occasional rectal bleeding.Upon further evaluation, a mutation in APC gene is identified leading to a diagnosis of Familial Adenomatous Polyposis. Which of the following statement is true regarding FAP?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Mutation in 6th chromosome"
      },
      {
        "id": 2,
        "text": "50 % risk of colon cancer if untreated"
      },
      {
        "id": 3,
        "text": "Presence of a minimum of 100 polyps"
      },
      {
        "id": 4,
        "text": "Congenital atrophy of the retinal pigment epithelium"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) </strong><strong>Presence of a minimum of 100 polyps.</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong>Classic <span class=\"customMeta\" data-dictid=\"3140428620169277720288fbf74aad\">FAP</span> is characterized by the presence of a minimum of 100 polyps</p>\n\n<p>Familial <span class=\"customMeta\" data-dictid=\"bf1f32fbd81692777180c0d2485ab2\">Adenomatous</span> <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">Polyposis</span> (FAP)</p>\n\n<ul>\n\t<li>Autosomal dominant disorder caused by <span class=\"customMeta\" data-dictid=\"f2ee7650b0169277718135012a6c14\">APC</span> gene mutations on <span class=\"customMeta\" data-dictid=\"7157c1f59916927771846116d74646\">chromosome</span> 5 <strong>(Option A)</strong></li>\n\t<li>Numerous intestinal polyps develop</li>\n\t<li>Classic FAP:\n\t<ul>\n\t\t<li>Diagnosed with at least 100 polyps <strong>(Option C)</strong></li>\n\t\t<li>Almost 100% risk of <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer if untreated <strong>(Option B)</strong></li>\n\t\t<li>Commonly develops by 30 years, almost always by 50 years</li>\n\t</ul>\n\t</li>\n\t<li>Attenuated <span class=\"customMeta\" data-dictid=\"3140428620169277720288fbf74aad\">FAP</span> (AFAP):\n\t<ul>\n\t\t<li>Primarily affects the <span class=\"customMeta\" data-dictid=\"bdbac654081692777196f9aab116f0\">proximal</span> colon</li>\n\t\t<li>Fewer polyps (average <30 polyps)</li>\n\t\t<li>Associated with <span class=\"customMeta\" data-dictid=\"488a4efe7d16927771840c9e29f164\">congenital</span> <span class=\"customMeta\" data-dictid=\"3baac9012a1692777189cb4dc70c04\">hypertrophy</span> of the <span class=\"customMeta\" data-dictid=\"fb7a2c30e416927771972f7df6f8c0\">retinal</span> <span class=\"customMeta\" data-dictid=\"05e2e2617c16927771952bcbeea08b\">pigment</span> <span class=\"customMeta\" data-dictid=\"53782f88d31692777187177cb73b24\">epithelium</span> <strong>(Option D)</strong></li>\n\t</ul>\n\t</li>\n\t<li>Standard treatment: <span class=\"customMeta\" data-dictid=\"a87d6eeedb16927771967434e19075\">Prophylactic</span> <span class=\"customMeta\" data-dictid=\"b2ba93970916927771843a4ee3c4fd\">colectomy</span> to prevent <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer</li>\n\t<li>Post-colectomy risks: Cancer at <span class=\"customMeta\" data-dictid=\"0315714964169277718792a45c23cd\">extracolonic</span> sites, including the <span class=\"customMeta\" data-dictid=\"3c1c3aa8b91692777181989b80fab8\">ampulla</span> of <span class=\"customMeta\" data-dictid=\"fcd0e63fa416927772013a9b42b50e\">Vater</span> and stomach</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\" <span class=\"customMeta\" data-dictid=\"3140428620169277720288fbf74aad\">FAP</span> gross\" data-author=\"Department of Pathology, Calicut Medical College\" data-hash=\"755\" data-license=\"CC BY SA 4.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Familial_Adenomatous_Polyposes_colon_-2.jpg\" data-tags=\"January2025\" height=\"400\" src=\"https://image.prepladder.com/notes/Ubf3jpEH6EikeIUZtkTP1737000901.png\" width=\"500\" /></p>\n\n<p>\u00a0 \u00a0\u00a0</p>\n\n<p style=\"text-align:center\"><img alt=\"Adenomatous polyp histopathology\" data-author=\"Nephron\" data-hash=\"756\" data-license=\"CC BY SA 3.0\" data-source=\"https://commons.wikimedia.org/wiki/File:Tubular_adenoma_2_high_mag.jpg\" data-tags=\"January2025\" height=\"400\" src=\"https://image.prepladder.com/notes/cnFJNiJKq070wrJZysVq1737000933.png\" width=\"550\" /></p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/cnFJNiJKq070wrJZysVq1737000933.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/MXs6a22psXsIX2UBaMT91750746603.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/og7ReIUIelul3jMaCegb1750746704.mp3"
  },
  {
    "text": "<p>A 28-year-old woman presents with a history of unexplained weight loss along with multiple sebaceous cysts on her face and scalp. She has a family history of colorectal cancer. Upon further examination, she is found to have a bony lesion on her jaw. What is the most likely diagnosis?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Turcot syndrome"
      },
      {
        "id": 2,
        "text": "Gardner syndrome"
      },
      {
        "id": 3,
        "text": "Lynch syndrome"
      },
      {
        "id": 4,
        "text": "MUTYH Associated Polyposis (MAP)"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer:B)\u00a0</strong>Gardner syndrome</p>\n\n<p><strong>Explanation</strong></p>\n\n<p>The clinical findings given suggest <span class=\"customMeta\" data-dictid=\"19a263793116927771888661f5a936\">Gardner syndrome</span> as a possible diagnosis.<br />\n<strong>Gardner syndrome </strong></p>\n\n<ul>\n\t<li>An autosomal dominant condition</li>\n\t<li>Characterized by <span class=\"customMeta\" data-dictid=\"566fcef0991692777184068f36db82\">colonic</span> <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> and <span class=\"customMeta\" data-dictid=\"0315714964169277718792a45c23cd\">extracolonic</span> manifestations</li>\n\t<li>Due to mutations in <span class=\"customMeta\" data-dictid=\"f2ee7650b0169277718135012a6c14\">APC</span> gene</li>\n\t<li>Predisposition to colo-rectal cancer present</li>\n</ul>\n\n<p><strong>Extracolonic manifestations include </strong></p>\n\n<ol>\n\t<li>Osteomas (commonly in skull and mandible)</li>\n\t<li>Supernumerary teeth</li>\n\t<li>Epidermoid cysts</li>\n\t<li>Fibromas</li>\n\t<li>Thyroid and <span class=\"customMeta\" data-dictid=\"ef7857fffd1692777186e935efc664\">desmoid</span> tumors</li>\n</ol>\n\n<p>\u00a0</p>\n\n<p style=\"text-align:center\">Supernumerary teeth</p>\n\n<p style=\"text-align:center\"><img alt=\"Gardner Syndrome\" data-author=\"Balaji Krishnan, Balaji Narasimhan, C Nirupama\" data-hash=\"757\" data-license=\"CC BY-NC-SA 4.0\" data-source=\"https://www.researchgate.net/figure/Mandibular-arch-showing-supernumerary-teeth_fig5_271259272\" data-tags=\"January2025\" height=\"359\" src=\"https://image.prepladder.com/notes/9UNweyF5PilA4IAmJOgv1737001504.png\" width=\"500\" /></p>\n\n<p><strong>Option A) Turcot syndrome:</strong></p>\n\n<p>Turcot syndrome can also arise from mutations in <span class=\"customMeta\" data-dictid=\"f2ee7650b0169277718135012a6c14\">APC</span> genes. But, there is association with brain tumors along with <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer</p>\n\n<p>\u00a0</p>\n\n<p><strong>Option C) </strong><strong>Lynch syndrome:</strong></p>\n\n<ul>\n\t<li>AKA HNPCC(hereditary <span class=\"customMeta\" data-dictid=\"9996ef505516927771937fe4ef1222\">non</span> <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer)</li>\n\t<li>Autosomal dominant condition due to mutations in MLH 1 and <span class=\"customMeta\" data-dictid=\"2d7f57809a1692777193f8ff4509bd\">MSH</span> 2</li>\n\t<li>Characterized by increases risk of <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer,<strong> endometrial, ovarian,</strong> <span class=\"customMeta\" data-dictid=\"0c847ca20416927772011b3397c2fd\">uterus</span> and Pancreatic cancers</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Option D) </strong><strong>MUTYH Associated <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">Polyposis</span> (MAP)</strong></p>\n\n<ul>\n\t<li>Rare autosomal <span class=\"customMeta\" data-dictid=\"d54db2110416927771971e7c011a9f\">recessive</span> disorder due to mutations in the MUTYH gene.</li>\n\t<li>Occurs later in life compared to other <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> syndromes</li>\n\t<li>Involves fewer than 100 polyps and individuals with MAP have an increased risk of <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer.</li>\n\t<li>Unlike Gardner syndromes, MAP is not associated with osteomas or <span class=\"customMeta\" data-dictid=\"1bbfba21481692777187dd3141ea3b\">epidermoid</span> cysts.</li>\n</ul>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/9UNweyF5PilA4IAmJOgv1737001504.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/vky9MyxCmYjFwG5piNNY1750746828.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/C3t0V1u3rGlcJqqSuHwo1750746952.mp3"
  },
  {
    "text": "<p>A 6 cm polyp is identified in the descending colon during a routine colonoscopy. Histological examination reveals villous architecture with high-grade dysplasia. Based on this scenario, which factors most strongly correlate with the risk of malignancy in colorectal adenomas?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Presence of villous architecture"
      },
      {
        "id": 2,
        "text": "Size of the adenoma"
      },
      {
        "id": 3,
        "text": "Histologic grade of dysplasia"
      },
      {
        "id": 4,
        "text": "Location within the gastrointestinal tract"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Size </strong><strong>of the adenoma</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong>The size of <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> adenomas is the most critical factor associated with the risk of malignancy.</p>\n\n<ul>\n\t<li>Larger adenomas are most likely to develop into <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> carcinoma</li>\n\t<li>Adenomas larger than 4 cm in <span class=\"customMeta\" data-dictid=\"afb15e4a331692777186e495b370a1\">diameter</span> have nearly a 40% chance of containing <span class=\"customMeta\" data-dictid=\"1c5272ad3d1692777190e71409d07a\">invasive</span> cancer.</li>\n</ul>\n\n<p>\u00a0</p>\n\n<p><strong>Villous architecture</strong><strong>(Option A)</strong><strong>: <span class=\"customMeta\" data-dictid=\"838d2bdb8516927772023871643ffb\">Villous</span> adenomas are associated with a higher <span class=\"customMeta\" data-dictid=\"17cd3771bb1692777190950c142dbe\">incidence</span> of cancer than <span class=\"customMeta\" data-dictid=\"98d387b7bd1692777201278b27be72\">tubular</span> adenomas,</strong> but this correlation primarily arises from their larger size rather than their architectural characteristics alone.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Histologic <span class=\"customMeta\" data-dictid=\"d4ae50897e16927771884b5c46ba7d\">grade</span> of dysplasia</strong><strong>(Option C)</strong><strong>: </strong>High-grade <span class=\"customMeta\" data-dictid=\"984733db481692777186757cce6e6b\">dysplasia</span> within an individual <span class=\"customMeta\" data-dictid=\"b5c135c2311692777196832953e406\">polyp</span> increases its risk of harboring cancer. However, <span class=\"customMeta\" data-dictid=\"a77eb309ca16927771897b99ead59f\">histologic</span> <span class=\"customMeta\" data-dictid=\"d4ae50897e16927771884b5c46ba7d\">grade</span> of <span class=\"customMeta\" data-dictid=\"984733db481692777186757cce6e6b\">dysplasia</span> is not the primary factor correlating with the overall risk of <span class=\"customMeta\" data-dictid=\"0c7efd2b8716927771914c8cb19e54\">malignancy</span> across adenomas.</p>\n\n<p>\u00a0</p>\n\n<p><strong>Gastrointestinal <span class=\"customMeta\" data-dictid=\"1a1307223f16927772017a994bfc39\">tract</span> location </strong><strong>(Option D)</strong><strong>: </strong>While certain types of polyps may have preferences for specific locations within the <span class=\"customMeta\" data-dictid=\"b3a647ce2516927771881427f56c1d\">gastrointestinal</span> <span class=\"customMeta\" data-dictid=\"1a1307223f16927772017a994bfc39\">tract</span> (e.g., <span class=\"customMeta\" data-dictid=\"3f6a2302971692777198a107e73204\">sessile</span> serrated lesions are more common in the right colon), location alone is not the strongest predictor of <span class=\"customMeta\" data-dictid=\"0c7efd2b8716927771914c8cb19e54\">malignancy</span> in <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> adenomas.</p>\n\n<p>\u00a0</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": null,
    "explanation_audio_hin": null
  },
  {
    "text": "<p>A patient underwent genetic testing after being diagnosed with colon cancer. Testing reveals a mutation associated with Hereditary Nonpolyposis Colorectal Cancer (HNPCC). Which of the following genes is defective in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "SMAD4, BMPR1"
      },
      {
        "id": 2,
        "text": "STK11"
      },
      {
        "id": 3,
        "text": "APC, MUTYH"
      },
      {
        "id": 4,
        "text": "MLH1, MSH2"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D)</strong> <strong>MLH1 and MSH2 </strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>\u00a0</p>\n\n<p>Hereditary Nonpolyposis Colorectal Cancer (HNPCC), also known as Lynch syndrome, is caused by inherited mutations in DNA <span class=\"customMeta\" data-dictid=\"d949802d90169277719238da3d8f63\">mismatch repair</span> (MMR) genes - MSH2 and MLH1.</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:626px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Genes mutation</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Manifestation</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>MLH1, MSH2 (Option D)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Results in <span class=\"customMeta\" data-dictid=\"20b150babc1692777192cc2f5fe1e3\">microsatellite</span> instability</p>\n\n\t\t\t<p>Causes cluster of cancer: Colorectal, Endometrial, Ovarian, Pancreatic cancers</p>\n\n\t\t\t<p>Colon cancer develops at a young age and it usually occurs in the right side</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>SMAD4 and BMPR1</p>\n\n\t\t\t<p>(Option A)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Juvenile <span class=\"customMeta\" data-dictid=\"fe6b8df2fa1692777196938c42762a\">polyposis</span> syndrome</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>STK11 (Option B)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Peutz-Jeghers syndrome</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>APC gene (Option C)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Familial Adenomatous Polyposis(FAP), <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">sporadic</span> <span class=\"customMeta\" data-dictid=\"0fce15e71f1692777184feb9af5303\">colon</span> cancer, Gardner syndrome and Turcot syndrome</p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>MUTYH (Option C)</p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>MUTYH-associated polyposis.</p>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/HKdJSCFISxxTbGBqIY5t1746452633.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/twpuLXer6onkkZOecYVx1746452803.mp3"
  },
  {
    "text": "<p>A 55-year-old male presents to the clinic with complaints of recurrent abdominal discomfort and changes in bowel habits over the past few months. Further investigation with colonoscopy confirmed the presence of adenocarcinoma. Which of the following factors is most closely associated with this condition?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "Use of aspirin"
      },
      {
        "id": 2,
        "text": "Estrogen replacement therapy"
      },
      {
        "id": 3,
        "text": "High intake of unabsorbable vegetable fiber"
      },
      {
        "id": 4,
        "text": "High consumption of red meat"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Correct Answer: D) </strong><strong>High consumption of red meat</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>High consumption of red meat is associated with increased risk of <span class=\"customMeta\" data-dictid=\"362992dbb11692777180f9017fc04d\">adenocarcinoma</span> of the colon</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:667px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Factors increasing the risk</strong></p>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p><strong>Factors decreasing the risk</strong></p>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Low fiber, high fat diet</li>\n\t\t\t\t<li>High <span class=\"customMeta\" data-dictid=\"6cdcd39cf2169277719068e247e38d\">intake</span> of red meat and processed meat</li>\n\t\t\t\t<li>Increased <span class=\"customMeta\" data-dictid=\"5f526a682c16927771831cac5b3711\">calorie</span> <span class=\"customMeta\" data-dictid=\"6cdcd39cf2169277719068e247e38d\">intake</span> and obesity</li>\n\t\t\t\t<li>Family history of <span class=\"customMeta\" data-dictid=\"0fce15e71f1692777184feb9af5303\">colon</span> cancer</li>\n\t\t\t\t<li>Personal history of adenomas</li>\n\t\t\t\t<li>Smoking and alcohol</li>\n\t\t\t\t<li>Inflammatory <span class=\"customMeta\" data-dictid=\"37863e7aec169277718310f33c6a11\">bowel</span> disease</li>\n\t\t\t\t<li>Lynch syndrome</li>\n\t\t\t\t<li>FAP</li>\n\t\t\t\t<li>Acromegaly</li>\n\t\t\t\t<li>Pelvis irradiation</li>\n\t\t\t\t<li>Streptococcus bovis septicemia</li>\n\t\t\t\t<li>Ureterosigmoidoscopy</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t\t<td style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>High fiber diet</li>\n\t\t\t\t<li>Intake of fish (omega-3 <span class=\"customMeta\" data-dictid=\"bc6cd9a9f9169277720261812ea113\">fatty</span> acids), fruits and vegetables (Vit A, C, E)</li>\n\t\t\t\t<li>NSAID use, particularly Aspirin</li>\n\t\t\t\t<li>Folic acid</li>\n\t\t\t\t<li>Calcium</li>\n\t\t\t\t<li>Hormone replacement therapy</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t</tbody>\n</table>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/yR6iJuVHdJKmiSpmfvxb1750747055.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/XVBZM3ZlFY5HHzYJ2HKY1750747106.mp3"
  },
  {
    "text": "<p>A 55-year-old female presents with abdominal pain, changes in bowel habits, unintended weight loss. A previous colonoscopy showed a polyp, but a recent one confirmed colorectal adenocarcinoma. Which gene mutations are characteristically associated with development of colorectal adenocarcinoma?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "APC, KRAS, SMAD2, and MLH1"
      },
      {
        "id": 2,
        "text": "TP53, BRAF, TGFBR2, and BAX"
      },
      {
        "id": 3,
        "text": "APC, KRAS, SMAD4 and TP53"
      },
      {
        "id": 4,
        "text": "APC, KRAS, TP53, and MYC"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) APC, KRAS, SMAD4 and TP53</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The genes associated with development of <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> are APC, KRAS, SMAD4 and TP53.</p>\n\n<ul>\n\t<li>Adenoma-Carcinoma Sequence: Accounts for up to 80% of <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">sporadic</span> cancers.</li>\n\t<li>APC Gene Mutations:\n\t<ul>\n\t\t<li>Leads to \u03b2-catenin accumulation and Wnt <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> activation.</li>\n\t\t<li>\"First hit\": <span class=\"customMeta\" data-dictid=\"a325d0c14e16927771992fe8a96758\">Sporadic</span> <span class=\"customMeta\" data-dictid=\"2f7bf58a321692777190e32a914615\">inactivation</span> of APC.</li>\n\t\t<li>\"Second hit\": Loss of second APC copy</li>\n\t</ul>\n\t</li>\n\t<li>KRAS Mutations:\n\t<ul>\n\t\t<li>Promote growth and prevent apoptosis.</li>\n\t</ul>\n\t</li>\n\t<li>SMAD2 and SMAD4 Mutations:\n\t<ul>\n\t\t<li>Disrupt TGF-\u03b2 pathway, causing uncontrolled proliferation.</li>\n\t</ul>\n\t</li>\n\t<li>TP53 Mutations:\n\t<ul>\n\t\t<li>Occur in later stages of tumor progression.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p style=\"text-align:center\"><img alt=\"Colorectal adenoma- carcinoma sequence\" data-author=\"NA\" data-hash=\"758\" data-license=\"NA\" data-source=\"NA\" data-tags=\"January2025\" height=\"765\" src=\"https://image.prepladder.com/notes/jK2AYUAKNQCxiKjCy6wb1737002038.png\" width=\"1000\" /></p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/jK2AYUAKNQCxiKjCy6wb1737002038.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/Msa7eaWv3ItCB87z6dCr1750747187.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/nSlak06sbTTZyEO1keEi1750747262.mp3"
  },
  {
    "text": "<p>A 45-year-old female presents with abdominal pain, changes in bowel habits, and weight loss. Her mother and aunt were diagnosed with endometrial and ovarian cancer in their 50s. A colonoscopy and a biopsy confirm well-differentiated adenocarcinoma. Which genetic pathway is most likely associated with adenocarcinoma in this patient?</p>\n\n<p>\u00a0</p>",
    "choices": [
      {
        "id": 1,
        "text": "APC/\u03b2-catenin pathway"
      },
      {
        "id": 2,
        "text": "TGF-\u03b2 signaling pathway"
      },
      {
        "id": 3,
        "text": "DNA mismatch repair pathway"
      },
      {
        "id": 4,
        "text": "BAX pathway"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Correct Answer: C) DNA <span class=\"customMeta\" data-dictid=\"d949802d90169277719238da3d8f63\">mismatch repair</span> pathway</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>The patient's family history of endometrial and ovarian cancer, combined with her well-differentiated adenocarcinoma, suggests Lynch syndrome (HNPCC) which is associated with DNA <span class=\"customMeta\" data-dictid=\"d949802d90169277719238da3d8f63\">mismatch repair</span> pathway</p>\n\n<p>Lynch syndrome occurs due to <span class=\"customMeta\" data-dictid=\"7fdc76e59a169277718826b9b9806d\">germline</span> mutations in DNA <span class=\"customMeta\" data-dictid=\"d949802d90169277719238da3d8f63\">mismatch repair</span> (MMR) genes resulting in <span class=\"customMeta\" data-dictid=\"20b150babc1692777192cc2f5fe1e3\">microsatellite</span> <span class=\"customMeta\" data-dictid=\"acb259200b16927771908888d1377c\">instability</span> (MSI)</p>\n\n<p style=\"text-align:center\"><img alt=\"Lynch syndrome Pathogenesis\" data-author=\"NA\" data-hash=\"759\" data-license=\"NA\" data-source=\"NA\" data-tags=\"January2025\" height=\"777\" src=\"https://image.prepladder.com/notes/u4xw5lBon8wJqVfISoup1737002237.png\" width=\"777\" /></p>\n\n<p><strong>Option A)</strong> APC/\u03b2-catenin pathway: This is commonly associated with the classic <span class=\"customMeta\" data-dictid=\"57856407da1692777180df8ae7ea5a\">adenoma-carcinoma sequence</span> in <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> adenocarcinoma.</p>\n\n<p><strong>Options B & D): </strong>TGF-\u03b2 <span class=\"customMeta\" data-dictid=\"f9016f36fd1692777198b0fd5e9c6d\">signaling</span> <span class=\"customMeta\" data-dictid=\"3aa5abc2fa169277719488e088076d\">pathway</span> and pro-apoptotic protein BAX regulate cell growth, differentiation, and apoptosis. While these signalling pathways are alterations in <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> cancer, they are not commonly associated with MSI or Lynch syndrome.</p>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [
      "https://image.prepladder.com/notes/u4xw5lBon8wJqVfISoup1737002237.png"
    ],
    "explanation_audio_eng": "https://image.prepladder.com/content/ukRXAk33d702jKzwjpwz1750749164.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/sVDnfOXlTAz1Lf9DrgsE1750749249.mp3"
  },
  {
    "text": "<p>Which of the following is the most common site of metastasis for colon adenocarcinoma?</p>",
    "choices": [
      {
        "id": 1,
        "text": "Brain"
      },
      {
        "id": 2,
        "text": "Lungs"
      },
      {
        "id": 3,
        "text": "Bones"
      },
      {
        "id": 4,
        "text": "Liver"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>\u00a0</p>\n\n<p><strong>Correct Answer</strong>: <strong>D) Liver</strong></p>\n\n<p>\u00a0</p>\n\n<p><strong>Explanation: </strong>The liver is the most common site of distant <span class=\"customMeta\" data-dictid=\"d3251bfb0b1692777192b069d7ba4a\">metastasis</span> for <span class=\"customMeta\" data-dictid=\"0fce15e71f1692777184feb9af5303\">colon</span> adenocarcinoma.</p>\n\n<ul>\n\t<li>This is due to the <span class=\"customMeta\" data-dictid=\"a74252404f1692777196d3f24bde2d\">portal</span> <span class=\"customMeta\" data-dictid=\"96e7e3fecc16927772018cb9f8c8cd\">venous</span> <span class=\"customMeta\" data-dictid=\"dd824a31e71692777186c7f8168998\">drainage</span> of the colon, which allows cancer cells to spread easily to the liver.</li>\n\t<li>Other sites :Lymph nodes, lungs, and bones can metastasize</li>\n\t<li>Prognostic factors\n\t<ul>\n\t\t<li>Depth of invasion</li>\n\t\t<li>Lymph <span class=\"customMeta\" data-dictid=\"b10ce4acbf169277719323ffd12306\">node</span> metastases.</li>\n\t</ul>\n\t</li>\n</ul>\n\n<p>\u00a0</p>",
    "question_images": [],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/1gUfdGf2Lfs6L5YR0YTd1750749307.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/eTdO22GYRriw9HzlOdbW1750749352.mp3"
  },
  {
    "text": "<p>A 60-year-old male presents with abdominal pain, altered bowel habits and 5kg weight loss in one month. A barium enema study showed the following finding. Which of the following statements is true about the patient's condition?</p>\n\n<p><img alt=\"Apple Core Appearance - Ca Colon\" data-author=\"Ahmed Alzaraa, Kurzatkowski Krzysztof, Raphael Uwechue, Ming Tee\" data-hash=\"5499\" data-license=\"CC BY 3.0 \" data-source=\"https://www.researchgate.net/figure/Apple-core-lesion-of-the-colon-shown-on-barium-enema-arrow_fig3_38094336\" data-tags=\"\" height=\"500\" src=\"https://image.prepladder.com/notes/Y4KL6GMa2HZOrFAypvjc1743430181.png\" width=\"500\" /></p>",
    "choices": [
      {
        "id": 1,
        "text": "Presents asweakness due to iron deficiency anemia"
      },
      {
        "id": 2,
        "text": "Leads to a napkin-ring constriction and luminal narrowing"
      },
      {
        "id": 3,
        "text": "Growth tends to be polypoidal (growth is into the wall of the intestine?)"
      },
      {
        "id": 4,
        "text": "HPE commonly shows signet-ring cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Correct Answer: B) Leads to a napkin-ring <span class=\"customMeta\" data-dictid=\"4880e9b3761692777185e64eba797c\">constriction</span> and <span class=\"customMeta\" data-dictid=\"fbb10919e516927771917a9afcb633\">luminal</span> narrowing</strong></p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>Distal <span class=\"customMeta\" data-dictid=\"f04bf2125316927771847bfe139191\">colorectal</span> <span class=\"customMeta\" data-dictid=\"988c19e3131692777183b6744d1920\">carcinoma</span> leads to formation of a napkin ring <span class=\"customMeta\" data-dictid=\"4880e9b3761692777185e64eba797c\">constriction</span> and <span class=\"customMeta\" data-dictid=\"fbb10919e516927771917a9afcb633\">luminal</span> narrowing which can be seen as an apple core appearance on <span class=\"customMeta\" data-dictid=\"55052c0f0616927771829c99eec183\">barium</span> <span class=\"customMeta\" data-dictid=\"981cb55fe1169277718759ac720c5d\">enema</span> study</p>\n\n<p>\u00a0</p>\n\n<table cellspacing=\"0\" style=\"border-collapse:collapse; width:668px\">\n\t<tbody>\n\t\t<tr>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Proximal adenocarcinoma</p>\n\n\t\t\t<p>(masses on the <span class=\"customMeta\" data-dictid=\"603036123f1692777183f87e582e3e\">caecum</span> and <span class=\"customMeta\" data-dictid=\"62f0d7c8491692777182ab7cc82edb\">ascending</span> colon)</p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Grow as polypoidal and <span class=\"customMeta\" data-dictid=\"a6b9f7eebc16927771871910d2eb87\">exophytic</span> masses which extend along one wall. (Option C)</li>\n\t\t\t\t<li>Present with <span class=\"customMeta\" data-dictid=\"c8d9b6cbbb1692777194c4bc31f01f\">occult</span> anemia, causing late-stage weakness. (Option A)</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<p>Distal Adenocarcinoma</p>\n\t\t\t</td>\n\t\t\t<td rowspan=\"2\" style=\"border-bottom:1px solid #000000; border-left:1px solid #000000; border-right:1px solid #000000; border-top:1px solid #000000; vertical-align:top\">\n\t\t\t<ul>\n\t\t\t\t<li>Equally distributed along the colon.</li>\n\t\t\t\t<li>Lesions are annular, causing napkin-ring constrictions and <span class=\"customMeta\" data-dictid=\"fbb10919e516927771917a9afcb633\">luminal</span> narrowing.(Option B)</li>\n\t\t\t\t<li>Barium study - apple core appearance</li>\n\t\t\t\t<li>Present early with changes in <span class=\"customMeta\" data-dictid=\"37863e7aec169277718310f33c6a11\">bowel</span> habits, Hematochezia, cramping, left lower <span class=\"customMeta\" data-dictid=\"3a757d7c1216927771968223be411d\">quadrant</span> pain.</li>\n\t\t\t</ul>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr>\n\t\t</tr>\n\t</tbody>\n</table>\n\n<p>\u00a0</p>\n\n<p>Cell Composition:</p>\n\n<ul>\n\t<li>Tall columnar cells resembling <span class=\"customMeta\" data-dictid=\"fd29b16a0e1692777186324bd9a553\">dysplastic</span> <span class=\"customMeta\" data-dictid=\"53782f88d31692777187177cb73b24\">epithelium</span> in adenomas.</li>\n\t<li>Mucinous Adenocarcinoma:Contains signet-ring cells producing abundant mucin. They are rare and associated with poor prognosis. (Option D)</li>\n</ul>",
    "question_images": [
      "https://image.prepladder.com/notes/Y4KL6GMa2HZOrFAypvjc1743430181.png"
    ],
    "explanation_video": null,
    "explanation_images": [],
    "explanation_audio_eng": "https://image.prepladder.com/content/46ptre1puPKamrUH7Si31750749543.mp3",
    "explanation_audio_hin": "https://image.prepladder.com/content/xtlTCnCfNRR1rtlWn6vW1750749643.mp3"
  }
];
        let quizName = '41 Intestinal Polyps And Intestinal Carcinoma';
        let hierarchy = ["PrepLadder", "qBank", "Pathology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>