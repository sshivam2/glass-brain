<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fmge Mini Test - 1 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / FMGE Mini Test Series / 2024
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">30</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "The police hands over the body of a person who died due to hanging to you for an autopsy. Which of the following incisions is preferred in this case?",
    "choices": [
      {
        "id": 1,
        "text": "I shaped incision"
      },
      {
        "id": 2,
        "text": "Modified Y shaped incision"
      },
      {
        "id": 3,
        "text": "Y shaped incision"
      },
      {
        "id": 4,
        "text": "Elongated X shaped incision"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The&nbsp;<strong>incision</strong>&nbsp;preferred in the case of&nbsp;<strong>asphyxial death</strong>&nbsp;due to&nbsp;<strong>neck compression</strong>&nbsp;(as in hanging) is the<strong>&nbsp;modified Y-shaped incision.</strong></p>\n<p>In strangulation, hanging, and any condition where the<strong>&nbsp;larynx&nbsp;</strong>might be&nbsp;<strong>damaged</strong>, a<strong>&nbsp;modified Y-shaped</strong>&nbsp;incision is to be preferred. This incision is used because the skin of the upper neck can then be dissected off the mandible and raised to give a wide approach to the neck structures.</p>\n<p>Given below are types of incisions done for an autopsy:</p>\n<p><strong>Y-Shaped Incision</strong>: Commences at the&nbsp;<strong>acromial process&nbsp;</strong>on the shoulder on either side. It runs downwards and anteriorly&nbsp;<strong>beneath the breasts</strong>&nbsp;as to meet at the xiphisternum in the midline. It then runs downwards as in an I-shaped incision to the symphysis pubis. It is&nbsp;<strong>preferred in females</strong>. It is more cosmetically accepted as the incision and the stitches are minimally seen after the autopsy. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/7936d1aa390e490eba8aef0d06673327x1280x1461.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1efd6e6fdf7446749707ff0986981e4ax1280x1461.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a62432d2a6a64ea69b99385be4431ae1x1280x1462.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2b668e16807649d781f2c0a359e71723x1280x1462.JPEG"
    ]
  },
  {
    "text": "Which among the following is the most potent inhaled anesthetic?",
    "choices": [
      {
        "id": 1,
        "text": "Halothane"
      },
      {
        "id": 2,
        "text": "Isoflurane"
      },
      {
        "id": 3,
        "text": "Desflurane"
      },
      {
        "id": 4,
        "text": "Sevoflurane"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>most potent</strong> inhaled anesthetic among the given options is <strong>halothane,&nbsp;</strong>with a minimum alveolar concentration (MAC) value of 0.75%.</p>\n<p>The <strong>least potent</strong> inhaled anesthetic is <strong>nitrous oxide</strong> with a MAC value of 104%.</p>\n<p>Note:<strong>&nbsp;</strong>Methoxyflurane has a MAC of 0.16%, making it more potent than halothane. However, it is obsolete now. The&nbsp;most potent agent overall is methoxyflurane and the most potent agent in clinical use&nbsp;is halothane.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Sexual identity does not depend on which of the following factors?",
    "choices": [
      {
        "id": 1,
        "text": "Chromosomal pattern"
      },
      {
        "id": 2,
        "text": "Secondary sexual characters"
      },
      {
        "id": 3,
        "text": "Gonads"
      },
      {
        "id": 4,
        "text": "Upbringing"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Sexual identity does <strong>not</strong> depend on <strong>upbringing.</strong> Sexual identity is the pattern of a person&rsquo;s <strong>biological sexual characteristics</strong>.</p>\n<p>It depends on the following:</p>\n<ul>\n<li>Chromosomes</li>\n<li>External and internal genitalia</li>\n<li>Hormonal composition</li>\n<li>Gonads</li>\n<li>Secondary sex characteristics</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Following complete ileal and partial jejunal resection, the patient is most likely to have",
    "choices": [
      {
        "id": 1,
        "text": "Folic acid deficiency"
      },
      {
        "id": 2,
        "text": "Vitamin B12 deficiency"
      },
      {
        "id": 3,
        "text": "Gastric ulcer"
      },
      {
        "id": 4,
        "text": "Constipation"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>After complete ileal and partial jejunal resection, the patient is likely to have <strong>vitamin B12 deficiency.</strong></p>\n<p>Vitamin B12 is absorbed in the ileum. Vitamin B12 binds to intrinsic factor, a protein secreted by the parietal cells of the stomach, and the complex is absorbed across the ileal mucosa. Hence after ileal resection, there is impaired absorption of vitamin B12.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A G2P1 GDM patient was admitted in labor. During labor, a diagnosis of shoulder dystocia has been made. The obstetrician performed the following maneuver. This maneuver is named as _______",
    "choices": [
      {
        "id": 1,
        "text": "Rubin manoeuvre"
      },
      {
        "id": 2,
        "text": "McRobert manoeuvre"
      },
      {
        "id": 3,
        "text": "Barnum manoeuvre"
      },
      {
        "id": 4,
        "text": "Wood corkscrew manoeuvre"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The manoeuvre shown above is <strong>McRoberts manoeuvre.</strong></p>\n<p><strong>McRoberts manoeuvre:</strong></p>\n<ul>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">This is the single most effective intervention and should be the </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">first maneuver to be performed</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> in shoulder dystocia.</span></li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">It involves flexion and abduction of the maternal hips, positioning the maternal thighs on her abdomen.</span></li>\n<li><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">The </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">lateral cutaneous nerve of the thigh</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> is the most common nerve to get </span><strong style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">injured</strong><span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">\u00a0during this maneuver.</span></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/e4999608c91e4c60a6108978e0a89f62.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A patient presented with vomiting to medicine OPD. He has a history of eating fried rice. What is the most likely organism causing this?",
    "choices": [
      {
        "id": 1,
        "text": "Clostridium perfringens"
      },
      {
        "id": 2,
        "text": "Bacillus cereus"
      },
      {
        "id": 3,
        "text": "Staphylococcus aureus"
      },
      {
        "id": 4,
        "text": "Bacillus anthracis"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Food poisoning&nbsp;after eating fried rice is due to<strong>&nbsp;Bacillus cereus.</strong></p>\n<p>Food poisoning caused by&nbsp;<em>B. cereus</em>&nbsp;is of&nbsp;<strong>two types</strong>:</p>\n<table width=\"305\">\n<tbody>\n<tr>\n<td><em>Bacillus cereus</em></td>\n<td><strong>Diarrheal type</strong></td>\n<td>Emetic type</td>\n</tr>\n<tr>\n<td>Incubation period</td>\n<td><strong>8-16 hours</strong></td>\n<td>1-5 hours</td>\n</tr>\n<tr>\n<td>Toxin</td>\n<td>Secreted in intestine</td>\n<td>Preformed</td>\n</tr>\n<tr>\n<td>Heat</td>\n<td>Heat labile</td>\n<td>Heat stable</td>\n</tr>\n<tr>\n<td>Food items</td>\n<td>Meat</td>\n<td>Rice</td>\n</tr>\n<tr>\n<td>Clinical feature</td>\n<td>Diarrhea, abdominal cramps</td>\n<td>Vomiting, abdominal cramps</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young man presents to the emergency with a painful scrotum. On examination, the patient is febrile, scrotal erythema and on lifting the testis the pain is relieved. What is the most likely cause of the patient\u2019s condition?",
    "choices": [
      {
        "id": 1,
        "text": "Epididymal cyst rupture"
      },
      {
        "id": 2,
        "text": "Testicular appendix torsion"
      },
      {
        "id": 3,
        "text": "Epididymo-orchitis"
      },
      {
        "id": 4,
        "text": "Testicular inversion"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The clinical scenario with positive Prehn's sign is suggestive of <strong>acute Epididymo-orchitis.&nbsp;</strong></p>\n<p>A <strong>positive Prehn&rsquo;s sign</strong> is used to differentiate epididymis from testicular torsion. A Prehn&rsquo;s sign is said to be positive when the <strong>pain gets relieved</strong> on <strong>lifting the testis</strong>. If it persists, it is likely to be testicular torsion.</p>\n<p><strong>Epididymo-orchitis&nbsp;</strong>is an inflammatory condition affecting the epididymitis and testis. The infection reaches the epididymitis from a primary infection of the urethra, seminal vesicles, or prostate. In <strong>young men</strong>, it is <strong>sexually acquired</strong> while in<strong> older men</strong> it is<strong> secondary to a urinary tract infection</strong>. It can occur post catheterization or instrumentation as well.&nbsp;</p>\n<p><strong><em>Chlamydia trachomatis</em></strong> is the most common cause of acute epididymitis in young, sexually active males.&nbsp;In older men(&gt;40yrs) with bladder outflow obstruction, epididymitis results from a&nbsp;<strong>urinary infection, </strong>most commonly due to <strong><em>Escherichia coli</em></strong>.</p>\n<p>Clinical features include <strong>pain and redness in the scrotum</strong>, <strong>fever</strong>, and <strong>tenderness</strong> of the scrotum.</p>\n<p>Initial investigations include urine specimen for culture, Nucleic acid amplification testing(NAAT), and a urethral swab to check for signs of infection.&nbsp;An ultrasound of the epididymis can show inflammation and abscess formation if any.&nbsp;</p>\n<p>Treatment is by <strong>antibiotics</strong> and scrotal support.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A child presents with hepatitis and progressive neurological degeneration. A picture of his eye has been provided below. Among the following options, what would be the initial step regarding the investigations done for this child's diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Serum ceruloplasmin levels"
      },
      {
        "id": 2,
        "text": "Serum copper levels"
      },
      {
        "id": 3,
        "text": "Enzyme assay"
      },
      {
        "id": 4,
        "text": "Karyotyping"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p class=\"p1\">This clinical scenario and <strong>Kayser-Fleischer </strong>(KF) <strong>ring</strong>&nbsp;seen in the image are suggestive of <strong>Wilson's</strong> disease. The <strong>initial step</strong> regarding investigations done for the diagnosis is the measurement of serum <strong>ceruloplasmin</strong> levels.</p>\n<p class=\"p1\"><strong>Low serum ceruloplasmin</strong>, <strong>raised 24 hr urinary copper</strong> and <strong>KF rings</strong> are diagnostic in symptomatic cases of Wilson's disease.</p>\n<p class=\"p1\">Lab investigations in Wilson's disease would show:</p>\n<table style=\"width: 498.535px;\">\n<tbody>\n<tr>\n<td style=\"width: 139px;\"><strong>Lab markers</strong></td>\n<td style=\"width: 111px;\"><strong>Change in Wilson's disease</strong></td>\n<td style=\"width: 225.535px;\"><strong>Reason</strong></td>\n</tr>\n<tr>\n<td style=\"width: 139px;\">Serum ceruloplasmin</td>\n<td style=\"width: 111px;\">&darr;&darr;&darr;</td>\n<td style=\"width: 225.535px;\">ATP7B deficiency results in reduced bound copper</td>\n</tr>\n<tr>\n<td style=\"width: 139px;\">24h urinary copper</td>\n<td style=\"width: 111px;\">&uarr;&uarr;</td>\n<td style=\"width: 225.535px;\">Excess free copper excreted in urine</td>\n</tr>\n<tr>\n<td style=\"width: 139px;\">Total serum copper</td>\n<td style=\"width: 111px;\">&darr;</td>\n<td style=\"width: 225.535px;\">Due to marked reduction in ceruloplasmin</td>\n</tr>\n</tbody>\n</table>\n<p>Option B: The role of total serum copper in the diagnosis of Wilson's disease is limited. Measurement of <strong>serum ceruloplasmin</strong> and <strong>urinary copper</strong> is <strong>preferred</strong>.</p>\n<p>Option C: ATP7B <strong>enzyme assays</strong> have shown promise in early studies as a neonatal screening test for Wilson's disease. However, it is <strong>not yet part </strong>of routine clinical practice.</p>\n<p>Option D: <strong>Karyotyping</strong>&nbsp;is done for every <strong>asymptomatic</strong> 1st and 2nd degree relative of a patient with Wilson&rsquo;s disease. This helps differentiate the carriers (heterozygous) from the patients (homozygous) and can lead to early initiation of treatment before the onset of symptoms.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/57ba204d1e5a41388d107c1b7d7231e2.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Maraviroc is a chemokine receptor antagonist against the following receptor _______",
    "choices": [
      {
        "id": 1,
        "text": "CCR5"
      },
      {
        "id": 2,
        "text": "CXCR4"
      },
      {
        "id": 3,
        "text": "CD4"
      },
      {
        "id": 4,
        "text": "CCR5 and CD4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Maraviroc </strong>is a<strong> chemokine receptor antagonist </strong>acting against the CCR5 receptor. It&nbsp;binds to host cell <strong>CCR-5 receptor</strong> and <strong>prevents binding of viral gp-120 </strong>to host cells. It is indicated in patients with evidence of <strong>infection with predominantly CCR-5 tropic virus.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 15-year-old male presents with a painless swelling in the mandibular left posterior region since 2 months. The swelling was initially small and quickly increased in size. Incisional biopsy was done, and histopathological analysis of the hematoxylin/eosin-stained material showed sheets of both primitive round and spindled cells in a myxoid stroma, which stain positive for desmin and Myo-D1. What is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Liposarcoma"
      },
      {
        "id": 2,
        "text": "Rhabdomyosarcoma"
      },
      {
        "id": 3,
        "text": "Ewing sarcoma"
      },
      {
        "id": 4,
        "text": "Osteosarcoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The tumour is most likely an <strong>embryonal rhabdomyosarcoma.</strong></p>\n<ul>\n<li><strong>Rhabdomyosarcoma: Malignant mesenchymal tumor with skeletal muscle differentiation</strong></li>\n<li>Three subtypes: <strong>alveolar (20%), embryonal (60%), and pleomorphic (20%). </strong></li>\n<li>Rhabdomyosarcoma (alveolar and embryonal): Most common soft tissue sarcoma of childhood and adolescence.</li>\n<li><strong>Pleomorphic rhabdomyosarcoma is seen predominantly in adults.</strong></li>\n<li><strong>The pediatric forms often arise in the sinuses, head and neck, and genitourinary tract</strong>.</li>\n<li>Alveolar rhabdomyosarcoma frequently contains fusions of the <em>FOXO1</em> gene to either the <em>PAX3</em> or the <em>PAX7</em> gene, rearrangements marked by the presence of (2;13) or(1;13) translocations, respectively.</li>\n<li><strong>Embryonal rhabdomyosarcoma:</strong>&nbsp;sheets of both primitive round and spindled cells in a myxoid stroma. Rhabdomyoblasts with visible cross-striations may be present.</li>\n<li><strong>Sarcoma botryoids:</strong>&nbsp;variant of embryonal rhabdomyosarcoma in the walls of hollow, mucosal-lined structures, such as the nasopharynx, common bile duct, bladder, and vagina with <strong>cambium layer.</strong></li>\n<li><strong>Alveolar rhabdomyosarcoma:</strong>&nbsp;the network of fibrous septae that divide the cells into clusters or aggregates, creating a crude resemblance to pulmonary alveoli.</li>\n<li><strong>Pleomorphic rhabdomyosarcoma </strong>- Large, sometimes multinucleated, bizarre eosinophilic tumor cells</li>\n<li>Immunohistochemistry: Positive for desmin, myoglobin, myogenin, MyoD1, and vimentin</li>\n<li><strong>The botryoid variant of embryonal rhabdomyosarcoma has the best prognosis, while the pleomorphic subtype is often fatal.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient underwent laparoscopic cholecystectomy for cholelithiasis. Histopathology of the resected gall bladder is reported as Stage T1a of gallbladder cancer. What is the next step in management?",
    "choices": [
      {
        "id": 1,
        "text": "No further treatment"
      },
      {
        "id": 2,
        "text": "Perform extended cholecystectomy"
      },
      {
        "id": 3,
        "text": "Adjuvant chemotherapy"
      },
      {
        "id": 4,
        "text": "Palliative nonsurgical therapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Cholecystectomy</strong> is sufficient for gallbladder carcinoma with T1a lesions, wherein the tumor penetrates the lamina propria but does not invade the muscle layer.</p>\n<p>Treatment of gallbladder carcinoma (in general):</p>\n<table style=\"height: 272px; width: 407px;\">\n<tbody>\n<tr>\n<td style=\"width: 128.28125px;\"><strong>TNM staging</strong></td>\n<td style=\"width: 263.71875px;\"><strong>Treatment</strong></td>\n</tr>\n<tr>\n<td style=\"width: 128.28125px;\">T<sub>1a</sub></td>\n<td style=\"width: 263.71875px; text-align: left;\">Simple cholecystectomy</td>\n</tr>\n<tr>\n<td style=\"width: 128.28125px;\">T<sub>1b</sub>, T<sub>2</sub>, T<sub>3</sub></td>\n<td style=\"width: 263.71875px; text-align: left;\">Radical cholecystectomy</td>\n</tr>\n<tr>\n<td style=\"width: 128.28125px;\">T<sub>4</sub></td>\n<td style=\"width: 263.71875px; text-align: left;\">Unresectable, chemotherapy and palliative nonsurgical therapy are provided</td>\n</tr>\n<tr>\n<td style=\"width: 128.28125px;\">N<sub>1</sub></td>\n<td style=\"width: 263.71875px; text-align: left;\">Regional lymphadenectomy</td>\n</tr>\n<tr>\n<td style=\"width: 128.28125px;\">N<sub>2</sub></td>\n<td style=\"width: 263.71875px; text-align: left;\">Radical cholecystectomy plus hepatopancreatic duodenectomy</td>\n</tr>\n</tbody>\n</table>\n<p><br />If the carcinoma gall bladder was found incidentally after cholecystectomy:</p>\n<ul>\n<li>Up to stage Ia and stage Ib with negative margins,&nbsp;<strong>standard cholecystectomy</strong> would suffice</li>\n<li>Stage Ib with perineural, lymphatic, vascular invasion and stage II, <strong>extended cholecystectomy</strong> should be performed</li>\n</ul>\n<div class=\"page\" title=\"Page 1232\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>If the initial procedure was performed laparoscopically, the surgeon should examine the laparoscopic port sites. The finding of disease at the port sites is a sign of generalized peritoneal disease and carries a very poor prognosis. However,&nbsp;<strong>resection of port sites </strong>is<strong> no longer recommended.</strong></p>\n<p>Chemotherapy is not required in early gall bladder cancer. Radiation has no role.</p>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Pap smear is ________",
    "choices": [
      {
        "id": 1,
        "text": "Screening test"
      },
      {
        "id": 2,
        "text": "Diagnostic test"
      },
      {
        "id": 3,
        "text": "Confirmative test"
      },
      {
        "id": 4,
        "text": "Both a & b"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Pap smear is a <strong>screening</strong> test. In case of positive&nbsp;test further investigations should be done.</p>\n<p><strong>Pap Smear&nbsp;Schedule</strong></p>\n<ul>\n<li>Time for initiation: <strong>21 years</strong>, regardless of the age of first sexual intercourse.</li>\n<li>Women aged 21-29 years: Every <strong>3 years</strong>(earlier it was done annually)</li>\n<li>Women aged 30-65 years: Pap test + HPV testing every <strong>5 years</strong>.</li>\n<li>Women should stop having cervical cancer screening after the age of 65 years.&nbsp;If suspicious PAP, screening till 75 years.</li>\n<li>HIV+ women: annual checkup until three consecutive negative tests followed by testing every 3 years for life.</li>\n<li>HPV DNA testing in combination with PAP improves the sensitivity of screening.</li>\n</ul>\n<p>Ayres spatula and endocervical brush are the instruments used for the pap test.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/ea2611c6fd594b378534c87172d8620ex1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/632a126becc3436088ff92325108ae48x486x724.JPEG"
    ]
  },
  {
    "text": "A 14-year-old boy who is a football player comes to the casualty with complaints of epistaxis while playing football on the ground. There is no history of trauma or fall. He also gives a history of recurrent spontaneous nasal bleeding and unilateral nasal obstruction and denasal speech. Contrast-enhanced CT scan of the head is shown below. What is this sign known as?",
    "choices": [
      {
        "id": 1,
        "text": "Aquino sign"
      },
      {
        "id": 2,
        "text": "Holman Miller sign"
      },
      {
        "id": 3,
        "text": "Teardrop sign"
      },
      {
        "id": 4,
        "text": "Hanging drop sign"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given CT scan showing the <strong>anterior bowing</strong> of the posterior wall of the maxillary sinus is called the <strong>Holman Miller sign&nbsp;</strong>or&nbsp;<strong>Antral sign.</strong></p>\n<p>The given clinical picture along with a CT scan showing the <strong>Holman Miller sign</strong>&nbsp;is suggestive of the diagnosis of <strong>nasopharyngeal angiofibroma</strong>. It most commonly arises from the <strong>sphenopalatine foramen</strong>.&nbsp;</p>\n<p>From here the tumor grows into the:</p>\n<ul>\n<li>Nasal cavity</li>\n<li>Nasopharynx</li>\n<li>Pterygopalatine fossa</li>\n<li>Pterygomaxillary fossa</li>\n<li>Infratemporal fossa</li>\n</ul>\n<p><strong>Other options:</strong></p>\n<p><strong>Aquino sign </strong>is the blanching of the tumor mass in glomus tumor, when the ipsilateral carotid artery is compressed manually.</p>\n<p><strong>Hanging drop/tear-drop sign</strong> is characteristic of an orbital \"blow-out\" fracture, which represents the orbital contents herniating through the floor of the orbit into the maxillary antrum.</p>\n<p>Given below is CT showing the anterior bowing of the posterior wall of the maxillary sinus -&nbsp;<strong>Antral sign or</strong>&nbsp;<strong>Holman Miller sign</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a89e11302ef541738c1586aae20e4bc9.PNG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/59f3d364c7934a96a9a1130e90fc6f95x468x512.PNG"
    ]
  },
  {
    "text": "Which of the following steps of disaster management is in correct order?",
    "choices": [
      {
        "id": 1,
        "text": "Disaster impact \u2013 Mitigation \u2013 Rehabilitation \u2013 Response"
      },
      {
        "id": 2,
        "text": "Rehabilitation \u2013 Response \u2013 Disaster Impact \u2013 Mitigation"
      },
      {
        "id": 3,
        "text": "Disaster impact \u2013 Response \u2013 Rehabilitation \u2013 Mitigation"
      },
      {
        "id": 4,
        "text": "Response \u2013 Disaster impact \u2013 Rehabilitation \u2013 Mitigation"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Disaster Management includes three aspects:</p>\n<p><strong>1. Disaster impact and response:</strong>&nbsp;</p>\n<p>&nbsp;&nbsp;Involves immediate management of mass casualties</p>\n<ul>\n<li>Search, rescue, and first-aid</li>\n<li>Field care</li>\n<li>Triage</li>\n<li>Tagging</li>\n<li>Identification of dead</li>\n</ul>\n<p><strong>2. Rehabilitation or recovery:</strong></p>\n<p><strong>&nbsp; &nbsp;</strong>Involves restoration of the pre-disaster conditions</p>\n<ul>\n<li>Water supply</li>\n<li>Basic sanitation and personal hygiene</li>\n<li>Food safety</li>\n<li>Vector control</li>\n</ul>\n<p><strong>3. Mitigation</strong>: Measures designed either to&nbsp;<strong>prevent hazards&nbsp;</strong>from causing disaster&nbsp;or to reduce the effects of the disaster. This also includes<strong>&nbsp;preparedness&nbsp;</strong>for any impending disasters or in disaster-prone areas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/941cdb2b237749b8991ab1862d290506x421x391.JPEG"
    ]
  },
  {
    "text": "A pregnant woman presents to the OG clinic with complaints of lower abdominal pain and mild bleeding per vaginum for 2 days at 12 weeks of gestation.  She also complains of excessive vomiting for one week. USG was done and it is given below.  What is the probable diagnosis____",
    "choices": [
      {
        "id": 1,
        "text": "Missed abortion"
      },
      {
        "id": 2,
        "text": "Complete mole"
      },
      {
        "id": 3,
        "text": "Partial mole"
      },
      {
        "id": 4,
        "text": "Choriocarcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical picture along with the image is suggestive of <strong>complete mole.</strong>&nbsp; The USG image shows the characteristic <strong>&ldquo;snowstorm&rdquo; appearance</strong> seen in complete mole<strong>. </strong>Notably, a fetus and amnionic sac are absent.&nbsp;</p>\n<p><span data-preserver-spaces=\"true\">Molar pregnancy may present with bleeding per vaginum or an acute discharge of</span><strong><span data-preserver-spaces=\"true\">&nbsp;vesicular mass per vaginum</span></strong><span data-preserver-spaces=\"true\">. On examination, the</span><strong><span data-preserver-spaces=\"true\">&nbsp;uterine size is more</span></strong><span data-preserver-spaces=\"true\">&nbsp;than the corresponding period of amenorrhea. It shows a&nbsp;characteristic<strong>&nbsp;snowstorm</strong>&nbsp;appearance on USG.&nbsp;</span>&nbsp;</p>\n<p><strong>Suction&nbsp;</strong>and<strong>&nbsp;evacuation</strong>&nbsp;is the treatment of choice. Here post evacuation,&nbsp;<strong>Intrauterine devices</strong>&nbsp;are<strong>&nbsp;not recommended during&nbsp;</strong>the<strong>&nbsp;period&nbsp;</strong>of<strong>&nbsp;surveillance.&nbsp;</strong>This is because there is increased risk of&nbsp;<strong>perforation</strong>&nbsp;during this period if an&nbsp;<strong>invasive mole</strong>&nbsp;is present.</p>\n<p>Post-evacuation recommendations:</p>\n<ul>\n<li>Anti-D immune globulin if Rh D-negative</li>\n<li>Initiate effective contraception (IUD contraindicated)</li>\n<li>Review pathology report</li>\n<li>Serum hCG levels: within 48 h of evacuation, weekly until undetectable, then monthly for 6 months.</li>\n</ul>\n<p>Pregnancy is allowed after 6 months following a negative hCG titer.</p>\n<p><strong>Snowstorms in radiology</strong>:</p>\n<ul>\n<li>Complete hydatiform mole (ultrasound)</li>\n<li>Extracapsular breast implant rupture (ultrasound)</li>\n<li>Thyroid pulmonary metastases (chest radiograph)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/54f07445d80442c98fdf1c0c1537eae1.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 58-year-old woman is being evaluated for bleeding per vagina. She attained menopause at the age of 47. Which of the following is least likely to be a cause of post-menopausal bleeding?",
    "choices": [
      {
        "id": 1,
        "text": "Genital tract trauma"
      },
      {
        "id": 2,
        "text": "Ovarian Follicular cyst"
      },
      {
        "id": 3,
        "text": "Endometrial carcinoma"
      },
      {
        "id": 4,
        "text": "Granulosa cell tumor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Among the given options,<strong>&nbsp;ovarian follicular cysts</strong> are least likely to be a cause of post-menopausal bleeding.</p>\n<p><strong>&nbsp;Ovarian follicular cysts&nbsp;</strong>are usually <strong>asymptomatic</strong> unless they rupture, hemorrhage, or the ovary undergoes torsion which would manifest as an acute abdomen. They occur when there is the failure of absorption of fluid in an incompletely developed follicle or anovulation.&nbsp;</p>\n<p>Postmenopausal bleeding is diagnosed when there is bleeding per vagina after 6 months of amenorrhoea after the age of 40 (menopausal age).&nbsp;</p>\n<p>Causes of postmenopausal bleeding include:&nbsp;</p>\n<ul>\n<li><strong>Genital tract trauma</strong> (Option A)</li>\n<li>Cervical erosion, inflammation, polyp, ulcer, or <strong>cervical carcinoma</strong>.</li>\n<li>Uterus - endometritis, endometrial hyperplasia, <strong>endometrial carcinoma</strong> (Option C), polyp, or sarcoma</li>\n<li>Fallopian tube malignancy</li>\n<li>Ovarian tumors such as Brenner tumor, <strong>granulosa cell tumor</strong> (Option D)</li>\n<li>Hypertension and blood dyscrasia</li>\n<li>Urinary tract trauma, bladder carcinoma</li>\n<li>Hemorrhoid, anal fissures, and rectal cancers confused as bleeding per vagina</li>\n<li>Use of estrogens as hormone replacement therapy, tamoxifen.</li>\n</ul>\n<p>The image below gives a summary of the evaluation of postmenopausal bleeding, as per the FOGSI guidelines.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/acac31efbf3e49dca75bdc3081987821x1280x2320.JPEG"
    ]
  },
  {
    "text": "4R\u2019s of Radiotherapy are:",
    "choices": [
      {
        "id": 1,
        "text": "Reoxygenation, repopulation, reimplantation, redistribution"
      },
      {
        "id": 2,
        "text": "Reoxygenation, repopulation, redistribution, repair"
      },
      {
        "id": 3,
        "text": "Reoxygenation, reimplantation, redistribution, repair"
      },
      {
        "id": 4,
        "text": "Reoxygenation, repair, repopulation, reduction"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>In general, success or failure of standard clinical radiation treatment is determined by the 4 R\u2019s of radiobiology: <strong>repair of DNA damage, redistribution of cells in the cell cycle, repopulation, and reoxygenation</strong> of hypoxic tumor areas.</p>\n<p>5th R of radiotherapy is <strong>radiosensitivity.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "In a patient with suspected stable angina, which of the following findings are likely to be present?",
    "choices": [
      {
        "id": 1,
        "text": "CK-MB is elevated ; Troponin T is normal"
      },
      {
        "id": 2,
        "text": "Troponin I is elevated ; Myoglobin is normal"
      },
      {
        "id": 3,
        "text": "Myoglobin is elevated ; CK-MB is normal"
      },
      {
        "id": 4,
        "text": "Troponin I is normal ; CK-MB is normal"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The levels of <strong>cardiac</strong> <strong>markers</strong> remain <strong>unchanged</strong> in <strong>stable </strong>and <strong>unstable angina</strong> as there is no necrosis of cardiac myocytes.</p>\n<p>The clinical presentations of ischemic heart disease can be broadly classified into:\u00a0</p>\n<ul>\n<li><strong>Chronic coronary syndrome</strong>\u00a0(CCS) - this includes\n<ul>\n<li>Stable angina - this is an episodic angina that occurs with predictable severity, frequency, and threshold of precipitation by stressors, and is relieved by rest and nitrates\u00a0\u00a0</li>\n</ul>\n</li>\n<li><strong>Acute coronary syndrome</strong>\u00a0(ACS) - this includes\n<ul>\n<li>Unstable angina - this is diagnosed in patients with symptoms suggestive of an ACS with <strong>no elevation</strong> of<strong> biomarkers</strong></li>\n<li><strong>Myocardial infarction </strong>- it\u00a0is the necrosis and death of a portion of the myocardium due to prolonged ischemia. The cardiac <strong>biomarkers\u00a0</strong>are <strong>elevated</strong> in this condition</li>\n</ul>\n</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old HIV seropositive male presents with raised violaceous plaques over the distal portion of the lower limbs. Biopsy shows a lesion composed of proliferating spindle cells along with small vessels and spaces containing red cells. Which of the following is the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Cavernous hemangioma"
      },
      {
        "id": 2,
        "text": "Kaposi sarcoma"
      },
      {
        "id": 3,
        "text": "Dermatofibroma"
      },
      {
        "id": 4,
        "text": "Mycosis fungoides"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and the histopathological findings are most suggestive of <strong>Kaposi sarcoma</strong>.</p>\n<p><strong>Kaposi sarcoma </strong>is a vascular neoplasm caused by<strong> human herpesvirus 8 </strong>(HHV8) and is <strong>highly associated with AIDS</strong> (acquired immunodeficiency syndrome).</p>\n<p><strong>Classic Kaposi sarcoma</strong> occurs in<strong>&nbsp;older men&nbsp;of </strong>Eastern European and Meditteranean descent and has the following three clinical stages:</p>\n<ul>\n<li><strong>Patches</strong>- red-purple macules on the distal lower extremities</li>\n<li><strong><strong>Plaques-&nbsp;</strong></strong>patches progress to large violaceous raised plaques. Lesions spread proximally.</li>\n<li><strong>Nodules- </strong>Lesions become nodular with more neoplastic features. This stage also progresses to involve nodes and viscera.</li>\n</ul>\n<p>The given images show coalescent red-purple macules and plaques of the skin and the histologic appearance of Kaposi sarcoma, demonstrating sheets of proliferating spindle cells:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/85daf75865344e4cae4f35186252c544x1012x675.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/985d8f3002fd466cbcf4c1e6182199f2x1280x880.JPEG"
    ]
  },
  {
    "text": "Which of the following is the principle behind the wound healing procedure shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Negative pressure wound therapy"
      },
      {
        "id": 2,
        "text": "Positive pressure wound therapy"
      },
      {
        "id": 3,
        "text": "Foam therapy"
      },
      {
        "id": 4,
        "text": "Sponge therapy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The principal behind the wound healing procedure, as shown above, is <strong>negative pressure wound therapy.</strong></p>\n<p>Applying intermittent negative pressure of approximately -125 mmHg appears to hasten debridement and the formation of granulation tissue in chronic wounds and ulcers.</p>\n<p>The negative pressure may act by decreasing oedema, by removing interstitial fluid and by increasing blood flow.&nbsp;As a result, bacterial counts decrease and cell proliferation increases, thereby creating a suitable bed for graft or flap cover.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/5755f4d7052f40ee8599ab7d715a8fdc.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following items are disposed of in the yellow bag?",
    "choices": [
      {
        "id": 1,
        "text": "Blood bag"
      },
      {
        "id": 2,
        "text": "Gloves"
      },
      {
        "id": 3,
        "text": "Sharps"
      },
      {
        "id": 4,
        "text": "Urine bag"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Blood bags</strong>&nbsp;are disposed of in the <strong>yellow bag</strong>.</p>\n<p><strong>Gloves</strong> are disposed of in the <strong>red bag</strong>.</p>\n<p><strong>Sharps</strong> are disposed of in the <strong>white container.</strong></p>\n<p><strong>Urine bags&nbsp;</strong>are disposed of in the<strong> red bag.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cranial nerves is a pure sensory nerve?",
    "choices": [
      {
        "id": 1,
        "text": "Olfactory"
      },
      {
        "id": 2,
        "text": "Trochlear"
      },
      {
        "id": 3,
        "text": "Trigeminal"
      },
      {
        "id": 4,
        "text": "Abducent"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>olfactory</strong> nerve is a <strong>pure sensory nerve</strong>. It carries no motor fibers.</p>\n<ul>\n<li>Olfactory: Sensory</li>\n<li>Optic: Sensory</li>\n<li>Oculomotor: Motor</li>\n<li>Trochlear: Motor</li>\n<li>Trigeminal: Both&nbsp;</li>\n<li>Abducent: Motor</li>\n<li>Facial: Both</li>\n<li>Vestibulocochlear: Sensory</li>\n<li>Glossopharyngeal: Both</li>\n<li>Vagus: Both</li>\n<li>Accessory: Motor</li>\n<li>Hypoglossal: Motor</li>\n</ul>\n<p>\"Both\" stands for a mixed nerve (both motor and sensory).</p>\n<p>Mnemonic: <strong>S</strong>ome <strong>S</strong>ay <strong>M</strong>arry <strong>M</strong>oney <strong>B</strong>ut <strong>M</strong>y <strong>B</strong>rother <strong>S</strong>ays <strong>B</strong>ig <strong>B</strong>rain <strong>M</strong>atters <strong>M</strong>ore.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A middle-aged woman who presented with features of tremors, palpitations, weight loss, and menstrual irregularities is diagnosed with Grave's disease. Which of the following statements is true with respect to the report of the thyroid function test in Graves' disease?",
    "choices": [
      {
        "id": 1,
        "text": "Low TSH levels"
      },
      {
        "id": 2,
        "text": "Low free T4 levels"
      },
      {
        "id": 3,
        "text": "Low  serum T3 levels"
      },
      {
        "id": 4,
        "text": "Radioactive Iodine Uptake (RAIU) at 24 hours below normal"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In Graves' disease, the level of serum <strong>TSH is low</strong>, <strong>unbound T4 is high</strong> and serum <strong>T3 is high</strong>.&nbsp;</p>\n<p>Graves disease is caused by autoantibodies that bind to the thyrotropin receptor (<strong>TSHR-Ab</strong>), stimulating the growth of the thyroid and <strong>overproduction of thyroid hormone(T4 and T3)</strong>. These hormones then cause<strong> negative feedback</strong> to the anterior pituitary and thus, <strong>decrease TSH levels</strong>.</p>\n<p>And in patients with thyrotoxicosis including Graves', the RAIU (radioactive iodine uptake) at 24 hours is characteristically <strong>above normal.</strong></p>\n<p>The evaluation of thyrotoxicosis is given in the flowchart below:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2629719860ee454597819db3ba331bacx711x659.GIF"
    ]
  },
  {
    "text": "The skin condition shown in the image below is seen in ____.",
    "choices": [
      {
        "id": 1,
        "text": "Psoriasis"
      },
      {
        "id": 2,
        "text": "Seborrheic dermatitis"
      },
      {
        "id": 3,
        "text": "Pityriasis rosea"
      },
      {
        "id": 4,
        "text": "Ichthyosis vulgaris"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<ul>\n<li>The image represents <strong>fish-like scales</strong> on the skin characteristically seen in <strong>ichthyosis</strong> <strong>vulgaris&nbsp;</strong>(<strong>Icthyos</strong> = <strong>Fish</strong>).</li>\n<li><strong>Ichthyosis</strong> <strong>vulgaris</strong> is a skin condition that happens when the skin does not shed the dead skin cells. This leads to a dry, dead skin cells that accumulate in <strong>small</strong> <strong>patches</strong> on the surface of the skin, especially on the <strong>arms</strong> and <strong>legs</strong>.</li>\n<li>It is also called the \"<strong>fish</strong> <strong>scale</strong> <strong>disease</strong>\"&nbsp;due to the dead skin that accumulates in the same pattern to a fish&rsquo;s scales.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/6d3c4c4c41cf461e93a4b6a3d605286b.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a non-electrical cold-chain equipment?",
    "choices": [
      {
        "id": 1,
        "text": "Deep freezers"
      },
      {
        "id": 2,
        "text": "Cold box"
      },
      {
        "id": 3,
        "text": "Walk in coolers"
      },
      {
        "id": 4,
        "text": "ILR"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Cold boxes, vaccine carriers, and ice packs </strong>are some of the <strong>non-electrical components</strong> of the cold-chain system.</p>\n<ul>\n<li><strong>Cold boxes</strong> are insulated containers used for transportation and temporary storage of vaccines and ice packs.</li>\n<li><strong>Vaccine carriers</strong> are usually not used for storage of vaccines but for their transportation.</li>\n<li><strong>Ice packs</strong> generally have two holes in them for placing vaccines. They are filled with water.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/24bb2ca799254cad9b1928261066a826x1280x960.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/c13cea69d4ae4f8993ab5e9c3cc78bb8x505x354.JPEG"
    ]
  },
  {
    "text": "A 30-day-old infant is brought with excessive lacrimation and photophobia. He has a large and hazy cornea in both eyes. His lacrimal system is normal. What is the probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Megalocornea"
      },
      {
        "id": 2,
        "text": "Keratoconus"
      },
      {
        "id": 3,
        "text": "Congenital glaucoma"
      },
      {
        "id": 4,
        "text": "Hunters syndrome"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given scenario fits the description of&nbsp;<strong>congenital glaucoma.</strong></p>\n<p><strong>Primary congenital glaucoma (PCG)</strong></p>\n<p>It can be classified as follows:</p>\n<ul>\n<li><strong>True congenital glaucoma</strong> (40%) in which intraocular pressure (<strong>IOP</strong>) is <strong>elevated</strong> during <strong>intrauterine life</strong>.</li>\n<li><strong>Infantile glaucoma (55%</strong>)<strong>,</strong> which manifests<strong> prior to age 3</strong>.</li>\n<li><strong>Juvenile glaucoma,</strong> the <strong>least</strong> common, in which IOP rises between <strong>3 and 16 years of age</strong>.</li>\n</ul>\n<p>Several genes have been implicated, prominently<em><strong> CYP1B1</strong></em>.</p>\n<p><strong>Diagnosis</strong></p>\n<ul>\n<li><strong>Corneal haze</strong> is due to diffuse edema secondary to raised IOP.</li>\n<li><strong>Buphthalmos</strong> is a <strong>large</strong> <strong>eye</strong> as a result of stretching due to elevated IOP prior to the age of<strong> 3 years</strong>.</li>\n<li><strong>Haab striae</strong> are curvilinear healed breaks in Descemet's membrane.</li>\n<li>Corneal scarring</li>\n<li><strong>Evaluation</strong> under <strong>general anesthesia</strong> is generally required; <strong>sevoflurane</strong> lowers IOP to levels lower than those achieved with other agents.</li>\n</ul>\n<p><strong>Treatment</strong></p>\n<ul>\n<li>Management is essentially <strong>surgical</strong>.</li>\n<li><strong>Goniotomy</strong></li>\n<li><strong>Trabeculotomy</strong></li>\n<li>Other procedures when angle surgery fails include trabeculectomy, tube shunt implantation,&nbsp;and ciliary body ablative procedures.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man is admitted to the hospital with severe pancreatitis. The next day he develops sudden onset breathlessness and severe hypoxia. Below is the CXR obtained. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pulmonary embolism"
      },
      {
        "id": 2,
        "text": "ARDS"
      },
      {
        "id": 3,
        "text": "Hospital-acquired pneumonia"
      },
      {
        "id": 4,
        "text": "Left ventricular failure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The history of <strong>severe pancreatitis</strong> and the chest X-ray findings of <strong>B/L diffuse alveolar opacities</strong> are suggestive of <strong>ARDS.</strong></p>\n<p>Severe pancreatitis gives rise to<strong> inflammatory processes and endothelial damage</strong> that results in ARDS.&nbsp;</p>\n<p><strong>CXR features in ARDS:</strong></p>\n<ul>\n<li>Early findings include normal or <strong>diffuse</strong> alveolar opacities (consolidation), which are often <strong>bilateral</strong> and which obscure the pulmonary vascular markings.</li>\n<li>Later, these opacities progress to more extensive consolidation that is diffuse.</li>\n</ul>\n<p>Prolonged bed rest increases the risk of venous thrombosis and pulmonary embolism. However, the CXR shows diffuse alveolar opacities making the diagnosis of ARDS more likely.</p>\n<p>Hospital-acquired pneumonia usually appears after 48 hours of admission.&nbsp;Areas of consolidation in unilateral or bilateral lung fields may be seen depending on severity.&nbsp;</p>\n<p>Left ventricular failure is an important differential diagnosis for ARDS. However, the patient's history of acute pancreatitis makes the diagnosis of ARDS more likely.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/84ff49748c9d40c2b84a4ede8c1b2dc8.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 25-year-old male with marfanoid features presented with sudden onset breathlessness. The patient's chest radiograph is given below. What is the diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Pneumothorax"
      },
      {
        "id": 2,
        "text": "Pleural effusion"
      },
      {
        "id": 3,
        "text": "Consolidation"
      },
      {
        "id": 4,
        "text": "Fibrosis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The X-ray shows left-sided pneumothorax with the partial collapse of the left lung. Best X-ray view to diagnose pneumothorax is <strong>PA view in full expiration</strong>.</p>\n<p>Chest radiograph in spontaneous pneumothorax demonstrates: &nbsp;</p>\n<ul>\n<li>Visible visceral pleural edge is seen as a very thin, sharp white line</li>\n<li>No lung markings are seen peripheral to this line</li>\n<li>The peripheral space is radiolucent compared to the adjacent lung.</li>\n<li>The lung may completely collapse.</li>\n<li>The mediastinum should not shift away from the pneumothorax unless a&nbsp;tension pneumothorax&nbsp;is present.</li>\n<li>Subcutaneous emphysema&nbsp;and&nbsp;pneumomediastinum&nbsp;may also be present.</li>\n<li>The&nbsp;<strong>deep sulcus sign</strong>&nbsp;on a supine chest radiograph is an indication of a&nbsp;pneumothorax. In a supine film (common in the ICU), it may be the only indication of a pneumothorax because air collects anteriorly and basally, within the nondependent portions of the pleural space, as opposed to the apex when the patient is upright. <strong>The costophrenic angle is abnormally deepened when the pleural air collects laterally, producing the deep sulcus sign.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/42e175d199784eda8aa1181de80df958.JPEG"
    ],
    "explanation_images": [
      "https://cdn1.dailyrounds.org/uploads/c27586d1465b4a29a09580df5a7e2121x641x650.PNG"
    ]
  },
  {
    "text": "An adolescent male patient presented with pain in the calf muscles on exercise. On biopsy, an excessive amount of glycogen was found to be present in the muscle. What is the most likely enzyme deficiency?",
    "choices": [
      {
        "id": 1,
        "text": "Muscle-debranching enzyme"
      },
      {
        "id": 2,
        "text": "Phosphofructokinase 1"
      },
      {
        "id": 3,
        "text": "Glucose 6 phosphatase"
      },
      {
        "id": 4,
        "text": "Muscle glycogen phosphorylase"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical features are seen in <strong>McArdle's disease</strong>. This patient has <strong>muscle glycogen phosphorylase</strong>&nbsp;deficiency.</p>\n<p>The <strong>lack of muscle glycogen phosphorylase</strong> results in <strong>excess glycogen build-up in muscles</strong>, as seen in the biopsy.</p>\n<p><strong>Image</strong>: Vacuolar myopathy in McArdle's disease</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/86d16fb179ed440db5df3a0963d550bcx1280x948.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/8296f8ac047546f2b52c591a7d639613x1280x841.JPEG"
    ]
  },
  {
    "text": "A post-menopausal woman presents with a history of pain in the forearm after falling down the stairs. The plain radiograph is shown below. What is your diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Smith\u2019s fracture"
      },
      {
        "id": 2,
        "text": "Colles\u2019 fracture"
      },
      {
        "id": 3,
        "text": "Galeazzi fracture"
      },
      {
        "id": 4,
        "text": "Monteggia fracture"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario and radiograph are suggestive of <strong>Colles\u2019 fracture</strong>.</p>\n<p>The radiograph shows a transverse fracture of the radius just above the wrist. The fracture appears extra-articular. In the AP view, the distal fracture fragment is dorsally angulated. This is characteristic of Colles' fracture.\u00a0\u00a0</p>\n<p><strong>Displacements </strong>that may be seen in<strong> Colles' fracture:</strong></p>\n<ul>\n<li>Dorsal tilt</li>\n<li>Dorsal shift</li>\n<li>Lateral tilt (Radial tilt)</li>\n<li>Lateral shift (Radial shift)</li>\n<li>Supination</li>\n<li>Impaction of fragments</li>\n</ul>\n<p>The clinical feature includes\u00a0<strong>dinner fork deformity</strong>\u00a0with prominence on the back of the wrist and depression in the front. It\u00a0is treated by a <strong>Colles\u2019 cast,</strong> which immobilizes the wrist in palmar flexion, pronation, and ulnar deviation.</p>\n<p>Complications:</p>\n<ul>\n<li>Stiffness of joints: Finger stiffness is commonly seen</li>\n<li>Malunion - can produce\u00a0<strong>dinner-fork deformity</strong></li>\n<li>Subluxation of the inferior radio-ulnar joint</li>\n<li>Carpal tunnel syndrome - Uncommon</li>\n<li><strong>Sudek's osteodystrophy</strong>\u00a0- Colles' fracture is the commonest cause of this condition in the upper limb.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/46deb6b8fb5f4bd4bb7433e0d90a8f1d.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/00bc17add164427fa1df2ca02f43c98dx1280x1202.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/de694b9f56e043fd92b4196e46ae89adx1280x2558.JPEG"
    ]
  }
];
        let quizName = 'Fmge Mini Test - 1';
        let hierarchy = ["Marrow", "FMGE Mini Test Series", "2024"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>