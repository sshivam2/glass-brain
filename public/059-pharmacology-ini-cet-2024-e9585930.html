<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>059 Pharmacology Ini-Cet 2024 - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / PYQs / Pharmacology
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">24</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following drugs used in the treatment of diabetes is known to cause urinary tract infections?",
    "choices": [
      {
        "id": 1,
        "text": "Dapagliflozin"
      },
      {
        "id": 2,
        "text": "Sitagliptin"
      },
      {
        "id": 3,
        "text": "Pioglitazone"
      },
      {
        "id": 4,
        "text": "Glimeperide"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Dapagliflozin</strong> is known to cause <strong>urinary tract infections</strong>.</p>\n<p>Dapagliflozin is a sodium-glucose transporter 2 (<strong>SGLT-2</strong>) inhibitor. It acts by inhibiting the SGLT-2 transporter which is present on the proximal segment of the renal tubule and is responsible for the reabsorption of 80-90% of filtered glucose. This results in <strong>glycosuria</strong>. Other SGLT-2 inhibitors include canagliflozin and empagliflozin.</p>\n<p>Apart from their effect on lowering blood glucose levels, SGLT2 inhibitors can cause mild weight loss and reduction in blood pressure. They have also been shown to reduce the risk of hospitalization in patients with <strong>heart failure</strong>.</p>\n<p>The common side effects include <strong>urinary tract infections</strong> and <strong>genital mycotic infections</strong> due to the high glucose content of the urine. There is a risk of the development of <strong>diabetic ketoacidosis</strong>.</p>\n<p>Other options :</p>\n<p>Option B - <strong>Sitagliptin</strong> is a dipeptidyl peptidase-4 inhibitor. Its use is associated with an increased risk of heart failure.</p>\n<p>Option C - <strong>Pioglitazone</strong> is an activator of the peroxisome proliferator-activated receptor \u03b3 (PPAR\u03b3), which is involved in the regulation of genes related to glucose and lipid metabolism. Its adverse effects include increased incidence of <strong>heart failure</strong>, <strong>peripheral edema</strong>, weight gain, <strong>macular edema</strong>, and <strong>osteoporosis</strong>.</p>\n<p>Option D - <strong>Glimepiride</strong>\u00a0belongs to the class of sulfonylureas. It stimulates insulin release by inhibiting the activity of the \u03b2 cell KATP channel complex. Its side effects include <strong>hypoglycemia</strong> and <strong>weight gain</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following medications used in treating leprosy causes skin pigmentation?",
    "choices": [
      {
        "id": 1,
        "text": "Oflaxacin"
      },
      {
        "id": 2,
        "text": "Dapsone"
      },
      {
        "id": 3,
        "text": "Clofazamine"
      },
      {
        "id": 4,
        "text": "Rifampicin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Clofazimine</strong> is a <strong>dye</strong> with leprostatic and antiinflammatory properties.The mechanism of antimicrobial activity of clofazimine against mycobacteria appears to be multifactorial and includes <strong>membrane disruption</strong>, inhibition of mycobacterial phospholipase A2, inhibition of microbial K+ transport, generation of hydrogen peroxide, interference with the bacterial electron transport chain, and efflux pump inhibition.</p>\n<p>Clofazimine is orally active. It <strong>accumulates in macrophages</strong> and gets deposited as <strong>needle-shaped crystals</strong> in many tissues including subcutaneous fat.\u00a0</p>\n<p>Clofazimine is used as a component of multidrug therapy (MDT) for <strong>leprosy</strong>. Because of its <strong>anti-inflammatory</strong> properties, it is valuable in <strong>lepra reactions</strong>.\u00a0Occasionally, it is used as a component of a combination regimen for extensive drug resistant TB (<strong>XDR-TB</strong>).\u00a0</p>\n<p>Adverse effects -\u00a0</p>\n<ul>\n<li><strong>Skin</strong> - The major disadvantage is <strong>reddish-black discoloration</strong> of skin, especially on exposed parts. Discoloration of hair and <strong>body secretions </strong>may also occur. Dryness of the skin, itching and scaling are often troublesome. Acneform eruptions and phototoxicity have been noted. <strong>Conjunctival pigmentation</strong> may create cosmetic problems.\u00a0</li>\n<li><strong>GI symptoms</strong> - Nausea, anorexia, abdominal pain, weight loss and enteritis with intermittent loose stools can occur, particularly when higher doses are used to control lepra reaction. Deposition of clofazimine crystals in the <strong>intestinal submucosa</strong> may produce gastrointestinal symptoms.\u00a0</li>\n</ul>\n<p>Clofazimine is to be avoided during early pregnancy and in patients with liver or kidney damage.\u00a0</p>\n<p>Other options :</p>\n<p>Option A- <strong>Ofloxacin</strong> is a fluroquinolone. As a component of MDT, it has been found to hasten the bacteriological and clinical response, where it is cidal to <em>M.leprae</em>. Its side effects include <strong>nausea</strong>, vomiting, and abdominal discomfort. <strong>CNS side effects</strong> like dizziness, anxiety and insomnia are also seen. <strong>Tendinitis</strong> is another adverse effect seen with the use of fluoroquinolones.</p>\n<p>Option B- <strong>Dapsone </strong>exerts its antimicrobial effect by the inhibition of PABA incorporation into folic acid by <strong>folate synthase</strong>. Apart from being used in leprosy, dapsone is also used for the prophylaxis of <em>T. gondii. </em>The anti-inflammatory effects are the basis for therapy of <strong>dermatitis herpetiformis</strong>, linear immunoglobulin A bullous disease, and relapsing chondritis. Mild <strong>hemolytic anemia</strong> is common, especially in those with <strong>G-6-PD deficiency</strong>. Isolated instances of reversible <strong>peripheral neuropathy</strong>, <strong>drug fever</strong>, hematuria, <strong>pruritus</strong>, psychosis, and a variety of skin rashes have been reported.</p>\n<p>Option D - <strong>Rifampicin</strong> interrupts RNA synthesis by binding to a subunit of mycobacterial DNA-dependent RNA polymerase. Apart from being used to treat leprosy, it is used in the management of <strong>tuberculosis</strong>, <strong>brucellosis</strong>, and prophylaxis of <em>Meningococcal</em> meningitis. <strong>Hepatitis</strong> is a major adverse effect. Other side effects include\u00a0pruritus with rash,\u00a0<strong>redness </strong>and\u00a0watering of eyes,<br /><strong>flu-like</strong> symptoms and abdominal cramps. <strong>Urine</strong> and secretions may become <strong>orange-red</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient is set to receive intermittent treatment with teriparatide. Which of the following complications does this drug predispose him to?",
    "choices": [
      {
        "id": 1,
        "text": "Osteonecrosis of the jaw bone"
      },
      {
        "id": 2,
        "text": "Subtrochanteric fractures"
      },
      {
        "id": 3,
        "text": "Net loss of bone mass"
      },
      {
        "id": 4,
        "text": "Osteosarcoma"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The use of <strong>teriparatide</strong> predisposes an individual to the development of <strong>osteosarcoma</strong>.</p>\n<p><strong>Teriparatide</strong> is a <strong>parathormone analog</strong>, which is given as <strong>subcutaneous</strong> injections. Pharmacokinetics and systemic actions of teriparatide on mineral metabolism are the same as for PTH. Its main target of action are the osteoblasts.\u00a0</p>\n<p>Teriparatide is administered by <strong>once-daily</strong> subcutaneous injection of 20 \u03bcg into the thigh or abdomen. The site of administration should be rotated, but the time at which the injection is made should be the same each day.</p>\n<p>Teriparatide and abaloparatide (PTHrP analog) are the only <strong>anabolic</strong> agents currently available that <strong>increase new bone formation </strong>(option C). Candidates for treatment include <strong>women who have a history of osteoporotic fracture</strong>, who have multiple risk factors for fracture, or who failed or are intolerant of previous osteoporosis therapy. <strong>Men with primary or hypogonadal osteoporosis</strong> are also candidates for treatment with these agents.\u00a0</p>\n<p>Adverse effects include <strong>hypercalcemia</strong>, exacerbation of <strong>nephrolithiasis</strong>, and elevation of serum uric acid levels. The development of <strong>osteosarcoma</strong> has been a serious concern in patients treated with teriparatide. It comes with a <strong>black-box warning</strong>, and use should be limited to <strong>no more than 2 years</strong> and avoided in patients who are at increased baseline risk for osteosarcoma (including those with Paget disease of bone, unexplained elevations of alkaline phosphatase, open epiphyses, or prior radiation therapy involving the skeleton).</p>\n<p>Other options :</p>\n<p>Options A and B - <strong>Osteonecrosis of the jaw bone</strong> and <strong>subtrochanteric fractures</strong> are the adverse effects of <strong>bisphosphonates</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following monoclonal antibodies is not a HER - 1 inhibitor?",
    "choices": [
      {
        "id": 1,
        "text": "Pertuzumab"
      },
      {
        "id": 2,
        "text": "Cetuximab"
      },
      {
        "id": 3,
        "text": "Panitumumab"
      },
      {
        "id": 4,
        "text": "Necitumumab"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pertuzumab</strong> is a humanized IgG1 monoclonal antibody directed against <strong>HER2</strong>.\u00a0</p>\n<p>Pertuzumab is approved for the treatment of patients with HER2-positive, locally advanced, inflammatory, or early-stage <strong>breast cancer</strong> in combination with trastuzumab and docetaxel. Its adverse effect includes <strong>cardiotoxicity</strong>.</p>\n<p>The other three antibodies act against <strong>epidermal growth factor receptor</strong> (EGFR)/ <strong>HER-1</strong>.\u00a0</p>\n<p>Option B - Cetuximab is used to treat patients with metastatic colon cancers and head and neck squamous cell carcinoma (HNSCC).</p>\n<p>Option C - Panitumumab is approved for the treatment of EGFR-expressing metastatic colorectal cancer.</p>\n<p>Option D - Necitumumab is approved for first-line treatment of patients with metastatic, squamous non-small cell lung cancer in combination with gemcitabine and cisplatin.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A G2P1 delivered a preterm baby at 36 weeks. The baby was admitted in the NICU for a week and was given expressed breast milk. Unfortunately the baby did not survive. Which of the following drugs can be used to reduce the engorgement and pain of the lactating breasts?",
    "choices": [
      {
        "id": 1,
        "text": "Cabergoline"
      },
      {
        "id": 2,
        "text": "Sumatriptan"
      },
      {
        "id": 3,
        "text": "Chlorpromazine"
      },
      {
        "id": 4,
        "text": "Pramipexole"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>In the given scenario, the woman requires <strong>suppression of lactation</strong>, for which <strong>cabergoline</strong> is indicated.</p>\n<p>In the postpartum period, prolactin promotes lactation. <strong>Dopamine</strong>(DA) is the primary regulator of prolactin secretion from the pituitary gland. DA released from the hypothalamus into the hypophyseal portal blood supply acts on lactotroph <strong>D2 receptors</strong> to <strong>decrease prolactin</strong> secretion. The DA agonists like bromocriptine and cabergoline are used in conditions requiring suppression of prolactin.</p>\n<p><strong>Cabergoline</strong> is an <strong>ergot derivative</strong> with a longer t1/2 (~65 h), higher affinity, and greater selectivity for the DA D2 receptor compared to bromocriptine. Cabergoline is the preferred drug for the treatment of <strong>hyperprolactinemia </strong>because of greater efficacy and lower adverse effects. Therapy is initiated at a dose of 0.25 mg twice a week or 0.5 mg once a week. Cabergoline induces remission in a significant number of patients with <strong>prolactinomas</strong>. At higher doses, cabergoline is used in some patients with acromegaly alone or in conjunction with somatostatin analogs.</p>\n<p>Adverse Effects -\u00a0</p>\n<p>Compared to bromocriptine, cabergoline has a much lower tendency to induce nausea, although it still may cause hypotension and dizziness. Cabergoline has been linked to <strong>valvular heart disease</strong>, an effect proposed to reflect agonist activity at the serotonin 5HT2B receptor.\u00a0However, this effect is seen primarily at the high doses used in patients being treated for Parkinson's disease and is not seen in the conventionally used doses (\u22642 mg/week) for patients with prolactinomas.</p>\n<p>Other options:\u00a0</p>\n<p>Option B - <strong>Sumatriptan</strong> is a <strong>5HT1B/1D receptor agonist</strong> used in the treatment of acute attacks of <strong>migraine</strong>.</p>\n<p>Option C - <strong>Chlorpromazine</strong> is a <strong>typical antipsychotic</strong>, which has <strong>D2 antagonistic</strong> activity. It is used in the treatment of <strong>schizophrenia</strong>, <strong>acute mania</strong>, and refractory <strong>nausea and vomiting</strong>. <strong>Hyperprolactinemia</strong> is an <strong>adverse effect</strong> associated with its use.</p>\n<p>Option D - <strong>Pramipexole</strong> is a <strong>non-ergot alkaloid</strong> with a broader DA receptor agonist activity, with the highest affinity to <strong>D3</strong> receptors. It is used in the treatment of <strong>Parkinson's disease</strong> and <strong>restless leg syndrome</strong>. It is not indicated for the treatment of breast engorgement.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Coagulation profile monitoring is required for which of the following drugs?",
    "choices": [
      {
        "id": 1,
        "text": "Lepirudin"
      },
      {
        "id": 2,
        "text": "Enoxaparin"
      },
      {
        "id": 3,
        "text": "Fondaparinux"
      },
      {
        "id": 4,
        "text": "Dabigatran"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Coagulation profile monitoring is required while using <strong>lepirudin</strong>.</p>\n<p><strong>Lepirudin</strong> is a<strong> parenteral direct thrombin inhibitor</strong>, which is a recombinant form of hirudin extracted from the saliva of leech. Its action is independent of anti-thrombin, which means it can reach and inactivate fibrin-bound thrombin in thrombi.\u00a0It is excreted by the <strong>kidney</strong> and should be used with great caution in patients with renal insufficiency as no antidote exists.\u00a0</p>\n<p>Like heparin, lepirudin must be administered parenterally and is monitored by <strong>aPTT</strong>. Lepirudin was approved for use in patients with thrombosis related to heparin-induced thrombocytopenia (HIT). Its production was discontinued by the manufacturer in 2012.</p>\n<p>Other options :</p>\n<p>Option B - <strong>Enoxaparin</strong> is a low molecular weight heparin (LMWH) that inhibits activated factor X with less effect on thrombin. Hence, it has a smaller effect on the coagulation profile and <strong>does not need monitoring</strong>.\u00a0</p>\n<p>Option C - <strong>Fondaparinux</strong> avidly binds antithrombin, resulting in efficient inactivation of factor Xa. It is effective in the prevention and treatment of venous thromboembolism and does not appear to cross-react with pathologic HIT antibodies in most individuals. Like LMWH, it <strong>does not require monitoring</strong> of the coagulation profile.</p>\n<p>Option D - <strong>Dabigatran</strong> is an oral direct thrombin inhibitor approved for the reduction in risk of stroke and systemic embolism with nonvalvular atrial fibrillation, treatment of venous thromboembolism (VTE) and VTE prophylaxis following hip or knee replacement surgery. It <strong>does not require monitoring</strong> of coagulation profile.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient known case of diabetes, shows microalbuminuria on urine analysis, done twice at an interval of 6 months. Renal function tests are normal. Which of the following drugs is not useful in preventing the progression of renal damage?",
    "choices": [
      {
        "id": 1,
        "text": "Finerenone"
      },
      {
        "id": 2,
        "text": "Hydrochlorothiazide"
      },
      {
        "id": 3,
        "text": "Angiotensin receptor blockers"
      },
      {
        "id": 4,
        "text": "SGLT2 inhibitor"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario suggests <strong>chronic kidney disease</strong> secondary to diabetes, and <strong>hydrochlorothiazide</strong> is not useful in preventing the <strong>progression</strong> of <strong>renal damage.</strong></p>\n<p><strong>Chronic kidney disease</strong> (CKD) is defined as abnormalities of kidney structure or function, present for a <strong>minimum of 3 months</strong>, with implications for health. CKD is classified based on cause, glomerular filtration rate (GFR) category (G1\u2013G5), and albuminuria category (A1\u2013A3). Some of the leading causes of\u00a0 CKD are <strong>diabetes</strong>, <strong>hypertension</strong>, glomerulonephritis and polycystic kidney disease.</p>\n<p>In patients with diabetes mellitus, often there exists a state of <strong>glomerular hyperfiltration</strong> due to decreased vascular resistance of afferent arterioles and increased vascular resistance of efferent arterioles resulting in increased glomerular hydrostatic pressure. This contributes to the progression of the CKD.</p>\n<p>The following drugs have been approved in the management of CKD :</p>\n<ul>\n<li><strong>Angiotensin-converting enzyme inhibitors / Angiotensin receptor blockers</strong> - These medications appear to slow the rate of decline of kidney function in a manner that extends beyond the reduction of systemic arterial pressure and that involves a reduction in the intraglomerular hyperfiltration and hypertension.\u00a0</li>\n<li><strong>Finerenone</strong> - It is a<strong> non steroidal mineralocorticoid receptor antagonist</strong> which decreases proteinuria. It has been approved to reduce the risk of end-stage kidney disease, cardiovascular death, and heart failure in diabetic patients with CKD.</li>\n<li><strong>SGLT-2 inhibitors </strong>- These drugs inhibit sodium-glucose cotransporter type 2 in the proximal convoluted tubule. By increasing NaCl delivery to the thick ascending limb, gliflozins trigger tubuloglomerular feedback and thereby increase preglomerular vascular resistance and decrease glomerular hypertension. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">This contributes to the effectiveness of gliflozins to prevent diabetic kid</span>ney disease.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following causes a decrease in serum parathyroid hormone?",
    "choices": [
      {
        "id": 1,
        "text": "Calcitriol"
      },
      {
        "id": 2,
        "text": "Risedronate"
      },
      {
        "id": 3,
        "text": "Furosemide"
      },
      {
        "id": 4,
        "text": "Lithium"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The active form of vitamin D, <strong>1,25-dihydroxyvitamin D (calcitriol)</strong>, directly<strong> suppresses PTH gene expression</strong></p>\n<p><strong>Calcitriol</strong> is the active form of <strong>vitamin</strong> <strong>D</strong>. It increases <strong>calcium absorption</strong> from the <strong>intestines</strong> and helps maintain <strong>adequate serum calcium levels.</strong> When calcium levels rise, this triggers a <strong>negative feedback mechanism</strong> on the parathyroid glands, leading to <strong>decreased secretion</strong> of <strong>parathyroid hormone</strong> (PTH). PTH's primary role is to raise <strong>blood calcium</strong> levels, so when <strong>calcium</strong> is <strong>sufficient,</strong> the need for <strong>PTH decreases,</strong> resulting in <strong>lower PTH</strong> levels.</p>\n<p><strong>Vitamin</strong> D and its derivatives are the primary treatment for <strong>hypoparathyroidism. Dihydrotachysterol</strong> (DHT), a reduced form of vitamin D2, has a <strong>quicker onset, shorter duration,</strong> and <strong>stronger impact</strong> on <strong>bone mobilization</strong> than traditional vitamin D, making it a preferred option. While most <strong>hypoparathyroid patients</strong> respond well to any form of <strong>vitamin</strong> <strong>D</strong>, calcitriol may be preferred for <strong>temporary treatment</strong> of <strong>hypocalcemia</strong> while waiting for the effects of a <strong>slower-acting vitamin</strong> <strong>D</strong> form. Calcium is used to address <strong>calcium deficiency</strong> and as a <strong>dietary supplement. Vitamin</strong> <strong>D</strong> is the <strong>primary treatment</strong> for <strong>hypoparathyroidism.</strong></p>\n<p><strong>Severe hypermagnesemia</strong> or <strong>hypomagnesemia</strong> can also inhibit PTH secretion.</p>\n<p>Other options:\u00a0</p>\n<p>Option B: <strong>Risedronate</strong> is a <strong>bisphosphonate</strong> that <strong>inhibits bone resorption,</strong> but it doesn't directly affect PTH secretion.</p>\n<p>Option C: <strong>Furosemide</strong> is a <strong>diuretic</strong> that can <strong>increase calcium excretion,</strong> potentially raising PTH as the body tries to conserve calcium.</p>\n<p>Option D: <strong>Lithium</strong> can actually <strong>increase PTH secretion</strong> by affecting <strong>calcium-sensing</strong> receptors in the parathyroid glands.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following acts by suicide inhibition?",
    "choices": [
      {
        "id": 1,
        "text": "1,2"
      },
      {
        "id": 2,
        "text": "3,4"
      },
      {
        "id": 3,
        "text": "1,2,4"
      },
      {
        "id": 4,
        "text": "1,3,4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ritonavir</strong> and <strong>benzbromarone</strong> are both <strong>suicide inhibitors.</strong>\u00a0</p>\n<p><strong>Suicide inhibition</strong> is when an <strong>inhibitor</strong> binds to an <strong>enzyme</strong> and then <strong>undergoes</strong> a reaction to form an <strong>irreversible complex</strong> with the <strong>enzyme,</strong> inactivating it permanently. Ritonavir is a protease inhibitor used in HIV treatment and benzbromarone is a uricosuric agent used to treat gout by increasing uric acid excretion. It also inhibits CYP2C9 via mechanism-based (suicide) inhibition.</p>\n<p>Other options:\u00a0</p>\n<p>Ethinyl <strong>estradiol</strong> is a synthetic estrogen used in oral contraceptives and hormone replacement therapy. It acts through <strong>receptor-mediated</strong> mechanisms, not through suicide inhibition.</p>\n<p><strong>Spironolactone</strong> is a potassium-sparing diuretic and aldosterone antagonist. It works by competitively <strong>inhibiting aldosterone receptors</strong> in the distal tubules of the kidney, not through suicide inhibition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following diuretics is matched correctly with its location of action?",
    "choices": [
      {
        "id": 1,
        "text": "1,2,3"
      },
      {
        "id": 2,
        "text": "3,4"
      },
      {
        "id": 3,
        "text": "2, 4"
      },
      {
        "id": 4,
        "text": "1,2"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The osmotic diuretics act at the proximal convoluted tubule and the potassium-sparing diuretics act on the collecting tubule. Hence C and D are the right statements.</p>\n<p>A - <strong>Osmotic diuretics</strong>, like <strong>mannitol</strong>, retain water isoosmotically in the <strong>proximal convoluted tubule </strong>(PCT) and descending loop of Henle which are freely permeable to water. Luminal fluid is diluted and opposes NaCl reabsorption. They are indicated in <strong>raised intracranial</strong> <strong>tension </strong>and in <strong>dialysis disequilibrium</strong>.</p>\n<p>B - <strong>Thiazides</strong> act on the <strong>distal convoluted tubule</strong> (DCT). They block the <strong>Na+/Cl- co-transporter</strong> in the DCT. This results in the loss of sodium, chloride, and water contributing to the diuretic effect. Some of the examples are hydrochlorothiazide, chlorthalidone and metolazone. Their indications include <strong>hypertension</strong>, edema, <strong>diabetes insipidus</strong> and <strong>hypercalciuria</strong>.</p>\n<p>C - <strong>Carbonic anhydrase inhibitors</strong> act on the <strong>proximal convoluted tubule</strong> (PCT).\u00a0By inhibiting carbonic anhydrase, HCO3- reabsorption is blocked and diuresis occurs. Examples are acetazolamide, methazolamide, dichlorphenamide, and dorzolamide. They are used in the treatment of <strong>glaucoma</strong>, urinary alkalinization in <strong>cystinuria</strong>, management of <strong>metabolic alkalosis</strong>, and <strong>acute mountain sickness</strong>.\u00a0</p>\n<p>D - <strong>Potassium-sparing diuretics</strong> include <strong>aldosterone antagonists </strong>(spironolactone, eplerenone) and <strong>inhibitors of renal epithelial Na+</strong> <strong>channel </strong>(triamterene, amiloride). They act on the<strong> late distal tubule</strong> and the <strong>collecting duct</strong>. Aldosterone antagonists are used in the treatment of <strong>edema</strong>, <strong>hypertension</strong>, <strong>heart failure</strong> and <strong>Conn's syndrome</strong>. Amiloride has a role in<strong> lithium-induced diabetes insipidus</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs acts as an inhibitor of PCSK-9?",
    "choices": [
      {
        "id": 1,
        "text": "Bempedoic acid"
      },
      {
        "id": 2,
        "text": "Lomitapide"
      },
      {
        "id": 3,
        "text": "Ezetemibe"
      },
      {
        "id": 4,
        "text": "Evolocumab"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Evolocumab</strong> is a monoclonal antibody that acts by <strong>inhibiting PCSK9</strong>.</p>\n<p><strong>PCSK9</strong> (proprotein convertase subtilisin/kexin type) is a serine protease that causes lysosomal <strong>degradation</strong> of the low-density lipoprotein (<strong>LDL</strong>) <strong>receptors</strong> present on hepatocytes. Monoclonal antibodies against PCSK9 such as <strong>alirocumab</strong> and <strong>evolocumab</strong> counter this and cause persistence of LDL receptors on hepatocytes. This leads to<strong> more LDL uptake</strong> from the circulation, bringing down the LDL-cholesterol levels.</p>\n<p>Evolocumab is administered as a 140-mg injection every 2 weeks or as a 420-mg injection once a month. PCKS9 inhibitors should not be used in pregnancy because transmission across the placenta is expected.</p>\n<p>PCSK9 inhibitors are indicated only as <strong>adjunctive therapy</strong> in patients with <strong>familial hypercholesterolemia</strong>(FH) or established <strong>atherosclerotic cardiovascular disease</strong>(ASCVD) who have elevated LDL-cholesterol levels despite being on maximum statin therapy.</p>\n<p>Other options :</p>\n<p>Option A -\u00a0<strong>Bempedoic acid </strong>acts by inhibiting <strong>de novo</strong> hepatocyte <strong>cholesterol biosynthesis</strong>, by blocking the enzyme <strong>adenosine</strong> <strong>triphosphate citrate lyase</strong>. The drug is approved as an adjunct to diet and maximally tolerated statin therapy to further lower LDL-C in patients with FH or established ASCVD.</p>\n<p>Option B -\u00a0<strong>Lomitapide</strong> acts by inhibiting <strong>microsomal triglyceride transfer protein</strong> (MTP), which is essential for the intracellular transfer of triglycerides into triglyceride-rich lipoproteins, thus inhibiting the formation of <strong>VLDLs</strong> in hepatocytes and <strong>chylomicrons</strong> in intestinal epithelial cells.\u00a0It is approved as an adjunct to diet for lowering LDL-C levels, total cholesterol, apo B, and non\u2013HDL lipoproteins in patients with FH.</p>\n<p>Option C -\u00a0<strong>Ezetimibe</strong> inhibits luminal cholesterol uptake by jejunal enterocytes, by inhibiting <strong>Niemann-Pick C1\u2013like 1 transport</strong> protein. The role of ezetimibe as monotherapy for patients with elevated LDL-C levels is generally limited to a small group of statin-intolerant patients.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Inhaled nitric oxide (iNO) is used for?",
    "choices": [
      {
        "id": 1,
        "text": "Persistent pulmonary hypertension of newborn"
      },
      {
        "id": 2,
        "text": "Unstable angina"
      },
      {
        "id": 3,
        "text": "Obstructive sleep apnea"
      },
      {
        "id": 4,
        "text": "Erectile dysfunction"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Inhaled nitric oxide(iNO) is used for <strong>persistent pulmonary hypertension in newborns</strong>. (Option A)</p>\n<p><strong>Inhaled NO</strong> selectively <strong>dilates</strong> the <strong>pulmonary vasculature</strong>, hence used in diseases associated with increased pulmonary vascular<strong> </strong>resistance. Inhaled NO is an FDA-approved drug for persistent pulmonary hypertension in the newborn.\u00a0</p>\n<p>Inhaled NO can also be used during <strong>cardiac catheterization</strong> to evaluate the <strong>pulmonary vasodilating capacity</strong> of patients with <strong>heart failure</strong> and infants with <strong>congenital heart disease</strong>. Another use of inhaled NO is to determine the <strong>diffusion capacity (DL)</strong> across the alveolar-capillary membrane. It is more effective than CO2 because of its greater affinity for hemoglobin and its higher water solubility at body temperature.</p>\n<p>NO is produced from the nasal passages and the lungs of normal human subjects and can be detected in exhaled gas. The measurement of fractional <strong>exhaled NO</strong> is a <strong>noninvasive marker</strong> for <strong>airway inflammation</strong> in the assessment of respiratory tract diseases, including <strong>asthma</strong>, <strong>respiratory tract infection</strong>, and <strong>chronic lung disease</strong>.</p>\n<p>Inhaled NO is administered at <strong>low concentrations</strong> (<strong>0.1\u201350 ppm</strong>) since high concentrations of 50 to 100 ppm can cause significant <strong>methemoglobinemia </strong>that can cause death.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Unstable angina</strong> is treated by <strong>anti-platelet drugs</strong> such as<strong> </strong>aspirin and clopidogrel, and anticoagulants such as<strong> heparin</strong>.</p>\n<p>Option C: <strong>Obstructive sleep apnoea</strong> is mainly treated by using a <strong>BiPAP machine</strong> during sleep and <strong>CNS stimulants</strong> such as <strong>armodafinil</strong> for <strong>daytime sleepiness</strong> associated with the condition.\u00a0</p>\n<p>Option D: <strong>Erectile dysfunction</strong> is treated by <strong>PDE5 inhibitors</strong> such as <strong>sildenafil</strong>, tadalafil, etc.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents with complaints of a cough producing tenacious white sputum. Which of the following statements is true about the drug that could be prescribed for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Codeine as it is a potent drug and quickly relieves symptoms."
      },
      {
        "id": 2,
        "text": "Bromhexine and Dextromethorphan syrup as they liquify sputum and reduce cough due to antitussive effect"
      },
      {
        "id": 3,
        "text": "Dextromethorphan alone as it does not have addictive potential like codeine"
      },
      {
        "id": 4,
        "text": "Bromhexine as it liquifies sputum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Bromhexine</strong> should be prescribed for a patient with a <strong>productive cough</strong>, as it <strong>liquifies</strong> the sputum.</p>\n<p>Bromhexine belongs to a class of drugs called <strong>mucolytics</strong>, capable of inducing thin copious bronchial secretion. It <strong>depolymerizes</strong> mucopolysaccharides directly as well as by liberating lysosomal enzymes- the network of fibers in tenacious sputum is broken. It is particularly useful if mucus plugs are present.</p>\n<p>Other examples of mucolytics are ambroxol, carbocisteine, and N-acetyl cysteine.</p>\n<p>Other options :</p>\n<p><strong>Codeine</strong> and <strong>dextromethorphan</strong> belong to the class of drugs called <strong>antitussives</strong>. These are drugs that act in the CNS to raise the threshold of the cough center or act peripherally in the respiratory tract to reduce tussal impulses, or both these actions. Because they aim to control rather than eliminate cough, antitussive drugs should be used only for <strong>dry nonproductive</strong> cough or if it is unduly tiring, disturbs sleep, or is hazardous (hernia, piles, cardiac disease, ocular surgery).\u00a0</p>\n<p>Cough is a defensive reflex and its suppression may be inappropriate in bacterial lung infection. Hence, before treatment with antitussives, it is important to identify underlying causal mechanisms that may require therapy.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following antidiabetic drugs is known to cause unexplained diarrhea?",
    "choices": [
      {
        "id": 1,
        "text": "Sitagliptin"
      },
      {
        "id": 2,
        "text": "Metformin"
      },
      {
        "id": 3,
        "text": "Glimepiride"
      },
      {
        "id": 4,
        "text": "Pioglitazone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Metformin</strong> is known to cause <strong>unexplained diarrhoea</strong> as its adverse effect.</p>\n<p><strong>Metformin</strong> is a member of the <strong>biguanide</strong> class of oral hypoglycemic drugs. It acts by primarily by inhibiting <strong>hepatic gluconeogenesis</strong>. <span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\">It activates <strong>AMP-dependent protein kinase</strong>, </span>leading to stimulation of hepatic fatty acid oxidation, glucose uptake, and nonoxidative glucose metabolism and reduction of lipogenesis and gluconeogenesis. It also appears to act in the gut.</p>\n<p>Metformin is accepted as the first-line treatment of <strong>type 2 diabetes</strong> and is the most commonly used oral agent for this condition.\u00a0It has been used as a treatment of infertility in women with <strong>polycystic ovarian syndrome</strong>.</p>\n<p>The most common <strong>side effects</strong> of metformin are <strong>gastrointestinal</strong>: nausea, indigestion, <strong>abdominal cramps, </strong>bloating, and <strong>diarrhea</strong>. The use of metformin is also associated with<strong>\u00a0lower blood levels of vitamin B12.</strong></p>\n<p>Most adverse GI effects of metformin abate over time\u00a0and can be minimized by <strong>starting at a low dose</strong> and gradually titrating to a target dose over several weeks, as well as by having patients take the drug <strong>with meals</strong>. <strong>Extended-release</strong> metformin has decreased GI side effects and can be substituted for immediate-release metformin. <strong>Lactic acidosis</strong> has been linked with the use of metformin.</p>\n<p>Other options:</p>\n<p>Option A - <strong>Sitagliptin</strong> is a dipeptidyl peptidase-4 inhibitor. Its use is associated with an increased risk of <strong>heart failure</strong>.</p>\n<p>Option C - <strong>Glimepiride </strong>belongs to the class of sulfonylureas. It stimulates insulin release by inhibiting the activity of the \u03b2 cell KATP channel complex. Its side effects include <strong>hypoglycemia</strong>, and <strong>weight gain.</strong></p>\n<p>Option D - <strong>Pioglitazone</strong> is an activator of the peroxisome proliferator-activated receptor \u03b3 (PPAR\u03b3), which<span style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\"> is involved in the regulation of genes related to glucose and\u00a0</span>lipid metabolism. Its adverse effects include increased incidence of <strong>heart failure</strong>, <strong>peripheral edema</strong>, weight gain, <strong>macular edema</strong>, and <strong>osteoporosis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A young female weighing 46 kg is on digoxin with vd-6 L/kg and clearance 4.6 L/h. Calculate the half-life of digoxin.",
    "choices": [
      {
        "id": 1,
        "text": "4h"
      },
      {
        "id": 2,
        "text": "68h"
      },
      {
        "id": 3,
        "text": "42h"
      },
      {
        "id": 4,
        "text": "0.9h"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Therefore,\u00a0</p>\n<p>t1/2 ~ 0.7 x 46x6/4.6 = 0.7 x 60</p>\n<p>t1/2 ~ <strong>42 hours</strong></p>\n<p>Where,</p>\n<p>t1/2 - Plasma half-life<br />Vd - Volume of distribution\u00a0<br />CL - Clearance\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/3d80b15bec8745fa8ca1a9774dbcf000x1280x361.JPEG"
    ]
  },
  {
    "text": "Choose the correct option regarding phenytoin.",
    "choices": [
      {
        "id": 1,
        "text": "Acute oral overdose results primarily in cerebellar and vestibular symptoms and high doses have been associated with marked cerebellar atrophy"
      },
      {
        "id": 2,
        "text": "High dose causes cardiotoxicity in old and nephrotoxicity in young patients"
      },
      {
        "id": 3,
        "text": "These complications can be minimized by administering fosphenytoin at a rate of less than 250 mg of phenytoin sodium equivalents per minute"
      },
      {
        "id": 4,
        "text": "Given in all patients with seizures regardless of cardiac arrhythmias, hypotension and/or CNS depression"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Acute oral overdose results primarily in <strong>cerebellar</strong> and <strong>vestibular</strong> symptoms and high doses have been associated with marked <strong>cerebellar atrophy.</strong></p>\n<p>Dose-related toxicity of phenytoin causes ataxia, vertigo, diplopia, and nystagmus.</p>\n<p>Other options:</p>\n<p>Option B: High dose causes <strong>cardiotoxicity</strong> in both old and young, healthy patients. However, cardiotoxicity is more pronounced and frequent in older patients and those with known cardiac diseases.</p>\n<p>Option C: These complications can be minimised by administering <strong>fosphenytoin</strong> at a rate of <strong>less than 150 mg</strong> of phenytoin sodium equivalents per minute, not 250 mg.</p>\n<p>Option D: Phenytoin is not effective in generalised absent seizures.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "True statement about Iron Isomaltoside 1000 is",
    "choices": [
      {
        "id": 1,
        "text": "Iron requirement can be fulfilled in single dose"
      },
      {
        "id": 2,
        "text": "More immunogenic than iron dextran"
      },
      {
        "id": 3,
        "text": "Given intravenously and gets deposited in adipose tissue therefore less toxic"
      },
      {
        "id": 4,
        "text": "Cannot be given with erythropoietin"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Iron requirement</strong> can be fulfilled in a <strong>single dose</strong> is true regarding <strong>Isomaltoside 1000</strong>.</p>\n<p>Iron isomaltose 1000 is a new IV iron formulation that can supply a complete replacement dose in a short, single visit. It is used in adult patients with an intolerance to oral iron or for patients with CKD not requiring hemodialysis.</p>\n<p>Other options:</p>\n<p>Option B: \u00a0Isomaltoside 1000 is not more immunogenic than <strong>iron dextran</strong>.</p>\n<p>Option \u00a0C: The strength of iron binding causes a controlled slow release of bioavailable iron, decreasing the risk of toxicity from labile-free iron. Its decreased <strong>toxicity</strong> cannot be attributed to deposition in adipose tissue.</p>\n<p>Option D: Isomaltoside 1000 can be given with <strong>erythropoietin</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The drug that binds to CD4 and has action on both CCR5 and CXCR4 in tropic HIV infections is",
    "choices": [
      {
        "id": 1,
        "text": "Maraviroc"
      },
      {
        "id": 2,
        "text": "Ibalizumab"
      },
      {
        "id": 3,
        "text": "Elvitregravir"
      },
      {
        "id": 4,
        "text": "Fosamprenavir"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The drug that binds to CD4 and has an action on both CCR5 and CXCR4 in tropic HIV infections is<strong> Ibalizumab.</strong></p>\n<p><strong>Ibalizumab</strong> is an anti-CD4 monoclonal antibody approved for use in the treatment of <strong>multidrug-resistant HIV-1</strong>. It has action on both <strong>CCR5 and CXCR4</strong> in tropic HIV infections and is administered intravenously.\u00a0</p>\n<p>It acts as an entry inhibitor. It blocks HIV-1 from infecting CD4+ T cells by binding to domain 2 of CD4 cells. It also interferes with post-attachment steps required for the entry of HIV-1 virus particles into host cells and thus prevents the viral transmission that occurs via cell-cell fusion.\u00a0</p>\n<p>Other options:</p>\n<p>Option A: <strong>Maraviroc</strong> binds to the host cell CCR5 receptor to block the binding of viral gp120. It prevents the entry of the viral particles. It does not bind to CD4.</p>\n<p>Option C: <strong>Elvitegravir</strong> is an integrase inhibitor that inhibits HIV 1 viral integrase enzyme and prevents proviral DNA integration into host cells.</p>\n<p>Option D: <strong>Fosamprenavir</strong> is a protease inhibitor that blocks the viral protease enzyme necessary to produce mature virions upon budding from the host membrane.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Inhibitors of Poly ADP ribose polymerase (PARP) are approved for BRCA-positive breast cancers. Which among the following drugs is used?",
    "choices": [
      {
        "id": 1,
        "text": "Pablociclib"
      },
      {
        "id": 2,
        "text": "Rucaparib"
      },
      {
        "id": 3,
        "text": "Regorafenib"
      },
      {
        "id": 4,
        "text": "Vandetinib"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Rucaparib</strong> is an inhibitor of <strong>Poly ADP ribose polymerase (PARP)</strong> used for <strong>BRCA-positive breast cancers</strong>.\u00a0</p>\n<p>Rucaparib is a poly ADP-ribose polymerase/ PARP inhibitor approved for the treatment of breast and advanced ovarian cancer.</p>\n<p>PARP is a nuclear protein that transfers ADP-ribose from NAD+ to target proteins and this plays an important role in the DNA damage response. Rucaparib and olaparib are PARP inhibitors.</p>\n<p>Inhibitors of <strong>PARP (Poly ADP Ribosyl Polymerase)</strong> approved for breast cancer:</p>\n<ul>\n<li>Olaparib</li>\n<li>Rucaparib</li>\n<li>Talazoparib</li>\n</ul>\n<p>Other options:</p>\n<p>Option A: <strong>Palbociclib</strong> is a selective inhibitor of the cyclin-dependent kinases CDK4 and CDK6. It is used in the treatment of metastatic breast cancer.\u00a0</p>\n<p>Option C: <strong>Regorafenib</strong> is an angiogenesis inhibitor that is indicated as a second-line treatment for unresectable hepatocellular carcinoma. (The first line is Sorafenib).</p>\n<p>Option D: <strong>Vandetanib</strong> is an oral tyrosine kinase inhibitor recently FDA-approved for unresectable locally advanced or metastatic medullary thyroid carcinoma.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old patient who is a known case of hypertension and diabetes underwent PCI stent placement for NSTEMI last year. He is currently on aspirin, metoprolol and atorvastatin. He comes for a follow-up, and his lipid profile is as follows- Total cholesterol 252mg/dl LDL: 156mg/dl, triglyceride 158mg/dl and HDL- 40 mg/dl. Which drugs can be added based on his lipid profile?",
    "choices": [
      {
        "id": 1,
        "text": "1, 2 and 4"
      },
      {
        "id": 2,
        "text": "Only 1 and 2"
      },
      {
        "id": 3,
        "text": "1,3 and 4"
      },
      {
        "id": 4,
        "text": "Only 1 and 3"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>1,2 and 4</strong> can be added based on his lipid profile.</p>\n<p>A patient with hypertension and diabetes who underwent PCI stent placement for NSTEMI has <strong>atherosclerotic cardiovascular disease (ASCVD)</strong>. The treatment goal in patients with ASCVD is to <strong>decrease LDL levels</strong>.</p>\n<p>Ezetemibe, Evolocumab, Bemepedoic acid decrease LDL. <strong>Gemfibrozil</strong> mainly decreases <strong>triglycerides</strong> and not LDL.</p>\n<p>1. <strong>Evolocumab</strong> is a monoclonal antibody that inhibits PCSK-9 (proprotein convertase subtilisin/kexin). Inhibition of PCSK-9 prevents the degradation of LDL receptors and thus increases LDL-cholesterol clearance by the liver. They are used in patients with atherosclerotic cardiovascular disease (ASCVD) to decrease LDL levels.</p>\n<p>2. <strong>Ezetimibe</strong> inhibits cholesterol absorption by enterocytes in the small intestine. It lowers the total and LDL-C levels.</p>\n<p>3. <strong>Gemfibrozil </strong>belongs to the fibrate group of drugs that binds to peroxisome proliferator-activated receptors (PPAR\u03b1), which stimulate fatty acid oxidation and thereby reduce triglyceride levels mainly.</p>\n<p>4. <strong>Bempedoic acid</strong> inhibits adenosine triphosphate-citrate lyase (ACL) and results in decreased LDL in patients not responding to statin therapy.</p>\n<p>Note - Ezetimibe, colestipol, bempedoic acid and PCSK-9 inhibitors like alirocumab have been proven to reduce atherosclerosis risk when added to statins, whereas the fibrate group of drugs and niacin show no significant effect in addition to statins.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a true statement regarding Pretomanid?",
    "choices": [
      {
        "id": 1,
        "text": "Given in XDR TB with Bedaquiline and Linezolid"
      },
      {
        "id": 2,
        "text": "Contraindicated in patients on enzyme inducer drugs"
      },
      {
        "id": 3,
        "text": "Acts by reactive oxygen species"
      },
      {
        "id": 4,
        "text": "For resistant cases of malaria"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Contraindicated in patients on enzyme inducer drugs is the true statement regarding <strong>Pretomanid</strong>.</p>\n<p><strong>Pretomanid</strong> is metabolized in part by CYP3A. So co-administration with strong or moderate CYP3A inducers should be avoided. Hence, it is <strong>contraindicated</strong> in patients on <strong>enzyme-inducer</strong> drugs.</p>\n<p>Pretomanid is a bicyclic <strong>nitroimidazole</strong>\u00a0that acts by inhibiting mycolic acid (a component of the mycobacterial cell wall) and protein synthesis in the mycobacteria.</p>\n<p>Pretomanid in combination with Bedaquiline and Linezolid, was approved by the FDA in 2019 for the treatment of adult patients with <strong>Pre (XDR) TB </strong>(resistant to rifampicin and any fluoroquinolones) and for patients who are treatment-intolerant or nonresponsive to multidrug-resistant pulmonary <strong>(MDR) TB </strong>treatment.</p>\n<p>Other options:</p>\n<p>Option A: Pretomanid is given for <strong>Pre -XDR TB (not XDR TB) </strong>in combination with Bedaquiline and Linezolid (<strong>BPaL regimen</strong>). Pre-XDR TB is resistant to rifampicin and any fluoroquinolone, and therefore, BPaL is given to such patients.\u00a0</p>\n<p>Option C: Pretomanid acts by <strong>reactive nitrogen species</strong> like NO and not by reactive oxygen species.</p>\n<p>Option D: Pretomanid is not used for resistant cases of malaria.</p>\n<p>*Note: For people with MDR/RR-TB, the regimen comprises <strong>bedaquiline (B), pretomanid (Pa), linezolid (L) and moxifloxacin (M)</strong>, and is referred to as <strong>BPaLM.</strong> For people who have pre-XDR-TB, the regimen can be used without moxifloxacin (BPaL).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs act on sodium channels and potentiate slow sodium inactivation?",
    "choices": [
      {
        "id": 1,
        "text": "Phenytoin"
      },
      {
        "id": 2,
        "text": "Lamotrigine"
      },
      {
        "id": 3,
        "text": "Lacosamide"
      },
      {
        "id": 4,
        "text": "Topiramate"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<table style=\"border-collapse: collapse; width: 46.851%; height: 134.39px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">Antiepileptic Drugs</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">Mechanism of Action</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">\n<p><strong>Phenytoin (Option A)</strong></p>\n<p>Carbamazepine</p>\n<p><strong>Lamotrigine (Option B)</strong></p>\n</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">Inhibit Na channels</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">\n<p>Phenobarbital</p>\n<p>Vigabatrin</p>\n<p>Tiagabine</p>\n</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">\n<p>Enhance GABA inhibition</p>\n<p>Vigabatrin \u2013 block GABA aminotransferase irreversibly</p>\n<p>Tiagabine \u2013 block GABA reuptake</p>\n</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">\n<p>Ethosuximide</p>\n<p>Zonisamide</p>\n<p>Gabapentin</p>\n<p>Pregabalin</p>\n</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">\n<p>Block Ca channels</p>\n<p>Ethosuximide, Zonisamide \u2013block T-type Ca channels</p>\n<p>Gabapentin, Pregabalin \u2013block voltage sensitive Ca channels</p>\n</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">Levetiracetam</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">Binds synaptic vesicle protein 2A</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 41.8628%; height: 22.3984px;\">Valproate</td>\n<td style=\"width: 58.1372%; height: 22.3984px;\">\n<p>\u00a0Multiple MOA:</p>\n<p>GABA related action</p>\n<p>NMDA receptor antagonist</p>\n<p>Histone deacetylase inhibitor</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.8628%;\"><strong>Topiramate (Option D)</strong></td>\n<td style=\"width: 58.1372%;\">\n<p>Multiple MOA:</p>\n<p>GABAergic action</p>\n<p>AMPA receptor antagonist</p>\n<p>Acts on Na, Ca and K channels</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.8628%;\">Drugs acting on glutamate receptors</td>\n<td style=\"width: 58.1372%;\">\n<p>NMDA-type glutamate receptors:</p>\n<p>Valproate, Felbamate</p>\n<p>AMPA-type glutamate receptors:</p>\n<p>Topiramate, Perampanel</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 41.8628%;\">\n<p>Newer drugs:Rufinamide\u00a0</p>\n<p>Lacosamide \u00a0 \u00a0</p>\n<p>Ezogabine \u00a0</p>\n<p>Perampanel</p>\n</td>\n<td style=\"width: 58.1372%;\">\n<p>Prolongs inactivation of voltage-gated Na channels \u00a0 Enhances inactivation of voltage-gated Na channels Inhibits collapsin response mediator protein 2 \u00a0</p>\n<p>Potassium channel opener \u00a0</p>\n<p>AMPA-type glutamate receptor antagonist</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which drug acts on the marked receptor?",
    "choices": [
      {
        "id": 1,
        "text": "Tiagabine"
      },
      {
        "id": 2,
        "text": "Ganaxolone"
      },
      {
        "id": 3,
        "text": "Felbamate"
      },
      {
        "id": 4,
        "text": "Stiripentol"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>Other options:</p>\n<p>Option B: <strong>Ganaxolone</strong> is a recently approved drug for the treatment of seizures associated with CDKL5 deficiency. The exact mechanism of action of Ganaxolone is unknown, but its anticonvulsant effects are thought to result from positive allosteric modulation of the GABA-A receptor in the CNS. It can be used in adults as well as children older than 2 years of age. The most common adverse reactions associated with the drug are somnolence, pyrexia, salivary hypersecretion and seasonal allergy.\u00a0</p>\n<p>Option C: <strong>Felbamate</strong> is the NMDA receptor antagonist prescribed to this patient. It also potentiates GABA action. It is indicated in refractory primary or secondary generalised seizures and Lennox-Gastaut syndrome. Felbamate is associated with aplastic anemia and liver failure.</p>\n<p>Option D: <strong>Stiripentol</strong> is a GABA A receptor modulator with GABA-enhancing activity. It is clinically used in conjunction with valproate and clobazam for refractory generalized tonic-clonic seizures with severe myoclonic epilepsy in infants (Dravet syndrome).</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/921730699eae46c3843301d7d92a1f02.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a989056e57504c4fbaed4b616bf3068cx1280x1618.JPEG"
    ]
  },
  {
    "text": "Match the treatment with its respective condition.",
    "choices": [
      {
        "id": 1,
        "text": "a-i, b-ii, c-iii, d-iv"
      },
      {
        "id": 2,
        "text": "a-ii, b-iii, c-i, d-iv"
      },
      {
        "id": 3,
        "text": "a-iii, b-i, c-iv, d-ii"
      },
      {
        "id": 4,
        "text": "a-iv, b-ii, c-iii, d-i"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The correct set of matching is<strong>\u00a0a-ii, b-iii, c-i, d-iv.</strong></p>\n<table style=\"border-collapse: collapse; width: 34.3013%; height: 89.5936px;\" border=\"1\">\n<tbody>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 39.0285%; height: 22.3984px;\">a. Naloxone</td>\n<td style=\"width: 60.9715%; height: 22.3984px;\">ii. Opioid overdose</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 39.0285%; height: 22.3984px;\">b. Oxazepam</td>\n<td style=\"width: 60.9715%; height: 22.3984px;\">iii. Delirium tremens</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 39.0285%; height: 22.3984px;\">c. Varenicline</td>\n<td style=\"width: 60.9715%; height: 22.3984px;\">i. Smoking cessation</td>\n</tr>\n<tr style=\"height: 22.3984px;\">\n<td style=\"width: 39.0285%; height: 22.3984px;\">d. Acamprosate</td>\n<td style=\"width: 60.9715%; height: 22.3984px;\">iv. Treatment of alcoholism</td>\n</tr>\n</tbody>\n</table>\n<p><strong><br />Naloxone</strong> is an <strong>opioid antagonist </strong>used to reverse the effects of <strong>opioid overdose</strong>, such as respiratory depression.</p>\n<p><strong>Oxazepam</strong> is a <strong>benzodiazepine</strong> used for the management of <strong>delirium tremens</strong>, a severe alcohol withdrawal syndrome.</p>\n<p><strong>Varenicline</strong> is a <strong>partial agonist </strong>at the <strong>nicotinic acetylcholine receptors,</strong> used for <strong>smoking cessation</strong> by reducing withdrawal symptoms and cravings.</p>\n<p><strong>Acamprosate</strong> is a <strong>modulator </strong>of <strong>glutamate</strong> and <strong>GABA neurotransmission</strong>, used for the treatment of <strong>alcoholism</strong> by reducing cravings and the risk of relapse in alcohol abstinence.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '059 Pharmacology Ini-Cet 2024';
        let hierarchy = ["Marrow", "PYQs", "Pharmacology"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>