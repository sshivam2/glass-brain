<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medicine Test I - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
 
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
 
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}

    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / NEET PG Test Series Subject Wise / Year 2018 - 19
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">50</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Allodynia is _____",
    "choices": [
      {
        "id": 1,
        "text": "Augmented response to a stimulus that is usually painful"
      },
      {
        "id": 2,
        "text": "Pain evoked by an ordinary, usually painless stimulus"
      },
      {
        "id": 3,
        "text": "Abnormal unpleasant sensation, either spontaneous or evoked"
      },
      {
        "id": 4,
        "text": "Increased sensory experience with a stimulus"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li><strong>Allodynia</strong> is the <strong>pain</strong> evoked by an <strong>ordinary, usually painless</strong> (innocuous)<strong> stimulus</strong> such as rubbing or touching. It can occur in injuries to the spinal cord and after a thalamocortical stroke. It is also associated with <strong>complex regional pain syndromes </strong>(CRPS), multiple sclerosis, migraine, etc.</li>\n<li><strong>Hyperalgesia</strong> is the augmented response to a stimulus that is usually painful (noxious stimulus). It can also accompany spinal cord injuries and CRPS.</li>\n<li><strong>Dysesthesia</strong> is an <strong>abnormal, unpleasant sensation</strong>, either spontaneous or evoked. For example, when pressure causes burning pain. This is not to be confused with <strong>paresthesia</strong>, which is a <strong>abnormal but not unpleasant</strong> <strong>sensation</strong>, either spontaneous or evoked. For example, when rubbing gently gives the sensation of pressure.</li>\n<li><strong>Increased sensory experience</strong> with a stimulus is called <strong>hyperesthesia.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The strongest association of essential mixed cryoglobulinemia (EMC) is with hepatitis ___ infection",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "E"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Hepatitis C virus (HCV)</strong> infection has the strongest association with <strong>essential mixed cryoglobulinemia (EMC)</strong>, but it has been also linked with hepatitis A and B.</p>\n<p>EMC is a <strong>systemic vasculitis</strong>, characterized by palpable purpura, arthralgias and weakness. Chronic liver disease and membrano-proliferative glomerular nephritis is usually associated with this syndrome in HCV infection.</p>\n<p><strong>Other Extrahepatic Manifestations of Viral Hepatitis:</strong></p>\n<ul>\n<li>Serum-like sickness syndrome &ndash; HBV and HCV infection</li>\n<li><strong>Polyarteritis nodosa &ndash; HBV</strong></li>\n<li>Membrano-proliferative glomerular nephritis &ndash; HBV and HCV (with EMC)</li>\n<li>Papular acrodermatitis &ndash; HBV</li>\n<li>Pancreatitis &ndash; HAV</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Nasal polyps are commonly associated with:",
    "choices": [
      {
        "id": 1,
        "text": "Intrinsic asthma"
      },
      {
        "id": 2,
        "text": "Brittle asthma"
      },
      {
        "id": 3,
        "text": "Extrinsic asthma"
      },
      {
        "id": 4,
        "text": "Exercise-induced asthma"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Nasal polyps</strong> are associated with <strong>intrinsic asthma</strong>.</p>\n<p>Intrinsic asthma is characterized by the presence of <strong>asthma</strong> with <strong>negative skin prick tests</strong> for common antigens. The association of nasal polyps with asthma is described by <strong>Samter&rsquo;s triad</strong> (intrinsic asthma + aspirin hypersensitivity + nasal polyposis). Asthma is usually severe, persistent, and <strong>adult-onset</strong>.</p>\n<p>Other options:</p>\n<p>Option B: <strong>Brittle asthma</strong> refers to a <strong>severe</strong> variant of asthma where patients have very serious and often, <strong>life-threatening attacks</strong> despite appropriate therapy.</p>\n<p>Option C: <strong>Extrinsic asthma</strong> is also referred to as atopic asthma. It is <strong>allergen</strong> mediated.</p>\n<p>Option D: <strong>Exercise-induced asthma</strong> is airway narrowing due to <strong>strenuous physical activity</strong>. Symptoms typically start after the exercise has ended and last for around 30 minutes. </p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Patients with which of the following conditions are not at risk for pituitary apoplexy?",
    "choices": [
      {
        "id": 1,
        "text": "Hyperthyroidism"
      },
      {
        "id": 2,
        "text": "Diabetes mellitus"
      },
      {
        "id": 3,
        "text": "Sickle cell anemia"
      },
      {
        "id": 4,
        "text": "Hypertension"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pituitary apoplexy</strong> does not occur in hyperthyroidism. It&nbsp;is a rare endocrine emergency which can occur due to&nbsp;<strong>haemorrhage</strong>&nbsp;or<strong>&nbsp;infarction</strong>&nbsp;of the pituitary gland. It may&nbsp;occur as a result of the following conditions:</p>\n<ul>\n<li>Pituitary adenoma (spontaneous)</li>\n<li>Sheehan syndrome</li>\n<li>Acute shock</li>\n<li>Diabetes mellitus</li>\n<li>Hypertension</li>\n<li>Sickle cell anemia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following cranial nerves is predominantly involved in most cases of Ramsay Hunt syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Facial nerve"
      },
      {
        "id": 2,
        "text": "Trigeminal nerve"
      },
      {
        "id": 3,
        "text": "Vagus nerve"
      },
      {
        "id": 4,
        "text": "Glossopharyngeal nerve"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Ramsay Hunt Syndrome</strong></p>\n<ul>\n<li><strong>Herpes zoster</strong> reactivation in the <strong>geniculate ganglion</strong> is the cause of this condition. It is also caused <strong>geniculate herpes zoster.</strong></li>\n<li>In most patients with Ramsay Hunt syndrome, there is involvement of the trunk of the <strong>facial nerve</strong>, which results in severe <strong>facial palsy</strong>.</li>\n<li>Vesicular eruptions are commonly seen in the external auditory canal and in other parts.</li>\n<li>Often, the <strong>8<sup>th</sup> nerve</strong> is also involved, which causes hearing loss and vertigo.</li>\n<li>Treatment is usually symptomatic and the return of function of the facial nerve is usually less than Bell&rsquo;s palsy.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is the best biomarker for lobar pneumonia?",
    "choices": [
      {
        "id": 1,
        "text": "C-reactive protein"
      },
      {
        "id": 2,
        "text": "Procalcitonin"
      },
      {
        "id": 3,
        "text": "Fibrinogen"
      },
      {
        "id": 4,
        "text": "Serum amyloid A"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The best biomarker for lobar pneumonia is <strong>procalcitonin.&nbsp;</strong></p>\n<p>The most commonly used biomarkers of severe inflammation are <strong>C-reactive protein (CRP)</strong> and <strong>procalcitonin (PCT)</strong>. Levels of these acute phase reactants increase in the presence of bacterial pathogens. PCT testing distinguishes between bacterial (mostly lobar pneumonia) and viral infection to decide the <strong>need for antibacterial therapy </strong>or discontinuation of treatment.</p>\n<p>CRP, fibrinogen, and serum amyloid A are other acute phase reactants.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Palinopsia, simultanagnosia and oculomotor apraxia are entities of which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Anton\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Parinaud\u2019s syndrome"
      },
      {
        "id": 3,
        "text": "Weber\u2019s syndrome"
      },
      {
        "id": 4,
        "text": "Balint\u2019s syndrome"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Balint&rsquo;s Syndrome:</strong></p>\n<ul>\n<li>The components involved in Balint&rsquo;s syndrome include:\n<ol>\n<li><strong>Palinopsia</strong>: Persistence of a visual image despite changing gaze.</li>\n<li><strong>Simultanagnosia</strong> (asimultanagnosia or simultagnosia)<strong>: </strong>Inability to synthesize the entire image, or inability to perceive more than one item at a time.</li>\n<li><strong>Oculomotor apraxia</strong>: Psychic paralysis of gaze or difficulty in changing the direction of gaze in presence of normal muscle function.</li>\n<li><strong>Optic ataxia:</strong> Inco-ordination of movements of extremities under visual guidance and control, like inability in reaching for an object.</li>\n</ol>\n</li>\n<li>A variety of pathologies is said to cause this condition including neurodegenerative conditions, progressive multifocal leukoencephalopathy and malignancies.</li>\n<li>It usually also results from <strong>bilateral</strong> <strong>watershed infarcts</strong>, generally between the distal posterior and middle cerebral arterial territories.</li>\n</ul>\n<p><strong>Anton&rsquo;s Syndrome:</strong></p>\n<ul>\n<li>It occurs due to bilateral infarction in the posterior cerebral arteries. It leads to <strong>cortical blindness</strong> - which the patient is usually unaware of or they deny it - and <strong>confabulations</strong>.</li>\n</ul>\n<p><strong>Parinaud&rsquo;s Syndrome:</strong></p>\n<ul>\n<li>The site of lesion in this condition is the <strong>dorsal midbrain</strong>.</li>\n<li>It consists of <strong>impaired vertical gaze</strong> (upgaze pareisis), <strong>convergence-retraction nystagmus</strong>, <strong>lid retraction</strong> (Collier&rsquo;s sign) and <strong>pupillary light-near dissociation</strong> (pupillary areflexia).</li>\n</ul>\n<p><strong>Weber&rsquo;s Syndrome:</strong></p>\n<ul>\n<li>Infarctions in the distribution of the <strong>penetrating branches of the posterior cerebral artery (PCA)</strong>, which affects the <strong>cerebral peduncle </strong>and damages the <strong>III cranial nerve </strong>and <strong>pyramidal fibres.</strong></li>\n<li>Its manifestations include <strong>contralateral hemiplegia of the face, arm and legs</strong> and <strong>ipsilateral oculomotor paresis.</strong></li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A factory worker presents to the clinic with fever, tiredness, and a chronic dry cough. He says his symptoms are worst on the first day of the week, improve by the end of the week, and are almost non-existent over the weekends. What could be the most likely diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Bagassosis"
      },
      {
        "id": 2,
        "text": "Byssinosis"
      },
      {
        "id": 3,
        "text": "Berylliosis"
      },
      {
        "id": 4,
        "text": "Bornholm\u2019s disease"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The above characteristic pattern of symptoms is called&nbsp;<strong>Monday fever</strong> or<strong>&nbsp;</strong>Monday chest tightness and is due to <strong>byssinosis</strong>.&nbsp;</p>\n<p>Byssinosis is seen commonly in cotton factory workers due to <strong>cotton dust</strong> <strong>exposure</strong>. It is also caused due to flax, hemp, and jute dust.</p>\n<p>It is due to occupational hypersensitivity reaction with symptoms occurring (or recurring) on the first day of the workweek and diminishing by the weekend due to development of tolerance.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is correct about the condition shown in the image below?",
    "choices": [
      {
        "id": 1,
        "text": "Hypernatremia is a major cause of delayed neurologic deficits in this condition"
      },
      {
        "id": 2,
        "text": "Sensitivity of a CT scan is best within 96 hours"
      },
      {
        "id": 3,
        "text": "The Hunt-Hess scale can be used for the grading of this condition"
      },
      {
        "id": 4,
        "text": "Giant aneurysms are those greater than 3.5 cm"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The non-contrast CT image above shows a <strong>subarachnoid hemorrhage</strong> (marked with an arrow) with blood filling the subarachnoid cisterns bilaterally and into the Sylvian fissure.</p>\n<p><strong>Subarachnoid Hemorrhage (SAH):</strong></p>\n<ul>\n<li>Scales used for SAH grading are the <strong>Hunt-Hess scale</strong> and the <strong>World Federation of Neurosurgical Societies classification</strong>.</li>\n<li>Most common causes of SAH are head trauma and rupture of a <strong>saccular aneurysm</strong>.</li>\n<li><strong>Giant aneurysms </strong>are those which are <strong>&gt;2.5cm</strong>.</li>\n<li>Characteristic clinical feature is the presence of a <strong>sudden onset, severe headache</strong> which the patient often describes as &lsquo;<strong>the worst headache of their life</strong>&rsquo;.</li>\n<li>The four major causes of delayed neurologic deficits in SAH are <strong>rerupture </strong>of an aneurysm, <strong>hydrocephalus</strong>, <strong>vasospasm</strong>, and <strong>hyponatremia</strong>.</li>\n<li>The gold standard of diagnosing SAH is a <strong>non-contrast CT scan </strong>which has a high sensitivity up to <strong>72 hours</strong>. If a CT scan is negative, yet there is high suspicion of an SAH, then a <strong>lumbar puncture (LP) </strong>is to be done to check for <strong>xanthochromia</strong>, which is detectable from 2 hours after hemorrhage and lasts several weeks. If both CT and LP are negative, then a <strong>CT angiography</strong> can be done to search for the cause.</li>\n</ul>\n<p>Note:&nbsp;The&nbsp;<strong>Modified Fisher scale</strong>&nbsp;is a method for grading SAH seen on non-contrast CT. The&nbsp;<strong>Hunt and Hess scale&nbsp;</strong>describes the severity of SAH and is used as a predictor of survival.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/4b04dc17144042c192dd8d4c800a3043.PNG"
    ],
    "explanation_images": []
  },
  {
    "text": "A 48-year-old man presents to the clinic with easy fatiguability and weight loss. After a detailed workup, he is diagnosed with chronic myeloid leukemia. What is the initial treatment of choice?",
    "choices": [
      {
        "id": 1,
        "text": "Allogeneic stem cell transplantation"
      },
      {
        "id": 2,
        "text": "Monoclonal antibody against C5"
      },
      {
        "id": 3,
        "text": "Tyrosine kinase inhibitor"
      },
      {
        "id": 4,
        "text": "CD20 inhibitor"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The <strong>initial treatment</strong> of choice in patients with chronic myeloid leukemia (<strong>CML</strong>) is <strong>tyrosine kinase inhibitors</strong>. These include imatinib, nilotinib, dasatinib, bosutinib, and ponatinib.</p>\n<p><strong>Allogeneic stem cell transplant</strong> is considered in patients who are <strong>negative</strong> for <strong>Philadelphia</strong> <strong>chromosome</strong>, or who are non-responsive to the tyrosine kinase inhibitors.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is used in the prophylactic management of migraine?",
    "choices": [
      {
        "id": 1,
        "text": "Nimodipine"
      },
      {
        "id": 2,
        "text": "Fluoxetine"
      },
      {
        "id": 3,
        "text": "Verapamil"
      },
      {
        "id": 4,
        "text": "Flunarizine"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Drugs that have <strong>not shown</strong> benefit in prophylaxis of migraine: Verapamil (a calcium channel blocker), nimodipine, clonidine, fluoxetine (an SSRI).</p>\n<p>Drugs used for prophylaxis of migraine:</p>\n<ul>\n<li>Beta blockers: <strong>Propranolol</strong>, metoprolol, timolol, atenolol</li>\n<li>Antidepressants: <strong>Amitriptyline</strong>, nortriptyline, imipramine</li>\n<li>Anticonvulsants: <strong>Valproate</strong>, <strong>topiramate</strong></li>\n<li>Serotonin antagonist: <strong>Methysergide</strong></li>\n<li>Angiotensin II receptor blocker: <strong>Candesartan</strong></li>\n<li>Angiotensin converting enzyme inhibitor: Lisinopril</li>\n<li>Calcium channel blockers: <strong>Flunarizine</strong></li>\n</ul>\n<p><strong>Onabotulinum toxin type A</strong> is used in prevention of <strong>chronic migraine</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is an unlikely complication in patients with bronchiectasis?",
    "choices": [
      {
        "id": 1,
        "text": "Cor pulmonale"
      },
      {
        "id": 2,
        "text": "Amyloidosis"
      },
      {
        "id": 3,
        "text": "Lung cancer"
      },
      {
        "id": 4,
        "text": "Empyema"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Lung cancer is not a known complication of bronchiectasis.</p>\n<p><strong>Complications of bronchiectasis include:</strong></p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Massive hemoptysis&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Empyema and lung abscess</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Respiratory failure</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Pulmonary hypertension and cor pulmonale</li>\n<li style=\"font-weight: 400;\" aria-level=\"1\">Secondary amyloidosis (AA type)</li>\n</ul>\n<p><strong>Chronic</strong> and <strong>recurrent infections</strong> lead to secondary amyloidosis (AA type) and involve the <strong>kidneys</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year old patient with suspected familial Alzheimer\u2019s disease (AD) have genes called Presenilins which are found in the chromosomes -",
    "choices": [
      {
        "id": 1,
        "text": "14 and 1"
      },
      {
        "id": 2,
        "text": "21 and 14"
      },
      {
        "id": 3,
        "text": "1 and 21"
      },
      {
        "id": 4,
        "text": "14 and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Familial Alzheimer's disease</strong> are predisposed to gene mutations in the<strong>&nbsp;Presenilin 1 (PSEN-1) gene on chromosome 14 </strong>and<strong>&nbsp;Presenilin 2 (PSEN-2) gene on chromosome 1.&nbsp;</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 45-year-old man underwent emergency surgery following a road traffic accident. The surgery was performed under general anesthesia. Two days later, he developed features of respiratory failure. Which of the following types is likely to be present in him?",
    "choices": [
      {
        "id": 1,
        "text": "Type 1"
      },
      {
        "id": 2,
        "text": "Type 2"
      },
      {
        "id": 3,
        "text": "Type 3"
      },
      {
        "id": 4,
        "text": "Type 4"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The features of <strong>respiratory failure</strong> in the <strong>perioperative period</strong> of this patient is most likely due to <strong>lung atelectasis. </strong><strong>Type 3</strong> respiratory failure is most likely to be present in him.</p>\n<p>Type 3 respiratory failure is also known as<strong> perioperative respiratory failure</strong>.</p>\n<p>After <strong>general anesthesia</strong>, there is a&nbsp;<strong>decrease in functional residual capacity</strong>&nbsp;due to a reduction in muscular tone. This leads to airway closure and the collapse of the dependent lung units.</p>\n<p>Atelectasis can be treated by frequent changes in position, chest physiotherapy, upright positioning, and control of incisional and abdominal pain. Non-invasive positive-pressure ventilation may also be used to reverse regional atelectasis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common site of gastric adenocarcinoma in the Asian population?",
    "choices": [
      {
        "id": 1,
        "text": "Cardia"
      },
      {
        "id": 2,
        "text": "Body"
      },
      {
        "id": 3,
        "text": "Antrum"
      },
      {
        "id": 4,
        "text": "Fundus"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common site of gastric adenocarcinoma in the&nbsp;<strong>Asian</strong> population is the <strong>antrum</strong>. This is because <strong>H. pylori infections</strong> are relatively more prevalent in Asian countries and are associated with&nbsp;carcinoma of the <strong>body and distal stomach</strong> than the proximal stomach.</p>\n<p>However, in <strong>western</strong> countries, the <strong>proximal stomach</strong> is the most common site.&nbsp;This is attributed to a lesser prevalence of untreated H.pylori infections and a greater burden of <strong>chronic GERD</strong> and obesity in western countries.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following immunologic diseases is the most common cause of chorea?",
    "choices": [
      {
        "id": 1,
        "text": "Sjogren\u2019s syndrome"
      },
      {
        "id": 2,
        "text": "Systemic lupus erythematosus"
      },
      {
        "id": 3,
        "text": "Systemic sclerosis"
      },
      {
        "id": 4,
        "text": "Behcet\u2019s syndrome"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<ul>\n<li>In addition to being the most common immunologic disorder that causes chorea, <strong>systemic lupus erythematosus</strong> is also the most common systemic disorder causing chorea.</li>\n<li>Other immunologic disorders that cause chorea are Behcet&rsquo;s syndrome, Sjogren&rsquo;s syndrome, antiphospholipid antibody syndrome, etc.</li>\n<li>Other systemic causes of chorea include <strong>thyrotoxicosis</strong>, HIV disease and polycythemia rubra vera.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following conditions predominantly involve the upper lobe of the lung?",
    "choices": [
      {
        "id": 1,
        "text": "Rheumatoid arthritis"
      },
      {
        "id": 2,
        "text": "Asbestosis"
      },
      {
        "id": 3,
        "text": "Scleroderma"
      },
      {
        "id": 4,
        "text": "Ankylosing spondylitis"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Ankylosing spondylitis</strong> predominantly involves the <strong>upper lobe </strong>of the lung<strong>&nbsp;</strong>leading to <strong>pulmonary fibrosis.</strong></p>\n<p>Rheumatoid arthritis, scleroderma, and asbestosis&nbsp;predominantly involve the lower lobes of the lungs.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The auto-antibody that is associated with myasthenia gravis, from the following, is _______",
    "choices": [
      {
        "id": 1,
        "text": "Anti-C1q antibodies"
      },
      {
        "id": 2,
        "text": "Anti-low density lipoprotein receptor-related protein 4 (LPR4) antibody"
      },
      {
        "id": 3,
        "text": "Anti-Smith antibody"
      },
      {
        "id": 4,
        "text": "Anti-lysosome associated membrane protein-2 (LAMP-2) antibody"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>One of the auto-antibodies in <strong>myasthenia gravis </strong>is anti-low density lipoprotein receptor-related protein 4 (<strong>LPR4</strong>) antibodies</p>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "An elderly woman presents with breathlessness on exertion. On auscultation, bilateral basal rales are heard. A chest CT is done and is shown below. Which of the following is likely to be increased in her?",
    "choices": [
      {
        "id": 1,
        "text": "Total vital capacity"
      },
      {
        "id": 2,
        "text": "Forced vital capacity"
      },
      {
        "id": 3,
        "text": "Lung compliance"
      },
      {
        "id": 4,
        "text": "A-a gradient"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The given clinical scenario along with the <strong>honeycomb pattern</strong> of lung parenchyma due to interstitial fibrosis is suggestive of <strong>interstitial lung disease</strong> (ILD).&nbsp;The alveolar-arterial gradient (<strong>PAO2-PaO2</strong>)<sub>&nbsp;</sub>is <strong>increased</strong> in ILD. It is a restrictive lung disease.&nbsp;</p>\n<p>In ILD, the alveolar-capillary bed is damaged and thus there is a decrease in diffusion capacity. Therefore, while the <strong>PAO<sub>2</sub></strong> (Alveolar O<sub>2</sub>) remains <strong>normal</strong>, the<strong> PaO<sub>2</sub></strong> (arterial) <strong>decreases</strong>, and the alveolar-arterial difference increases.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/d7b9235aabc742e7abcf6c0a9fc8b85c.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/eef830d2d0f94fab86d0f1c385c6ab06x1200x2175.JPEG"
    ]
  },
  {
    "text": "In anterior spinal artery syndrome, which of the following is spared?",
    "choices": [
      {
        "id": 1,
        "text": "Sexual function"
      },
      {
        "id": 2,
        "text": "Vibration sense"
      },
      {
        "id": 3,
        "text": "Pain sensation"
      },
      {
        "id": 4,
        "text": "Bladder and bowel function"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>In anterior spinal artery syndrome, </strong>the posterior columns are spared. Hence, <strong>vibration</strong> <strong>sense</strong> and proprioception are spared.</p>\n<p><strong>Anterior</strong> <strong>spinal</strong> <strong>artery</strong> <strong>syndrome</strong> involves the <strong>anterior two-thirds </strong>of the spinal cord, affecting the <strong>corticospinal </strong>and <strong>spinothalamic tracts. </strong>Features of this syndrome are <strong>paralysis</strong> and sensory impairments below the level of the lesion, which include <strong>impairment of pain and temperature sensation. </strong>Vibration sense and proprioception are spared. Autonomic control is also compromised, which leads to sexual, bladder and bowel dysfunction.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a disease modifying agent used in the therapy of multiple sclerosis?",
    "choices": [
      {
        "id": 1,
        "text": "Riluzole"
      },
      {
        "id": 2,
        "text": "Teriflunomide"
      },
      {
        "id": 3,
        "text": "Glatiramer acetate"
      },
      {
        "id": 4,
        "text": "Fingolimod"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Riluzole</strong> is used <strong>amyotrophic lateral scelrosis </strong>(ALS) as it modestly lengthens survival. It is hypothesized to reduce excitotoxicity by restricting glutamate release.</p>\n<p>Agents used in disease-modifying therapy of <strong>multiple sclerosis</strong>:</p>\n<ul>\n<li>Interferon &beta;</li>\n<li><strong>Glatiramer acetate</strong></li>\n<li>Natalizumab</li>\n<li>Alemtuzumab</li>\n<li><strong>Fingolimod</strong></li>\n<li><strong>Teriflunomide</strong></li>\n<li>Dimethyl fumarate</li>\n<li>Mitoxantrone</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Patients with all of the following conditions can develop diabetes mellitus except:",
    "choices": [
      {
        "id": 1,
        "text": "Hemochromatosis"
      },
      {
        "id": 2,
        "text": "Prader-Willi syndrome"
      },
      {
        "id": 3,
        "text": "Fragile X syndrome"
      },
      {
        "id": 4,
        "text": "Friedrich\u2019s ataxia"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Fragile X syndrome is not associated with <strong>diabetes mellitus</strong>.</p>\n<p>Genetic syndromes associated with diabetes include:</p>\n<ul>\n<li><strong>Prader-Willi syndrome</strong></li>\n<li><strong>Friedreich&rsquo;s ataxia</strong></li>\n<li>Wolfram&rsquo;s syndrome</li>\n<li>Down&rsquo;s syndrome</li>\n<li>Klinefelter&rsquo;s and Turner&rsquo;s syndrome</li>\n<li>Huntington&rsquo;s chorea</li>\n<li>Laurence-Moon-Biedl syndrome</li>\n<li>Myotonic dystrophy</li>\n<li>Porphyria</li>\n</ul>\n<p>Diseases of the exocrine pancreas causing diabetes:</p>\n<ul>\n<li><strong>Hemochromatosis</strong></li>\n<li>Pancreatitis</li>\n<li>Neoplasia</li>\n<li>Cystic fibrosis</li>\n</ul>\n<p>Endocrinopathies causing diabetes:</p>\n<ul>\n<li>Acromegaly</li>\n<li>Cushing&rsquo;s syndrome</li>\n<li>Glucagonoma</li>\n<li>Pheochromocytoma</li>\n<li>Hyperthyroidism</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The diagnostic test for achalasia considered to be the most sensitive is _______",
    "choices": [
      {
        "id": 1,
        "text": "Barium swallow X-ray"
      },
      {
        "id": 2,
        "text": "Endoscopy"
      },
      {
        "id": 3,
        "text": "Manometry"
      },
      {
        "id": 4,
        "text": "Endoscopic ultrasound"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Diagnosis of Achalasia</strong></p>\n<ul>\n<li><strong>Manometry</strong> is considered the most sensitive as it identifies early disease before esophageal dilatation and food retention</li>\n<li>Diagnosis of achalasia can be done by <strong>barium swallow x-ray</strong> and/or <strong>esophageal manometry</strong></li>\n<li>Endoscopy has little use except for ruling out pseudoachalasia</li>\n<li>The diagnostic criteria for achalasia with manometry are <strong>impaired lower esophageal sphincter (LES) relaxation</strong> and <strong>absent peristalsis</strong></li>\n</ul>\n<p><strong>Pseudoachalasia</strong> is an achalasia-like dilatation in the esophagus secondary to causes other than primary denervation like malignancies, etc. Manometry is of negligible value in differentiating achalasia and pseudoachalasia but radiographic and endoscopic evaluation can be done.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 33-year-old man collapses during a family vacation. At the hospital, blood pressure is found to be 86/52 mm Hg, and random blood sugar is 49 mg/dl. His wife says that he has been on treatment for Addison's disease for two years but had forgotten to pack his medication for the trip. What is the drug of choice for this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Norepinephrine"
      },
      {
        "id": 2,
        "text": "Hydrocortisone"
      },
      {
        "id": 3,
        "text": "Dexamethasone"
      },
      {
        "id": 4,
        "text": "Fludrocortisone"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This clinical scenario is suggestive of an<strong> adrenal crisis</strong> triggered by missed medication. In this patient who is a <strong>known</strong> <strong>case</strong> of adrenal insufficiency, <strong>IV hydrocortisone</strong> is the drug of choice.</p>\n<p>However, in patients with <strong>newly diagnosed</strong> adrenal insufficiency,\u00a0<strong>dexamethasone</strong> is used for the treatment of adrenal crisis. This is because dexamethasone is not measured in cortisol assays and would <strong>not interfere</strong> with the\u00a0<strong>diagnostic</strong> <strong>tests</strong>, whereas hydrocortisone interferes with cortisol assays.</p>\n<p>Acute adrenal insufficiency requires the immediate initiation of the following therapeutic strategies:</p>\n<ul>\n<li>Rehydration -\u00a0<strong>saline</strong> infusion at an initial rate\u00a0of 1 L/h with continuous cardiac monitoring.</li>\n<li><strong>Glucocorticoid</strong> replacement<strong> -\u00a0</strong>bolus injection of 100 mg hydrocortisone<strong>, </strong>followed by the maintenance dose of 100\u2013200 mg over 24h.</li>\n<li><strong>Mineralocorticoid</strong> replacement -\u00a0initiated once the daily hydrocortisone dose has been reduced to &lt;50 mg as higher doses\u00a0of hydrocortisone have sufficient mineralocorticoid action.\u00a0</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following drugs is used in the quadruple therapy against Helicobacter pylori?",
    "choices": [
      {
        "id": 1,
        "text": "Amoxicillin"
      },
      {
        "id": 2,
        "text": "Clarithromycin"
      },
      {
        "id": 3,
        "text": "Erythromycin"
      },
      {
        "id": 4,
        "text": "Tetracycline"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Therapy for Eradication of Helicobacter pylori Infection</p>\n<p>i)&nbsp;Triple Therapy<strong>: </strong></p>\n<p style=\"padding-left: 30px;\"><strong>Proton-pump inhibitor [PPI], clarithromycin, and amoxicillin (or metronidazole)</strong></p>\n<p>ii)&nbsp;Quadruple Therapy</p>\n<p style=\"padding-left: 30px;\"><strong>PPI, bismuth, metronidazole, and tetracycline</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is false regarding lung cancer?",
    "choices": [
      {
        "id": 1,
        "text": "It is the most common cancer in Indian men"
      },
      {
        "id": 2,
        "text": "Tobacco smoking is the most common cause"
      },
      {
        "id": 3,
        "text": "Adenocarcinoma is the most common histologic  type"
      },
      {
        "id": 4,
        "text": "It is the most common cause of cancer death"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The most common cancer seen in <strong>Indian men</strong> is&nbsp;<strong>lip</strong> and <strong>oral cavity cancer</strong>, not lung cancer.</p>\n<p>Most common cancer:</p>\n<ul>\n<li>In men globally- <strong>Lung cancer</strong></li>\n<li>In Indian men- Lip and oral cavity cancer</li>\n<li>In women globally- Breast cancer</li>\n<li>In Indian women- Breast cancer</li>\n</ul>\n<p><strong>Tobacco smoking</strong> is a primary cause of the development of lung cancer. It increases <strong>10 fold</strong> greater risk of developing lung cancer compared to those who have never smoked.</p>\n<p>It is the most common cause of cancer death.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not a rationale for follow-up in celiac disease?",
    "choices": [
      {
        "id": 1,
        "text": "Limited treatment adherence"
      },
      {
        "id": 2,
        "text": "Adverse effects on the quality of life"
      },
      {
        "id": 3,
        "text": "Increased risk of lymphoma"
      },
      {
        "id": 4,
        "text": "Increased risk of immune system compromise and infections"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>It is a common misconception that patients with celiac disease require limited follow-up as it can be treated with diet. Celiac disease is a significant condition with <strong>limited treatment adherence</strong> and it has <strong>adverse effects on the quality of life, nutrition and metabolic indices</strong>. Celiac disease carries an <strong>increased risk of malignancy</strong> like lymphoma. Other complications of celiac disease that justify regular follow-ups are <strong>intestinal ulceration, refractory sprue and collagenous sprue.</strong></p>\n<p>There is no evidence that celiac disease causes an increased risk of infections or immune system compromise, although increased frequency of infections in early life (infancy) is associated with the development of celiac disease.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You can advise any of the following tests for screening of a patient suspected to be having Cushing's syndrome except:",
    "choices": [
      {
        "id": 1,
        "text": "Midnight plasma cortisol measurement"
      },
      {
        "id": 2,
        "text": "Determination of plasma ACTH levels"
      },
      {
        "id": 3,
        "text": "24 hour urinary free cortisol measurement"
      },
      {
        "id": 4,
        "text": "Overnight dexamethasone suppression test"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Determination of<strong> plasma ACTH </strong>levels is <strong>not</strong> advised as a <strong>screening</strong> test for a patient with Cushing's syndrome.</p>\n<p>Plasma ACTH determination&nbsp;is done to distinguish between ACTH-dependent and independent causes. It is done after the screening or confirmation of Cushing's syndrome.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 40-year-old man visits the OPD requesting medications to quit smoking; he has a history of seizures. Which of the following is the drug of choice in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Bupropion"
      },
      {
        "id": 2,
        "text": "Varenicline"
      },
      {
        "id": 3,
        "text": "Clonidine"
      },
      {
        "id": 4,
        "text": "Nortriptyline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Varenicline is the drug of choice for smoking cessation in the above scenario.\u00a0First-line pharmacologic therapies for smoking cessation include nicotine replacement therapy (NRT), varenicline, and bupropion.\u00a0\u00a0</p>\n<p>Other options:\u00a0</p>\n<ul>\n<li>Bupropion decreases seizure threshold and should be avoided in patients with a history of seizures.</li>\n<li>Clonidine is considered to be a second-line drug for smoking cessation because of its prominent side-effects like postural hypotension, drowsiness, and dry mouth. USFDA considers the use of clonidine for tobacco cessation to be an \u201coff-label\u201d indication. It has limited efficacy in smoking cessation.</li>\n<li>Nortriptyline is a second-line therapy that has shown moderate efficacy in aiding smoking cessation for individuals who cannot use a first-line agent or who need an adjunct to first-line therapy.</li>\n</ul>\n<p>\u00a0</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Consider the following images (A and B) and pick the correct statement.",
    "choices": [
      {
        "id": 1,
        "text": "In B, the earliest microscopic features would be aphthoid ulcerations and focal crypt abscesses"
      },
      {
        "id": 2,
        "text": "In A, rectal involvement is always seen"
      },
      {
        "id": 3,
        "text": "In B, changes due to backwash ileitis are usually mild and superficial"
      },
      {
        "id": 4,
        "text": "In A, granulomas are rarely seen and are of little significance"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>In the given images:</p>\n<p>A -<strong> Crohn&rsquo;s Disease (CD)</strong></p>\n<p>B &ndash; <strong>Ulcerative Colitis (UC)</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/028e412993b14fd2a18b2341dd9063af.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "A middle-aged male patient is being evaluated for recurrent episodes of palpitations, headaches, and profuse sweating. He was found to have elevated blood pressure readings on multiple occasions over the past 2 months. Which of the following tests has the highest sensitivity and specificity for the diagnosis of this condition?",
    "choices": [
      {
        "id": 1,
        "text": "MRI"
      },
      {
        "id": 2,
        "text": "24-hour urinary fractionated metanephrines"
      },
      {
        "id": 3,
        "text": "MIBG scintigraphy"
      },
      {
        "id": 4,
        "text": "Fractionated plasma metanephrines"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical scenario is suggestive of <strong>pheochromocytoma.</strong> The measurement of<strong> 24-hour urinary fractionated metanephrines</strong>&nbsp;has both the <strong>highest specificity</strong> and <strong>sensitivity</strong> in the diagnosis of this condition.</p>\n<table style=\"height: 264px; width: 448px;\">\n<tbody>\n<tr style=\"height: 66.3333px;\">\n<td style=\"width: 84.7222px; height: 66.3333px;\">&nbsp;</td>\n<td style=\"width: 138.594px; text-align: center; height: 66.3333px;\"><strong>24-hour urinary fractionated metanephrines</strong></td>\n<td style=\"width: 205.399px; text-align: center; height: 66.3333px;\"><strong>Plasma fractionated metanephrines</strong></td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 84.7222px; height: 17px;\">Sensitivity</td>\n<td style=\"width: 138.594px; text-align: center; height: 17px;\">98%</td>\n<td style=\"width: 205.399px; text-align: center; height: 17px;\">96-100%</td>\n</tr>\n<tr style=\"height: 17px;\">\n<td style=\"width: 84.7222px; height: 17px;\">Specificity</td>\n<td style=\"width: 138.594px; text-align: center; height: 17px;\">98%</td>\n<td style=\"width: 205.399px; text-align: center; height: 17px;\">85-89%</td>\n</tr>\n<tr style=\"height: 53px;\">\n<td style=\"width: 84.7222px; height: 53px;\">False positives</td>\n<td style=\"width: 138.594px; text-align: center; height: 53px;\">Very rare</td>\n<td style=\"width: 205.399px; height: 53px;\">Can occur due to drugs like levodopa, TCAs, &alpha;-blockers, &beta;-blockers, diuretics</td>\n</tr>\n<tr style=\"height: 71px;\">\n<td style=\"width: 84.7222px; height: 71px;\">Procedure</td>\n<td style=\"width: 138.594px; text-align: center; height: 71px;\">Collection of samples over 24 hours may be cumbersome</td>\n<td style=\"width: 205.399px; text-align: center; height: 71px;\">Requires only a single blood sample. May be preferred in children.</td>\n</tr>\n<tr style=\"height: 166px;\">\n<td style=\"width: 84.7222px; height: 166px;\">Uses</td>\n<td style=\"width: 138.594px; text-align: left; height: 166px;\">Preferred first-line test as it is highly specific</td>\n<td style=\"width: 205.399px; text-align: left; height: 166px;\">\n<p>Reserved for patients with a high index of suspicion like:</p>\n<ul>\n<li>Family history</li>\n<li>Genetic syndromes like MEN2</li>\n<li>Prior history of pheochromocytoma</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>Imaging modalities like CT and MRI have a sensitivity of around 98-100% and specificity of&nbsp;70%.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following has been linked to the development of irritable bowel syndrome?",
    "choices": [
      {
        "id": 1,
        "text": "Prior sexual abuse"
      },
      {
        "id": 2,
        "text": "Central sensitization"
      },
      {
        "id": 3,
        "text": "Structural deformities to the vertebra"
      },
      {
        "id": 4,
        "text": "All the above"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Pathophysiology of Irritable Bowel Syndrome (IBS)</strong></p>\n<p>Although poorly understood, the following have been linked to the development of IBS:</p>\n<ul>\n<li>Gastrointestinal motor abnormalities</li>\n<li>Visceral hypersensitivity, peripheral and <strong>central sensitization</strong>, endogenous pain modulation</li>\n<li>The <strong>stress-response system</strong> including the hypothalamic-pituitary-adrenal (HPA) axis, corticotrophin-releasing factor (CRF), and the autonomic nervous system</li>\n<li>Early adverse life events (EALs) like physical abuse, sexual abuse and other psychological stress factors including other conditions like <strong>vertebral deformities</strong></li>\n<li>Immune activation and mucosal inflammation</li>\n<li>Post-infectious IBS</li>\n<li>Altered gut flora</li>\n<li>Abnormal serotonin pathway</li>\n<li>Genetics</li>\n<li>Bile acid processing</li>\n</ul>\n<p>IBS is a <strong>functional gastrointestinal disorder</strong> (FGID)that is characterized by <strong>abdominal pain</strong> with alterations in stool form and/or frequency.</p>\n<p><strong>Rome criteria</strong> is used for diagnosis of IBS.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a prehepatic cause of portal hypertension?",
    "choices": [
      {
        "id": 1,
        "text": "Inferior vena caval webs"
      },
      {
        "id": 2,
        "text": "Schistosomiasis"
      },
      {
        "id": 3,
        "text": "Budd-Chiari syndrome"
      },
      {
        "id": 4,
        "text": "Massive splenomegaly"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Causes of Portal Hypertension:</strong></p>\n<p>1)&nbsp;<strong>Prehaptic</strong>: They affect the portal venous system before it enters the liver.</p>\n<ul>\n<li>Portal vein thrombosis</li>\n<li>Splenic vein thrombosis</li>\n<li><strong>Massive splenomegaly</strong> (Banti&rsquo;s syndrome)</li>\n</ul>\n<p>2)&nbsp;<strong>Hepatic</strong>:</p>\n<ul>\n<li>Presinusoidal: <strong>Schistosomiasis</strong>, congential hepatic fibrosis</li>\n<li>Sinusoidal: Cirrhosis, alcoholic hepatitis</li>\n<li>Postsinusoidal: Venoocclusive disease</li>\n</ul>\n<p>3)&nbsp;<strong>Posthepatic</strong>: They affect the hepatic veins and venous drainage to the heart.</p>\n<ul>\n<li><strong>Budd-Chiari syndrome</strong></li>\n<li><strong>Inferior vena caval webs</strong></li>\n<li>Cardiac causes &ndash; Restrictive cardiomyopathy, constrictive pericarditis, severe congestive heart failure</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presented with abdominal pain and swelling in his scrotum and was diagnosed to have testicular carcinoma. There is a history of MEN syndrome running in his family. Which of the following conditions is he likely to have?",
    "choices": [
      {
        "id": 1,
        "text": "MEN4"
      },
      {
        "id": 2,
        "text": "MEN2A"
      },
      {
        "id": 3,
        "text": "MEN1"
      },
      {
        "id": 4,
        "text": "MEN2B"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This patient is likely to have <strong>MEN4</strong> syndrome as&nbsp;<strong>reproductive organ tumors </strong>are a characteristic feature of this condition.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Identify the pathology in the gall bladder shown in the image",
    "choices": [
      {
        "id": 1,
        "text": "Strawberry gall bladder"
      },
      {
        "id": 2,
        "text": "Pigment stones"
      },
      {
        "id": 3,
        "text": "Multiple cholesterol stones with biliary sludge"
      },
      {
        "id": 4,
        "text": "Emphysematous cholecystitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The above image shows a gall bladder with changes as seen in <strong>cholesterolosis</strong>. There is abnormal deposition of lipid within the macrophages of the lamina propria of the gall bladder wall.</p>\n<p>The diffuse yellow specks give the gall bladder a <strong>strawberry </strong>appearance and thus it is called <strong>strawberry gall bladder. </strong>Cholesterol polyps (as seen in the image) are common in this condition and sometimes cholesterol stones are also seen.</p>\n<p>Cholesterolosis and adenomyomatosis are grouped under <strong>hyperplastic cholecystoses</strong>, which are characterized by proliferation of normal tissue components.</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/7c1a235f37ff4641a9cd296b2c0cdbb8.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following tumors is not associated with syndrome of inappropriate ADH secretion (SIADH)?",
    "choices": [
      {
        "id": 1,
        "text": "Ewing\u2019s sarcoma"
      },
      {
        "id": 2,
        "text": "Thymoma"
      },
      {
        "id": 3,
        "text": "Chromophobe adenoma"
      },
      {
        "id": 4,
        "text": "Carcinoid"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Chromophobe adenoma is a type of pituitary adenoma that causes symptoms of hypogonadism due to pressure effects on the pituitary stalk. It is not a cause of syndrome of inappropriate ADH secretion (SIADH).</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The most common etiology of recurrent pancreatitis after an episode of acute pancreatitis is:",
    "choices": [
      {
        "id": 1,
        "text": "Pancreas divisum"
      },
      {
        "id": 2,
        "text": "Cholelithiasis"
      },
      {
        "id": 3,
        "text": "Hypertriglyceridemia"
      },
      {
        "id": 4,
        "text": "Infections"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The two most common etiologies for recurrent pancreatitis are <strong>alcohol and cholelithiasis.</strong></p>\n<p>Other causes of recurrent pancreatitis include microlithiasis, hypertriglyceridemia, drugs, pancreatic cancer, pancreas divisum and cystic fibrosis.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Most common symptom seen in patients with hypothyroidism is?",
    "choices": [
      {
        "id": 1,
        "text": "Cold intolerance"
      },
      {
        "id": 2,
        "text": "Weight gain"
      },
      {
        "id": 3,
        "text": "Tiredness and weakness"
      },
      {
        "id": 4,
        "text": "Dry skin"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common symptom of hypothyroidism is<strong> tiredness and weakness.</strong></p>\n<p>Symptoms and signs in decreasing order of frequency are given below:</p>\n<table style=\"height: 335px; width: 507.406px;\">\n<tbody>\n<tr>\n<td style=\"width: 241px;\">\n<p><strong>Symptoms</strong></p>\n</td>\n<td style=\"width: 248.406px;\">\n<p><strong>Signs</strong></p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 241px;\">\n<ul>\n<li>Tiredness, weakness</li>\n<li>Dry skin</li>\n<li>Cold intolerance</li>\n<li>Hair loss</li>\n<li>Difficulty concentrating and poor memory</li>\n<li>Constipation</li>\n<li>Weight gain with poor appetite</li>\n<li>Dyspnea</li>\n<li>Hoarse voice</li>\n<li>Menorrhagia (later oligomenorrhea or amenorrhea)</li>\n<li>Paresthesia</li>\n<li>Impaired hearing</li>\n</ul>\n</td>\n<td style=\"width: 248.406px;\">\n<ul>\n<li>Dry coarse skin, cool peripheral extremities</li>\n<li>Puffy face, hands, and feet (myxedema)</li>\n<li>Diffuse alopecia</li>\n<li>Bradycardia</li>\n<li>Peripheral edema</li>\n<li>Delayed tendon reflex relaxation</li>\n<li>Carpal tunnel syndrome</li>\n<li>Serous cavity effusions</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following disorders of bilirubin metabolism leads to predominantly conjugated hyperbilirubinemia?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 2"
      },
      {
        "id": 2,
        "text": "1, 3, 4"
      },
      {
        "id": 3,
        "text": "1, 2, 3, 4"
      },
      {
        "id": 4,
        "text": "1 and 4"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Dubin-Johnson syndrome, Rotor syndrome</strong>, and <strong>Byler disease</strong> are the disorders of bilirubin metabolism which lead to predominant conjugated hyperbilirubinemia.</p>\n<p><strong>Unconjugated hyperbilirubinemia:</strong> It occurs<strong>&nbsp;</strong>either due to a <strong>hemolytic process</strong> producing excess bilirubin or due to a <strong>impaired uptake/ conjugation</strong> of bilirubin causing inadequate conjugation.</p>\n<p>Causes of unconjugated hyperbilirubinemia include:&nbsp;</p>\n<ul>\n<li>Increased bilirubin production due to hemolysis\n<ul>\n<li>Inherited -&nbsp;sickle cell anemia, thalassemia, G6PD deficiency</li>\n<li>Acquired -&nbsp;paroxysmal nocturnal hemoglobinuria</li>\n</ul>\n</li>\n<li>Increased bilirubin due to ineffective erythropoiesis\n<ul>\n<li>Iron, cobalamine, and folate deficiency</li>\n</ul>\n</li>\n<li>Drugs - Rifampicin, probenecid.</li>\n<li>Hereditary defects in conjugation -<strong>&nbsp;</strong>\n<ul>\n<li><strong>Criggler-Najjar syndrome </strong>(<strong>type I </strong>and<strong> II</strong>)</li>\n<li><strong>Gilbert syndrome</strong></li>\n</ul>\n</li>\n</ul>\n<p><strong>Mixed </strong>or <strong>predominantly conjugated hyperbilirubinemia:&nbsp;</strong>It occurs either due to <strong>impaired excretion</strong> of conjugated bilirubin into the bile ductules or due to backward leakage of the bile.&nbsp;</p>\n<p>Familial defects in hepatic excretory function include:</p>\n<ul>\n<li><strong>Dubin-Johnson syndrome</strong></li>\n<li><strong>Rotor syndrome</strong></li>\n<li>Benign recurrent intrahepatic cholestasis (BRIC)</li>\n<li>Progressive familial intrahepatic cholestasis (FIC)\n<ul>\n<li>Type 1 - is called <strong>Byler disease</strong></li>\n</ul>\n</li>\n</ul>\n<p>Note: <strong>Byler disease</strong> is a cholestatic disease that presents episodically from infancy. It is due to <strong>FIC1 mutation</strong> and it can lead to malnutrition, growth retardation, and end stage liver disease during childhood.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is not used to treat a patient with hypercalcemia due to primary hyperparathyroidism?",
    "choices": [
      {
        "id": 1,
        "text": "Forced diuresis with loop diuretics"
      },
      {
        "id": 2,
        "text": "Glucocorticoids"
      },
      {
        "id": 3,
        "text": "Pamidronate"
      },
      {
        "id": 4,
        "text": "Hydration with saline"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Glucocorticoids</strong><strong>&nbsp;</strong>have<strong> no effect&nbsp;</strong>on the serum<strong> calcium </strong>concentration in <strong>primary hyperparathyroidism</strong> and normal individuals.&nbsp;</p>\n<p>They are effective in the treatment of hypercalcemia when associated with the following conditions:</p>\n<ul>\n<li>Malignancy</li>\n<li>Vitamin D intoxication</li>\n<li>Sarcoidosis</li>\n</ul>\n<p>Initial medical management of hypercalcemia involves the following:</p>\n<ul>\n<li><strong>Normal</strong> <strong>saline</strong> (200-500 ml/hour): It<strong>&nbsp;</strong>is the mainstay treatment to correct dehydration, and titrated to maintain a urine output of &gt;100 ml/hour</li>\n<li><strong>Pamidronate</strong>&nbsp;or <strong>zoledronate</strong>: These are <strong>bisphosphonates</strong> and are considered as the <strong>drug of choice</strong> in primary hyperparathyroidism</li>\n<li><strong>Cinacalcet</strong>:&nbsp;This is a calcimimetic that increases the affinity of the glands to extracellular calcium, thereby decreasing parathyroid hormone secretion</li>\n<li><strong>Denosumab</strong>:<strong>&nbsp;</strong>This inhibits RANK-ligand, which acts on osteoclasts</li>\n<li><strong>Calcitonin</strong>:&nbsp;This is an activated vitamin D analog that may be used to reduce calcium levels. It should&nbsp;be used within the first 24 hours</li>\n</ul>\n<p><strong>Forced diuresis</strong> refers to aggressive fluid hydration with loop diuretic administration. Although this is an <strong>effective</strong> method to <strong>reduce calcium</strong> levels, it requires careful monitoring for adverse effects like <strong>fluid overload</strong>, <strong>hypokalemia</strong>, and hypomagnesia. Due to this reason as well as the availability of more effective treatment modalities, forced diuresis is <strong>not preferred</strong> any longer.</p>\n<p>The <strong>definitive</strong> management of primary hyperparathyroidism is the&nbsp;<strong>surgical removal</strong> of the parathyroid gland.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Considering the image given, the most common site of airway collapse in obstructive sleep apnea/hypopnea syndrome (OSAHS) is ________",
    "choices": [
      {
        "id": 1,
        "text": "A"
      },
      {
        "id": 2,
        "text": "B"
      },
      {
        "id": 3,
        "text": "C"
      },
      {
        "id": 4,
        "text": "D"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>soft palate </strong>(B in the image) is the most common site for airway collapse in OSAHS. Other sites include <strong>the base of tongue</strong> (A), <strong>lateral pharyngeal wall </strong>(C) and/or <strong>epiglottis </strong>(D).</p>\n<p>Note:</p>\n<p>OSAHS may be particularly <strong>severe in the supine</strong> position, due to gravitational forces, and during REM sleep as the neuromuscular output to muscles is particularly low.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/a083f460329e46e8b11f52c1d54b3878.JPEG"
    ],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is not true about thyroid storm?",
    "choices": [
      {
        "id": 1,
        "text": "Symptoms are vomiting, diarrhoea, jaundice and altered mentation"
      },
      {
        "id": 2,
        "text": "The mortality rate is 10% with treatment"
      },
      {
        "id": 3,
        "text": "Can happen after non-thyroid surgeries"
      },
      {
        "id": 4,
        "text": "High doses of propranolol decrease  T4 \u2192 T3  conversion"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The <strong>mortality</strong> rate of thyrotoxicosis crisis is almost <strong>30% </strong>even with treatment.&nbsp;</p>\n<p>The usual causes for mortality are:</p>\n<ul>\n<li>Cardiac failure</li>\n<li>Arrhythmia&nbsp;</li>\n<li>Hyperthermia</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The X-ray below is of a patient who recently underwent a bronchoscopy and has complaints of chest pain. Which of the following would you expect in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Hoover\u2019s sign"
      },
      {
        "id": 2,
        "text": "Westermark sign"
      },
      {
        "id": 3,
        "text": "Golden S sign"
      },
      {
        "id": 4,
        "text": "Hamman\u2019s sign"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>The X-ray shows air in the mediastinum, adjacent to the descending aorta and left common carotid artery. Along with the history of the patient, we can arrive at the diagnosis of <strong>pneumomediastinum</strong>.</p>\n<p><strong>Pneumomediastinum</strong>:</p>\n<p>The main causes of gas/air in the interstices of the mediastinum are</p>\n<ol>\n<li>Alveolar rupture, perforation or</li>\n<li>Rupture of esophagus/trachea/bronchi,</li>\n<li>Dissection of air from the neck or abdomen into the mediastinum.</li>\n</ol>\n<p>Clinical Features include severe substernal chest pain(may or may not radiate to neck and arms) &amp; subcutaneous Emphysema over the suprasternal notch.</p>\n<p>The examination may reveal <strong>subcutaneous emphysema</strong> in the suprasternal notch with <strong>Hamman&rsquo;s sign</strong>. Chest X-ray confirms the diagnosis. No treatment is usually required but inhaling high concentrations of oxygen will help absorb the mediastinal air. Needle aspiration can be performed if mediastinal structures are compressed.&nbsp;&nbsp;</p>\n<p><strong>Hamman&rsquo;s sign:</strong></p>\n<p>It can be elicited in <strong>pneumomediastinum </strong>and <strong>pneumopericardium</strong>. It is a crunching or clicking sound which is synchronous with the heartbeat, best heard in the left lateral decubitus position.</p>\n<p><strong>Hoover&rsquo;s sign</strong> is the paradoxical inward movement of the rib cage with inspiration in <strong>chronic obstructive pulmonary disease.</strong></p>\n<p><strong>Westermark sign</strong> is seen in chest radiographs of patients with <strong>pulmonary embolism</strong>, indicating <strong>focal oligemia.</strong></p>",
    "explanation_video": "",
    "question_images": [
      "https://cdn1.dailyrounds.org/uploads/952706e2a81240baa1e8d608e944603e.JPEG"
    ],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/23d362f17ece455c919f0c1c1d82c6dfx442x509.JPEG"
    ]
  },
  {
    "text": "A 15-year-old female presented with complaints of primary amenorrhea to the gynaecology OPD. O/E, she had normal breast development, scanty pubic and axillary hair. Hormonal assays were sent. What is the karyotype of the patient with the above condition?",
    "choices": [
      {
        "id": 1,
        "text": "45 XO"
      },
      {
        "id": 2,
        "text": "46 XX"
      },
      {
        "id": 3,
        "text": "46 XY"
      },
      {
        "id": 4,
        "text": "47 XXY"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The given clinical scenario is suggestive of\u00a0<strong>androgen insensitivity syndrome</strong> (AIS) and the karyotype in this is <strong>46 XY</strong>.</p>\n<p>AIS\u00a0(formerly called testicular feminization syndrome) occurs due to mutations in the androgen receptor causing resistance to the effects of androgen.\u00a0</p>\n<p>Individuals with AIS can have <strong>partial</strong> or\u00a0<strong>complete AIS. </strong>Those with complete AIS\u00a0have the following features:</p>\n<ul>\n<li>Female phenotype</li>\n<li>Normal breast development</li>\n<li><strong>Blind-ended vagina </strong></li>\n<li><strong>Absent uterus and ovaries</strong></li>\n<li>Scanty pubic and axillary hair</li>\n</ul>\n<p>The serum level of hormones like <strong>gonadotropins </strong>and<strong> testosterone</strong> is <strong>variable</strong>. They depend on both the degree of resistance as well as the contribution of estradiol to feedback inhibition.\u00a0</p>\n<p>Most patients present with</p>\n<ul>\n<li><strong>Inguinal hernias</strong> (containing <strong>testes</strong>) in childhood</li>\n<li><strong>Primary amenorrhea</strong> in late adolescence</li>\n</ul>\n<p><strong>Gonadectomy</strong> is a recommended course of treatment due to the possible risks of malignancy. The procedure can be scheduled after the individual develops breasts.\u00a0</p>\n<p>Other options:\u00a0</p>\n<p>Option A - <strong>45 XO</strong> is the karyotype is seen in patients with <strong>Turner's syndrome.</strong></p>\n<p>Option B - <strong>46 XX</strong> is the karyotype for a <strong>phenotypically normal female.\u00a0</strong></p>\n<p>Option D - <strong>47 XXY</strong> is the karyotype seen in <strong>Klinefelter's syndrome.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following is a cause of transudative pleural effusion?",
    "choices": [
      {
        "id": 1,
        "text": "Chylothorax"
      },
      {
        "id": 2,
        "text": "Tuberculosis"
      },
      {
        "id": 3,
        "text": "Mesothelioma"
      },
      {
        "id": 4,
        "text": "Superior vena cava obstruction"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Superior vena cava</strong> <strong>obstruction</strong> causes <strong>transudative pleural effusion.</strong></p>\n<table style=\"width: 379px;\">\n<tbody>\n<tr>\n<td style=\"width: 170px;\"><strong>Transudative Pleural Effusion</strong></td>\n<td style=\"width: 203px;\"><strong>Exudative Pleural Effusion</strong></td>\n</tr>\n<tr>\n<td style=\"width: 170px;\">Alteration in <strong>systemic factors</strong> that influence the formation and absorption of pleural fluid.</td>\n<td style=\"width: 203px;\">Alteration in <strong>local</strong> <strong>factors</strong> that influence the formation and absorption of pleural fluid.</td>\n</tr>\n<tr>\n<td style=\"width: 170px;\">Causes include congestive cardiac failure, cirrhosis, nephrotic syndrome, peritoneal dialysis, SVC obstruction, myxedema.</td>\n<td style=\"width: 203px;\">Causes include neoplastic conditions like <strong>mesothelioma</strong>; infectious diseases like <strong>tuberculosis</strong>; pulmonary embolization; GI conditions like esophageal perforation, pancreatic diseases; collagen vascular diseases like SLE; asbestosis, sarcoidosis; drug-induced; hemothorax and <strong>chylothorax</strong>, etc.</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A man presented with frequent urination and increased thirst. Investigations revealed low urine osmolality and high plasma osmolality. MRI brain was done, which revealed the absence of posterior pituitary bright spot. Which of the following conditions is least likely to lead to this presentation?",
    "choices": [
      {
        "id": 1,
        "text": "Multiple sclerosis"
      },
      {
        "id": 2,
        "text": "Head injury"
      },
      {
        "id": 3,
        "text": "Histiocytosis"
      },
      {
        "id": 4,
        "text": "Viral encephalitis"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The given scenario and the <strong>absence</strong> of a posterior <strong>pituitary bright spot</strong> on MRI are suggestive of <strong>central diabetes insipidus</strong>. <strong>Multiple sclerosis</strong>&nbsp;causes <strong>primary polydipsia</strong>, not central DI.</p>\n<p>Central DI is caused by a primary <strong>deficiency</strong> in<strong> AVP</strong> secretion which usually results from agenesis or irreversible destruction of the posterior pituitary. It can be differentiated from primary polydipsia with the help of an MRI brain.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/336381c49f4d4c38961b5c588bc4263dx1200x1923.JPEG",
      "https://dhmbxeygs57ff.cloudfront.net/uploads/d939a1468d2245ddae84596e2b6fc8e0x1280x1429.JPEG"
    ]
  },
  {
    "text": "Which of the following is the leading cause of death in children with diabetic ketoacidosis?",
    "choices": [
      {
        "id": 1,
        "text": "Acute respiratory distress syndrome"
      },
      {
        "id": 2,
        "text": "Cardiac arrhythmia"
      },
      {
        "id": 3,
        "text": "Cerebral edema"
      },
      {
        "id": 4,
        "text": "Acute kidney injury"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Cerebral edema</strong> is the leading cause of <strong>mortality</strong> in children with&nbsp;<strong>diabetic ketoacidosis</strong>.</p>\n<p>The <strong>osmolar gradient</strong> generated due to the high blood glucose level results in <strong>water shift</strong> from the intracellular fluid (ICF) to the extracellular fluid (ECF) space and leads to the <strong>contraction</strong> of <strong>cell volume</strong>. Correction with insulin and intravenous fluids can result in a rapid reduction in effective osmolarity, reversal of the fluid shift, and result in cerebral edema.</p>\n<p>Complications of diabetic ketoacidosis include:</p>\n<ul>\n<li>Cerebral edema &ndash; especially in children</li>\n<li><strong>Cardiac arrhythmia</strong> - due to electrolyte imbalance</li>\n<li>Acute respiratory distress syndrome (<strong>ARDS</strong>)</li>\n<li>Venous thrombosis</li>\n<li>Acute gastric dilation</li>\n<li><strong>Acute kidney injury&nbsp;</strong></li>\n<li>Intestinal necrosis</li>\n<li>Acute pancreatitis</li>\n<li>Mucormycosis</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 66-year-old chronic smoker presents with progressive shortness of breath and chronic cough. On examination, he has a barrel chest and has pursed-lip breathing. Hyperresonance and inspiratory wheezes are heard. Pulmonary functions are likely to reveal all of the following, except:",
    "choices": [
      {
        "id": 1,
        "text": "Decreased vital capacity"
      },
      {
        "id": 2,
        "text": "Increased diffusion capacity for carbon monoxide"
      },
      {
        "id": 3,
        "text": "Increased total lung capacity"
      },
      {
        "id": 4,
        "text": "Decreased FEV1/FVC ratio"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The given clinical diagnosis is suggestive of <strong>COPD</strong> and the underlying pathological change is likely to be<strong> emphysema. </strong>It&nbsp;is associated with <strong>a decreased</strong> diffusion capacity for carbon monoxide (<strong>DLCO</strong>).</p>\n<p>Emphysema&nbsp;is defined pathologically as the <strong>abnormal</strong> and <strong>permanent dilation</strong> of <strong>airways</strong> distal to the terminal bronchiole, along with the <strong>destruction</strong> of their <strong>walls</strong>.&nbsp;This leads to hyperinflation due to air trapping and impaired diffusion of gases.</p>\n<p><strong>Pulmonary function tests in COPD:</strong></p>\n<ul>\n<li>TLC: Normal or increased</li>\n<li>FEV1: Decreased (&lt;80% predicted)</li>\n<li>FVC: Decreased</li>\n<li>FEV1/FVC: Decreased</li>\n<li>DLCO: Decreased</li>\n</ul>\n<p><strong>Diseases associated with lowered DLCO:</strong></p>\n<ul>\n<li>Emphysema</li>\n<li>Interstitial Lung disease</li>\n<li>Primary pulmonary hypertension</li>\n</ul>\n<p>Note - <strong>Bronchial asthma</strong> is associated with an <strong>increased DLCO.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The hormone leptin is derived from which of the following?",
    "choices": [
      {
        "id": 1,
        "text": "Arcuate nucleus"
      },
      {
        "id": 2,
        "text": "Adipocytes"
      },
      {
        "id": 3,
        "text": "Chief cells"
      },
      {
        "id": 4,
        "text": "Paneth cells"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Leptin</strong> is an <strong>adipocyte</strong>-derived hormone.</p>\n<p>It acts through brain circuits (predominantly in the hypothalamus) to influence appetite, energy expenditure, and neuroendocrine function.&nbsp;High leptin levels <strong>reduce appetite&nbsp;</strong>and <strong>increase energy expenditure.</strong></p>\n<p>The arcuate nucleus in the hypothalamus plays an important role in the regulation of appetite.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 47-year-old diabetic man is worried as the skin over his face, neck, and dorsum of hands has turned greyish over the past two months. He also complains of abdominal and joint pain. On examination, gynecomastia and hepatomegaly are noted. What is the treatment of choice for this condition?",
    "choices": [
      {
        "id": 1,
        "text": "Phlebotomy"
      },
      {
        "id": 2,
        "text": "Deferoxamine"
      },
      {
        "id": 3,
        "text": "Deferasirox"
      },
      {
        "id": 4,
        "text": "Liver transplantation"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>This clinical scenario is suggestive of <strong>hemochromatosis</strong>. The <strong>treatment of choice</strong> is the removal of excess iron by <strong>phlebotomy.</strong></p>\n<p>Phlebotomy is an<strong>&nbsp;</strong>inexpensive,&nbsp;convenient, and safe&nbsp;method of treatment.&nbsp;In this process, <strong>500 mL</strong> of blood is removed 1-2 times weekly which removes&nbsp;200-250 mg of iron.&nbsp;<strong>Weekly</strong> phlebotomy should be continued until the serum <strong>ferritin</strong> level is <strong>&le;100&nbsp;&mu;g/L</strong> and every <strong>3 months</strong>&nbsp;thereafter. It is <strong>contraindicated</strong> in severe <strong>anemia</strong> and <strong>hypoproteinemia</strong>.</p>\n<p><strong>Chelating agents</strong>&nbsp;bind to iron to form complexes that get excreted and are the <strong>drugs of choice</strong>. Drugs such as <strong>deferoxamine</strong> and <strong>deferasirox</strong> are commonly used. However, they&nbsp;are less effective and more expensive than&nbsp;phlebotomy.</p>\n<p dir=\"ltr\" role=\"presentation\"><strong>Liver transplantation</strong>&nbsp;is indicated either in end-stage liver disease or in refractory cases.</p>\n<p><strong>Supportive management</strong> includes avoiding iron-containing substances such as red meat, multi-vitamin tablets, etc. Alcohol should be completely avoided as it can aggravate the disease.&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = 'Medicine Test I';
        const quizFilename = 'medicine-test-i-ec879662.html';
        let hierarchy = ["Marrow", "NEET PG Test Series Subject Wise", "Year 2018 - 19"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        // --- NEW: History Management ---
        function saveProgress() {
            if (isQuizCompleted) return; // Don't save after completion
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            userHistory[quizFilename] = {
                questionStates,
                stats,
                currentQuestionIndex,
                currentMode,
                status: 'incomplete',
                lastSeen: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }

        function loadProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const savedState = userHistory[quizFilename];
            if (savedState) {
                questionStates = savedState.questionStates;
                stats = savedState.stats;
                currentQuestionIndex = savedState.currentQuestionIndex;
                currentMode = savedState.currentMode;
                console.log('Progress loaded.');
                return true;
            }
            return false;
        }

        function clearProgress() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            if(userHistory[quizFilename]) {
                delete userHistory[quizFilename];
                localStorage.setItem('userHistory', JSON.stringify(userHistory));
                console.log('Previous progress cleared.');
            }
        }

        function markQuizAsCompleted() {
            const userHistory = JSON.parse(localStorage.getItem('userHistory')) || {};
            const totalQuestions = questionsData.length;
            const correct = stats.correctAnswers || 0;
            
            userHistory[quizFilename] = {
                score: correct,
                total: totalQuestions,
                status: 'completed',
                completedOn: new Date().toISOString()
            };
            localStorage.setItem('userHistory', JSON.stringify(userHistory));
        }
        // --- End of History Management ---

        const urlParams = new URLSearchParams(window.location.search);
        const startAt = parseInt(urlParams.get('startAt'));
        const resume = urlParams.get('resume') === 'true';

        function goBack() {
            if (!isQuizCompleted) saveProgress(); // Save progress before leaving
            window.location.href = document.referrer || 'index.html';
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            if (!isNaN(startAt) && startAt >= 0 && startAt < questionsData.length) {
                currentQuestionIndex = startAt;
            }

            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                processAnswer();
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
            saveProgress(); // NEW: Save on answer selection
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            showSolution();
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            stats.correctAnswers = correct; // Update global stats
            stats.incorrectAnswers = incorrect;
            markQuizAsCompleted(); // NEW: Mark quiz as complete in history
            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                clearProgress(); // NEW: Clear history on retake
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
                saveProgress(); // NEW: Save on navigation
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                        saveProgress();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (resume) {
                if (loadProgress()) {
                    document.getElementById('modeModal').style.display = 'none';
                    initializeQuiz(); // Resume directly into the saved mode and state
                } else {
                    // If resume fails (e.g., cleared history), start fresh
                    clearProgress();
                    document.getElementById('modeModal').style.display = 'flex';
                }
             } else if (!window.location.pathname.endsWith('custom_quiz.html')) {
                clearProgress(); // Clear old progress if not resuming
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>