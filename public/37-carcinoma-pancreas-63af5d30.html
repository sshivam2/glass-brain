<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>37 Carcinoma Pancreas - Brain And Scalpel</title>
    <link rel="preload" href="assets/background.jpg" as="image">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- HLS.js for M3U8 support -->
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        
/* Liquid Glass Morphism Universal Theme - Enhanced & Mobile-First */
:root {
  --glass-bg: rgba(0, 0, 0, 0.6);
  --glass-bg-light: rgba(255, 255, 255, 0.1);
  --glass-bg-medium: rgba(255, 255, 255, 0.15);
  --glass-bg-heavy: rgba(255, 255, 255, 0.2);
  --glass-border: rgba(255, 255, 255, 0.2);
  --glass-border-light: rgba(255, 255, 255, 0.1);
  --text-primary: rgba(255, 255, 255, 0.95);
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --accent-blue: #60a5fa;
  --accent-purple: #a855f7;
  --accent-green: #34d399;
  --accent-orange: #fb923c;
  --accent-red: #f87171;
  --accent-yellow: #fbbf24;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  margin: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  position: relative;
  overflow-x: hidden;
  color: var(--text-primary);
  background-color: #000;
}

/* iOS Background Fix */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  height: 100vh;
  width: 100vw;
  z-index: -2;
  background: url("assets/background.jpg") center center / cover no-repeat;
}

body::after {
  content: "";
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  z-index: -1;
}

/* Glass morphism components */
.glass {
  background: var(--glass-bg);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-light {
  background: var(--glass-bg-light);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid var(--glass-border-light);
  border-radius: 12px;
}

.glass-medium {
  background: var(--glass-bg-medium);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--glass-border);
  border-radius: 16px;
}

.glass-heavy {
  background: var(--glass-bg-heavy);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid var(--glass-border);
  border-radius: 20px;
}

.glass-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.glass-card:hover {
  transform: translateY(-8px);
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.25);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
}

.glass-button {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.8), rgba(168, 85, 247, 0.8));
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: white;
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 4px 20px rgba(96, 165, 250, 0.3);
  cursor: pointer;
  border: none;
}

.glass-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 30px rgba(96, 165, 250, 0.4);
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.9), rgba(168, 85, 247, 0.9));
}

.glass-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.glass-input {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  color: var(--text-primary);
  transition: all 0.3s ease;
}

.glass-input:focus {
  outline: none;
  border-color: var(--accent-blue);
  background: rgba(255, 255, 255, 0.12);
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
}

.glass-input::placeholder {
  color: var(--text-tertiary);
}

/* Performance analysis styles */
.performance-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
}

.score-circle {
  position: relative;
  width: 150px;
  height: 150px;
  margin: 0 auto;
}

.score-circle svg {
  transform: rotate(-90deg);
}

.score-circle .circle-bg {
  fill: none;
  stroke: rgba(255, 255, 255, 0.1);
  stroke-width: 8;
}

.score-circle .circle-progress {
  fill: none;
  stroke-width: 8;
  stroke-linecap: round;
  transition: stroke-dasharray 2s cubic-bezier(0.4, 0, 0.2, 1);
}

.score-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
}

/* Review question styles */
.review-question {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
}

.review-question.correct {
  border-left: 4px solid #22c55e;
}

.review-question.incorrect {
  border-left: 4px solid #ef4444;
}

.review-question.not-attempted {
  border-left: 4px solid #6b7280;
}

/* Gradient backgrounds for accents */
.gradient-blue {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
}

.gradient-purple {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
}

.gradient-green {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
}

.gradient-orange {
  background: linear-gradient(135deg, var(--accent-orange), #f97316);
}

.gradient-red {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
}

.gradient-yellow {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
}

/* Navigation button styles */
.nav-btn-not-attempted {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: rgba(255, 255, 255, 0.7);
}

.nav-btn-current {
  background: linear-gradient(135deg, var(--accent-blue), #3b82f6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  box-shadow: 0 0 20px rgba(96, 165, 250, 0.4);
}

.nav-btn-correct {
  background: linear-gradient(135deg, var(--accent-green), #10b981);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-incorrect {
  background: linear-gradient(135deg, var(--accent-red), #ef4444);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-bookmarked {
  background: linear-gradient(135deg, var(--accent-yellow), #f59e0b);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-marked-review {
  background: linear-gradient(135deg, var(--accent-purple), #8b5cf6);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

.nav-btn-answered {
  background: linear-gradient(135deg, #6b7280, #4b5563);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
}

/* Option button styles - REVISED FOR INLINE FEEDBACK */
.option-button {
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.15);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  width: 100%;
  text-align: left;
  padding: 1rem;
  border-radius: 12px;
  color: var(--text-primary);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 1rem;
  font-size: 1rem;
}

.option-button:hover {
  background: rgba(255, 255, 255, 0.1);
  border-color: rgba(96, 165, 250, 0.5);
  transform: translateX(8px);
}

.option-button.selected {
  background: linear-gradient(135deg, rgba(96, 165, 250, 0.3), rgba(59, 130, 246, 0.3));
  border-color: var(--accent-blue);
  transform: translateX(8px);
}

#optionsContainer.answered .option-button:hover {
    transform: translateX(0); /* Disable hover effect after answering */
}

#optionsContainer.answered .option-button {
    cursor: not-allowed;
    pointer-events: none;
}

#optionsContainer.answered .option-button:not(.correct):not(.incorrect) {
    opacity: 0.5;
}

.option-button.correct {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    border-color: #22c55e;
    color: white;
    transform: translateX(0);
}

.option-button.incorrect {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    border-color: #ef4444;
    color: white;
    transform: translateX(0);
}

.option-letter {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
  transition: all 0.3s ease;
  width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  color: var(--text-primary);
  flex-shrink: 0;
}

.option-button.selected .option-letter {
  background: var(--accent-blue);
  border-color: var(--accent-blue);
  color: white;
}

.option-button.correct .option-letter, .option-button.incorrect .option-letter {
    background: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}

.option-text {
  flex: 1;
  font-size: 1rem;
  line-height: 1.5;
}

/* Stats bar responsive grid */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 1rem;
  align-items: center;
  justify-items: center;
}

@media (max-width: 768px) {
  .stats-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 0.5rem;
  }
  
  .stats-grid > div:nth-child(4),
  .stats-grid > div:nth-child(5) {
    grid-column: span 1;
  }
}

@media (max-width: 480px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .stats-grid > div:last-child {
    grid-column: span 2;
    justify-self: center;
  }
}

/* Animations */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-20px); }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(96, 165, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(96, 165, 250, 0.6); }
}

@keyframes checkmark {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(180deg); }
  100% { transform: scale(1) rotate(360deg); }
}

@keyframes cross {
  0% { transform: scale(0) rotate(0deg); }
  50% { transform: scale(0.8) rotate(90deg); }
  100% { transform: scale(1) rotate(180deg); }
}

.animate-float {
  animation: float 6s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-checkmark {
  animation: checkmark 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-cross {
  animation: cross 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.3);
}

/* --- MOBILE RESPONSIVE STYLES --- */
.quiz-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

#mobile-nav-toggle {
    display: none; /* Hidden on desktop */
}

@media (min-width: 1024px) {
    .quiz-container {
        flex-direction: row;
        gap: 2rem;
    }
}

@media (max-width: 1023px) {
    .quiz-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 300px;
        height: 100%;
        z-index: 100;
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        box-shadow: 10px 0px 30px rgba(0,0,0,0.5);
    }
    .quiz-sidebar.open {
        transform: translateX(0);
    }
    #mobile-nav-toggle {
        display: flex;
        position: fixed;
        bottom: 20px;
        left: 20px;
        z-index: 50;
    }
    .quiz-main-content {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .glass-card, .glass {
        border-radius: 16px;
    }
    h1 { font-size: 2.5rem; }
    #questionText { font-size: 1.125rem; }
    .controls-container {
        flex-direction: column;
        gap: 1rem;
    }
    .controls-container button {
        width: 100%;
    }
}


    </style>
</head>
<body>
    <!-- Mode Selection Modal -->
    <div id="modeModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-md w-full mx-4 shadow-2xl">
            <h2 class="text-2xl font-bold text-white mb-6 text-center">Choose Study Mode</h2>
            
            <div class="space-y-4">
                <button onclick="selectMode('study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Study Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Interactive learning with immediate feedback</p>
                        </div>
                        <div class="gradient-blue w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('test')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Test Mode</h3>
                            <p class="text-sm text-white text-opacity-70">Practice test with performance analysis at end</p>
                        </div>
                        <div class="gradient-purple w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a1 1 0 001 1h6a1 1 0 001-1V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_study')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Study</h3>
                            <p class="text-sm text-white text-opacity-70">Study with time pressure and immediate feedback</p>
                        </div>
                        <div class="gradient-green w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
                
                <button onclick="selectMode('timed_exam')" class="w-full text-left p-4 glass-light hover:bg-white hover:bg-opacity-10 transition-all duration-300 text-white">
                    <div class="flex items-center justify-between">
                        <div>
                            <h3 class="font-semibold">Timed Exam</h3>
                            <p class="text-sm text-white text-opacity-70">Real exam simulation with strict timing</p>
                        </div>
                        <div class="gradient-red w-10 h-10 rounded-lg flex items-center justify-center">
                            <svg class="w-5 h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M12.395 2.553a1 1 0 00-1.45-.385c-.345.23-.614.558-.822.88-.214.33-.403.713-.57 1.116-.334.804-.614 1.768-.84 2.734a31.365 31.365 0 00-.613 3.58 2.64 2.64 0 01-.945-1.067c-.328-.68-.398-1.534-.398-2.654A1 1 0 005.05 6.05 6.981 6.981 0 003 11a7 7 0 1011.95-4.95c-.592-.591-.98-.985-1.348-1.467-.363-.476-.724-1.063-1.207-2.03z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <!-- Performance Analysis Modal -->
    <div id="performanceModal" class="hidden fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 backdrop-blur-sm">
        <div class="glass-heavy p-8 max-w-4xl w-full mx-4 shadow-2xl max-h-[90vh] overflow-y-auto">
            <div class="flex items-center justify-between mb-8">
                <h2 class="text-3xl font-bold text-white">Performance Analysis</h2>
                <button onclick="closePerformanceModal()" class="glass-light p-2 rounded-lg text-white hover:bg-white hover:bg-opacity-20">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Score Overview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <div class="performance-card p-6 text-center">
                    <div class="score-circle mb-4">
                        <svg width="150" height="150" class="mx-auto">
                            <circle class="circle-bg" cx="75" cy="75" r="65"></circle>
                            <circle id="scoreCircle" class="circle-progress" cx="75" cy="75" r="65" stroke="#22c55e" stroke-dasharray="0 408"></circle>
                        </svg>
                        <div class="score-text">
                            <div class="text-3xl font-bold text-white" id="accuracyScore">0%</div>
                            <div class="text-sm text-white text-opacity-70">Accuracy</div>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Results Summary</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Questions:</span>
                            <span class="text-white font-semibold" id="totalQuestionsResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-green-400">Correct:</span>
                            <span class="text-green-400 font-semibold" id="correctResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-red-400">Incorrect:</span>
                            <span class="text-red-400 font-semibold" id="incorrectResult">0</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Not Attempted:</span>
                            <span class="text-gray-400 font-semibold" id="notAttemptedResult">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="performance-card p-6">
                    <h3 class="text-lg font-bold text-white mb-4 text-center">Time Analysis</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Total Time:</span>
                            <span class="text-white font-semibold" id="totalTimeResult">0:00</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-white text-opacity-70">Avg per Question:</span>
                            <span class="text-white font-semibold" id="avgTimeResult">0:00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons -->
            <div class="flex justify-center space-x-4 mb-8">
                <button onclick="reviewQuestions()" class="glass-button px-8 py-3 text-lg">
                    Review All Questions
                </button>
                <button onclick="retakeQuiz()" class="glass-light px-8 py-3 text-lg text-white hover:bg-white hover:bg-opacity-20">
                    Retake Quiz
                </button>
            </div>
            
            <!-- Question Review Section -->
            <div id="questionReviewSection" class="hidden">
                <h3 class="text-2xl font-bold text-white mb-6">Question Review</h3>
                <div id="reviewQuestionsContainer">
                    <!-- Review questions will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="glass sticky top-0 z-40 mb-6">
        <div class="container mx-auto px-6 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="glass-light px-4 py-2 text-white hover:bg-white hover:bg-opacity-20 transition-all duration-300 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Back
                    </button>
                    <div id="quizHierarchy" class="text-sm text-white text-opacity-60">
                        Marrow / qBank / Surgery
                    </div>
                </div>
                
                <div class="flex items-center space-x-4">
                    <div class="glass-light px-3 py-1 text-sm text-white">
                        Question <span id="currentQuestion">1</span> of <span id="totalQuestions">22</span>
                    </div>
                    
                    <!-- Timer -->
                    <div id="timerContainer" class="hidden gradient-red px-3 py-1 text-sm text-white font-bold animate-pulse-glow">
                        <span id="timeDisplay">2:00</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Progress Bar -->
    <div class="w-full h-1 bg-black bg-opacity-30 mb-6">
        <div id="progressBar" class="h-1 gradient-blue transition-all duration-500 ease-out" style="width: 0%"></div>
    </div>

    <!-- Stats Bar - Show only in study modes -->
    <div id="statsBar" class="glass-light mb-8">
        <div class="container mx-auto px-6 py-4">
            <div class="stats-grid">
                <div class="text-center">
                    <div class="text-lg font-bold text-green-400" id="correctCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Correct</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-red-400" id="incorrectCount">0</div>
                    <div class="text-xs text-white text-opacity-60">Incorrect</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-blue-400" id="totalAttempted">0</div>
                    <div class="text-xs text-white text-opacity-60">Attempted</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-purple-400" id="accuracy">0%</div>
                    <div class="text-xs text-white text-opacity-60">Accuracy</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-bold text-orange-400" id="timeSpent">0:00</div>
                    <div class="text-xs text-white text-opacity-60">Time</div>
                </div>
            </div>
        </div>
    </div>

    <div class="quiz-container container mx-auto px-6">
        <!-- Question Navigation Sidebar -->
        <div id="quizSidebar" class="quiz-sidebar glass p-6 h-fit lg:sticky top-24">
            <h3 class="text-lg font-bold text-white mb-4">Question Navigator</h3>
            <div id="questionNav" class="grid grid-cols-5 gap-2 mb-6">
                <!-- Question numbers will be populated here -->
            </div>
            
            <div class="space-y-3 text-xs">
                <h4 class="text-sm font-medium text-white text-opacity-80 mb-3">Legend</h4>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-not-attempted rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Not Attempted</span>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-current rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Current</span>
                </div>
                <div id="studyModeLegend" class="space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-correct rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Correct</span>
                    </div>
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-incorrect rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Incorrect</span>
                    </div>
                </div>
                <div id="testModeLegend" class="hidden space-y-2">
                    <div class="flex items-center">
                        <div class="w-6 h-6 nav-btn-answered rounded mr-2"></div>
                        <span class="text-white text-opacity-60">Answered</span>
                    </div>
                </div>
                <div class="flex items-center">
                    <div class="w-6 h-6 nav-btn-bookmarked rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Bookmarked</span>
                </div>
                <div id="testModeReviewLegend" class="hidden items-center">
                    <div class="w-6 h-6 nav-btn-marked-review rounded mr-2"></div>
                    <span class="text-white text-opacity-60">Marked for Review</span>
                </div>
            </div>
            
            <!-- Submit Quiz Button for test modes -->
            <div id="submitSection" class="hidden mt-6">
                <button onclick="submitQuiz()" class="glass-button w-full py-3 text-lg font-bold">
                    Submit Quiz
                </button>
            </div>
        </div>

        <!-- Main Quiz Interface -->
        <div class="quiz-main-content flex-1 max-w-4xl">
            <div class="glass-card p-4 md:p-8 lg:p-12 mb-8 relative">
                <!-- Question Text -->
                <div id="questionText" class="text-xl lg:text-2xl leading-relaxed text-white mb-8">
                    Loading question...
                </div>

                <!-- Question Media -->
                <div id="questionMedia" class="mb-8"></div>

                <!-- Options -->
                <div id="optionsContainer" class="space-y-3 mb-8">
                    <!-- Options will be inserted here -->
                </div>

                <!-- Solution Display (only for study modes) -->
                <div id="solutionContainer" class="hidden glass-light p-6 border-l-4 border-green-400">
                    <h3 class="text-lg font-bold text-green-400 mb-3 flex items-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        Explanation
                    </h3>
                    <div id="solutionText" class="text-white text-opacity-90 leading-relaxed mb-4"></div>
                    <div id="solutionAudio" class="space-y-2 mt-4"></div>
                    <div id="solutionImages" class="space-y-4 mt-4"></div>
                    <div id="solutionVideo" class="hidden mt-4">
                        <video id="explanationVideoPlayer" class="w-full rounded-lg" controls>
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-container flex justify-between items-center mb-8">
                <button onclick="previousQuestion()" id="prevBtn" class="glass-button px-6 py-3 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                    </svg>
                    Previous
                </button>
                
                <div class="flex justify-center flex-grow">
                    <button onclick="toggleBookmark()" id="bookmarkBtn" class="glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" id="bookmarkIcon" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z"></path>
                        </svg>
                        <span id="bookmarkText">Bookmark</span>
                    </button>
                    
                    <button onclick="toggleMarkForReview()" id="markReviewBtn" class="hidden glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center justify-center">
                        <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                           <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V4a2 2 0 00-2-2H5zm0 2h10v12H5V4z" clip-rule="evenodd" />
                           <path d="M12.586 6.586a2 2 0 10-2.828 2.828l-3 3a2 2 0 102.828-2.828l3-3z" />
                        </svg>
                        <span id="markReviewText">Mark for Review</span>
                    </button>
                </div>
                
                <button onclick="nextQuestion()" class="glass-button px-6 py-3 flex items-center justify-center">
                    Next
                    <svg class="w-5 h-5 ml-2" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>

     <!-- Mobile Nav Toggle -->
    <button id="mobile-nav-toggle" onclick="toggleSidebar()" class="glass-button w-14 h-14 rounded-full items-center justify-center">
        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>


    <script>
        let questionsData = [
  {
    "text": "Which of the following statements is false about mucinous cystadenoma of the pancreas?",
    "choices": [
      {
        "id": 1,
        "text": "It is lined by columnar epithelium"
      },
      {
        "id": 2,
        "text": "Commonly seen in peri-menopausal women"
      },
      {
        "id": 3,
        "text": "Identified histologically by the presence of ovarian-like stroma"
      },
      {
        "id": 4,
        "text": "It is not premalignant"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Mucinous cystadenoma</strong>&nbsp;of the pancreas is a&nbsp;<strong>premalignant </strong>condition.</p>\n<p>Mucinous cystadenoma or mucinous cystic neoplasm (MCN) is a <strong>benign</strong> tumor of the pancreas <strong>with high risk of malignancy</strong>. They are commonly seen in <strong>perimenopausal women</strong>, and about <strong>two-thirds</strong> are located in <strong>the body or tail of the pancreas.</strong></p>\n<div class=\"page\" title=\"Page 1438\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>MCNs are mostly&nbsp;<strong>incidental findings</strong>. When symptoms are present, they are usually <strong>nonspecific</strong> and include upper abdominal discomfort, early satiety, or weight loss.</p>\n</div>\n</div>\n</div>\n</div>\n<p>The cysts are <strong>lined by tall columnar epithelium.&nbsp;</strong>MCN's contain <strong>mucin-producing epithelium</strong> and are identified histologically by the presence of <strong>mucin-rich cells and ovarian-like stroma</strong>. Staining for <strong>estrogen and progesterone</strong> is <strong>positive </strong>in most cases.</p>\n<p>Malignant transformation of MCN is&nbsp;<strong>common with large tumors and old patients.</strong>&nbsp;This is due to a stepwise <strong>accumulation of mutations (K-ras, p53).</strong></p>\n<table style=\"height: 420px; width: 518px;\">\n<tbody>\n<tr style=\"height: 31px;\">\n<td style=\"width: 507.023px; height: 31px; text-align: left;\" colspan=\"2\"><strong>WHO classification of primary tumors of the pancreas</strong></td>\n</tr>\n<tr style=\"height: 35px;\">\n<td style=\"width: 96.3984px; height: 35px;\"><strong>Benign</strong></td>\n<td style=\"width: 404.156px; height: 35px;\">\n<ul>\n<li>Mucinous cystadenoma</li>\n<li>Serous cystadenoma</li>\n<li>Intraductal papillary mucinous adenoma</li>\n<li>Mature teratoma</li>\n</ul>\n</td>\n</tr>\n<tr style=\"height: 47px;\">\n<td style=\"width: 96.3984px; height: 47px;\"><strong>Borderline</strong></td>\n<td style=\"width: 404.156px; height: 47px;\">\n<div class=\"page\" title=\"Page 1438\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<ul>\n<li>Mucinous cystic tumor with moderate dysplasia</li>\n<li>Intraductal papillary mucinous tumor with moderate dysplasia</li>\n<li>Solid pseudopapillary tumor</li>\n</ul>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 74px;\">\n<td style=\"width: 96.3984px; height: 74px;\"><strong>Malignant</strong></td>\n<td style=\"width: 404.156px; height: 74px;\">\n<ul>\n<li>Ductal adenocarcinoma</li>\n<li>Serous/mucinous cystadenocarcinoma</li>\n<li>Intraductal mucinous papillary tumor</li>\n</ul>\n</td>\n</tr>\n</tbody>\n</table>\n<p>&nbsp;</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient with a pancreatic neoplasm undergoes cyst fluid aspiration. The aspirated fluid stains positive for mucin and shows elevated levels of amylase and CEA. What is the most probable diagnosis?",
    "choices": [
      {
        "id": 1,
        "text": "Serous cystadenoma of pancreas"
      },
      {
        "id": 2,
        "text": "Mucinous cystadenoma of pancreas"
      },
      {
        "id": 3,
        "text": "Intraductal papillary mucinous neoplasm"
      },
      {
        "id": 4,
        "text": "Mature cystic teratoma"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Positive mucin</strong>&nbsp;staining,&nbsp;<strong>elevated carcinoembryonic antigen</strong>&nbsp;(CEA), and&nbsp;<strong>elevated amylase</strong>&nbsp;levels&nbsp;are seen in cases of&nbsp;<strong>intraductal papillary mucinous neoplasm</strong>&nbsp;(IPMN).</p>\n<p>Cyst fluid analysis of various pancreatic cystic neoplasms:</p>\n<table style=\"height: 196px; width: 655px;\">\n<tbody>\n<tr style=\"height: 58px;\">\n<td style=\"width: 121.625px; height: 58px;\">Characteristics</td>\n<td style=\"width: 191.375px; height: 58px;\"><strong>Serous cystic neoplasm (SCN)</strong></td>\n<td style=\"width: 155px; height: 58px;\"><strong>Mucinous cystic neoplasm (MCN)</strong></td>\n<td style=\"width: 156px; height: 58px;\"><strong>Intraductal papillary mucinous neoplasm (IPMN)</strong></td>\n</tr>\n<tr style=\"height: 37.2656px;\">\n<td style=\"width: 121.625px; height: 37.2656px;\"><strong>Cytology</strong></td>\n<td style=\"width: 191.375px; height: 37.2656px;\">\n<div class=\"page\" title=\"Page 1565\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Scant glycogen-rich cells, with positive periodic acid&ndash;Schiff stain</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 155px; height: 37.2656px;\">\n<div class=\"page\" title=\"Page 1565\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Sheets and clusters of columnar, mucin-containing cells</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n<td style=\"width: 156px; height: 37.2656px;\">\n<div class=\"page\" title=\"Page 1565\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>Tall, columnar, mucin-containing cells</p>\n</div>\n</div>\n</div>\n</div>\n</td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 121.625px; height: 19px;\"><strong>Mucin stain</strong></td>\n<td style=\"width: 191.375px; height: 19px;\">Negative</td>\n<td style=\"width: 155px; height: 19px;\">Positive</td>\n<td style=\"width: 156px; height: 19px;\">Positive</td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 121.625px; height: 19px;\"><strong>Amylase</strong></td>\n<td style=\"width: 191.375px; height: 19px;\">Low</td>\n<td style=\"width: 155px; height: 19px;\">Low</td>\n<td style=\"width: 156px; height: 19px;\">High</td>\n</tr>\n<tr style=\"height: 19px;\">\n<td style=\"width: 121.625px; height: 19px;\"><strong>CEA</strong></td>\n<td style=\"width: 191.375px; height: 19px;\">Low</td>\n<td style=\"width: 155px; height: 19px;\">High</td>\n<td style=\"width: 156px; height: 19px;\">High</td>\n</tr>\n</tbody>\n</table>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 58-year-old man is being evaluated for recurrent attacks of pancreatitis. An ERCP is done and it shows the presence of a fish-mouth sign at the ampulla of Vater.\u00a0Which of the following statements is true about his condition?",
    "choices": [
      {
        "id": 1,
        "text": "It is more common in males"
      },
      {
        "id": 2,
        "text": "It only involves the main pancreatic duct"
      },
      {
        "id": 3,
        "text": "Head of pancreas is most common site of the neoplasm"
      },
      {
        "id": 4,
        "text": "They have no malignant potential"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>A<strong>&nbsp;fish mouth sign&nbsp;</strong>at the ampulla of Vater during<strong>&nbsp;ERCP</strong>&nbsp;is indicative of&nbsp;<strong>intraductal papillary mucinous neoplasm&nbsp;(IPMN).&nbsp;</strong>It&nbsp;is most commonly seen in the <strong>head of the pancreas.</strong></p>\n<p>The&nbsp;intraductal papillary mucinous neoplasm can be diagnosed with the following findings (<strong>Ohashi triad</strong>) during endoscopy:</p>\n<ul>\n<li>Bulging ampulla of Vater (<strong>fish-mouth sign</strong>)</li>\n<li>Dilated pancreatic duct</li>\n<li>Mucin secretion from the opening</li>\n</ul>\n<p><strong>Equal distribution</strong> is seen between males and females in IPMN.<strong><strong>&nbsp;</strong></strong>Patients are usually in their <strong>seventh or eighth decade of life</strong> and present with <strong>abdominal pain</strong> or <strong>recurrent pancreatitis</strong>. This is caused by the <strong>obstruction of the pancreatic duct</strong> by thick mucin. Some patients have symptoms secondary to <strong>pancreatic insufficiencies</strong> like steatorrhea, diabetes, and weight loss.</p>\n<p>IMPNs are of three types:</p>\n<ul>\n<li><strong>Branch-duct IPMN</strong> (BD-IPMN) - affects only the small<strong> side branches. </strong>It is less frequently associated with malignancy.</li>\n<li><strong>Main duct IPMN</strong> (MD-IPMN) - Affects the <strong>main pancreatic duct. </strong>Malignant transformation is commonly seen.</li>\n<li><strong>Mixed-type IPMN -&nbsp;</strong>side-branch IPMNs that extend into the main duct&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man was incidentally found to have a pancreatic lesion on a USG. On further evaluation, a CT scan revealed the presence of a multicystic, lobulated mass in the pancreatic head, suggestive of serous cystadenoma. He is currently asymptomatic. What will be the next step in the management of this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Repeat CT scan after 6 months"
      },
      {
        "id": 2,
        "text": "Resection of the tumor"
      },
      {
        "id": 3,
        "text": "Endoscopic ultrasound guided FNA"
      },
      {
        "id": 4,
        "text": "Diagnostic laparoscopy"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Endoscopic ultrasound-guided FNA</strong>&nbsp;(EUS-FNA) will be the next step in the management of this patient.</p>\n<div class=\"page\" title=\"Page 1437\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Serous cystadenomas</strong> are essentially <strong>benign tumors</strong> without malignant potential. Serous cystadenocarcinoma has been reported very rarely (&lt;1%). Therefore, malignant potential should not be a consideration for surgical resection. <strong>Surgical resection</strong> is done only for <strong>symptomatic</strong> patients.</p>\n<div class=\"page\" title=\"Page 1438\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>In <strong>asymptomatic</strong> patients, <strong>conservative </strong>management is adopted. However, it is important to confirm the diagnosis using <strong>EUS-FNA</strong>. It yields a <strong>non-viscous fluid</strong> with <strong>low CEA and amylase</strong> levels.</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n<p>Algorithm for management of pancreatic cystic neoplasms:</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/b29d7d4a0f8a49c799fdcd287064bb5bx1280x2560.JPEG"
    ]
  },
  {
    "text": "What is the initiating event in the oncogenesis of pancreatic cancers?",
    "choices": [
      {
        "id": 1,
        "text": "Activation of K-ras 2"
      },
      {
        "id": 2,
        "text": "Loss of p16 function"
      },
      {
        "id": 3,
        "text": "p53 mutation"
      },
      {
        "id": 4,
        "text": "Loss of DPC4 function"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>The <strong>activation of the K-ras 2</strong> oncogene is the <strong>initiating event</strong> in the oncogenesis of <strong>pancreatic cancers</strong>. It is activated in <strong>more than 95%</strong> of pan&shy;creatic cancers.</p>\n<p><strong>Pancreatic intraepithelial neoplasia</strong> (PanIN) develops into <strong>pancreatic ductal adenocarcinoma</strong> (PDAC) in a sequential pathway. A number of tumor suppressor genes and oncogenes play a significant role in the pathogenesis of PDAC. They include:</p>\n<ul>\n<li>K-ras 2</li>\n<li>PDX1</li>\n<li>CDKN2A/p16</li>\n<li>p53</li>\n<li>DPC4 (SMAD4)</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/0718ca21e1614634b91197a6e481772dx1280x1007.JPEG"
    ]
  },
  {
    "text": "Which of the following are not risk factors for the development of pancreatic cancer?",
    "choices": [
      {
        "id": 1,
        "text": "1 and 4"
      },
      {
        "id": 2,
        "text": "1 and 5"
      },
      {
        "id": 3,
        "text": "2 and 3"
      },
      {
        "id": 4,
        "text": "3 and 4"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p>An history of acute pancreatitis&nbsp;and female gender are&nbsp;<strong>not </strong>risk factors for the development of pancreatic cancer.</p>\n<p>Risk factors for pancreatic cancer:</p>\n<ul>\n<li>Demographic factors:\n<ul>\n<li>Age (peak incidence, 65&ndash;75 years)</li>\n<li><strong>Male gender</strong></li>\n<li>Black ethnicity</li>\n</ul>\n</li>\n<li><strong>Cigarette smoking</strong></li>\n<li>Genetic factors and medical conditions</li>\n<li>Family history:\n<ul>\n<li>Two first-degree relatives with pancreas cancer</li>\n<li>Germline <strong><em>BRCA2</em> mutations</strong> in some rare high-risk families</li>\n</ul>\n</li>\n<li><strong>Hereditary pancreatitis</strong></li>\n<li><strong>Chronic pancreatitis</strong></li>\n<li>Lynch syndrome</li>\n<li>Ataxia telangiectasia</li>\n<li>Peutz&ndash;Jeghers syndrome</li>\n<li>Familial breast-ovarian cancer syndrome</li>\n<li>Familial adenomatous polyposis&nbsp;</li>\n<li><strong>Diabetes mellitus</strong></li>\n<li>Obesity&nbsp;</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common type of pancreatic malignancy?",
    "choices": [
      {
        "id": 1,
        "text": "Squamous cell carcinoma"
      },
      {
        "id": 2,
        "text": "Adenocarcinoma"
      },
      {
        "id": 3,
        "text": "Insulinoma"
      },
      {
        "id": 4,
        "text": "Acinar cell carcinoma"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Ductal adenocarcinoma</strong> is the most common type of pancreatic cancer.</p>\n<p>Types of exocrine pancreatic cancer:</p>\n<ul>\n<li>Ductal adenocarcinoma (85%)</li>\n<li>Adenosquamous carcinoma</li>\n<li>Acinar cell carcinoma</li>\n</ul>\n<p>Endocrine cancer of the pancreas is rare. They account for only 5% of clinically detected pancreatic tumours.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common site for pancreatic carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Head"
      },
      {
        "id": 2,
        "text": "Neck"
      },
      {
        "id": 3,
        "text": "Body"
      },
      {
        "id": 4,
        "text": "Tail"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Pancreatic carcinomas&nbsp;</strong>arise most commonly from the&nbsp;<strong>head </strong>of the gland.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding the presentation of patients with pancreatic carcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Release of platelet aggregating factors cause migratory thrombophlebitis"
      },
      {
        "id": 2,
        "text": "Abdominal pain is the most common presentation"
      },
      {
        "id": 3,
        "text": "Courvoisier's law implicates possible cancer of the head of the pancreas"
      },
      {
        "id": 4,
        "text": "Tumors of the body present at an advanced unresectable stage"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>&nbsp;</p>\n<p>Note:&nbsp;<strong>Trousseau's sign</strong>&nbsp;is also seen in <strong>hypocalcemia</strong>. It indicates <strong>carpopedal spasm</strong> (finger and wrist spasm) after inflation of a blood pressure cuff for several minutes when the brachial artery is occluded.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/1d5e42bd33194f92bdfbe260ecfece06x720x990.PNG"
    ]
  },
  {
    "text": "Which of the following statements is not true about pancreatic ductal adenocarcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "It is associated with desmoplastic changes, with scattering of neoplastic glands"
      },
      {
        "id": 2,
        "text": "Perineural invasion is characteristic"
      },
      {
        "id": 3,
        "text": "Body tumors are smaller"
      },
      {
        "id": 4,
        "text": "Carcinoma of the head of the pancreas causes obstruction of both the pancreatic and biliary ducts"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Pancreatic ductal adenocarcinomas </strong>situated in the <strong>body of the pancreas</strong> are usually <strong>larger.</strong></p>\n<p>Pancreatic adenocarcinomas are <strong>solid, slow-growing tumors</strong>, characterized by neoplastic tubular glands within a markedly <strong>desmoplastic fibrous stroma</strong>. They <strong>infiltrate locally,</strong> typically along nerve sheaths, along lymphatics, and into blood vessels.</p>\n<p>Carcinoma of the head of the pancreas causes<strong> obstruction</strong> of both the pancreatic and biliary ducts.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 60-year-old man with a history of chronic pancreatitis presents with jaundice, severe itching, and weight loss. A smooth, globular mass is palpable in the right upper quadrant of the abdomen. You suspect pancreatic cancer. What will be the imaging modality of choice for the evaluation of the tumor?",
    "choices": [
      {
        "id": 1,
        "text": "Endoscopic retrograde cholangiopancreatography"
      },
      {
        "id": 2,
        "text": "Magnetic resonance cholangiopancreatography"
      },
      {
        "id": 3,
        "text": "Multidetector CT scan"
      },
      {
        "id": 4,
        "text": "PET scan"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>Multidetector computed tomography </strong>(CT) is the <strong>imaging</strong> <strong>modality of choice</strong> for the evalua&shy;tion of <strong>pancreatic tumors</strong>. It allows an accurate determination of the level of biliary obstruction, the relationship of the tumor to the blood vessels, and the presence of regional or metastatic disease.</p>\n<div class=\"page\" title=\"Page 1571\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>For a detailed assessment of the luminal <strong>pancreato-biliary anatomy</strong>, <strong>MRCP</strong> should be considered.&nbsp;</p>\n</div>\n</div>\n</div>\n</div>\n<div class=\"page\" title=\"Page 1571\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>ERCP</strong> is reserved for cases requiring therapeutic or palliative intervention. It helps&nbsp;to perform a <strong>biopsy</strong> and to relieve obstruction by <strong>biliary stenting</strong>. The invasiveness of ERCP increases the rate of <strong>wound infection</strong>. Hence, it is not suitable for patients who will be undergoing surgery.</p>\n<div class=\"page\" title=\"Page 1571\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<div class=\"page\" title=\"Page 1571\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p>F-fluorodeoxyglucose positron emission tomography (<strong>FDG-PET</strong>) has the ability to differentiate between benign and malignant pancreas tumors. However, <strong>false-positive results </strong>are seen in&nbsp;FDG-PET. The benefits of FDG-PET over CT scans are yet to be determined.</p>\n<p>A CT-scan of pancreatic cancer:</p>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>\n</div>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/a1ef7d3cce8d43a2b0aadc3d651c0e7ax720x581.PNG"
    ]
  },
  {
    "text": "Which of the following is a radiological sign that is not seen in patients with adenocarcinoma of the pancreas?",
    "choices": [
      {
        "id": 1,
        "text": "Scrambled egg appearance"
      },
      {
        "id": 2,
        "text": "Inverse 3 sign"
      },
      {
        "id": 3,
        "text": "Double duct appearance"
      },
      {
        "id": 4,
        "text": "Narrowing of C-loop of the duodenum"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Widening of the C-loop</strong> of the duodenum is a <strong>barium meal</strong> finding seen in the <strong>adenocarcinoma of the pancreas</strong>.</p>\n<p>Radiological features of adenocarcinoma pancreas:</p>\n<p>Endoscopic retrograde cholangiopancreatography (ERCP) findings:</p>\n<ul>\n<li>Scrambled egg appearance</li>\n<li>Double duct appearance</li>\n</ul>\n<p>Barium meal findings:</p>\n<ul>\n<li>Inverse 3 sign</li>\n<li>Rose thorning of 2<sup>nd</sup> part of the duodenum</li>\n<li>Widened duodenal C-loop</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "The best method to obtain tissue for the diagnosis of pancreatic carcinoma is:",
    "choices": [
      {
        "id": 1,
        "text": "Transgastric FNAC guided by endoscopic ultrasound"
      },
      {
        "id": 2,
        "text": "MRI-guided biopsy"
      },
      {
        "id": 3,
        "text": "Laparoscopic-guided biopsy"
      },
      {
        "id": 4,
        "text": "Percutaneous transperitoneal biopsy"
      }
    ],
    "correct_choice_id": 1,
    "solution": "<p><strong>Transgastric or transduodenal FNAC</strong> or <strong>trucut biopsy</strong> performed under<strong> endoscopic ultrasound (EUS)</strong> guidance is the best method to obtain tissue for the diagnosis of <strong>pancreatic carcinoma</strong>. This is because it <strong>avoids the spillage</strong> of tumor cells into the peritoneal cavity.&nbsp;</p>\n<p>Endoscopic ultrasonography with a fine needle aspiration <strong>(EUS-FNA)</strong> is done if CT has failed to demonstrate a tumor. When a tissue diagnosis is required prior to surgery to distinguish between inflammation and neoplasia, EUS-FNA is helpful.</p>\n<div class=\"page\" title=\"Page 1256\">\n<div class=\"section\">\n<div class=\"layoutArea\">\n<div class=\"column\">\n<p><strong>Diagnostic laparoscopy</strong> prior to resection can spare an unnecessary laparotomy by identifying small peritoneal and liver metastases.</p>\n</div>\n</div>\n</div>\n</div>\n<p><strong>Percutaneous transperitoneal biopsy</strong> of potentially resectable pancreatic tumors is&nbsp;<strong>avoided.</strong></p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which is the most reliable tumor marker for the pre-treatment evaluation of a patient with pancreatic adenocarcinoma?",
    "choices": [
      {
        "id": 1,
        "text": "Carcinoembryonic antigen"
      },
      {
        "id": 2,
        "text": "CA 19-9"
      },
      {
        "id": 3,
        "text": "Alpha-fetoprotein"
      },
      {
        "id": 4,
        "text": "CA 15-3"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p><strong>Carbohydrate antigen (CA) 19-9</strong>&nbsp;is the <strong>most reliable tumor marker</strong> for pretreatment evaluation and post-treatment surveillance of <strong>pancreatic adenocarcinoma</strong>.</p>\n<p>Other tumor markers for pancreatic carcinoma are <strong>carcinoembryonic antigen</strong> (CEA) and <strong>&alpha;-fetoprotein</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A 50-year-old man has been diagnosed with pancreatic cancer. In order to diagnose a resectability status, a CECT abdomen is performed. Which of the following features will indicate an unresectable tumor?",
    "choices": [
      {
        "id": 1,
        "text": "Abutment of superior mesenteric artery"
      },
      {
        "id": 2,
        "text": "Stage II cancer on AJCC staging criteria"
      },
      {
        "id": 3,
        "text": "Short segment occlusion of superior mesenteric vein"
      },
      {
        "id": 4,
        "text": "Encasement of celiac artery"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p>Encasement of the celiac artery ( i.e &gt;180&deg; or &gt;50% of the vessel circumference involvement) indicates surgical inoperability and is therefore considered to be non-resectable.</p>\n<p><strong>Varadhachary- Katz criteria</strong> for resectability of pancreatic cancer:</p>\n<table style=\"width: 439px;\">\n<tbody>\n<tr>\n<td style=\"width: 78px;\">Criteria</td>\n<td style=\"width: 90px;\">\n<p>Resectable</p>\n<p>(if all are satisfied)</p>\n</td>\n<td style=\"width: 108.683px;\">\n<p>Borderline resectable</p>\n<p>(if any one is satisfied)</p>\n</td>\n<td style=\"width: 126.317px;\">\n<p>Unresectable</p>\n<p>(if any one is satisfied)</p>\n</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\">AJCC stage</td>\n<td style=\"width: 90px;\">I/II</td>\n<td style=\"width: 108.683px;\">III</td>\n<td style=\"width: 126.317px;\">III</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\">SMA</td>\n<td style=\"width: 90px;\">Not affected</td>\n<td style=\"width: 108.683px;\">Abutment</td>\n<td style=\"width: 126.317px;\">Encasement</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\">Celiac axis</td>\n<td style=\"width: 90px;\">Not affected</td>\n<td style=\"width: 108.683px;\">Abutment</td>\n<td style=\"width: 126.317px;\">Encasement</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\">CHA</td>\n<td style=\"width: 90px;\">Not affected</td>\n<td style=\"width: 108.683px;\">Abutment</td>\n<td style=\"width: 126.317px;\">Encasement</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\">SMV-PV</td>\n<td style=\"width: 90px;\">Patent</td>\n<td style=\"width: 108.683px;\">Short segment occlusion</td>\n<td style=\"width: 126.317px;\">Long segment occlusion</td>\n</tr>\n<tr>\n<td style=\"width: 78px;\" colspan=\"4\">\n<p>Note: Any evidence of peritoneal seeding, malignant ascites, or distant metastasis also indicates an unresectable tumor.</p>\n</td>\n</tr>\n</tbody>\n</table>\n<p>SMA: superior mesenteric artery, CHA: common hepatic artery, SMV-PV: superior mesenteric vein-portal vein confluence</p>\n<p>Definitions:</p>\n<ul>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Abutment</strong> means <strong>&le;180&deg;</strong> or &le;50% of the vessel circumference involvement;&nbsp;</li>\n<li style=\"font-weight: 400;\" aria-level=\"2\"><strong>Encasement</strong> means <strong>&gt;180&deg;</strong> or &gt;50% of the vessel circumference&nbsp; involvement</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient presents to the OPD with complaints of jaundice, clay-colored stools, and pruritis. After detailed radiological and pathological investigations, a 2 cm adenocarcinoma is found at the head of the pancreas. There is no spread to the adjacent structures. What is the preferred surgical management in this patient?",
    "choices": [
      {
        "id": 1,
        "text": "Whipple\u2019s procedure"
      },
      {
        "id": 2,
        "text": "Pylorus preserving pancreaticoduodenectomy"
      },
      {
        "id": 3,
        "text": "Duodenum-preserving pancreatic head resection"
      },
      {
        "id": 4,
        "text": "Puestow's procedure"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>Since there is no involvement of adjacent structures, the preferred surgical management in this patient is&nbsp;<strong>pylorus-preserving pancreatoduodenectomy (PPPD), </strong>also known as <strong>Longmire&ndash;Traverso procedure</strong>.</p>\n<p>Pylorus-preserving pancreatoduodenectomy (PPPD)&nbsp;involves the&nbsp;removal of:</p>\n<ul>\n<li>Duodenum&nbsp;</li>\n<li>Pancreatic head</li>\n<li>The distal part of the bile duct</li>\n</ul>\n<p>The<strong>&nbsp;original pancreatoduodenectomy</strong>, as proposed by <strong>Whipple</strong>, included <strong>resection of the gastric antrum</strong>.</p>\n<p><strong>Preserving the antrum</strong> <strong>and the pylorus</strong>&nbsp;results in a <strong>better physiological outcome</strong>, with no difference in survival or recurrence rates. Hence PPPD is preferred.</p>\n<p>For tumors of the <strong>body and tail</strong>, <strong>distal pancreatectomy</strong>&nbsp;is the preferred surgical management.</p>\n<p><strong>Duodenum-preserving pancreatic head resection</strong> (Beger's procedure) and <strong>Puestow's procedure</strong> (resection of tail followed by longitudinal pancreaticojejunostomy) are management options for <strong>chronic pancreatitis</strong>.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "You assist in performing a Whipple procedure in a patient with carcinoma of the pancreas. All of the following structures will be resected in this surgery, except:",
    "choices": [
      {
        "id": 1,
        "text": "1 and 3"
      },
      {
        "id": 2,
        "text": "2 and 4"
      },
      {
        "id": 3,
        "text": "3 and 5"
      },
      {
        "id": 4,
        "text": "4 and 5"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>Whipple procedure\u00a0does <strong>not</strong> involve the\u00a0removal of the spleen and tail of the pancreas.</p>\n<p>The <strong>Whipple procedure</strong> is a complex surgery done for carcinomas involving the <strong>head of the pancreas</strong>. It is done only in cases when:</p>\n<ul>\n<li>The entire duodenum has to be removed e.g. in familial adenomatous polyposis\u00a0(FAP)</li>\n<li>Tumor encroaches in the first part of the duodenum, or\u00a0stomach</li>\n<li>A clear resection margin is not achieved by pylorus preserving pancreatoduodectomy</li>\n</ul>\n<p>The following structures are removed during Whipple\u2019s procedure:</p>\n<ul>\n<li>Distal stomach</li>\n<li>Duodenum</li>\n<li>Proximal jejunum</li>\n<li>Head of the pancreas</li>\n<li>Gallbladder</li>\n<li>Common bile duct (CBD)</li>\n<li>Regional lymphatics</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/07f48a57633d4d77906091f13eac1771x1280x2559.JPEG"
    ]
  },
  {
    "text": "During the reconstruction of the Whipple procedure, all of the following anastomoses will be done by a surgeon except:",
    "choices": [
      {
        "id": 1,
        "text": "Pancreaticojejunostomy"
      },
      {
        "id": 2,
        "text": "Ileojejunostomy"
      },
      {
        "id": 3,
        "text": "Choledochojejunostomy"
      },
      {
        "id": 4,
        "text": "Gastrojejunostomy"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>This is <strong>controversial</strong> since there is a difference in the reconstruction procedures mentioned in standard textbooks:</p>\n<p>Bailey and Love, 27th edition (Pg no: 1236) - Pancreaticojejunostomy + choledechojejunostomy + duodenojejunostomy&nbsp;<br /><br />Schwatrz, 11th edition (Pg no: 1493) - Pancreaticojejunostomy + choledechojejunostomy + gastrojejunostomy/duodenojejunostomy<br /><br />Sabiston, 20th edition (Pg no: 1546) - Pancreaticojejunostomy + hepaticojejunostomy + duodenojejunostomy</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": [
      "https://dhmbxeygs57ff.cloudfront.net/uploads/2f0d0ddf66894823ba8e298d90cd04b9x1280x2559.JPEG"
    ]
  },
  {
    "text": "During the Whipple procedure, a surgeon performs the Kocher maneuver to access the retroperitoneum. This maneuver involves:",
    "choices": [
      {
        "id": 1,
        "text": "Mobilization of gall bladder"
      },
      {
        "id": 2,
        "text": "Mobilization of second part of duodenum"
      },
      {
        "id": 3,
        "text": "Mobilization of the pancreas"
      },
      {
        "id": 4,
        "text": "Mobilization of ascending colon"
      }
    ],
    "correct_choice_id": 2,
    "solution": "<p>The<strong> Kocher maneuver</strong> involves the mobilization of the <strong>second part of the duodenum. </strong>It allows exposure of the retroperitoneal fat and the inferior vena cava (IVC).</p>\n<p>Another maneuver that is used to access the retroperitoneum is the&nbsp;<strong>Cattel Braasch maneuver</strong>. It involves the mobilization of the <strong>ascending colon.</strong></p>\n<p>Other Kocher's in medicine:</p>\n<ul>\n<li>Kocher's technique is used for the reduction of <strong>anterior shoulder dislocation</strong>. It involves four steps:<br />Traction &rarr; External Rotation &rarr; Adduction &rarr; Medial Rotation (TEAM)</li>\n<li>During <strong>thyroid palpation</strong>, Kocher's method is done to demonstrate the <strong>pressure effect</strong> of the thyroid gland on the trachea or larynx. <strong>Lateral compression</strong> will result in stridor.</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "Which of the following statements is false regarding complications of the Whipple procedure?",
    "choices": [
      {
        "id": 1,
        "text": "Delayed gastric emptying is characterized by the need for prolonged nasogastric decompression"
      },
      {
        "id": 2,
        "text": "Endocrine insufficiency is a complication"
      },
      {
        "id": 3,
        "text": "Any drainage output on or after postoperative day 3, with amylase >3 times normal value indicates pancreatic fistula"
      },
      {
        "id": 4,
        "text": "Biliary leakage is the most common complication"
      }
    ],
    "correct_choice_id": 4,
    "solution": "<p><strong>Delayed gastric emptying</strong> is the most common complication following the&nbsp;<strong>Whipple procedure,&nbsp;</strong>not biliary leakage.</p>\n<p>Delayed gastric emptying is characterized by the need for prolonged nasogastric decompression or the inability to tolerate oral intake.&nbsp;</p>\n<p>Most pancreatic fistulas are controlled by drainage catheters placed at the time of surgery. A <strong>pancreatic leak or pancreatic fistula</strong> is defined as the output via an intraoperatively placed drain (or percutaneous drain) of any measurable volume on or after <strong>postoperative day 3</strong>, with <strong>amylase &gt;3 times the normal value</strong>.&nbsp;</p>\n<p>Other complications of the Whipple procedure include:</p>\n<ul>\n<li>Wound infection</li>\n<li>Intra-abdominal abscess</li>\n<li>Cardiac events</li>\n<li>Bile leak</li>\n<li>Overall reoperation</li>\n<li>Exocrine insufficiency</li>\n<li>Endocrine insufficiency</li>\n</ul>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "What is the most common cause of death in patients following pancreaticoduodenectomy?",
    "choices": [
      {
        "id": 1,
        "text": "Cardiopulmonary complications"
      },
      {
        "id": 2,
        "text": "Gastric outlet obstruction"
      },
      {
        "id": 3,
        "text": "Anastomotic leakage"
      },
      {
        "id": 4,
        "text": "Haemorrhage"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p>The most common cause of death following <strong>pancreaticoduodenectomy</strong> is sepsis due to<strong> anastomotic leakage.</strong></p>\n<p>Anastomotic leakage is responsible for 33&ndash;88 % of postoperative deaths after pancreaticoduodenectomy. Only about 5&ndash;16 % of patients develop post-surgical bleeding complications.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  },
  {
    "text": "A patient was found to have a 3 cm adenocarcinoma of the body of the pancreas invading into the superior mesenteric artery. All of the following chemotherapeutic agents can be utilized for the management of this patient except:",
    "choices": [
      {
        "id": 1,
        "text": "FOLFIRINOX regimen"
      },
      {
        "id": 2,
        "text": "Albumin-bound paclitaxel"
      },
      {
        "id": 3,
        "text": "MVAC regimen"
      },
      {
        "id": 4,
        "text": "Gemcitabine"
      }
    ],
    "correct_choice_id": 3,
    "solution": "<p><strong>MVAC regimen </strong>(methotrexate, vinblastine, adriamycin, and cisplatin) is not used in the management of this patient. MVAC regimen is used in&nbsp;<strong>advanced bladder carcinoma.</strong></p>\n<p><strong>Chemotherapy</strong> in pancreatic cancer is indicated in patients with <strong>unresectable tumours</strong> and lymph node metastasis. Agents used in chemotherapy are:</p>\n<ul>\n<li>Gemcitabine</li>\n<li>Gemcitabine with capecitabine</li>\n<li>Albumin bound paclitaxel (nab-paclitaxel)</li>\n<li>FOLFIRINOX - a combination of fluorouracil, irinotecan, oxaliplatin, and leucovorin</li>\n</ul>\n<p>However, there is only a <strong>2&ndash;5 months increase in median survival</strong> with these regimens. <strong>No long-term cure</strong>&nbsp;is seen with chemotherapy or radiotherapy for pancreatic carcinomas.</p>",
    "explanation_video": "",
    "question_images": [],
    "explanation_images": []
  }
];
        let quizName = '37 Carcinoma Pancreas';
        let hierarchy = ["Marrow", "qBank", "Surgery"];
        
        // Handle Custom Quiz Loading
        if (window.location.pathname.endsWith('custom_quiz.html')) {
            const customData = JSON.parse(localStorage.getItem('customQuizData'));
            if (customData) {
                questionsData = customData.questions;
                quizName = customData.name;
                hierarchy = customData.hierarchy;
                document.title = quizName + ' - Brain And Scalpel';
                document.getElementById('totalQuestions').textContent = questionsData.length;
                document.getElementById('quizHierarchy').textContent = hierarchy.join(' > ');
            }
        }

        let currentQuestionIndex = 0;
        let selectedOption = null;
        let currentMode = 'study';
        let timer = null;
        let timeRemaining = 0;
        let questionStartTime = Date.now();
        let quizStartTime = Date.now();
        let isQuizCompleted = false;
        
        let questionStates = new Array(questionsData.length).fill(null).map(() => ({
            status: 'not_attempted',
            bookmarked: false,
            markedForReview: false,
            selectedAnswer: null,
            timeSpent: 0
        }));
        
        let stats = {
            correctAnswers: 0,
            incorrectAnswers: 0,
            totalAttempted: 0,
            totalTime: 0,
            notAttempted: questionsData.length
        };

        const urlParams = new URLSearchParams(window.location.search);
        currentQuestionIndex = Math.min(parseInt(urlParams.get('startAt')) || 0, questionsData.length - 1);

        function goBack() {
            if (isQuizCompleted || confirm('Are you sure you want to leave the quiz? Your progress will be lost.')) {
                window.history.back();
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            document.getElementById('modeModal').style.display = 'none';
            initializeQuiz();
        }

        function initializeQuiz() {
            quizStartTime = Date.now();
            
            const bookmarkBtn = document.getElementById('bookmarkBtn');
            const markReviewBtn = document.getElementById('markReviewBtn');
            const testModeReviewLegend = document.getElementById('testModeReviewLegend');
            const isTestMode = currentMode === 'test' || currentMode === 'timed_exam';
            
            document.getElementById('statsBar').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('studyModeLegend').style.display = isTestMode ? 'none' : 'block';
            document.getElementById('testModeLegend').style.display = isTestMode ? 'block' : 'none';
            document.getElementById('submitSection').style.display = isTestMode ? 'block' : 'none';
            bookmarkBtn.style.display = isTestMode ? 'none' : 'flex';
            markReviewBtn.style.display = isTestMode ? 'flex' : 'none';
            testModeReviewLegend.style.display = isTestMode ? 'flex' : 'none';
            
            if (currentMode === 'timed_study' || currentMode === 'timed_exam') {
                document.getElementById('timerContainer').classList.remove('hidden');
            }
            
            loadBookmarkedQuestions();
            generateQuestionNav();
            updateStats();
            displayQuestion();
        }

        function generateQuestionNav() {
            const nav = document.getElementById('questionNav');
            nav.innerHTML = '';
            
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.createElement('button');
                btn.textContent = i + 1;
                btn.className = 'w-8 h-8 text-sm font-medium rounded transition-all duration-200';
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `navBtn_${i}`;
                nav.appendChild(btn);
            }
            
            updateQuestionNav();
        }

        function updateQuestionNav() {
            for (let i = 0; i < questionsData.length; i++) {
                const btn = document.getElementById(`navBtn_${i}`);
                const state = questionStates[i];
                let className = '';
                
                if (i === currentQuestionIndex) {
                    className = 'nav-btn-current';
                } else if (state.bookmarked) {
                    className = 'nav-btn-bookmarked';
                } else if (state.markedForReview) {
                    className = 'nav-btn-marked-review';
                } else if (currentMode === 'study' || currentMode === 'timed_study') {
                    if (state.status === 'correct') className = 'nav-btn-correct';
                    else if (state.status === 'incorrect') className = 'nav-btn-incorrect';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                } else {
                    if (state.selectedAnswer !== null) className = 'nav-btn-answered';
                    else className = 'nav-btn-not-attempted hover:bg-white hover:bg-opacity-20';
                }
                btn.className = `w-8 h-8 text-sm font-medium rounded ${className}`;
            }
        }

        function jumpToQuestion(index) {
            if (index >= 0 && index < questionsData.length) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex = index;
                displayQuestion();
            }
        }

        function updateStats() {
            if (currentMode === 'study' || currentMode === 'timed_study') {
                document.getElementById('correctCount').textContent = stats.correctAnswers;
                document.getElementById('incorrectCount').textContent = stats.incorrectAnswers;
                document.getElementById('totalAttempted').textContent = stats.totalAttempted;
                
                const accuracy = stats.totalAttempted > 0 
                    ? Math.round((stats.correctAnswers / stats.totalAttempted) * 100)
                    : 0;
                document.getElementById('accuracy').textContent = accuracy + '%';
                
                stats.totalTime = questionStates.reduce((acc, state) => acc + state.timeSpent, 0);
                const timeSpent = Math.floor(stats.totalTime / 1000);
                const minutes = Math.floor(timeSpent / 60);
                const seconds = timeSpent % 60;
                document.getElementById('timeSpent').textContent = 
                    minutes + ':' + seconds.toString().padStart(2, '0');
            }
        }

        function setupVideo(videoElement, url) {
            if (Hls.isSupported()) {
                const hls = new Hls();
                hls.loadSource(url);
                hls.attachMedia(videoElement);
            } else if (videoElement.canPlayType('application/vnd.apple.mpegurl')) {
                videoElement.src = url;
            }
        }

        function displayQuestion() {
            if (!questionsData || questionsData.length === 0) {
                document.getElementById('questionText').innerHTML = 'No questions available for this quiz.';
                return;
            };
            
            const question = questionsData[currentQuestionIndex];
            questionStartTime = Date.now();
            
            selectedOption = questionStates[currentQuestionIndex].selectedAnswer;
            
            const progress = ((currentQuestionIndex + 1) / questionsData.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            updateQuestionNav();
            
            document.getElementById('prevBtn').disabled = currentQuestionIndex === 0;
            
            document.getElementById('solutionContainer').classList.add('hidden');
            
            document.getElementById('questionText').innerHTML = question.text || 'No question text available';
            
            let mediaHtml = '';
            if (question.question_audio) mediaHtml += `<div class="glass-light p-4 mb-4"><audio src="${question.question_audio}" controls class="w-full"></audio></div>`;
            if (question.question_video) mediaHtml += `<div class="glass-light p-4 mb-4"><video src="${question.question_video}" controls class="w-full rounded-lg"></video></div>`;
            if (question.question_images) {
                question.question_images.forEach(imgSrc => {
                    if (imgSrc) mediaHtml += `<div class="glass-light p-4 mb-4"><img src="${imgSrc}" alt="Question Image" class="w-full rounded-lg"></div>`;
                });
            }
            document.getElementById('questionMedia').innerHTML = mediaHtml;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            optionsContainer.classList.remove('answered');
            
            if (question.choices && Array.isArray(question.choices)) {
                question.choices.forEach((choice, index) => {
                    const optionLetter = String.fromCharCode(65 + index);
                    const isSelected = selectedOption === index;
                    
                    const optionDiv = document.createElement('div');
                    optionDiv.innerHTML = `
                        <button type="button" class="option-button ${isSelected ? 'selected' : ''}" data-option-index="${index}">
                            <div class="option-letter">${optionLetter}</div>
                            <div class="option-text">${choice.text || 'Option ' + (index + 1)}</div>
                        </button>
                    `;
                    optionsContainer.appendChild(optionDiv);
                });
                
                optionsContainer.addEventListener('click', function(e) {
                    const optionButton = e.target.closest('.option-button');
                    if (optionButton) {
                        const optionIndex = parseInt(optionButton.getAttribute('data-option-index'));
                        selectOption(optionIndex);
                    }
                });
            }
            
            updateBookmarkButton();
            updateMarkReviewButton();

            if ((currentMode === 'timed_study' || currentMode === 'timed_exam') && !isQuizCompleted) {
                startTimer();
            }
        }

        function selectOption(index) {
            const optionsContainer = document.getElementById('optionsContainer');
            if (optionsContainer.classList.contains('answered')) return;

            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                questionStartTime = Date.now();
            }
            
            selectedOption = index;
            questionStates[currentQuestionIndex].selectedAnswer = index;
            
            document.querySelectorAll('.option-button').forEach((btn, i) => {
                btn.classList.toggle('selected', i === index);
            });
            
            if (currentMode === 'study' || currentMode === 'timed_study') {
                setTimeout(processAnswer, 300);
            } else {
                if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                    questionStates[currentQuestionIndex].status = 'answered';
                    stats.totalAttempted++;
                    stats.notAttempted--;
                }
                updateQuestionNav();
            }
        }

        function processAnswer() {
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            
            if(selectedOption === null) return;

            const selectedChoice = question.choices[selectedOption];
            const isCorrect = selectedChoice.id === correctChoiceId;
            
            if (questionStates[currentQuestionIndex].status === 'not_attempted') {
                stats.totalAttempted++;
                stats.notAttempted--;
                if(isCorrect) stats.correctAnswers++; else stats.incorrectAnswers++;
            }
            questionStates[currentQuestionIndex].status = isCorrect ? 'correct' : 'incorrect';
            
            updateStats();
            showInlineFeedback(isCorrect);
            updateQuestionNav();
        }

        function showInlineFeedback(isCorrect) {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;

            const optionsContainer = document.getElementById('optionsContainer');
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            const question = questionsData[currentQuestionIndex];
            const correctChoiceId = question.correct_choice_id;
            let correctOptionIndex = question.choices.findIndex(c => c.id === correctChoiceId);

            optionsContainer.classList.add('answered');

            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === correctOptionIndex) btn.classList.add('correct');
                else if (index === selectedOption && !isCorrect) btn.classList.add('incorrect');
            });

            setTimeout(showSolution, 1500);
        }


        function showSolution() {
            if (currentMode !== 'study' && currentMode !== 'timed_study') return;
            
            const question = questionsData[currentQuestionIndex];
            document.getElementById('solutionText').innerHTML = question.solution || 'No solution provided';
            
            const videoContainer = document.getElementById('solutionVideo');
            const videoPlayer = document.getElementById('explanationVideoPlayer');
            const explanationVideo = question.explanation_video;
            
            if (explanationVideo) {
                videoContainer.classList.remove('hidden');
                if (explanationVideo.includes('.m3u8')) setupVideo(videoPlayer, explanationVideo);
                else videoPlayer.src = explanationVideo;
            } else {
                videoContainer.classList.add('hidden');
            }

            const audioContainer = document.getElementById('solutionAudio');
            audioContainer.innerHTML = '';
            if (question.explanation_audio_eng) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English Explanation:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
            }
            if (question.explanation_audio_hin) {
                audioContainer.innerHTML += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish Explanation:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;
            }
            
            const imagesContainer = document.getElementById('solutionImages');
            imagesContainer.innerHTML = '';
            if (question.explanation_images) {
                 question.explanation_images.forEach(imgSrc => {
                    if(imgSrc) imagesContainer.innerHTML += `<div class="mt-4"><img src="${imgSrc}" alt="Explanation Image" class="w-full rounded-lg"></div>`;
                });
            }

            document.getElementById('solutionContainer').classList.remove('hidden');
        }

        function submitQuiz() {
            if (timer) clearInterval(timer);
            if (!confirm('Are you sure you want to submit the quiz?')) return;
            
            isQuizCompleted = true;
            let correct = 0, incorrect = 0;
            const totalTime = Date.now() - quizStartTime;
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                if (state.selectedAnswer !== null) {
                    if (question.choices[state.selectedAnswer].id === question.correct_choice_id) {
                        correct++;
                        state.status = 'correct';
                    } else {
                        incorrect++;
                        state.status = 'incorrect';
                    }
                }
            });
            
            // Save performance data
            const performanceData = JSON.parse(localStorage.getItem('quizPerformanceData')) || [];
            performanceData.push({
                quizName: quizName,
                hierarchy: hierarchy,
                timestamp: Date.now(),
                totalTime: totalTime,
                stats: {
                    correct: correct,
                    incorrect: incorrect,
                    notAttempted: questionsData.length - (correct + incorrect)
                }
            });
            localStorage.setItem('quizPerformanceData', JSON.stringify(performanceData));

            showPerformanceAnalysis(correct, incorrect, questionsData.length - (correct + incorrect), totalTime);
        }

        function showPerformanceAnalysis(correct, incorrect, notAttempted, totalTime) {
            const modal = document.getElementById('performanceModal');
            const accuracy = (correct + incorrect) > 0 ? Math.round((correct / (correct + incorrect)) * 100) : 0;
            
            const circumference = 2 * Math.PI * 65;
            const scoreCircle = document.getElementById('scoreCircle');
            scoreCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            scoreCircle.style.strokeDashoffset = circumference - (accuracy / 100) * circumference;
            
            document.getElementById('accuracyScore').textContent = `${accuracy}%`;
            document.getElementById('totalQuestionsResult').textContent = questionsData.length;
            document.getElementById('correctResult').textContent = correct;
            document.getElementById('incorrectResult').textContent = incorrect;
            document.getElementById('notAttemptedResult').textContent = notAttempted;
            
            const totalMinutes = Math.floor(totalTime / 60000);
            const totalSeconds = Math.floor((totalTime % 60000) / 1000);
            document.getElementById('totalTimeResult').textContent = `${totalMinutes}:${totalSeconds.toString().padStart(2, '0')}`;
            
            const avgTime = totalTime / questionsData.length;
            const avgMinutes = Math.floor(avgTime / 60000);
            const avgSeconds = Math.floor((avgTime % 60000) / 1000);
            document.getElementById('avgTimeResult').textContent = `${avgMinutes}:${avgSeconds.toString().padStart(2, '0')}`;
            
            modal.classList.remove('hidden');
        }

        function closePerformanceModal() { document.getElementById('performanceModal').classList.add('hidden'); }

        function reviewQuestions() {
            document.getElementById('questionReviewSection').classList.remove('hidden');
            const container = document.getElementById('reviewQuestionsContainer');
            container.innerHTML = '';
            
            questionsData.forEach((question, index) => {
                const state = questionStates[index];
                const correctChoiceId = question.correct_choice_id;
                
                let statusClass = 'not-attempted', statusText = 'Not Attempted';
                if (state.selectedAnswer !== null) {
                    const selectedChoice = question.choices[state.selectedAnswer];
                    if (selectedChoice.id === correctChoiceId) { statusClass = 'correct'; statusText = 'Correct'; }
                     else { statusClass = 'incorrect'; statusText = 'Incorrect'; }
                }
                
                const reviewDiv = document.createElement('div');
                reviewDiv.className = `review-question ${statusClass}`;
                
                let optionsHtml = (question.choices || []).map((choice, choiceIndex) => {
                    const isSelected = state.selectedAnswer === choiceIndex;
                    const isCorrect = choice.id === correctChoiceId;
                    let borderClass = 'border-gray-600';
                    if(isCorrect) borderClass = 'border-green-500';
                    else if(isSelected) borderClass = 'border-red-500';
                    
                    return `<div class="p-3 rounded-lg border ${borderClass}"><span class="font-bold mr-3">${String.fromCharCode(65 + choiceIndex)}</span><span>${choice.text}</span></div>`;
                }).join('');

                const videoHtml = question.explanation_video ? `<div class="mt-4"><video id="review-video-${index}" data-src="${question.explanation_video}" class="w-full rounded-lg" controls></video></div>` : '';
                
                let audioHtml = '';
                if(question.explanation_audio_eng) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">English:</p><audio src="${question.explanation_audio_eng}" controls class="w-full"></audio></div>`;
                if(question.explanation_audio_hin) audioHtml += `<div class="mt-2"><p class="text-sm text-white text-opacity-70 mb-1">Hinglish:</p><audio src="${question.explanation_audio_hin}" controls class="w-full"></audio></div>`;

                let imagesHtml = (question.explanation_images || []).map(src => src ? `<div class="mt-4"><img src="${src}" alt="Explanation Image" class="w-full rounded-lg"></div>` : '').join('');

                reviewDiv.innerHTML = `
                    <div class="mb-4">
                        <div class="flex justify-between items-center mb-3">
                            <h4 class="text-lg font-bold text-white">Question ${index + 1}</h4>
                            <span class="text-sm px-3 py-1 rounded-full bg-${statusClass === 'correct' ? 'green' : statusClass === 'incorrect' ? 'red' : 'gray'}-600 text-white">${statusText}</span>
                        </div>
                        <div class="text-white mb-4">${question.text}</div>
                    </div>
                    <div class="space-y-2 mb-4">${optionsHtml}</div>
                    <div class="bg-green-900 bg-opacity-20 p-4 rounded-lg border border-green-700">
                        <h5 class="text-green-400 font-bold mb-2">Explanation:</h5>
                        <div class="text-white text-opacity-90">${question.solution || 'No solution available.'}</div>
                        ${videoHtml}
                        ${audioHtml}
                        ${imagesHtml}
                    </div>`;
                container.appendChild(reviewDiv);
            });
            initializeReviewVideos();
        }

        function initializeReviewVideos() {
            document.querySelectorAll('video[data-src]').forEach(videoEl => {
                const src = videoEl.dataset.src;
                if (src && src.includes('.m3u8')) {
                    setupVideo(videoEl, src);
                } else if (src) {
                    videoEl.src = src;
                }
            });
        }

        function retakeQuiz() {
            if (confirm('Are you sure you want to retake the quiz? This will reset all your answers.')) {
                if (window.location.pathname.endsWith('custom_quiz.html')) {
                    localStorage.removeItem('customQuizData');
                }
                location.reload();
            }
        }

        function loadBookmarkedQuestions() {
            const bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            bookmarks.forEach(bookmark => {
                if (bookmark.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-'))) {
                    if (bookmark.questionIndex < questionsData.length) {
                        questionStates[bookmark.questionIndex].bookmarked = true;
                    }
                }
            });
        }

        function toggleBookmark() {
            const isBookmarked = !questionStates[currentQuestionIndex].bookmarked;
            questionStates[currentQuestionIndex].bookmarked = isBookmarked;
            
            let bookmarks = JSON.parse(localStorage.getItem('bookmarkedQuestions')) || [];
            
            if (isBookmarked) {
                const bookmarkData = {
                    quizName: quizName,
                    quizFile: window.location.pathname.split('/').pop(),
                    questionIndex: currentQuestionIndex,
                    question: questionsData[currentQuestionIndex],
                    hierarchy: hierarchy,
                    timestamp: Date.now()
                };
                bookmarks.push(bookmarkData);
            } else {
                bookmarks = bookmarks.filter(b => 
                    !(b.quizFile.includes(quizName.toLowerCase().replace(/ /g, '-')) && b.questionIndex === currentQuestionIndex)
                );
            }
            
            localStorage.setItem('bookmarkedQuestions', JSON.stringify(bookmarks));
            updateBookmarkButton();
            updateQuestionNav();
        }

        function updateBookmarkButton() {
            const btn = document.getElementById('bookmarkBtn');
            const text = document.getElementById('bookmarkText');
            const isBookmarked = questionStates[currentQuestionIndex].bookmarked;
            
            btn.className = isBookmarked ? 'gradient-yellow px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-yellow-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isBookmarked ? 'Bookmarked' : 'Bookmark';
        }
        
        function toggleMarkForReview() {
            questionStates[currentQuestionIndex].markedForReview = !questionStates[currentQuestionIndex].markedForReview;
            updateMarkReviewButton();
            updateQuestionNav();
        }

        function updateMarkReviewButton() {
            const btn = document.getElementById('markReviewBtn');
            const text = document.getElementById('markReviewText');
            const isMarked = questionStates[currentQuestionIndex].markedForReview;
            
            btn.className = isMarked ? 'gradient-purple px-6 py-3 text-white transition-all duration-300 flex items-center' : 'glass-light px-6 py-3 text-white hover:bg-purple-500 hover:bg-opacity-20 transition-all duration-300 flex items-center';
            text.textContent = isMarked ? 'Marked' : 'Mark for Review';
        }

        function previousQuestion() {
            if (currentQuestionIndex > 0) {
                if (questionStartTime) {
                    questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
                }
                
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function nextQuestion() {
            if (questionStartTime) {
                questionStates[currentQuestionIndex].timeSpent += Date.now() - questionStartTime;
            }
            
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            } else {
                if (currentMode === 'test' || currentMode === 'timed_exam') {
                    if (confirm('You have reached the end of the quiz. Would you like to submit your answers now?')) {
                        submitQuiz();
                    }
                } else {
                    if (confirm('You have completed all questions. Would you like to review from the beginning?')) {
                        currentQuestionIndex = 0;
                        displayQuestion();
                    }
                }
            }
        }

        function startTimer() {
            if (timer) clearInterval(timer);
            timeRemaining = 120; // 2 minutes per question
            updateTimerDisplay();
            
            timer = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    if (currentMode === 'timed_exam') {
                        submitQuiz();
                    } else {
                        nextQuestion();
                    }
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timeDisplay').textContent = 
                minutes + ':' + seconds.toString().padStart(2, '0');
        }

        function toggleSidebar() {
            document.getElementById('quizSidebar').classList.toggle('open');
        }

        document.addEventListener('DOMContentLoaded', () => {
             if (!window.location.pathname.endsWith('custom_quiz.html')) {
                document.getElementById('modeModal').style.display = 'flex';
             } else {
                initializeQuiz();
             }
        });
        
        document.addEventListener('keydown', function(e) {
            if (document.getElementById('modeModal').style.display !== 'none') return;
            if (document.getElementById('performanceModal').classList.contains('hidden') === false) return;
            
            if (e.key >= '1' && e.key <= '4') {
                const optionIndex = parseInt(e.key) - 1;
                const options = document.querySelectorAll('.option-button');
                if (optionIndex < options.length) selectOption(optionIndex);
            } else if (e.key === 'ArrowLeft') {
                previousQuestion();
            } else if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextQuestion();
            } else if (e.key.toLowerCase() === 'b' && (currentMode === 'study' || currentMode === 'timed_study')) {
                toggleBookmark();
            } else if (e.key.toLowerCase() === 'm' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                toggleMarkForReview();
            } else if (e.key.toLowerCase() === 's' && (currentMode === 'test' || currentMode === 'timed_exam')) {
                submitQuiz();
            }
        });
    </script>
</body>
</html>